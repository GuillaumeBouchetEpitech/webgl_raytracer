var __defProp = Object.defineProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, {
      get: all[name],
      enumerable: true,
      configurable: true,
      set: (newValue) => all[name] = () => newValue
    });
};

// src/local-framework/system/index.ts
var exports_system = {};
__export(exports_system, {
  utilities: () => {
    {
      return exports_utilities;
    }
  },
  rng: () => {
    {
      return exports_rng;
    }
  },
  metrics: () => {
    {
      return exports_metrics;
    }
  },
  math: () => {
    {
      return exports_math;
    }
  },
  controllers: () => {
    {
      return exports_controllers;
    }
  },
  browser: () => {
    {
      return exports_browser;
    }
  }
});

// src/local-framework/system/browser/index.ts
var exports_browser = {};
__export(exports_browser, {
  isWebWorkerSupported: () => {
    {
      return isWebWorkerSupported;
    }
  },
  isWebGL2Supported: () => {
    {
      return isWebGL2Supported;
    }
  },
  isNumber: () => {
    {
      return isNumber;
    }
  },
  isLetter: () => {
    {
      return isLetter;
    }
  },
  isAlphanumeric: () => {
    {
      return isAlphanumeric;
    }
  },
  GlobalVisibilityManager: () => {
    {
      return GlobalVisibilityManager;
    }
  },
  GlobalTouchManager: () => {
    {
      return GlobalTouchManager;
    }
  },
  GlobalPointerLockManager: () => {
    {
      return GlobalPointerLockManager;
    }
  },
  GlobalMouseManager: () => {
    {
      return GlobalMouseManager;
    }
  },
  GlobalKeyboardManager: () => {
    {
      return GlobalKeyboardManager;
    }
  },
  GlobalFullScreenManager: () => {
    {
      return GlobalFullScreenManager;
    }
  },
  AllKeyCodes: () => {
    {
      return AllKeyCodes;
    }
  }
});

// src/local-framework/system/browser/FullScreenManager.ts
var allRequestEvents = [
  "requestFullscreen",
  "webkitRequestFullscreen",
  "mozRequestFullScreen",
  "msRequestFullscreen"
];
var allChangeEvents = [
  "fullscreenchange",
  "webkitfullscreenchange",
  "mozfullscreenchange",
  "msfullscreenchange"
];

class FullScreenManager {
  _onFullScreenChangeCallbacks = [];
  _isInitialized = false;
  _initialize() {
    if (this._isInitialized) {
      return;
    }
    this._isInitialized = true;
    const onLockChange = () => {
      this._onFullScreenChangeCallbacks.forEach((callback) => callback());
    };
    for (const currEvent of allChangeEvents)
      document.addEventListener(currEvent, onLockChange, false);
  }
  isCompatible(inTargetElement) {
    for (const currEvent of allRequestEvents) {
      if (currEvent in inTargetElement) {
        return true;
      }
    }
    return false;
  }
  isFullScreen(inTargetElement) {
    return document.fullscreenElement === inTargetElement;
  }
  async requestFullScreen(inTargetElement) {
    if (this.isFullScreen(inTargetElement)) {
      return { success: false, message: "element already in full screen" };
    }
    this._initialize();
    for (const currEvent of allRequestEvents) {
      if (currEvent in inTargetElement) {
        inTargetElement[currEvent]();
        return { success: true, message: "request for full screen done" };
      }
    }
    return { success: false, message: "unsupported request for full screen" };
  }
  addOnFullScreenChange(inCallback) {
    this._onFullScreenChangeCallbacks.push(inCallback);
  }
  removeOnFullScreenChange(inCallback) {
    const index = this._onFullScreenChangeCallbacks.indexOf(inCallback);
    if (index < 0) {
      return;
    }
    this._onFullScreenChangeCallbacks.splice(index, 1);
  }
  removeAllCallbacks() {
    this._onFullScreenChangeCallbacks.length = 0;
  }
}
var GlobalFullScreenManager = new FullScreenManager;
// src/local-framework/system/browser/KeyCodes.ts
var AllKeyCodes = {
  Num0: 48,
  Num1: 49,
  Num2: 50,
  Num3: 51,
  Num4: 52,
  Num5: 53,
  Num6: 54,
  Num7: 55,
  Num8: 56,
  Num9: 57,
  A: 65,
  B: 66,
  C: 67,
  D: 68,
  E: 69,
  F: 70,
  G: 71,
  H: 72,
  I: 73,
  J: 74,
  K: 75,
  L: 76,
  M: 77,
  N: 78,
  O: 79,
  P: 80,
  Q: 81,
  R: 82,
  S: 83,
  T: 84,
  U: 85,
  V: 86,
  W: 87,
  X: 88,
  Y: 89,
  Z: 90,
  Semicolon: 186,
  Equal: 187,
  Comma: 188,
  Minus: 189,
  Period: 190,
  BackQuote: 192,
  BracketLeft: 219,
  Backslash: 220,
  BracketRight: 221,
  Quote: 222,
  Shift: 16,
  Ctrl: 17,
  Alt: 18,
  CapsLock: 20,
  Tab: 9,
  Enter: 13,
  Pause: 19,
  Escape: 27,
  Space: 32,
  PageUp: 33,
  PageDown: 34,
  End: 35,
  Home: 36,
  ArrowLeft: 37,
  ArrowUp: 38,
  ArrowRight: 39,
  ArrowDown: 40,
  PrintScreen: 44,
  Insert: 45,
  Delete: 46,
  ContextMenu: 93,
  ScrollLock: 145,
  F1: 112,
  F2: 113,
  F3: 114,
  F4: 115,
  F5: 116,
  F6: 117,
  F7: 118,
  F8: 119,
  F9: 120,
  F10: 121,
  F11: 122,
  F12: 123,
  F13: 124,
  F14: 125,
  F15: 126,
  F16: 127,
  F17: 128,
  F18: 129,
  F19: 130,
  F20: 131,
  F21: 132,
  F22: 133,
  F23: 134,
  F24: 135,
  NumPad0: 96,
  NumPad1: 97,
  NumPad2: 98,
  NumPad3: 99,
  NumPad4: 100,
  NumPad5: 101,
  NumPad6: 102,
  NumPad7: 103,
  NumPad8: 104,
  NumPad9: 105,
  NumPadMultiply: 106,
  NumPadAdd: 107,
  NumPadSubtract: 109,
  NumPadDecimal: 110,
  NumPadDivide: 111,
  NumLock: 144,
  NumPadComma: 194,
  NumPadEqual: 12
};
var isLetter = (key) => {
  return key >= AllKeyCodes.A && key <= AllKeyCodes.Z;
};
var isNumber = (key) => {
  return key >= AllKeyCodes.Num0 && key <= AllKeyCodes.Num9 || key >= AllKeyCodes.NumPad0 && key <= AllKeyCodes.NumPad9;
};
var isAlphanumeric = (key) => {
  return isNumber(key) || isLetter(key);
};

// src/local-framework/system/browser/KeyboardManager.ts
class KeyboardManager {
  _pressedKeysSet = new Set;
  _preventDefaultKeysSet = new Set;
  _activated = false;
  _handleKeyDown;
  _handleKeyUp;
  _onEvent;
  constructor() {
    const handleKeyDown = (event) => {
      const { keyCode } = event;
      if (this._onEvent) {
        this._onEvent();
      }
      if (this._preventDefaultKeysSet.has(keyCode)) {
        event.preventDefault();
      }
      this._pressedKeysSet.add(keyCode);
    };
    const handleKeyUp = (event) => {
      const { keyCode } = event;
      if (this._onEvent) {
        this._onEvent();
      }
      if (this._preventDefaultKeysSet.has(keyCode)) {
        event.preventDefault();
      }
      this._pressedKeysSet.delete(keyCode);
    };
    this._activated = false;
    this._handleKeyDown = handleKeyDown.bind(this);
    this._handleKeyUp = handleKeyUp.bind(this);
  }
  isPressed(...inKeys) {
    for (const key of inKeys) {
      if (this._pressedKeysSet.has(AllKeyCodes[key])) {
        return true;
      }
    }
    return false;
  }
  preventDefault(inKey) {
    this._preventDefaultKeysSet.add(AllKeyCodes[inKey]);
  }
  enableDefault(inKey) {
    this._preventDefaultKeysSet.delete(AllKeyCodes[inKey]);
  }
  activate() {
    if (this._activated) {
      return;
    }
    this._pressedKeysSet.clear();
    document.addEventListener("keydown", this._handleKeyDown);
    document.addEventListener("keyup", this._handleKeyUp);
    this._activated = true;
  }
  deactivate() {
    if (!this._activated) {
      return;
    }
    this._pressedKeysSet.clear();
    document.removeEventListener("keydown", this._handleKeyDown);
    document.removeEventListener("keyup", this._handleKeyUp);
    this._activated = false;
  }
  onEvent(callback) {
    this._onEvent = callback;
  }
}
var GlobalKeyboardManager = new KeyboardManager;
// src/local-framework/system/browser/MouseManager.ts
var AllMouseButtons = {
  Left: 0,
  Middle: 1,
  Right: 2
};

class MouseManager {
  _pressedButtonsSet = new Set;
  _activated = false;
  _handleMouseDown;
  _handleMouseUp;
  _handleMouseMove;
  _handleMouseWheel;
  _positionX = 0;
  _positionY = 0;
  _deltaX = 0;
  _deltaY = 0;
  _wheelDeltaY = 0;
  _onEvent;
  constructor() {
    const handleMouseDown = (event) => {
      if (this._onEvent) {
        this._onEvent();
      }
      this._positionX = event.pageX;
      this._positionY = event.pageY;
      this._pressedButtonsSet.add(event.button);
    };
    const handleMouseUp = (event) => {
      if (this._onEvent) {
        this._onEvent();
      }
      this._positionX = event.pageX;
      this._positionY = event.pageY;
      this._pressedButtonsSet.delete(event.button);
    };
    const handleMouseMove = (event) => {
      if (this._onEvent) {
        this._onEvent();
      }
      this._positionX = event.pageX;
      this._positionY = event.pageY;
      this._deltaX += event.movementX || event.mozMovementX || event.webkitMovementX || 0;
      this._deltaY += event.movementY || event.mozMovementY || event.webkitMovementY || 0;
    };
    const handleWheelEvent = (event) => {
      if (this._onEvent) {
        this._onEvent();
      }
      this._wheelDeltaY += event.deltaY || 0;
    };
    this._activated = false;
    this._handleMouseDown = handleMouseDown.bind(this);
    this._handleMouseUp = handleMouseUp.bind(this);
    this._handleMouseMove = handleMouseMove.bind(this);
    this._handleMouseWheel = handleWheelEvent.bind(this);
  }
  activate(domElement) {
    if (this._activated) {
      return;
    }
    this._pressedButtonsSet.clear();
    domElement.addEventListener("mousedown", this._handleMouseDown);
    domElement.addEventListener("mouseup", this._handleMouseUp);
    domElement.addEventListener("mousemove", this._handleMouseMove);
    domElement.addEventListener("wheel", this._handleMouseWheel);
    this._activated = true;
  }
  deactivate(domElement) {
    if (!this._activated) {
      return;
    }
    this._pressedButtonsSet.clear();
    domElement.removeEventListener("mousedown", this._handleMouseDown);
    domElement.removeEventListener("mouseup", this._handleMouseUp);
    domElement.removeEventListener("mousemove", this._handleMouseMove);
    domElement.removeEventListener("wheel", this._handleMouseWheel);
    this._activated = false;
  }
  isButtonPressed(inKey) {
    return this._pressedButtonsSet.has(AllMouseButtons[inKey]);
  }
  get positionX() {
    return this._positionX;
  }
  get positionY() {
    return this._positionY;
  }
  deltaX() {
    return this._deltaX;
  }
  deltaY() {
    return this._deltaY;
  }
  wheelDeltaY() {
    return this._wheelDeltaY;
  }
  resetDeltas() {
    this._deltaX = 0;
    this._deltaY = 0;
    this._wheelDeltaY = 0;
  }
  onEvent(callback) {
    this._onEvent = callback;
  }
}
var GlobalMouseManager = new MouseManager;
// src/local-framework/system/browser/PointerLockManager.ts
var allRequestEvents2 = [
  "requestPointerLock",
  "mozRequestPointerLock",
  "webkitRequestPointerLock"
];
var allExitEvents = [
  "exitPointerLock",
  "mozExitPointerLock",
  "webkitExitPointerLock"
];
var allStateEvents = [
  "pointerLockElement",
  "mozPointerLockElement",
  "webkitPointerLockElement"
];
var allChangeEvents2 = [
  { methodName: "onpointerlockchange", propertyName: "pointerlockchange" },
  {
    methodName: "onmozpointerlockchange",
    propertyName: "mozpointerlockchange"
  },
  {
    methodName: "onwebkitpointerlockchange",
    propertyName: "webkitpointerlockchange"
  }
];
var allErrorEvents = [
  { methodName: "onpointerlockerror", propertyName: "pointerlockerror" },
  { methodName: "onmozpointerlockerror", propertyName: "mozpointerlockerror" },
  {
    methodName: "onwebkitpointerlockerror",
    propertyName: "webkitpointerlockerror"
  }
];

class PointerLockManager {
  _onLockChangeCallbacks = [];
  _onLockErrorCallbacks = [];
  _timeSinceLastLockChange = 0;
  _latestRequestHtmlElement;
  _isInitialized = false;
  _initialize() {
    if (this._isInitialized) {
      return;
    }
    this._isInitialized = true;
    const onLockChange = () => {
      this._timeSinceLastLockChange = Date.now();
      this._onLockChangeCallbacks.forEach((callback) => callback());
    };
    const onLockError = (event) => {
      this._timeSinceLastLockChange = Date.now();
      this._onLockErrorCallbacks.forEach((callback) => callback(event));
    };
    for (const currEvent of allChangeEvents2) {
      if (currEvent.methodName in document) {
        document.addEventListener(currEvent.propertyName, onLockChange, false);
        break;
      }
    }
    for (const currEvent of allErrorEvents) {
      if (currEvent.methodName in document) {
        document.addEventListener(currEvent.propertyName, onLockError, false);
        break;
      }
    }
  }
  canBePointerLocked(inTargetElement) {
    for (const currEvent of allRequestEvents2) {
      if (currEvent in inTargetElement) {
        return true;
      }
    }
    return false;
  }
  isPointerLocked(inTargetElement) {
    for (const currEvent of allStateEvents) {
      if (currEvent in document) {
        return document[currEvent] === inTargetElement;
      }
    }
    return false;
  }
  async requestPointerLock(inTargetElement) {
    if (this.isPointerLocked(inTargetElement)) {
      return { success: false, message: "element already locked" };
    }
    this._initialize();
    if (this._timeSinceLastLockChange > 0) {
      const elapsedSecTime = (Date.now() - this._timeSinceLastLockChange) / 1000;
      if (elapsedSecTime < 1.1) {
        return {
          success: false,
          message: `request for lock was too early, time to wait: ${elapsedSecTime.toFixed(2)}sec`
        };
      }
    }
    this._timeSinceLastLockChange = Date.now();
    for (const currEvent of allRequestEvents2) {
      if (currEvent in inTargetElement) {
        const options = {
          unadjustedMovement: false
        };
        try {
          await inTargetElement[currEvent](options);
        } catch (err) {
          const elapsedSecTime = (Date.now() - this._timeSinceLastLockChange) / 1000;
          return {
            success: false,
            message: `request for lock was too early, time to wait: ${elapsedSecTime.toFixed(2)}sec`
          };
        }
        this._timeSinceLastLockChange = Date.now();
        return { success: true, message: "request for lock done" };
      }
    }
    return { success: false, message: "unsupported request for lock" };
  }
  allowPointerLockedOnClickEvent(inTargetElement) {
    if (inTargetElement === this._latestRequestHtmlElement) {
      return;
    }
    this._latestRequestHtmlElement = inTargetElement;
    const onClick = async () => {
      inTargetElement.removeEventListener("click", onClick);
      const result = await this.requestPointerLock(inTargetElement);
      this._latestRequestHtmlElement = undefined;
      if (!result.success) {
        this.allowPointerLockedOnClickEvent(inTargetElement);
      }
    };
    inTargetElement.addEventListener("click", onClick);
  }
  exitPointerLock() {
    for (const currEvent of allExitEvents) {
      if (currEvent in document) {
        document[currEvent]();
        break;
      }
    }
  }
  addOnLockChange(inCallback) {
    this._onLockChangeCallbacks.push(inCallback);
  }
  removeOnLockChange(inCallback) {
    const index = this._onLockChangeCallbacks.indexOf(inCallback);
    if (index < 0) {
      return;
    }
    this._onLockChangeCallbacks.splice(index, 1);
  }
  addOnLockError(inCallback) {
    this._onLockErrorCallbacks.push(inCallback);
  }
  removeOnLockError(inCallback) {
    const index = this._onLockErrorCallbacks.indexOf(inCallback);
    if (index < 0) {
      return;
    }
    this._onLockErrorCallbacks.splice(index, 1);
  }
  removeAllCallbacks() {
    this._onLockChangeCallbacks.length = 0;
    this._onLockErrorCallbacks.length = 0;
  }
}
var GlobalPointerLockManager = new PointerLockManager;
// src/local-framework/system/browser/TouchManager.ts
class TouchData {
  id;
  createdAt = Date.now();
  positionX;
  positionY;
  deltaX = 0;
  deltaY = 0;
  constructor(id, positionX, positionY) {
    this.id = id;
    this.positionX = positionX;
    this.positionY = positionY;
  }
  resetDelta() {
    this.deltaX = 0;
    this.deltaY = 0;
  }
}

class TouchManager {
  _activated = false;
  _allTouchDataMap = new Map;
  _allCachedTouchDataArray = [];
  _handleTouchStart;
  _handleTouchEnd;
  _handleTouchMove;
  _onEvent;
  constructor() {
    const handleTouchStart = (event) => {
      event.preventDefault();
      if (this._onEvent) {
        this._onEvent();
      }
      for (let ii = 0;ii < event.changedTouches.length; ++ii) {
        const { identifier, pageX, pageY } = event.changedTouches[ii];
        const newData = new TouchData(identifier, pageX, pageY);
        this._allTouchDataMap.set(`${identifier}`, newData);
        this._allCachedTouchDataArray.length = 0;
      }
    };
    const handleTouchEnd = (event) => {
      event.preventDefault();
      if (this._onEvent) {
        this._onEvent();
      }
      for (let ii = 0;ii < event.changedTouches.length; ++ii) {
        const { identifier } = event.changedTouches[ii];
        this._allTouchDataMap.delete(`${identifier}`);
        this._allCachedTouchDataArray.length = 0;
      }
    };
    const handleTouchMove = (event) => {
      event.preventDefault();
      if (this._onEvent) {
        this._onEvent();
      }
      for (let ii = 0;ii < event.changedTouches.length; ++ii) {
        const { identifier, pageX, pageY } = event.changedTouches[ii];
        const currData = this._allTouchDataMap.get(`${identifier}`);
        if (!currData) {
          continue;
        }
        const deltaX = pageX - currData.positionX;
        const deltaY = pageY - currData.positionY;
        currData.deltaX += deltaX;
        currData.deltaY += deltaY;
        currData.positionX = pageX;
        currData.positionY = pageY;
      }
    };
    this._activated = false;
    this._handleTouchStart = handleTouchStart.bind(this);
    this._handleTouchEnd = handleTouchEnd.bind(this);
    this._handleTouchMove = handleTouchMove.bind(this);
  }
  isSupported(inTargetElement) {
    return "ontouchstart" in inTargetElement;
  }
  activate(inTargetElement) {
    if (!this.isSupported(inTargetElement)) {
      return;
    }
    if (this._activated) {
      return;
    }
    this._allTouchDataMap.clear();
    this._allCachedTouchDataArray.length = 0;
    inTargetElement.addEventListener("touchstart", this._handleTouchStart);
    inTargetElement.addEventListener("touchend", this._handleTouchEnd);
    inTargetElement.addEventListener("touchcancel", this._handleTouchEnd);
    inTargetElement.addEventListener("touchmove", this._handleTouchMove, {
      passive: false
    });
    this._activated = true;
  }
  deactivate(inTargetElement) {
    if (!this._activated) {
      return;
    }
    this._allTouchDataMap.clear();
    this._allCachedTouchDataArray.length = 0;
    inTargetElement.removeEventListener("touchstart", this._handleTouchStart);
    inTargetElement.removeEventListener("touchend", this._handleTouchEnd);
    inTargetElement.removeEventListener("touchcancel", this._handleTouchEnd);
    inTargetElement.removeEventListener("touchmove", this._handleTouchMove);
    this._activated = false;
  }
  _refreshCache() {
    if (this._allCachedTouchDataArray.length === 0) {
      this._allCachedTouchDataArray = [...this._allTouchDataMap.values()];
    }
  }
  getTouchData() {
    this._refreshCache();
    return this._allCachedTouchDataArray;
  }
  resetDeltas() {
    this._refreshCache();
    this._allCachedTouchDataArray.forEach((item) => item.resetDelta());
  }
  onEvent(callback) {
    this._onEvent = callback;
  }
}
var GlobalTouchManager = new TouchManager;
// src/local-framework/system/browser/VisibilityManager.ts
class VisibilityManager {
  _activated = false;
  _onVisibilityChangeCallbacks = [];
  _handleVisibilityChange;
  constructor() {
    const handleVisibilityChange = () => {
      const isVisible = this.isVisible();
      this._onVisibilityChangeCallbacks.forEach((callback) => callback(isVisible));
    };
    this._handleVisibilityChange = handleVisibilityChange.bind(this);
  }
  activate() {
    if (!this.isSupported()) {
      return;
    }
    if (this._activated) {
      return;
    }
    document.addEventListener("visibilitychange", this._handleVisibilityChange, false);
    this._activated = true;
  }
  deactivate() {
    if (!this._activated) {
      return;
    }
    document.removeEventListener("visibilitychange", this._handleVisibilityChange, false);
    this._activated = false;
  }
  isSupported() {
    return "onvisibilitychange" in document;
  }
  isVisible() {
    return document.visibilityState === "visible";
  }
  addVisibilityChange(inCallback) {
    this._onVisibilityChangeCallbacks.push(inCallback);
  }
  removeVisibilityChange(inCallback) {
    const index = this._onVisibilityChangeCallbacks.indexOf(inCallback);
    if (index < 0) {
      return;
    }
    this._onVisibilityChangeCallbacks.splice(index, 1);
  }
  removeAllCallbacks() {
    this._onVisibilityChangeCallbacks.length = 0;
  }
}
var GlobalVisibilityManager = new VisibilityManager;
// src/local-framework/system/browser/isWebWorkerSupported.ts
var isWebWorkerSupported = () => {
  return !!window.Worker;
};
// src/local-framework/system/browser/isWebGL2Supported.ts
var isWebGL2Supported = () => {
  return !!window.WebGL2RenderingContext;
};
// src/local-framework/system/controllers/index.ts
var exports_controllers = {};
__export(exports_controllers, {
  FreeFlyController: () => {
    {
      return FreeFlyController;
    }
  }
});

// node_modules/gl-matrix/esm/common.js
var EPSILON = 0.000001;
var ARRAY_TYPE = typeof Float32Array !== "undefined" ? Float32Array : Array;
var RANDOM = Math.random;
var degree = Math.PI / 180;
if (!Math.hypot)
  Math.hypot = function() {
    var y = 0, i = arguments.length;
    while (i--) {
      y += arguments[i] * arguments[i];
    }
    return Math.sqrt(y);
  };

// node_modules/gl-matrix/esm/mat3.js
function create() {
  var out = new ARRAY_TYPE(9);
  if (ARRAY_TYPE != Float32Array) {
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
  }
  out[0] = 1;
  out[4] = 1;
  out[8] = 1;
  return out;
}

// node_modules/gl-matrix/esm/mat4.js
var exports_mat4 = {};
__export(exports_mat4, {
  transpose: () => {
    {
      return transpose;
    }
  },
  translate: () => {
    {
      return translate;
    }
  },
  targetTo: () => {
    {
      return targetTo;
    }
  },
  subtract: () => {
    {
      return subtract;
    }
  },
  sub: () => {
    {
      return sub;
    }
  },
  str: () => {
    {
      return str;
    }
  },
  set: () => {
    {
      return set;
    }
  },
  scale: () => {
    {
      return scale;
    }
  },
  rotateZ: () => {
    {
      return rotateZ;
    }
  },
  rotateY: () => {
    {
      return rotateY;
    }
  },
  rotateX: () => {
    {
      return rotateX;
    }
  },
  rotate: () => {
    {
      return rotate;
    }
  },
  perspectiveZO: () => {
    {
      return perspectiveZO;
    }
  },
  perspectiveNO: () => {
    {
      return perspectiveNO;
    }
  },
  perspectiveFromFieldOfView: () => {
    {
      return perspectiveFromFieldOfView;
    }
  },
  perspective: () => {
    {
      return perspective;
    }
  },
  orthoZO: () => {
    {
      return orthoZO;
    }
  },
  orthoNO: () => {
    {
      return orthoNO;
    }
  },
  ortho: () => {
    {
      return ortho;
    }
  },
  multiplyScalarAndAdd: () => {
    {
      return multiplyScalarAndAdd;
    }
  },
  multiplyScalar: () => {
    {
      return multiplyScalar;
    }
  },
  multiply: () => {
    {
      return multiply;
    }
  },
  mul: () => {
    {
      return mul;
    }
  },
  lookAt: () => {
    {
      return lookAt;
    }
  },
  invert: () => {
    {
      return invert;
    }
  },
  identity: () => {
    {
      return identity;
    }
  },
  getTranslation: () => {
    {
      return getTranslation;
    }
  },
  getScaling: () => {
    {
      return getScaling;
    }
  },
  getRotation: () => {
    {
      return getRotation;
    }
  },
  frustum: () => {
    {
      return frustum;
    }
  },
  fromZRotation: () => {
    {
      return fromZRotation;
    }
  },
  fromYRotation: () => {
    {
      return fromYRotation;
    }
  },
  fromXRotation: () => {
    {
      return fromXRotation;
    }
  },
  fromValues: () => {
    {
      return fromValues;
    }
  },
  fromTranslation: () => {
    {
      return fromTranslation;
    }
  },
  fromScaling: () => {
    {
      return fromScaling;
    }
  },
  fromRotationTranslationScaleOrigin: () => {
    {
      return fromRotationTranslationScaleOrigin;
    }
  },
  fromRotationTranslationScale: () => {
    {
      return fromRotationTranslationScale;
    }
  },
  fromRotationTranslation: () => {
    {
      return fromRotationTranslation;
    }
  },
  fromRotation: () => {
    {
      return fromRotation;
    }
  },
  fromQuat2: () => {
    {
      return fromQuat2;
    }
  },
  fromQuat: () => {
    {
      return fromQuat;
    }
  },
  frob: () => {
    {
      return frob;
    }
  },
  exactEquals: () => {
    {
      return exactEquals;
    }
  },
  equals: () => {
    {
      return equals;
    }
  },
  determinant: () => {
    {
      return determinant;
    }
  },
  create: () => {
    {
      return create2;
    }
  },
  copy: () => {
    {
      return copy;
    }
  },
  clone: () => {
    {
      return clone;
    }
  },
  adjoint: () => {
    {
      return adjoint;
    }
  },
  add: () => {
    {
      return add;
    }
  }
});
function create2() {
  var out = new ARRAY_TYPE(16);
  if (ARRAY_TYPE != Float32Array) {
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
  }
  out[0] = 1;
  out[5] = 1;
  out[10] = 1;
  out[15] = 1;
  return out;
}
function clone(a) {
  var out = new ARRAY_TYPE(16);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  out[4] = a[4];
  out[5] = a[5];
  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  out[9] = a[9];
  out[10] = a[10];
  out[11] = a[11];
  out[12] = a[12];
  out[13] = a[13];
  out[14] = a[14];
  out[15] = a[15];
  return out;
}
function copy(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  out[4] = a[4];
  out[5] = a[5];
  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  out[9] = a[9];
  out[10] = a[10];
  out[11] = a[11];
  out[12] = a[12];
  out[13] = a[13];
  out[14] = a[14];
  out[15] = a[15];
  return out;
}
function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
  var out = new ARRAY_TYPE(16);
  out[0] = m00;
  out[1] = m01;
  out[2] = m02;
  out[3] = m03;
  out[4] = m10;
  out[5] = m11;
  out[6] = m12;
  out[7] = m13;
  out[8] = m20;
  out[9] = m21;
  out[10] = m22;
  out[11] = m23;
  out[12] = m30;
  out[13] = m31;
  out[14] = m32;
  out[15] = m33;
  return out;
}
function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
  out[0] = m00;
  out[1] = m01;
  out[2] = m02;
  out[3] = m03;
  out[4] = m10;
  out[5] = m11;
  out[6] = m12;
  out[7] = m13;
  out[8] = m20;
  out[9] = m21;
  out[10] = m22;
  out[11] = m23;
  out[12] = m30;
  out[13] = m31;
  out[14] = m32;
  out[15] = m33;
  return out;
}
function identity(out) {
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = 1;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 1;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function transpose(out, a) {
  if (out === a) {
    var a01 = a[1], a02 = a[2], a03 = a[3];
    var a12 = a[6], a13 = a[7];
    var a23 = a[11];
    out[1] = a[4];
    out[2] = a[8];
    out[3] = a[12];
    out[4] = a01;
    out[6] = a[9];
    out[7] = a[13];
    out[8] = a02;
    out[9] = a12;
    out[11] = a[14];
    out[12] = a03;
    out[13] = a13;
    out[14] = a23;
  } else {
    out[0] = a[0];
    out[1] = a[4];
    out[2] = a[8];
    out[3] = a[12];
    out[4] = a[1];
    out[5] = a[5];
    out[6] = a[9];
    out[7] = a[13];
    out[8] = a[2];
    out[9] = a[6];
    out[10] = a[10];
    out[11] = a[14];
    out[12] = a[3];
    out[13] = a[7];
    out[14] = a[11];
    out[15] = a[15];
  }
  return out;
}
function invert(out, a) {
  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
  var b00 = a00 * a11 - a01 * a10;
  var b01 = a00 * a12 - a02 * a10;
  var b02 = a00 * a13 - a03 * a10;
  var b03 = a01 * a12 - a02 * a11;
  var b04 = a01 * a13 - a03 * a11;
  var b05 = a02 * a13 - a03 * a12;
  var b06 = a20 * a31 - a21 * a30;
  var b07 = a20 * a32 - a22 * a30;
  var b08 = a20 * a33 - a23 * a30;
  var b09 = a21 * a32 - a22 * a31;
  var b10 = a21 * a33 - a23 * a31;
  var b11 = a22 * a33 - a23 * a32;
  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
  if (!det) {
    return null;
  }
  det = 1 / det;
  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;
  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;
  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;
  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;
  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;
  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;
  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;
  return out;
}
function adjoint(out, a) {
  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);
  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));
  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);
  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));
  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));
  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);
  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));
  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);
  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);
  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));
  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);
  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));
  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));
  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);
  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));
  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);
  return out;
}
function determinant(a) {
  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
  var b00 = a00 * a11 - a01 * a10;
  var b01 = a00 * a12 - a02 * a10;
  var b02 = a00 * a13 - a03 * a10;
  var b03 = a01 * a12 - a02 * a11;
  var b04 = a01 * a13 - a03 * a11;
  var b05 = a02 * a13 - a03 * a12;
  var b06 = a20 * a31 - a21 * a30;
  var b07 = a20 * a32 - a22 * a30;
  var b08 = a20 * a33 - a23 * a30;
  var b09 = a21 * a32 - a22 * a31;
  var b10 = a21 * a33 - a23 * a31;
  var b11 = a22 * a33 - a23 * a32;
  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
}
function multiply(out, a, b) {
  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
  var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
  b0 = b[4];
  b1 = b[5];
  b2 = b[6];
  b3 = b[7];
  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
  b0 = b[8];
  b1 = b[9];
  b2 = b[10];
  b3 = b[11];
  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
  b0 = b[12];
  b1 = b[13];
  b2 = b[14];
  b3 = b[15];
  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
  return out;
}
function translate(out, a, v) {
  var x = v[0], y = v[1], z = v[2];
  var a00, a01, a02, a03;
  var a10, a11, a12, a13;
  var a20, a21, a22, a23;
  if (a === out) {
    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];
    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];
    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];
    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];
  } else {
    a00 = a[0];
    a01 = a[1];
    a02 = a[2];
    a03 = a[3];
    a10 = a[4];
    a11 = a[5];
    a12 = a[6];
    a13 = a[7];
    a20 = a[8];
    a21 = a[9];
    a22 = a[10];
    a23 = a[11];
    out[0] = a00;
    out[1] = a01;
    out[2] = a02;
    out[3] = a03;
    out[4] = a10;
    out[5] = a11;
    out[6] = a12;
    out[7] = a13;
    out[8] = a20;
    out[9] = a21;
    out[10] = a22;
    out[11] = a23;
    out[12] = a00 * x + a10 * y + a20 * z + a[12];
    out[13] = a01 * x + a11 * y + a21 * z + a[13];
    out[14] = a02 * x + a12 * y + a22 * z + a[14];
    out[15] = a03 * x + a13 * y + a23 * z + a[15];
  }
  return out;
}
function scale(out, a, v) {
  var x = v[0], y = v[1], z = v[2];
  out[0] = a[0] * x;
  out[1] = a[1] * x;
  out[2] = a[2] * x;
  out[3] = a[3] * x;
  out[4] = a[4] * y;
  out[5] = a[5] * y;
  out[6] = a[6] * y;
  out[7] = a[7] * y;
  out[8] = a[8] * z;
  out[9] = a[9] * z;
  out[10] = a[10] * z;
  out[11] = a[11] * z;
  out[12] = a[12];
  out[13] = a[13];
  out[14] = a[14];
  out[15] = a[15];
  return out;
}
function rotate(out, a, rad, axis) {
  var x = axis[0], y = axis[1], z = axis[2];
  var len = Math.hypot(x, y, z);
  var s, c, t;
  var a00, a01, a02, a03;
  var a10, a11, a12, a13;
  var a20, a21, a22, a23;
  var b00, b01, b02;
  var b10, b11, b12;
  var b20, b21, b22;
  if (len < EPSILON) {
    return null;
  }
  len = 1 / len;
  x *= len;
  y *= len;
  z *= len;
  s = Math.sin(rad);
  c = Math.cos(rad);
  t = 1 - c;
  a00 = a[0];
  a01 = a[1];
  a02 = a[2];
  a03 = a[3];
  a10 = a[4];
  a11 = a[5];
  a12 = a[6];
  a13 = a[7];
  a20 = a[8];
  a21 = a[9];
  a22 = a[10];
  a23 = a[11];
  b00 = x * x * t + c;
  b01 = y * x * t + z * s;
  b02 = z * x * t - y * s;
  b10 = x * y * t - z * s;
  b11 = y * y * t + c;
  b12 = z * y * t + x * s;
  b20 = x * z * t + y * s;
  b21 = y * z * t - x * s;
  b22 = z * z * t + c;
  out[0] = a00 * b00 + a10 * b01 + a20 * b02;
  out[1] = a01 * b00 + a11 * b01 + a21 * b02;
  out[2] = a02 * b00 + a12 * b01 + a22 * b02;
  out[3] = a03 * b00 + a13 * b01 + a23 * b02;
  out[4] = a00 * b10 + a10 * b11 + a20 * b12;
  out[5] = a01 * b10 + a11 * b11 + a21 * b12;
  out[6] = a02 * b10 + a12 * b11 + a22 * b12;
  out[7] = a03 * b10 + a13 * b11 + a23 * b12;
  out[8] = a00 * b20 + a10 * b21 + a20 * b22;
  out[9] = a01 * b20 + a11 * b21 + a21 * b22;
  out[10] = a02 * b20 + a12 * b21 + a22 * b22;
  out[11] = a03 * b20 + a13 * b21 + a23 * b22;
  if (a !== out) {
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
  }
  return out;
}
function rotateX(out, a, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  var a10 = a[4];
  var a11 = a[5];
  var a12 = a[6];
  var a13 = a[7];
  var a20 = a[8];
  var a21 = a[9];
  var a22 = a[10];
  var a23 = a[11];
  if (a !== out) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
  }
  out[4] = a10 * c + a20 * s;
  out[5] = a11 * c + a21 * s;
  out[6] = a12 * c + a22 * s;
  out[7] = a13 * c + a23 * s;
  out[8] = a20 * c - a10 * s;
  out[9] = a21 * c - a11 * s;
  out[10] = a22 * c - a12 * s;
  out[11] = a23 * c - a13 * s;
  return out;
}
function rotateY(out, a, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  var a00 = a[0];
  var a01 = a[1];
  var a02 = a[2];
  var a03 = a[3];
  var a20 = a[8];
  var a21 = a[9];
  var a22 = a[10];
  var a23 = a[11];
  if (a !== out) {
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
  }
  out[0] = a00 * c - a20 * s;
  out[1] = a01 * c - a21 * s;
  out[2] = a02 * c - a22 * s;
  out[3] = a03 * c - a23 * s;
  out[8] = a00 * s + a20 * c;
  out[9] = a01 * s + a21 * c;
  out[10] = a02 * s + a22 * c;
  out[11] = a03 * s + a23 * c;
  return out;
}
function rotateZ(out, a, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  var a00 = a[0];
  var a01 = a[1];
  var a02 = a[2];
  var a03 = a[3];
  var a10 = a[4];
  var a11 = a[5];
  var a12 = a[6];
  var a13 = a[7];
  if (a !== out) {
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
  }
  out[0] = a00 * c + a10 * s;
  out[1] = a01 * c + a11 * s;
  out[2] = a02 * c + a12 * s;
  out[3] = a03 * c + a13 * s;
  out[4] = a10 * c - a00 * s;
  out[5] = a11 * c - a01 * s;
  out[6] = a12 * c - a02 * s;
  out[7] = a13 * c - a03 * s;
  return out;
}
function fromTranslation(out, v) {
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = 1;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 1;
  out[11] = 0;
  out[12] = v[0];
  out[13] = v[1];
  out[14] = v[2];
  out[15] = 1;
  return out;
}
function fromScaling(out, v) {
  out[0] = v[0];
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = v[1];
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = v[2];
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromRotation(out, rad, axis) {
  var x = axis[0], y = axis[1], z = axis[2];
  var len = Math.hypot(x, y, z);
  var s, c, t;
  if (len < EPSILON) {
    return null;
  }
  len = 1 / len;
  x *= len;
  y *= len;
  z *= len;
  s = Math.sin(rad);
  c = Math.cos(rad);
  t = 1 - c;
  out[0] = x * x * t + c;
  out[1] = y * x * t + z * s;
  out[2] = z * x * t - y * s;
  out[3] = 0;
  out[4] = x * y * t - z * s;
  out[5] = y * y * t + c;
  out[6] = z * y * t + x * s;
  out[7] = 0;
  out[8] = x * z * t + y * s;
  out[9] = y * z * t - x * s;
  out[10] = z * z * t + c;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromXRotation(out, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = c;
  out[6] = s;
  out[7] = 0;
  out[8] = 0;
  out[9] = -s;
  out[10] = c;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromYRotation(out, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  out[0] = c;
  out[1] = 0;
  out[2] = -s;
  out[3] = 0;
  out[4] = 0;
  out[5] = 1;
  out[6] = 0;
  out[7] = 0;
  out[8] = s;
  out[9] = 0;
  out[10] = c;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromZRotation(out, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  out[0] = c;
  out[1] = s;
  out[2] = 0;
  out[3] = 0;
  out[4] = -s;
  out[5] = c;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 1;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromRotationTranslation(out, q, v) {
  var x = q[0], y = q[1], z = q[2], w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;
  var xx = x * x2;
  var xy = x * y2;
  var xz = x * z2;
  var yy = y * y2;
  var yz = y * z2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;
  out[0] = 1 - (yy + zz);
  out[1] = xy + wz;
  out[2] = xz - wy;
  out[3] = 0;
  out[4] = xy - wz;
  out[5] = 1 - (xx + zz);
  out[6] = yz + wx;
  out[7] = 0;
  out[8] = xz + wy;
  out[9] = yz - wx;
  out[10] = 1 - (xx + yy);
  out[11] = 0;
  out[12] = v[0];
  out[13] = v[1];
  out[14] = v[2];
  out[15] = 1;
  return out;
}
function fromQuat2(out, a) {
  var translation = new ARRAY_TYPE(3);
  var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7];
  var magnitude = bx * bx + by * by + bz * bz + bw * bw;
  if (magnitude > 0) {
    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;
    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;
    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;
  } else {
    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
  }
  fromRotationTranslation(out, a, translation);
  return out;
}
function getTranslation(out, mat) {
  out[0] = mat[12];
  out[1] = mat[13];
  out[2] = mat[14];
  return out;
}
function getScaling(out, mat) {
  var m11 = mat[0];
  var m12 = mat[1];
  var m13 = mat[2];
  var m21 = mat[4];
  var m22 = mat[5];
  var m23 = mat[6];
  var m31 = mat[8];
  var m32 = mat[9];
  var m33 = mat[10];
  out[0] = Math.hypot(m11, m12, m13);
  out[1] = Math.hypot(m21, m22, m23);
  out[2] = Math.hypot(m31, m32, m33);
  return out;
}
function getRotation(out, mat) {
  var scaling = new ARRAY_TYPE(3);
  getScaling(scaling, mat);
  var is1 = 1 / scaling[0];
  var is2 = 1 / scaling[1];
  var is3 = 1 / scaling[2];
  var sm11 = mat[0] * is1;
  var sm12 = mat[1] * is2;
  var sm13 = mat[2] * is3;
  var sm21 = mat[4] * is1;
  var sm22 = mat[5] * is2;
  var sm23 = mat[6] * is3;
  var sm31 = mat[8] * is1;
  var sm32 = mat[9] * is2;
  var sm33 = mat[10] * is3;
  var trace = sm11 + sm22 + sm33;
  var S = 0;
  if (trace > 0) {
    S = Math.sqrt(trace + 1) * 2;
    out[3] = 0.25 * S;
    out[0] = (sm23 - sm32) / S;
    out[1] = (sm31 - sm13) / S;
    out[2] = (sm12 - sm21) / S;
  } else if (sm11 > sm22 && sm11 > sm33) {
    S = Math.sqrt(1 + sm11 - sm22 - sm33) * 2;
    out[3] = (sm23 - sm32) / S;
    out[0] = 0.25 * S;
    out[1] = (sm12 + sm21) / S;
    out[2] = (sm31 + sm13) / S;
  } else if (sm22 > sm33) {
    S = Math.sqrt(1 + sm22 - sm11 - sm33) * 2;
    out[3] = (sm31 - sm13) / S;
    out[0] = (sm12 + sm21) / S;
    out[1] = 0.25 * S;
    out[2] = (sm23 + sm32) / S;
  } else {
    S = Math.sqrt(1 + sm33 - sm11 - sm22) * 2;
    out[3] = (sm12 - sm21) / S;
    out[0] = (sm31 + sm13) / S;
    out[1] = (sm23 + sm32) / S;
    out[2] = 0.25 * S;
  }
  return out;
}
function fromRotationTranslationScale(out, q, v, s) {
  var x = q[0], y = q[1], z = q[2], w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;
  var xx = x * x2;
  var xy = x * y2;
  var xz = x * z2;
  var yy = y * y2;
  var yz = y * z2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;
  var sx = s[0];
  var sy = s[1];
  var sz = s[2];
  out[0] = (1 - (yy + zz)) * sx;
  out[1] = (xy + wz) * sx;
  out[2] = (xz - wy) * sx;
  out[3] = 0;
  out[4] = (xy - wz) * sy;
  out[5] = (1 - (xx + zz)) * sy;
  out[6] = (yz + wx) * sy;
  out[7] = 0;
  out[8] = (xz + wy) * sz;
  out[9] = (yz - wx) * sz;
  out[10] = (1 - (xx + yy)) * sz;
  out[11] = 0;
  out[12] = v[0];
  out[13] = v[1];
  out[14] = v[2];
  out[15] = 1;
  return out;
}
function fromRotationTranslationScaleOrigin(out, q, v, s, o) {
  var x = q[0], y = q[1], z = q[2], w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;
  var xx = x * x2;
  var xy = x * y2;
  var xz = x * z2;
  var yy = y * y2;
  var yz = y * z2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;
  var sx = s[0];
  var sy = s[1];
  var sz = s[2];
  var ox = o[0];
  var oy = o[1];
  var oz = o[2];
  var out0 = (1 - (yy + zz)) * sx;
  var out1 = (xy + wz) * sx;
  var out2 = (xz - wy) * sx;
  var out4 = (xy - wz) * sy;
  var out5 = (1 - (xx + zz)) * sy;
  var out6 = (yz + wx) * sy;
  var out8 = (xz + wy) * sz;
  var out9 = (yz - wx) * sz;
  var out10 = (1 - (xx + yy)) * sz;
  out[0] = out0;
  out[1] = out1;
  out[2] = out2;
  out[3] = 0;
  out[4] = out4;
  out[5] = out5;
  out[6] = out6;
  out[7] = 0;
  out[8] = out8;
  out[9] = out9;
  out[10] = out10;
  out[11] = 0;
  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);
  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);
  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);
  out[15] = 1;
  return out;
}
function fromQuat(out, q) {
  var x = q[0], y = q[1], z = q[2], w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;
  var xx = x * x2;
  var yx = y * x2;
  var yy = y * y2;
  var zx = z * x2;
  var zy = z * y2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;
  out[0] = 1 - yy - zz;
  out[1] = yx + wz;
  out[2] = zx - wy;
  out[3] = 0;
  out[4] = yx - wz;
  out[5] = 1 - xx - zz;
  out[6] = zy + wx;
  out[7] = 0;
  out[8] = zx + wy;
  out[9] = zy - wx;
  out[10] = 1 - xx - yy;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function frustum(out, left, right, bottom, top, near, far) {
  var rl = 1 / (right - left);
  var tb = 1 / (top - bottom);
  var nf = 1 / (near - far);
  out[0] = near * 2 * rl;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = near * 2 * tb;
  out[6] = 0;
  out[7] = 0;
  out[8] = (right + left) * rl;
  out[9] = (top + bottom) * tb;
  out[10] = (far + near) * nf;
  out[11] = -1;
  out[12] = 0;
  out[13] = 0;
  out[14] = far * near * 2 * nf;
  out[15] = 0;
  return out;
}
function perspectiveNO(out, fovy, aspect, near, far) {
  var f = 1 / Math.tan(fovy / 2), nf;
  out[0] = f / aspect;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = f;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[11] = -1;
  out[12] = 0;
  out[13] = 0;
  out[15] = 0;
  if (far != null && far !== Infinity) {
    nf = 1 / (near - far);
    out[10] = (far + near) * nf;
    out[14] = 2 * far * near * nf;
  } else {
    out[10] = -1;
    out[14] = -2 * near;
  }
  return out;
}
function perspectiveZO(out, fovy, aspect, near, far) {
  var f = 1 / Math.tan(fovy / 2), nf;
  out[0] = f / aspect;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = f;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[11] = -1;
  out[12] = 0;
  out[13] = 0;
  out[15] = 0;
  if (far != null && far !== Infinity) {
    nf = 1 / (near - far);
    out[10] = far * nf;
    out[14] = far * near * nf;
  } else {
    out[10] = -1;
    out[14] = -near;
  }
  return out;
}
function perspectiveFromFieldOfView(out, fov, near, far) {
  var upTan = Math.tan(fov.upDegrees * Math.PI / 180);
  var downTan = Math.tan(fov.downDegrees * Math.PI / 180);
  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180);
  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180);
  var xScale = 2 / (leftTan + rightTan);
  var yScale = 2 / (upTan + downTan);
  out[0] = xScale;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = yScale;
  out[6] = 0;
  out[7] = 0;
  out[8] = -((leftTan - rightTan) * xScale * 0.5);
  out[9] = (upTan - downTan) * yScale * 0.5;
  out[10] = far / (near - far);
  out[11] = -1;
  out[12] = 0;
  out[13] = 0;
  out[14] = far * near / (near - far);
  out[15] = 0;
  return out;
}
function orthoNO(out, left, right, bottom, top, near, far) {
  var lr = 1 / (left - right);
  var bt = 1 / (bottom - top);
  var nf = 1 / (near - far);
  out[0] = -2 * lr;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = -2 * bt;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 2 * nf;
  out[11] = 0;
  out[12] = (left + right) * lr;
  out[13] = (top + bottom) * bt;
  out[14] = (far + near) * nf;
  out[15] = 1;
  return out;
}
function orthoZO(out, left, right, bottom, top, near, far) {
  var lr = 1 / (left - right);
  var bt = 1 / (bottom - top);
  var nf = 1 / (near - far);
  out[0] = -2 * lr;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = -2 * bt;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = nf;
  out[11] = 0;
  out[12] = (left + right) * lr;
  out[13] = (top + bottom) * bt;
  out[14] = near * nf;
  out[15] = 1;
  return out;
}
function lookAt(out, eye, center, up) {
  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;
  var eyex = eye[0];
  var eyey = eye[1];
  var eyez = eye[2];
  var upx = up[0];
  var upy = up[1];
  var upz = up[2];
  var centerx = center[0];
  var centery = center[1];
  var centerz = center[2];
  if (Math.abs(eyex - centerx) < EPSILON && Math.abs(eyey - centery) < EPSILON && Math.abs(eyez - centerz) < EPSILON) {
    return identity(out);
  }
  z0 = eyex - centerx;
  z1 = eyey - centery;
  z2 = eyez - centerz;
  len = 1 / Math.hypot(z0, z1, z2);
  z0 *= len;
  z1 *= len;
  z2 *= len;
  x0 = upy * z2 - upz * z1;
  x1 = upz * z0 - upx * z2;
  x2 = upx * z1 - upy * z0;
  len = Math.hypot(x0, x1, x2);
  if (!len) {
    x0 = 0;
    x1 = 0;
    x2 = 0;
  } else {
    len = 1 / len;
    x0 *= len;
    x1 *= len;
    x2 *= len;
  }
  y0 = z1 * x2 - z2 * x1;
  y1 = z2 * x0 - z0 * x2;
  y2 = z0 * x1 - z1 * x0;
  len = Math.hypot(y0, y1, y2);
  if (!len) {
    y0 = 0;
    y1 = 0;
    y2 = 0;
  } else {
    len = 1 / len;
    y0 *= len;
    y1 *= len;
    y2 *= len;
  }
  out[0] = x0;
  out[1] = y0;
  out[2] = z0;
  out[3] = 0;
  out[4] = x1;
  out[5] = y1;
  out[6] = z1;
  out[7] = 0;
  out[8] = x2;
  out[9] = y2;
  out[10] = z2;
  out[11] = 0;
  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);
  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
  out[15] = 1;
  return out;
}
function targetTo(out, eye, target, up) {
  var eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2];
  var z0 = eyex - target[0], z1 = eyey - target[1], z2 = eyez - target[2];
  var len = z0 * z0 + z1 * z1 + z2 * z2;
  if (len > 0) {
    len = 1 / Math.sqrt(len);
    z0 *= len;
    z1 *= len;
    z2 *= len;
  }
  var x0 = upy * z2 - upz * z1, x1 = upz * z0 - upx * z2, x2 = upx * z1 - upy * z0;
  len = x0 * x0 + x1 * x1 + x2 * x2;
  if (len > 0) {
    len = 1 / Math.sqrt(len);
    x0 *= len;
    x1 *= len;
    x2 *= len;
  }
  out[0] = x0;
  out[1] = x1;
  out[2] = x2;
  out[3] = 0;
  out[4] = z1 * x2 - z2 * x1;
  out[5] = z2 * x0 - z0 * x2;
  out[6] = z0 * x1 - z1 * x0;
  out[7] = 0;
  out[8] = z0;
  out[9] = z1;
  out[10] = z2;
  out[11] = 0;
  out[12] = eyex;
  out[13] = eyey;
  out[14] = eyez;
  out[15] = 1;
  return out;
}
function str(a) {
  return "mat4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + ")";
}
function frob(a) {
  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);
}
function add(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  out[3] = a[3] + b[3];
  out[4] = a[4] + b[4];
  out[5] = a[5] + b[5];
  out[6] = a[6] + b[6];
  out[7] = a[7] + b[7];
  out[8] = a[8] + b[8];
  out[9] = a[9] + b[9];
  out[10] = a[10] + b[10];
  out[11] = a[11] + b[11];
  out[12] = a[12] + b[12];
  out[13] = a[13] + b[13];
  out[14] = a[14] + b[14];
  out[15] = a[15] + b[15];
  return out;
}
function subtract(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  out[3] = a[3] - b[3];
  out[4] = a[4] - b[4];
  out[5] = a[5] - b[5];
  out[6] = a[6] - b[6];
  out[7] = a[7] - b[7];
  out[8] = a[8] - b[8];
  out[9] = a[9] - b[9];
  out[10] = a[10] - b[10];
  out[11] = a[11] - b[11];
  out[12] = a[12] - b[12];
  out[13] = a[13] - b[13];
  out[14] = a[14] - b[14];
  out[15] = a[15] - b[15];
  return out;
}
function multiplyScalar(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  out[3] = a[3] * b;
  out[4] = a[4] * b;
  out[5] = a[5] * b;
  out[6] = a[6] * b;
  out[7] = a[7] * b;
  out[8] = a[8] * b;
  out[9] = a[9] * b;
  out[10] = a[10] * b;
  out[11] = a[11] * b;
  out[12] = a[12] * b;
  out[13] = a[13] * b;
  out[14] = a[14] * b;
  out[15] = a[15] * b;
  return out;
}
function multiplyScalarAndAdd(out, a, b, scale2) {
  out[0] = a[0] + b[0] * scale2;
  out[1] = a[1] + b[1] * scale2;
  out[2] = a[2] + b[2] * scale2;
  out[3] = a[3] + b[3] * scale2;
  out[4] = a[4] + b[4] * scale2;
  out[5] = a[5] + b[5] * scale2;
  out[6] = a[6] + b[6] * scale2;
  out[7] = a[7] + b[7] * scale2;
  out[8] = a[8] + b[8] * scale2;
  out[9] = a[9] + b[9] * scale2;
  out[10] = a[10] + b[10] * scale2;
  out[11] = a[11] + b[11] * scale2;
  out[12] = a[12] + b[12] * scale2;
  out[13] = a[13] + b[13] * scale2;
  out[14] = a[14] + b[14] * scale2;
  out[15] = a[15] + b[15] * scale2;
  return out;
}
function exactEquals(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];
}
function equals(a, b) {
  var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
  var a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
  var a8 = a[8], a9 = a[9], a10 = a[10], a11 = a[11];
  var a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];
  var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
  var b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
  var b8 = b[8], b9 = b[9], b10 = b[10], b11 = b[11];
  var b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= EPSILON * Math.max(1, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= EPSILON * Math.max(1, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= EPSILON * Math.max(1, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= EPSILON * Math.max(1, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= EPSILON * Math.max(1, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= EPSILON * Math.max(1, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= EPSILON * Math.max(1, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= EPSILON * Math.max(1, Math.abs(a15), Math.abs(b15));
}
var perspective = perspectiveNO;
var ortho = orthoNO;
var mul = multiply;
var sub = subtract;

// node_modules/gl-matrix/esm/quat.js
var exports_quat = {};
__export(exports_quat, {
  str: () => {
    {
      return str4;
    }
  },
  squaredLength: () => {
    {
      return squaredLength3;
    }
  },
  sqrLen: () => {
    {
      return sqrLen3;
    }
  },
  sqlerp: () => {
    {
      return sqlerp;
    }
  },
  slerp: () => {
    {
      return slerp;
    }
  },
  setAxisAngle: () => {
    {
      return setAxisAngle;
    }
  },
  setAxes: () => {
    {
      return setAxes;
    }
  },
  set: () => {
    {
      return set4;
    }
  },
  scale: () => {
    {
      return scale4;
    }
  },
  rotationTo: () => {
    {
      return rotationTo;
    }
  },
  rotateZ: () => {
    {
      return rotateZ3;
    }
  },
  rotateY: () => {
    {
      return rotateY3;
    }
  },
  rotateX: () => {
    {
      return rotateX3;
    }
  },
  random: () => {
    {
      return random3;
    }
  },
  pow: () => {
    {
      return pow;
    }
  },
  normalize: () => {
    {
      return normalize3;
    }
  },
  multiply: () => {
    {
      return multiply4;
    }
  },
  mul: () => {
    {
      return mul4;
    }
  },
  ln: () => {
    {
      return ln;
    }
  },
  lerp: () => {
    {
      return lerp3;
    }
  },
  length: () => {
    {
      return length3;
    }
  },
  len: () => {
    {
      return len3;
    }
  },
  invert: () => {
    {
      return invert2;
    }
  },
  identity: () => {
    {
      return identity2;
    }
  },
  getAxisAngle: () => {
    {
      return getAxisAngle;
    }
  },
  getAngle: () => {
    {
      return getAngle;
    }
  },
  fromValues: () => {
    {
      return fromValues4;
    }
  },
  fromMat3: () => {
    {
      return fromMat3;
    }
  },
  fromEuler: () => {
    {
      return fromEuler;
    }
  },
  exp: () => {
    {
      return exp;
    }
  },
  exactEquals: () => {
    {
      return exactEquals4;
    }
  },
  equals: () => {
    {
      return equals4;
    }
  },
  dot: () => {
    {
      return dot3;
    }
  },
  create: () => {
    {
      return create5;
    }
  },
  copy: () => {
    {
      return copy4;
    }
  },
  conjugate: () => {
    {
      return conjugate;
    }
  },
  clone: () => {
    {
      return clone4;
    }
  },
  calculateW: () => {
    {
      return calculateW;
    }
  },
  add: () => {
    {
      return add4;
    }
  }
});

// node_modules/gl-matrix/esm/vec3.js
var exports_vec3 = {};
__export(exports_vec3, {
  zero: () => {
    {
      return zero;
    }
  },
  transformQuat: () => {
    {
      return transformQuat;
    }
  },
  transformMat4: () => {
    {
      return transformMat4;
    }
  },
  transformMat3: () => {
    {
      return transformMat3;
    }
  },
  subtract: () => {
    {
      return subtract2;
    }
  },
  sub: () => {
    {
      return sub2;
    }
  },
  str: () => {
    {
      return str2;
    }
  },
  squaredLength: () => {
    {
      return squaredLength;
    }
  },
  squaredDistance: () => {
    {
      return squaredDistance;
    }
  },
  sqrLen: () => {
    {
      return sqrLen;
    }
  },
  sqrDist: () => {
    {
      return sqrDist;
    }
  },
  set: () => {
    {
      return set2;
    }
  },
  scaleAndAdd: () => {
    {
      return scaleAndAdd;
    }
  },
  scale: () => {
    {
      return scale2;
    }
  },
  round: () => {
    {
      return round;
    }
  },
  rotateZ: () => {
    {
      return rotateZ2;
    }
  },
  rotateY: () => {
    {
      return rotateY2;
    }
  },
  rotateX: () => {
    {
      return rotateX2;
    }
  },
  random: () => {
    {
      return random;
    }
  },
  normalize: () => {
    {
      return normalize;
    }
  },
  negate: () => {
    {
      return negate;
    }
  },
  multiply: () => {
    {
      return multiply2;
    }
  },
  mul: () => {
    {
      return mul2;
    }
  },
  min: () => {
    {
      return min;
    }
  },
  max: () => {
    {
      return max;
    }
  },
  lerp: () => {
    {
      return lerp;
    }
  },
  length: () => {
    {
      return length;
    }
  },
  len: () => {
    {
      return len;
    }
  },
  inverse: () => {
    {
      return inverse;
    }
  },
  hermite: () => {
    {
      return hermite;
    }
  },
  fromValues: () => {
    {
      return fromValues2;
    }
  },
  forEach: () => {
    {
      return forEach;
    }
  },
  floor: () => {
    {
      return floor;
    }
  },
  exactEquals: () => {
    {
      return exactEquals2;
    }
  },
  equals: () => {
    {
      return equals2;
    }
  },
  dot: () => {
    {
      return dot;
    }
  },
  divide: () => {
    {
      return divide;
    }
  },
  div: () => {
    {
      return div;
    }
  },
  distance: () => {
    {
      return distance;
    }
  },
  dist: () => {
    {
      return dist;
    }
  },
  cross: () => {
    {
      return cross;
    }
  },
  create: () => {
    {
      return create3;
    }
  },
  copy: () => {
    {
      return copy2;
    }
  },
  clone: () => {
    {
      return clone2;
    }
  },
  ceil: () => {
    {
      return ceil;
    }
  },
  bezier: () => {
    {
      return bezier;
    }
  },
  angle: () => {
    {
      return angle;
    }
  },
  add: () => {
    {
      return add2;
    }
  }
});
function create3() {
  var out = new ARRAY_TYPE(3);
  if (ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }
  return out;
}
function clone2(a) {
  var out = new ARRAY_TYPE(3);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  return out;
}
function length(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return Math.hypot(x, y, z);
}
function fromValues2(x, y, z) {
  var out = new ARRAY_TYPE(3);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
}
function copy2(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  return out;
}
function set2(out, x, y, z) {
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
}
function add2(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  return out;
}
function subtract2(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  return out;
}
function multiply2(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  out[2] = a[2] * b[2];
  return out;
}
function divide(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  out[2] = a[2] / b[2];
  return out;
}
function ceil(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  out[2] = Math.ceil(a[2]);
  return out;
}
function floor(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  out[2] = Math.floor(a[2]);
  return out;
}
function min(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  out[2] = Math.min(a[2], b[2]);
  return out;
}
function max(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  out[2] = Math.max(a[2], b[2]);
  return out;
}
function round(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  out[2] = Math.round(a[2]);
  return out;
}
function scale2(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  return out;
}
function scaleAndAdd(out, a, b, scale3) {
  out[0] = a[0] + b[0] * scale3;
  out[1] = a[1] + b[1] * scale3;
  out[2] = a[2] + b[2] * scale3;
  return out;
}
function distance(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  return Math.hypot(x, y, z);
}
function squaredDistance(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  return x * x + y * y + z * z;
}
function squaredLength(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return x * x + y * y + z * z;
}
function negate(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  out[2] = -a[2];
  return out;
}
function inverse(out, a) {
  out[0] = 1 / a[0];
  out[1] = 1 / a[1];
  out[2] = 1 / a[2];
  return out;
}
function normalize(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var len = x * x + y * y + z * z;
  if (len > 0) {
    len = 1 / Math.sqrt(len);
  }
  out[0] = a[0] * len;
  out[1] = a[1] * len;
  out[2] = a[2] * len;
  return out;
}
function dot(a, b) {
  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
}
function cross(out, a, b) {
  var ax = a[0], ay = a[1], az = a[2];
  var bx = b[0], by = b[1], bz = b[2];
  out[0] = ay * bz - az * by;
  out[1] = az * bx - ax * bz;
  out[2] = ax * by - ay * bx;
  return out;
}
function lerp(out, a, b, t) {
  var ax = a[0];
  var ay = a[1];
  var az = a[2];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  out[2] = az + t * (b[2] - az);
  return out;
}
function hermite(out, a, b, c, d, t) {
  var factorTimes2 = t * t;
  var factor1 = factorTimes2 * (2 * t - 3) + 1;
  var factor2 = factorTimes2 * (t - 2) + t;
  var factor3 = factorTimes2 * (t - 1);
  var factor4 = factorTimes2 * (3 - 2 * t);
  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
  return out;
}
function bezier(out, a, b, c, d, t) {
  var inverseFactor = 1 - t;
  var inverseFactorTimesTwo = inverseFactor * inverseFactor;
  var factorTimes2 = t * t;
  var factor1 = inverseFactorTimesTwo * inverseFactor;
  var factor2 = 3 * t * inverseFactorTimesTwo;
  var factor3 = 3 * factorTimes2 * inverseFactor;
  var factor4 = factorTimes2 * t;
  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
  return out;
}
function random(out, scale3) {
  scale3 = scale3 || 1;
  var r = RANDOM() * 2 * Math.PI;
  var z = RANDOM() * 2 - 1;
  var zScale = Math.sqrt(1 - z * z) * scale3;
  out[0] = Math.cos(r) * zScale;
  out[1] = Math.sin(r) * zScale;
  out[2] = z * scale3;
  return out;
}
function transformMat4(out, a, m) {
  var x = a[0], y = a[1], z = a[2];
  var w = m[3] * x + m[7] * y + m[11] * z + m[15];
  w = w || 1;
  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;
  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;
  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;
  return out;
}
function transformMat3(out, a, m) {
  var x = a[0], y = a[1], z = a[2];
  out[0] = x * m[0] + y * m[3] + z * m[6];
  out[1] = x * m[1] + y * m[4] + z * m[7];
  out[2] = x * m[2] + y * m[5] + z * m[8];
  return out;
}
function transformQuat(out, a, q) {
  var qx = q[0], qy = q[1], qz = q[2], qw = q[3];
  var x = a[0], y = a[1], z = a[2];
  var uvx = qy * z - qz * y, uvy = qz * x - qx * z, uvz = qx * y - qy * x;
  var uuvx = qy * uvz - qz * uvy, uuvy = qz * uvx - qx * uvz, uuvz = qx * uvy - qy * uvx;
  var w2 = qw * 2;
  uvx *= w2;
  uvy *= w2;
  uvz *= w2;
  uuvx *= 2;
  uuvy *= 2;
  uuvz *= 2;
  out[0] = x + uvx + uuvx;
  out[1] = y + uvy + uuvy;
  out[2] = z + uvz + uuvz;
  return out;
}
function rotateX2(out, a, b, rad) {
  var p = [], r = [];
  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2];
  r[0] = p[0];
  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);
  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);
  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];
  return out;
}
function rotateY2(out, a, b, rad) {
  var p = [], r = [];
  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2];
  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);
  r[1] = p[1];
  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);
  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];
  return out;
}
function rotateZ2(out, a, b, rad) {
  var p = [], r = [];
  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2];
  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);
  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);
  r[2] = p[2];
  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];
  return out;
}
function angle(a, b) {
  var ax = a[0], ay = a[1], az = a[2], bx = b[0], by = b[1], bz = b[2], mag1 = Math.sqrt(ax * ax + ay * ay + az * az), mag2 = Math.sqrt(bx * bx + by * by + bz * bz), mag = mag1 * mag2, cosine = mag && dot(a, b) / mag;
  return Math.acos(Math.min(Math.max(cosine, -1), 1));
}
function zero(out) {
  out[0] = 0;
  out[1] = 0;
  out[2] = 0;
  return out;
}
function str2(a) {
  return "vec3(" + a[0] + ", " + a[1] + ", " + a[2] + ")";
}
function exactEquals2(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];
}
function equals2(a, b) {
  var a0 = a[0], a1 = a[1], a2 = a[2];
  var b0 = b[0], b1 = b[1], b2 = b[2];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2));
}
var sub2 = subtract2;
var mul2 = multiply2;
var div = divide;
var dist = distance;
var sqrDist = squaredDistance;
var len = length;
var sqrLen = squaredLength;
var forEach = function() {
  var vec = create3();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 3;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      vec[2] = a[i + 2];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
      a[i + 2] = vec[2];
    }
    return a;
  };
}();

// node_modules/gl-matrix/esm/vec4.js
var exports_vec4 = {};
__export(exports_vec4, {
  zero: () => {
    {
      return zero2;
    }
  },
  transformQuat: () => {
    {
      return transformQuat2;
    }
  },
  transformMat4: () => {
    {
      return transformMat42;
    }
  },
  subtract: () => {
    {
      return subtract3;
    }
  },
  sub: () => {
    {
      return sub3;
    }
  },
  str: () => {
    {
      return str3;
    }
  },
  squaredLength: () => {
    {
      return squaredLength2;
    }
  },
  squaredDistance: () => {
    {
      return squaredDistance2;
    }
  },
  sqrLen: () => {
    {
      return sqrLen2;
    }
  },
  sqrDist: () => {
    {
      return sqrDist2;
    }
  },
  set: () => {
    {
      return set3;
    }
  },
  scaleAndAdd: () => {
    {
      return scaleAndAdd2;
    }
  },
  scale: () => {
    {
      return scale3;
    }
  },
  round: () => {
    {
      return round2;
    }
  },
  random: () => {
    {
      return random2;
    }
  },
  normalize: () => {
    {
      return normalize2;
    }
  },
  negate: () => {
    {
      return negate2;
    }
  },
  multiply: () => {
    {
      return multiply3;
    }
  },
  mul: () => {
    {
      return mul3;
    }
  },
  min: () => {
    {
      return min2;
    }
  },
  max: () => {
    {
      return max2;
    }
  },
  lerp: () => {
    {
      return lerp2;
    }
  },
  length: () => {
    {
      return length2;
    }
  },
  len: () => {
    {
      return len2;
    }
  },
  inverse: () => {
    {
      return inverse2;
    }
  },
  fromValues: () => {
    {
      return fromValues3;
    }
  },
  forEach: () => {
    {
      return forEach2;
    }
  },
  floor: () => {
    {
      return floor2;
    }
  },
  exactEquals: () => {
    {
      return exactEquals3;
    }
  },
  equals: () => {
    {
      return equals3;
    }
  },
  dot: () => {
    {
      return dot2;
    }
  },
  divide: () => {
    {
      return divide2;
    }
  },
  div: () => {
    {
      return div2;
    }
  },
  distance: () => {
    {
      return distance2;
    }
  },
  dist: () => {
    {
      return dist2;
    }
  },
  cross: () => {
    {
      return cross2;
    }
  },
  create: () => {
    {
      return create4;
    }
  },
  copy: () => {
    {
      return copy3;
    }
  },
  clone: () => {
    {
      return clone3;
    }
  },
  ceil: () => {
    {
      return ceil2;
    }
  },
  add: () => {
    {
      return add3;
    }
  }
});
function create4() {
  var out = new ARRAY_TYPE(4);
  if (ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
  }
  return out;
}
function clone3(a) {
  var out = new ARRAY_TYPE(4);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  return out;
}
function fromValues3(x, y, z, w) {
  var out = new ARRAY_TYPE(4);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  out[3] = w;
  return out;
}
function copy3(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  return out;
}
function set3(out, x, y, z, w) {
  out[0] = x;
  out[1] = y;
  out[2] = z;
  out[3] = w;
  return out;
}
function add3(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  out[3] = a[3] + b[3];
  return out;
}
function subtract3(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  out[3] = a[3] - b[3];
  return out;
}
function multiply3(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  out[2] = a[2] * b[2];
  out[3] = a[3] * b[3];
  return out;
}
function divide2(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  out[2] = a[2] / b[2];
  out[3] = a[3] / b[3];
  return out;
}
function ceil2(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  out[2] = Math.ceil(a[2]);
  out[3] = Math.ceil(a[3]);
  return out;
}
function floor2(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  out[2] = Math.floor(a[2]);
  out[3] = Math.floor(a[3]);
  return out;
}
function min2(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  out[2] = Math.min(a[2], b[2]);
  out[3] = Math.min(a[3], b[3]);
  return out;
}
function max2(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  out[2] = Math.max(a[2], b[2]);
  out[3] = Math.max(a[3], b[3]);
  return out;
}
function round2(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  out[2] = Math.round(a[2]);
  out[3] = Math.round(a[3]);
  return out;
}
function scale3(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  out[3] = a[3] * b;
  return out;
}
function scaleAndAdd2(out, a, b, scale4) {
  out[0] = a[0] + b[0] * scale4;
  out[1] = a[1] + b[1] * scale4;
  out[2] = a[2] + b[2] * scale4;
  out[3] = a[3] + b[3] * scale4;
  return out;
}
function distance2(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  var w = b[3] - a[3];
  return Math.hypot(x, y, z, w);
}
function squaredDistance2(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  var w = b[3] - a[3];
  return x * x + y * y + z * z + w * w;
}
function length2(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var w = a[3];
  return Math.hypot(x, y, z, w);
}
function squaredLength2(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var w = a[3];
  return x * x + y * y + z * z + w * w;
}
function negate2(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  out[2] = -a[2];
  out[3] = -a[3];
  return out;
}
function inverse2(out, a) {
  out[0] = 1 / a[0];
  out[1] = 1 / a[1];
  out[2] = 1 / a[2];
  out[3] = 1 / a[3];
  return out;
}
function normalize2(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var w = a[3];
  var len2 = x * x + y * y + z * z + w * w;
  if (len2 > 0) {
    len2 = 1 / Math.sqrt(len2);
  }
  out[0] = x * len2;
  out[1] = y * len2;
  out[2] = z * len2;
  out[3] = w * len2;
  return out;
}
function dot2(a, b) {
  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];
}
function cross2(out, u, v, w) {
  var A = v[0] * w[1] - v[1] * w[0], B = v[0] * w[2] - v[2] * w[0], C = v[0] * w[3] - v[3] * w[0], D = v[1] * w[2] - v[2] * w[1], E = v[1] * w[3] - v[3] * w[1], F = v[2] * w[3] - v[3] * w[2];
  var G = u[0];
  var H = u[1];
  var I = u[2];
  var J = u[3];
  out[0] = H * F - I * E + J * D;
  out[1] = -(G * F) + I * C - J * B;
  out[2] = G * E - H * C + J * A;
  out[3] = -(G * D) + H * B - I * A;
  return out;
}
function lerp2(out, a, b, t) {
  var ax = a[0];
  var ay = a[1];
  var az = a[2];
  var aw = a[3];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  out[2] = az + t * (b[2] - az);
  out[3] = aw + t * (b[3] - aw);
  return out;
}
function random2(out, scale4) {
  scale4 = scale4 || 1;
  var v1, v2, v3, v4;
  var s1, s2;
  do {
    v1 = RANDOM() * 2 - 1;
    v2 = RANDOM() * 2 - 1;
    s1 = v1 * v1 + v2 * v2;
  } while (s1 >= 1);
  do {
    v3 = RANDOM() * 2 - 1;
    v4 = RANDOM() * 2 - 1;
    s2 = v3 * v3 + v4 * v4;
  } while (s2 >= 1);
  var d = Math.sqrt((1 - s1) / s2);
  out[0] = scale4 * v1;
  out[1] = scale4 * v2;
  out[2] = scale4 * v3 * d;
  out[3] = scale4 * v4 * d;
  return out;
}
function transformMat42(out, a, m) {
  var x = a[0], y = a[1], z = a[2], w = a[3];
  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;
  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;
  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;
  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;
  return out;
}
function transformQuat2(out, a, q) {
  var x = a[0], y = a[1], z = a[2];
  var qx = q[0], qy = q[1], qz = q[2], qw = q[3];
  var ix = qw * x + qy * z - qz * y;
  var iy = qw * y + qz * x - qx * z;
  var iz = qw * z + qx * y - qy * x;
  var iw = -qx * x - qy * y - qz * z;
  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;
  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;
  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;
  out[3] = a[3];
  return out;
}
function zero2(out) {
  out[0] = 0;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  return out;
}
function str3(a) {
  return "vec4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")";
}
function exactEquals3(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];
}
function equals3(a, b) {
  var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
  var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3));
}
var sub3 = subtract3;
var mul3 = multiply3;
var div2 = divide2;
var dist2 = distance2;
var sqrDist2 = squaredDistance2;
var len2 = length2;
var sqrLen2 = squaredLength2;
var forEach2 = function() {
  var vec = create4();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 4;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      vec[2] = a[i + 2];
      vec[3] = a[i + 3];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
      a[i + 2] = vec[2];
      a[i + 3] = vec[3];
    }
    return a;
  };
}();

// node_modules/gl-matrix/esm/quat.js
function create5() {
  var out = new ARRAY_TYPE(4);
  if (ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }
  out[3] = 1;
  return out;
}
function identity2(out) {
  out[0] = 0;
  out[1] = 0;
  out[2] = 0;
  out[3] = 1;
  return out;
}
function setAxisAngle(out, axis, rad) {
  rad = rad * 0.5;
  var s = Math.sin(rad);
  out[0] = s * axis[0];
  out[1] = s * axis[1];
  out[2] = s * axis[2];
  out[3] = Math.cos(rad);
  return out;
}
function getAxisAngle(out_axis, q) {
  var rad = Math.acos(q[3]) * 2;
  var s = Math.sin(rad / 2);
  if (s > EPSILON) {
    out_axis[0] = q[0] / s;
    out_axis[1] = q[1] / s;
    out_axis[2] = q[2] / s;
  } else {
    out_axis[0] = 1;
    out_axis[1] = 0;
    out_axis[2] = 0;
  }
  return rad;
}
function getAngle(a, b) {
  var dotproduct = dot3(a, b);
  return Math.acos(2 * dotproduct * dotproduct - 1);
}
function multiply4(out, a, b) {
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bx = b[0], by = b[1], bz = b[2], bw = b[3];
  out[0] = ax * bw + aw * bx + ay * bz - az * by;
  out[1] = ay * bw + aw * by + az * bx - ax * bz;
  out[2] = az * bw + aw * bz + ax * by - ay * bx;
  out[3] = aw * bw - ax * bx - ay * by - az * bz;
  return out;
}
function rotateX3(out, a, rad) {
  rad *= 0.5;
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bx = Math.sin(rad), bw = Math.cos(rad);
  out[0] = ax * bw + aw * bx;
  out[1] = ay * bw + az * bx;
  out[2] = az * bw - ay * bx;
  out[3] = aw * bw - ax * bx;
  return out;
}
function rotateY3(out, a, rad) {
  rad *= 0.5;
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var by = Math.sin(rad), bw = Math.cos(rad);
  out[0] = ax * bw - az * by;
  out[1] = ay * bw + aw * by;
  out[2] = az * bw + ax * by;
  out[3] = aw * bw - ay * by;
  return out;
}
function rotateZ3(out, a, rad) {
  rad *= 0.5;
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bz = Math.sin(rad), bw = Math.cos(rad);
  out[0] = ax * bw + ay * bz;
  out[1] = ay * bw - ax * bz;
  out[2] = az * bw + aw * bz;
  out[3] = aw * bw - az * bz;
  return out;
}
function calculateW(out, a) {
  var x = a[0], y = a[1], z = a[2];
  out[0] = x;
  out[1] = y;
  out[2] = z;
  out[3] = Math.sqrt(Math.abs(1 - x * x - y * y - z * z));
  return out;
}
function exp(out, a) {
  var x = a[0], y = a[1], z = a[2], w = a[3];
  var r = Math.sqrt(x * x + y * y + z * z);
  var et = Math.exp(w);
  var s = r > 0 ? et * Math.sin(r) / r : 0;
  out[0] = x * s;
  out[1] = y * s;
  out[2] = z * s;
  out[3] = et * Math.cos(r);
  return out;
}
function ln(out, a) {
  var x = a[0], y = a[1], z = a[2], w = a[3];
  var r = Math.sqrt(x * x + y * y + z * z);
  var t = r > 0 ? Math.atan2(r, w) / r : 0;
  out[0] = x * t;
  out[1] = y * t;
  out[2] = z * t;
  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);
  return out;
}
function pow(out, a, b) {
  ln(out, a);
  scale4(out, out, b);
  exp(out, out);
  return out;
}
function slerp(out, a, b, t) {
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bx = b[0], by = b[1], bz = b[2], bw = b[3];
  var omega, cosom, sinom, scale0, scale1;
  cosom = ax * bx + ay * by + az * bz + aw * bw;
  if (cosom < 0) {
    cosom = -cosom;
    bx = -bx;
    by = -by;
    bz = -bz;
    bw = -bw;
  }
  if (1 - cosom > EPSILON) {
    omega = Math.acos(cosom);
    sinom = Math.sin(omega);
    scale0 = Math.sin((1 - t) * omega) / sinom;
    scale1 = Math.sin(t * omega) / sinom;
  } else {
    scale0 = 1 - t;
    scale1 = t;
  }
  out[0] = scale0 * ax + scale1 * bx;
  out[1] = scale0 * ay + scale1 * by;
  out[2] = scale0 * az + scale1 * bz;
  out[3] = scale0 * aw + scale1 * bw;
  return out;
}
function random3(out) {
  var u1 = RANDOM();
  var u2 = RANDOM();
  var u3 = RANDOM();
  var sqrt1MinusU1 = Math.sqrt(1 - u1);
  var sqrtU1 = Math.sqrt(u1);
  out[0] = sqrt1MinusU1 * Math.sin(2 * Math.PI * u2);
  out[1] = sqrt1MinusU1 * Math.cos(2 * Math.PI * u2);
  out[2] = sqrtU1 * Math.sin(2 * Math.PI * u3);
  out[3] = sqrtU1 * Math.cos(2 * Math.PI * u3);
  return out;
}
function invert2(out, a) {
  var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
  var dot3 = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;
  var invDot = dot3 ? 1 / dot3 : 0;
  out[0] = -a0 * invDot;
  out[1] = -a1 * invDot;
  out[2] = -a2 * invDot;
  out[3] = a3 * invDot;
  return out;
}
function conjugate(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  out[2] = -a[2];
  out[3] = a[3];
  return out;
}
function fromMat3(out, m) {
  var fTrace = m[0] + m[4] + m[8];
  var fRoot;
  if (fTrace > 0) {
    fRoot = Math.sqrt(fTrace + 1);
    out[3] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out[0] = (m[5] - m[7]) * fRoot;
    out[1] = (m[6] - m[2]) * fRoot;
    out[2] = (m[1] - m[3]) * fRoot;
  } else {
    var i = 0;
    if (m[4] > m[0])
      i = 1;
    if (m[8] > m[i * 3 + i])
      i = 2;
    var j = (i + 1) % 3;
    var k = (i + 2) % 3;
    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1);
    out[i] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;
    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;
    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;
  }
  return out;
}
function fromEuler(out, x, y, z) {
  var halfToRad = 0.5 * Math.PI / 180;
  x *= halfToRad;
  y *= halfToRad;
  z *= halfToRad;
  var sx = Math.sin(x);
  var cx = Math.cos(x);
  var sy = Math.sin(y);
  var cy = Math.cos(y);
  var sz = Math.sin(z);
  var cz = Math.cos(z);
  out[0] = sx * cy * cz - cx * sy * sz;
  out[1] = cx * sy * cz + sx * cy * sz;
  out[2] = cx * cy * sz - sx * sy * cz;
  out[3] = cx * cy * cz + sx * sy * sz;
  return out;
}
function str4(a) {
  return "quat(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")";
}
var clone4 = clone3;
var fromValues4 = fromValues3;
var copy4 = copy3;
var set4 = set3;
var add4 = add3;
var mul4 = multiply4;
var scale4 = scale3;
var dot3 = dot2;
var lerp3 = lerp2;
var length3 = length2;
var len3 = length3;
var squaredLength3 = squaredLength2;
var sqrLen3 = squaredLength3;
var normalize3 = normalize2;
var exactEquals4 = exactEquals3;
var equals4 = equals3;
var rotationTo = function() {
  var tmpvec3 = create3();
  var xUnitVec3 = fromValues2(1, 0, 0);
  var yUnitVec3 = fromValues2(0, 1, 0);
  return function(out, a, b) {
    var dot4 = dot(a, b);
    if (dot4 < -0.999999) {
      cross(tmpvec3, xUnitVec3, a);
      if (len(tmpvec3) < 0.000001)
        cross(tmpvec3, yUnitVec3, a);
      normalize(tmpvec3, tmpvec3);
      setAxisAngle(out, tmpvec3, Math.PI);
      return out;
    } else if (dot4 > 0.999999) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
      out[3] = 1;
      return out;
    } else {
      cross(tmpvec3, a, b);
      out[0] = tmpvec3[0];
      out[1] = tmpvec3[1];
      out[2] = tmpvec3[2];
      out[3] = 1 + dot4;
      return normalize3(out, out);
    }
  };
}();
var sqlerp = function() {
  var temp1 = create5();
  var temp2 = create5();
  return function(out, a, b, c, d, t) {
    slerp(temp1, a, d, t);
    slerp(temp2, b, c, t);
    slerp(out, temp1, temp2, 2 * t * (1 - t));
    return out;
  };
}();
var setAxes = function() {
  var matr = create();
  return function(out, view, right, up) {
    matr[0] = right[0];
    matr[3] = right[1];
    matr[6] = right[2];
    matr[1] = up[0];
    matr[4] = up[1];
    matr[7] = up[2];
    matr[2] = -view[0];
    matr[5] = -view[1];
    matr[8] = -view[2];
    return normalize3(out, fromMat3(out, matr));
  };
}();

// node_modules/gl-matrix/esm/vec2.js
var exports_vec2 = {};
__export(exports_vec2, {
  zero: () => {
    {
      return zero3;
    }
  },
  transformMat4: () => {
    {
      return transformMat43;
    }
  },
  transformMat3: () => {
    {
      return transformMat32;
    }
  },
  transformMat2d: () => {
    {
      return transformMat2d;
    }
  },
  transformMat2: () => {
    {
      return transformMat2;
    }
  },
  subtract: () => {
    {
      return subtract4;
    }
  },
  sub: () => {
    {
      return sub4;
    }
  },
  str: () => {
    {
      return str5;
    }
  },
  squaredLength: () => {
    {
      return squaredLength4;
    }
  },
  squaredDistance: () => {
    {
      return squaredDistance3;
    }
  },
  sqrLen: () => {
    {
      return sqrLen4;
    }
  },
  sqrDist: () => {
    {
      return sqrDist3;
    }
  },
  set: () => {
    {
      return set5;
    }
  },
  scaleAndAdd: () => {
    {
      return scaleAndAdd3;
    }
  },
  scale: () => {
    {
      return scale5;
    }
  },
  round: () => {
    {
      return round3;
    }
  },
  rotate: () => {
    {
      return rotate2;
    }
  },
  random: () => {
    {
      return random4;
    }
  },
  normalize: () => {
    {
      return normalize4;
    }
  },
  negate: () => {
    {
      return negate3;
    }
  },
  multiply: () => {
    {
      return multiply5;
    }
  },
  mul: () => {
    {
      return mul5;
    }
  },
  min: () => {
    {
      return min3;
    }
  },
  max: () => {
    {
      return max3;
    }
  },
  lerp: () => {
    {
      return lerp4;
    }
  },
  length: () => {
    {
      return length4;
    }
  },
  len: () => {
    {
      return len4;
    }
  },
  inverse: () => {
    {
      return inverse3;
    }
  },
  fromValues: () => {
    {
      return fromValues5;
    }
  },
  forEach: () => {
    {
      return forEach3;
    }
  },
  floor: () => {
    {
      return floor3;
    }
  },
  exactEquals: () => {
    {
      return exactEquals5;
    }
  },
  equals: () => {
    {
      return equals5;
    }
  },
  dot: () => {
    {
      return dot4;
    }
  },
  divide: () => {
    {
      return divide3;
    }
  },
  div: () => {
    {
      return div3;
    }
  },
  distance: () => {
    {
      return distance3;
    }
  },
  dist: () => {
    {
      return dist3;
    }
  },
  cross: () => {
    {
      return cross3;
    }
  },
  create: () => {
    {
      return create6;
    }
  },
  copy: () => {
    {
      return copy5;
    }
  },
  clone: () => {
    {
      return clone5;
    }
  },
  ceil: () => {
    {
      return ceil3;
    }
  },
  angle: () => {
    {
      return angle2;
    }
  },
  add: () => {
    {
      return add5;
    }
  }
});
function create6() {
  var out = new ARRAY_TYPE(2);
  if (ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
  }
  return out;
}
function clone5(a) {
  var out = new ARRAY_TYPE(2);
  out[0] = a[0];
  out[1] = a[1];
  return out;
}
function fromValues5(x, y) {
  var out = new ARRAY_TYPE(2);
  out[0] = x;
  out[1] = y;
  return out;
}
function copy5(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  return out;
}
function set5(out, x, y) {
  out[0] = x;
  out[1] = y;
  return out;
}
function add5(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  return out;
}
function subtract4(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  return out;
}
function multiply5(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  return out;
}
function divide3(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  return out;
}
function ceil3(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  return out;
}
function floor3(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  return out;
}
function min3(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  return out;
}
function max3(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  return out;
}
function round3(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  return out;
}
function scale5(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  return out;
}
function scaleAndAdd3(out, a, b, scale6) {
  out[0] = a[0] + b[0] * scale6;
  out[1] = a[1] + b[1] * scale6;
  return out;
}
function distance3(a, b) {
  var x = b[0] - a[0], y = b[1] - a[1];
  return Math.hypot(x, y);
}
function squaredDistance3(a, b) {
  var x = b[0] - a[0], y = b[1] - a[1];
  return x * x + y * y;
}
function length4(a) {
  var x = a[0], y = a[1];
  return Math.hypot(x, y);
}
function squaredLength4(a) {
  var x = a[0], y = a[1];
  return x * x + y * y;
}
function negate3(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  return out;
}
function inverse3(out, a) {
  out[0] = 1 / a[0];
  out[1] = 1 / a[1];
  return out;
}
function normalize4(out, a) {
  var x = a[0], y = a[1];
  var len4 = x * x + y * y;
  if (len4 > 0) {
    len4 = 1 / Math.sqrt(len4);
  }
  out[0] = a[0] * len4;
  out[1] = a[1] * len4;
  return out;
}
function dot4(a, b) {
  return a[0] * b[0] + a[1] * b[1];
}
function cross3(out, a, b) {
  var z = a[0] * b[1] - a[1] * b[0];
  out[0] = out[1] = 0;
  out[2] = z;
  return out;
}
function lerp4(out, a, b, t) {
  var ax = a[0], ay = a[1];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  return out;
}
function random4(out, scale6) {
  scale6 = scale6 || 1;
  var r = RANDOM() * 2 * Math.PI;
  out[0] = Math.cos(r) * scale6;
  out[1] = Math.sin(r) * scale6;
  return out;
}
function transformMat2(out, a, m) {
  var x = a[0], y = a[1];
  out[0] = m[0] * x + m[2] * y;
  out[1] = m[1] * x + m[3] * y;
  return out;
}
function transformMat2d(out, a, m) {
  var x = a[0], y = a[1];
  out[0] = m[0] * x + m[2] * y + m[4];
  out[1] = m[1] * x + m[3] * y + m[5];
  return out;
}
function transformMat32(out, a, m) {
  var x = a[0], y = a[1];
  out[0] = m[0] * x + m[3] * y + m[6];
  out[1] = m[1] * x + m[4] * y + m[7];
  return out;
}
function transformMat43(out, a, m) {
  var x = a[0];
  var y = a[1];
  out[0] = m[0] * x + m[4] * y + m[12];
  out[1] = m[1] * x + m[5] * y + m[13];
  return out;
}
function rotate2(out, a, b, rad) {
  var p0 = a[0] - b[0], p1 = a[1] - b[1], sinC = Math.sin(rad), cosC = Math.cos(rad);
  out[0] = p0 * cosC - p1 * sinC + b[0];
  out[1] = p0 * sinC + p1 * cosC + b[1];
  return out;
}
function angle2(a, b) {
  var x1 = a[0], y1 = a[1], x2 = b[0], y2 = b[1], mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2), cosine = mag && (x1 * x2 + y1 * y2) / mag;
  return Math.acos(Math.min(Math.max(cosine, -1), 1));
}
function zero3(out) {
  out[0] = 0;
  out[1] = 0;
  return out;
}
function str5(a) {
  return "vec2(" + a[0] + ", " + a[1] + ")";
}
function exactEquals5(a, b) {
  return a[0] === b[0] && a[1] === b[1];
}
function equals5(a, b) {
  var a0 = a[0], a1 = a[1];
  var b0 = b[0], b1 = b[1];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1));
}
var len4 = length4;
var sub4 = subtract4;
var mul5 = multiply5;
var div3 = divide3;
var dist3 = distance3;
var sqrDist3 = squaredDistance3;
var sqrLen4 = squaredLength4;
var forEach3 = function() {
  var vec = create6();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 2;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
    }
    return a;
  };
}();

// src/local-framework/system/math/angles.ts
var rad2Deg = (rad) => rad / Math.PI * 180;
var deg2Rad = (deg) => deg * Math.PI / 180;
var getEuler = (vector3) => {
  const theta = Math.atan2(vector3[1], vector3[0]);
  const magnitude = exports_vec2.length([vector3[0], vector3[1]]);
  const phi = Math.atan2(vector3[2], magnitude);
  return [theta, phi];
};

// src/local-framework/system/controllers/FreeFlyController.ts
var AllAxises = {
  X: 0,
  Y: 1,
  Z: 2
};

class FreeFlyController {
  _isActivated = false;
  _theta = 0;
  _phi = 0;
  _mouseSensibility;
  _keyboardSensibility;
  _touchSensibility;
  _movingSpeed;
  _touchWasActive = false;
  _touchStartTime = 0;
  _touchMoveForward = false;
  _axisIndices;
  _position = exports_vec3.fromValues(0, 0, 0);
  _target = exports_vec3.fromValues(0, 0, 0);
  _forwardAxis = exports_vec3.fromValues(1, 0, 0);
  _leftAxis = exports_vec3.fromValues(0, 0, 1);
  _upAxis = exports_vec3.fromValues(0, 1, 0);
  _move_forwardAxis = exports_vec3.fromValues(1, 0, 0);
  _move_leftAxis = exports_vec3.fromValues(0, 0, 1);
  _move_upAxis = exports_vec3.fromValues(0, 1, 0);
  constructor(def) {
    this._mouseSensibility = def.mouseSensibility;
    this._keyboardSensibility = def.keyboardSensibility;
    this._touchSensibility = def.touchSensibility;
    this._movingSpeed = def.movingSpeed;
    exports_vec3.copy(this._position, def.position);
    this._axisIndices = [
      def.coordinates ? AllAxises[def.coordinates[0]] : AllAxises.X,
      def.coordinates ? AllAxises[def.coordinates[1]] : AllAxises.Y,
      def.coordinates ? AllAxises[def.coordinates[2]] : AllAxises.Z
    ];
    this._theta = def.theta;
    this._phi = def.phi;
  }
  isActivated() {
    return this._isActivated;
  }
  activate() {
    this._isActivated = true;
    GlobalKeyboardManager.preventDefault("Z");
    GlobalKeyboardManager.preventDefault("W");
    GlobalKeyboardManager.preventDefault("S");
    GlobalKeyboardManager.preventDefault("A");
    GlobalKeyboardManager.preventDefault("Q");
    GlobalKeyboardManager.preventDefault("D");
    GlobalKeyboardManager.preventDefault("Shift");
    GlobalKeyboardManager.preventDefault("C");
    GlobalKeyboardManager.preventDefault("Space");
    GlobalKeyboardManager.preventDefault("ArrowUp");
    GlobalKeyboardManager.preventDefault("ArrowDown");
    GlobalKeyboardManager.preventDefault("ArrowLeft");
    GlobalKeyboardManager.preventDefault("ArrowRight");
  }
  deactivate() {
    this._isActivated = false;
    GlobalKeyboardManager.enableDefault("Z");
    GlobalKeyboardManager.enableDefault("W");
    GlobalKeyboardManager.enableDefault("S");
    GlobalKeyboardManager.enableDefault("A");
    GlobalKeyboardManager.enableDefault("Q");
    GlobalKeyboardManager.enableDefault("D");
    GlobalKeyboardManager.enableDefault("Shift");
    GlobalKeyboardManager.enableDefault("C");
    GlobalKeyboardManager.enableDefault("Space");
    GlobalKeyboardManager.enableDefault("ArrowUp");
    GlobalKeyboardManager.enableDefault("ArrowDown");
    GlobalKeyboardManager.enableDefault("ArrowLeft");
    GlobalKeyboardManager.enableDefault("ArrowRight");
  }
  isInteractedWith() {
    return GlobalKeyboardManager.isPressed("Z", "W", "S", "A", "Q", "D") || GlobalKeyboardManager.isPressed("Shift", "C", "Space") || GlobalKeyboardManager.isPressed("ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight");
  }
  update(deltaMsTime, fpsControls = false) {
    let moveForward = false;
    let moveBackward = false;
    let strafeLeft = false;
    let strafeRight = false;
    let isRunning = false;
    let isDiving = false;
    let isRising = false;
    let lookDeltaX = 0;
    let lookDeltaY = 0;
    {
      const deltaX = GlobalMouseManager.deltaX() * this._mouseSensibility;
      const deltaY = GlobalMouseManager.deltaY() * this._mouseSensibility;
      lookDeltaX -= deg2Rad(deltaX) * deltaMsTime;
      lookDeltaY -= deg2Rad(deltaY) * deltaMsTime;
    }
    const isTouched = GlobalTouchManager.getTouchData().length > 0;
    if (isTouched) {
      if (!this._touchWasActive) {
        const currTime = Date.now();
        const elapsed = (currTime - this._touchStartTime) / 1000;
        if (elapsed < 0.25) {
          this._touchMoveForward = true;
        } else {
          this._touchStartTime = currTime;
        }
      }
      const firstTouch = GlobalTouchManager.getTouchData()[0];
      const deltaX = firstTouch.deltaX * this._touchSensibility;
      const deltaY = firstTouch.deltaY * this._touchSensibility;
      lookDeltaX -= deg2Rad(deltaX) * deltaMsTime;
      lookDeltaY -= deg2Rad(deltaY) * deltaMsTime;
    } else {
      this._touchMoveForward = false;
    }
    this._touchWasActive = isTouched;
    if (this._touchMoveForward) {
      moveForward = true;
    }
    if (GlobalKeyboardManager.isPressed("Z", "W")) {
      moveForward = true;
    }
    if (GlobalKeyboardManager.isPressed("S")) {
      moveBackward = true;
    }
    if (GlobalKeyboardManager.isPressed("A", "Q")) {
      strafeLeft = true;
    }
    if (GlobalKeyboardManager.isPressed("D")) {
      strafeRight = true;
    }
    if (GlobalKeyboardManager.isPressed("Shift")) {
      isRunning = true;
    }
    if (!fpsControls) {
      if (GlobalKeyboardManager.isPressed("C")) {
        isDiving = true;
      }
      if (GlobalKeyboardManager.isPressed("Space")) {
        isRising = true;
      }
    }
    const currentLinearSpeed = this._movingSpeed * (isRunning ? 4 : 1) * deltaMsTime;
    const currentAngularSpeed = this._keyboardSensibility * deltaMsTime;
    if (GlobalKeyboardManager.isPressed("ArrowUp")) {
      lookDeltaY += currentAngularSpeed;
    } else if (GlobalKeyboardManager.isPressed("ArrowDown")) {
      lookDeltaY -= currentAngularSpeed;
    }
    if (GlobalKeyboardManager.isPressed("ArrowLeft")) {
      lookDeltaX += currentAngularSpeed;
    } else if (GlobalKeyboardManager.isPressed("ArrowRight")) {
      lookDeltaX -= currentAngularSpeed;
    }
    this._theta += lookDeltaX;
    this._phi += lookDeltaY;
    const hPi = Math.PI * 0.5;
    const verticalLimit = hPi * 0.95;
    this._phi = Math.min(Math.max(this._phi, -verticalLimit), +verticalLimit);
    const cosTheta = Math.cos(this._theta);
    const sinTheta = Math.sin(this._theta);
    const [axisX, axisY, axisZ] = this._axisIndices;
    const upRadius = Math.cos(this._phi + hPi);
    this._upAxis[axisX] = upRadius * cosTheta;
    this._upAxis[axisY] = upRadius * sinTheta;
    this._upAxis[axisZ] = Math.sin(this._phi + hPi);
    const forwardRadius = Math.cos(this._phi);
    this._forwardAxis[axisX] = forwardRadius * cosTheta;
    this._forwardAxis[axisY] = forwardRadius * sinTheta;
    this._forwardAxis[axisZ] = Math.sin(this._phi);
    exports_vec3.cross(this._leftAxis, this._upAxis, this._forwardAxis);
    if (fpsControls) {
      this._move_forwardAxis[axisX] = cosTheta;
      this._move_forwardAxis[axisY] = sinTheta;
      this._move_forwardAxis[axisZ] = 0;
      this._move_leftAxis[axisX] = -sinTheta;
      this._move_leftAxis[axisY] = cosTheta;
      this._move_leftAxis[axisZ] = 0;
      this._move_upAxis[axisX] = 0;
      this._move_upAxis[axisY] = 0;
      this._move_upAxis[axisZ] = 1;
    } else {
      exports_vec3.copy(this._move_forwardAxis, this._forwardAxis);
      exports_vec3.copy(this._move_leftAxis, this._leftAxis);
      exports_vec3.copy(this._move_upAxis, this._upAxis);
    }
    const scaledForward = exports_vec3.fromValues(0, 0, 0);
    exports_vec3.scale(scaledForward, this._move_forwardAxis, currentLinearSpeed);
    const scaledLeft = exports_vec3.fromValues(0, 0, 0);
    exports_vec3.scale(scaledLeft, this._move_leftAxis, currentLinearSpeed);
    const scaledUp = exports_vec3.fromValues(0, 0, 0);
    exports_vec3.scale(scaledUp, this._move_upAxis, currentLinearSpeed);
    if (moveForward) {
      exports_vec3.add(this._position, this._position, scaledForward);
    } else if (moveBackward) {
      exports_vec3.sub(this._position, this._position, scaledForward);
    }
    if (strafeLeft) {
      exports_vec3.add(this._position, this._position, scaledLeft);
    } else if (strafeRight) {
      exports_vec3.sub(this._position, this._position, scaledLeft);
    }
    if (isRising) {
      exports_vec3.add(this._position, this._position, scaledUp);
    } else if (isDiving) {
      exports_vec3.sub(this._position, this._position, scaledUp);
    }
    exports_vec3.add(this._target, this._position, this._forwardAxis);
  }
  getPosition() {
    return this._position;
  }
  setPosition(inPos) {
    exports_vec3.copy(this._position, inPos);
    exports_vec3.add(this._target, this._position, this._forwardAxis);
  }
  getTarget() {
    return this._target;
  }
  getUpAxis() {
    return this._upAxis;
  }
  getTheta() {
    return this._theta;
  }
  getPhi() {
    return this._phi;
  }
  getTouchMoveForward() {
    return this._touchMoveForward;
  }
}
// src/local-framework/system/math/index.ts
var exports_math = {};
__export(exports_math, {
  rayCaster: () => {
    {
      return exports_rayCaster;
    }
  },
  rad2Deg: () => {
    {
      return rad2Deg;
    }
  },
  polarCoords: () => {
    {
      return exports_polarCoords;
    }
  },
  lerp: () => {
    {
      return lerp5;
    }
  },
  getEuler: () => {
    {
      return getEuler;
    }
  },
  easing: () => {
    {
      return exports_easing;
    }
  },
  deg2Rad: () => {
    {
      return deg2Rad;
    }
  },
  collisions: () => {
    {
      return exports_collisions;
    }
  },
  clamp: () => {
    {
      return clamp;
    }
  }
});

// src/local-framework/system/math/clamp.ts
var clamp = (currVal, minVal, maxVal) => Math.min(Math.max(currVal, minVal), maxVal);
// src/local-framework/system/math/collisions.ts
var exports_collisions = {};
__export(exports_collisions, {
  intersectSegment: () => {
    {
      return intersectSegment;
    }
  },
  collisionLinesStrip: () => {
    {
      return collisionLinesStrip;
    }
  }
});
var intersectSegment = (A, B, I, P) => {
  const D = exports_vec2.fromValues(0, 0);
  const E = exports_vec2.fromValues(0, 0);
  D[0] = B[0] - A[0];
  D[1] = B[1] - A[1];
  E[0] = P[0] - I[0];
  E[1] = P[1] - I[1];
  const denom = D[0] * E[1] - D[1] * E[0];
  if (denom == 0) {
    return -1;
  }
  const t = -(A[0] * E[1] - I[0] * E[1] - E[0] * A[1] + E[0] * I[1]) / denom;
  if (t < 0 || t >= 1) {
    return 0;
  }
  const u = -(-D[0] * A[1] + D[0] * I[1] + D[1] * A[0] - D[1] * I[0]) / denom;
  if (u < 0 || u >= 1) {
    return 0;
  }
  return 1;
};
var collisionLinesStrip = (tab, P) => {
  const I = exports_vec2.fromValues(0, 0);
  I[0] = 1e4 + Math.random() * 100;
  I[1] = 1e4 + Math.random() * 100;
  let nbIntersections = 0;
  for (let ii = 0;ii < tab.length; ++ii) {
    let jj = (ii + 1) % tab.length;
    const result = intersectSegment(tab[ii], tab[jj], I, P);
    if (result == -1) {
      return collisionLinesStrip(tab, P);
    }
    nbIntersections += result;
  }
  if (nbIntersections % 2 == 1) {
    return true;
  }
  return false;
};
// src/local-framework/system/math/easing.ts
var exports_easing = {};
__export(exports_easing, {
  easePinPong: () => {
    {
      return easePinPong;
    }
  },
  easeOutSine: () => {
    {
      return easeOutSine;
    }
  },
  easeOutQuint: () => {
    {
      return easeOutQuint;
    }
  },
  easeOutQuart: () => {
    {
      return easeOutQuart;
    }
  },
  easeOutQuad: () => {
    {
      return easeOutQuad;
    }
  },
  easeOutExpo: () => {
    {
      return easeOutExpo;
    }
  },
  easeOutElastic: () => {
    {
      return easeOutElastic;
    }
  },
  easeOutCubic: () => {
    {
      return easeOutCubic;
    }
  },
  easeOutCirc: () => {
    {
      return easeOutCirc;
    }
  },
  easeOutBounce: () => {
    {
      return easeOutBounce;
    }
  },
  easeOutBack: () => {
    {
      return easeOutBack;
    }
  },
  easeInSine: () => {
    {
      return easeInSine;
    }
  },
  easeInQuint: () => {
    {
      return easeInQuint;
    }
  },
  easeInQuart: () => {
    {
      return easeInQuart;
    }
  },
  easeInQuad: () => {
    {
      return easeInQuad;
    }
  },
  easeInOutSine: () => {
    {
      return easeInOutSine;
    }
  },
  easeInOutQuint: () => {
    {
      return easeInOutQuint;
    }
  },
  easeInOutQuart: () => {
    {
      return easeInOutQuart;
    }
  },
  easeInOutQuad: () => {
    {
      return easeInOutQuad;
    }
  },
  easeInOutExpo: () => {
    {
      return easeInOutExpo;
    }
  },
  easeInOutElastic: () => {
    {
      return easeInOutElastic;
    }
  },
  easeInOutCubic: () => {
    {
      return easeInOutCubic;
    }
  },
  easeInOutCirc: () => {
    {
      return easeInOutCirc;
    }
  },
  easeInOutBounce: () => {
    {
      return easeInOutBounce;
    }
  },
  easeInOutBack: () => {
    {
      return easeInOutBack;
    }
  },
  easeInExpo: () => {
    {
      return easeInExpo;
    }
  },
  easeInElastic: () => {
    {
      return easeInElastic;
    }
  },
  easeInCubic: () => {
    {
      return easeInCubic;
    }
  },
  easeInCirc: () => {
    {
      return easeInCirc;
    }
  },
  easeInBounce: () => {
    {
      return easeInBounce;
    }
  },
  easeInBack: () => {
    {
      return easeInBack;
    }
  },
  easeClamp: () => {
    {
      return easeClamp;
    }
  }
});
var easeClamp = (t) => {
  if (t > 1) {
    return t - Math.floor(t);
  }
  return t;
};
var easePinPong = (t) => {
  t *= 2;
  if (t < 1)
    return t;
  t -= 1;
  return 1 - t;
};
var easeInSine = (t) => {
  return Math.sin(1.5707963 * t);
};
var easeOutSine = (t) => {
  return 1 + Math.sin(1.5707963 * (t - 1));
};
var easeInOutSine = (t) => {
  return 0.5 * (1 + Math.sin(3.1415926 * (t - 0.5)));
};
var easeInQuad = (t) => {
  return t * t;
};
var easeOutQuad = (t) => {
  return t * (2 - t);
};
var easeInOutQuad = (t) => {
  return t < 0.5 ? 2 * t * t : t * (4 - 2 * t) - 1;
};
var easeInCubic = (t) => {
  return t * t * t;
};
var easeOutCubic = (t) => {
  const t2 = t - 1;
  return 1 + t2 * t2 * t2;
};
var easeInOutCubic = (t) => {
  const t2 = t - 1;
  const t3 = t2 - 1;
  return t < 0.5 ? 4 * t * t * t : 1 + t2 * (2 * t3) * (2 * t3);
};
var easeInQuart = (t) => {
  t *= t;
  return t * t;
};
var easeOutQuart = (t) => {
  const t2 = t - 1;
  t = t2 * t2;
  return 1 - t * t;
};
var easeInOutQuart = (t) => {
  if (t < 0.5) {
    t *= t;
    return 8 * t * t;
  }
  const t2 = t - 1;
  t = t2 * t2;
  return 1 - 8 * t * t;
};
var easeInQuint = (t) => {
  const t2 = t * t;
  return t * t2 * t2;
};
var easeOutQuint = (t) => {
  const tx = t - 1;
  const t2 = tx * tx;
  return 1 + tx * t2 * t2;
};
var easeInOutQuint = (t) => {
  let t2;
  if (t < 0.5) {
    t2 = t * t;
    return 16 * t * t2 * t2;
  }
  const tx = t - 1;
  t2 = tx * tx;
  return 1 + 16 * tx * t2 * t2;
};
var easeInExpo = (t) => {
  return (Math.pow(2, 8 * t) - 1) / 255;
};
var easeOutExpo = (t) => {
  return 1 - Math.pow(2, -8 * t);
};
var easeInOutExpo = (t) => {
  if (t < 0.5)
    return (Math.pow(2, 16 * t) - 1) / 510;
  return 1 - 0.5 * Math.pow(2, -16 * (t - 0.5));
};
var easeInCirc = (t) => {
  return 1 - Math.sqrt(1 - t);
};
var easeOutCirc = (t) => {
  return Math.sqrt(t);
};
var easeInOutCirc = (t) => {
  if (t < 0.5)
    return (1 - Math.sqrt(1 - 2 * t)) * 0.5;
  return (1 + Math.sqrt(2 * t - 1)) * 0.5;
};
var easeInBack = (t) => {
  return t * t * (2.70158 * t - 1.70158);
};
var easeOutBack = (t) => {
  const tx = t - 1;
  return 1 + tx * tx * (2.70158 * tx + 1.70158);
};
var easeInOutBack = (t) => {
  if (t < 0.5)
    return t * t * (7 * t - 2.5) * 2;
  const tx = t - 1;
  return 1 + tx * tx * 2 * (7 * tx + 2.5);
};
var easeInElastic = (t) => {
  const t2 = t * t;
  return t2 * t2 * Math.sin(t * Math.PI * 4.5);
};
var easeOutElastic = (t) => {
  const t2 = (t - 1) * (t - 1);
  return 1 - t2 * t2 * Math.cos(t * Math.PI * 4.5);
};
var easeInOutElastic = (t) => {
  let t2;
  if (t < 0.45) {
    t2 = t * t;
    return 8 * t2 * t2 * Math.sin(t * Math.PI * 9);
  }
  if (t < 0.55)
    return 0.5 + 0.75 * Math.sin(t * Math.PI * 4);
  t2 = (t - 1) * (t - 1);
  return 1 - 8 * t2 * t2 * Math.sin(t * Math.PI * 9);
};
var easeInBounce = (t) => {
  return Math.pow(2, 6 * (t - 1)) * Math.abs(Math.sin(t * Math.PI * 3.5));
};
var easeOutBounce = (t) => {
  return 1 - Math.pow(2, -6 * t) * Math.abs(Math.cos(t * Math.PI * 3.5));
};
var easeInOutBounce = (t) => {
  if (t < 0.5)
    return 8 * Math.pow(2, 8 * (t - 1)) * Math.abs(Math.sin(t * Math.PI * 7));
  return 1 - 8 * Math.pow(2, -8 * t) * Math.abs(Math.sin(t * Math.PI * 7));
};
// src/local-framework/system/math/lerp.ts
var lerp5 = (ratio, minVal, maxVal) => minVal + (maxVal - minVal) * ratio;
// src/local-framework/system/math/polarCoords.ts
var exports_polarCoords = {};
__export(exports_polarCoords, {
  polar2Cartesian: () => {
    {
      return polar2Cartesian;
    }
  },
  cartesian2Polar: () => {
    {
      return cartesian2Polar;
    }
  }
});
var polar2Cartesian = (lat, lng, relAltitude = 0, globRadius = 100) => {
  const phi = (90 - lat) * Math.PI / 180;
  const theta = (90 - lng) * Math.PI / 180;
  const r = globRadius * (1 + relAltitude);
  return [
    r * Math.sin(phi) * Math.cos(theta),
    r * Math.cos(phi),
    r * Math.sin(phi) * Math.sin(theta)
  ];
};
var cartesian2Polar = (x, y, z, globRadius = 100) => {
  const r = Math.sqrt(x * x + y * y + z * z);
  const phi = Math.acos(y / r);
  const theta = Math.atan2(z, x);
  return {
    lat: 90 - phi * 180 / Math.PI,
    lng: 90 - theta * 180 / Math.PI - (theta < -Math.PI / 2 ? 360 : 0),
    altitude: r / globRadius - 1
  };
};
// src/local-framework/system/math/rayCaster.ts
var exports_rayCaster = {};
__export(exports_rayCaster, {
  intersectRaySphere: () => {
    {
      return intersectRaySphere;
    }
  }
});
var intersectRaySphere = (pos, dir, center, radius) => {
  const m = exports_vec3.sub(exports_vec3.create(), pos, center);
  const b = exports_vec3.dot(m, dir);
  const c = exports_vec3.dot(m, m) - radius * radius;
  if (c > 0 && b > 0) {
    return null;
  }
  const discr = b * b - c;
  if (discr < 0) {
    return null;
  }
  let t = -b - Math.sqrt(discr);
  if (t < 0) {
    t = 0;
  }
  return exports_vec3.fromValues(pos[0] + t * dir[0], pos[1] + t * dir[1], pos[2] + t * dir[2]);
};
// src/local-framework/system/metrics/index.ts
var exports_metrics = {};
__export(exports_metrics, {
  FrameProfiler: () => {
    {
      return FrameProfiler;
    }
  }
});

// src/local-framework/system/metrics/FrameProfiler.ts
class FrameProfiler {
  _framesDelta = [];
  _averageDelta = 0;
  _minDelta = 0;
  _maxDelta = 0;
  pushDelta(inDelta) {
    if (this._framesDelta.length >= 100) {
      this._framesDelta.shift();
    }
    this._framesDelta.push(inDelta);
    this._minDelta = 999999999;
    this._maxDelta = -999999999;
    this._averageDelta = 0;
    for (const currDelta of this._framesDelta) {
      this._minDelta = Math.min(this._minDelta, currDelta);
      this._maxDelta = Math.max(this._maxDelta, currDelta);
      this._averageDelta += currDelta;
    }
    this._averageDelta /= this._framesDelta.length;
  }
  get framesDelta() {
    return this._framesDelta;
  }
  get averageDelta() {
    return this._averageDelta;
  }
  get minDelta() {
    return this._minDelta;
  }
  get maxDelta() {
    return this._maxDelta;
  }
}
// src/local-framework/system/utilities/index.ts
var exports_utilities = {};
__export(exports_utilities, {
  FetchHelpers: () => {
    {
      return exports_FetchHelpers;
    }
  },
  AsyncHelpers: () => {
    {
      return exports_AsyncHelpers;
    }
  }
});

// src/local-framework/system/utilities/FetchHelpers.ts
var exports_FetchHelpers = {};
__export(exports_FetchHelpers, {
  progressFetch: () => {
    {
      return progressFetch;
    }
  }
});
var progressFetch = async (url, onProgress) => {
  const response = await fetch(url);
  const reader = response.body.getReader();
  let totalProgress = 0;
  const stream = new ReadableStream({
    start(controller) {
      return pump();
      function pump() {
        return reader.read().then(({ done, value }) => {
          if (done) {
            controller.close();
            return;
          }
          if (onProgress) {
            totalProgress += value.length;
            onProgress(totalProgress);
          }
          controller.enqueue(value);
          return pump();
        });
      }
    }
  });
  await stream;
  return new Response(stream);
};
// src/local-framework/system/utilities/AsyncHelpers.ts
var exports_AsyncHelpers = {};
__export(exports_AsyncHelpers, {
  sleep: () => {
    {
      return sleep;
    }
  },
  cancellableSleep: () => {
    {
      return cancellableSleep;
    }
  }
});
var sleep = async (delay) => {
  await new Promise((resolve) => setTimeout(resolve, delay));
};
var cancellableSleep = (delay) => {
  let timeoutHandle = -1;
  let resolveCallback = undefined;
  const promise = new Promise((resolve) => {
    resolveCallback = resolve;
    timeoutHandle = window.setTimeout(resolve, delay);
  });
  return {
    promise,
    cancel: () => {
      if (timeoutHandle >= 0) {
        window.clearTimeout(timeoutHandle);
      }
      if (resolveCallback) {
        resolveCallback();
      }
    }
  };
};
// src/local-framework/system/rng/index.ts
var exports_rng = {};
__export(exports_rng, {
  DeterministicRng: () => {
    {
      return DeterministicRng;
    }
  }
});

// src/local-framework/system/rng/DeterministicRng.ts
var RAND_MAX = 2147483648 | 0;

class DeterministicRng {
  _seed = 1 | 0;
  random() {
    if (this._seed == 0) {
      this._seed = 123459876 | 0;
    }
    const hi = this._seed / 127773 | 0;
    const lo = this._seed % 127773 | 0;
    let x = 16807 * lo - 2836 * hi | 0;
    if (x < 0) {
      x += 2147483647 | 0;
    }
    this._seed = x;
    return x % (RAND_MAX + 1) / -RAND_MAX;
  }
  setSeed(inSeed) {
    this._seed = inSeed | 0;
  }
}
// src/local-framework/graphics/index.ts
var exports_graphics = {};
__export(exports_graphics, {
  webgl2: () => {
    {
      return exports_webgl2;
    }
  },
  renderers: () => {
    {
      return exports_renderers;
    }
  },
  images: () => {
    {
      return exports_images;
    }
  },
  geometries: () => {
    {
      return exports_geometries;
    }
  },
  camera: () => {
    {
      return exports_camera;
    }
  }
});

// src/local-framework/graphics/camera/index.ts
var exports_camera = {};
__export(exports_camera, {
  screenToSceneCoordinatesFromInvComposed: () => {
    {
      return screenToSceneCoordinatesFromInvComposed;
    }
  },
  screenToSceneCoordinatesFromComposed: () => {
    {
      return screenToSceneCoordinatesFromComposed;
    }
  },
  screenToSceneCoordinates: () => {
    {
      return screenToSceneCoordinates;
    }
  },
  sceneToScreenCoordsFromComposed: () => {
    {
      return sceneToScreenCoordsFromComposed;
    }
  },
  sceneToScreenCoordinates: () => {
    {
      return sceneToScreenCoordinates;
    }
  },
  FrustumCulling: () => {
    {
      return FrustumCulling;
    }
  },
  Camera: () => {
    {
      return Camera;
    }
  }
});

// src/local-framework/graphics/camera/Camera.ts
var ProjectionType;
(function(ProjectionType2) {
  ProjectionType2[ProjectionType2["perspective"] = 0] = "perspective";
  ProjectionType2[ProjectionType2["orthogonal"] = 1] = "orthogonal";
})(ProjectionType || (ProjectionType = {}));

class Camera {
  _projectionType = ProjectionType.perspective;
  _perspectiveData;
  _orthogonalData;
  _viewportPos = exports_vec2.fromValues(0, 0);
  _viewportSize = exports_vec2.fromValues(0, 0);
  _projectionMatrix = exports_mat4.create();
  _viewMatrix = exports_mat4.create();
  _composedMatrix = exports_mat4.create();
  _eye = exports_vec3.fromValues(0, 0, 0);
  _target = exports_vec3.fromValues(0, 0, 0);
  _upAxis = exports_vec3.fromValues(0, 0, 0);
  setAsPerspective(inData) {
    this._projectionType = ProjectionType.perspective;
    let aspectRatio = inData.aspectRatio;
    if (aspectRatio === undefined) {
      aspectRatio = this._viewportSize[0] / this._viewportSize[1];
    }
    this._perspectiveData = {
      fovy: inData.fovy,
      aspectRatio,
      near: inData.near,
      far: inData.far
    };
  }
  setAsOrthogonal(inData) {
    this._projectionType = ProjectionType.orthogonal;
    this._orthogonalData = { ...inData };
  }
  setViewportPos(width, height) {
    this._viewportPos[0] = width;
    this._viewportPos[1] = height;
  }
  getViewportPos() {
    return this._viewportPos;
  }
  setViewportSize(width, height) {
    this._viewportSize[0] = width;
    this._viewportSize[1] = height;
    if (this._projectionType !== ProjectionType.perspective && this._perspectiveData) {
      this._perspectiveData.aspectRatio = this._viewportSize[0] / this._viewportSize[1];
    }
  }
  getViewportSize() {
    return this._viewportSize;
  }
  lookAt(inEye, inTarget, inUpAxis) {
    this.setEye(inEye);
    this.setTarget(inTarget);
    this.setUpAxis(inUpAxis);
  }
  setEye(inEye) {
    exports_vec3.copy(this._eye, inEye);
  }
  setTarget(inTarget) {
    exports_vec3.copy(this._target, inTarget);
  }
  setUpAxis(inUpAxis) {
    exports_vec3.copy(this._upAxis, inUpAxis);
  }
  getEye() {
    return this._eye;
  }
  getTarget() {
    return this._target;
  }
  getUpAxis() {
    return this._upAxis;
  }
  computeMatrices() {
    if (this._projectionType === ProjectionType.perspective) {
      const { fovy, aspectRatio, near, far } = this._perspectiveData;
      exports_mat4.perspective(this._projectionMatrix, deg2Rad(fovy), aspectRatio, near, far);
    } else if (this._projectionType === ProjectionType.orthogonal) {
      const { left, right, top, bottom, near, far } = this._orthogonalData;
      exports_mat4.ortho(this._projectionMatrix, left, right, top, bottom, near, far);
    }
    exports_mat4.lookAt(this._viewMatrix, this._eye, this._target, this._upAxis);
    this.computeComposedMatrix();
  }
  computeComposedMatrix() {
    exports_mat4.multiply(this._composedMatrix, this._projectionMatrix, this._viewMatrix);
  }
  setProjectionMatrix(inMat4) {
    exports_mat4.copy(this._projectionMatrix, inMat4);
  }
  setViewMatrix(inMat4) {
    exports_mat4.copy(this._viewMatrix, inMat4);
  }
  setComposedMatrix(inMat4) {
    exports_mat4.copy(this._composedMatrix, inMat4);
  }
  getProjectionMatrix() {
    return this._projectionMatrix;
  }
  getViewMatrix() {
    return this._viewMatrix;
  }
  getComposedMatrix() {
    return this._composedMatrix;
  }
  getPerspectiveData() {
    if (this._projectionType !== ProjectionType.perspective) {
      throw new Error("not a perspective projection");
    }
    return this._perspectiveData;
  }
  getOrthogonalData() {
    if (this._projectionType !== ProjectionType.orthogonal) {
      throw new Error("not an orthogonal projection");
    }
    return this._orthogonalData;
  }
}
// src/local-framework/graphics/camera/FrustumCulling.ts
var FrustumSide;
(function(FrustumSide2) {
  FrustumSide2[FrustumSide2["Right"] = 0] = "Right";
  FrustumSide2[FrustumSide2["Left"] = 1] = "Left";
  FrustumSide2[FrustumSide2["Bottom"] = 2] = "Bottom";
  FrustumSide2[FrustumSide2["Top"] = 3] = "Top";
  FrustumSide2[FrustumSide2["Back"] = 4] = "Back";
  FrustumSide2[FrustumSide2["Front"] = 5] = "Front";
})(FrustumSide || (FrustumSide = {}));

class FrustumCulling {
  _frustum = new Float32Array(24);
  _setPlane(side, left, right, coef) {
    const index = side * 4;
    this._frustum[index + 0] = left[0] + right[0] * coef;
    this._frustum[index + 1] = left[1] + right[1] * coef;
    this._frustum[index + 2] = left[2] + right[2] * coef;
    this._frustum[index + 3] = left[3] + right[3] * coef;
    const magnitude = Math.sqrt(this._frustum[index + 0] * this._frustum[index + 0] + this._frustum[index + 1] * this._frustum[index + 1] + this._frustum[index + 2] * this._frustum[index + 2]);
    if (magnitude === 0)
      return;
    this._frustum[index + 0] /= magnitude;
    this._frustum[index + 1] /= magnitude;
    this._frustum[index + 2] /= magnitude;
    this._frustum[index + 3] /= magnitude;
  }
  calculateFrustum(proj, view) {
    const clip = exports_mat4.multiply(exports_mat4.create(), proj, view);
    const row0 = exports_vec4.fromValues(clip[0], clip[4], clip[8], clip[12]);
    const row1 = exports_vec4.fromValues(clip[1], clip[5], clip[9], clip[13]);
    const row2 = exports_vec4.fromValues(clip[2], clip[6], clip[10], clip[14]);
    const row3 = exports_vec4.fromValues(clip[3], clip[7], clip[11], clip[15]);
    this._setPlane(FrustumSide.Right, row3, row0, -1);
    this._setPlane(FrustumSide.Left, row3, row0, 1);
    this._setPlane(FrustumSide.Bottom, row3, row1, 1);
    this._setPlane(FrustumSide.Top, row3, row1, -1);
    this._setPlane(FrustumSide.Back, row3, row2, -1);
    this._setPlane(FrustumSide.Front, row3, row2, 1);
  }
  sphereInFrustum(x, y, z, radius) {
    for (let ii = 0;ii < 6; ++ii) {
      const index = ii * 4;
      if (this._frustum[index + 0] * x + this._frustum[index + 1] * y + this._frustum[index + 2] * z + this._frustum[index + 3] <= -radius) {
        return false;
      }
    }
    return true;
  }
  pointInFrustum(x, y, z) {
    return this.sphereInFrustum(x, y, z, 0);
  }
  cubeInFrustumVec3(center, inSize) {
    return this.cubeInFrustum(center[0], center[1], center[2], inSize);
  }
  cubeInFrustum(inX, inY, inZ, inSize) {
    const hSize = inSize * 0.5;
    const minX = inX - hSize;
    const minY = inY - hSize;
    const minZ = inZ - hSize;
    const maxX = inX + hSize;
    const maxY = inY + hSize;
    const maxZ = inZ + hSize;
    for (let ii = 0;ii < 6; ++ii) {
      const index = ii * 4;
      const planA = this._frustum[index + 0];
      const planB = this._frustum[index + 1];
      const planC = this._frustum[index + 2];
      const planD = this._frustum[index + 3];
      if (planA * minX + planB * minY + planC * minZ + planD > 0 || planA * maxX + planB * minY + planC * minZ + planD > 0 || planA * minX + planB * maxY + planC * minZ + planD > 0 || planA * maxX + planB * maxY + planC * minZ + planD > 0 || planA * minX + planB * minY + planC * maxZ + planD > 0 || planA * maxX + planB * minY + planC * maxZ + planD > 0 || planA * minX + planB * maxY + planC * maxZ + planD > 0 || planA * maxX + planB * maxY + planC * maxZ + planD > 0) {
        continue;
      }
      return false;
    }
    return true;
  }
}
// src/local-framework/graphics/camera/sceneToScreenCoordinates.ts
var sceneToScreenCoordinates = (scenePos, modelView, projection, viewport) => {
  const composedMatrix = exports_mat4.create();
  exports_mat4.multiply(composedMatrix, projection, modelView);
  return sceneToScreenCoordsFromComposed(scenePos, composedMatrix, viewport);
};
var sceneToScreenCoordsFromComposed = (allScenePos, composedMatrix, viewport) => {
  const inputVec4 = exports_vec4.create();
  const multipliedVec4 = exports_vec4.create();
  const results = [];
  allScenePos.forEach((scenePos) => {
    inputVec4[0] = scenePos[0];
    inputVec4[1] = scenePos[1];
    inputVec4[2] = scenePos[2];
    inputVec4[3] = 1;
    exports_vec4.transformMat4(multipliedVec4, inputVec4, composedMatrix);
    if (multipliedVec4[3] === 0) {
      return null;
    }
    multipliedVec4[3] = 1 / multipliedVec4[3];
    multipliedVec4[0] *= multipliedVec4[3];
    multipliedVec4[1] *= multipliedVec4[3];
    multipliedVec4[2] *= multipliedVec4[3];
    multipliedVec4[0] = (multipliedVec4[0] * 0.5 + 0.5) * viewport[2] + viewport[0], multipliedVec4[1] = (multipliedVec4[1] * 0.5 + 0.5) * viewport[3] + viewport[1];
    results.push(exports_vec3.copy(exports_vec3.create(), multipliedVec4));
  });
  return results;
};
// src/local-framework/graphics/camera/screenToSceneCoordinates.ts
var screenToSceneCoordinates = (allScreenPos, modelView, projection, viewport) => {
  const composedMatrix = exports_mat4.multiply(exports_mat4.create(), projection, modelView);
  return screenToSceneCoordinatesFromComposed(allScreenPos, composedMatrix, viewport);
};
var screenToSceneCoordinatesFromComposed = (allScreenPos, composedMatrix, viewport) => {
  const invertedComposedMatrix = exports_mat4.invert(exports_mat4.create(), composedMatrix);
  return screenToSceneCoordinatesFromInvComposed(allScreenPos, invertedComposedMatrix, viewport);
};
var screenToSceneCoordinatesFromInvComposed = (allScreenPos, invertedComposedMatrix, viewport) => {
  const results = [];
  const multipliedVec4 = exports_vec4.create();
  allScreenPos.forEach((screenPos) => {
    multipliedVec4[0] = (screenPos[0] - viewport[0]) / viewport[2] * 2 - 1;
    multipliedVec4[1] = (screenPos[1] - viewport[1]) / viewport[3] * 2 - 1;
    multipliedVec4[2] = 2 * screenPos[2] - 1;
    multipliedVec4[3] = 1;
    exports_vec4.transformMat4(multipliedVec4, multipliedVec4, invertedComposedMatrix);
    if (multipliedVec4[3] === 0) {
      return;
    }
    multipliedVec4[3] = 1 / multipliedVec4[3];
    multipliedVec4[0] *= multipliedVec4[3];
    multipliedVec4[1] *= multipliedVec4[3];
    multipliedVec4[2] *= multipliedVec4[3];
    results.push(exports_vec3.copy(exports_vec3.create(), multipliedVec4));
  });
  return results;
};
// src/local-framework/graphics/renderers/index.ts
var exports_renderers = {};
__export(exports_renderers, {
  widgets: () => {
    {
      return exports_widgets;
    }
  },
  TextRenderer: () => {
    {
      return TextRenderer;
    }
  },
  StackRenderers: () => {
    {
      return StackRenderers;
    }
  },
  MultiBuffersRendering: () => {
    {
      return MultiBuffersRendering;
    }
  },
  GeometryRendererFlat: () => {
    {
      return GeometryRendererFlat;
    }
  },
  GeometryRenderer: () => {
    {
      return GeometryRenderer;
    }
  }
});

// src/local-framework/graphics/webgl2/index.ts
var exports_webgl2 = {};
__export(exports_webgl2, {
  getCubeMapType: () => {
    {
      return getCubeMapType;
    }
  },
  checkError: () => {
    {
      return checkError;
    }
  },
  WebGLContext: () => {
    {
      return WebGLContext;
    }
  },
  TextureRepeat: () => {
    {
      return TextureRepeat;
    }
  },
  TextureFilter: () => {
    {
      return TextureFilter;
    }
  },
  TextureArray: () => {
    {
      return TextureArray;
    }
  },
  Texture: () => {
    {
      return Texture;
    }
  },
  ShaderProgram: () => {
    {
      return ShaderProgram;
    }
  },
  RenderBuffer: () => {
    {
      return RenderBuffer;
    }
  },
  GeometryWrapper: () => {
    {
      return exports_GeometryWrapper;
    }
  },
  FrameBuffer: () => {
    {
      return FrameBuffer;
    }
  },
  FenceSync: () => {
    {
      return FenceSync;
    }
  },
  DataTextureVec4u8: () => {
    {
      return DataTextureVec4u8;
    }
  },
  DataTextureVec4f32: () => {
    {
      return DataTextureVec4f32;
    }
  },
  DataTexture: () => {
    {
      return DataTexture;
    }
  },
  CubeMapType: () => {
    {
      return CubeMapType;
    }
  },
  CubeMap: () => {
    {
      return CubeMap;
    }
  }
});

// src/local-framework/graphics/webgl2/WebGLContext.ts
class WebGLContext {
  static _gl = null;
  static _extensionLoseContext = null;
  static initialize(canvas) {
    const renderingContextAttribs = {
      alpha: false,
      antialias: false,
      depth: true,
      failIfMajorPerformanceCaveat: false,
      powerPreference: "high-performance",
      premultipliedAlpha: true,
      preserveDrawingBuffer: true,
      stencil: false
    };
    WebGLContext._gl = canvas.getContext("webgl2", renderingContextAttribs);
    if (!WebGLContext._gl)
      throw new Error("could not create webgl context");
    WebGLContext._extensionLoseContext = WebGLContext._gl.getExtension("WEBGL_lose_context");
    WebGLContext._gl.getExtension("EXT_color_buffer_float");
    WebGLContext._gl.getExtension("EXT_float_blend");
  }
  static getContext() {
    if (!WebGLContext._gl) {
      throw new Error("webgl context not initialized");
    }
    return WebGLContext._gl;
  }
  static getExtensionLoseContext() {
    return WebGLContext._extensionLoseContext;
  }
  static getExtensionLoseContextStrict() {
    if (!WebGLContext._extensionLoseContext) {
      throw new Error("lose context extension not available");
    }
    return WebGLContext._extensionLoseContext;
  }
}

// src/local-framework/graphics/webgl2/CubeMap.ts
var CubeMapType;
(function(CubeMapType2) {
  CubeMapType2[CubeMapType2["positiveX"] = 0] = "positiveX";
  CubeMapType2[CubeMapType2["negativeX"] = 1] = "negativeX";
  CubeMapType2[CubeMapType2["positiveY"] = 2] = "positiveY";
  CubeMapType2[CubeMapType2["negativeY"] = 3] = "negativeY";
  CubeMapType2[CubeMapType2["positiveZ"] = 4] = "positiveZ";
  CubeMapType2[CubeMapType2["negativeZ"] = 5] = "negativeZ";
})(CubeMapType || (CubeMapType = {}));
var getCubeMapType = (inType) => {
  const gl = WebGLContext.getContext();
  switch (inType) {
    case CubeMapType.positiveX:
      return gl.TEXTURE_CUBE_MAP_POSITIVE_X;
    case CubeMapType.negativeX:
      return gl.TEXTURE_CUBE_MAP_NEGATIVE_X;
    case CubeMapType.positiveY:
      return gl.TEXTURE_CUBE_MAP_POSITIVE_Y;
    case CubeMapType.negativeY:
      return gl.TEXTURE_CUBE_MAP_NEGATIVE_Y;
    case CubeMapType.positiveZ:
      return gl.TEXTURE_CUBE_MAP_POSITIVE_Z;
    case CubeMapType.negativeZ:
      return gl.TEXTURE_CUBE_MAP_NEGATIVE_Z;
  }
};

class CubeMap {
  _width = 0;
  _height = 0;
  _minBufferSize = 0;
  _texture = null;
  initialize(width, height) {
    if (width < 1)
      throw new Error(`cube map: width is < 1, input: ${width}`);
    if (height < 1)
      throw new Error(`cube map: height is < 1, input: ${height}`);
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
    this._width = width;
    this._height = height;
    this._minBufferSize = this._width * this._height * 4;
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteTexture(this._texture);
  }
  rawBind() {
    if (!this._texture)
      throw new Error("cube map: not initialized");
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_CUBE_MAP, this._texture);
  }
  bind(inCallback) {
    this.rawBind();
    inCallback(this);
    CubeMap.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);
  }
  loadFromMemory(inType, inPixels) {
    if (!this._texture)
      throw new Error("cube map: not initialized");
    if (inPixels.length < this._minBufferSize)
      throw new Error(`cube map: miss-matching pixels buffer size, input: ${inPixels.length}`);
    const gl = WebGLContext.getContext();
    const level = 0;
    const internalFormat = gl.RGBA;
    const border = 0;
    const srcFormat = gl.RGBA;
    const srcType = gl.UNSIGNED_BYTE;
    gl.texImage2D(getCubeMapType(inType), level, internalFormat, this._width, this._height, border, srcFormat, srcType, inPixels);
  }
  allocate() {
    const gl = WebGLContext.getContext();
    const level = 0;
    const internalFormat = gl.RGBA;
    const border = 0;
    const srcFormat = gl.RGBA;
    const srcType = gl.UNSIGNED_BYTE;
    const pixels = new Uint8Array(this._width * this._height * 4);
    [
      CubeMapType.negativeX,
      CubeMapType.negativeY,
      CubeMapType.negativeZ,
      CubeMapType.positiveX,
      CubeMapType.positiveY,
      CubeMapType.positiveZ
    ].forEach((type) => {
      gl.texImage2D(getCubeMapType(type), level, internalFormat, this._width, this._height, border, srcFormat, srcType, pixels);
    });
  }
  complete() {
    const gl = WebGLContext.getContext();
    gl.generateMipmap(gl.TEXTURE_CUBE_MAP);
    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
  }
  getWidth() {
    if (!this._texture)
      throw new Error("cube map: not initialized");
    return this._width;
  }
  getHeight() {
    if (!this._texture)
      throw new Error("cube map: not initialized");
    return this._height;
  }
  getRawObject() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._texture;
  }
}
// src/local-framework/graphics/webgl2/DataTexture.ts
class DataTexture {
  _texture = null;
  _buffer;
  initialize(data) {
    if (this._texture) {
      throw new Error("data texture already initialized");
    }
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
    if (!this._texture) {
      throw new Error("data texture failed to be created");
    }
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    this.allocate(data);
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteTexture(this._texture);
  }
  allocate(data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    const dataSize = Array.isArray(data) ? data.length : data;
    if (dataSize <= 0) {
      throw new Error("texture: width must be positive");
    }
    if (dataSize > 2048) {
      throw new Error(`data texture max size is 2048 (input was ${dataSize})`);
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    if (Array.isArray(data)) {
      this._buffer = new Float32Array(data);
    } else {
      this._buffer = new Float32Array(data);
    }
    const level = 0;
    const internalFormat = gl.R32F;
    const width = dataSize;
    const height = 1;
    const border = 0;
    const format = gl.RED;
    const type = gl.FLOAT;
    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, format, type, this._buffer);
  }
  update(start, data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    if (!this._buffer) {
      throw new Error("data texture update but not previously allocated");
    }
    if (start + data.length > this._buffer.length) {
      throw new Error(`data texture update but size is larger (start: ${start}, length: ${data.length}, max: ${this._buffer.length})`);
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    for (let ii = 0;ii < data.length; ++ii) {
      this._buffer[ii] = data[ii];
    }
    const level = 0;
    const width = data.length;
    const height = 1;
    const format = gl.RED;
    const type = gl.FLOAT;
    const xoffset = start;
    const yoffset = 0;
    const srcOffset = 0;
    gl.texSubImage2D(gl.TEXTURE_2D, level, xoffset, yoffset, width, height, format, type, this._buffer, srcOffset);
  }
  rawBind() {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    DataTexture.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, null);
  }
}
// src/local-framework/graphics/webgl2/DataTextureVec4f32.ts
class DataTextureVec4f32 {
  _texture = null;
  _buffer;
  initialize(data = 0) {
    if (this._texture) {
      throw new Error("data texture already initialized");
    }
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
    if (!this._texture) {
      throw new Error("data texture failed to be created");
    }
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    this.allocate(data);
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteTexture(this._texture);
  }
  allocate(data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    const dataSize = Array.isArray(data) ? data.length : Math.ceil(data / 4);
    if (dataSize <= 0) {
      throw new Error("texture: width must be positive");
    }
    if (dataSize > 2048) {
      throw new Error(`data texture max size is 2048 (input was ${dataSize})`);
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    if (Array.isArray(data)) {
      this._buffer = new Float32Array(data.flat());
    } else {
      this._buffer = new Float32Array(data);
    }
    const level = 0;
    const internalFormat = gl.RGBA32F;
    const width = dataSize;
    const height = 1;
    const border = 0;
    const format = gl.RGBA;
    const type = gl.FLOAT;
    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, format, type, this._buffer);
  }
  update(start, data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    if (!this._buffer) {
      throw new Error("data texture update but not previously allocated");
    }
    if (start + data.length > this._buffer.length) {
      throw new Error(`data texture update but size is larger (start: ${start}, length: ${data.length}, max: ${this._buffer.length})`);
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    for (let ii = 0;ii < data.length; ++ii) {
      this._buffer[ii * 4 + 0] = data[ii][0];
      this._buffer[ii * 4 + 1] = data[ii][1];
      this._buffer[ii * 4 + 2] = data[ii][2];
      this._buffer[ii * 4 + 3] = data[ii][3];
    }
    const level = 0;
    const width = data.length;
    const height = 1;
    const format = gl.RGBA;
    const type = gl.FLOAT;
    const xoffset = start;
    const yoffset = 0;
    const srcOffset = 0;
    gl.texSubImage2D(gl.TEXTURE_2D, level, xoffset, yoffset, width, height, format, type, this._buffer, srcOffset);
  }
  rawBind() {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    DataTextureVec4f32.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, null);
  }
}
// src/local-framework/graphics/webgl2/DataTextureVec4u8.ts
class DataTextureVec4u8 {
  _texture = null;
  _buffer;
  initialize(data = []) {
    if (this._texture) {
      throw new Error("data texture already initialized");
    }
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
    if (!this._texture) {
      throw new Error("data texture failed to be created");
    }
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    this.allocate(data);
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteTexture(this._texture);
  }
  allocate(data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    if (data.length <= 0) {
      throw new Error("texture: width must be positive");
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    this._buffer = new Uint8Array(data.flat());
    const level = 0;
    const internalFormat = gl.RGBA;
    const width = data.length;
    const height = 1;
    const border = 0;
    const format = gl.RGBA;
    const type = gl.UNSIGNED_BYTE;
    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, format, type, this._buffer);
  }
  update(start, data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    if (!this._buffer) {
      throw new Error("data texture update but not previously allocated");
    }
    if (start + data.length > this._buffer.length) {
      throw new Error(`data texture update but size is larger (start: ${start}, length: ${data.length}, max: ${this._buffer.length})`);
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    for (let ii = 0;ii < data.length; ++ii) {
      this._buffer[ii * 4 + 0] = data[ii][0];
      this._buffer[ii * 4 + 1] = data[ii][1];
      this._buffer[ii * 4 + 2] = data[ii][2];
      this._buffer[ii * 4 + 3] = data[ii][3];
    }
    const level = 0;
    const width = data.length;
    const height = 1;
    const format = gl.RGBA;
    const type = gl.UNSIGNED_BYTE;
    const xoffset = start;
    const yoffset = 0;
    const srcOffset = 0;
    gl.texSubImage2D(gl.TEXTURE_2D, level, xoffset, yoffset, width, height, format, type, this._buffer, srcOffset);
  }
  rawBind() {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    DataTextureVec4u8.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, null);
  }
}
// src/local-framework/graphics/webgl2/Error.ts
var checkError = () => {
  const gl = WebGLContext.getContext();
  const errorId = gl.getError();
  switch (errorId) {
    case gl.INVALID_ENUM:
      throw new Error("gl.INVALID_ENUM\nAn unacceptable value is specified for an enumerated argument. The offending command is ignored and has no other side effect than to set the error flag.");
    case gl.INVALID_VALUE:
      throw new Error("gl.INVALID_VALUE\nA numeric argument is out of range. The offending command is ignored and has no other side effect than to set the error flag.");
    case gl.INVALID_OPERATION:
      throw new Error("gl.INVALID_OPERATION\nThe specified operation is not allowed in the current state. The offending command is ignored and has no other side effect than to set the error flag.");
    case gl.INVALID_FRAMEBUFFER_OPERATION:
      throw new Error("gl.INVALID_FRAMEBUFFER_OPERATION\nThe framebuffer object is not complete. The offending command is ignored and has no other side effect than to set the error flag.");
    case gl.OUT_OF_MEMORY:
      throw new Error("gl.OUT_OF_MEMORY\nThere is not enough memory left to execute the command. The state of the GL is undefined, except for the state of the error flags, after this error is recorded.");
    case gl.CONTEXT_LOST_WEBGL:
      throw new Error("gl.CONTEXT_LOST_WEBGL\n If the WebGL context is lost, this error is returned on the first call to getError. Afterwards and until the context has been restored, it returns gl.NO_ERROR.");
  }
};
// src/local-framework/graphics/webgl2/Fence.ts
class FenceSync {
  _sync;
  constructor() {
  }
  dispose() {
    if (!this._sync) {
      return;
    }
    const gl = WebGLContext.getContext();
    gl.deleteSync(this._sync);
    this._sync = undefined;
  }
  isStarted() {
    return this._sync !== undefined;
  }
  start() {
    if (this._sync) {
      this.dispose();
    }
    const gl = WebGLContext.getContext();
    const tmpSync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0);
    if (tmpSync === null) {
      throw new Error("could not create a webgl fence");
    }
    this._sync = tmpSync;
    gl.flush();
    gl.finish();
  }
  isSignaled() {
    if (!this._sync) {
      throw new Error("fence not started");
    }
    const gl = WebGLContext.getContext();
    const signaled = gl.getSyncParameter(this._sync, gl.SYNC_STATUS);
    return signaled === gl.SIGNALED;
  }
  wait(timeoutNanoSec) {
    if (!this._sync) {
      throw new Error("fence not started");
    }
    const gl = WebGLContext.getContext();
    const bitflags = 0;
    const status = gl.clientWaitSync(this._sync, bitflags, timeoutNanoSec);
    switch (status) {
      case gl.TIMEOUT_EXPIRED:
        return "timed-out";
      case gl.WAIT_FAILED:
        console.warn("fence.wait -> should never get here");
        this.dispose();
        return "done";
      case gl.ALREADY_SIGNALED:
      case gl.CONDITION_SATISFIED:
      default:
        this.dispose();
        return "done";
    }
  }
}
// src/local-framework/graphics/webgl2/FrameBuffer.ts
class FrameBuffer {
  _frameBuffer;
  constructor() {
    const gl = WebGLContext.getContext();
    const tmpFbo = gl.createFramebuffer();
    if (tmpFbo === null)
      throw new Error("null frame buffer object");
    this._frameBuffer = tmpFbo;
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteFramebuffer(this._frameBuffer);
  }
  rawBind() {
    const gl = WebGLContext.getContext();
    gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);
  }
  bind(inCallback) {
    this.rawBind();
    inCallback(this);
    FrameBuffer.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindFramebuffer(gl.FRAMEBUFFER, null);
  }
  attachTexture(texture) {
    const gl = WebGLContext.getContext();
    const mipmapLevel = 0;
    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture.getRawObject(), mipmapLevel);
  }
  attachDepthTexture(texture) {
    const gl = WebGLContext.getContext();
    const mipmapLevel = 0;
    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, texture.getRawObject(), mipmapLevel);
  }
  attachRenderBuffer(texture) {
    const gl = WebGLContext.getContext();
    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, texture.getRawObject());
  }
  attachCubeMap(texture, type) {
    const gl = WebGLContext.getContext();
    const mipmapLevel = 0;
    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, getCubeMapType(type), texture.getRawObject(), mipmapLevel);
  }
  getPixels(x, y, width, height, outDst) {
    const gl = WebGLContext.getContext();
    gl.readPixels(x, y, width, height, gl.RGBA, gl.UNSIGNED_BYTE, outDst);
  }
}
// src/local-framework/graphics/webgl2/GeometryWrapper.ts
var exports_GeometryWrapper = {};
__export(exports_GeometryWrapper, {
  PrimitiveType: () => {
    {
      return PrimitiveType;
    }
  },
  GeometryBuilder: () => {
    {
      return GeometryBuilder;
    }
  },
  Geometry: () => {
    {
      return Geometry;
    }
  },
  BytesPerPixel: () => {
    {
      return BytesPerPixel;
    }
  },
  AttributeType: () => {
    {
      return AttributeType;
    }
  }
});
var BytesPerPixel = 4;
var AttributeType;
(function(AttributeType2) {
  AttributeType2[AttributeType2["float"] = 0] = "float";
  AttributeType2[AttributeType2["vec2f"] = 1] = "vec2f";
  AttributeType2[AttributeType2["vec3f"] = 2] = "vec3f";
  AttributeType2[AttributeType2["vec4f"] = 3] = "vec4f";
  AttributeType2[AttributeType2["mat3f"] = 4] = "mat3f";
  AttributeType2[AttributeType2["mat4f"] = 5] = "mat4f";
})(AttributeType || (AttributeType = {}));
var getAttrTypeSize = (inType) => {
  switch (inType) {
    case AttributeType.float:
      return 1;
    case AttributeType.vec2f:
      return 2;
    case AttributeType.vec3f:
      return 3;
    case AttributeType.vec4f:
      return 4;
    case AttributeType.mat3f:
      return 9;
    case AttributeType.mat4f:
      return 16;
  }
};
var PrimitiveType;
(function(PrimitiveType2) {
  PrimitiveType2[PrimitiveType2["lines"] = 0] = "lines";
  PrimitiveType2[PrimitiveType2["lineStrip"] = 1] = "lineStrip";
  PrimitiveType2[PrimitiveType2["lineLoop"] = 2] = "lineLoop";
  PrimitiveType2[PrimitiveType2["triangles"] = 3] = "triangles";
  PrimitiveType2[PrimitiveType2["triangleStrip"] = 4] = "triangleStrip";
  PrimitiveType2[PrimitiveType2["triangleFan"] = 5] = "triangleFan";
})(PrimitiveType || (PrimitiveType = {}));
var _ensureFloatBuffer = (vertices) => {
  if (vertices instanceof Float32Array) {
    return vertices;
  }
  return new Float32Array(vertices);
};
var _getBufferUsage = (inMode) => {
  const gl = WebGLContext.getContext();
  if (inMode === "dynamic") {
    return gl.DYNAMIC_DRAW;
  }
  if (inMode === "streaming") {
    return gl.STREAM_DRAW;
  }
  return gl.STATIC_DRAW;
};

class Geometry {
  _def;
  _vao;
  _vbos;
  _primitiveType;
  _primitiveStart = 0;
  _primitiveCount = 0;
  _instanceCount = 0;
  _isInstanced = false;
  constructor(shader, def) {
    const gl = WebGLContext.getContext();
    if (def.vbos.length === 0) {
      throw new Error("empty vbo definition");
    }
    for (const vbo of def.vbos) {
      if (vbo.attrs.length === 0) {
        throw new Error("empty vbo attribute definition");
      }
      for (const attr of vbo.attrs) {
        if (!shader.hasAttribute(attr.name)) {
          throw new Error(`attribute not found, name="${attr.name}"`);
        }
      }
    }
    this._def = def;
    switch (def.primitiveType) {
      case PrimitiveType.lines:
        this._primitiveType = gl.LINES;
        break;
      case PrimitiveType.lineStrip:
        this._primitiveType = gl.LINE_STRIP;
        break;
      case PrimitiveType.lineLoop:
        this._primitiveType = gl.LINE_LOOP;
        break;
      case PrimitiveType.triangles:
        this._primitiveType = gl.TRIANGLES;
        break;
      case PrimitiveType.triangleStrip:
        this._primitiveType = gl.TRIANGLE_STRIP;
        break;
      case PrimitiveType.triangleFan:
        this._primitiveType = gl.TRIANGLE_FAN;
        break;
      default:
        throw new Error("primitive type not found");
    }
    const newVao = gl.createVertexArray();
    if (!newVao) {
      throw new Error("fail o create a vao unit");
    }
    this._vao = newVao;
    gl.bindVertexArray(this._vao);
    this._vbos = [];
    for (const vboDef of this._def.vbos) {
      const newVbo = gl.createBuffer();
      if (!newVbo) {
        throw new Error("fail o create a vbo unit");
      }
      this._vbos.push({
        object: newVbo,
        maxSize: 0,
        mode: vboDef.mode || "static"
      });
      gl.bindBuffer(gl.ARRAY_BUFFER, newVbo);
      let stride = vboDef.stride || 0;
      if (!stride) {
        for (const attr of vboDef.attrs) {
          switch (attr.type) {
            case AttributeType.float:
              stride += 1;
              break;
            case AttributeType.vec2f:
              stride += 2;
              break;
            case AttributeType.vec3f:
              stride += 3;
              break;
            case AttributeType.vec4f:
              stride += 4;
              break;
            case AttributeType.mat3f:
              stride += 9;
              break;
            case AttributeType.mat4f:
              stride += 16;
              break;
          }
        }
        stride *= BytesPerPixel;
      }
      for (const attr of vboDef.attrs) {
        let rowSize = 1;
        let totalRows = 1;
        switch (attr.type) {
          case AttributeType.float:
            rowSize = 1;
            totalRows = 1;
            break;
          case AttributeType.vec2f:
            rowSize = 2;
            totalRows = 1;
            break;
          case AttributeType.vec3f:
            rowSize = 3;
            totalRows = 1;
            break;
          case AttributeType.vec4f:
            rowSize = 4;
            totalRows = 1;
            break;
          case AttributeType.mat3f:
            rowSize = 3;
            totalRows = 3;
            break;
          case AttributeType.mat4f:
            rowSize = 4;
            totalRows = 4;
            break;
        }
        const attrLocation = shader.getAttribute(attr.name);
        for (let ii = 0;ii < totalRows; ++ii) {
          const attrId = attrLocation + ii;
          const rowIndex = (attr.index + ii * rowSize) * BytesPerPixel;
          gl.enableVertexAttribArray(attrId);
          gl.vertexAttribPointer(attrId, rowSize, gl.FLOAT, false, stride, rowIndex);
          if (vboDef.instanced === true) {
            gl.vertexAttribDivisor(attrId, 1);
            this._isInstanced = true;
          }
        }
      }
    }
    gl.bindVertexArray(null);
  }
  dispose() {
    const gl = WebGLContext.getContext();
    for (const vbo of this._vbos) {
      gl.deleteBuffer(vbo.object);
    }
    this._vbos.length = 0;
    gl.deleteVertexArray(this._vao);
  }
  setBufferSize(inIndex, inSize) {
    if (inIndex < 0 || inIndex >= this._vbos.length) {
      throw new Error(`no vbo available to that index (input: ${inIndex})`);
    }
    if (inSize <= 0) {
      throw new Error(`vbo must be > 0 (input: ${inSize})`);
    }
    const currVbo = this._vbos[inIndex];
    if (inSize < currVbo.maxSize) {
      return;
    }
    currVbo.maxSize = inSize;
    const gl = WebGLContext.getContext();
    gl.bindBuffer(gl.ARRAY_BUFFER, currVbo.object);
    gl.bufferData(gl.ARRAY_BUFFER, inSize, _getBufferUsage(currVbo.mode));
    gl.bindBuffer(gl.ARRAY_BUFFER, null);
  }
  setFloatBufferSize(index, inSize) {
    this.setBufferSize(index, inSize * 4);
  }
  allocateBuffer(inIndex, inVertices, inSize) {
    if (inIndex < 0 || inIndex >= this._vbos.length) {
      throw new Error(`no vbo available to that index (input: ${inIndex}, total vbos: ${this._vbos.length})`);
    }
    if (inSize <= 0) {
      throw new Error(`size must be > 0 (input: ${inSize})`);
    }
    const currVbo = this._vbos[inIndex];
    if (inSize <= 0) {
      throw new Error(`vbo must be > 0 (input: ${inSize})`);
    }
    currVbo.maxSize = inSize;
    const buffer = _ensureFloatBuffer(inVertices);
    const gl = WebGLContext.getContext();
    gl.bindBuffer(gl.ARRAY_BUFFER, currVbo.object);
    gl.bufferData(gl.ARRAY_BUFFER, buffer, _getBufferUsage(currVbo.mode), 0, inSize);
    gl.bindBuffer(gl.ARRAY_BUFFER, null);
  }
  updateBuffer(inIndex, inVertices, inSize, inStartOffset) {
    if (inIndex < 0 || inIndex >= this._vbos.length) {
      throw new Error(`no vbo available to that index (input: ${inIndex}, total vbos: ${this._vbos.length})`);
    }
    if (inSize <= 0) {
      throw new Error(`size must be > 0 (input: ${inSize})`);
    }
    const currVbo = this._vbos[inIndex];
    if (inStartOffset !== undefined) {
      if (inStartOffset < 0) {
        throw new Error(`offset must be >= 0 (input: ${inStartOffset})`);
      }
      const endIndex = inStartOffset + inSize;
      if (endIndex > currVbo.maxSize) {
        throw new Error(`offset + size > to vbo max size (input: ${endIndex}, max size: ${currVbo.maxSize})`);
      }
    } else if (inSize > currVbo.maxSize) {
      throw new Error(`size must be < to vbo max size (input: ${inSize}, max size: ${currVbo.maxSize})`);
    }
    const buffer = _ensureFloatBuffer(inVertices);
    const gl = WebGLContext.getContext();
    gl.bindBuffer(gl.ARRAY_BUFFER, currVbo.object);
    gl.bufferSubData(gl.ARRAY_BUFFER, inStartOffset ?? 0, buffer.slice(0, inSize), 0, inSize);
    gl.bindBuffer(gl.ARRAY_BUFFER, null);
  }
  render() {
    if (this._primitiveCount == 0) {
      return;
    }
    if (this._isInstanced && this._instanceCount == 0) {
      return;
    }
    const gl = WebGLContext.getContext();
    gl.bindVertexArray(this._vao);
    if (this._isInstanced === true) {
      gl.drawArraysInstanced(this._primitiveType, this._primitiveStart, this._primitiveCount, this._instanceCount);
    } else {
      gl.drawArrays(this._primitiveType, this._primitiveStart, this._primitiveCount);
    }
    gl.bindVertexArray(null);
  }
  setPrimitiveStart(start) {
    this._primitiveStart = start;
  }
  setPrimitiveCount(count) {
    this._primitiveCount = count;
  }
  setInstancedCount(count) {
    this._instanceCount = count;
  }
}

class GeometryBuilder {
  _def = {
    vbos: [],
    primitiveType: PrimitiveType.lines
  };
  reset() {
    this._def = {
      vbos: [],
      primitiveType: PrimitiveType.lines
    };
    return this;
  }
  getDef() {
    return this._def;
  }
  setPrimitiveType(inPrimitive) {
    this._def.primitiveType = PrimitiveType[inPrimitive];
    return this;
  }
  addVbo() {
    this._def.vbos.push({
      attrs: [],
      instanced: false
    });
    return this;
  }
  setVboAsInstanced() {
    this._getLastVbo().instanced = true;
    return this;
  }
  setVboAsDynamic() {
    this._getLastVbo().mode = "dynamic";
    return this;
  }
  setVboAsStreaming() {
    this._getLastVbo().mode = "streaming";
    return this;
  }
  setStride(inStride) {
    this._getLastVbo().stride = inStride;
    return this;
  }
  addVboAttribute(inName, inType) {
    const currVbo = this._getLastVbo();
    const lastAttr = currVbo.attrs.length > 0 ? currVbo.attrs[currVbo.attrs.length - 1] : null;
    currVbo.attrs.push({
      name: inName,
      type: AttributeType[inType],
      index: lastAttr ? lastAttr.index + getAttrTypeSize(lastAttr.type) : 0
    });
    return this;
  }
  _getLastVbo() {
    if (this._def.vbos.length === 0) {
      throw new Error("no VBO setup");
    }
    return this._def.vbos[this._def.vbos.length - 1];
  }
}
// src/local-framework/graphics/webgl2/RenderBuffer.ts
class RenderBuffer {
  _buffer;
  constructor() {
    const gl = WebGLContext.getContext();
    const tmpBuf = gl.createRenderbuffer();
    if (tmpBuf === null) {
      throw new Error("null render buffer object");
    }
    this._buffer = tmpBuf;
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteRenderbuffer(this._buffer);
  }
  rawBind() {
    const gl = WebGLContext.getContext();
    gl.bindRenderbuffer(gl.RENDERBUFFER, this._buffer);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    RenderBuffer.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindRenderbuffer(gl.RENDERBUFFER, null);
  }
  setSize(type, width, height) {
    const gl = WebGLContext.getContext();
    let internalFormat = gl.DEPTH_COMPONENT32F;
    switch (type) {
      case "depth16": {
        internalFormat = gl.DEPTH_COMPONENT16;
        break;
      }
      case "depth24": {
        internalFormat = gl.DEPTH_COMPONENT16;
        break;
      }
    }
    gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, width, height);
  }
  getRawObject() {
    return this._buffer;
  }
}
// src/local-framework/graphics/webgl2/ShaderProgram.ts
class ShaderProgram {
  static _isBound = null;
  _name;
  _program;
  _attributes = new Map;
  _uniforms = new Map;
  constructor(inName, opt) {
    this._name = inName;
    const gl = WebGLContext.getContext();
    const vertexShader = this._getShader(opt.vertexSrc, gl.VERTEX_SHADER);
    const fragmentShader = this._getShader(opt.fragmentSrc, gl.FRAGMENT_SHADER);
    const program = gl.createProgram();
    if (!program) {
      throw new Error("could not create a shader program");
    }
    gl.attachShader(program, vertexShader);
    gl.attachShader(program, fragmentShader);
    gl.linkProgram(program);
    gl.deleteShader(vertexShader);
    gl.deleteShader(fragmentShader);
    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
      const lastError = gl.getProgramInfoLog(program);
      throw new Error("Failed to initialized shaders, Error linking:" + lastError);
    }
    this._program = program;
    this.bind(() => {
      this._getAttributes(opt.attributes);
      this._getUniforms(opt.uniforms);
    });
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteProgram(this._program);
  }
  bind(inCallback) {
    if (ShaderProgram._isBound !== null) {
      throw new Error(`Double shader binding (bound: ${ShaderProgram._isBound._name}, binding: ${this._name})`);
    }
    ShaderProgram._isBound = this;
    const gl = WebGLContext.getContext();
    gl.useProgram(this._program);
    inCallback(this);
    ShaderProgram.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.useProgram(null);
    ShaderProgram._isBound = null;
  }
  isBound() {
    return ShaderProgram._isBound === this;
  }
  hasAttribute(name) {
    return this._attributes.has(name);
  }
  getAttribute(name) {
    const attribute = this._attributes.get(name);
    if (attribute === undefined) {
      throw new Error(`attribute not found: ${name}`);
    }
    return attribute;
  }
  getUniform(name) {
    const uniform = this._uniforms.get(name);
    if (uniform === undefined) {
      throw new Error(`uniform not found: ${name}`);
    }
    return uniform;
  }
  setTextureUniform(inName, inTexture, inIndex) {
    const gl = WebGLContext.getContext();
    gl.activeTexture(gl.TEXTURE0 + inIndex);
    gl.uniform1i(this.getUniform(inName), inIndex);
    inTexture.rawBind();
  }
  setInteger1Uniform(inName, inValue) {
    const gl = WebGLContext.getContext();
    gl.uniform1i(this.getUniform(inName), inValue);
  }
  setInteger2Uniform(inName, inValueX, inValueY) {
    const gl = WebGLContext.getContext();
    gl.uniform2i(this.getUniform(inName), inValueX, inValueY);
  }
  setInteger3Uniform(inName, inValueX, inValueY, inValueZ) {
    const gl = WebGLContext.getContext();
    gl.uniform3i(this.getUniform(inName), inValueX, inValueY, inValueZ);
  }
  setFloat1Uniform(inName, inValue) {
    const gl = WebGLContext.getContext();
    gl.uniform1f(this.getUniform(inName), inValue);
  }
  setFloat2Uniform(inName, inValueX, inValueY) {
    const gl = WebGLContext.getContext();
    gl.uniform2f(this.getUniform(inName), inValueX, inValueY);
  }
  setFloat3Uniform(inName, inValueX, inValueY, inValueZ) {
    const gl = WebGLContext.getContext();
    gl.uniform3f(this.getUniform(inName), inValueX, inValueY, inValueZ);
  }
  setMatrix3Uniform(inName, inMatrix) {
    const gl = WebGLContext.getContext();
    gl.uniformMatrix3fv(this.getUniform(inName), false, inMatrix);
  }
  setMatrix4Uniform(inName, inMatrix) {
    const gl = WebGLContext.getContext();
    gl.uniformMatrix4fv(this.getUniform(inName), false, inMatrix);
  }
  _getAttributes(attributes) {
    const gl = WebGLContext.getContext();
    for (let ii = 0;ii < attributes.length; ++ii) {
      const value = gl.getAttribLocation(this._program, attributes[ii]);
      if (value < 0) {
        throw new Error(`attribute not found => ${attributes[ii]}`);
      }
      this._attributes.set(attributes[ii], value);
    }
  }
  _getUniforms(uniforms) {
    const gl = WebGLContext.getContext();
    for (let ii = 0;ii < uniforms.length; ++ii) {
      const value = gl.getUniformLocation(this._program, uniforms[ii]);
      if (value === null) {
        throw new Error(`uniform not found => ${uniforms[ii]}`);
      }
      this._uniforms.set(uniforms[ii], value);
    }
  }
  _getShader(src, type) {
    const gl = WebGLContext.getContext();
    const shader = gl.createShader(type);
    if (!shader) {
      throw new Error("could not create a shader");
    }
    gl.shaderSource(shader, src);
    gl.compileShader(shader);
    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
      let error_str = gl.getShaderInfoLog(shader);
      if (!error_str)
        error_str = "failed to compile a shader";
      throw new Error(error_str);
    }
    return shader;
  }
}
// src/local-framework/graphics/webgl2/Texture.ts
var TextureFilter;
(function(TextureFilter2) {
  TextureFilter2[TextureFilter2["pixelated"] = 0] = "pixelated";
  TextureFilter2[TextureFilter2["linear"] = 1] = "linear";
  TextureFilter2[TextureFilter2["mipmap"] = 2] = "mipmap";
})(TextureFilter || (TextureFilter = {}));
var TextureRepeat;
(function(TextureRepeat2) {
  TextureRepeat2[TextureRepeat2["noRepeat"] = 0] = "noRepeat";
  TextureRepeat2[TextureRepeat2["repeat"] = 1] = "repeat";
})(TextureRepeat || (TextureRepeat = {}));

class Texture {
  _width = 0;
  _height = 0;
  _texture = null;
  initialize() {
    if (this._texture)
      throw new Error("texture: already initialized");
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
  }
  rawBind() {
    if (!this._texture)
      throw new Error("texture: not initialized");
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    Texture.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, null);
  }
  loadFromImage(inImage, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inImage.width, inImage.height, inImage, mode, repeat);
  }
  loadFromMemory(inWidth, inHeight, inPixels, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, inPixels, mode, repeat);
  }
  allocate(inWidth, inHeight, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, null, mode, repeat);
  }
  allocateDepth(inWidth, inHeight, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, null, mode, repeat, true);
  }
  resize(inWidth, inHeight, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, null, mode, repeat);
  }
  _allocate(inWidth, inHeight, inPixels = null, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat, isDepthTexture = false) {
    if (!this._texture) {
      throw new Error("texture: not initialized");
    }
    if (inWidth <= 0) {
      throw new Error("texture: width must be positive");
    }
    if (inHeight <= 0) {
      throw new Error("texture: height must be positive");
    }
    const gl = WebGLContext.getContext();
    this._width = inWidth;
    this._height = inHeight;
    const level = 0;
    const internalFormat = isDepthTexture ? gl.DEPTH_COMPONENT32F : gl.RGBA;
    const border = 0;
    const srcFormat = isDepthTexture ? gl.DEPTH_COMPONENT : gl.RGBA;
    const srcType = isDepthTexture ? gl.FLOAT : gl.UNSIGNED_BYTE;
    if (inPixels instanceof HTMLImageElement) {
      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, srcFormat, srcType, inPixels);
    } else {
      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, inWidth, inHeight, border, srcFormat, srcType, inPixels);
    }
    if (repeat === TextureRepeat.noRepeat) {
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    } else if (repeat === TextureRepeat.repeat) {
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
    }
    if (mode === TextureFilter.pixelated) {
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    } else if (mode === TextureFilter.linear) {
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
    } else if (mode === TextureFilter.mipmap) {
      gl.generateMipmap(gl.TEXTURE_2D);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
    }
  }
  getWidth() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._width;
  }
  getHeight() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._height;
  }
  getRawObject() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._texture;
  }
}
// src/local-framework/graphics/webgl2/TextureArray.ts
class TextureArray {
  _width = 0;
  _height = 0;
  _texture = null;
  initialize() {
    if (this._texture)
      throw new Error("texture: already initialized");
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteTexture(this._texture);
  }
  rawBind() {
    if (!this._texture)
      throw new Error("texture: not initialized");
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D_ARRAY, this._texture);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    TextureArray.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D_ARRAY, null);
  }
  loadFromImage(inWidth, inHeight, inTotalLayers, inImage, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, inTotalLayers, inImage, mode, repeat);
  }
  loadFromMemory(inWidth, inHeight, inTotalLayers, inPixels, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, inTotalLayers, inPixels, mode, repeat);
  }
  _allocate(inWidth, inHeight, inTotalLayers, inPixels = null, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    if (!this._texture) {
      throw new Error("texture: not initialized");
    }
    if (inWidth <= 0) {
      throw new Error("texture: width must be positive");
    }
    if (inHeight <= 0) {
      throw new Error("texture: height must be positive");
    }
    const gl = WebGLContext.getContext();
    this._width = inWidth;
    this._height = inHeight;
    const level = 0;
    const internalFormat = gl.RGBA;
    const border = 0;
    const srcFormat = gl.RGBA;
    const srcType = gl.UNSIGNED_BYTE;
    if (inPixels instanceof HTMLImageElement) {
      gl.texImage3D(gl.TEXTURE_2D_ARRAY, level, internalFormat, inWidth, inHeight, inTotalLayers, border, srcFormat, srcType, inPixels);
    } else {
      gl.texImage3D(gl.TEXTURE_2D_ARRAY, level, internalFormat, inWidth, inHeight, inTotalLayers, border, srcFormat, srcType, inPixels);
    }
    if (repeat === TextureRepeat.noRepeat) {
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    } else if (repeat === TextureRepeat.repeat) {
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_S, gl.REPEAT);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_T, gl.REPEAT);
    }
    if (mode === TextureFilter.pixelated) {
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    } else if (mode === TextureFilter.linear) {
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
    } else if (mode === TextureFilter.mipmap) {
      gl.generateMipmap(gl.TEXTURE_2D_ARRAY);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
    }
  }
  getWidth() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._width;
  }
  getHeight() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._height;
  }
  getRawObject() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._texture;
  }
}
// src/local-framework/graphics/renderers/geometry-renderer/shaders/geometry-renderer.glsl.vert
var geometry_renderer_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec3 a_vertex_position;
in vec3 a_vertex_normal;

in vec3 a_offset_center;
in vec4 a_offset_orientation;
in vec3 a_offset_color;
in vec3 a_offset_scale;

flat out vec4 v_color;
out vec3 v_worldSpacePosition;
out vec3 v_worldSpaceNormal;


vec3 apply_quat_to_vec3(vec3 position, vec4 q)
{
  vec3 v = position.xyz;
  return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
}

void main(void)
{
	vec3 worldSpacePosition = a_offset_center + apply_quat_to_vec3(a_vertex_position * a_offset_scale, a_offset_orientation);
	vec3 worldSpaceNormal = apply_quat_to_vec3(a_vertex_normal, a_offset_orientation);

  gl_Position = u_composedMatrix * vec4(worldSpacePosition, 1.0);

  v_color = vec4(a_offset_color, 1.0);
  v_worldSpacePosition = worldSpacePosition;
  v_worldSpaceNormal = worldSpaceNormal;
}
`.trim();

// src/local-framework/graphics/renderers/geometry-renderer/shaders/geometry-renderer.glsl.frag
var geometry_renderer_glsl_default2 = `
#version 300 es

precision lowp float;

uniform vec3 u_lightPos;

flat in vec4 v_color;
in vec3 v_worldSpacePosition;
in vec3 v_worldSpaceNormal;

out vec4 o_color;

//
//
//

const float k_ambiantCoef = 0.1;

const vec3 k_specColor = vec3(1.0, 1.0, 1.0);

vec3 _getLightColor(vec4 currentColor)
{
  vec3 normal = normalize(v_worldSpaceNormal);
  vec3 lightDir = normalize(u_lightPos - v_worldSpacePosition);

  float diffuseCoef = max(dot(lightDir, v_worldSpaceNormal.xyz), 0.0);
  float specularCoef = 0.0;

  // if (diffuseCoef > 0.0 && v_skipSpecular < 0.5)
  // {
  //   // specular

  //   vec3 reflectDir = reflect(-lightDir, normal);
  //   vec3 viewDir = normalize(u_lightPos - v_worldSpacePosition);

  //   float specAngle = max(dot(reflectDir, viewDir), 0.0);
  //   specularCoef = pow(specAngle, 32.0);
  // }

  vec3 diffuseColor = currentColor.rgb * (k_ambiantCoef + diffuseCoef);
  vec3 specularColor = k_specColor * specularCoef * currentColor.a;

  return diffuseColor + specularColor;
}

//
//
//

void main(void)
{
  o_color = vec4(_getLightColor(v_color), 1.0);
}
`.trim();

// src/local-framework/graphics/renderers/geometry-renderer/GeometryRenderer.ts
var k_bufferSize = 14336;

class GeometryRenderer {
  _shader;
  _geometry;
  _buffer = new Float32Array(k_bufferSize);
  _currentSize = 0;
  constructor() {
    this._shader = new ShaderProgram("GeometryRenderer", {
      vertexSrc: geometry_renderer_glsl_default,
      fragmentSrc: geometry_renderer_glsl_default2,
      attributes: [
        "a_vertex_position",
        "a_vertex_normal",
        "a_offset_center",
        "a_offset_orientation",
        "a_offset_color",
        "a_offset_scale"
      ],
      uniforms: ["u_composedMatrix", "u_lightPos"]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangles").addVbo().addVboAttribute("a_vertex_position", "vec3f").addVboAttribute("a_vertex_normal", "vec3f").addVbo().setVboAsStreaming().setVboAsInstanced().addVboAttribute("a_offset_center", "vec3f").addVboAttribute("a_offset_orientation", "vec4f").addVboAttribute("a_offset_color", "vec3f").addVboAttribute("a_offset_scale", "vec3f");
    this._geometry = new exports_GeometryWrapper.Geometry(this._shader, geoBuilder.getDef());
    this._geometry.setFloatBufferSize(1, k_bufferSize);
  }
  setGeometryVertices(vertices) {
    const buf = new Float32Array([
      ...vertices.map((val) => [...val.pos, ...val.normal]).flat()
    ]);
    this._geometry.allocateBuffer(0, buf, buf.length);
    this._geometry.setPrimitiveCount(buf.length / 6);
  }
  push(inPointA, inQuat, inColor, inScale) {
    if (this._currentSize + 13 >= this._buffer.length) {
      if (this._shader.isBound()) {
        this._flush();
      } else {
        return;
      }
    }
    this._buffer[this._currentSize++] = inPointA[0];
    this._buffer[this._currentSize++] = inPointA[1];
    this._buffer[this._currentSize++] = inPointA[2];
    this._buffer[this._currentSize++] = inQuat[0];
    this._buffer[this._currentSize++] = inQuat[1];
    this._buffer[this._currentSize++] = inQuat[2];
    this._buffer[this._currentSize++] = inQuat[3];
    this._buffer[this._currentSize++] = inColor[0];
    this._buffer[this._currentSize++] = inColor[1];
    this._buffer[this._currentSize++] = inColor[2];
    this._buffer[this._currentSize++] = inScale[0];
    this._buffer[this._currentSize++] = inScale[1];
    this._buffer[this._currentSize++] = inScale[2];
  }
  flush(inCamera) {
    if (!this.canRender()) {
      return;
    }
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inCamera.getComposedMatrix());
      const eyePos = inCamera.getEye();
      bound.setFloat3Uniform("u_lightPos", eyePos[0], eyePos[1], eyePos[2]);
      this._flush();
    });
  }
  safeRender(inCamera, inCallback) {
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inCamera.getComposedMatrix());
      const eyePos = inCamera.getEye();
      bound.setFloat3Uniform("u_lightPos", eyePos[0], eyePos[1], eyePos[2]);
      inCallback();
      this._flush();
    });
  }
  _flush() {
    this._geometry.updateBuffer(1, this._buffer, this._currentSize, 0);
    this._geometry.setInstancedCount(this._currentSize / 13);
    this._geometry.render();
    this.clear();
  }
  canRender() {
    return this._currentSize > 0;
  }
  clear() {
    this._currentSize = 0;
  }
}
// src/local-framework/graphics/renderers/geometry-renderer-flat/shaders/geometry-renderer-flat.glsl.vert
var geometry_renderer_flat_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec3 a_vertex_position;

in vec3 a_offset_center;
in vec4 a_offset_orientation;
in vec3 a_offset_color;
in vec3 a_offset_scale;

flat out vec4 v_color;

vec3 apply_quat_to_vec3(vec3 position, vec4 q)
{
  vec3 v = position.xyz;
  return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
}

void main(void)
{
	vec3 worldSpacePosition = a_offset_center + apply_quat_to_vec3(a_vertex_position * a_offset_scale, a_offset_orientation);

  gl_Position = u_composedMatrix * vec4(worldSpacePosition, 1.0);

  v_color = vec4(a_offset_color, 1.0);
}
`.trim();

// src/local-framework/graphics/renderers/geometry-renderer-flat/shaders/geometry-renderer-flat.glsl.frag
var geometry_renderer_flat_glsl_default2 = `
#version 300 es

precision lowp float;

flat in vec4 v_color;

out vec4 o_color;

void main(void)
{
  o_color = vec4(v_color.rbg, 1.0);
}
`.trim();

// src/local-framework/graphics/renderers/geometry-renderer-flat/GeometryRendererFlat.ts
var k_bufferSize2 = 14336;

class GeometryRendererFlat {
  _shader;
  _geometry;
  _buffer = new Float32Array(k_bufferSize2);
  _currentSize = 0;
  constructor() {
    this._shader = new ShaderProgram("GeometryRendererFlat", {
      vertexSrc: geometry_renderer_flat_glsl_default,
      fragmentSrc: geometry_renderer_flat_glsl_default2,
      attributes: [
        "a_vertex_position",
        "a_offset_center",
        "a_offset_orientation",
        "a_offset_color",
        "a_offset_scale"
      ],
      uniforms: [
        "u_composedMatrix"
      ]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangles").addVbo().addVboAttribute("a_vertex_position", "vec3f").addVbo().setVboAsStreaming().setVboAsInstanced().addVboAttribute("a_offset_center", "vec3f").addVboAttribute("a_offset_orientation", "vec4f").addVboAttribute("a_offset_color", "vec3f").addVboAttribute("a_offset_scale", "vec3f");
    this._geometry = new exports_GeometryWrapper.Geometry(this._shader, geoBuilder.getDef());
    this._geometry.setFloatBufferSize(1, k_bufferSize2);
  }
  setGeometryVertices(vertices) {
    const buf = new Float32Array([
      ...vertices.map((val) => [...val.pos]).flat()
    ]);
    this._geometry.allocateBuffer(0, buf, buf.length);
    this._geometry.setPrimitiveCount(buf.length / 3);
  }
  push(inPointA, inQuat, inColor, inScale) {
    if (this._currentSize + 13 >= this._buffer.length) {
      if (this._shader.isBound()) {
        this._flush();
      } else {
        return;
      }
    }
    this._buffer[this._currentSize++] = inPointA[0];
    this._buffer[this._currentSize++] = inPointA[1];
    this._buffer[this._currentSize++] = inPointA[2];
    this._buffer[this._currentSize++] = inQuat[0];
    this._buffer[this._currentSize++] = inQuat[1];
    this._buffer[this._currentSize++] = inQuat[2];
    this._buffer[this._currentSize++] = inQuat[3];
    this._buffer[this._currentSize++] = inColor[0];
    this._buffer[this._currentSize++] = inColor[1];
    this._buffer[this._currentSize++] = inColor[2];
    this._buffer[this._currentSize++] = inScale[0];
    this._buffer[this._currentSize++] = inScale[1];
    this._buffer[this._currentSize++] = inScale[2];
  }
  flush(inCamera) {
    if (!this.canRender()) {
      return;
    }
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inCamera.getComposedMatrix());
      this._flush();
    });
  }
  safeRender(inCamera, inCallback) {
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inCamera.getComposedMatrix());
      inCallback();
      this._flush();
    });
  }
  _flush() {
    this._geometry.updateBuffer(1, this._buffer, this._currentSize, 0);
    this._geometry.setInstancedCount(this._currentSize / 13);
    this._geometry.render();
    this.clear();
  }
  canRender() {
    return this._currentSize > 0;
  }
  clear() {
    this._currentSize = 0;
  }
}
// src/local-framework/graphics/renderers/multi-buffers-rendering/internals/SceneCapturer.ts
class SceneCapturer {
  _width = 0;
  _height = 0;
  _frameBuffer = new FrameBuffer;
  _renderBuffer = new RenderBuffer;
  _colorTextures = [];
  _currentIndex = 0;
  constructor(width, height) {
    this._colorTextures.push(new Texture);
    this._colorTextures.push(new Texture);
    this._colorTextures.forEach((texture) => texture.initialize());
    this.resize(width, height);
  }
  resize(width, height) {
    this._width = width;
    this._height = height;
    this._renderBuffer.bind((boundBuffer) => {
      boundBuffer.setSize("depth32f", this._width, this._height);
    });
    this._colorTextures.forEach((texture) => {
      texture.bind((boundTexture) => {
        boundTexture.allocate(this._width, this._height);
      });
    });
    this._frameBuffer.bind((boundFrameBuffer) => {
      this._renderBuffer.bind((boundBuffer) => {
        boundFrameBuffer.attachRenderBuffer(boundBuffer);
      });
    });
  }
  captureScene(renderCallback) {
    this._frameBuffer.bind((boundFrameBuffer) => {
      this._colorTextures[this._currentIndex].bind((boundTexture) => {
        boundFrameBuffer.attachTexture(boundTexture);
      });
      const gl = WebGLContext.getContext();
      gl.viewport(0, 0, this._width, this._height);
      gl.clearColor(0, 0, 0, 0);
      renderCallback();
    });
    this._currentIndex = (this._currentIndex + 1) % this._colorTextures.length;
  }
  get colorTexture() {
    return this._colorTextures[this._currentIndex];
  }
}

// src/local-framework/graphics/renderers/multi-buffers-rendering/internals/shaders/hud-texture-renderer.glsl.vert
var hud_texture_renderer_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec3  a_vertex_position;
in vec2  a_vertex_texCoord;

out vec2 v_texCoord;

void main(void)
{
  v_texCoord = a_vertex_texCoord;
  gl_Position = u_composedMatrix * vec4(a_vertex_position, 1.0);
}

`.trim();

// src/local-framework/graphics/renderers/multi-buffers-rendering/internals/shaders/hud-texture-renderer.glsl.frag
var hud_texture_renderer_glsl_default2 = `
#version 300 es

precision highp float;

uniform sampler2D u_texture;

in vec2 v_texCoord;

out vec4 o_color;

void main(void)
{
  o_color = texture(u_texture, v_texCoord);
}
`.trim();

// src/local-framework/graphics/renderers/multi-buffers-rendering/internals/RenderHudTexture.ts
class RenderHudTexture {
  _width = 0;
  _height = 0;
  _shader;
  _geometry;
  constructor(width, height) {
    this._shader = new ShaderProgram("RenderHudTexture", {
      vertexSrc: hud_texture_renderer_glsl_default,
      fragmentSrc: hud_texture_renderer_glsl_default2,
      attributes: ["a_vertex_position", "a_vertex_texCoord"],
      uniforms: ["u_composedMatrix", "u_texture"]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangleStrip").addVbo().addVboAttribute("a_vertex_position", "vec3f").addVboAttribute("a_vertex_texCoord", "vec2f");
    this._geometry = new exports_GeometryWrapper.Geometry(this._shader, geoBuilder.getDef());
    this.resize(width, height);
  }
  resize(width, height) {
    this._width = width;
    this._height = height;
    const tmpVertices = [
      { pos: [this._width * 0, this._height * 0, -1], tex: [0, 0] },
      { pos: [this._width * 1, this._height * 0, -1], tex: [1, 0] },
      { pos: [this._width * 0, this._height * 1, -1], tex: [0, 1] },
      { pos: [this._width * 1, this._height * 1, -1], tex: [1, 1] }
    ];
    const vertArr = tmpVertices.map((vertex) => {
      return [
        vertex.pos[0],
        vertex.pos[1],
        vertex.pos[2],
        vertex.tex[0],
        vertex.tex[1]
      ];
    }).flat();
    this._geometry.allocateBuffer(0, vertArr, vertArr.length);
    this._geometry.setPrimitiveCount(vertArr.length / 5);
  }
  flush(composedMatrix, cubeMap) {
    this._shader.bind((boundShader) => {
      boundShader.setMatrix4Uniform("u_composedMatrix", composedMatrix);
      boundShader.setTextureUniform("u_texture", cubeMap, 0);
      this._geometry.render();
    });
  }
}

// src/local-framework/graphics/renderers/multi-buffers-rendering/MultiBuffersRendering.ts
class MultiBuffersRendering {
  _sceneCapturer;
  _renderHudTexture;
  constructor(width, height) {
    this._sceneCapturer = new SceneCapturer(width, height);
    this._renderHudTexture = new RenderHudTexture(width, height);
  }
  resize(width, height) {
    this._sceneCapturer.resize(width, height);
    this._renderHudTexture.resize(width, height);
  }
  captureScene(renderCallback) {
    this._sceneCapturer.captureScene(renderCallback);
  }
  renderHud(composedMat4) {
    this._renderHudTexture.flush(composedMat4, this._sceneCapturer.colorTexture);
  }
}
// src/local-framework/graphics/renderers/stack-renderers/shaders/stack-renderer.glsl.vert
var stack_renderer_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec3 a_vertex_position;
in vec4 a_vertex_color;

flat out vec4 v_color;

void main(void)
{
  gl_Position = u_composedMatrix * vec4(a_vertex_position, 1.0);

  v_color = a_vertex_color;
}
`.trim();

// src/local-framework/graphics/renderers/stack-renderers/shaders/stack-renderer.glsl.frag
var stack_renderer_glsl_default2 = `
#version 300 es

precision lowp float;

flat in vec4 v_color;

out vec4 o_color;

void main(void)
{
  o_color = v_color;
}
`.trim();

// src/local-framework/graphics/renderers/stack-renderers/internals/WireFramesStackRenderer.ts
var k_bufferSize3 = 14336;

class WireFramesStackRenderer {
  _shader;
  _geometry;
  _buffer = new Float32Array(k_bufferSize3);
  _currentSize = 0;
  constructor(inShader, inGeometryDef) {
    this._shader = inShader;
    const geometryDef = {
      ...inGeometryDef,
      primitiveType: exports_GeometryWrapper.PrimitiveType.lines
    };
    this._geometry = new exports_GeometryWrapper.Geometry(inShader, geometryDef);
  }
  pushLine(inPointA, inPointB, inColor) {
    if (this._currentSize + 14 >= this._buffer.length) {
      if (this._shader.isBound()) {
        this.flush();
      } else {
        return;
      }
    }
    const alphaValue = inColor[3] ?? 1;
    this._buffer[this._currentSize + 0] = inPointA[0];
    this._buffer[this._currentSize + 1] = inPointA[1];
    this._buffer[this._currentSize + 2] = inPointA[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
    this._buffer[this._currentSize + 0] = inPointB[0];
    this._buffer[this._currentSize + 1] = inPointB[1];
    this._buffer[this._currentSize + 2] = inPointB[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
  }
  canRender() {
    return this._currentSize > 0;
  }
  flush() {
    if (!this.canRender())
      return;
    this._geometry.allocateBuffer(0, this._buffer, this._currentSize);
    this._geometry.setPrimitiveCount(this._currentSize / 7);
    this._geometry.render();
    this.clear();
  }
  clear() {
    this._currentSize = 0;
  }
}

// src/local-framework/graphics/renderers/stack-renderers/internals/TrianglesStackRenderer.ts
var k_bufferSize4 = 7168;

class TrianglesStackRenderer {
  _shader;
  _geometry;
  _buffer = new Float32Array(k_bufferSize4);
  _currentSize = 0;
  constructor(inShader, inGeometryDef) {
    this._shader = inShader;
    const geometryDef = {
      ...inGeometryDef,
      primitiveType: exports_GeometryWrapper.PrimitiveType.triangles
    };
    this._geometry = new exports_GeometryWrapper.Geometry(inShader, geometryDef);
  }
  pushTriangle(inPointA, inPointB, inPointC, inColor) {
    if (this._currentSize + 42 >= this._buffer.length) {
      if (this._shader.isBound()) {
        this.flush();
      } else {
        return;
      }
    }
    const alphaValue = inColor[3] ?? 1;
    this._buffer[this._currentSize + 0] = inPointA[0];
    this._buffer[this._currentSize + 1] = inPointA[1];
    this._buffer[this._currentSize + 2] = inPointA[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
    this._buffer[this._currentSize + 0] = inPointB[0];
    this._buffer[this._currentSize + 1] = inPointB[1];
    this._buffer[this._currentSize + 2] = inPointB[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
    this._buffer[this._currentSize + 0] = inPointC[0];
    this._buffer[this._currentSize + 1] = inPointC[1];
    this._buffer[this._currentSize + 2] = inPointC[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
  }
  pushLine(inPointA, inPointB, thickness, inColor) {
    if (this._currentSize + 42 >= this._buffer.length) {
      return;
    }
    const diffX = inPointB[0] - inPointA[0];
    const diffY = inPointB[1] - inPointA[1];
    const angle3 = Math.atan2(diffY, diffX) + Math.PI * 0.5;
    const stepX = Math.cos(angle3) * thickness * 0.5;
    const stepY = Math.sin(angle3) * thickness * 0.5;
    this.pushTriangle([inPointA[0] - stepX, inPointA[1] - stepY, inPointA[2]], [inPointB[0] - stepX, inPointB[1] - stepY, inPointB[2]], [inPointB[0] + stepX, inPointB[1] + stepY, inPointB[2]], inColor);
    this.pushTriangle([inPointA[0] - stepX, inPointA[1] - stepY, inPointA[2]], [inPointB[0] + stepX, inPointB[1] + stepY, inPointB[2]], [inPointA[0] + stepX, inPointA[1] + stepY, inPointA[2]], inColor);
  }
  pushRotatedLine(center, angle3, length5, thickness, color) {
    this.pushLine([
      center[0] - length5 * Math.cos(angle3),
      center[1] - length5 * Math.sin(angle3),
      center[2]
    ], [
      center[0] + length5 * Math.cos(angle3),
      center[1] + length5 * Math.sin(angle3),
      center[2]
    ], thickness, color);
  }
  pushOriginBoundRectangle(inOrigin, inSize, inColor) {
    if (this._currentSize + 42 >= this._buffer.length) {
      return;
    }
    const maxCoord = [
      inOrigin[0] + inSize[0],
      inOrigin[1] + inSize[1]
    ];
    this.pushTriangle([inOrigin[0], inOrigin[1], inOrigin[2]], [maxCoord[0], maxCoord[1], inOrigin[2]], [inOrigin[0], maxCoord[1], inOrigin[2]], inColor);
    this.pushTriangle([inOrigin[0], inOrigin[1], inOrigin[2]], [maxCoord[0], inOrigin[1], inOrigin[2]], [maxCoord[0], maxCoord[1], inOrigin[2]], inColor);
  }
  pushCenteredRectangle(inCenter, inSize, inColor) {
    const origin = [
      inCenter[0] - inSize[0] * 0.5,
      inCenter[1] - inSize[1] * 0.5,
      inCenter[2]
    ];
    this.pushOriginBoundRectangle(origin, inSize, inColor);
  }
  canRender() {
    return this._currentSize > 0;
  }
  flush() {
    if (!this.canRender()) {
      return;
    }
    this._geometry.allocateBuffer(0, this._buffer, this._currentSize);
    this._geometry.setPrimitiveCount(this._currentSize / 7);
    this._geometry.render();
    this.clear();
  }
  clear() {
    this._currentSize = 0;
  }
}

// src/local-framework/graphics/renderers/stack-renderers/StackRenderers.ts
class StackRenderers {
  _shader;
  _wireFramesStackRenderer;
  _trianglesStackRenderer;
  constructor() {
    this._shader = new ShaderProgram("StackRenderers", {
      vertexSrc: stack_renderer_glsl_default,
      fragmentSrc: stack_renderer_glsl_default2,
      attributes: ["a_vertex_position", "a_vertex_color"],
      uniforms: ["u_composedMatrix"]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("lines").addVbo().setVboAsDynamic().addVboAttribute("a_vertex_position", "vec3f").addVboAttribute("a_vertex_color", "vec4f");
    this._wireFramesStackRenderer = new WireFramesStackRenderer(this._shader, geoBuilder.getDef());
    this._trianglesStackRenderer = new TrianglesStackRenderer(this._shader, geoBuilder.getDef());
  }
  pushLine(inPointA, inPointB, inColor) {
    this._wireFramesStackRenderer.pushLine(inPointA, inPointB, inColor);
  }
  pushCross(inCenter, inSize, inColor) {
    const crossVertices = [
      [inCenter[0] - inSize, inCenter[1], inCenter[2]],
      [inCenter[0] + inSize, inCenter[1], inCenter[2]],
      [inCenter[0], inCenter[1] - inSize, inCenter[2]],
      [inCenter[0], inCenter[1] + inSize, inCenter[2]],
      [inCenter[0], inCenter[1], inCenter[2] - inSize],
      [inCenter[0], inCenter[1], inCenter[2] + inSize]
    ];
    const crossIndices = [0, 1, 2, 3, 4, 5];
    for (let ii = 0;ii < crossIndices.length; ii += 2) {
      const vertexA = crossVertices[ii + 0];
      const vertexB = crossVertices[ii + 1];
      this._wireFramesStackRenderer.pushLine(vertexA, vertexB, inColor);
    }
  }
  pushThickLine(inPointA, inPointB, thickness, inColor) {
    this._trianglesStackRenderer.pushLine(inPointA, inPointB, thickness, inColor);
  }
  pushRotatedLine(center, angle3, length5, thickness, color) {
    this._trianglesStackRenderer.pushRotatedLine(center, angle3, length5, thickness, color);
  }
  pushOriginBoundRectangle(inOrigin, inSize, inColor) {
    this._trianglesStackRenderer.pushOriginBoundRectangle(inOrigin, inSize, inColor);
  }
  pushCenteredRectangle(inCenter, inSize, inColor) {
    this._trianglesStackRenderer.pushCenteredRectangle(inCenter, inSize, inColor);
  }
  pushTriangle(inPosA, inPosB, inPosC, inColor) {
    this._trianglesStackRenderer.pushTriangle(inPosA, inPosB, inPosC, inColor);
  }
  pushQuad(inPos, inSize, inColor) {
    this.pushTriangle([inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 0, inPos[2]], [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 1, inPos[2]], [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 0, inPos[2]], inColor);
    this.pushTriangle([inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 0, inPos[2]], [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 1, inPos[2]], [inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 1, inPos[2]], inColor);
  }
  flush(inComposedMatrix) {
    if (!this._wireFramesStackRenderer.canRender() && !this._trianglesStackRenderer.canRender()) {
      return;
    }
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inComposedMatrix);
      this._wireFramesStackRenderer.flush();
      this._trianglesStackRenderer.flush();
    });
  }
  safeRender(inComposedMatrix, inCallback) {
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inComposedMatrix);
      inCallback();
      this._wireFramesStackRenderer.flush();
      this._trianglesStackRenderer.flush();
    });
  }
  clear() {
    this._wireFramesStackRenderer.clear();
    this._trianglesStackRenderer.clear();
  }
}
// src/local-framework/graphics/renderers/text-renderer/shaders/text-renderer.glsl.vert
var text_renderer_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec2 a_vertex_position;
in vec2 a_vertex_texCoord;
in vec3 a_offset_position;
in vec2 a_offset_texCoord;
in vec3 a_offset_color;
in float a_offset_scale;

out vec2 v_texCoord;
flat out vec3 v_color;

void main(void)
{
  vec3 position = vec3(a_vertex_position, 0.0) * a_offset_scale + a_offset_position;

  gl_Position = u_composedMatrix * vec4(position, 1.0);

  v_texCoord = a_vertex_texCoord + a_offset_texCoord;
  v_color = a_offset_color;
}
`.trim();

// src/local-framework/graphics/renderers/text-renderer/shaders/text-renderer.glsl.frag
var text_renderer_glsl_default2 = `
#version 300 es

precision mediump float;

uniform sampler2D u_texture;

in vec2 v_texCoord;
flat in vec3 v_color;

out vec4 o_color;

void main(void)
{
  vec4 textureColor = texture(u_texture, v_texCoord);
  if (textureColor.a < 0.5)
  {
    discard;
  }
  else
  {
    o_color = vec4(v_color, textureColor.a);
  }
}
`.trim();

// src/local-framework/graphics/renderers/text-renderer/internals/asciiTextureHex.ts
var asciiTextureHex = "7e7e28fd03fd07fe04fe0aff02ff7e4dfd0cfd03fd07fe04fe0aff02ff1afc0dfd10fc08fc0ffe55ff15fb0bfd03fd07fe04fe08f707fd04ff07fe02fe0cfd0ffd0cfd0aff03fe03ff0afe44fe15fb0bfd03fd04f204f607fd03fe07fe02fe0cfd0efd0efd0aff02fe02ff0bfe43fd15fb0cfe03fe05f204fe01ff02ff0afd02fd07fe02fe0bfd0efd10fd0afa0cfe42fd16fb1bfe04fe07fe01ff02ff0efd09fc1cfd12fd09fa0cfe41fd17fb1bfe04fe07f70bfd0afc04ff17fd12fd06f405f616f61cfd19fd1cfe04fe08f709fd0bfb02fe17fd12fd06f405f616f61bfd1afd1cfe04fe0aff02ff01fe08fd0bfe02fa17fd12fd09fa0cfe3efd37f207ff02ff01fe07fd02fd07fe03fc19fd10fd0afa0cfe3dfd38f204f607fe03fd07fe03fd1bfd0efd0aff02fe02ff0bfe0cfd1dfd0dfd1dfd1cfe04fe07f708ff04fd07fe02fb1bfd0cfd0aff03fe03ff0afe0cfd1dfd0cfd1efd1cfe04fe0aff02ff1afb02fe1bfc08fc0ffe1cfd1dfd0bfd1ffd1cfe04fe0aff02ff7afd7e7e7e7e7e7e0efd17fd10fc0af80bfe0bf909f90dfd08f609fb08f506f808f82cfd19fd0df807fd04fd0afe0afd03fd07fd03fd0bfc08fd0ffd0bfd05fd05fd04fd06fd04fd2afd1bfd0bfc02fc06fd03fc09fd0afd04fd06fd04fd09fb08fd0efd0cfd05fd05fd04fd06fd04fd09fd0cfd0efd1dfd0afe05fd06fd02fb06fa11fd0dfd08fe01fd08fd0dfd0dfd05fd05fd04fd06fd04fd09fd0cfd0dfd0af409fd10fd06fd02fb06fa10fd0dfd08fe02fd08fd0dfd15fd05fb02fd06fd04fd09fd0cfd0cfd0bf40afd0efd07fd01fe01fd09fd0ffd0bfb08fe03fd08f808f70efd08fa08f626fd23fd0cfd08fd01fe01fd09fd0efd0cfb08f606f707f60cfd09fa09f726fd23fd0bfd09fb02fd09fd0dfd10fd07f60cfc06fd04fd0bfd08fd02fb0dfd09fd0cfd0cfd0bf40afd0cfd09fb02fd09fd0cfd12fd0bfd0ffd06fd04fd0afd09fd04fd0dfd09fd0cfd0dfd0af409fd19fc03fd09fd0bfd03fd06fd04fd0bfd08fd04fd06fd04fd09fd0afd04fd0cfd0afd0cfd0efd1dfd1afd04fd09fd0afd04fd06fd03fd0cfd08fd03fd07fd04fd09fd0afd04fd0bfd19fd10fd1bfd0ffd0af807f707f607f90bf907f909f80afd0bf809fb2efd19fd10fd7e51fd17fd11fd7e7e7e7e13f87e78fd05fd08fc09f709f907f808f606f608f907fd03fd07f90df905fc03fd06fb0bfd05fd05fd05fd08fb08fd05fd07fa09fd03fd07fd03fd07fd02fd08fd04fe07fd04fe07fd03fd06fd03fd09fd11fd08fd03fd07fd0cfc03fc05fd05fd07fd01fd07fd05fd06fd02fd08fd03fd06fd04fd07fd03fd07fd05ff07fd05ff06fd04fd06fd03fd09fd11fd08fd02fd08fd0cfb01fb05fc04fd06fd03fd06fd05fd05fd04fd07fd03fd06fd0efd03fd07fd0dfd0cfd04fd06fd03fd09fd11fd08fd01fd09fd0cf505fb03fd05fd05fd05fd02fa05fd04fd07fd03fd06fd0efd03fd07fd03fe08fd03fe07fd0dfd03fd09fd11fd08fa0afd0cf505fa02fd05fd05fd05fd02fa05fd04fd07f807fd0efd03fd07f808f807fd0df709fd11fd08fb0bfd0cfd01fd01fd05fd01fd01fd05fd05fd05fd02fa05fd04fd07f807fd0efd03fd07f808f807fd0df709fd11fd08fb0bfd0cfd02ff02fd05fd02fa05fd05fd05fd02fa05f607fd03fd06fd0efd03fd07fd03fe08fd03fe07fd02fb06fd03fd09fd0bfd03fd08fa0afd0cfd05fd05fd03fb05fd05fd05fd0dfd04fd07fd03fd06fd0efd03fd07fd0dfd0cfd04fd06fd03fd09fd0bfd03fd08fd01fd09fd05ff06fd05fd05fd04fc05fd05fd05fd0dfd04fd07fd03fd06fd04fd07fd03fd07fd05ff07fd0cfd04fd06fd03fd09fd0bfd03fd08fd02fd08fd04fe06fd05fd05fd05fd06fd03fd06fd0dfd04fd07fd03fd07fd03fd07fd02fd08fd04fe07fd0dfd03fd06fd03fd09fd0bfd03fd08fd03fd07fd03fd06fd05fd05fd05fd07fd01fd07fd0dfd04fd06f709f907f808f606fb0df806fd03fd07f90af908fc03fd06f606fd05fd05fd05fd08fb0af87e7e7e7e7e7e7e68fe1af70afb08f708f807f505fd03fd07fd03fd07fd05fd05fd03fd07fd03fd07f608f907ff11f90afc1afd03fd07fc01fc07fd03fd06fd04fd06fe02fd02fe05fd03fd07fd03fd07fd05fd05fd03fd07fd03fd07fd04fd08fd0bfe14fd09fa19fd03fd07fd03fd07fd03fd06fd04fd06ff03fd03ff05fd03fd07fd03fd07fd05fd05fd03fd07fd03fd07fe05fd08fd0bfd13fd08fd02fd18fd03fd06fd05fd06fd03fd06fd04fd0afd09fd03fd07fd03fd07fd05fd06fd01fd08fd03fd07ff05fd09fd0cfd12fd07fd04fd17fd03fd06fd05fd06fd03fd06fd11fd09fd03fd07fd03fd07fd05fd07fb09fd03fd0cfd0afd0dfd11fd28f807fd05fd06f808f90cfd09fd03fd07fd03fd07fd02ff02fd08fd0bfd01fd0cfd0bfd0efd10fd28f807fd05fd06f809f90bfd09fd03fd07fd03fd07fd02ff02fd08fd0cfb0cfd0cfd0ffd0ffd28fd0cfd03fb06fd02fd0efd0afd09fd03fd07fd03fd07fd02ff02fd07fb0cfd0cfd0dfd10fd0efd28fd0cfd02fa06fd03fd06fd04fd0afd09fd03fd07fd03fd08f707fd01fd0bfd0bfd05ff08fd11fd0dfd28fd0df707fd03fd06fd04fd0afd09fd03fd08fd01fd09fc01fc06fd03fd0afd0afd05fe08fd12fd0cfd28fd0df707fd03fd06fd04fd0afd09fd03fd09fb0bfd01fd07fd03fd0afd0afd04fd08fd13fd0bfd27fb12fd06fc03fd07f809f908f90bfd0cfd01fd07fd03fd08f908f608f910fd06f93cfa7e54f07e72f07e7e7e7e0bfd1dfc21fb19fb18fc10fd0ffd07fc0dfa39fd1efd22fd19fd01fd18fd10fd0ffd08fd10fd3bfd1cfd22fd19fd01fd18fd10fd0ffd08fd10fd3bfd1cfd22fd19fd1cfd2dfd10fd4af909f808f909f808f90afd0cfb02fe07fd01fc08fa0cfa08fd03fd0afd09f606f809f91efd08fd03fd06fd03fd07fd03fd07fd03fd07f808fd03fd08fc02fd0afd0ffd08fd02fd0bfd09fd02ff02fd05fd03fd07fd03fd1dfd08fd03fd06fd03fd07fd03fd07fd03fd07f808fd03fd08fc02fd0afd0ffd08fd01fd0cfd09fd02ff02fd05fd03fd07fd03fd18f808fd03fd06fd0dfd03fd07f709fd0bfd03fd08fd03fd0afd0ffd08fa0dfd09fd02ff02fd05fd03fd07fd03fd17fd03fd08fd03fd06fd0dfd03fd07fd0ffd0bfd03fd08fd03fd0afd0ffd08fd01fd0cfd09fd02ff02fd05fd03fd07fd03fd17fd03fd08fd03fd06fd03fd07fd03fd07fd03fd09fd0cf808fd03fd0afd0ffd08fd02fd0bfd09fd02ff02fd05fd03fd07fd03fd17fd03fd08fd03fd06fd03fd07fd03fd07fd03fd09fd0df908fd03fd0afd0ffd08fd03fd0afd09fd02ff02fd05fd03fd07fd03fd18fb02fe06fe02fb08f909fb02fe07f908f90ffd07fc03fd07f706fd03fd07fc03fd07f706fd05fd05fd03fd08f978fd03fd27fd03fd7e4af92afa7e7e7e7e7e7e18fa09fc09fa1efe4eff6efd0dfc0dfd1cfc4cfe6efd0dfc0dfd1bfa4afd6efd0dfc0dfd1afd02fd07fe02fb07fb02fe07fc02fd08f908f707fd03fd07fd03fd07fd05fd05fd02fd09fd03fd06f80afd0efc0efd08fb03fd05fd04fd07fd03fd05fd03fd09f706fd04fe09fd0bfd03fd07fd03fd07fd05fd05fd02fd09fd03fd06fe03fd08fd24fd05fd01fd02fd05fe06fe07fd03fd05fd03fd09fc02fd06fd04fe09fd0bfd03fd07fd03fd07fd05fd06fa0afd03fd06ff03fd09fd24fd05fd02fd01fd05fe06fe07fd03fd05fd03fd09fd0dfb0cfd0bfd03fd07fd03fd07fd02ff02fd07fc0bfd03fd09fd0cfd0efc0efd07fd03fb06fe06fe07fd03fd05fd03fd09fd0ffb0afd0bfd03fd07fd03fd07fd02ff02fd07fc0bfd03fd08fd0efd0dfc0dfd19fe06fe07fd03fd05fd03fd09fd0cfe04fd09fd01fd07fd03fd08fd01fd09fc01fc07fa0bf908fd03ff0bfd0dfc0dfd19fe06fe07f807f809fd0cfe04fd09fd01fd07fd03fd09fb0bfd01fd07fd02fd0bfb08fd03fe0bfd0dfc0dfd19f607fd11fd08fb0cf90bfb09fb02fe09fd0cfd01fd07fd02fd0dfd08f80cfa09fc09fa1af607fd11fd7cfd69fb0ffb77fa";

// src/local-framework/graphics/renderers/text-renderer/TextRenderer.ts
var k_gridSize = [16, 6];
var k_texCoord = [1 / k_gridSize[0], 1 / k_gridSize[1]];
var k_bufferSize5 = 36864;

class TextRenderer {
  _shader;
  _geometry;
  _texture = new Texture;
  _texCoordMap;
  _buffer = new Float32Array(k_bufferSize5);
  _currentSize = 0;
  _textScale = 14;
  _textColor = [1, 1, 1];
  _horizontalTextAlign = "left";
  _verticalTextAlign = "top";
  constructor() {
    this._shader = new ShaderProgram("TextRenderer", {
      vertexSrc: text_renderer_glsl_default,
      fragmentSrc: text_renderer_glsl_default2,
      attributes: [
        "a_vertex_position",
        "a_vertex_texCoord",
        "a_offset_position",
        "a_offset_texCoord",
        "a_offset_color",
        "a_offset_scale"
      ],
      uniforms: ["u_composedMatrix", "u_texture"]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangles").addVbo().addVboAttribute("a_vertex_position", "vec2f").addVboAttribute("a_vertex_texCoord", "vec2f").setStride(16).addVbo().setVboAsDynamic().setVboAsInstanced().addVboAttribute("a_offset_position", "vec3f").addVboAttribute("a_offset_texCoord", "vec2f").addVboAttribute("a_offset_color", "vec3f").addVboAttribute("a_offset_scale", "float").setStride(36);
    this._geometry = new exports_GeometryWrapper.Geometry(this._shader, geoBuilder.getDef());
    const vertices = [
      {
        position: [0.5, -0.5],
        texCoord: [k_texCoord[0] * 1, k_texCoord[1] * 1]
      },
      {
        position: [-0.5, -0.5],
        texCoord: [k_texCoord[0] * 0, k_texCoord[1] * 1]
      },
      {
        position: [0.5, 0.5],
        texCoord: [k_texCoord[0] * 1, k_texCoord[1] * 0]
      },
      {
        position: [-0.5, 0.5],
        texCoord: [k_texCoord[0] * 0, k_texCoord[1] * 0]
      }
    ];
    const indices = [1, 0, 2, 1, 2, 3];
    const letterVertices = [];
    for (const index of indices) {
      const vertex = vertices[index];
      letterVertices.push(vertex.position[0], vertex.position[1], vertex.texCoord[0], vertex.texCoord[1]);
    }
    this._geometry.allocateBuffer(0, letterVertices, letterVertices.length);
    this._geometry.setPrimitiveCount(letterVertices.length / 4);
    this._texCoordMap = new Map([
      [" ", [0 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["!", [1 * k_texCoord[0], 0 * k_texCoord[1]]],
      ['"', [2 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["#", [3 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["$", [4 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["%", [5 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["&", [6 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["'", [7 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["(", [8 * k_texCoord[0], 0 * k_texCoord[1]]],
      [")", [9 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["*", [10 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["+", [11 * k_texCoord[0], 0 * k_texCoord[1]]],
      [",", [12 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["-", [13 * k_texCoord[0], 0 * k_texCoord[1]]],
      [".", [14 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["/", [15 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["0", [0 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["1", [1 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["2", [2 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["3", [3 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["4", [4 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["5", [5 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["6", [6 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["7", [7 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["8", [8 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["9", [9 * k_texCoord[0], 1 * k_texCoord[1]]],
      [":", [10 * k_texCoord[0], 1 * k_texCoord[1]]],
      [";", [11 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["<", [12 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["=", [13 * k_texCoord[0], 1 * k_texCoord[1]]],
      [">", [14 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["?", [15 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["@", [0 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["A", [1 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["B", [2 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["C", [3 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["D", [4 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["E", [5 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["F", [6 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["G", [7 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["H", [8 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["I", [9 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["J", [10 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["K", [11 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["L", [12 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["M", [13 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["N", [14 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["O", [15 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["P", [0 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["Q", [1 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["R", [2 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["S", [3 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["T", [4 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["U", [5 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["V", [6 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["W", [7 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["X", [8 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["Y", [9 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["Z", [10 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["[", [11 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["\\", [12 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["]", [13 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["^", [14 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["_", [15 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["`", [0 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["a", [1 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["b", [2 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["c", [3 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["d", [4 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["e", [5 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["f", [6 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["g", [7 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["h", [8 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["i", [9 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["j", [10 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["k", [11 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["l", [12 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["m", [13 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["n", [14 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["o", [15 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["p", [0 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["q", [1 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["r", [2 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["s", [3 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["t", [4 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["u", [5 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["v", [6 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["w", [7 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["x", [8 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["y", [9 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["z", [10 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["{", [11 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["|", [12 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["}", [13 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["~", [14 * k_texCoord[0], 5 * k_texCoord[1]]]
    ]);
    const width = 256;
    const height = 96;
    const imagePixels = new Uint8Array(width * height * 4);
    {
      let index = 0;
      for (let ii = 0;ii < asciiTextureHex.length; ii += 2) {
        let currSize = parseInt(`${asciiTextureHex.substring(ii, ii + 2)}000000`, 16) >> 24;
        let currVal = 0;
        if (currSize < 0) {
          currSize = -currSize;
          currVal = 255;
        }
        for (let ii2 = 0;ii2 < currSize; ++ii2) {
          imagePixels[index * 4 + 0] = currVal;
          imagePixels[index * 4 + 1] = currVal;
          imagePixels[index * 4 + 2] = currVal;
          imagePixels[index * 4 + 3] = currVal;
          ++index;
        }
      }
    }
    this._texture.initialize();
    this._texture.bind((boundTexture) => {
      boundTexture.loadFromMemory(width, height, imagePixels);
    });
  }
  setTextAlign(inHorizontalTextAlign, inVerticalTextAlign) {
    this._horizontalTextAlign = inHorizontalTextAlign;
    this._verticalTextAlign = inVerticalTextAlign;
    return this;
  }
  setTextScale(inScale) {
    this._textScale = inScale;
    return this;
  }
  setTextColor(inRed, inGreen, inBlue) {
    this._textColor[0] = inRed;
    this._textColor[1] = inGreen;
    this._textColor[2] = inBlue;
    return this;
  }
  pushText(inMessage, inPosition) {
    if (inMessage.length === 0) {
      return this;
    }
    if (this._textScale <= 0) {
      return this;
    }
    const allLineWidth = [0];
    for (let ii = 0;ii < inMessage.length; ++ii) {
      if (inMessage[ii] == "\n") {
        allLineWidth.push(0);
      } else {
        allLineWidth[allLineWidth.length - 1] += 1;
      }
    }
    if (allLineWidth.length === 0) {
      return this;
    }
    let lineIndex = 0;
    const currPos = [0, 0];
    const hScale = this._textScale * 0.5;
    switch (this._horizontalTextAlign) {
      case "left":
        currPos[0] = inPosition[0];
        break;
      case "centered":
        currPos[0] = inPosition[0] - allLineWidth[lineIndex] * hScale + hScale;
        break;
      case "right":
        currPos[0] = inPosition[0] - allLineWidth[lineIndex] * this._textScale + this._textScale;
        break;
    }
    switch (this._verticalTextAlign) {
      case "top":
        currPos[1] = inPosition[1];
        break;
      case "centered":
        currPos[1] = inPosition[1] + allLineWidth.length * hScale - hScale;
        break;
      case "bottom":
        currPos[1] = inPosition[1] - (allLineWidth.length - 1) * this._textScale;
        break;
    }
    for (let ii = 0;ii < inMessage.length; ++ii) {
      const letter = inMessage[ii];
      if (letter == "\n") {
        lineIndex += 1;
        switch (this._horizontalTextAlign) {
          case "left":
            currPos[0] = inPosition[0];
            break;
          case "centered":
            currPos[0] = inPosition[0] - allLineWidth[lineIndex] * hScale + hScale;
            break;
          case "right":
            currPos[0] = inPosition[0] - allLineWidth[lineIndex] * this._textScale + this._textScale;
            break;
        }
        currPos[1] -= this._textScale;
      } else {
        this._pushLetter(letter, currPos);
        currPos[0] += this._textScale;
      }
    }
    return this;
  }
  _pushLetter(inCharacter, inPosition) {
    if (this._currentSize + 90 >= this._buffer.length) {
      return;
    }
    const texCoord = this._texCoordMap.get(inCharacter);
    if (!texCoord)
      throw new Error(`fail to find a letter, letter=${inCharacter}`);
    for (let yy = -1;yy <= 1; ++yy) {
      for (let xx = -1;xx <= 1; ++xx) {
        this._buffer[this._currentSize++] = inPosition[0] + 2 * xx;
        this._buffer[this._currentSize++] = inPosition[1] + 2 * yy;
        this._buffer[this._currentSize++] = -0.1;
        this._buffer[this._currentSize++] = texCoord[0];
        this._buffer[this._currentSize++] = texCoord[1];
        this._buffer[this._currentSize++] = 0;
        this._buffer[this._currentSize++] = 0;
        this._buffer[this._currentSize++] = 0;
        this._buffer[this._currentSize++] = this._textScale;
      }
    }
    this._buffer[this._currentSize++] = inPosition[0];
    this._buffer[this._currentSize++] = inPosition[1];
    this._buffer[this._currentSize++] = 0;
    this._buffer[this._currentSize++] = texCoord[0];
    this._buffer[this._currentSize++] = texCoord[1];
    this._buffer[this._currentSize++] = this._textColor[0];
    this._buffer[this._currentSize++] = this._textColor[1];
    this._buffer[this._currentSize++] = this._textColor[2];
    this._buffer[this._currentSize++] = this._textScale;
  }
  flush(composedMatrix) {
    if (this._currentSize === 0) {
      return this;
    }
    this._shader.bind((boundShader) => {
      boundShader.setMatrix4Uniform("u_composedMatrix", composedMatrix);
      boundShader.setTextureUniform("u_texture", this._texture, 0);
      this._geometry.allocateBuffer(1, this._buffer, this._currentSize);
      this._geometry.setInstancedCount(this._currentSize / 9);
      this._geometry.render();
    });
    Texture.unbind();
    this.clear();
    return this;
  }
  clear() {
    this._currentSize = 0;
    return this;
  }
}
// src/local-framework/graphics/renderers/widgets/index.ts
var exports_widgets = {};
__export(exports_widgets, {
  renderFpsMeter: () => {
    {
      return renderFpsMeter;
    }
  },
  addKeysTouchesWidgets: () => {
    {
      return addKeysTouchesWidgets;
    }
  },
  addKeyStrokesWidgets: () => {
    {
      return addKeyStrokesWidgets;
    }
  },
  addArrowStrokesWidgets: () => {
    {
      return addArrowStrokesWidgets;
    }
  }
});

// src/local-framework/graphics/renderers/widgets/renderControls.ts
var defaultColor = [0.2, 0.2, 0.2];
var activatedColor = [0.2, 0.6, 0.2];
var _renderIndicator = (currIndicator, stackRenderers, textRenderer) => {
  const { center } = currIndicator;
  stackRenderers.pushCenteredRectangle(exports_vec3.fromValues(center[0], center[1], -0.3), currIndicator.size, [0, 0, 0]);
  stackRenderers.pushCenteredRectangle(exports_vec3.fromValues(center[0], center[1], -0.2), [currIndicator.size[0] - 2, currIndicator.size[1] - 2], currIndicator.color);
  if (currIndicator.text) {
    textRenderer.setTextScale(16).setTextAlign("centered", "centered").pushText(currIndicator.text, center).setTextAlign("left", "top");
  }
  if (currIndicator.lines) {
    currIndicator.lines.forEach((currLine) => {
      stackRenderers.pushThickLine([center[0] + currLine.a[0], center[1] + currLine.a[1], 0], [center[0] + currLine.b[0], center[1] + currLine.b[1], 0], currLine.thickness, currLine.color);
    });
  }
};
var addKeyStrokesWidgets = (inPos, stackRenderers, textRenderer) => {
  _renderIndicator({
    center: [inPos[0], inPos[1]],
    size: [40, 40],
    text: "A\nQ",
    color: GlobalKeyboardManager.isPressed("A", "Q") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 45, inPos[1]],
    size: [40, 40],
    text: "S",
    color: GlobalKeyboardManager.isPressed("S") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 45, inPos[1] + 45],
    size: [40, 40],
    text: "W\nZ",
    color: GlobalKeyboardManager.isPressed("W", "Z") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 90, inPos[1]],
    size: [40, 40],
    text: "D",
    color: GlobalKeyboardManager.isPressed("D") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
};
var addArrowStrokesWidgets = (inPos, stackRenderers, textRenderer) => {
  _renderIndicator({
    center: [inPos[0], inPos[1]],
    size: [40, 40],
    lines: [
      { a: [15, 0], b: [-8, 0], thickness: 6, color: [1, 1, 1] },
      { a: [0, 10], b: [-12, -2], thickness: 6, color: [1, 1, 1] },
      { a: [0, -10], b: [-12, 2], thickness: 6, color: [1, 1, 1] }
    ],
    color: GlobalKeyboardManager.isPressed("ArrowLeft") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 45, inPos[1]],
    size: [40, 40],
    lines: [
      { a: [0, 15], b: [0, -8], thickness: 6, color: [1, 1, 1] },
      { a: [10, 0], b: [-2, -12], thickness: 6, color: [1, 1, 1] },
      { a: [-10, 0], b: [2, -12], thickness: 6, color: [1, 1, 1] }
    ],
    color: GlobalKeyboardManager.isPressed("ArrowDown") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 45, inPos[1] + 45],
    size: [40, 40],
    lines: [
      { a: [0, -15], b: [0, 8], thickness: 6, color: [1, 1, 1] },
      { a: [10, 0], b: [-2, 12], thickness: 6, color: [1, 1, 1] },
      { a: [-10, 0], b: [2, 12], thickness: 6, color: [1, 1, 1] }
    ],
    color: GlobalKeyboardManager.isPressed("ArrowUp") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 90, inPos[1]],
    size: [40, 40],
    lines: [
      { a: [-15, 0], b: [8, 0], thickness: 6, color: [1, 1, 1] },
      { a: [0, 10], b: [12, -2], thickness: 6, color: [1, 1, 1] },
      { a: [0, -10], b: [12, 2], thickness: 6, color: [1, 1, 1] }
    ],
    color: GlobalKeyboardManager.isPressed("ArrowRight") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
};
var addKeysTouchesWidgets = (inCanvasElement, inPos, stackRenderers, textRenderer) => {
  if (GlobalTouchManager.isSupported(inCanvasElement)) {
    _renderIndicator({
      center: [inPos[0] + 115, inPos[1]],
      size: [230, 60],
      text: "Touch Events\nSupported\n(double tap)",
      color: [0, 0.5, 0]
    }, stackRenderers, textRenderer);
  } else {
    _renderIndicator({
      center: [inPos[0] + 115, inPos[1]],
      size: [230, 60],
      text: "Touch Events\nNot Supported",
      color: [0.5, 0, 0]
    }, stackRenderers, textRenderer);
  }
  if (GlobalPointerLockManager.canBePointerLocked(inCanvasElement)) {
    _renderIndicator({
      center: [inPos[0] + 105, inPos[1] + 70],
      size: [210, 60],
      text: "Mouse\nSupported",
      color: [0, 0.5, 0]
    }, stackRenderers, textRenderer);
  } else {
    _renderIndicator({
      center: [inPos[0] + 105, inPos[1] + 70],
      size: [210, 60],
      text: "Mouse Events\nNot Supported",
      color: [0.5, 0, 0]
    }, stackRenderers, textRenderer);
  }
};
// src/local-framework/graphics/renderers/widgets/renderFpsMeter.ts
var renderFpsMeter = (inPos, inSize, inFrameProfiler, inStackRenderers, inTextRenderer, inShowFps = false) => {
  const k_divider = 5;
  const k_verticalSize = Math.ceil(inFrameProfiler.maxDelta / k_divider) * k_divider;
  {
    inStackRenderers.pushOriginBoundRectangle(inPos, inSize, [0, 0, 0, 0.5]);
    const allVertices = [
      [inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 0, 0],
      [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 0, 0],
      [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 1, 0],
      [inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 1, 0]
    ];
    inStackRenderers.pushLine(allVertices[0], allVertices[1], [1, 1, 1]);
    inStackRenderers.pushLine(allVertices[1], allVertices[2], [1, 1, 1]);
    inStackRenderers.pushLine(allVertices[2], allVertices[3], [1, 1, 1]);
    inStackRenderers.pushLine(allVertices[3], allVertices[0], [1, 1, 1]);
  }
  {
    for (let currDivider = k_divider;currDivider < k_verticalSize; currDivider += k_divider) {
      const ratio = currDivider / k_verticalSize;
      const pointA = [
        inPos[0] + 0,
        inPos[1] + inSize[1] * ratio,
        0
      ];
      const pointB = [
        inPos[0] + inSize[0],
        inPos[1] + inSize[1] * ratio,
        0
      ];
      inStackRenderers.pushLine(pointA, pointB, [0.5, 0.5, 0.5]);
    }
  }
  {
    if (inFrameProfiler.framesDelta.length >= 2) {
      const widthStep = inSize[0] / inFrameProfiler.framesDelta.length;
      let prevDelta = inFrameProfiler.framesDelta[0];
      let prevCoordX = 0;
      let prevCoordY = inSize[1] * prevDelta / k_verticalSize;
      for (let ii = 1;ii < inFrameProfiler.framesDelta.length; ++ii) {
        const currDelta = inFrameProfiler.framesDelta[ii];
        const currCoordX = ii * widthStep;
        const currCoordY = inSize[1] * currDelta / k_verticalSize;
        const pointA = [
          inPos[0] + prevCoordX,
          inPos[1] + prevCoordY,
          0
        ];
        const pointB = [
          inPos[0] + currCoordX,
          inPos[1] + currCoordY,
          0
        ];
        inStackRenderers.pushLine(pointA, pointB, [1, 1, 1]);
        prevDelta = currDelta;
        prevCoordX = currCoordX;
        prevCoordY = currCoordY;
      }
    }
  }
  {
    const k_textScale = 14;
    const k_textHScale = k_textScale * 0.5;
    const averageValue = inFrameProfiler.averageDelta;
    const maxValue = inFrameProfiler.maxDelta;
    const minValue = inFrameProfiler.minDelta;
    let averageStr = `~${averageValue.toFixed(0)}ms`;
    let maxStr = `<${maxValue}ms`;
    let minStr = `>${minValue}ms`;
    if (inShowFps === true) {
      const _getFpsStr = (inVal) => inVal < 999 ? inVal.toFixed(0) : "???";
      averageStr += `\n~${_getFpsStr(1000 / averageValue)}fps`;
      maxStr += `\n<${_getFpsStr(1000 / maxValue)}fps`;
      minStr += `\n>${_getFpsStr(1000 / minValue)}fps`;
    }
    inTextRenderer.setTextScale(k_textScale).setTextAlign("left", "top").setTextColor(1, 1, 0.75).pushText(averageStr, [inPos[0] + 7, inPos[1] - 8]).setTextAlign("left", "centered").setTextColor(1, 0.75, 0.75).pushText(maxStr, [
      inPos[0] + inSize[0] + k_textHScale,
      inPos[1] + inSize[1] - k_textHScale * 1
    ]).setTextColor(0.75, 1, 0.75).pushText(minStr, [
      inPos[0] + inSize[0] + k_textHScale,
      inPos[1] + k_textHScale * 1
    ]).setTextColor(1, 1, 1);
  }
};
// src/local-framework/graphics/images/index.ts
var exports_images = {};
__export(exports_images, {
  getImageFromUrl: () => {
    {
      return getImageFromUrl;
    }
  },
  getImageFromBuffer: () => {
    {
      return getImageFromBuffer;
    }
  },
  fetchImageBuffer: () => {
    {
      return fetchImageBuffer;
    }
  }
});

// src/local-framework/graphics/images/getImageFromUrl.ts
var getImageFromUrl = (url) => {
  return new Promise((resolve, reject) => {
    const image = new Image;
    image.onerror = reject;
    image.onload = () => {
      resolve(image);
    };
    image.src = url;
  });
};
var fetchImageBuffer = async (url, onProgress) => {
  const response = await fetch(url);
  const reader = response.body.getReader();
  const contentLength = +response.headers.get("Content-Length");
  const contentType = response.headers.get("Content-Type");
  let lastPercent = 0;
  let receivedLength = 0;
  let chunks = [];
  while (true) {
    const { done, value } = await reader.read();
    if (done) {
      break;
    }
    chunks.push(value);
    receivedLength += value.length;
    if (onProgress) {
      onProgress(receivedLength, contentLength);
    }
  }
  const chunksAll = new Uint8Array(receivedLength);
  let position = 0;
  for (let chunk of chunks) {
    chunksAll.set(chunk, position);
    position += chunk.length;
  }
  return {
    buffer: chunksAll,
    type: contentType
  };
};
var getImageFromBuffer = async (buffer, type) => {
  return new Promise((resolve, reject) => {
    const image = new Image;
    image.onerror = reject;
    image.onload = () => {
      resolve(image);
    };
    image.src = URL.createObjectURL(new Blob([buffer], { type }));
  });
};
// src/local-framework/graphics/geometries/index.ts
var exports_geometries = {};
__export(exports_geometries, {
  makeSphere: () => {
    {
      return makeSphere;
    }
  },
  makeBox: () => {
    {
      return makeBox;
    }
  }
});

// src/local-framework/graphics/geometries/makeBox.ts
var makeBox = (inSize) => {
  const hSizeX = inSize[0] * 0.5;
  const hSizeY = inSize[1] * 0.5;
  const hSizeZ = inSize[2] * 0.5;
  const allNormals = [];
  allNormals.push([-1, 0, 0]);
  allNormals.push([1, 0, 0]);
  allNormals.push([0, -1, 0]);
  allNormals.push([0, 1, 0]);
  allNormals.push([0, 0, -1]);
  allNormals.push([0, 0, 1]);
  const allVertices = [];
  allVertices.push([-hSizeX, -hSizeY, -hSizeZ]);
  allVertices.push([+hSizeX, -hSizeY, -hSizeZ]);
  allVertices.push([-hSizeX, +hSizeY, -hSizeZ]);
  allVertices.push([+hSizeX, +hSizeY, -hSizeZ]);
  allVertices.push([-hSizeX, -hSizeY, +hSizeZ]);
  allVertices.push([+hSizeX, -hSizeY, +hSizeZ]);
  allVertices.push([-hSizeX, +hSizeY, +hSizeZ]);
  allVertices.push([+hSizeX, +hSizeY, +hSizeZ]);
  const allIndices = [];
  allIndices.push([0, 2, 1, 4]);
  allIndices.push([2, 3, 1, 4]);
  allIndices.push([4, 5, 6, 5]);
  allIndices.push([6, 5, 7, 5]);
  allIndices.push([1, 3, 5, 1]);
  allIndices.push([5, 3, 7, 1]);
  allIndices.push([0, 4, 2, 0]);
  allIndices.push([4, 6, 2, 0]);
  allIndices.push([2, 6, 3, 3]);
  allIndices.push([6, 7, 3, 3]);
  allIndices.push([0, 1, 4, 2]);
  allIndices.push([4, 1, 5, 2]);
  const vertices = [];
  for (const index of allIndices) {
    vertices.push({
      pos: exports_vec3.copy([0, 0, 0], allVertices[index[0]]),
      normal: exports_vec3.copy([0, 0, 0], allNormals[index[3]])
    });
    vertices.push({
      pos: exports_vec3.copy([0, 0, 0], allVertices[index[1]]),
      normal: exports_vec3.copy([0, 0, 0], allNormals[index[3]])
    });
    vertices.push({
      pos: exports_vec3.copy([0, 0, 0], allVertices[index[2]]),
      normal: exports_vec3.copy([0, 0, 0], allNormals[index[3]])
    });
  }
  return vertices;
};
// src/local-framework/graphics/geometries/makeSphere.ts
var _drawSpherePatch = (vertices, quality, radius, v01, v02, v03) => {
  if (quality <= 0) {
    vertices.push({
      pos: exports_vec3.scale(exports_vec3.create(), v01, radius),
      normal: exports_vec3.copy(exports_vec3.create(), v01)
    });
    vertices.push({
      pos: exports_vec3.scale(exports_vec3.create(), v03, radius),
      normal: exports_vec3.copy(exports_vec3.create(), v03)
    });
    vertices.push({
      pos: exports_vec3.scale(exports_vec3.create(), v02, radius),
      normal: exports_vec3.copy(exports_vec3.create(), v02)
    });
  } else {
    const v12 = exports_vec3.normalize(exports_vec3.create(), exports_vec3.lerp(exports_vec3.create(), v01, v02, 0.5));
    const v23 = exports_vec3.normalize(exports_vec3.create(), exports_vec3.lerp(exports_vec3.create(), v02, v03, 0.5));
    const v31 = exports_vec3.normalize(exports_vec3.create(), exports_vec3.lerp(exports_vec3.create(), v03, v01, 0.5));
    quality -= 1;
    _drawSpherePatch(vertices, quality, radius, v01, v12, v31);
    _drawSpherePatch(vertices, quality, radius, v12, v02, v23);
    _drawSpherePatch(vertices, quality, radius, v31, v23, v03);
    _drawSpherePatch(vertices, quality, radius, v12, v23, v31);
  }
};
var makeSphere = (quality, radius) => {
  const k_icx = 0.5257311121191336;
  const k_icz = 0.8506508083520399;
  const tmpVertices = [
    [-k_icx, 0, +k_icz],
    [+k_icx, 0, +k_icz],
    [-k_icx, 0, -k_icz],
    [+k_icx, 0, -k_icz],
    [0, +k_icz, +k_icx],
    [0, +k_icz, -k_icx],
    [0, -k_icz, +k_icx],
    [0, -k_icz, -k_icx],
    [+k_icz, +k_icx, 0],
    [-k_icz, +k_icx, 0],
    [+k_icz, -k_icx, 0],
    [-k_icz, -k_icx, 0]
  ];
  const tmpIndices = [
    [0, 4, 1],
    [0, 9, 4],
    [9, 5, 4],
    [4, 5, 8],
    [4, 8, 1],
    [8, 10, 1],
    [8, 3, 10],
    [5, 3, 8],
    [5, 2, 3],
    [2, 7, 3],
    [7, 10, 3],
    [7, 6, 10],
    [7, 11, 6],
    [11, 0, 6],
    [0, 1, 6],
    [6, 1, 10],
    [9, 0, 11],
    [9, 11, 2],
    [9, 2, 5],
    [7, 2, 11]
  ];
  const vertices = [];
  for (const index of tmpIndices) {
    _drawSpherePatch(vertices, quality, radius, tmpVertices[index[0]], tmpVertices[index[1]], tmpVertices[index[2]]);
  }
  return vertices;
};
// src/webgl-ray-tracer/src/experiment/utilities/Logger.ts
class Logger {
  _textAreaElement;
  _lines = [];
  _maxLines = 30;
  constructor(textAreaElementId) {
    this._textAreaElement = document.getElementById(textAreaElementId);
    if (!this._textAreaElement)
      throw new Error(`DOM elements not found, id=${textAreaElementId}`);
    this._textAreaElement.value = "";
  }
  log(...args) {
    if (args.length === 0)
      return;
    const text = Array.prototype.slice.call(args).join(" ");
    console.log(text);
    this._pushText(text);
  }
  error(...args) {
    if (args.length === 0)
      return;
    const text = Array.prototype.slice.call(args).join(" ");
    console.error(text);
    this._pushText(`[ERR] - ${text}`);
  }
  _pushText(text) {
    this._lines.push(text);
    if (this._lines.length > this._maxLines)
      this._lines.splice(0, this._lines.length - this._maxLines);
    this._textAreaElement.value = `${this._lines.join("\n")}\n`;
    this._textAreaElement.scrollTop = this._textAreaElement.scrollHeight;
  }
  peekLast() {
    if (this._lines.length > 0)
      return this._lines[this._lines.length - 1];
    return;
  }
  popLast() {
    if (this._lines.length > 0)
      this._lines.splice(this._lines.length - 1, 1);
  }
}

// node_modules/FrankenPhys/dist/bundle.js
var __awaiter = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var create$4 = function() {
  var out = new ARRAY_TYPE2(9);
  if (ARRAY_TYPE2 != Float32Array) {
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
  }
  out[0] = 1;
  out[4] = 1;
  out[8] = 1;
  return out;
};
var create$3 = function() {
  var out = new ARRAY_TYPE2(3);
  if (ARRAY_TYPE2 != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }
  return out;
};
var length5 = function(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return Math.hypot(x, y, z);
};
var fromValues$1 = function(x, y, z) {
  var out = new ARRAY_TYPE2(3);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
};
var normalize$2 = function(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var len5 = x * x + y * y + z * z;
  if (len5 > 0) {
    len5 = 1 / Math.sqrt(len5);
  }
  out[0] = a[0] * len5;
  out[1] = a[1] * len5;
  out[2] = a[2] * len5;
  return out;
};
var dot5 = function(a, b) {
  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
};
var cross4 = function(out, a, b) {
  var ax = a[0], ay = a[1], az = a[2];
  var bx = b[0], by = b[1], bz = b[2];
  out[0] = ay * bz - az * by;
  out[1] = az * bx - ax * bz;
  out[2] = ax * by - ay * bx;
  return out;
};
var create$2 = function() {
  var out = new ARRAY_TYPE2(4);
  if (ARRAY_TYPE2 != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
  }
  return out;
};
var fromValues6 = function(x, y, z, w) {
  var out = new ARRAY_TYPE2(4);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  out[3] = w;
  return out;
};
var normalize$1 = function(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var w = a[3];
  var len5 = x * x + y * y + z * z + w * w;
  if (len5 > 0) {
    len5 = 1 / Math.sqrt(len5);
  }
  out[0] = x * len5;
  out[1] = y * len5;
  out[2] = z * len5;
  out[3] = w * len5;
  return out;
};
var create$1 = function() {
  var out = new ARRAY_TYPE2(4);
  if (ARRAY_TYPE2 != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }
  out[3] = 1;
  return out;
};
var setAxisAngle2 = function(out, axis, rad) {
  rad = rad * 0.5;
  var s = Math.sin(rad);
  out[0] = s * axis[0];
  out[1] = s * axis[1];
  out[2] = s * axis[2];
  out[3] = Math.cos(rad);
  return out;
};
var slerp2 = function(out, a, b, t) {
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bx = b[0], by = b[1], bz = b[2], bw = b[3];
  var omega, cosom, sinom, scale0, scale1;
  cosom = ax * bx + ay * by + az * bz + aw * bw;
  if (cosom < 0) {
    cosom = -cosom;
    bx = -bx;
    by = -by;
    bz = -bz;
    bw = -bw;
  }
  if (1 - cosom > EPSILON2) {
    omega = Math.acos(cosom);
    sinom = Math.sin(omega);
    scale0 = Math.sin((1 - t) * omega) / sinom;
    scale1 = Math.sin(t * omega) / sinom;
  } else {
    scale0 = 1 - t;
    scale1 = t;
  }
  out[0] = scale0 * ax + scale1 * bx;
  out[1] = scale0 * ay + scale1 * by;
  out[2] = scale0 * az + scale1 * bz;
  out[3] = scale0 * aw + scale1 * bw;
  return out;
};
var fromMat32 = function(out, m) {
  var fTrace = m[0] + m[4] + m[8];
  var fRoot;
  if (fTrace > 0) {
    fRoot = Math.sqrt(fTrace + 1);
    out[3] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out[0] = (m[5] - m[7]) * fRoot;
    out[1] = (m[6] - m[2]) * fRoot;
    out[2] = (m[1] - m[3]) * fRoot;
  } else {
    var i = 0;
    if (m[4] > m[0])
      i = 1;
    if (m[8] > m[i * 3 + i])
      i = 2;
    var j = (i + 1) % 3;
    var k = (i + 2) % 3;
    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1);
    out[i] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;
    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;
    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;
  }
  return out;
};
var create7 = function() {
  var out = new ARRAY_TYPE2(2);
  if (ARRAY_TYPE2 != Float32Array) {
    out[0] = 0;
    out[1] = 0;
  }
  return out;
};
var scriptLoadingUtility = (inSrc) => {
  return new Promise((resolve, reject) => {
    const scriptElement = document.createElement("script");
    scriptElement.src = inSrc;
    scriptElement.addEventListener("load", resolve);
    scriptElement.addEventListener("error", reject);
    document.head.appendChild(scriptElement);
  });
};

class BrowserFrankenPhysWasmModule {
  static load(opts) {
    return __awaiter(this, undefined, undefined, function* () {
      yield BrowserFrankenPhysWasmModule.loadJsPart(opts.jsUrl);
      yield BrowserFrankenPhysWasmModule.loadWasmPart(opts.wasmUrl);
    });
  }
  static loadJsPart(url) {
    return __awaiter(this, undefined, undefined, function* () {
      yield scriptLoadingUtility(url);
    });
  }
  static loadWasmPart(urlPrefix) {
    return __awaiter(this, undefined, undefined, function* () {
      BrowserFrankenPhysWasmModule._wasmModule = yield FrankenPhysLoader({
        locateFile: (url) => {
          return `${urlPrefix}/${url}`;
        }
      });
    });
  }
  static get() {
    if (!this._wasmModule) {
      throw new Error("FrankenPhys wasm module not loaded");
    }
    return this._wasmModule;
  }
}

class ContactEventHandler {
  constructor() {
    this._listenersMap = new Map;
  }
  isEventListenedTo(type) {
    const listeners = this._listenersMap.get(type);
    return !!listeners && listeners.length > 0;
  }
  addEventListener(type, listener) {
    let listeners = this._listenersMap.get(type);
    if (!listeners) {
      listeners = [];
      this._listenersMap.set(type, listeners);
    }
    if (listeners.indexOf(listener) !== -1) {
      throw new Error(`duplicated event listener, type=${type}`);
    }
    listeners.push(listener);
  }
  on(type, listener) {
    this.addEventListener(type, listener);
  }
  hasEventListener(type, listener) {
    const listeners = this._listenersMap.get(type);
    return listeners !== undefined && listeners.indexOf(listener) !== -1;
  }
  removeEventListener(type, listener) {
    const listeners = this._listenersMap.get(type);
    if (listeners === undefined)
      return;
    const index = listeners.indexOf(listener);
    if (index === -1) {
      throw new Error(`unknown event listener, type=${type}`);
    }
    listeners.splice(index, 1);
  }
  dispatchEvent(event) {
    const listeners = this._listenersMap.get(event.type);
    if (listeners === undefined) {
      return;
    }
    const listenersCopy = listeners.slice(0);
    for (let ii = 0;ii < listenersCopy.length; ++ii) {
      listenersCopy[ii].call(this, event);
    }
  }
}

class WasmModuleHolder {
  static set(wasmModule) {
    return __awaiter(this, undefined, undefined, function* () {
      WasmModuleHolder._wasmModule = wasmModule;
    });
  }
  static get() {
    if (!this._wasmModule) {
      throw new Error("FrankenPhys wasm module not loaded");
    }
    return this._wasmModule;
  }
}
var EPSILON2 = 0.000001;
var ARRAY_TYPE2 = typeof Float32Array !== "undefined" ? Float32Array : Array;
if (!Math.hypot)
  Math.hypot = function() {
    var y = 0, i = arguments.length;
    while (i--) {
      y += arguments[i] * arguments[i];
    }
    return Math.sqrt(y);
  };
var len5 = length5;
(function() {
  var vec = create$3();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 3;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      vec[2] = a[i + 2];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
      a[i + 2] = vec[2];
    }
    return a;
  };
})();
(function() {
  var vec = create$2();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 4;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      vec[2] = a[i + 2];
      vec[3] = a[i + 3];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
      a[i + 2] = vec[2];
      a[i + 3] = vec[3];
    }
    return a;
  };
})();
var normalize5 = normalize$1;
(function() {
  var tmpvec3 = create$3();
  var xUnitVec3 = fromValues$1(1, 0, 0);
  var yUnitVec3 = fromValues$1(0, 1, 0);
  return function(out, a, b) {
    var dot$1 = dot5(a, b);
    if (dot$1 < -0.999999) {
      cross4(tmpvec3, xUnitVec3, a);
      if (len5(tmpvec3) < 0.000001)
        cross4(tmpvec3, yUnitVec3, a);
      normalize$2(tmpvec3, tmpvec3);
      setAxisAngle2(out, tmpvec3, Math.PI);
      return out;
    } else if (dot$1 > 0.999999) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
      out[3] = 1;
      return out;
    } else {
      cross4(tmpvec3, a, b);
      out[0] = tmpvec3[0];
      out[1] = tmpvec3[1];
      out[2] = tmpvec3[2];
      out[3] = 1 + dot$1;
      return normalize5(out, out);
    }
  };
})();
(function() {
  var temp1 = create$1();
  var temp2 = create$1();
  return function(out, a, b, c, d, t) {
    slerp2(temp1, a, d, t);
    slerp2(temp2, b, c, t);
    slerp2(out, temp1, temp2, 2 * t * (1 - t));
    return out;
  };
})();
(function() {
  var matr = create$4();
  return function(out, view, right, up) {
    matr[0] = right[0];
    matr[3] = right[1];
    matr[6] = right[2];
    matr[1] = up[0];
    matr[4] = up[1];
    matr[7] = up[2];
    matr[2] = -view[0];
    matr[5] = -view[1];
    matr[8] = -view[2];
    return normalize5(out, fromMat32(out, matr));
  };
})();
(function() {
  var vec = create7();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 2;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
    }
    return a;
  };
})();
var convexSweep = (rawDynamicsWorld, def) => {
  const bullet = WasmModuleHolder.get();
  const fromVec3 = new bullet.btVector3(def.from[0], def.from[1], def.from[2]);
  const toVec3 = new bullet.btVector3(def.to[0], def.to[1], def.to[2]);
  const fromTrsf = new bullet.btTransform;
  fromTrsf.setIdentity();
  fromTrsf.setOrigin(fromVec3);
  const toTrsf = new bullet.btTransform;
  toTrsf.setIdentity();
  toTrsf.setOrigin(toVec3);
  const result = new bullet.ClosestConvexResultCallback(fromVec3, toVec3);
  result.set_m_collisionFilterGroup(def.collisionFilterGroup);
  result.set_m_collisionFilterMask(def.collisionFilterMask);
  const shape = new bullet.btSphereShape(def.radius);
  rawDynamicsWorld.convexSweepTest(shape, fromTrsf, toTrsf, result, 0);
  if (!result.hasHit()) {
    bullet.destroy(fromVec3);
    bullet.destroy(toVec3);
    bullet.destroy(result);
    bullet.destroy(shape);
    bullet.destroy(fromTrsf);
    bullet.destroy(toTrsf);
    return;
  }
  const rawPosition = result.get_m_hitPointWorld();
  const rawNormal = result.get_m_hitNormalWorld();
  const fraction = result.get_m_closestHitFraction();
  const impact = fromValues$1(rawPosition.x(), rawPosition.y(), rawPosition.z());
  const normal = fromValues$1(rawNormal.x(), rawNormal.y(), rawNormal.z());
  bullet.destroy(rawNormal);
  bullet.destroy(rawPosition);
  bullet.destroy(fromVec3);
  bullet.destroy(toVec3);
  bullet.destroy(result);
  bullet.destroy(shape);
  bullet.destroy(fromTrsf);
  bullet.destroy(toTrsf);
  return { fraction, impact, normal };
};
var DISABLE_DEACTIVATION = 4;

class ConcretePhysicBody extends ContactEventHandler {
  constructor(def, rawShape) {
    super();
    this._isAlive = true;
    const bullet = WasmModuleHolder.get();
    this._customShape = rawShape;
    const tmpVec3 = new bullet.btVector3;
    this._customShape.shape.calculateLocalInertia(def.mass, tmpVec3);
    const motionState = null;
    const rbInfo = new bullet.btRigidBodyConstructionInfo(def.mass, motionState, this._customShape.shape, tmpVec3);
    this._rawRigidBody = new bullet.btRigidBody(rbInfo);
    this.setPositionAndRotation(def.position, def.orientation);
    bullet.destroy(tmpVec3);
    bullet.destroy(rbInfo);
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    bullet.destroy(this._rawRigidBody);
    this._customShape.cleanup();
    this._rawRigidBody = null;
    this._isAlive = false;
  }
  isAlive() {
    return this._isAlive;
  }
  setPositionAndRotation(position, rotation) {
    const bullet = WasmModuleHolder.get();
    const newPosition = new bullet.btVector3(position[0], position[1], position[2]);
    const newRotation = new bullet.btQuaternion(rotation[0], rotation[1], rotation[2], rotation[3]);
    const newTransform = new bullet.btTransform(newRotation, newPosition);
    this._rawRigidBody.setWorldTransform(newTransform);
    bullet.destroy(newTransform);
    bullet.destroy(newPosition);
    bullet.destroy(newRotation);
  }
  setPosition(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const rotation = this.getRotation();
    const newPosition = new bullet.btVector3(x, y, z);
    const newRotation = new bullet.btQuaternion(rotation[0], rotation[1], rotation[2], rotation[3]);
    const newTransform = new bullet.btTransform(newRotation, newPosition);
    this._rawRigidBody.setWorldTransform(newTransform);
    bullet.destroy(newTransform);
    bullet.destroy(newPosition);
    bullet.destroy(newRotation);
  }
  setRotation(x, y, z, w) {
    const bullet = WasmModuleHolder.get();
    const origin = this.getPosition();
    const newPosition = new bullet.btVector3(origin[0], origin[1], origin[2]);
    const newRotation = new bullet.btQuaternion(x, y, z, w);
    const newTransform = new bullet.btTransform(newRotation, newPosition);
    this._rawRigidBody.setWorldTransform(newTransform);
    bullet.destroy(newTransform);
    bullet.destroy(newPosition);
    bullet.destroy(newRotation);
  }
  getPositionAndRotation(position, rotation) {
    const bullet = WasmModuleHolder.get();
    const rawTransform = this._rawRigidBody.getWorldTransform();
    const rawOrigin = rawTransform.getOrigin();
    const rawRotation = rawTransform.getRotation();
    position[0] = rawOrigin.x();
    position[1] = rawOrigin.y();
    position[2] = rawOrigin.z();
    rotation[0] = rawRotation.x();
    rotation[1] = rawRotation.y();
    rotation[2] = rawRotation.z();
    rotation[3] = rawRotation.w();
    bullet.destroy(rawRotation);
    bullet.destroy(rawOrigin);
    bullet.destroy(rawTransform);
  }
  getPosition() {
    const bullet = WasmModuleHolder.get();
    const rawTransform = this._rawRigidBody.getWorldTransform();
    const rawOrigin = rawTransform.getOrigin();
    const origin = fromValues$1(rawOrigin.x(), rawOrigin.y(), rawOrigin.z());
    bullet.destroy(rawOrigin);
    bullet.destroy(rawTransform);
    return origin;
  }
  getRotation() {
    const bullet = WasmModuleHolder.get();
    const rawTransform = this._rawRigidBody.getWorldTransform();
    const rawRotation = rawTransform.getRotation();
    const rotation = fromValues6(rawRotation.x(), rawRotation.y(), rawRotation.z(), rawRotation.w());
    bullet.destroy(rawRotation);
    bullet.destroy(rawTransform);
    return rotation;
  }
  getLinearVelocity() {
    const bullet = WasmModuleHolder.get();
    const vel = this._rawRigidBody.getLinearVelocity();
    const value = fromValues$1(vel.x(), vel.y(), vel.z());
    bullet.destroy(vel);
    return value;
  }
  getAngularVelocity() {
    const bullet = WasmModuleHolder.get();
    const vel = this._rawRigidBody.getAngularVelocity();
    const value = fromValues$1(vel.x(), vel.y(), vel.z());
    bullet.destroy(vel);
    return value;
  }
  setLinearVelocity(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setLinearVelocity(newVel);
    bullet.destroy(newVel);
  }
  setAngularVelocity(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setAngularVelocity(newVel);
    bullet.destroy(newVel);
  }
  setLinearFactor(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setLinearFactor(newVel);
    bullet.destroy(newVel);
  }
  setAngularFactor(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setAngularFactor(newVel);
    bullet.destroy(newVel);
  }
  applyCentralForce(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.applyCentralForce(newVel);
    bullet.destroy(newVel);
  }
  applyCentralImpulse(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.applyCentralImpulse(newVel);
    bullet.destroy(newVel);
  }
  setDamping(linear, angular = 0) {
    this._rawRigidBody.setDamping(linear, angular);
  }
  setCcdMotionThreshold(ccdMotionThreshold) {
    this._rawRigidBody.setCcdMotionThreshold(ccdMotionThreshold);
  }
  setCcdSweptSphereRadius(radius) {
    this._rawRigidBody.setCcdSweptSphereRadius(radius);
  }
  setRestitution(restitution) {
    this._rawRigidBody.setRestitution(restitution);
  }
  setFriction(friction) {
    this._rawRigidBody.setFriction(friction);
  }
  setRollingFriction(friction) {
    this._rawRigidBody.setRollingFriction(friction);
  }
  setGravity(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setGravity(newVel);
    bullet.destroy(newVel);
  }
  isStaticObject() {
    return this._rawRigidBody.isStaticObject();
  }
  isKinematicObject() {
    return this._rawRigidBody.isKinematicObject();
  }
  isStaticOrKinematicObject() {
    return this._rawRigidBody.isStaticOrKinematicObject();
  }
  isActive() {
    return this.isStaticOrKinematicObject() || this._rawRigidBody.isActive();
  }
  enableDeactivation() {
    this._rawRigidBody.activate(true);
  }
  disableDeactivation() {
    this._rawRigidBody.setActivationState(DISABLE_DEACTIVATION);
  }
  cannotDeactivate() {
    return this.isStaticOrKinematicObject() || this._rawRigidBody.getActivationState() == DISABLE_DEACTIVATION;
  }
  canDeactivate() {
    return !this.cannotDeactivate();
  }
}

class ConcretePhysicVehicle {
  constructor(rawDynamicsWorld, chassisBody, def) {
    const bullet = WasmModuleHolder.get();
    this._chassisBody = chassisBody;
    this._vehicleTuning = new bullet.btVehicleTuning;
    this._defaultVehicleRaycaster = new bullet.btDefaultVehicleRaycaster(rawDynamicsWorld);
    this._rawVehicle = new bullet.btRaycastVehicle(this._vehicleTuning, chassisBody._rawRigidBody, this._defaultVehicleRaycaster);
    this._rawVehicle.setCoordinateSystem(def.coordinateSystem[0], def.coordinateSystem[1], def.coordinateSystem[2]);
    const groundDirection = new bullet.btVector3(def.groundDirection[0], def.groundDirection[1], def.groundDirection[2]);
    const rotationAxis = new bullet.btVector3(def.rotationAxis[0], def.rotationAxis[1], def.rotationAxis[2]);
    const connectionPoint = new bullet.btVector3;
    for (let ii = 0;ii < def.wheels.length; ++ii) {
      const current = def.wheels[ii];
      connectionPoint.setValue(current.connectionPoint[0], current.connectionPoint[1], current.connectionPoint[2]);
      const wheelInfo = this._rawVehicle.addWheel(connectionPoint, groundDirection, rotationAxis, def.suspensionRestLength, def.wheelRadius, this._vehicleTuning, current.isFrontWheel);
      wheelInfo.set_m_suspensionStiffness(def.suspensionStiffness);
      wheelInfo.set_m_wheelsDampingRelaxation(def.wheelsDampingRelaxation);
      wheelInfo.set_m_wheelsDampingCompression(def.wheelsDampingCompression);
      wheelInfo.set_m_frictionSlip(def.wheelFriction);
      wheelInfo.set_m_rollInfluence(def.rollInfluence);
    }
    bullet.destroy(connectionPoint);
    bullet.destroy(groundDirection);
    bullet.destroy(rotationAxis);
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    bullet.destroy(this._rawVehicle);
    bullet.destroy(this._defaultVehicleRaycaster);
    bullet.destroy(this._vehicleTuning);
  }
  getChassisBody() {
    return this._chassisBody;
  }
  setSteeringValue(index, angle3) {
    this._rawVehicle.setSteeringValue(angle3, index);
  }
  applyEngineForce(index, force) {
    this._rawVehicle.applyEngineForce(force, index);
  }
  setBrake(index, force) {
    this._rawVehicle.setBrake(force, index);
  }
  getWheeTransforms() {
    const bullet = WasmModuleHolder.get();
    const allTransforms = [];
    const interpolatedTransform = true;
    const numWheels = this._rawVehicle.getNumWheels();
    for (let ii = 0;ii < numWheels; ++ii) {
      this._rawVehicle.updateWheelTransform(ii, interpolatedTransform);
      const rawTransform = this._rawVehicle.getWheelTransformWS(ii);
      const rawOrigin = rawTransform.getOrigin();
      const rawRotation = rawTransform.getRotation();
      allTransforms.push({
        position: fromValues$1(rawOrigin.x(), rawOrigin.y(), rawOrigin.z()),
        rotation: fromValues6(rawRotation.x(), rawRotation.y(), rawRotation.z(), rawRotation.w())
      });
      bullet.destroy(rawRotation);
      bullet.destroy(rawOrigin);
      bullet.destroy(rawTransform);
    }
    return allTransforms;
  }
}

class ConcreteGeneric6DofConstraint {
  constructor(def) {
    this._bodyA = def.bodyA;
    this._bodyB = def.bodyB;
    const bullet = WasmModuleHolder.get();
    const rawRigidBodyA = def.bodyA._rawRigidBody;
    const rawRigidBodyB = def.bodyB._rawRigidBody;
    const newRotation = new bullet.btQuaternion(0, 0, 1, 0);
    const newPositionA = new bullet.btVector3(def.frameA[0], def.frameA[1], def.frameA[2]);
    const newTransformA = new bullet.btTransform(newRotation, newPositionA);
    const newPositionB = new bullet.btVector3(def.frameB[0], def.frameB[1], def.frameB[2]);
    const newTransformB = new bullet.btTransform(newRotation, newPositionB);
    this._rawConstraint = new bullet.btGeneric6DofSpringConstraint(rawRigidBodyA, rawRigidBodyB, newTransformA, newTransformB, def.useReferenceFrameA);
    this._rawConstraint.enableSpring(0, false);
    this._rawConstraint.enableSpring(1, false);
    this._rawConstraint.enableSpring(2, false);
    this._rawConstraint.setStiffness(0, 1);
    this._rawConstraint.setStiffness(1, 1);
    this._rawConstraint.setStiffness(2, 1);
    this._rawConstraint.setDamping(0, 1);
    this._rawConstraint.setDamping(1, 1);
    this._rawConstraint.setDamping(2, 1);
    bullet.destroy(newTransformA);
    bullet.destroy(newTransformB);
    bullet.destroy(newPositionA);
    bullet.destroy(newPositionB);
    bullet.destroy(newRotation);
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    bullet.destroy(this._rawConstraint);
  }
  setLinearLowerLimit(val) {
    const bullet = WasmModuleHolder.get();
    const newVal = new bullet.btVector3(val[0], val[1], val[2]);
    this._rawConstraint.setLinearLowerLimit(newVal);
    bullet.destroy(newVal);
  }
  setLinearUpperLimit(val) {
    const bullet = WasmModuleHolder.get();
    const newVal = new bullet.btVector3(val[0], val[1], val[2]);
    this._rawConstraint.setLinearUpperLimit(newVal);
    bullet.destroy(newVal);
  }
  setAngularLowerLimit(val) {
    const bullet = WasmModuleHolder.get();
    const newVal = new bullet.btVector3(val[0], val[1], val[2]);
    this._rawConstraint.setAngularLowerLimit(newVal);
    bullet.destroy(newVal);
  }
  setAngularUpperLimit(val) {
    const bullet = WasmModuleHolder.get();
    const newVal = new bullet.btVector3(val[0], val[1], val[2]);
    this._rawConstraint.setAngularUpperLimit(newVal);
    bullet.destroy(newVal);
  }
}

class ConcreteHingeConstraint {
  constructor(def) {
    this._bodyA = def.bodyA;
    this._bodyB = def.bodyB;
    const bullet = WasmModuleHolder.get();
    const rawRigidBodyA = def.bodyA._rawRigidBody;
    const rawRigidBodyB = def.bodyB._rawRigidBody;
    const pivotInA = new bullet.btVector3(def.pivotInA[0], def.pivotInA[1], def.pivotInA[2]);
    const pivotInB = new bullet.btVector3(def.pivotInB[0], def.pivotInB[1], def.pivotInB[2]);
    const axisInA = new bullet.btVector3(def.axisInA[0], def.axisInA[1], def.axisInA[2]);
    const axisInB = new bullet.btVector3(def.axisInB[0], def.axisInB[1], def.axisInB[2]);
    this._rawConstraint = new bullet.btHingeConstraint(rawRigidBodyA, rawRigidBodyB, pivotInA, pivotInB, axisInA, axisInB, def.useReferenceFrameA);
    bullet.destroy(pivotInA);
    bullet.destroy(pivotInB);
    bullet.destroy(axisInA);
    bullet.destroy(axisInB);
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    bullet.destroy(this._rawConstraint);
  }
  setLimit(low, high, softness, biasFactor, relaxationFactor) {
    this._rawConstraint.setLimit(low, high, softness, biasFactor, relaxationFactor);
  }
  enableAngularMotor(enableMotor, targetVelocity, maxMotorImpulse) {
    this._rawConstraint.enableAngularMotor(enableMotor, targetVelocity, maxMotorImpulse);
  }
  enableMotor(enableMotor) {
    this._rawConstraint.enableMotor(enableMotor);
  }
  setMaxMotorImpulse(maxMotorImpulse) {
    this._rawConstraint.setMaxMotorImpulse(maxMotorImpulse);
  }
  setMotorTarget(targetAngle, dt) {
    this._rawConstraint.setMotorTarget(targetAngle, dt);
  }
}
var rayCast = (rawDynamicsWorld, bodyMap, def) => {
  const bullet = WasmModuleHolder.get();
  const fromVec3 = new bullet.btVector3(def.from[0], def.from[1], def.from[2]);
  const toVec3 = new bullet.btVector3(def.to[0], def.to[1], def.to[2]);
  const result = new bullet.ClosestRayResultCallback(fromVec3, toVec3);
  result.set_m_collisionFilterGroup(def.collisionFilterGroup);
  result.set_m_collisionFilterMask(def.collisionFilterMask);
  rawDynamicsWorld.rayTest(fromVec3, toVec3, result);
  if (!result.hasHit()) {
    bullet.destroy(fromVec3);
    bullet.destroy(toVec3);
    bullet.destroy(result);
    return;
  }
  const object = bodyMap.get(result.get_m_collisionObject().ptr);
  if (!object) {
    bullet.destroy(fromVec3);
    bullet.destroy(toVec3);
    bullet.destroy(result);
    return;
  }
  const rawNormal = result.get_m_hitNormalWorld();
  const rawPosition = result.get_m_hitPointWorld();
  const impact = fromValues$1(rawPosition.x(), rawPosition.y(), rawPosition.z());
  const normal = fromValues$1(rawNormal.x(), rawNormal.y(), rawNormal.z());
  bullet.destroy(rawNormal);
  bullet.destroy(rawPosition);
  bullet.destroy(fromVec3);
  bullet.destroy(toVec3);
  bullet.destroy(result);
  return {
    object,
    fraction: result.get_m_closestHitFraction(),
    impact,
    normal
  };
};

class PhysicWorld extends ContactEventHandler {
  constructor() {
    super();
    this._bodyMap = new Map;
    this._vehicleMap = new Map;
    this._constraintMap = new Map;
    this._allConstraints = [];
    this._constraintMap2 = new Map;
    this._allConstraints2 = [];
    const bullet = WasmModuleHolder.get();
    this._collisionConf = new bullet.btDefaultCollisionConfiguration;
    this._dispatcher = new bullet.btCollisionDispatcher(this._collisionConf);
    this._broadPhase = new bullet.btDbvtBroadphase;
    this._solver = new bullet.btSequentialImpulseConstraintSolver;
    this._rawDynamicsWorld = new bullet.btjsDynamicsWorld(this._dispatcher, this._broadPhase, this._solver, this._collisionConf);
    this._rawDynamicsWorld.setGravity(new bullet.btVector3(0, 0, -10));
    this._initCollisionEvents();
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    this._allConstraints.forEach((currConstraint) => currConstraint.dispose());
    this._allConstraints.length = 0;
    this._constraintMap.clear();
    this._allConstraints2.forEach((currConstraint) => currConstraint.dispose());
    this._allConstraints2.length = 0;
    this._constraintMap2.clear();
    [...this._vehicleMap.values()].forEach((currVehicle) => currVehicle.dispose());
    this._vehicleMap.clear();
    [...this._bodyMap.values()].forEach((currBody) => currBody.dispose());
    this._bodyMap.clear();
    bullet.destroy(this._rawDynamicsWorld);
    bullet.destroy(this._solver);
    bullet.destroy(this._broadPhase);
    bullet.destroy(this._dispatcher);
    bullet.destroy(this._collisionConf);
  }
  createRigidBody(def) {
    const newShape = this._getShape(def.shape, def.mass > 0);
    const newBody = new ConcretePhysicBody(def, newShape);
    this._rawDynamicsWorld.addRigidBody(newBody._rawRigidBody, -1, -1);
    this._bodyMap.set(newBody._rawRigidBody.ptr, newBody);
    return newBody;
  }
  _getShape(def, isDynamic) {
    const bullet = WasmModuleHolder.get();
    switch (def.type) {
      case "box": {
        const boxHalfExtent = new bullet.btVector3;
        boxHalfExtent.setValue(def.size[0] * 0.5, def.size[1] * 0.5, def.size[2] * 0.5);
        const rawShape = new bullet.btBoxShape(boxHalfExtent);
        bullet.destroy(boxHalfExtent);
        return {
          shape: rawShape,
          cleanup: () => bullet.destroy(rawShape)
        };
      }
      case "sphere": {
        const rawShape = new bullet.btSphereShape(def.radius);
        return {
          shape: rawShape,
          cleanup: () => bullet.destroy(rawShape)
        };
      }
      case "cylinder": {
        const bVec = new bullet.btVector3(def.radius, def.radius, def.length);
        const rawShape = new bullet.btCylinderShape(bVec);
        return {
          shape: rawShape,
          cleanup: () => {
            bullet.destroy(rawShape);
            bullet.destroy(bVec);
          }
        };
      }
      case "capsule": {
        const rawShape = new bullet.btCapsuleShape(def.radius, def.length);
        return {
          shape: rawShape,
          cleanup: () => bullet.destroy(rawShape)
        };
      }
      case "mesh": {
        const triangleMesh = new bullet.btTriangleMesh;
        const bVec1 = new bullet.btVector3;
        const bVec2 = new bullet.btVector3;
        const bVec3 = new bullet.btVector3;
        def.triangles.forEach(([vec1, vec2, vec3]) => {
          bVec1.setValue(vec1[0], vec1[1], vec1[2]);
          bVec2.setValue(vec2[0], vec2[1], vec2[2]);
          bVec3.setValue(vec3[0], vec3[1], vec3[2]);
          triangleMesh.addTriangle(bVec1, bVec2, bVec3);
        });
        bullet.destroy(bVec1);
        bullet.destroy(bVec2);
        bullet.destroy(bVec3);
        if (isDynamic) {
          const meshShape = new bullet.btGImpactMeshShape(triangleMesh);
          const rawShape2 = this._rawDynamicsWorld.createCompoundFromGimpactShape(meshShape, 0);
          return {
            shape: rawShape2,
            cleanup: () => {
              bullet.destroy(rawShape2);
              bullet.destroy(meshShape);
              bullet.destroy(triangleMesh);
            }
          };
        }
        const rawShape = new bullet.btBvhTriangleMeshShape(triangleMesh, true);
        return {
          shape: rawShape,
          cleanup: () => {
            bullet.destroy(rawShape);
            bullet.destroy(triangleMesh);
          }
        };
      }
      case "compound": {
        const rawCompound = new bullet.btCompoundShape;
        const allRawShapes = [];
        const localVec3 = new bullet.btVector3;
        const localQuat = new bullet.btQuaternion(0, 0, 1, 0);
        const localTransform = new bullet.btTransform;
        for (const { shape, position, orientation } of def.shapes) {
          const rawValues = this._getShape(shape, isDynamic);
          allRawShapes.push(rawValues);
          localVec3.setValue(position[0], position[1], position[2]);
          localQuat.setValue(orientation[0], orientation[1], orientation[2], orientation[3]);
          localTransform.setOrigin(localVec3);
          localTransform.setRotation(localQuat);
          rawCompound.addChildShape(localTransform, rawValues.shape);
        }
        bullet.destroy(localVec3);
        bullet.destroy(localQuat);
        bullet.destroy(localTransform);
        return {
          shape: rawCompound,
          cleanup: () => {
            bullet.destroy(rawCompound);
            for (const currRawShape of allRawShapes) {
              bullet.destroy(currRawShape);
            }
          }
        };
      }
    }
  }
  destroyRigidBody(rigidBody) {
    const rawRigidBody = rigidBody._rawRigidBody;
    const bodyPtr = rawRigidBody.ptr;
    this._rawDynamicsWorld.removeRigidBody(rawRigidBody);
    this._bodyMap.delete(bodyPtr);
    rigidBody.dispose();
    const bodyListOfConstraints = this._constraintMap.get(bodyPtr);
    if (bodyListOfConstraints) {
      for (const currConstraint of bodyListOfConstraints) {
        this.destroyGeneric6DofConstraint(currConstraint);
      }
    }
    const bodyListOfConstraints2 = this._constraintMap2.get(bodyPtr);
    if (bodyListOfConstraints2) {
      for (const currConstraint of bodyListOfConstraints2) {
        this.destroyHingeConstraint(currConstraint);
      }
    }
  }
  createVehicle(def) {
    const newBody = this.createRigidBody(def.chassisDef);
    const rawRigidBody = newBody;
    const vehicle = new ConcretePhysicVehicle(this._rawDynamicsWorld, rawRigidBody, def);
    this._rawDynamicsWorld.addAction(vehicle._rawVehicle);
    this._vehicleMap.set(vehicle.ptr, vehicle);
    return vehicle;
  }
  destroyVehicle(vehicle) {
    this.destroyRigidBody(vehicle._chassisBody);
    this._rawDynamicsWorld.removeAction(vehicle._rawVehicle);
    this._vehicleMap.delete(vehicle.ptr);
    vehicle.dispose();
  }
  createGeneric6DofConstraint(def) {
    const constraint = new ConcreteGeneric6DofConstraint(def);
    const ptrA = def.bodyA._rawRigidBody.ptr;
    let bodyListA = this._constraintMap.get(ptrA);
    if (!bodyListA) {
      bodyListA = [];
      this._constraintMap.set(ptrA, bodyListA);
    }
    bodyListA.push(constraint);
    const ptrB = def.bodyB._rawRigidBody.ptr;
    let bodyListB = this._constraintMap.get(ptrB);
    if (!bodyListB) {
      bodyListB = [];
      this._constraintMap.set(ptrA, bodyListB);
    }
    bodyListB.push(constraint);
    this._allConstraints.push(constraint);
    this._rawDynamicsWorld.addConstraint(constraint._rawConstraint, true);
    return constraint;
  }
  destroyGeneric6DofConstraint(constraint) {
    const concrete = constraint;
    this._rawDynamicsWorld.removeConstraint(concrete._rawConstraint);
    const bodyListA = this._constraintMap.get(concrete._bodyA._rawRigidBody.ptr);
    if (bodyListA) {
      const index2 = bodyListA.indexOf(concrete);
      if (index2 >= 0) {
        bodyListA.splice(index2, 0);
      }
    }
    const bodyListB = this._constraintMap.get(concrete._bodyB._rawRigidBody.ptr);
    if (bodyListB) {
      const index2 = bodyListB.indexOf(concrete);
      if (index2 >= 0) {
        bodyListB.splice(index2, 0);
      }
    }
    const index = this._allConstraints.indexOf(concrete);
    if (index >= 0) {
      this._allConstraints.splice(index, 0);
    }
    concrete.dispose();
  }
  createHingeConstraint(def) {
    const constraint = new ConcreteHingeConstraint(def);
    const ptrA = def.bodyA._rawRigidBody.ptr;
    let bodyListA = this._constraintMap2.get(ptrA);
    if (!bodyListA) {
      bodyListA = [];
      this._constraintMap2.set(ptrA, bodyListA);
    }
    bodyListA.push(constraint);
    const ptrB = def.bodyB._rawRigidBody.ptr;
    let bodyListB = this._constraintMap2.get(ptrB);
    if (!bodyListB) {
      bodyListB = [];
      this._constraintMap2.set(ptrA, bodyListB);
    }
    bodyListB.push(constraint);
    this._allConstraints2.push(constraint);
    this._rawDynamicsWorld.addConstraint(constraint._rawConstraint, true);
    return constraint;
  }
  destroyHingeConstraint(constraint) {
    const concrete = constraint;
    this._rawDynamicsWorld.removeConstraint(concrete._rawConstraint);
    const bodyListA = this._constraintMap2.get(concrete._bodyA._rawRigidBody.ptr);
    if (bodyListA) {
      const index2 = bodyListA.indexOf(concrete);
      if (index2 >= 0) {
        bodyListA.splice(index2, 0);
      }
    }
    const bodyListB = this._constraintMap2.get(concrete._bodyB._rawRigidBody.ptr);
    if (bodyListB) {
      const index2 = bodyListB.indexOf(concrete);
      if (index2 >= 0) {
        bodyListB.splice(index2, 0);
      }
    }
    const index = this._allConstraints2.indexOf(concrete);
    if (index >= 0) {
      this._allConstraints2.splice(index, 0);
    }
    concrete.dispose();
  }
  rayCast(from, to) {
    return rayCast(this._rawDynamicsWorld, this._bodyMap, {
      from,
      to,
      collisionFilterGroup: -1,
      collisionFilterMask: -1
    });
  }
  convexSweep(from, to, radius) {
    return convexSweep(this._rawDynamicsWorld, {
      from,
      to,
      collisionFilterGroup: -1,
      collisionFilterMask: -1,
      radius
    });
  }
  _initCollisionEvents() {
    const eventFlags = {
      world: 1 << 0,
      bodyA: 1 << 1,
      bodyB: 1 << 2
    };
    const _onContactChange = (event) => {
      const bodyA = event.data.getBodyA();
      const bodyB = event.data.getBodyB();
      const rigidBodyA = this._bodyMap.get(bodyA.ptr);
      const rigidBodyB = this._bodyMap.get(bodyB.ptr);
      if (!rigidBodyA || !rigidBodyB) {
        return;
      }
      const type = event.type;
      const collisionFlag = (this.isEventListenedTo(type) ? eventFlags.world : 0) | (rigidBodyA.isEventListenedTo(type) ? eventFlags.bodyA : 0) | (rigidBodyB.isEventListenedTo(type) ? eventFlags.bodyB : 0);
      if (collisionFlag == 0) {
        return;
      }
      const contactId = event.data.getId();
      const bulletPos = event.data.getPosition();
      const bulletNormalB = event.data.getNormalB();
      const position = {
        x: bulletPos.x(),
        y: bulletPos.y(),
        z: bulletPos.z()
      };
      const normalB = {
        x: bulletNormalB.x(),
        y: bulletNormalB.y(),
        z: bulletNormalB.z()
      };
      if (collisionFlag & eventFlags.world) {
        this.dispatchEvent({
          type,
          data: {
            contactId,
            rigidBodyA,
            rigidBodyB,
            position: fromValues$1(position.x, position.y, position.z),
            normalB: fromValues$1(normalB.x, normalB.y, normalB.z)
          }
        });
      }
      if (collisionFlag & eventFlags.bodyA) {
        rigidBodyA.dispatchEvent({
          type,
          data: {
            contactId,
            other: rigidBodyB,
            position: fromValues$1(position.x, position.y, position.z),
            normalB: fromValues$1(-normalB.x, -normalB.y, -normalB.z)
          }
        });
      }
      if (collisionFlag & eventFlags.bodyB) {
        rigidBodyB.dispatchEvent({
          type,
          data: {
            contactId,
            other: rigidBodyA,
            position: fromValues$1(position.x, position.y, position.z),
            normalB: fromValues$1(normalB.x, normalB.y, normalB.z)
          }
        });
      }
    };
    const bullet = WasmModuleHolder.get();
    bullet.on("beginContact", _onContactChange);
    bullet.on("updateContact", _onContactChange);
    bullet.on("endContact", _onContactChange);
    bullet.on("ccdContact", _onContactChange);
    bullet.listenToContactCallbacks();
  }
  stepSimulation(deltaTimeSec, maxSubSteps = 3, fixedStep = 1 / 60) {
    this._rawDynamicsWorld.stepSimulation(deltaTimeSec, maxSubSteps, fixedStep);
  }
  setGravity(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawDynamicsWorld.setGravity(newVel);
    bullet.destroy(newVel);
  }
  setDebugWireframeCallback(callback) {
    const bullet = WasmModuleHolder.get();
    const contactPtr = bullet.addFunction(callback, "vfffffffff");
    this._rawDynamicsWorld.setDebugWireframeCallback(contactPtr);
  }
  setDebugWireframeFeaturesFlag(flag) {
    this._rawDynamicsWorld.setDebugWireframeFeaturesFlag(flag);
  }
  debugDrawWorld() {
    this._rawDynamicsWorld.debugDrawWorld();
  }
}
var DebugDrawFlags;
(function(DebugDrawFlags2) {
  DebugDrawFlags2[DebugDrawFlags2["DBG_NoDebug"] = 0] = "DBG_NoDebug";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawWireframe"] = 1] = "DBG_DrawWireframe";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawAabb"] = 2] = "DBG_DrawAabb";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawFeaturesText"] = 4] = "DBG_DrawFeaturesText";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawContactPoints"] = 8] = "DBG_DrawContactPoints";
  DebugDrawFlags2[DebugDrawFlags2["DBG_NoDeactivation"] = 16] = "DBG_NoDeactivation";
  DebugDrawFlags2[DebugDrawFlags2["DBG_NoHelpText"] = 32] = "DBG_NoHelpText";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawText"] = 64] = "DBG_DrawText";
  DebugDrawFlags2[DebugDrawFlags2["DBG_ProfileTimings"] = 128] = "DBG_ProfileTimings";
  DebugDrawFlags2[DebugDrawFlags2["DBG_EnableSatComparison"] = 256] = "DBG_EnableSatComparison";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DisableBulletLCP"] = 512] = "DBG_DisableBulletLCP";
  DebugDrawFlags2[DebugDrawFlags2["DBG_EnableCCD"] = 1024] = "DBG_EnableCCD";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawConstraints"] = 2048] = "DBG_DrawConstraints";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawConstraintLimits"] = 4096] = "DBG_DrawConstraintLimits";
  DebugDrawFlags2[DebugDrawFlags2["DBG_FastWireframe"] = 8192] = "DBG_FastWireframe";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawNormals"] = 16384] = "DBG_DrawNormals";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawFrames"] = 32768] = "DBG_DrawFrames";
})(DebugDrawFlags || (DebugDrawFlags = {}));
var index = Object.freeze({
  __proto__: null,
  ConcretePhysicBody,
  ConcretePhysicVehicle,
  ContactEventHandler,
  get DebugDrawFlags() {
    return DebugDrawFlags;
  },
  PhysicWorld,
  WasmModuleHolder,
  convexSweep,
  rayCast
});
var $BrowserFrankenPhysWasmModule = BrowserFrankenPhysWasmModule;
var $physics = index;

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/ray-tracer.glsl.vert
var ray_tracer_glsl_default = `
#version 300 es

precision highp float;

in vec2 a_vertexPosition;
in vec3 a_plotPosition;

out vec3 v_position;

void main(void)
{
  gl_Position = vec4(a_vertexPosition, 1.0, 1.0);

  v_position = a_plotPosition;
}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/ray-tracer.glsl.frag
var ray_tracer_glsl_default2 = `
#version 300 es

precision highp int;
precision highp float;

//
//
//

// #define D_SIMPLIFIED

// Indices of refractionFactor
const float Air = 1.0;
const float Glass = 1.51714;

// Air to glass ratio of the indices of refractionFactor (Eta)
const float Eta = Air / Glass;

// see http://en.wikipedia.org/wiki/Refractive_index Reflectivity
const float R0 = ((Air - Glass) * (Air - Glass)) / ((Air + Glass) * (Air + Glass));

//
//
//

uniform vec3        u_cameraEye;

//

uniform highp sampler2D   u_sceneTextureData;
uniform int         u_sceneTextureSize;

uniform highp sampler2D   u_materialsTextureData;

uniform int       u_totalShapes;

//

uniform highp sampler2D   u_lightsTextureData;

uniform int       u_sunLightsStop;
uniform int       u_spotLightsStop;

//

uniform highp sampler2D   u_bvhDataTexture;

//
//
//

in vec3  v_position;

out vec4 o_color;

//

const float     g_ambiantLight = 0.15;

const vec3      g_backgroundColor = vec3(0.1);

//

struct RayValues
{
  vec3 origin;
  vec3 direction;
};

struct RayResult
{
  bool hasHit;
  float distance;
  vec3 position;
  vec3 normal;
  vec4 color;
  float reflectionFactor;
  float refractionFactor;
  bool lightEnabled;
};


struct StackData
{
  // int parentIndex;
  bool used;
  RayValues ray;
  RayResult result;
  int reflectionIndex;
  int refractionIndex;
};

//
//
//
//
//

vec3 apply_quat_to_vec3(vec3 position, vec4 q)
{
  vec3 v = position.xyz;
  return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
}
mat3 quat_to_mat3(vec4 q)
{

  // multiply by sqrt(2) to get rid of all the 2.0 factors in the matrix
  q *= 1.414214;

  float xx = q.x * q.x;
  float xy = q.x * q.y;
  float xz = q.x * q.z;
  float xw = q.x * q.w;

  float yy = q.y * q.y;
  float yz = q.y * q.z;
  float yw = q.y * q.w;

  float zz = q.z * q.z;
  float zw = q.z * q.w;

  return mat3(
    1.0 - yy - zz,
    xy + zw,
    xz - yw,

    xy - zw,
    1.0 - xx - zz,
    yz + xw,

    xz + yw,
    yz - xw,
    1.0 - xx - yy
  );
}
//
//
//
//
//

bool intersectSphere(RayValues ray, float radius, out float outDistance, out vec3 normal)
{
  float nearValue = 0.001; // TODO: hardcoded
  float farValue = 100.0; // TODO: hardcoded

  float b = dot(ray.origin, ray.direction);
  float c = dot(ray.origin, ray.origin) - radius * radius;
  float h = b * b - c;
  if (h < 0.0) {
    return false;
  }

  h = sqrt(h);

  float d1 = -b - h;
  if (d1 >= nearValue && d1 <= farValue)
  {
    normal = normalize(ray.origin + ray.direction * d1);
    outDistance = d1;
    return true;
  }

  float d2 = -b + h;
  if (d2 >= nearValue && d2 <= farValue)
  {
    normal = normalize(ray.origin + ray.direction * d2);
    outDistance = d2;
    return true;
  }

  return false;
}

bool intersectBox(RayValues ray, vec3 boxSize, out float outDistance, out vec3 normal)
{
  float nearValue = 0.001; // TODO: hardcoded
  float farValue = 100.0; // TODO: hardcoded

  //
  //
  // sad hack: fix a shadow related bug

  // if (ray.origin.x == 0.0) ray.origin.x = -1e-8;
  // if (ray.origin.y == 0.0) ray.origin.y = -1e-8;
  // if (ray.origin.z == 0.0) ray.origin.z = -1e-8;

  if (ray.direction.x == 0.0) ray.direction.x = -1e-8;
  if (ray.direction.y == 0.0) ray.direction.y = -1e-8;
  if (ray.direction.z == 0.0) ray.direction.z = -1e-8;

  // sad hack: fix a shadow related bug
  //
  //

  vec3 m = sign(ray.direction) / max(abs(ray.direction), 1e-8);
  vec3 n = m * ray.origin;
  vec3 k = abs(m) * boxSize;

  vec3 t1 = -n - k;
  vec3 t2 = -n + k;

  float tN = max(max(t1.x, t1.y), t1.z);
  float tF = min(min(t2.x, t2.y), t2.z);

  if (tN > tF || tF <= 0.0) {
    return false;
  }

  if (tN >= nearValue && tN <= farValue)
  {
    normal = normalize(-sign(ray.direction) * step(t1.yzx, t1.xyz) * step(t1.zxy, t1.xyz));
    outDistance = tN;
    return true;
  }

  if (tF >= nearValue && tF <= farValue)
  {
    normal = normalize(-sign(ray.direction) * step(t1.yzx, t1.xyz) * step(t1.zxy, t1.xyz));
    outDistance = tF;
    return true;
  }

  return false;
}

bool intersectTriangle(RayValues ray, vec3 v0, vec3 v1, vec3 v2, out float outDistance, out vec3 normal)
{
  float nearValue = 0.001; // TODO: hardcoded
  float farValue = 100.0; // TODO: hardcoded

  vec3 v1v0 = v1 - v0;
  vec3 v2v0 = v2 - v0;
  vec3 rov0 = ray.origin - v0;

  vec3 n = cross(v1v0, v2v0);
  vec3 q = cross(rov0, ray.direction);
  float d = 1.0 / dot(ray.direction, n);
  float u = d * dot(-q, v2v0);
  float v = d * dot(q, v1v0);
  float t = d * dot(-n, rov0);

  if (u < 0.0 || v < 0.0 || (u + v) > 1.0 || t < nearValue || t > farValue) {
    return false;
  }

  normal = normalize(-n);
  outDistance = t;
  return true;
}

// float intersectPlane(RayValues ray, vec3 normal, float offset)
// {
//     return -(dot(ray.origin, normal) + offset) / dot(ray.direction, normal);
// }

// float intersectPlane2(RayValues ray, vec3 normal, float offset)
// {
//     float nearValue = 0.001; // TODO: hardcoded
//     float farValue = 1000.0; // TODO: hardcoded

//     float a = dot(ray.direction, normal);
//     float d = -(dot(ray.origin, normal) + offset) / a;

//     if (a > 0.0 || d < nearValue || d > farValue)
//         return -1.0;

//     return d;
// }

// float diskIntersect(RayValues ray, vec3 center, vec3 normal, float radius)
// {
//     vec3  o = ray.origin - center;
//     float t = -dot(normal, o) / dot(ray.direction, normal);
//     vec3  q = o + ray.direction * t;
//     return (dot(q, q) < radius * radius) ? t : -1.0;
// }

//
//
//
//
//


void intersectSceneOneShape(int index, RayValues ray, inout RayResult outBestResult, bool shadowMode)
{
  RayValues tmpRay;
  vec3 normal;

  vec4 shTexel0 = texelFetch(u_sceneTextureData, ivec2(index + 0, 0), 0);

  int materialIndex = int(shTexel0.g);
  vec4 matTexel1 = texelFetch(u_materialsTextureData, ivec2(materialIndex * 2 + 1, 0), 0);

  bool castShadow = (matTexel1.g != 0.0);

  if (shadowMode && !castShadow) {
    return; // this sphere does not cast a shadow
  }

  vec4 shTexel1 = texelFetch(u_sceneTextureData, ivec2(index + 1, 0), 0);
  vec4 shTexel2 = texelFetch(u_sceneTextureData, ivec2(index + 2, 0), 0);

  int shapeType = int(shTexel0.r);

  switch (shapeType) {
    case 1: {

      vec3 center = vec3(shTexel0.b, shTexel0.a, shTexel1.r);

      float radius = shTexel2.g;

#ifdef D_SIMPLIFIED
      float refractionFactor = 0.0;
#else
      float refractionFactor = matTexel1.r;
      if (refractionFactor > 0.0)
      {
        // [refraction logic] -> primary ray

        tmpRay.origin = ray.origin - center;
        tmpRay.direction = ray.direction;

        float currDistance1 = 0.0;
        if (
          !intersectSphere(tmpRay, radius, currDistance1, normal) ||
          (outBestResult.distance > 0.0 && currDistance1 > outBestResult.distance)
        ) {
          return;
        }

        // [refraction logic] -> secondary ray -> inside the sphere

        // here we use 1.01 as coef for the new origin -> get properly inside the sphere
        vec3 newOrigin = ray.origin + (currDistance1 * 1.01) * ray.direction;

        tmpRay.origin = (newOrigin - center);
        tmpRay.direction = ray.direction;

        tmpRay.direction = refract(tmpRay.direction, -normal, Eta);

        float currDistance2 = 0.0;
        if (
          !intersectSphere(tmpRay, radius, currDistance2, normal) ||
          (outBestResult.distance > 0.0 && currDistance2 > outBestResult.distance)
        ) {
          return;
        }

        vec4 matTexel0 = texelFetch(u_materialsTextureData, ivec2(materialIndex * 2 + 0, 0), 0);

        float reflectionFactor = matTexel0.a;

        outBestResult.hasHit = true;
        outBestResult.distance = currDistance1 + currDistance2;
        outBestResult.position = newOrigin + (currDistance2 * 1.01) * ray.direction;
        outBestResult.normal = normal;
        outBestResult.reflectionFactor = reflectionFactor;
        outBestResult.refractionFactor = refractionFactor;

        bool lightEnabled = (matTexel1.b != 0.0);
        outBestResult.lightEnabled = lightEnabled;

        vec3 color = matTexel0.rgb;

        outBestResult.color = vec4(color, 0.5);

        return; // bypass non refractive logic
      }
#endif

      vec4 orientation = vec4(
        shTexel1.g,
        shTexel1.b,
        shTexel1.a,
        shTexel2.r
      );
      mat3 normalMatrix = quat_to_mat3(orientation);
      mat3 inverseNormalMatrix = inverse(normalMatrix);

      // convert ray from world space to box space
      tmpRay.origin = (inverseNormalMatrix * (ray.origin - center));
      tmpRay.direction = (inverseNormalMatrix * ray.direction);

      float currDistance = 0.0;
      if (
        !intersectSphere(tmpRay, radius, currDistance, normal) ||
        (outBestResult.distance > 0.0 && currDistance > outBestResult.distance)
      ) {
        return;
      }

      // convert normal from box space to world space
      normal = normalMatrix * normal;

      outBestResult.hasHit = true;
      outBestResult.distance = currDistance;
      outBestResult.position = ray.origin + currDistance * ray.direction;
      outBestResult.normal = normal;
      outBestResult.refractionFactor = 0.0;

      bool chessboardMaterialEnabled = (matTexel1.a != 0.0);

      vec4 matTexel0 = texelFetch(u_materialsTextureData, ivec2(materialIndex * 2 + 0, 0), 0);

      if (chessboardMaterialEnabled)
      {
        vec3 localPos = ray.origin + currDistance * ray.direction;
        vec3 txPos = inverseNormalMatrix * (localPos - center);

        // chessboard color effect
        if ((fract(txPos.x * 0.9) > 0.5) == (fract(txPos.y * 0.9) > 0.5) == (fract(txPos.z * 0.9) > 0.5))
        {

          if (shadowMode)
          {

// #ifdef D_SIMPLIFIED
//             outBestResult.hasHit = true;
// #else
            outBestResult.hasHit = false; // no shadow -> allow light to go through
// #endif

            // outBestResult.color = vec4(1.0, 1.0, 0.0, 1.0);
            outBestResult.reflectionFactor = 0.0; // override reflection -> plain color
            outBestResult.refractionFactor = 0.0;
          }
          else
          {
            vec3 color = matTexel0.rgb;

            outBestResult.hasHit = true;
            outBestResult.color = vec4(color, 1.0);
            outBestResult.reflectionFactor = 0.0; // override reflection -> plain color
            outBestResult.refractionFactor = 1.0;
          }

          return;
        }
        else
        {
          outBestResult.hasHit = true;
          outBestResult.distance = currDistance;
          outBestResult.position = ray.origin + currDistance * ray.direction;
          outBestResult.normal = normal;
          // outBestResult.refractionFactor = 0.0;


          // blue/green, mat
          outBestResult.color = vec4(1.0, 1.0, 1.0, 1.0);
          outBestResult.reflectionFactor = 0.0;
          outBestResult.refractionFactor = 0.0;
        }
      }
      else
      {

        outBestResult.hasHit = true;
        outBestResult.distance = currDistance;
        outBestResult.position = ray.origin + currDistance * ray.direction;
        outBestResult.normal = normal;
        // outBestResult.refractionFactor = 0.0;

        vec3 color = matTexel0.rgb;

        float reflectionFactor = matTexel0.a;

        outBestResult.color = vec4(color, 0.5);
        outBestResult.reflectionFactor = reflectionFactor;
        outBestResult.refractionFactor = refractionFactor;
      }

      bool lightEnabled = (matTexel1.b != 0.0);
      outBestResult.lightEnabled = lightEnabled;


      break;
    }

    case 2: {


      tmpRay.origin = ray.origin;
      tmpRay.direction = ray.direction;

      vec3 center = vec3(shTexel0.b, shTexel0.a, shTexel1.r);
      vec4 orientation = vec4(
        shTexel1.g,
        shTexel1.b,
        shTexel1.a,
        shTexel2.r
      );

      vec3 boxSize = shTexel2.gba;

      float refractionFactor = matTexel1.r;
      if (refractionFactor > 0.0)
      {

        // refraction logic

        // convert ray from world space to sphere space
        mat3 normalMatrix = quat_to_mat3(orientation);
        mat3 inverseNormalMatrix = inverse(normalMatrix);

        tmpRay.origin = (inverseNormalMatrix * (ray.origin - center));
        tmpRay.direction = (inverseNormalMatrix * ray.direction);

        float currDistance1 = 0.0;
        if (
          !intersectBox(tmpRay, boxSize, currDistance1, normal) ||
          (outBestResult.distance > 0.0 && currDistance1 > outBestResult.distance)
        ) {
          return;
        }

        // now collide with the inside of the box

        vec3 newOrigin = ray.origin + (currDistance1 * 1.000) * ray.direction;

        tmpRay.origin = inverseNormalMatrix * (newOrigin - center);
        tmpRay.direction = refract(tmpRay.direction, normal, Eta);

        float currDistance2 = 0.0;
        if (
          !intersectBox(tmpRay, boxSize, currDistance2, normal) ||
          (outBestResult.distance > 0.0 && currDistance2 > outBestResult.distance)
        ) {
          return;
        }

        // convert normal from box space to world space
        normal = normalMatrix * normal;

        vec4 matTexel0 = texelFetch(u_materialsTextureData, ivec2(materialIndex * 2 + 0, 0), 0);

        float reflectionFactor = matTexel0.a;

        outBestResult.hasHit = true;
        outBestResult.distance = currDistance1 + currDistance2;
        outBestResult.position = newOrigin + (currDistance2 * 1.000) * ray.direction;
        outBestResult.normal = normal;
        outBestResult.reflectionFactor = reflectionFactor;
        outBestResult.refractionFactor = refractionFactor;

        bool lightEnabled = (matTexel1.b != 0.0);
        outBestResult.lightEnabled = lightEnabled;

        vec3 color = matTexel0.rgb;
        outBestResult.color = vec4(color, 0.5);

        return; // bypass non refractive logic
      }

      // convert ray from world space to sphere space
      mat3 normalMatrix = quat_to_mat3(orientation);
      mat3 inverseNormalMatrix = inverse(normalMatrix);
      tmpRay.origin = (inverseNormalMatrix * (ray.origin - center));
      tmpRay.direction = (inverseNormalMatrix * tmpRay.direction);

      float currDistance = 0.0;
      if (
        !intersectBox(tmpRay, boxSize, currDistance, normal) ||
        (outBestResult.distance > 0.0 && currDistance > outBestResult.distance)
      ) {
        return;
      }

      // convert normal from box space to world space
      normal = normalMatrix * normal;

      outBestResult.hasHit = true;
      outBestResult.distance = currDistance;
      outBestResult.position = ray.origin + currDistance * ray.direction;
      outBestResult.normal = normal;
      outBestResult.refractionFactor = 0.0;

      bool chessboardMaterialEnabled = (matTexel1.a != 0.0);

      vec4 matTexel0 = texelFetch(u_materialsTextureData, ivec2(materialIndex * 2 + 0, 0), 0);

      if (chessboardMaterialEnabled)
      {
        outBestResult.reflectionFactor = 0.5;
        outBestResult.refractionFactor = 0.0; // TODO

        // the multiplication by 0.999 will remove graphic artifact
        vec3 txPos = (inverseNormalMatrix * 0.999) * (center - outBestResult.position);

        // chessboard color effect
        // if (fract(txPos.x * 0.2) > 0.5 == fract(txPos.z * 0.2) > 0.5 == fract(txPos.y * 0.2) > 0.5)
        if (fract(txPos.x * 0.9) > 0.5 == fract(txPos.y * 0.9) > 0.5 == fract(txPos.z * 0.9) > 0.5)
        {
          outBestResult.color = vec4(1.0);
        }
        else
        {
          outBestResult.color = vec4(0.0, 0.4, 0.45, 1.0);
        }
      }
      else
      {
        vec3 color = matTexel0.rgb;

        float reflectionFactor = matTexel0.a;

        outBestResult.color = vec4(color, 1.0);
        outBestResult.reflectionFactor = reflectionFactor;
        outBestResult.refractionFactor = refractionFactor;
      }

      bool lightEnabled = (matTexel1.b != 0.0);
      outBestResult.lightEnabled = lightEnabled;


      break;
    }
    case 3: {



      tmpRay.origin = ray.origin;
      tmpRay.direction = ray.direction;

      vec3 v0 = vec3(shTexel0.b, shTexel0.a, shTexel1.r);
      vec3 v1 = shTexel1.gba;
      vec3 v2 = shTexel2.rgb;

      float currDistance = 0.0;
      if (
        !intersectTriangle(tmpRay, v0, v1, v2, currDistance, normal) ||
        (outBestResult.distance > 0.0 && currDistance > outBestResult.distance)
      ) {
        return;
      }

      vec4 matTexel0 = texelFetch(u_materialsTextureData, ivec2(materialIndex * 2 + 0, 0), 0);

      outBestResult.hasHit = true;
      outBestResult.distance = currDistance;
      outBestResult.position = ray.origin + currDistance * ray.direction;
      outBestResult.normal = normal;

      outBestResult.refractionFactor = 0.0; // TODO

      vec3 color = matTexel0.rgb;

      float reflectionFactor = matTexel0.a;

      outBestResult.color = vec4(color, 1.0);
      outBestResult.reflectionFactor = reflectionFactor;

      bool lightEnabled = (matTexel1.b != 0.0);
      outBestResult.lightEnabled = lightEnabled;



      break;
    }
  }


}


bool rayIntersectBvhAABB(RayValues ray, vec3 bvhMin, vec3 bvhMax)
{
  vec3 valA = (bvhMin - ray.origin) / ray.direction;
  vec3 valB = (bvhMax - ray.origin) / ray.direction;
  vec3 minVal = min(valA, valB);
  vec3 maxVal = max(valA, valB);

  float max_minVal = max(minVal.x, max(minVal.y, minVal.z));
  float min_maxVal = min(maxVal.x, min(maxVal.y, maxVal.z));

  return max_minVal < min_maxVal;
}

bool intersectScene(RayValues ray, out RayResult outBestResult, bool shadowMode)
{
  outBestResult.hasHit = false;
  outBestResult.distance = -1.0;

  if (u_sceneTextureSize <= 0) {
    return false;
  }

  // for (int index = 0; index < u_totalShapes; index += 3) {
  //   intersectSceneOneShape(index, ray, outBestResult, shadowMode);
  // }


  /**/
  if (u_totalShapes > 0) {

    const int maxBvhStack = 16;
    int bvhStack[maxBvhStack];

    bvhStack[0] = 0; // BVH root node index
    int top = 0;

    while (top >= 0) {

      // pop stack
      int bv_idx = bvhStack[top];
      top -= 1;

      vec4 rootNodeTexel0 = texelFetch(u_bvhDataTexture, ivec2(bv_idx * 3 + 0, 0), 0);
      vec4 rootNodeTexel1 = texelFetch(u_bvhDataTexture, ivec2(bv_idx * 3 + 1, 0), 0);

      vec3 aabbMin = rootNodeTexel0.rgb;
      vec3 aabbMax = vec3(rootNodeTexel0.a, rootNodeTexel1.r, rootNodeTexel1.g);

      if (!rayIntersectBvhAABB(ray, aabbMin, aabbMax)) {
        continue;
      }

      //

      int leftNodeIndex = int(rootNodeTexel1.b);
      if (leftNodeIndex >= 0) {
        // push left bvh node index on to the stack
        top += 1;
        bvhStack[top] = leftNodeIndex;
      }

      int rightNodeIndex = int(rootNodeTexel1.a);
      if (rightNodeIndex >= 0) {
        // push right bvh node index on to the stack
        top += 1;
        bvhStack[top] = rightNodeIndex;
      }

      //

      vec4 rootNodeTexel2 = texelFetch(u_bvhDataTexture, ivec2(bv_idx * 3 + 2, 0), 0);

      int leftLEafIndex = int(rootNodeTexel2.r);
      if (leftLEafIndex >= 0) {
        intersectSceneOneShape(leftLEafIndex * 3, ray, outBestResult, shadowMode);
      }

      int rightLeafIndex = int(rootNodeTexel2.g);
      if (rightLeafIndex >= 0) {
        intersectSceneOneShape(rightLeafIndex * 3, ray, outBestResult, shadowMode);
      }

      //

    }

  }
  //*/

#ifdef D_SIMPLIFIED
  outBestResult.reflectionFactor = 0.0;
  outBestResult.refractionFactor = 0.0;
#endif

  return outBestResult.hasHit;
}

float lightAt(vec3 impactPosition, vec3 impactNormal, vec3 viewer)
{
  float bestIntensity = 0.0;

  for (int index = 0; index < u_sunLightsStop; index += 1)
  {
    vec4 texel0 = texelFetch(u_lightsTextureData, ivec2(index + 0, 0), 0);
    vec3 lightDir = texel0.rgb;
    float localIntensity = texel0.a;

    float coef = localIntensity;
    lightDir = normalize(lightDir);

    // is the sun light blocked by an object?
    RayResult result;
    if (intersectScene(RayValues(impactPosition, lightDir), result, true)) {
      // light ray is blocked, skip this light
      continue;
    }

    //
    //
    //

    float intensity = 0.0;
    vec3 reflectionFactor = reflect(-lightDir, impactNormal);
    intensity += 0.6 * pow(max(dot(reflectionFactor, viewer), 0.0), 30.0);
    intensity += 1.0 * dot(lightDir, impactNormal);

    intensity *= coef;

    if (bestIntensity < intensity) {
      bestIntensity = intensity;
    }
  }

  for (int index = u_sunLightsStop; index < u_spotLightsStop; index += 2)
  {
    vec3 lightDir = vec3(1.0);
    float coef = 1.0;

    // spot light

    vec4 texel0 = texelFetch(u_lightsTextureData, ivec2(index + 0, 0), 0);
    vec4 texel1 = texelFetch(u_lightsTextureData, ivec2(index + 1, 0), 0);
    vec3 lightPos = texel0.rgb;
    float lightRadius = texel0.a;
    float localIntensity = texel1.r;

    vec3 lightToImpactVec3 = lightPos - impactPosition;

    // is it out of the spot light effect radius?
    float lightToImpactDistance = length(lightToImpactVec3);
    if (lightToImpactDistance > lightRadius) {
      // out of range, do not apply this light
      continue;
    }

    lightDir.x = lightToImpactVec3.x / lightToImpactDistance; // normalize
    lightDir.y = lightToImpactVec3.y / lightToImpactDistance; // normalize
    lightDir.z = lightToImpactVec3.z / lightToImpactDistance; // normalize

    coef = localIntensity * (1.0 - lightToImpactDistance / lightRadius);

    RayResult result;
    if (
      // is the spot light blocked by an object?
      intersectScene(RayValues(impactPosition, lightDir), result, true) &&
      // is the blocking object in range of the spot light effect radius?
      result.distance < lightToImpactDistance
    ) {
      // light ray is blocked, skip this light
      continue;
    }

    //
    //
    //

    float intensity = 0.0;
    vec3 reflectionFactor = reflect(-lightDir, impactNormal);
    intensity += 0.6 * pow(max(dot(reflectionFactor, viewer), 0.0), 30.0);
    intensity += 1.0 * dot(lightDir, impactNormal);

    intensity *= coef;

    if (bestIntensity < intensity) {
      bestIntensity = intensity;
    }
  }

  return max(g_ambiantLight, bestIntensity);
}

void main()
{
  //
  //
  // initial ray

  vec3 rayDir = normalize(v_position - u_cameraEye); // camera direction
  vec3 finalPixelColor = g_backgroundColor;

#ifdef D_SIMPLIFIED
  const int maxStack = 1;
#else
  const int maxStack = 4;
#endif
  StackData _stack[maxStack];

  // initialize stack
  for (int ii = 0; ii < maxStack; ++ii)
  {
    _stack[ii].used = false;
    _stack[ii].result.reflectionFactor = 0.0;
    _stack[ii].result.refractionFactor = 0.0;
    _stack[ii].result.lightEnabled = false;
    _stack[ii].reflectionIndex = -1;
    _stack[ii].refractionIndex = -1;
  }

  // initialize first stack element
  _stack[0].used = true;
  _stack[0].ray = RayValues(u_cameraEye, rayDir);
  _stack[0].result.position = u_cameraEye;
#ifdef D_SIMPLIFIED
  _stack[0].result.reflectionFactor = 0.0;
  _stack[0].result.refractionFactor = 0.0;
#else
  _stack[0].result.reflectionFactor = 1.0;
  _stack[0].result.refractionFactor = 1.0;
#endif
  _stack[0].result.lightEnabled = true;
  _stack[0].reflectionIndex = -1;
  _stack[0].refractionIndex = -1;

  int stackIndex = 0;

  for (int ii = 0; ii < maxStack; ++ii)
  {
    // intersect object
    // if reflection/refraction push to stack & set index
    // repeat

    if (!_stack[ii].used) {
      break;
    }

    _stack[ii].result.hasHit = intersectScene(
      _stack[ii].ray,
      _stack[ii].result,
      false
    );

    if (!_stack[ii].result.hasHit)
    {
      continue;
    }

    float lightIntensity = 1.0;

    if (_stack[ii].result.lightEnabled)
    {
      lightIntensity = lightAt(
        _stack[ii].result.position,
        _stack[ii].result.normal,
        -_stack[ii].ray.direction
      );
    }

    _stack[ii].result.color.xyz *= lightIntensity;

    if (_stack[ii].result.lightEnabled && lightIntensity <= 0.0)
    {
      // not lit
      continue;
    }

    // reflection/refraction here

    if (stackIndex + 1 >= maxStack)
    {
      // no more stack space left
      continue;
    }

    if (_stack[ii].result.refractionFactor > 0.0)
    {
      // push refraction to the stack
      stackIndex += 1;

      _stack[stackIndex].used = true;
      _stack[stackIndex].ray.origin = _stack[ii].result.position;
      _stack[stackIndex].ray.direction = refract(_stack[ii].ray.direction, _stack[ii].result.normal, Eta);

      _stack[ii].refractionIndex = stackIndex;
    }

    if (_stack[ii].result.reflectionFactor > 0.0)
    {
      // push reflection to the stack
      stackIndex += 1;

      _stack[stackIndex].used = true;
      _stack[stackIndex].ray.origin = _stack[ii].result.position;
      _stack[stackIndex].ray.direction = reflect(_stack[ii].ray.direction, _stack[ii].result.normal);

      _stack[ii].reflectionIndex = stackIndex;
    }

  }

  // combine all colors (from last element to first element)
  for (int ii = maxStack - 1; ii >= 0; --ii)
  {


    if (!_stack[ii].used || !_stack[ii].result.hasHit) {
      _stack[ii].result.color.xyz = g_backgroundColor;
      continue;
    }

    if (_stack[ii].reflectionIndex != -1)
    {
      _stack[ii].result.color.xyz =
        _stack[ii].result.color.xyz * (1.0 - _stack[ii].result.reflectionFactor) +
        _stack[_stack[ii].reflectionIndex].result.color.xyz * _stack[ii].result.reflectionFactor;
    }

    if (_stack[ii].refractionIndex != -1)
    {
      _stack[ii].result.color.xyz =
        _stack[ii].result.color.xyz * (1.0 - _stack[ii].result.refractionFactor) +
        _stack[_stack[ii].refractionIndex].result.color.xyz * _stack[ii].result.refractionFactor;
    }
  }

  if (_stack[0].result.hasHit) {
    finalPixelColor = _stack[0].result.color.xyz;
  }

  o_color = vec4(finalPixelColor, 1.0);

}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/texture.glsl.vert
var texture_glsl_default = `
#version 300 es

precision highp float;

in vec2 a_vertexPosition;
in vec2 a_vertexTextureCoord;

out vec2 v_textureCoord;

void main(void)
{
  v_textureCoord = a_vertexTextureCoord;

  gl_Position = vec4(a_vertexPosition, 1.0, 1.0);
}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/texture.glsl.frag
var texture_glsl_default2 = `
#version 300 es

precision highp float;

uniform sampler2D u_texture;
uniform vec2 u_step;

in vec2 v_textureCoord;

out vec4 o_color;

void main(void)
{
  // gl_FragColor = texture(u_texture, v_textureCoord);

  float total = 0.0;
  vec4 accumulated = vec4(0.0);

  //

  if (v_textureCoord.x - u_step.x > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x - u_step.x, v_textureCoord.y));
    total += 1.0;
  }

  if (v_textureCoord.x + u_step.x > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x + u_step.x, v_textureCoord.y));
    total += 1.0;
  }

  if (v_textureCoord.y - u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x, v_textureCoord.y - u_step.y));
    total += 1.0;
  }

  if (v_textureCoord.y + u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x, v_textureCoord.y + u_step.y));
    total += 1.0;
  }

  //

  if (v_textureCoord.x - u_step.x > 0.0 && v_textureCoord.y - u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x - u_step.x, v_textureCoord.y - u_step.y));
    total += 1.0;
  }

  if (v_textureCoord.x + u_step.x > 0.0 && v_textureCoord.y - u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x + u_step.x, v_textureCoord.y - u_step.y));
    total += 1.0;
  }

  if (v_textureCoord.x - u_step.x > 0.0 && v_textureCoord.y + u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x - u_step.x, v_textureCoord.y + u_step.y));
    total += 1.0;
  }

  if (v_textureCoord.x + u_step.x > 0.0 && v_textureCoord.y + u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x + u_step.x, v_textureCoord.y + u_step.y));
    total += 1.0;
  }

  //

  if (total > 0.0)
    o_color = accumulated / total;
  else
    o_color = vec4(1.0, 0.0, 0.0, 1.0); // warning
}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/ascii-art.glsl.vert
var ascii_art_glsl_default = `
#version 300 es

precision highp float;

in vec2 a_vertexPosition;
in vec2 a_vertexTextureCoord;

out vec2 v_textureCoord;

void main(void)
{
  v_textureCoord = a_vertexTextureCoord;

  gl_Position = vec4(a_vertexPosition, 1.0, 1.0);
}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/ascii-art.glsl.frag
var ascii_art_glsl_default2 = `
#version 300 es

precision highp float;

uniform sampler2D u_texture;



// https://www.shadertoy.com/view/4ll3RB

#define r vec2(800, 600)
// #define t 0

#define zoom 1.
#define P(id,a,b,c,d,e,f,g,h) if( id == int(pos.y) ){ int pa = a+2*(b+2*(c+2*(d+2*(e+2*(f+2*(g+2*(h))))))); cha = floor(mod(float(pa)/pow(2.,float(pos.x)-1.),2.)); }

float gray(vec3 _i)
{
  return _i.x*0.299+_i.y*0.587+_i.z*0.114;
}
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
  vec2 uv = vec2(floor(fragCoord.x/8./zoom)*8.*zoom,floor(fragCoord.y/12./zoom)*12.*zoom)/r;
  ivec2 pos = ivec2(mod(fragCoord.x/zoom,8.),mod(fragCoord.y/zoom,12.));
  vec4 tex = texture(u_texture,uv);
  float cha = 0.;

  float g = gray(tex.xyz);
  if( g < .125 )
  {
    P(11,0,0,0,0,0,0,0,0);
    P(10,0,0,0,0,0,0,0,0);
    P(9,0,0,0,0,0,0,0,0);
    P(8,0,0,0,0,0,0,0,0);
    P(7,0,0,0,0,0,0,0,0);
    P(6,0,0,0,0,0,0,0,0);
    P(5,0,0,0,0,0,0,0,0);
    P(4,0,0,0,0,0,0,0,0);
    P(3,0,0,0,0,0,0,0,0);
    P(2,0,0,0,0,0,0,0,0);
    P(1,0,0,0,0,0,0,0,0);
    P(0,0,0,0,0,0,0,0,0);
  }
  else if( g < .25 ) // .
  {
    P(11,0,0,0,0,0,0,0,0);
    P(10,0,0,0,0,0,0,0,0);
    P(9,0,0,0,0,0,0,0,0);
    P(8,0,0,0,0,0,0,0,0);
    P(7,0,0,0,0,0,0,0,0);
    P(6,0,0,0,0,0,0,0,0);
    P(5,0,0,0,0,0,0,0,0);
    P(4,0,0,0,1,1,0,0,0);
    P(3,0,0,0,1,1,0,0,0);
    P(2,0,0,0,0,0,0,0,0);
    P(1,0,0,0,0,0,0,0,0);
    P(0,0,0,0,0,0,0,0,0);
  }
  else if( g < .375 ) // ,
  {
    P(11,0,0,0,0,0,0,0,0);
    P(10,0,0,0,0,0,0,0,0);
    P(9,0,0,0,0,0,0,0,0);
    P(8,0,0,0,0,0,0,0,0);
    P(7,0,0,0,0,0,0,0,0);
    P(6,0,0,0,0,0,0,0,0);
    P(5,0,0,0,0,0,0,0,0);
    P(4,0,0,0,1,1,0,0,0);
    P(3,0,0,0,1,1,0,0,0);
    P(2,0,0,0,0,1,0,0,0);
    P(1,0,0,0,1,0,0,0,0);
    P(0,0,0,0,0,0,0,0,0);
  }
  else if( g < .5 ) // -
  {
    P(11,0,0,0,0,0,0,0,0);
    P(10,0,0,0,0,0,0,0,0);
    P(9,0,0,0,0,0,0,0,0);
    P(8,0,0,0,0,0,0,0,0);
    P(7,0,0,0,0,0,0,0,0);
    P(6,1,1,1,1,1,1,1,0);
    P(5,0,0,0,0,0,0,0,0);
    P(4,0,0,0,0,0,0,0,0);
    P(3,0,0,0,0,0,0,0,0);
    P(2,0,0,0,0,0,0,0,0);
    P(1,0,0,0,0,0,0,0,0);
    P(0,0,0,0,0,0,0,0,0);
  }
  else if(g < .625 ) // +
  {
    P(11,0,0,0,0,0,0,0,0);
    P(10,0,0,0,0,0,0,0,0);
    P(9,0,0,0,1,0,0,0,0);
    P(8,0,0,0,1,0,0,0,0);
    P(7,0,0,0,1,0,0,0,0);
    P(6,1,1,1,1,1,1,1,0);
    P(5,0,0,0,1,0,0,0,0);
    P(4,0,0,0,1,0,0,0,0);
    P(3,0,0,0,1,0,0,0,0);
    P(2,0,0,0,0,0,0,0,0);
    P(1,0,0,0,0,0,0,0,0);
    P(0,0,0,0,0,0,0,0,0);
  }
  else if(g < .75 ) // *
  {
    P(11,0,0,0,0,0,0,0,0);
    P(10,0,0,0,1,0,0,0,0);
    P(9,1,0,0,1,0,0,1,0);
    P(8,0,1,0,1,0,1,0,0);
    P(7,0,0,1,1,1,0,0,0);
    P(6,0,0,0,1,0,0,0,0);
    P(5,0,0,1,1,1,0,0,0);
    P(4,0,1,0,1,0,1,0,0);
    P(3,1,0,0,1,0,0,1,0);
    P(2,0,0,0,1,0,0,0,0);
    P(1,0,0,0,0,0,0,0,0);
    P(0,0,0,0,0,0,0,0,0);
  }
  else if(g < .875 ) // #
  {
    P(11,0,0,0,0,0,0,0,0);
    P(10,0,0,1,0,0,1,0,0);
    P(9,0,0,1,0,0,1,0,0);
    P(8,1,1,1,1,1,1,1,0);
    P(7,0,0,1,0,0,1,0,0);
    P(6,0,0,1,0,0,1,0,0);
    P(5,0,1,0,0,1,0,0,0);
    P(4,0,1,0,0,1,0,0,0);
    P(3,1,1,1,1,1,1,1,0);
    P(2,0,1,0,0,1,0,0,0);
    P(1,0,1,0,0,1,0,0,0);
    P(0,0,0,0,0,0,0,0,0);
  }
  else // @
  {
    P(11,0,0,0,0,0,0,0,0);
    P(10,0,0,1,1,1,1,0,0);
    P(9,0,1,0,0,0,0,1,0);
    P(8,1,0,0,0,1,1,1,0);
    P(7,1,0,0,1,0,0,1,0);
    P(6,1,0,0,1,0,0,1,0);
    P(5,1,0,0,1,0,0,1,0);
    P(4,1,0,0,1,0,0,1,0);
    P(3,1,0,0,1,1,1,1,0);
    P(2,0,1,0,0,0,0,0,0);
    P(1,0,0,1,1,1,1,1,0);
    P(0,0,0,0,0,0,0,0,0);
  }

  vec3 col = tex.xyz/max(tex.x,max(tex.y,tex.z));
  fragColor = vec4(cha*col,1.);
}


in vec2 v_textureCoord;

out vec4 o_color;

void main(void)
{
  mainImage(o_color, v_textureCoord * r);
  // mainImage(o_color, vec2(gl_FragCoord));

}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/BVH.ts
var k_minDelta = 0.01;
var _renderAABB = (renderer, min4, max4, color) => {
  const vertices = [
    [min4[0], min4[1], min4[2]],
    [max4[0], min4[1], min4[2]],
    [min4[0], max4[1], min4[2]],
    [max4[0], max4[1], min4[2]],
    [min4[0], min4[1], max4[2]],
    [max4[0], min4[1], max4[2]],
    [min4[0], max4[1], max4[2]],
    [max4[0], max4[1], max4[2]]
  ];
  const indices = [
    [0, 1],
    [1, 3],
    [3, 2],
    [2, 0],
    [4, 5],
    [5, 7],
    [7, 6],
    [6, 4],
    [0, 4],
    [1, 5],
    [2, 6],
    [3, 7]
  ];
  for (const pair of indices) {
    renderer.pushLine(vertices[pair[0]], vertices[pair[1]], color);
  }
};

class BVHNode {
  _index = -1;
  _min = exports_vec3.create();
  _max = exports_vec3.create();
  _leftNode;
  _rightNode;
  _leftLeaf;
  _rightLeaf;
  static s_index = 0;
  constructor(min4, max4) {
    this._index = BVHNode.s_index;
    BVHNode.s_index += 1;
    exports_vec3.copy(this._min, min4);
    exports_vec3.copy(this._max, max4);
  }
  subDivide(allShapes) {
    if (allShapes.length <= 2) {
      this._leftLeaf = allShapes[0];
      this._rightLeaf = allShapes[1];
      return;
    }
    const dx = Math.abs(this._max[0] - this._min[0]);
    const dy = Math.abs(this._max[1] - this._min[1]);
    const dz = Math.abs(this._max[2] - this._min[2]);
    const largestDelta = Math.max(dx, dy, dz);
    if (largestDelta === dx) {
      this._splitAcross(0, allShapes);
    } else if (largestDelta === dy) {
      this._splitAcross(1, allShapes);
    } else {
      this._splitAcross(2, allShapes);
    }
  }
  _splitAcross(axis, allShapes) {
    const sorted = [...allShapes].sort((shapeA, shapeB) => {
      const a0 = shapeA.min[axis];
      const a1 = shapeA.max[axis];
      const b0 = shapeB.min[axis];
      const b1 = shapeB.max[axis];
      return (a0 + a1) / 2 - (b0 + b1) / 2;
    });
    const h = sorted.length / 2;
    const l = sorted.length;
    const ltFaces = sorted.slice(0, h);
    const rtFaces = sorted.slice(h, l);
    if (ltFaces.length > 0) {
      const min4 = exports_vec3.fromValues(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);
      const max4 = exports_vec3.fromValues(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);
      ltFaces.forEach((f) => {
        min4[0] = Math.min(min4[0], f.min[0]);
        min4[1] = Math.min(min4[1], f.min[1]);
        min4[2] = Math.min(min4[2], f.min[2]);
        max4[0] = Math.max(max4[0], f.max[0]);
        max4[1] = Math.max(max4[1], f.max[1]);
        max4[2] = Math.max(max4[2], f.max[2]);
      });
      this._leftNode = new BVHNode(min4, max4);
    }
    if (rtFaces.length > 0) {
      const min4 = exports_vec3.fromValues(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);
      const max4 = exports_vec3.fromValues(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);
      rtFaces.forEach((f) => {
        min4[0] = Math.min(min4[0], f.min[0]);
        min4[1] = Math.min(min4[1], f.min[1]);
        min4[2] = Math.min(min4[2], f.min[2]);
        max4[0] = Math.max(max4[0], f.max[0]);
        max4[1] = Math.max(max4[1], f.max[1]);
        max4[2] = Math.max(max4[2], f.max[2]);
      });
      this._rightNode = new BVHNode(min4, max4);
    }
    if (this._leftNode) {
      this._leftNode.subDivide(ltFaces);
    }
    if (this._rightNode) {
      this._rightNode.subDivide(rtFaces);
    }
  }
  render(renderer, color) {
    _renderAABB(renderer, this._min, this._max, color);
    if (this._leftNode) {
      this._leftNode.render(renderer, [0, 0.5, 0]);
      renderer.pushLine([this._max[0] + 0.1, this._max[1] + 0.1, this._max[2] + 0.1], [this._leftNode._max[0] + 0.1, this._leftNode._max[1] + 0.1, this._leftNode._max[2] + 0.1], [1, 0, 1]);
    }
    if (this._rightNode) {
      this._rightNode.render(renderer, [0, 0, 0.5]);
      renderer.pushLine([this._max[0] + 0.1, this._max[1] + 0.1, this._max[2] + 0.1], [this._rightNode._max[0] + 0.1, this._rightNode._max[1] + 0.1, this._rightNode._max[2] + 0.1], [1, 0, 1]);
    }
    if (this._leftLeaf) {
      _renderAABB(renderer, this._leftLeaf.min, this._leftLeaf.max, [0.5, 0.5, 0]);
      renderer.pushLine([this._max[0] + 0.1, this._max[1] + 0.1, this._max[2] + 0.1], [this._leftLeaf.max[0] + 0.1, this._leftLeaf.max[1] + 0.1, this._leftLeaf.max[2] + 0.1], [1, 0, 0]);
    }
    if (this._rightLeaf) {
      _renderAABB(renderer, this._rightLeaf.min, this._rightLeaf.max, [0.5, 0.5, 0]);
      renderer.pushLine([this._max[0] + 0.1, this._max[1] + 0.1, this._max[2] + 0.1], [this._rightLeaf.max[0] + 0.1, this._rightLeaf.max[1] + 0.1, this._rightLeaf.max[2] + 0.1], [1, 0, 0]);
    }
  }
}

class BVH {
  _allShapes = [];
  _rootNode;
  constructor() {
  }
  reset() {
    this._allShapes.length = 0;
    this._rootNode = undefined;
  }
  synchronize(allSpheres, allBoxes, allTriangles) {
    this.reset();
    let index2 = 0;
    for (const currShape of allSpheres) {
      const min5 = exports_vec3.fromValues(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);
      const max5 = exports_vec3.fromValues(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);
      min5[0] = Math.min(min5[0], currShape.position[0] - currShape.radius);
      min5[1] = Math.min(min5[1], currShape.position[1] - currShape.radius);
      min5[2] = Math.min(min5[2], currShape.position[2] - currShape.radius);
      max5[0] = Math.max(max5[0], currShape.position[0] + currShape.radius);
      max5[1] = Math.max(max5[1], currShape.position[1] + currShape.radius);
      max5[2] = Math.max(max5[2], currShape.position[2] + currShape.radius);
      if (max5[0] - min5[0] < k_minDelta) {
        max5[0] += k_minDelta;
      }
      if (max5[1] - min5[1] < k_minDelta) {
        max5[1] += k_minDelta;
      }
      if (max5[2] - min5[2] < k_minDelta) {
        max5[2] += k_minDelta;
      }
      this._allShapes.push({ index: index2++, type: "sphere", shape: currShape, min: min5, max: max5 });
    }
    for (const currShape of allBoxes) {
      const min5 = exports_vec3.fromValues(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);
      const max5 = exports_vec3.fromValues(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);
      const vertices = [
        exports_vec3.fromValues(-currShape.boxSize[0], -currShape.boxSize[1], -currShape.boxSize[2]),
        exports_vec3.fromValues(+currShape.boxSize[0], -currShape.boxSize[1], -currShape.boxSize[2]),
        exports_vec3.fromValues(-currShape.boxSize[0], +currShape.boxSize[1], -currShape.boxSize[2]),
        exports_vec3.fromValues(+currShape.boxSize[0], +currShape.boxSize[1], -currShape.boxSize[2]),
        exports_vec3.fromValues(-currShape.boxSize[0], -currShape.boxSize[1], +currShape.boxSize[2]),
        exports_vec3.fromValues(+currShape.boxSize[0], -currShape.boxSize[1], +currShape.boxSize[2]),
        exports_vec3.fromValues(-currShape.boxSize[0], +currShape.boxSize[1], +currShape.boxSize[2]),
        exports_vec3.fromValues(+currShape.boxSize[0], +currShape.boxSize[1], +currShape.boxSize[2])
      ];
      vertices.forEach((vertex) => {
        const pos = exports_vec3.fromValues(0, 0, 0);
        const mat4 = exports_mat4.identity(exports_mat4.create());
        exports_mat4.translate(mat4, mat4, currShape.position);
        const mat4b = exports_mat4.fromQuat(exports_mat4.create(), currShape.orientation);
        exports_mat4.multiply(mat4, mat4, mat4b);
        exports_vec3.transformMat4(pos, vertex, mat4);
        min5[0] = Math.min(min5[0], pos[0]);
        min5[1] = Math.min(min5[1], pos[1]);
        min5[2] = Math.min(min5[2], pos[2]);
        max5[0] = Math.max(max5[0], pos[0]);
        max5[1] = Math.max(max5[1], pos[1]);
        max5[2] = Math.max(max5[2], pos[2]);
      });
      if (max5[0] - min5[0] < k_minDelta) {
        max5[0] += k_minDelta;
      }
      if (max5[1] - min5[1] < k_minDelta) {
        max5[1] += k_minDelta;
      }
      if (max5[2] - min5[2] < k_minDelta) {
        max5[2] += k_minDelta;
      }
      this._allShapes.push({ index: index2++, type: "box", shape: currShape, min: min5, max: max5 });
    }
    for (const currShape of allTriangles) {
      const min5 = exports_vec3.fromValues(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);
      const max5 = exports_vec3.fromValues(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);
      min5[0] = Math.min(min5[0], currShape.v0[0]);
      min5[1] = Math.min(min5[1], currShape.v0[1]);
      min5[2] = Math.min(min5[2], currShape.v0[2]);
      max5[0] = Math.max(max5[0], currShape.v0[0]);
      max5[1] = Math.max(max5[1], currShape.v0[1]);
      max5[2] = Math.max(max5[2], currShape.v0[2]);
      min5[0] = Math.min(min5[0], currShape.v1[0]);
      min5[1] = Math.min(min5[1], currShape.v1[1]);
      min5[2] = Math.min(min5[2], currShape.v1[2]);
      max5[0] = Math.max(max5[0], currShape.v1[0]);
      max5[1] = Math.max(max5[1], currShape.v1[1]);
      max5[2] = Math.max(max5[2], currShape.v1[2]);
      min5[0] = Math.min(min5[0], currShape.v2[0]);
      min5[1] = Math.min(min5[1], currShape.v2[1]);
      min5[2] = Math.min(min5[2], currShape.v2[2]);
      max5[0] = Math.max(max5[0], currShape.v2[0]);
      max5[1] = Math.max(max5[1], currShape.v2[1]);
      max5[2] = Math.max(max5[2], currShape.v2[2]);
      if (max5[0] - min5[0] < k_minDelta) {
        max5[0] += k_minDelta;
      }
      if (max5[1] - min5[1] < k_minDelta) {
        max5[1] += k_minDelta;
      }
      if (max5[2] - min5[2] < k_minDelta) {
        max5[2] += k_minDelta;
      }
      this._allShapes.push({ index: index2++, type: "triangle", shape: currShape, min: min5, max: max5 });
    }
    const min4 = exports_vec3.fromValues(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);
    const max4 = exports_vec3.fromValues(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);
    for (const currShape of this._allShapes) {
      min4[0] = Math.min(min4[0], currShape.min[0]);
      min4[1] = Math.min(min4[1], currShape.min[1]);
      min4[2] = Math.min(min4[2], currShape.min[2]);
      max4[0] = Math.max(max4[0], currShape.max[0]);
      max4[1] = Math.max(max4[1], currShape.max[1]);
      max4[2] = Math.max(max4[2], currShape.max[2]);
    }
    BVHNode.s_index = 0;
    this._rootNode = new BVHNode(min4, max4);
    this._rootNode.subDivide(this._allShapes);
  }
  fillDataTexture() {
    const pixels = [];
    if (!this._rootNode) {
      return pixels;
    }
    const allNodes = [];
    const _recFunc = (currNode) => {
      allNodes.push(currNode);
      if (currNode._leftNode) {
        _recFunc(currNode._leftNode);
      }
      if (currNode._rightNode) {
        _recFunc(currNode._rightNode);
      }
    };
    _recFunc(this._rootNode);
    allNodes.sort((a, b) => a._index - b._index);
    for (const currNode of allNodes) {
      pixels.push([
        currNode._min[0],
        currNode._min[1],
        currNode._min[2],
        currNode._max[0]
      ]);
      pixels.push([
        currNode._max[1],
        currNode._max[2],
        (currNode._leftNode?._index ?? -2) + 0.5,
        (currNode._rightNode?._index ?? -2) + 0.5
      ]);
      pixels.push([
        (currNode._leftLeaf?.index ?? -2) + 0.5,
        (currNode._rightLeaf?.index ?? -2) + 0.5,
        0,
        0
      ]);
    }
    return pixels;
  }
  render(renderer) {
    if (!this._rootNode) {
      return;
    }
    this._rootNode.render(renderer, [0.5, 0, 0]);
    for (const currShape of this._allShapes) {
      _renderAABB(renderer, currShape.min, currShape.max, [1, 1, 0]);
    }
  }
}

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/RayTracerRenderer.ts
var {
  WebGLContext: WebGLContext15,
  DataTextureVec4f32: DataTextureVec4f323,
  Texture: Texture4,
  FrameBuffer: FrameBuffer3,
  ShaderProgram: ShaderProgram3,
  GeometryWrapper
} = exports_graphics.webgl2;
var _degreeToRad = (angle3) => angle3 * Math.PI / 180;

class RayTracerRenderer {
  _cameraFovy;
  _canvasWidth;
  _canvasHeight;
  _renderWidth;
  _renderHeight;
  _resolutionCoef = 1;
  _antiAliasing = false;
  _rayTracerShaderProgram;
  _textureShaderProgram;
  _asciiArtShaderProgram;
  _rayTracerGeometry;
  _screenGeometry;
  _asciiArtScreenGeometry;
  _finalTexture;
  _frameBuffer;
  _sceneDataTexture;
  _spheres = [];
  _boxes = [];
  _triangles = [];
  _materialsDataTexture;
  _lightsDataTexture;
  _sunLights = [];
  _spotLights = [];
  _bvhDataTexture;
  _camera;
  _bvh = new BVH;
  constructor(inDef) {
    this._cameraFovy = inDef.fovy;
    this._renderWidth = this._canvasWidth = inDef.canvasWidth;
    this._renderHeight = this._canvasHeight = inDef.canvasHeight;
    this._rayTracerShaderProgram = new ShaderProgram3("RayTracerRenderer-1", {
      vertexSrc: ray_tracer_glsl_default,
      fragmentSrc: ray_tracer_glsl_default2,
      attributes: ["a_vertexPosition", "a_plotPosition"],
      uniforms: [
        "u_cameraEye",
        "u_sceneTextureData",
        "u_sceneTextureSize",
        "u_materialsTextureData",
        "u_totalShapes",
        "u_lightsTextureData",
        "u_sunLightsStop",
        "u_spotLightsStop",
        "u_bvhDataTexture"
      ]
    });
    this._textureShaderProgram = new ShaderProgram3("RayTracerRenderer-1", {
      vertexSrc: texture_glsl_default,
      fragmentSrc: texture_glsl_default2,
      attributes: ["a_vertexPosition", "a_vertexTextureCoord"],
      uniforms: ["u_texture", "u_step"]
    });
    this._asciiArtShaderProgram = new ShaderProgram3("RayTracerRenderer-ascii-art", {
      vertexSrc: ascii_art_glsl_default,
      fragmentSrc: ascii_art_glsl_default2,
      attributes: ["a_vertexPosition", "a_vertexTextureCoord"],
      uniforms: ["u_texture"]
    });
    this._finalTexture = new Texture4;
    this._frameBuffer = new FrameBuffer3;
    this._finalTexture.initialize();
    this._finalTexture.preBind((boundTexture) => {
      boundTexture.allocate(this._renderWidth, this._renderHeight);
      this._frameBuffer.bind((boundFrameBuffer) => {
        boundFrameBuffer.attachTexture(boundTexture);
      });
    });
    const geoBuilder = new GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangleStrip").addVbo().addVboAttribute("a_vertexPosition", "vec2f").addVbo().setVboAsDynamic().addVboAttribute("a_plotPosition", "vec3f");
    this._rayTracerGeometry = new GeometryWrapper.Geometry(this._rayTracerShaderProgram, geoBuilder.getDef());
    const rayTracerVertices = [];
    rayTracerVertices.push(1, 1);
    rayTracerVertices.push(-1, 1);
    rayTracerVertices.push(1, -1);
    rayTracerVertices.push(-1, -1);
    this._rayTracerGeometry.allocateBuffer(0, rayTracerVertices, rayTracerVertices.length);
    this._rayTracerGeometry.setPrimitiveStart(0);
    this._rayTracerGeometry.setPrimitiveCount(4);
    const screenVertices = [];
    screenVertices.push(1, 1, 1, 1);
    screenVertices.push(-1, 1, 0, 1);
    screenVertices.push(1, -1, 1, 0);
    screenVertices.push(-1, -1, 0, 0);
    geoBuilder.reset().setPrimitiveType("triangleStrip").addVbo().addVboAttribute("a_vertexPosition", "vec2f").addVboAttribute("a_vertexTextureCoord", "vec2f");
    this._screenGeometry = new GeometryWrapper.Geometry(this._asciiArtShaderProgram, geoBuilder.getDef());
    this._screenGeometry.allocateBuffer(0, screenVertices, screenVertices.length);
    this._screenGeometry.setPrimitiveStart(0);
    this._screenGeometry.setPrimitiveCount(4);
    this._asciiArtScreenGeometry = new GeometryWrapper.Geometry(this._asciiArtShaderProgram, geoBuilder.getDef());
    this._asciiArtScreenGeometry.allocateBuffer(0, screenVertices, screenVertices.length);
    this._asciiArtScreenGeometry.setPrimitiveStart(0);
    this._asciiArtScreenGeometry.setPrimitiveCount(4);
    this._sceneDataTexture = new DataTextureVec4f323;
    this._sceneDataTexture.initialize(2048);
    this._materialsDataTexture = new DataTextureVec4f323;
    this._materialsDataTexture.initialize(2048);
    this._lightsDataTexture = new DataTextureVec4f323;
    this._lightsDataTexture.initialize(2048);
    this._bvhDataTexture = new DataTextureVec4f323;
    this._bvhDataTexture.initialize(2048);
    this._camera = {
      position: exports_vec3.fromValues(0, 0, 0),
      target: exports_vec3.fromValues(1.5, 1.5, 1.5),
      up: exports_vec3.fromValues(0, 1, 0)
    };
  }
  pushSphere({
    position,
    orientation,
    radius,
    color,
    reflectionFactor,
    refractionFactor,
    chessboardEnabled,
    castShadowEnabled,
    receiveLightEnabled
  }) {
    if (radius <= 0) {
      throw new Error("invalid sphere radius");
    }
    if (reflectionFactor < 0 || reflectionFactor > 1) {
      throw new Error("invalid sphere reflection");
    }
    if (refractionFactor < 0 || refractionFactor > 1) {
      throw new Error("invalid sphere refractionFactor");
    }
    this._spheres.push({
      position: [position[0], position[1], position[2]],
      orientation: [orientation[0], orientation[1], orientation[2], orientation[3]],
      radius,
      color: [color[0], color[1], color[2]],
      reflectionFactor,
      refractionFactor,
      chessboardEnabled,
      castShadowEnabled,
      receiveLightEnabled
    });
  }
  pushBox({
    position,
    orientation,
    boxSize,
    color,
    reflectionFactor,
    refractionFactor,
    chessboardEnabled,
    castShadowEnabled,
    receiveLightEnabled
  }) {
    if (boxSize[0] <= 0 || boxSize[1] <= 0 || boxSize[2] <= 0) {
      throw new Error("invalid box size");
    }
    if (reflectionFactor < 0 || reflectionFactor > 1) {
      throw new Error("invalid box reflection");
    }
    this._boxes.push({
      position: [position[0], position[1], position[2]],
      orientation: [orientation[0], orientation[1], orientation[2], orientation[3]],
      boxSize: exports_vec3.clone(boxSize),
      color: exports_vec3.clone(color),
      reflectionFactor,
      refractionFactor,
      chessboardEnabled,
      castShadowEnabled,
      receiveLightEnabled
    });
  }
  pushTriangle({
    v0,
    v1,
    v2,
    color,
    reflectionFactor,
    castShadowEnabled,
    receiveLightEnabled
  }) {
    if (reflectionFactor < 0 || reflectionFactor > 1) {
      throw new Error("invalid triangle reflection");
    }
    this._triangles.push({
      v0: exports_vec3.clone(v0),
      v1: exports_vec3.clone(v1),
      v2: exports_vec3.clone(v2),
      color: exports_vec3.clone(color),
      reflectionFactor,
      castShadowEnabled,
      receiveLightEnabled
    });
  }
  pushSunLight({ direction, intensity }) {
    if (intensity <= 0)
      throw new Error("intensity cannot be 0");
    if (exports_vec3.length(direction) === 0)
      throw new Error("direction cannot be 0");
    const dir = exports_vec3.normalize(exports_vec3.clone(direction), direction);
    this._sunLights.push({ direction: dir, intensity });
  }
  pushSpotLight({ position, intensity, radius }) {
    if (intensity <= 0)
      throw new Error("intensity cannot be 0");
    if (radius <= 0)
      throw new Error("radius cannot be <= 0");
    this._spotLights.push({
      position: exports_vec3.clone(position),
      intensity,
      radius
    });
  }
  lookAt(eye, target, up) {
    exports_vec3.copy(this._camera.position, eye);
    let forwardDir = exports_vec3.sub(exports_vec3.create(), target, eye);
    forwardDir = exports_vec3.normalize(forwardDir, forwardDir);
    forwardDir = exports_vec3.add(forwardDir, eye, forwardDir);
    exports_vec3.copy(this._camera.target, forwardDir);
    const upDir = exports_vec3.normalize(exports_vec3.create(), up);
    exports_vec3.copy(this._camera.up, upDir);
  }
  render() {
    this._renderTexturePass();
    this._renderRayTracingPass();
  }
  renderAsciiArt() {
    this._renderAsciiArtTexturePass();
    this._renderRayTracingPass();
  }
  _renderTexturePass() {
    const gl = WebGLContext15.getContext();
    gl.viewport(0, 0, this._canvasWidth, this._canvasHeight);
    gl.clear(gl.COLOR_BUFFER_BIT);
    const shader = this._textureShaderProgram;
    shader.bind((boundShader) => {
      boundShader.setTextureUniform("u_texture", this._finalTexture, 0);
      if (this._antiAliasing) {
        const stepX = (1 - this._renderWidth / this._canvasWidth) * 0.005;
        const stepY = (1 - this._renderHeight / this._canvasHeight) * 0.005;
        boundShader.setFloat2Uniform("u_step", stepX, stepY);
      } else {
        boundShader.setFloat2Uniform("u_step", 0, 0);
      }
      this._screenGeometry.render();
    });
  }
  _renderAsciiArtTexturePass() {
    const gl = WebGLContext15.getContext();
    gl.viewport(0, 0, this._canvasWidth, this._canvasHeight);
    gl.clear(gl.COLOR_BUFFER_BIT);
    const shader = this._asciiArtShaderProgram;
    shader.bind((boundShader) => {
      boundShader.setTextureUniform("u_texture", this._finalTexture, 0);
      this._asciiArtScreenGeometry.render();
    });
  }
  _renderRayTracingPass() {
    const gl = WebGLContext15.getContext();
    const farCorners = this._computeCameraFarCorners();
    this._rayTracerGeometry.allocateBuffer(1, farCorners, farCorners.length);
    const scaledWidth = Math.floor(this._renderWidth);
    const scaledHeight = Math.floor(this._renderHeight);
    this._bvh.synchronize(this._spheres, this._boxes, this._triangles);
    const bvhPixelsData = this._bvh.fillDataTexture();
    this._bvhDataTexture.bind((boundTexture) => {
      boundTexture.update(0, bvhPixelsData);
    });
    this._frameBuffer.bind(() => {
      gl.viewport(0, 0, scaledWidth, scaledHeight);
      gl.clear(gl.COLOR_BUFFER_BIT);
      {
        const shader = this._rayTracerShaderProgram;
        shader.bind((boundShader) => {
          boundShader.setFloat3Uniform("u_cameraEye", this._camera.position[0], this._camera.position[1], this._camera.position[2]);
          {
            const sceneDataValues = [];
            const materialsDataValues = [];
            let materialIndex = 0;
            {
              {
                for (const sphere of this._spheres) {
                  sceneDataValues.push([
                    1,
                    materialIndex + 0.5,
                    sphere.position[0],
                    sphere.position[1]
                  ]);
                  sceneDataValues.push([
                    sphere.position[2],
                    sphere.orientation[0],
                    sphere.orientation[1],
                    sphere.orientation[2]
                  ]);
                  sceneDataValues.push([
                    sphere.orientation[3],
                    sphere.radius,
                    0,
                    0
                  ]);
                  materialsDataValues.push([
                    sphere.color[0],
                    sphere.color[1],
                    sphere.color[2],
                    sphere.reflectionFactor
                  ]);
                  materialsDataValues.push([
                    sphere.refractionFactor,
                    sphere.castShadowEnabled ? 1 : 0,
                    sphere.receiveLightEnabled ? 1 : 0,
                    sphere.chessboardEnabled ? 1 : 0
                  ]);
                  materialIndex += 1;
                }
              }
              {
                for (const box of this._boxes) {
                  sceneDataValues.push([
                    2,
                    materialIndex + 0.5,
                    box.position[0],
                    box.position[1]
                  ]);
                  sceneDataValues.push([
                    box.position[2],
                    box.orientation[0],
                    box.orientation[1],
                    box.orientation[2]
                  ]);
                  sceneDataValues.push([
                    box.orientation[3],
                    box.boxSize[0],
                    box.boxSize[1],
                    box.boxSize[2]
                  ]);
                  materialsDataValues.push([
                    box.color[0],
                    box.color[1],
                    box.color[2],
                    box.reflectionFactor
                  ]);
                  materialsDataValues.push([
                    box.refractionFactor,
                    box.castShadowEnabled ? 1 : 0,
                    box.receiveLightEnabled ? 1 : 0,
                    box.chessboardEnabled ? 1 : 0
                  ]);
                  materialIndex += 1;
                }
              }
              {
                for (const triangle of this._triangles) {
                  sceneDataValues.push([
                    3,
                    materialIndex + 0.5,
                    triangle.v0[0],
                    triangle.v0[1]
                  ]);
                  sceneDataValues.push([
                    triangle.v0[2],
                    triangle.v1[0],
                    triangle.v1[1],
                    triangle.v1[2]
                  ]);
                  sceneDataValues.push([
                    triangle.v2[0],
                    triangle.v2[1],
                    triangle.v2[2],
                    0
                  ]);
                  materialsDataValues.push([
                    triangle.color[0],
                    triangle.color[1],
                    triangle.color[2],
                    triangle.reflectionFactor
                  ]);
                  materialsDataValues.push([
                    0,
                    triangle.castShadowEnabled ? 1 : 0,
                    triangle.receiveLightEnabled ? 1 : 0,
                    0
                  ]);
                  materialIndex += 1;
                }
                boundShader.setInteger1Uniform("u_totalShapes", sceneDataValues.length);
              }
            }
            gl.activeTexture(gl.TEXTURE0 + 0);
            this._sceneDataTexture.preBind((boundDataTexture) => {
              boundDataTexture.update(0, sceneDataValues);
            });
            boundShader.setInteger1Uniform("u_sceneTextureData", 0);
            boundShader.setInteger1Uniform("u_sceneTextureSize", sceneDataValues.length);
            {
              gl.activeTexture(gl.TEXTURE0 + 7);
              this._materialsDataTexture.preBind((boundDataTexture) => {
                boundDataTexture.update(0, materialsDataValues);
              });
              boundShader.setInteger1Uniform("u_materialsTextureData", 7);
            }
          }
          {
            const lightsDataValues = [];
            {
              for (const sunLight of this._sunLights) {
                lightsDataValues.push([
                  sunLight.direction[0],
                  sunLight.direction[1],
                  sunLight.direction[2],
                  sunLight.intensity
                ]);
              }
              boundShader.setInteger1Uniform("u_sunLightsStop", lightsDataValues.length);
            }
            {
              for (const spotLight of this._spotLights) {
                lightsDataValues.push([
                  spotLight.position[0],
                  spotLight.position[1],
                  spotLight.position[2],
                  spotLight.radius
                ]);
                lightsDataValues.push([
                  spotLight.intensity,
                  0,
                  0,
                  0
                ]);
              }
              boundShader.setInteger1Uniform("u_spotLightsStop", lightsDataValues.length);
            }
            gl.activeTexture(gl.TEXTURE0 + 1);
            this._lightsDataTexture.preBind((boundDataTexture) => {
              boundDataTexture.update(0, lightsDataValues);
            });
            boundShader.setInteger1Uniform("u_lightsTextureData", 1);
          }
          {
            gl.activeTexture(gl.TEXTURE0 + 6);
            this._bvhDataTexture.preBind((boundDataTexture) => {
              boundDataTexture.update(0, bvhPixelsData);
            });
            boundShader.setInteger1Uniform("u_bvhDataTexture", 6);
          }
          this._rayTracerGeometry.render();
        });
      }
    });
    gl.viewport(0, 0, this._canvasWidth, this._canvasHeight);
  }
  reset() {
    this._sunLights.length = 0;
    this._spotLights.length = 0;
    this._spheres.length = 0;
    this._boxes.length = 0;
    this._triangles.length = 0;
  }
  bvhRender(renderer) {
    this._bvh.render(renderer);
  }
  setResolutionCoef(inResolutionCoef) {
    if (inResolutionCoef === this._resolutionCoef || inResolutionCoef <= 0 || inResolutionCoef > 1) {
      return;
    }
    this._resolutionCoef = inResolutionCoef;
    this._renderWidth = Math.floor(this._canvasWidth * this._resolutionCoef);
    this._renderHeight = Math.floor(this._canvasHeight * this._resolutionCoef);
    this._finalTexture.preBind((boundTexture) => {
      boundTexture.resize(this._renderWidth, this._renderHeight);
    });
  }
  getResolutionCoef() {
    return this._resolutionCoef;
  }
  setAntiAliasing(enabled) {
    this._antiAliasing = enabled;
  }
  getAntiAliasing() {
    return this._antiAliasing;
  }
  getCurrentSize() {
    return [this._renderWidth, this._renderHeight];
  }
  _computeCameraFarCorners() {
    const forwardDir = exports_vec3.sub(exports_vec3.create(), this._camera.target, this._camera.position);
    const leftDir = exports_vec3.cross(exports_vec3.create(), forwardDir, this._camera.up);
    const upDir = exports_vec3.cross(exports_vec3.create(), leftDir, forwardDir);
    const radHFovy = _degreeToRad(this._cameraFovy * 0.5);
    const xLength = Math.cos(radHFovy) * 1 / Math.sin(radHFovy);
    const scaledForwardDir = exports_vec3.multiply(exports_vec3.create(), forwardDir, exports_vec3.fromValues(xLength, xLength, xLength));
    const farCenter = exports_vec3.add(exports_vec3.create(), this._camera.position, scaledForwardDir);
    const aspectRatio = this._canvasWidth / this._canvasHeight;
    const farHalfWidth = exports_vec3.multiply(exports_vec3.create(), leftDir, exports_vec3.fromValues(aspectRatio, aspectRatio, aspectRatio));
    const farUp = exports_vec3.add(exports_vec3.create(), farCenter, upDir);
    const farBottom = exports_vec3.subtract(exports_vec3.create(), farCenter, upDir);
    const farTopLeft = exports_vec3.subtract(exports_vec3.create(), farUp, farHalfWidth);
    const farBottomLeft = exports_vec3.subtract(exports_vec3.create(), farBottom, farHalfWidth);
    const farTopRight = exports_vec3.add(exports_vec3.create(), farUp, farHalfWidth);
    const farBottomRight = exports_vec3.add(exports_vec3.create(), farBottom, farHalfWidth);
    return [
      farTopRight[0],
      farTopRight[1],
      farTopRight[2],
      farTopLeft[0],
      farTopLeft[1],
      farTopLeft[2],
      farBottomRight[0],
      farBottomRight[1],
      farBottomRight[2],
      farBottomLeft[0],
      farBottomLeft[1],
      farBottomLeft[2]
    ];
  }
  get canvasWidth() {
    return this._canvasWidth;
  }
  get canvasHeight() {
    return this._canvasHeight;
  }
  get renderWidth() {
    return this._renderWidth;
  }
  get renderHeight() {
    return this._renderHeight;
  }
  get camera() {
    return this._camera;
  }
  get spheres() {
    return this._spheres;
  }
  get boxes() {
    return this._boxes;
  }
  get triangles() {
    return this._triangles;
  }
  get sunLights() {
    return this._sunLights;
  }
  get spotLights() {
    return this._spotLights;
  }
}
// src/webgl-ray-tracer/src/experiment/graphics/Renderer.ts
var { WebGLContext: WebGLContext16 } = exports_graphics.webgl2;
var { Camera: Camera3 } = exports_graphics.camera;
var { TextRenderer: TextRenderer3, StackRenderers: StackRenderers3 } = exports_graphics.renderers;
var k_fovy = 70;

class Renderer {
  _def;
  _rayTracerRenderer;
  _textRenderer;
  _stackRenderers;
  _multipleBuffering;
  _debugSceneCamera = new Camera3;
  _mainHudCamera = new Camera3;
  constructor(def) {
    this._def = def;
    this.resize(this._def.canvasDomElement.width, this._def.canvasDomElement.height);
    WebGLContext16.initialize(this._def.canvasDomElement);
    this._rayTracerRenderer = new RayTracerRenderer({
      canvasWidth: this._def.canvasDomElement.width,
      canvasHeight: this._def.canvasDomElement.height,
      fovy: k_fovy
    });
    this._textRenderer = new TextRenderer3;
    this._stackRenderers = new StackRenderers3;
    this._multipleBuffering = new exports_graphics.renderers.MultiBuffersRendering(this._def.canvasDomElement.width, this._def.canvasDomElement.height);
  }
  initialize() {
    const gl = WebGLContext16.getContext();
    gl.disable(gl.DEPTH_TEST);
    gl.disable(gl.BLEND);
    gl.disable(gl.CULL_FACE);
    gl.depthFunc(gl.NEVER);
    gl.clearColor(0, 0, 0, 1);
    gl.clearDepth(1);
  }
  resize(width, height) {
    this._debugSceneCamera.setViewportSize(width, height);
    this._debugSceneCamera.setAsPerspective({
      fovy: k_fovy,
      near: 1,
      far: 500
    });
    this._mainHudCamera.setViewportSize(width, height);
    const hWidth = width * 0.5;
    const hHeight = height * 0.5;
    this._mainHudCamera.setAsOrthogonal({
      left: -hWidth,
      right: +hWidth,
      top: -hHeight,
      bottom: +hHeight,
      near: -200,
      far: 200
    });
    this._mainHudCamera.setEye([hWidth, hHeight, 1]);
    this._mainHudCamera.setTarget([hWidth, hHeight, 0]);
    this._mainHudCamera.setUpAxis([0, 1, 0]);
    this._mainHudCamera.computeMatrices();
  }
  _pushWireFrameSphere(sphere) {
    const X = 0.5257311121191336 * sphere.radius;
    const Z = 0.8506508083520399 * sphere.radius;
    const N = 0;
    const positions = [
      [-X, N, Z],
      [X, N, Z],
      [-X, N, -Z],
      [X, N, -Z],
      [N, Z, X],
      [N, Z, -X],
      [N, -Z, X],
      [N, -Z, -X],
      [Z, X, N],
      [-Z, X, N],
      [Z, -X, N],
      [-Z, -X, N]
    ];
    for (let ii = 0;ii < positions.length; ++ii) {
      positions[ii][0] += sphere.position[0];
      positions[ii][1] += sphere.position[1];
      positions[ii][2] += sphere.position[2];
    }
    const indices = [
      [0, 4, 1],
      [0, 9, 4],
      [9, 5, 4],
      [4, 5, 8],
      [4, 8, 1],
      [8, 10, 1],
      [8, 3, 10],
      [5, 3, 8],
      [5, 2, 3],
      [2, 7, 3],
      [7, 10, 3],
      [7, 6, 10],
      [7, 11, 6],
      [11, 0, 6],
      [0, 1, 6],
      [6, 1, 10],
      [9, 0, 11],
      [9, 11, 2],
      [9, 2, 5],
      [7, 2, 11]
    ];
    for (const index2 of indices) {
      const v1 = positions[index2[0]];
      const v2 = positions[index2[1]];
      const v3 = positions[index2[2]];
      this._stackRenderers.pushLine(v1, v2, sphere.color);
      this._stackRenderers.pushLine(v2, v3, sphere.color);
      this._stackRenderers.pushLine(v3, v1, sphere.color);
    }
  }
  _pushWireFrameBox(box) {
    const vertices = [
      exports_vec3.fromValues(-box.boxSize[0], -box.boxSize[1], -box.boxSize[2]),
      exports_vec3.fromValues(+box.boxSize[0], -box.boxSize[1], -box.boxSize[2]),
      exports_vec3.fromValues(-box.boxSize[0], +box.boxSize[1], -box.boxSize[2]),
      exports_vec3.fromValues(+box.boxSize[0], +box.boxSize[1], -box.boxSize[2]),
      exports_vec3.fromValues(-box.boxSize[0], -box.boxSize[1], +box.boxSize[2]),
      exports_vec3.fromValues(+box.boxSize[0], -box.boxSize[1], +box.boxSize[2]),
      exports_vec3.fromValues(-box.boxSize[0], +box.boxSize[1], +box.boxSize[2]),
      exports_vec3.fromValues(+box.boxSize[0], +box.boxSize[1], +box.boxSize[2])
    ];
    const vertices2 = [];
    vertices.forEach((vertex) => {
      const pos = exports_vec3.fromValues(0, 0, 0);
      const mat4 = exports_mat4.identity(exports_mat4.create());
      exports_mat4.translate(mat4, mat4, box.position);
      const mat4b = exports_mat4.fromQuat(exports_mat4.create(), box.orientation);
      exports_mat4.multiply(mat4, mat4, mat4b);
      exports_vec3.transformMat4(pos, vertex, mat4);
      vertices2.push(pos);
    });
    const indicesGroup = [
      [0, 1],
      [1, 3],
      [3, 2],
      [2, 0],
      [4, 5],
      [5, 7],
      [7, 6],
      [6, 4],
      [0, 4],
      [1, 5],
      [3, 7],
      [2, 6]
    ];
    indicesGroup.forEach((index2) => {
      this._stackRenderers.pushLine(vertices2[index2[0]], vertices2[index2[1]], box.color);
    });
  }
  _pushWireFrameTriangle(triangle) {
    this._stackRenderers.pushLine(triangle.v0, triangle.v1, triangle.color);
    this._stackRenderers.pushLine(triangle.v1, triangle.v2, triangle.color);
    this._stackRenderers.pushLine(triangle.v2, triangle.v0, triangle.color);
  }
  safeSceneWireFrame(inCallback) {
    this._debugSceneCamera.setEye(this._rayTracerRenderer.camera.position);
    this._debugSceneCamera.setTarget(this._rayTracerRenderer.camera.target);
    this._debugSceneCamera.setUpAxis(this._rayTracerRenderer.camera.up);
    this._debugSceneCamera.computeMatrices();
    this._stackRenderers.safeRender(this._debugSceneCamera.getComposedMatrix(), inCallback);
  }
  flushHudWireFrame() {
    this._stackRenderers.flush(this._mainHudCamera.getComposedMatrix());
  }
  flushHudText() {
    this._textRenderer.flush(this._mainHudCamera.getComposedMatrix());
  }
  setupDebugRenderer() {
    this._rayTracerRenderer.bvhRender(this._stackRenderers);
    this._rayTracerRenderer.spheres.forEach((sphere) => {
      this._pushWireFrameSphere(sphere);
    });
    this._rayTracerRenderer.boxes.forEach((box) => {
      this._pushWireFrameBox(box);
    });
    this._rayTracerRenderer.triangles.forEach((triangle) => {
      this._pushWireFrameTriangle(triangle);
    });
  }
  get rayTracerRenderer() {
    return this._rayTracerRenderer;
  }
  get stackRenderers() {
    return this._stackRenderers;
  }
  get textRenderer() {
    return this._textRenderer;
  }
  get multipleBuffering() {
    return this._multipleBuffering;
  }
  get debugSceneCamera() {
    return this._debugSceneCamera;
  }
  get mainHudCamera() {
    return this._mainHudCamera;
  }
}

// src/webgl-ray-tracer/src/experiment/scenes/TestScene2.ts
var continuousTime = 0;
var continuousAngle = 0;
var currStep = 0;
var nextStep = 1;
var allSteps = [
  [-5, 4, 0],
  [5, 4, 0],
  [5, 10, 0],
  [-5, 10, 0]
];

class TestScene2 {
  reset() {
    continuousTime = 0;
    continuousAngle = 0;
    currStep = 0;
    nextStep = 1;
  }
  run(elapsedTime, renderer, physicWorld) {
    continuousAngle += elapsedTime * 2;
    if (continuousAngle >= Math.PI * 2) {
      continuousAngle -= Math.PI * 2;
    }
    continuousTime += elapsedTime * 0.75;
    if (continuousTime > 1) {
      continuousTime = 0;
      currStep = (currStep + 1) % allSteps.length;
      nextStep = (currStep + 1) % allSteps.length;
    }
    const lightPos = [
      allSteps[currStep][0] + (allSteps[nextStep][0] - allSteps[currStep][0]) * continuousTime,
      allSteps[currStep][1] + (allSteps[nextStep][1] - allSteps[currStep][1]) * continuousTime,
      allSteps[currStep][2] + (allSteps[nextStep][2] - allSteps[currStep][2]) * continuousTime
    ];
    {
      renderer.rayTracerRenderer.pushSpotLight({
        position: [0, 10, 10],
        intensity: 2,
        radius: 20
      });
      renderer.rayTracerRenderer.pushSphere({
        position: [0, 10, 10],
        orientation: [0, 0, 1, 0],
        radius: 0.25,
        color: [1, 1, 1],
        reflectionFactor: 0,
        refractionFactor: 0,
        chessboardEnabled: false,
        receiveLightEnabled: false,
        castShadowEnabled: false
      });
      renderer.rayTracerRenderer.pushSpotLight({
        position: lightPos,
        intensity: 2,
        radius: 10
      });
      renderer.rayTracerRenderer.pushSphere({
        position: lightPos,
        orientation: [0, 0, 1, 0],
        radius: 0.25,
        color: [1, 1, 1],
        reflectionFactor: 0,
        refractionFactor: 0,
        chessboardEnabled: false,
        receiveLightEnabled: false,
        castShadowEnabled: false
      });
      const allBoxes = [
        { pos: [-2, 4, -1], size: [1, 1.125, 0.125] },
        { pos: [-2, 4, 1], size: [1, 1.125, 0.125] },
        { pos: [-2, 3, 0], size: [1, 0.125, 1.125] },
        { pos: [-2, 5, 0], size: [1, 0.125, 1.125] },
        { pos: [2, 4, -1], size: [1, 1.125, 0.125] },
        { pos: [2, 4, 1], size: [1, 1.125, 0.125] },
        { pos: [2, 3, 0], size: [1, 0.125, 1.125] },
        { pos: [2, 5, 0], size: [1, 0.125, 1.125] },
        { pos: [0, 8, -8], size: [8, 8, 0.125], color: [1, 0.5, 0.5] },
        { pos: [-8, 8, 0], size: [0.125, 8, 8], color: [0.5, 1, 0.5] },
        { pos: [8, 8, 0], size: [0.125, 8, 8], color: [0.5, 0.5, 1] },
        { pos: [0, 0, -1], size: [8, 0.125, 8], reflectionFactor: 0.3 }
      ];
      allBoxes.forEach(({ pos, size, color, reflectionFactor }) => {
        renderer.rayTracerRenderer.pushBox({
          position: pos,
          orientation: [0, 0, 1, 0],
          boxSize: size,
          color: color ?? [1, 1, 1],
          reflectionFactor: reflectionFactor ?? 0,
          refractionFactor: 0,
          chessboardEnabled: false,
          receiveLightEnabled: true,
          castShadowEnabled: true
        });
      });
      {
        const allRotatedBoxes = [
          {
            pos: [
              5 + 1 * Math.cos(continuousAngle),
              6,
              0 + 1 * Math.sin(continuousAngle)
            ],
            angleY: -continuousAngle,
            size: [0.125, 1, 1.125]
          },
          {
            pos: [
              5 - 1 * Math.cos(continuousAngle),
              8,
              0 - 1 * Math.sin(continuousAngle)
            ],
            angleY: -continuousAngle,
            size: [0.125, 1, 1.125]
          },
          {
            pos: [
              5 + 1 * Math.cos(continuousAngle + Math.PI * 0.5),
              7,
              0 + 1 * Math.sin(continuousAngle + Math.PI * 0.5)
            ],
            angleY: -continuousAngle + Math.PI * 0.5,
            size: [0.125, 2, 1]
          },
          {
            pos: [
              5 + 1 * Math.cos(continuousAngle - Math.PI * 0.5),
              7,
              0 + 1 * Math.sin(continuousAngle - Math.PI * 0.5)
            ],
            angleY: -continuousAngle - Math.PI * 0.5,
            size: [0.125, 2, 1]
          }
        ];
        allRotatedBoxes.forEach(({ pos, angleY, size }) => {
          renderer.rayTracerRenderer.pushBox({
            position: pos,
            orientation: exports_quat.setAxisAngle(exports_quat.create(), [0, 1, 0], angleY),
            boxSize: size,
            color: [0, 1, 0],
            reflectionFactor: 0,
            refractionFactor: 0,
            chessboardEnabled: false,
            receiveLightEnabled: true,
            castShadowEnabled: true
          });
        });
      }
    }
  }
}
// src/webgl-ray-tracer/src/experiment/Experiment.ts
var {
  GlobalMouseManager: GlobalMouseManager2,
  GlobalKeyboardManager: GlobalKeyboardManager2,
  GlobalTouchManager: GlobalTouchManager2,
  GlobalVisibilityManager: GlobalVisibilityManager2,
  GlobalPointerLockManager: GlobalPointerLockManager2
} = exports_system.browser;
var { WebGLContext: WebGLContext17 } = exports_graphics.webgl2;
var { FreeFlyController: FreeFlyController3 } = exports_system.controllers;
var g_frames_left = 3;
var framerate = -1;
var k_maxFramesUntilNextCheck = 3;

class Experiment {
  _canvasElement;
  _animationFrameHandle = 0;
  _def;
  _freeFlyController;
  _renderer;
  _physicWorld;
  _running;
  _errorGraphicContext;
  _lastFrameTime = Date.now();
  _currFrameMsecTime = Date.now();
  _frameProfiler = new exports_system.metrics.FrameProfiler;
  _perfAutoScalingEnabled = true;
  _framesUntilNextCheck = k_maxFramesUntilNextCheck;
  _scene = new TestScene2;
  constructor(inDef) {
    this._canvasElement = inDef.canvasElement;
    this._def = inDef;
    this._freeFlyController = new FreeFlyController3({
      coordinates: ["Z", "X", "Y"],
      position: [-5, 5, 10],
      theta: Math.PI * 1.05,
      phi: -Math.PI * 0.25,
      mouseSensibility: 6,
      keyboardSensibility: Math.PI * 0.55,
      touchSensibility: 8,
      movingSpeed: 16
    });
    {
      GlobalKeyboardManager2.activate();
      GlobalTouchManager2.activate(this._canvasElement);
      GlobalVisibilityManager2.activate();
      GlobalVisibilityManager2.addVisibilityChange((isVisible) => {
        if (isVisible === false) {
          this._def.logger.log("document visibility changed: hidden");
          this.stop();
        } else {
          this._def.logger.log("document visibility changed: visible");
          this.start();
        }
      });
      GlobalPointerLockManager2.allowPointerLockedOnClickEvent(this._canvasElement);
      GlobalPointerLockManager2.addOnLockChange(() => {
        const isLocked = GlobalPointerLockManager2.isPointerLocked(this._canvasElement);
        if (isLocked) {
          this._def.logger.log("The pointer lock status is now locked");
          GlobalMouseManager2.activate(this._canvasElement);
        } else {
          this._def.logger.log("The pointer lock status is now unlocked");
          GlobalMouseManager2.deactivate(this._canvasElement);
          GlobalPointerLockManager2.allowPointerLockedOnClickEvent(this._canvasElement);
        }
      });
      GlobalPointerLockManager2.addOnLockError((event) => {
        this._def.logger.log(`The pointer lock sent an error, event: "${JSON.stringify(event)}"`);
      });
      this._renderer = new Renderer({ canvasDomElement: this._canvasElement });
      this._renderer.initialize();
    }
    this._running = false;
    this._errorGraphicContext = false;
    this._def.resolution.addEventListener("input", (event) => {
      const newValue = this._def.resolution.value;
      this._setResolution(newValue);
      this._logResolution();
    });
    this._def.anti_aliasing_enabled.addEventListener("click", () => {
      const newValue = this._def.anti_aliasing_enabled.checked === true;
      this._renderer.rayTracerRenderer.setAntiAliasing(newValue);
      this._def.logger.log(`Anti aliasing change: ${newValue === true ? "enabled" : "disabled"}`);
    });
    this._setResolution(this._def.resolution.value);
    this._def.perfAutoScaling.addEventListener("input", () => {
      this._framesUntilNextCheck = k_maxFramesUntilNextCheck;
      this._perfAutoScalingEnabled = this._def.perfAutoScaling.checked === true;
      this._def.logger.log(`Performance auto scaler change: ${this._perfAutoScalingEnabled === true ? "enabled" : "disabled"}`);
    });
  }
  async init() {
    await this._renderer.initialize();
    await $BrowserFrankenPhysWasmModule.load({
      jsUrl: "./dist/wasm/FrankenPhys.0.0.1.js",
      wasmUrl: "./dist/wasm"
    });
    $physics.WasmModuleHolder.set($BrowserFrankenPhysWasmModule.get());
    this._physicWorld = new $physics.PhysicWorld;
    this._physicWorld.setGravity(0, -10, 0);
    let debugDrawerFlag = 0;
    debugDrawerFlag |= $physics.DebugDrawFlags.DBG_DrawWireframe;
    debugDrawerFlag |= $physics.DebugDrawFlags.DBG_DrawAabb;
    debugDrawerFlag |= $physics.DebugDrawFlags.DBG_DrawContactPoints;
    debugDrawerFlag |= $physics.DebugDrawFlags.DBG_DrawConstraints;
    debugDrawerFlag |= $physics.DebugDrawFlags.DBG_DrawConstraintLimits;
    debugDrawerFlag |= $physics.DebugDrawFlags.DBG_DrawNormals;
    debugDrawerFlag |= $physics.DebugDrawFlags.DBG_DrawFrames;
    this._physicWorld.setDebugWireframeFeaturesFlag(debugDrawerFlag);
    this._physicWorld.setDebugWireframeCallback((x1, y1, z1, x2, y2, z2, r, g, b) => {
      this._renderer.stackRenderers.pushLine([x1, y1, z1], [x2, y2, z2], [r, g, b]);
    });
  }
  resize(inWidth, inHeight, inIsFullScreen) {
    let currentWidth = inWidth;
    let currentHeight = inHeight;
    if (inIsFullScreen) {
      this._canvasElement.style.position = "absolute";
      currentWidth = window.innerWidth;
      currentHeight = window.innerHeight;
    } else {
      this._canvasElement.style.position = "relative";
    }
    this._canvasElement.style.left = "0px";
    this._canvasElement.style.top = "0px";
    this._canvasElement.style.width = `${currentWidth}px`;
    this._canvasElement.style.height = `${currentHeight}px`;
    this._canvasElement.width = currentWidth;
    this._canvasElement.height = currentHeight;
    this._renderer.resize(currentWidth, currentHeight);
  }
  start() {
    if (this.isRunning()) {
      return;
    }
    this._running = true;
    this._tick();
  }
  stop() {
    if (!this.isRunning()) {
      return;
    }
    this._running = false;
    if (framerate < 0) {
      window.cancelAnimationFrame(this._animationFrameHandle);
    } else {
      window.clearTimeout(this._animationFrameHandle);
    }
  }
  isRunning() {
    return this._running && !this._errorGraphicContext;
  }
  _tick() {
    const tick = () => {
      if (!this._running || this._errorGraphicContext) {
        return;
      }
      if (g_frames_left-- <= 0) {
      }
      if (framerate < 0) {
        this._animationFrameHandle = window.requestAnimationFrame(tick);
      } else {
        this._animationFrameHandle = window.setTimeout(tick, 1000 / framerate);
      }
      this._mainLoop();
    };
    tick();
  }
  _mainLoop() {
    const currentMsecTime = Date.now();
    const deltaFrameMsecTime = currentMsecTime - this._lastFrameTime;
    this._lastFrameTime = currentMsecTime;
    this._handlePerformanceAutoScaling(deltaFrameMsecTime);
    this._frameProfiler.pushDelta(deltaFrameMsecTime);
    const deltaMsecTime = currentMsecTime - this._currFrameMsecTime;
    this._currFrameMsecTime = currentMsecTime;
    const safeDelta = Math.min(deltaMsecTime, 100);
    const deltaSecTime = safeDelta / 1000;
    this._freeFlyController.update(deltaSecTime);
    GlobalMouseManager2.resetDeltas();
    GlobalTouchManager2.resetDeltas();
    if (this._physicWorld) {
      this._scene.run(deltaSecTime, this._renderer, this._physicWorld);
    }
    this._renderScene();
    this._renderHud();
  }
  _renderHud() {
    const gl = WebGLContext17.getContext();
    gl.viewport(0, 0, this._canvasElement.width, this._canvasElement.height);
    gl.clear(gl.DEPTH_BUFFER_BIT);
    gl.enable(gl.DEPTH_TEST);
    gl.depthFunc(gl.LESS);
    {
      const keyEventsPos = [27, 165];
      const touchEventsPos = [27, 260];
      const boardPos = [7, 35];
      exports_graphics.renderers.widgets.addKeyStrokesWidgets(keyEventsPos, this._renderer.stackRenderers, this._renderer.textRenderer);
      exports_graphics.renderers.widgets.addArrowStrokesWidgets(touchEventsPos, this._renderer.stackRenderers, this._renderer.textRenderer);
      exports_graphics.renderers.widgets.addKeysTouchesWidgets(this._canvasElement, boardPos, this._renderer.stackRenderers, this._renderer.textRenderer);
    }
    exports_graphics.renderers.widgets.renderFpsMeter([10, this._canvasElement.height - 60, 0], [100, 50], this._frameProfiler, this._renderer.stackRenderers, this._renderer.textRenderer, true);
    this._renderer.flushHudWireFrame();
    this._renderer.flushHudText();
    this._renderer.rayTracerRenderer.reset();
  }
  _renderScene() {
    {
      const gl = WebGLContext17.getContext();
      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
      gl.disable(gl.DEPTH_TEST);
    }
    this._renderer.rayTracerRenderer.lookAt(this._freeFlyController.getPosition(), this._freeFlyController.getTarget(), this._freeFlyController.getUpAxis());
    this._renderer.rayTracerRenderer.renderAsciiArt();
    const showDebug = this._def.physic_debug_mode_enabled.checked === true;
    if (showDebug) {
      this._renderer.stackRenderers.clear();
      this._renderer.safeSceneWireFrame(() => {
        const axisOrigin = [0, 0, 0];
        const axisX = [100, 0, 0];
        const axisY = [0, 100, 0];
        const axisZ = [0, 0, 100];
        this._renderer.stackRenderers.pushLine(axisOrigin, axisX, [1, 0, 0]);
        this._renderer.stackRenderers.pushLine(axisOrigin, axisY, [0, 1, 0]);
        this._renderer.stackRenderers.pushLine(axisOrigin, axisZ, [0, 0, 1]);
        this._physicWorld.debugDrawWorld();
      });
    }
    const showBvhDebug = this._def.bvh_debug_mode_enabled.checked === true;
    if (showBvhDebug) {
      this._renderer.stackRenderers.clear();
      this._renderer.safeSceneWireFrame(() => {
        const axisOrigin = [0, 0, 0];
        const axisX = [100, 0, 0];
        const axisY = [0, 100, 0];
        const axisZ = [0, 0, 100];
        this._renderer.stackRenderers.pushLine(axisOrigin, axisX, [1, 0, 0]);
        this._renderer.stackRenderers.pushLine(axisOrigin, axisY, [0, 1, 0]);
        this._renderer.stackRenderers.pushLine(axisOrigin, axisZ, [0, 0, 1]);
        this._renderer.setupDebugRenderer();
      });
    }
  }
  _setResolution(inValue) {
    const safeValue = exports_system.math.clamp(inValue, 0, 9);
    const newValue = 10 - safeValue;
    const newCoef = 1 / newValue;
    this._renderer.rayTracerRenderer.setResolutionCoef(newCoef);
  }
  _logResolution() {
    const rayTracerRenderer = this._renderer.rayTracerRenderer;
    const newCoef = rayTracerRenderer.getResolutionCoef();
    const newSize = rayTracerRenderer.getCurrentSize();
    const totalPixels = newSize[0] * newSize[1];
    this._def.logger.log(`resolution changed (1/${Math.ceil(1 / newCoef)}) => ${newSize[0]}x${newSize[1]} (${totalPixels}px)`);
  }
  _handlePerformanceAutoScaling(inDeltaMsecTime) {
    if (this._perfAutoScalingEnabled !== true) {
      return;
    }
    if (inDeltaMsecTime <= 20) {
      this._framesUntilNextCheck = k_maxFramesUntilNextCheck;
      return;
    }
    --this._framesUntilNextCheck;
    if (this._framesUntilNextCheck > 0) {
      return;
    }
    this._def.logger.log(`performance auto scaling: slow framerate, scaling down resolution`);
    const currValue = this._def.resolution.value;
    const newValue = currValue - 1;
    if (newValue >= 0 && newValue <= 9) {
      this._setResolution(newValue);
      this._logResolution();
      this._def.resolution.value = newValue;
    }
    this._framesUntilNextCheck = k_maxFramesUntilNextCheck;
  }
}

// src/webgl-ray-tracer/src/utilities/setupOutdatedPage.ts
var setupOutdatedPage = (maxDuration, onTimeout) => {
  if (!exports_system.browser.GlobalVisibilityManager.isSupported()) {
    return;
  }
  let timeoutHandle = -1;
  exports_system.browser.GlobalVisibilityManager.addVisibilityChange((isVisible) => {
    if (isVisible) {
      if (timeoutHandle >= 0) {
        clearTimeout(timeoutHandle);
        timeoutHandle = -1;
      }
    } else {
      timeoutHandle = window.setTimeout(onTimeout, maxDuration);
    }
  });
  exports_system.browser.GlobalVisibilityManager.activate();
};
// src/webgl-ray-tracer/src/main.ts
var logger = null;
var mainDemo = null;
var _queryDomElement = (inName) => {
  const newElement = document.querySelector(inName);
  if (!newElement) {
    throw new Error(`html element "${inName}" not found`);
  }
  return newElement;
};
var onPageLoad = async () => {
  logger = new Logger("loggerOutput");
  logger.log("[SETUP] page loaded");
  const canvasElement = _queryDomElement("#rendering-canvas");
  const perfAutoScaling = _queryDomElement("#auto-scaling-enabled");
  const resolution = _queryDomElement("#resolution");
  const anti_aliasing_enabled = _queryDomElement("#anti-aliasing-enabled");
  const physic_debug_mode_enabled = _queryDomElement("#debug-mode-enabled");
  const bvh_debug_mode_enabled = _queryDomElement("#bvh-debug-mode-enabled");
  const errorText = _queryDomElement("#error-text");
  const _onPageError = (err) => {
    if (!mainDemo) {
      return;
    }
    console.log("onPageError", err);
    try {
      mainDemo.stop();
    } catch (err2) {
    }
    mainDemo = null;
    exports_system.browser.GlobalKeyboardManager.deactivate();
    exports_system.browser.GlobalMouseManager.deactivate(canvasElement);
    exports_system.browser.GlobalTouchManager.deactivate(canvasElement);
    exports_system.browser.GlobalFullScreenManager.removeAllCallbacks();
    exports_system.browser.GlobalPointerLockManager.removeAllCallbacks();
    exports_system.browser.GlobalVisibilityManager.removeAllCallbacks();
    exports_system.browser.GlobalVisibilityManager.deactivate();
    errorText.style.width = "800px";
    errorText.style.height = "600px";
    errorText.innerHTML = err.message;
    canvasElement.style.display = "none";
    errorText.style.display = "block";
    perfAutoScaling.disabled = true;
    resolution.min = resolution.max = resolution.value = 0;
    anti_aliasing_enabled.disabled = true;
    physic_debug_mode_enabled.disabled = true;
    bvh_debug_mode_enabled.disabled = true;
    document.title += " (ERR)";
  };
  window.addEventListener("error", _onPageError);
  if (!exports_system.browser.isWebGL2Supported()) {
    throw new Error("missing WebGL2 feature (unsupported)");
  }
  mainDemo = new Experiment({
    canvasElement,
    logger,
    perfAutoScaling,
    resolution,
    anti_aliasing_enabled,
    physic_debug_mode_enabled,
    bvh_debug_mode_enabled
  });
  logger.log("[SETUP] Demo: initializing");
  await mainDemo.init();
  logger.log("[SETUP] Demo: initialized");
  mainDemo.start();
  logger.log("[SETUP] Demo: running");
  const pageMaxTimeInvisible = 60000;
  setupOutdatedPage(pageMaxTimeInvisible, () => {
    throw new Error("<br/><br/><br/>The page was inactive for too long<br/><br/>please reload");
  });
};
window.addEventListener("load", onPageLoad, false);

//# debugId=F0D423EB8F86C6CB64756e2164756e21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2xvY2FsLWZyYW1ld29yay9zeXN0ZW0vYnJvd3Nlci9GdWxsU2NyZWVuTWFuYWdlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9icm93c2VyL0tleUNvZGVzLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvS2V5Ym9hcmRNYW5hZ2VyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvTW91c2VNYW5hZ2VyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvUG9pbnRlckxvY2tNYW5hZ2VyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvVG91Y2hNYW5hZ2VyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvVmlzaWJpbGl0eU1hbmFnZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9zeXN0ZW0vYnJvd3Nlci9pc1dlYldvcmtlclN1cHBvcnRlZC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9icm93c2VyL2lzV2ViR0wyU3VwcG9ydGVkLnRzIiwgIm5vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL2NvbW1vbi5qcyIsICJub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS9tYXQzLmpzIiwgIm5vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL21hdDQuanMiLCAibm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vdmVjMy5qcyIsICJub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS92ZWM0LmpzIiwgIm5vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL3F1YXQuanMiLCAibm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vdmVjMi5qcyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL2FuZ2xlcy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9jb250cm9sbGVycy9GcmVlRmx5Q29udHJvbGxlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL2NsYW1wLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL21hdGgvY29sbGlzaW9ucy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL2Vhc2luZy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL2xlcnAudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9zeXN0ZW0vbWF0aC9wb2xhckNvb3Jkcy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL3JheUNhc3Rlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tZXRyaWNzL0ZyYW1lUHJvZmlsZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9zeXN0ZW0vdXRpbGl0aWVzL0ZldGNoSGVscGVycy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS91dGlsaXRpZXMvQXN5bmNIZWxwZXJzLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL3JuZy9EZXRlcm1pbmlzdGljUm5nLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvY2FtZXJhL0NhbWVyYS50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL2NhbWVyYS9GcnVzdHVtQ3VsbGluZy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL2NhbWVyYS9zY2VuZVRvU2NyZWVuQ29vcmRpbmF0ZXMudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9jYW1lcmEvc2NyZWVuVG9TY2VuZUNvb3JkaW5hdGVzLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3Mvd2ViZ2wyL1dlYkdMQ29udGV4dC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9DdWJlTWFwLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3Mvd2ViZ2wyL0RhdGFUZXh0dXJlLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3Mvd2ViZ2wyL0RhdGFUZXh0dXJlVmVjNGYzMi50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9EYXRhVGV4dHVyZVZlYzR1OC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9FcnJvci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9GZW5jZS50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9GcmFtZUJ1ZmZlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9HZW9tZXRyeVdyYXBwZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy93ZWJnbDIvUmVuZGVyQnVmZmVyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3Mvd2ViZ2wyL1NoYWRlclByb2dyYW0udHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy93ZWJnbDIvVGV4dHVyZS50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9UZXh0dXJlQXJyYXkudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvZ2VvbWV0cnktcmVuZGVyZXIvc2hhZGVycy9nZW9tZXRyeS1yZW5kZXJlci5nbHNsLnZlcnQiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvZ2VvbWV0cnktcmVuZGVyZXIvc2hhZGVycy9nZW9tZXRyeS1yZW5kZXJlci5nbHNsLmZyYWciLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvZ2VvbWV0cnktcmVuZGVyZXIvR2VvbWV0cnlSZW5kZXJlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9nZW9tZXRyeS1yZW5kZXJlci1mbGF0L3NoYWRlcnMvZ2VvbWV0cnktcmVuZGVyZXItZmxhdC5nbHNsLnZlcnQiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvZ2VvbWV0cnktcmVuZGVyZXItZmxhdC9zaGFkZXJzL2dlb21ldHJ5LXJlbmRlcmVyLWZsYXQuZ2xzbC5mcmFnIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL2dlb21ldHJ5LXJlbmRlcmVyLWZsYXQvR2VvbWV0cnlSZW5kZXJlckZsYXQudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvbXVsdGktYnVmZmVycy1yZW5kZXJpbmcvaW50ZXJuYWxzL1NjZW5lQ2FwdHVyZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvbXVsdGktYnVmZmVycy1yZW5kZXJpbmcvaW50ZXJuYWxzL3NoYWRlcnMvaHVkLXRleHR1cmUtcmVuZGVyZXIuZ2xzbC52ZXJ0IiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL211bHRpLWJ1ZmZlcnMtcmVuZGVyaW5nL2ludGVybmFscy9zaGFkZXJzL2h1ZC10ZXh0dXJlLXJlbmRlcmVyLmdsc2wuZnJhZyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9tdWx0aS1idWZmZXJzLXJlbmRlcmluZy9pbnRlcm5hbHMvUmVuZGVySHVkVGV4dHVyZS50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9tdWx0aS1idWZmZXJzLXJlbmRlcmluZy9NdWx0aUJ1ZmZlcnNSZW5kZXJpbmcudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvc3RhY2stcmVuZGVyZXJzL3NoYWRlcnMvc3RhY2stcmVuZGVyZXIuZ2xzbC52ZXJ0IiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL3N0YWNrLXJlbmRlcmVycy9zaGFkZXJzL3N0YWNrLXJlbmRlcmVyLmdsc2wuZnJhZyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9zdGFjay1yZW5kZXJlcnMvaW50ZXJuYWxzL1dpcmVGcmFtZXNTdGFja1JlbmRlcmVyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL3N0YWNrLXJlbmRlcmVycy9pbnRlcm5hbHMvVHJpYW5nbGVzU3RhY2tSZW5kZXJlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9zdGFjay1yZW5kZXJlcnMvU3RhY2tSZW5kZXJlcnMudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvdGV4dC1yZW5kZXJlci9zaGFkZXJzL3RleHQtcmVuZGVyZXIuZ2xzbC52ZXJ0IiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL3RleHQtcmVuZGVyZXIvc2hhZGVycy90ZXh0LXJlbmRlcmVyLmdsc2wuZnJhZyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy90ZXh0LXJlbmRlcmVyL2ludGVybmFscy9hc2NpaVRleHR1cmVIZXgudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvdGV4dC1yZW5kZXJlci9UZXh0UmVuZGVyZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvd2lkZ2V0cy9yZW5kZXJDb250cm9scy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy93aWRnZXRzL3JlbmRlckZwc01ldGVyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvaW1hZ2VzL2dldEltYWdlRnJvbVVybC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL2dlb21ldHJpZXMvbWFrZUJveC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL2dlb21ldHJpZXMvbWFrZVNwaGVyZS50cyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC91dGlsaXRpZXMvTG9nZ2VyLnRzIiwgIm5vZGVfbW9kdWxlcy9GcmFua2VuUGh5cy9kaXN0L2J1bmRsZS5qcyIsICJub2RlX21vZHVsZXMvRnJhbmtlblBoeXMvZGlzdC9idW5kbGUuanMiLCAic3JjL3dlYmdsLXJheS10cmFjZXIvc3JjL2V4cGVyaW1lbnQvZ3JhcGhpY3MvcmVuZGVyZXJzL3JheS10cmFjZXItcmVuZGVyZXIvc2hhZGVycy9yYXktdHJhY2VyLmdsc2wudmVydCIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9ncmFwaGljcy9yZW5kZXJlcnMvcmF5LXRyYWNlci1yZW5kZXJlci9zaGFkZXJzL3JheS10cmFjZXIuZ2xzbC5mcmFnIiwgInNyYy93ZWJnbC1yYXktdHJhY2VyL3NyYy9leHBlcmltZW50L2dyYXBoaWNzL3JlbmRlcmVycy9yYXktdHJhY2VyLXJlbmRlcmVyL3NoYWRlcnMvdGV4dHVyZS5nbHNsLnZlcnQiLCAic3JjL3dlYmdsLXJheS10cmFjZXIvc3JjL2V4cGVyaW1lbnQvZ3JhcGhpY3MvcmVuZGVyZXJzL3JheS10cmFjZXItcmVuZGVyZXIvc2hhZGVycy90ZXh0dXJlLmdsc2wuZnJhZyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9ncmFwaGljcy9yZW5kZXJlcnMvcmF5LXRyYWNlci1yZW5kZXJlci9zaGFkZXJzL2FzY2lpLWFydC5nbHNsLnZlcnQiLCAic3JjL3dlYmdsLXJheS10cmFjZXIvc3JjL2V4cGVyaW1lbnQvZ3JhcGhpY3MvcmVuZGVyZXJzL3JheS10cmFjZXItcmVuZGVyZXIvc2hhZGVycy9hc2NpaS1hcnQuZ2xzbC5mcmFnIiwgInNyYy93ZWJnbC1yYXktdHJhY2VyL3NyYy9leHBlcmltZW50L2dyYXBoaWNzL3JlbmRlcmVycy9yYXktdHJhY2VyLXJlbmRlcmVyL0JWSC50cyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9ncmFwaGljcy9yZW5kZXJlcnMvcmF5LXRyYWNlci1yZW5kZXJlci9SYXlUcmFjZXJSZW5kZXJlci50cyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9ncmFwaGljcy9SZW5kZXJlci50cyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9zY2VuZXMvVGVzdFNjZW5lMi50cyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9FeHBlcmltZW50LnRzIiwgInNyYy93ZWJnbC1yYXktdHJhY2VyL3NyYy91dGlsaXRpZXMvc2V0dXBPdXRkYXRlZFBhZ2UudHMiLCAic3JjL3dlYmdsLXJheS10cmFjZXIvc3JjL21haW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiY29uc3QgYWxsUmVxdWVzdEV2ZW50czogc3RyaW5nW10gPSBbXG4gICdyZXF1ZXN0RnVsbHNjcmVlbicsXG4gICd3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbicsXG4gICdtb3pSZXF1ZXN0RnVsbFNjcmVlbicsXG4gICdtc1JlcXVlc3RGdWxsc2NyZWVuJ1xuXTtcblxuY29uc3QgYWxsQ2hhbmdlRXZlbnRzOiBzdHJpbmdbXSA9IFtcbiAgJ2Z1bGxzY3JlZW5jaGFuZ2UnLFxuICAnd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsXG4gICdtb3pmdWxsc2NyZWVuY2hhbmdlJyxcbiAgJ21zZnVsbHNjcmVlbmNoYW5nZSdcbl07XG5cbnR5cGUgT25DaGFuZ2VDYWxsYmFjayA9ICgpID0+IHZvaWQ7XG5cbmludGVyZmFjZSBJUmVzdWx0IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgbWVzc2FnZTogc3RyaW5nO1xufVxuXG5jbGFzcyBGdWxsU2NyZWVuTWFuYWdlciB7XG4gIHByaXZhdGUgX29uRnVsbFNjcmVlbkNoYW5nZUNhbGxiYWNrczogT25DaGFuZ2VDYWxsYmFja1tdID0gW107XG5cbiAgcHJpdmF0ZSBfaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX2luaXRpYWxpemUoKSB7XG4gICAgaWYgKHRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICBjb25zdCBvbkxvY2tDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9vbkZ1bGxTY3JlZW5DaGFuZ2VDYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKCkpO1xuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IGN1cnJFdmVudCBvZiBhbGxDaGFuZ2VFdmVudHMpXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGN1cnJFdmVudCwgb25Mb2NrQ2hhbmdlLCBmYWxzZSk7XG4gIH1cblxuICAvL1xuXG4gIGlzQ29tcGF0aWJsZShpblRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgZm9yIChjb25zdCBjdXJyRXZlbnQgb2YgYWxsUmVxdWVzdEV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudCBpbiBpblRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vXG5cbiAgaXNGdWxsU2NyZWVuKGluVGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgPT09IGluVGFyZ2V0RWxlbWVudDtcbiAgfVxuXG4gIC8vXG5cbiAgYXN5bmMgcmVxdWVzdEZ1bGxTY3JlZW4oaW5UYXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8SVJlc3VsdD4ge1xuICAgIGlmICh0aGlzLmlzRnVsbFNjcmVlbihpblRhcmdldEVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ2VsZW1lbnQgYWxyZWFkeSBpbiBmdWxsIHNjcmVlbicgfTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG5cbiAgICBmb3IgKGNvbnN0IGN1cnJFdmVudCBvZiBhbGxSZXF1ZXN0RXZlbnRzKSB7XG4gICAgICBpZiAoY3VyckV2ZW50IGluIGluVGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAoaW5UYXJnZXRFbGVtZW50IGFzIGFueSlbY3VyckV2ZW50XSgpO1xuXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdyZXF1ZXN0IGZvciBmdWxsIHNjcmVlbiBkb25lJyB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAndW5zdXBwb3J0ZWQgcmVxdWVzdCBmb3IgZnVsbCBzY3JlZW4nIH07XG4gIH1cblxuICAvL1xuXG4gIGFkZE9uRnVsbFNjcmVlbkNoYW5nZShpbkNhbGxiYWNrOiBPbkNoYW5nZUNhbGxiYWNrKSB7XG4gICAgdGhpcy5fb25GdWxsU2NyZWVuQ2hhbmdlQ2FsbGJhY2tzLnB1c2goaW5DYWxsYmFjayk7XG4gIH1cbiAgcmVtb3ZlT25GdWxsU2NyZWVuQ2hhbmdlKGluQ2FsbGJhY2s6IE9uQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX29uRnVsbFNjcmVlbkNoYW5nZUNhbGxiYWNrcy5pbmRleE9mKGluQ2FsbGJhY2spO1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fb25GdWxsU2NyZWVuQ2hhbmdlQ2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbiAgcmVtb3ZlQWxsQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMuX29uRnVsbFNjcmVlbkNoYW5nZUNhbGxiYWNrcy5sZW5ndGggPSAwO1xuICB9XG59XG5cbmNvbnN0IEdsb2JhbEZ1bGxTY3JlZW5NYW5hZ2VyID0gbmV3IEZ1bGxTY3JlZW5NYW5hZ2VyKCk7XG5cbmV4cG9ydCB7IEdsb2JhbEZ1bGxTY3JlZW5NYW5hZ2VyIH07XG4iLAogICJleHBvcnQgY29uc3QgQWxsS2V5Q29kZXMgPSB7XG4gIC8vIE51bWJlcnMgYW5kIGxldHRlcnNcbiAgTnVtMDogNDgsXG4gIE51bTE6IDQ5LFxuICBOdW0yOiA1MCxcbiAgTnVtMzogNTEsXG4gIE51bTQ6IDUyLFxuICBOdW01OiA1MyxcbiAgTnVtNjogNTQsXG4gIE51bTc6IDU1LFxuICBOdW04OiA1NixcbiAgTnVtOTogNTcsXG4gIEE6IDY1LFxuICBCOiA2NixcbiAgQzogNjcsXG4gIEQ6IDY4LFxuICBFOiA2OSxcbiAgRjogNzAsXG4gIEc6IDcxLFxuICBIOiA3MixcbiAgSTogNzMsXG4gIEo6IDc0LFxuICBLOiA3NSxcbiAgTDogNzYsXG4gIE06IDc3LFxuICBOOiA3OCxcbiAgTzogNzksXG4gIFA6IDgwLFxuICBROiA4MSxcbiAgUjogODIsXG4gIFM6IDgzLFxuICBUOiA4NCxcbiAgVTogODUsXG4gIFY6IDg2LFxuICBXOiA4NyxcbiAgWDogODgsXG4gIFk6IDg5LFxuICBaOiA5MCxcblxuICAvLyBQdW5jdHVhdGlvbnMga2V5cyBpbiBVUyBsYXlvdXRcbiAgU2VtaWNvbG9uOiAxODYsXG4gIEVxdWFsOiAxODcsXG4gIENvbW1hOiAxODgsXG4gIE1pbnVzOiAxODksXG4gIFBlcmlvZDogMTkwLFxuICBCYWNrUXVvdGU6IDE5MixcbiAgQnJhY2tldExlZnQ6IDIxOSxcbiAgQmFja3NsYXNoOiAyMjAsXG4gIEJyYWNrZXRSaWdodDogMjIxLFxuICBRdW90ZTogMjIyLFxuXG4gIC8vIE1vZGlmaWVyIGtleXNcbiAgU2hpZnQ6IDE2LFxuICBDdHJsOiAxNyxcbiAgQWx0OiAxOCxcbiAgQ2Fwc0xvY2s6IDIwLFxuXG4gIC8vIENvbnRyb2wga2V5c1xuICBUYWI6IDksXG4gIEVudGVyOiAxMyxcbiAgUGF1c2U6IDE5LFxuICBFc2NhcGU6IDI3LFxuICBTcGFjZTogMzIsXG4gIFBhZ2VVcDogMzMsXG4gIFBhZ2VEb3duOiAzNCxcbiAgRW5kOiAzNSxcbiAgSG9tZTogMzYsXG4gIEFycm93TGVmdDogMzcsXG4gIEFycm93VXA6IDM4LFxuICBBcnJvd1JpZ2h0OiAzOSxcbiAgQXJyb3dEb3duOiA0MCxcbiAgUHJpbnRTY3JlZW46IDQ0LFxuICBJbnNlcnQ6IDQ1LFxuICBEZWxldGU6IDQ2LFxuICBDb250ZXh0TWVudTogOTMsXG4gIFNjcm9sbExvY2s6IDE0NSxcblxuICAvLyBGdW5jdGlvbiBrZXlzXG4gIEYxOiAxMTIsXG4gIEYyOiAxMTMsXG4gIEYzOiAxMTQsXG4gIEY0OiAxMTUsXG4gIEY1OiAxMTYsXG4gIEY2OiAxMTcsXG4gIEY3OiAxMTgsXG4gIEY4OiAxMTksXG4gIEY5OiAxMjAsXG4gIEYxMDogMTIxLFxuICBGMTE6IDEyMixcbiAgRjEyOiAxMjMsXG4gIEYxMzogMTI0LFxuICBGMTQ6IDEyNSxcbiAgRjE1OiAxMjYsXG4gIEYxNjogMTI3LFxuICBGMTc6IDEyOCxcbiAgRjE4OiAxMjksXG4gIEYxOTogMTMwLFxuICBGMjA6IDEzMSxcbiAgRjIxOiAxMzIsXG4gIEYyMjogMTMzLFxuICBGMjM6IDEzNCxcbiAgRjI0OiAxMzUsXG5cbiAgLy8gTnVtcGFkIGtleXNcbiAgTnVtUGFkMDogOTYsXG4gIE51bVBhZDE6IDk3LFxuICBOdW1QYWQyOiA5OCxcbiAgTnVtUGFkMzogOTksXG4gIE51bVBhZDQ6IDEwMCxcbiAgTnVtUGFkNTogMTAxLFxuICBOdW1QYWQ2OiAxMDIsXG4gIE51bVBhZDc6IDEwMyxcbiAgTnVtUGFkODogMTA0LFxuICBOdW1QYWQ5OiAxMDUsXG4gIE51bVBhZE11bHRpcGx5OiAxMDYsXG4gIE51bVBhZEFkZDogMTA3LFxuICBOdW1QYWRTdWJ0cmFjdDogMTA5LFxuICBOdW1QYWREZWNpbWFsOiAxMTAsXG4gIE51bVBhZERpdmlkZTogMTExLFxuICBOdW1Mb2NrOiAxNDQsXG4gIE51bVBhZENvbW1hOiAxOTQsXG4gIE51bVBhZEVxdWFsOiAxMlxufTtcblxuZXhwb3J0IGNvbnN0IGlzTGV0dGVyID0gKGtleTogbnVtYmVyKSA9PiB7XG4gIHJldHVybiBrZXkgPj0gQWxsS2V5Q29kZXMuQSAmJiBrZXkgPD0gQWxsS2V5Q29kZXMuWjtcbn07XG5cbmV4cG9ydCBjb25zdCBpc051bWJlciA9IChrZXk6IG51bWJlcikgPT4ge1xuICByZXR1cm4gKFxuICAgIChrZXkgPj0gQWxsS2V5Q29kZXMuTnVtMCAmJiBrZXkgPD0gQWxsS2V5Q29kZXMuTnVtOSkgfHxcbiAgICAoa2V5ID49IEFsbEtleUNvZGVzLk51bVBhZDAgJiYga2V5IDw9IEFsbEtleUNvZGVzLk51bVBhZDkpXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNBbHBoYW51bWVyaWMgPSAoa2V5OiBudW1iZXIpID0+IHtcbiAgcmV0dXJuIGlzTnVtYmVyKGtleSkgfHwgaXNMZXR0ZXIoa2V5KTtcbn07XG4iLAogICJpbXBvcnQgeyBBbGxLZXlDb2RlcyB9IGZyb20gJy4vS2V5Q29kZXMnO1xuXG5jbGFzcyBLZXlib2FyZE1hbmFnZXIge1xuICBwcml2YXRlIF9wcmVzc2VkS2V5c1NldCA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICBwcml2YXRlIF9wcmV2ZW50RGVmYXVsdEtleXNTZXQgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgcHJpdmF0ZSBfYWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2hhbmRsZUtleURvd246IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfaGFuZGxlS2V5VXA6IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZDtcblxuICBwcml2YXRlIF9vbkV2ZW50OiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBrZXlDb2RlIH0gPSBldmVudDtcblxuICAgICAgaWYgKHRoaXMuX29uRXZlbnQpIHtcbiAgICAgICAgdGhpcy5fb25FdmVudCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcHJldmVudERlZmF1bHRLZXlzU2V0LmhhcyhrZXlDb2RlKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wcmVzc2VkS2V5c1NldC5hZGQoa2V5Q29kZSk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVLZXlVcCA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBrZXlDb2RlIH0gPSBldmVudDtcblxuICAgICAgaWYgKHRoaXMuX29uRXZlbnQpIHtcbiAgICAgICAgdGhpcy5fb25FdmVudCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcHJldmVudERlZmF1bHRLZXlzU2V0LmhhcyhrZXlDb2RlKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wcmVzc2VkS2V5c1NldC5kZWxldGUoa2V5Q29kZSk7XG4gICAgfTtcblxuICAgIHRoaXMuX2FjdGl2YXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2hhbmRsZUtleURvd24gPSBoYW5kbGVLZXlEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlS2V5VXAgPSBoYW5kbGVLZXlVcC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgaXNQcmVzc2VkKC4uLmluS2V5czogKGtleW9mIHR5cGVvZiBBbGxLZXlDb2RlcylbXSkge1xuICAgIGZvciAoY29uc3Qga2V5IG9mIGluS2V5cykge1xuICAgICAgaWYgKHRoaXMuX3ByZXNzZWRLZXlzU2V0LmhhcyhBbGxLZXlDb2Rlc1trZXldKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJldmVudERlZmF1bHQoaW5LZXk6IGtleW9mIHR5cGVvZiBBbGxLZXlDb2Rlcykge1xuICAgIHRoaXMuX3ByZXZlbnREZWZhdWx0S2V5c1NldC5hZGQoQWxsS2V5Q29kZXNbaW5LZXldKTtcbiAgfVxuXG4gIGVuYWJsZURlZmF1bHQoaW5LZXk6IGtleW9mIHR5cGVvZiBBbGxLZXlDb2Rlcykge1xuICAgIHRoaXMuX3ByZXZlbnREZWZhdWx0S2V5c1NldC5kZWxldGUoQWxsS2V5Q29kZXNbaW5LZXldKTtcbiAgfVxuXG4gIGFjdGl2YXRlKCkge1xuICAgIGlmICh0aGlzLl9hY3RpdmF0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wcmVzc2VkS2V5c1NldC5jbGVhcigpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUtleURvd24pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlS2V5VXApO1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgaWYgKCF0aGlzLl9hY3RpdmF0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wcmVzc2VkS2V5c1NldC5jbGVhcigpO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUtleURvd24pO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlS2V5VXApO1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gZmFsc2U7XG4gIH1cblxuICBvbkV2ZW50KGNhbGxiYWNrOiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9vbkV2ZW50ID0gY2FsbGJhY2s7XG4gIH1cbn1cblxuLy9cbi8vXG4vL1xuXG5jb25zdCBHbG9iYWxLZXlib2FyZE1hbmFnZXIgPSBuZXcgS2V5Ym9hcmRNYW5hZ2VyKCk7XG5cbmV4cG9ydCB7IEdsb2JhbEtleWJvYXJkTWFuYWdlciB9O1xuIiwKICAiaW1wb3J0IHsgQWxsS2V5Q29kZXMgfSBmcm9tICcuL0tleUNvZGVzJztcblxuY29uc3QgQWxsTW91c2VCdXR0b25zID0ge1xuICBMZWZ0OiAwLFxuICBNaWRkbGU6IDEsXG4gIFJpZ2h0OiAyXG59O1xuXG5jbGFzcyBNb3VzZU1hbmFnZXIge1xuICBwcml2YXRlIF9wcmVzc2VkQnV0dG9uc1NldCA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICBwcml2YXRlIF9hY3RpdmF0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfaGFuZGxlTW91c2VEb3duOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQ7XG4gIHByaXZhdGUgX2hhbmRsZU1vdXNlVXA6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfaGFuZGxlTW91c2VNb3ZlOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQ7XG4gIHByaXZhdGUgX2hhbmRsZU1vdXNlV2hlZWw6IChldmVudDogV2hlZWxFdmVudCkgPT4gdm9pZDtcblxuICBwcml2YXRlIF9wb3NpdGlvblggPSAwO1xuICBwcml2YXRlIF9wb3NpdGlvblkgPSAwO1xuICBwcml2YXRlIF9kZWx0YVggPSAwO1xuICBwcml2YXRlIF9kZWx0YVkgPSAwO1xuICBwcml2YXRlIF93aGVlbERlbHRhWSA9IDA7XG5cbiAgcHJpdmF0ZSBfb25FdmVudDogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX29uRXZlbnQpIHtcbiAgICAgICAgdGhpcy5fb25FdmVudCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wb3NpdGlvblggPSBldmVudC5wYWdlWDtcbiAgICAgIHRoaXMuX3Bvc2l0aW9uWSA9IGV2ZW50LnBhZ2VZO1xuXG4gICAgICB0aGlzLl9wcmVzc2VkQnV0dG9uc1NldC5hZGQoZXZlbnQuYnV0dG9uKTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLl9vbkV2ZW50KSB7XG4gICAgICAgIHRoaXMuX29uRXZlbnQoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcG9zaXRpb25YID0gZXZlbnQucGFnZVg7XG4gICAgICB0aGlzLl9wb3NpdGlvblkgPSBldmVudC5wYWdlWTtcblxuICAgICAgdGhpcy5fcHJlc3NlZEJ1dHRvbnNTZXQuZGVsZXRlKGV2ZW50LmJ1dHRvbik7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLl9vbkV2ZW50KSB7XG4gICAgICAgIHRoaXMuX29uRXZlbnQoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcG9zaXRpb25YID0gZXZlbnQucGFnZVg7XG4gICAgICB0aGlzLl9wb3NpdGlvblkgPSBldmVudC5wYWdlWTtcblxuICAgICAgdGhpcy5fZGVsdGFYICs9XG4gICAgICAgIGV2ZW50Lm1vdmVtZW50WCB8fFxuICAgICAgICAoZXZlbnQgYXMgYW55KS5tb3pNb3ZlbWVudFggfHxcbiAgICAgICAgKGV2ZW50IGFzIGFueSkud2Via2l0TW92ZW1lbnRYIHx8XG4gICAgICAgIDA7XG5cbiAgICAgIHRoaXMuX2RlbHRhWSArPVxuICAgICAgICBldmVudC5tb3ZlbWVudFkgfHxcbiAgICAgICAgKGV2ZW50IGFzIGFueSkubW96TW92ZW1lbnRZIHx8XG4gICAgICAgIChldmVudCBhcyBhbnkpLndlYmtpdE1vdmVtZW50WSB8fFxuICAgICAgICAwO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlV2hlZWxFdmVudCA9IChldmVudDogV2hlZWxFdmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX29uRXZlbnQpIHtcbiAgICAgICAgdGhpcy5fb25FdmVudCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl93aGVlbERlbHRhWSArPSBldmVudC5kZWx0YVkgfHwgMDtcbiAgICB9O1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgdGhpcy5faGFuZGxlTW91c2VEb3duID0gaGFuZGxlTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlTW91c2VVcCA9IGhhbmRsZU1vdXNlVXAuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVNb3VzZU1vdmUgPSBoYW5kbGVNb3VzZU1vdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVNb3VzZVdoZWVsID0gaGFuZGxlV2hlZWxFdmVudC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgYWN0aXZhdGUoZG9tRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5fYWN0aXZhdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fcHJlc3NlZEJ1dHRvbnNTZXQuY2xlYXIoKTtcblxuICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlTW91c2VEb3duKTtcbiAgICBkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVNb3VzZVVwKTtcbiAgICBkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZU1vdXNlTW92ZSk7XG4gICAgZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuX2hhbmRsZU1vdXNlV2hlZWwpO1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGRlYWN0aXZhdGUoZG9tRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuX2FjdGl2YXRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3ByZXNzZWRCdXR0b25zU2V0LmNsZWFyKCk7XG5cbiAgICBkb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZU1vdXNlRG93bik7XG4gICAgZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlTW91c2VVcCk7XG4gICAgZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9oYW5kbGVNb3VzZU1vdmUpO1xuICAgIGRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLl9oYW5kbGVNb3VzZVdoZWVsKTtcblxuICAgIHRoaXMuX2FjdGl2YXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgaXNCdXR0b25QcmVzc2VkKGluS2V5OiBrZXlvZiB0eXBlb2YgQWxsTW91c2VCdXR0b25zKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ByZXNzZWRCdXR0b25zU2V0LmhhcyhBbGxNb3VzZUJ1dHRvbnNbaW5LZXldKTtcbiAgfVxuXG4gIGdldCBwb3NpdGlvblgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb25YO1xuICB9XG4gIGdldCBwb3NpdGlvblkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb25ZO1xuICB9XG4gIGRlbHRhWCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kZWx0YVg7XG4gIH1cbiAgZGVsdGFZKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RlbHRhWTtcbiAgfVxuICB3aGVlbERlbHRhWSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl93aGVlbERlbHRhWTtcbiAgfVxuICByZXNldERlbHRhcygpIHtcbiAgICB0aGlzLl9kZWx0YVggPSAwO1xuICAgIHRoaXMuX2RlbHRhWSA9IDA7XG4gICAgdGhpcy5fd2hlZWxEZWx0YVkgPSAwO1xuICB9XG5cbiAgb25FdmVudChjYWxsYmFjazogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fb25FdmVudCA9IGNhbGxiYWNrO1xuICB9XG59XG5cbi8vXG4vL1xuLy9cblxuY29uc3QgR2xvYmFsTW91c2VNYW5hZ2VyID0gbmV3IE1vdXNlTWFuYWdlcigpO1xuXG5leHBvcnQgeyBHbG9iYWxNb3VzZU1hbmFnZXIgfTtcbiIsCiAgImNvbnN0IGFsbFJlcXVlc3RFdmVudHM6IHN0cmluZ1tdID0gW1xuICAncmVxdWVzdFBvaW50ZXJMb2NrJyxcbiAgJ21velJlcXVlc3RQb2ludGVyTG9jaycsXG4gICd3ZWJraXRSZXF1ZXN0UG9pbnRlckxvY2snXG5dO1xuXG5jb25zdCBhbGxFeGl0RXZlbnRzOiBzdHJpbmdbXSA9IFtcbiAgJ2V4aXRQb2ludGVyTG9jaycsXG4gICdtb3pFeGl0UG9pbnRlckxvY2snLFxuICAnd2Via2l0RXhpdFBvaW50ZXJMb2NrJ1xuXTtcblxuY29uc3QgYWxsU3RhdGVFdmVudHM6IHN0cmluZ1tdID0gW1xuICAncG9pbnRlckxvY2tFbGVtZW50JyxcbiAgJ21velBvaW50ZXJMb2NrRWxlbWVudCcsXG4gICd3ZWJraXRQb2ludGVyTG9ja0VsZW1lbnQnXG5dO1xuXG5jb25zdCBhbGxDaGFuZ2VFdmVudHM6IHsgbWV0aG9kTmFtZTogc3RyaW5nOyBwcm9wZXJ0eU5hbWU6IHN0cmluZyB9W10gPSBbXG4gIHsgbWV0aG9kTmFtZTogJ29ucG9pbnRlcmxvY2tjaGFuZ2UnLCBwcm9wZXJ0eU5hbWU6ICdwb2ludGVybG9ja2NoYW5nZScgfSxcbiAge1xuICAgIG1ldGhvZE5hbWU6ICdvbm1venBvaW50ZXJsb2NrY2hhbmdlJyxcbiAgICBwcm9wZXJ0eU5hbWU6ICdtb3pwb2ludGVybG9ja2NoYW5nZSdcbiAgfSxcbiAge1xuICAgIG1ldGhvZE5hbWU6ICdvbndlYmtpdHBvaW50ZXJsb2NrY2hhbmdlJyxcbiAgICBwcm9wZXJ0eU5hbWU6ICd3ZWJraXRwb2ludGVybG9ja2NoYW5nZSdcbiAgfVxuXTtcblxuY29uc3QgYWxsRXJyb3JFdmVudHM6IHsgbWV0aG9kTmFtZTogc3RyaW5nOyBwcm9wZXJ0eU5hbWU6IHN0cmluZyB9W10gPSBbXG4gIHsgbWV0aG9kTmFtZTogJ29ucG9pbnRlcmxvY2tlcnJvcicsIHByb3BlcnR5TmFtZTogJ3BvaW50ZXJsb2NrZXJyb3InIH0sXG4gIHsgbWV0aG9kTmFtZTogJ29ubW96cG9pbnRlcmxvY2tlcnJvcicsIHByb3BlcnR5TmFtZTogJ21venBvaW50ZXJsb2NrZXJyb3InIH0sXG4gIHtcbiAgICBtZXRob2ROYW1lOiAnb253ZWJraXRwb2ludGVybG9ja2Vycm9yJyxcbiAgICBwcm9wZXJ0eU5hbWU6ICd3ZWJraXRwb2ludGVybG9ja2Vycm9yJ1xuICB9XG5dO1xuXG50eXBlIE9uQ2hhbmdlQ2FsbGJhY2sgPSAoKSA9PiB2b2lkO1xudHlwZSBPbkVycm9yQ2FsbGJhY2sgPSAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkO1xuXG5pbnRlcmZhY2UgSVJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZztcbn1cblxuY2xhc3MgUG9pbnRlckxvY2tNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfb25Mb2NrQ2hhbmdlQ2FsbGJhY2tzOiBPbkNoYW5nZUNhbGxiYWNrW10gPSBbXTtcbiAgcHJpdmF0ZSBfb25Mb2NrRXJyb3JDYWxsYmFja3M6IE9uRXJyb3JDYWxsYmFja1tdID0gW107XG4gIHByaXZhdGUgX3RpbWVTaW5jZUxhc3RMb2NrQ2hhbmdlID0gMDtcblxuICBwcml2YXRlIF9sYXRlc3RSZXF1ZXN0SHRtbEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX2lzSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvLyBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcHJpdmF0ZSBfaW5pdGlhbGl6ZSgpIHtcbiAgICBpZiAodGhpcy5faXNJbml0aWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZTtcblxuICAgIGNvbnN0IG9uTG9ja0NoYW5nZSA9ICgpID0+IHtcbiAgICAgIHRoaXMuX3RpbWVTaW5jZUxhc3RMb2NrQ2hhbmdlID0gRGF0ZS5ub3coKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwidGltZXIgcmVzZXRcIik7XG5cbiAgICAgIHRoaXMuX29uTG9ja0NoYW5nZUNhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT4gY2FsbGJhY2soKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uTG9ja0Vycm9yID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgdGhpcy5fdGltZVNpbmNlTGFzdExvY2tDaGFuZ2UgPSBEYXRlLm5vdygpO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJ0aW1lciByZXNldFwiKTtcblxuICAgICAgdGhpcy5fb25Mb2NrRXJyb3JDYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKGV2ZW50KSk7XG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgY3VyckV2ZW50IG9mIGFsbENoYW5nZUV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudC5tZXRob2ROYW1lIGluIGRvY3VtZW50KSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoY3VyckV2ZW50LnByb3BlcnR5TmFtZSwgb25Mb2NrQ2hhbmdlLCBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgY3VyckV2ZW50IG9mIGFsbEVycm9yRXZlbnRzKSB7XG4gICAgICBpZiAoY3VyckV2ZW50Lm1ldGhvZE5hbWUgaW4gZG9jdW1lbnQpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihjdXJyRXZlbnQucHJvcGVydHlOYW1lLCBvbkxvY2tFcnJvciwgZmFsc2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvL1xuXG4gIGNhbkJlUG9pbnRlckxvY2tlZChpblRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgZm9yIChjb25zdCBjdXJyRXZlbnQgb2YgYWxsUmVxdWVzdEV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudCBpbiBpblRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vXG5cbiAgaXNQb2ludGVyTG9ja2VkKGluVGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBmb3IgKGNvbnN0IGN1cnJFdmVudCBvZiBhbGxTdGF0ZUV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudCBpbiBkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gKGRvY3VtZW50IGFzIGFueSlbY3VyckV2ZW50XSA9PT0gaW5UYXJnZXRFbGVtZW50O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvL1xuXG4gIGFzeW5jIHJlcXVlc3RQb2ludGVyTG9jayhpblRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KTogUHJvbWlzZTxJUmVzdWx0PiB7XG4gICAgaWYgKHRoaXMuaXNQb2ludGVyTG9ja2VkKGluVGFyZ2V0RWxlbWVudCkpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnZWxlbWVudCBhbHJlYWR5IGxvY2tlZCcgfTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG5cbiAgICBpZiAodGhpcy5fdGltZVNpbmNlTGFzdExvY2tDaGFuZ2UgPiAwKSB7XG4gICAgICBjb25zdCBlbGFwc2VkU2VjVGltZSA9XG4gICAgICAgIChEYXRlLm5vdygpIC0gdGhpcy5fdGltZVNpbmNlTGFzdExvY2tDaGFuZ2UpIC8gMTAwMDtcblxuICAgICAgLy8gY29uc29sZS5sb2coXCJlbGFwc2VkU2VjVGltZSAxXCIsIGVsYXBzZWRTZWNUaW1lKTtcblxuICAgICAgaWYgKGVsYXBzZWRTZWNUaW1lIDwgMS4xKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogYHJlcXVlc3QgZm9yIGxvY2sgd2FzIHRvbyBlYXJseSwgdGltZSB0byB3YWl0OiAke2VsYXBzZWRTZWNUaW1lLnRvRml4ZWQoXG4gICAgICAgICAgICAyXG4gICAgICAgICAgKX1zZWNgXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3RpbWVTaW5jZUxhc3RMb2NrQ2hhbmdlID0gRGF0ZS5ub3coKTtcblxuICAgIGZvciAoY29uc3QgY3VyckV2ZW50IG9mIGFsbFJlcXVlc3RFdmVudHMpIHtcbiAgICAgIGlmIChjdXJyRXZlbnQgaW4gaW5UYXJnZXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgLy8gbW9yZSBhY2N1cmF0ZSBieSBkaXNhYmxpbmcgT1MtbGV2ZWwgYWRqdXN0ZWQgbW91c2UgbW92ZW1lbnRzXG4gICAgICAgICAgdW5hZGp1c3RlZE1vdmVtZW50OiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJhY3R1YWwgcmVxdWVzdFwiKTtcblxuICAgICAgICAgIGF3YWl0IChpblRhcmdldEVsZW1lbnQgYXMgYW55KVtjdXJyRXZlbnRdKG9wdGlvbnMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkVSUlwiLCBlcnIpO1xuXG4gICAgICAgICAgY29uc3QgZWxhcHNlZFNlY1RpbWUgPVxuICAgICAgICAgICAgKERhdGUubm93KCkgLSB0aGlzLl90aW1lU2luY2VMYXN0TG9ja0NoYW5nZSkgLyAxMDAwO1xuXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJlbGFwc2VkU2VjVGltZSAyXCIsIGVsYXBzZWRTZWNUaW1lKTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGByZXF1ZXN0IGZvciBsb2NrIHdhcyB0b28gZWFybHksIHRpbWUgdG8gd2FpdDogJHtlbGFwc2VkU2VjVGltZS50b0ZpeGVkKFxuICAgICAgICAgICAgICAyXG4gICAgICAgICAgICApfXNlY2BcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdGltZVNpbmNlTGFzdExvY2tDaGFuZ2UgPSBEYXRlLm5vdygpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRpbWVyIHJlc2V0XCIpO1xuXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdyZXF1ZXN0IGZvciBsb2NrIGRvbmUnIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICd1bnN1cHBvcnRlZCByZXF1ZXN0IGZvciBsb2NrJyB9O1xuICB9XG5cbiAgLy9cblxuICBhbGxvd1BvaW50ZXJMb2NrZWRPbkNsaWNrRXZlbnQoaW5UYXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGlmIChpblRhcmdldEVsZW1lbnQgPT09IHRoaXMuX2xhdGVzdFJlcXVlc3RIdG1sRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2xhdGVzdFJlcXVlc3RIdG1sRWxlbWVudCA9IGluVGFyZ2V0RWxlbWVudDtcblxuICAgIGNvbnN0IG9uQ2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICBpblRhcmdldEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZXF1ZXN0UG9pbnRlckxvY2soaW5UYXJnZXRFbGVtZW50KTtcblxuICAgICAgdGhpcy5fbGF0ZXN0UmVxdWVzdEh0bWxFbGVtZW50ID0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRoaXMuYWxsb3dQb2ludGVyTG9ja2VkT25DbGlja0V2ZW50KGluVGFyZ2V0RWxlbWVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGluVGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xuICB9XG5cbiAgLy9cblxuICBleGl0UG9pbnRlckxvY2soKSB7XG4gICAgZm9yIChjb25zdCBjdXJyRXZlbnQgb2YgYWxsRXhpdEV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudCBpbiBkb2N1bWVudCkge1xuICAgICAgICAoZG9jdW1lbnQgYXMgYW55KVtjdXJyRXZlbnRdKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vXG5cbiAgYWRkT25Mb2NrQ2hhbmdlKGluQ2FsbGJhY2s6IE9uQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICB0aGlzLl9vbkxvY2tDaGFuZ2VDYWxsYmFja3MucHVzaChpbkNhbGxiYWNrKTtcbiAgfVxuICByZW1vdmVPbkxvY2tDaGFuZ2UoaW5DYWxsYmFjazogT25DaGFuZ2VDYWxsYmFjaykge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fb25Mb2NrQ2hhbmdlQ2FsbGJhY2tzLmluZGV4T2YoaW5DYWxsYmFjayk7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9vbkxvY2tDaGFuZ2VDYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIC8vXG5cbiAgYWRkT25Mb2NrRXJyb3IoaW5DYWxsYmFjazogT25FcnJvckNhbGxiYWNrKSB7XG4gICAgdGhpcy5fb25Mb2NrRXJyb3JDYWxsYmFja3MucHVzaChpbkNhbGxiYWNrKTtcbiAgfVxuICByZW1vdmVPbkxvY2tFcnJvcihpbkNhbGxiYWNrOiBPbkVycm9yQ2FsbGJhY2spIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX29uTG9ja0Vycm9yQ2FsbGJhY2tzLmluZGV4T2YoaW5DYWxsYmFjayk7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9vbkxvY2tFcnJvckNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG5cbiAgLy9cblxuICByZW1vdmVBbGxDYWxsYmFja3MoKSB7XG4gICAgdGhpcy5fb25Mb2NrQ2hhbmdlQ2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fb25Mb2NrRXJyb3JDYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgfVxufVxuXG5jb25zdCBHbG9iYWxQb2ludGVyTG9ja01hbmFnZXIgPSBuZXcgUG9pbnRlckxvY2tNYW5hZ2VyKCk7XG5cbmV4cG9ydCB7IEdsb2JhbFBvaW50ZXJMb2NrTWFuYWdlciB9O1xuIiwKICAiY2xhc3MgVG91Y2hEYXRhIHtcbiAgcHVibGljIGlkOiBudW1iZXI7XG4gIHB1YmxpYyBjcmVhdGVkQXQgPSBEYXRlLm5vdygpO1xuICBwdWJsaWMgcG9zaXRpb25YOiBudW1iZXI7XG4gIHB1YmxpYyBwb3NpdGlvblk6IG51bWJlcjtcbiAgcHVibGljIGRlbHRhWDogbnVtYmVyID0gMDtcbiAgcHVibGljIGRlbHRhWTogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwb3NpdGlvblg6IG51bWJlciwgcG9zaXRpb25ZOiBudW1iZXIpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5wb3NpdGlvblggPSBwb3NpdGlvblg7XG4gICAgdGhpcy5wb3NpdGlvblkgPSBwb3NpdGlvblk7XG4gIH1cblxuICByZXNldERlbHRhKCkge1xuICAgIHRoaXMuZGVsdGFYID0gMDtcbiAgICB0aGlzLmRlbHRhWSA9IDA7XG4gIH1cbn1cblxuY2xhc3MgVG91Y2hNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfYWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2FsbFRvdWNoRGF0YU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBUb3VjaERhdGE+KCk7XG4gIHByaXZhdGUgX2FsbENhY2hlZFRvdWNoRGF0YUFycmF5OiBUb3VjaERhdGFbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2hhbmRsZVRvdWNoU3RhcnQ6IChldmVudDogVG91Y2hFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfaGFuZGxlVG91Y2hFbmQ6IChldmVudDogVG91Y2hFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfaGFuZGxlVG91Y2hNb3ZlOiAoZXZlbnQ6IFRvdWNoRXZlbnQpID0+IHZvaWQ7XG5cbiAgcHJpdmF0ZSBfb25FdmVudDogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGhhbmRsZVRvdWNoU3RhcnQgPSAoZXZlbnQ6IFRvdWNoRXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGlmICh0aGlzLl9vbkV2ZW50KSB7XG4gICAgICAgIHRoaXMuX29uRXZlbnQoKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgKytpaSkge1xuICAgICAgICBjb25zdCB7IGlkZW50aWZpZXIsIHBhZ2VYLCBwYWdlWSB9ID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaWldO1xuICAgICAgICBjb25zdCBuZXdEYXRhID0gbmV3IFRvdWNoRGF0YShpZGVudGlmaWVyLCBwYWdlWCwgcGFnZVkpO1xuXG4gICAgICAgIHRoaXMuX2FsbFRvdWNoRGF0YU1hcC5zZXQoYCR7aWRlbnRpZmllcn1gLCBuZXdEYXRhKTtcbiAgICAgICAgdGhpcy5fYWxsQ2FjaGVkVG91Y2hEYXRhQXJyYXkubGVuZ3RoID0gMDtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZVRvdWNoRW5kID0gKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAodGhpcy5fb25FdmVudCkge1xuICAgICAgICB0aGlzLl9vbkV2ZW50KCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgY29uc3QgeyBpZGVudGlmaWVyIH0gPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpaV07XG5cbiAgICAgICAgdGhpcy5fYWxsVG91Y2hEYXRhTWFwLmRlbGV0ZShgJHtpZGVudGlmaWVyfWApO1xuICAgICAgICB0aGlzLl9hbGxDYWNoZWRUb3VjaERhdGFBcnJheS5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlVG91Y2hNb3ZlID0gKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAodGhpcy5fb25FdmVudCkge1xuICAgICAgICB0aGlzLl9vbkV2ZW50KCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgY29uc3QgeyBpZGVudGlmaWVyLCBwYWdlWCwgcGFnZVkgfSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2lpXTtcblxuICAgICAgICBjb25zdCBjdXJyRGF0YSA9IHRoaXMuX2FsbFRvdWNoRGF0YU1hcC5nZXQoYCR7aWRlbnRpZmllcn1gKTtcbiAgICAgICAgaWYgKCFjdXJyRGF0YSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVsdGFYID0gcGFnZVggLSBjdXJyRGF0YS5wb3NpdGlvblg7XG4gICAgICAgIGNvbnN0IGRlbHRhWSA9IHBhZ2VZIC0gY3VyckRhdGEucG9zaXRpb25ZO1xuXG4gICAgICAgIGN1cnJEYXRhLmRlbHRhWCArPSBkZWx0YVg7XG4gICAgICAgIGN1cnJEYXRhLmRlbHRhWSArPSBkZWx0YVk7XG4gICAgICAgIGN1cnJEYXRhLnBvc2l0aW9uWCA9IHBhZ2VYO1xuICAgICAgICBjdXJyRGF0YS5wb3NpdGlvblkgPSBwYWdlWTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgdGhpcy5faGFuZGxlVG91Y2hTdGFydCA9IGhhbmRsZVRvdWNoU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVUb3VjaEVuZCA9IGhhbmRsZVRvdWNoRW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlVG91Y2hNb3ZlID0gaGFuZGxlVG91Y2hNb3ZlLmJpbmQodGhpcyk7XG4gIH1cblxuICBpc1N1cHBvcnRlZChpblRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgcmV0dXJuICdvbnRvdWNoc3RhcnQnIGluIGluVGFyZ2V0RWxlbWVudDtcbiAgfVxuXG4gIGFjdGl2YXRlKGluVGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuaXNTdXBwb3J0ZWQoaW5UYXJnZXRFbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYWN0aXZhdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYWxsVG91Y2hEYXRhTWFwLmNsZWFyKCk7XG4gICAgdGhpcy5fYWxsQ2FjaGVkVG91Y2hEYXRhQXJyYXkubGVuZ3RoID0gMDtcblxuICAgIGluVGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlVG91Y2hTdGFydCk7XG4gICAgaW5UYXJnZXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlVG91Y2hFbmQpO1xuICAgIGluVGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMuX2hhbmRsZVRvdWNoRW5kKTtcbiAgICBpblRhcmdldEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlVG91Y2hNb3ZlLCB7XG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGRlYWN0aXZhdGUoaW5UYXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGlmICghdGhpcy5fYWN0aXZhdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYWxsVG91Y2hEYXRhTWFwLmNsZWFyKCk7XG4gICAgdGhpcy5fYWxsQ2FjaGVkVG91Y2hEYXRhQXJyYXkubGVuZ3RoID0gMDtcblxuICAgIGluVGFyZ2V0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlVG91Y2hTdGFydCk7XG4gICAgaW5UYXJnZXRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlVG91Y2hFbmQpO1xuICAgIGluVGFyZ2V0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMuX2hhbmRsZVRvdWNoRW5kKTtcbiAgICBpblRhcmdldEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlVG91Y2hNb3ZlKTtcblxuICAgIHRoaXMuX2FjdGl2YXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaENhY2hlKCkge1xuICAgIGlmICh0aGlzLl9hbGxDYWNoZWRUb3VjaERhdGFBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2FsbENhY2hlZFRvdWNoRGF0YUFycmF5ID0gWy4uLnRoaXMuX2FsbFRvdWNoRGF0YU1hcC52YWx1ZXMoKV07XG4gICAgfVxuICB9XG5cbiAgZ2V0VG91Y2hEYXRhKCk6IFJlYWRvbmx5QXJyYXk8VG91Y2hEYXRhPiB7XG4gICAgdGhpcy5fcmVmcmVzaENhY2hlKCk7XG4gICAgcmV0dXJuIHRoaXMuX2FsbENhY2hlZFRvdWNoRGF0YUFycmF5O1xuICB9XG5cbiAgcmVzZXREZWx0YXMoKSB7XG4gICAgdGhpcy5fcmVmcmVzaENhY2hlKCk7XG4gICAgdGhpcy5fYWxsQ2FjaGVkVG91Y2hEYXRhQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS5yZXNldERlbHRhKCkpO1xuICB9XG5cbiAgb25FdmVudChjYWxsYmFjazogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fb25FdmVudCA9IGNhbGxiYWNrO1xuICB9XG59XG5cbi8vXG4vL1xuLy9cblxuY29uc3QgR2xvYmFsVG91Y2hNYW5hZ2VyID0gbmV3IFRvdWNoTWFuYWdlcigpO1xuXG5leHBvcnQgeyBHbG9iYWxUb3VjaE1hbmFnZXIgfTtcbiIsCiAgInR5cGUgT25DaGFuZ2VDYWxsYmFjayA9IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHZvaWQ7XG5cbmNsYXNzIFZpc2liaWxpdHlNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfYWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX29uVmlzaWJpbGl0eUNoYW5nZUNhbGxiYWNrczogT25DaGFuZ2VDYWxsYmFja1tdID0gW107XG5cbiAgcHJpdmF0ZSBfaGFuZGxlVmlzaWJpbGl0eUNoYW5nZTogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zdCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlID0gKCkgPT4ge1xuICAgICAgY29uc3QgaXNWaXNpYmxlID0gdGhpcy5pc1Zpc2libGUoKTtcbiAgICAgIHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZUNhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT5cbiAgICAgICAgY2FsbGJhY2soaXNWaXNpYmxlKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgdGhpcy5faGFuZGxlVmlzaWJpbGl0eUNoYW5nZSA9IGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGFjdGl2YXRlKCkge1xuICAgIGlmICghdGhpcy5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9hY3RpdmF0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ3Zpc2liaWxpdHljaGFuZ2UnLFxuICAgICAgdGhpcy5faGFuZGxlVmlzaWJpbGl0eUNoYW5nZSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIHRoaXMuX2FjdGl2YXRlZCA9IHRydWU7XG4gIH1cblxuICBkZWFjdGl2YXRlKCkge1xuICAgIGlmICghdGhpcy5fYWN0aXZhdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICd2aXNpYmlsaXR5Y2hhbmdlJyxcbiAgICAgIHRoaXMuX2hhbmRsZVZpc2liaWxpdHlDaGFuZ2UsXG4gICAgICBmYWxzZVxuICAgICk7XG5cbiAgICB0aGlzLl9hY3RpdmF0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8vXG5cbiAgaXNTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuICdvbnZpc2liaWxpdHljaGFuZ2UnIGluIGRvY3VtZW50O1xuICB9XG5cbiAgLy9cblxuICBpc1Zpc2libGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnO1xuICB9XG5cbiAgLy9cblxuICBhZGRWaXNpYmlsaXR5Q2hhbmdlKGluQ2FsbGJhY2s6IE9uQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICB0aGlzLl9vblZpc2liaWxpdHlDaGFuZ2VDYWxsYmFja3MucHVzaChpbkNhbGxiYWNrKTtcbiAgfVxuICByZW1vdmVWaXNpYmlsaXR5Q2hhbmdlKGluQ2FsbGJhY2s6IE9uQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZUNhbGxiYWNrcy5pbmRleE9mKGluQ2FsbGJhY2spO1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fb25WaXNpYmlsaXR5Q2hhbmdlQ2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICAvL1xuXG4gIHJlbW92ZUFsbENhbGxiYWNrcygpIHtcbiAgICB0aGlzLl9vblZpc2liaWxpdHlDaGFuZ2VDYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgfVxufVxuXG5jb25zdCBHbG9iYWxWaXNpYmlsaXR5TWFuYWdlciA9IG5ldyBWaXNpYmlsaXR5TWFuYWdlcigpO1xuXG5leHBvcnQgeyBHbG9iYWxWaXNpYmlsaXR5TWFuYWdlciB9O1xuIiwKICAiZXhwb3J0IGNvbnN0IGlzV2ViV29ya2VyU3VwcG9ydGVkID0gKCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gISF3aW5kb3cuV29ya2VyO1xufTtcbiIsCiAgImV4cG9ydCBjb25zdCBpc1dlYkdMMlN1cHBvcnRlZCA9ICgpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuICEhd2luZG93LldlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XG59O1xuIiwKICAiLyoqXG4gKiBDb21tb24gdXRpbGl0aWVzXG4gKiBAbW9kdWxlIGdsTWF0cml4XG4gKi9cbi8vIENvbmZpZ3VyYXRpb24gQ29uc3RhbnRzXG5leHBvcnQgdmFyIEVQU0lMT04gPSAwLjAwMDAwMTtcbmV4cG9ydCB2YXIgQVJSQVlfVFlQRSA9IHR5cGVvZiBGbG9hdDMyQXJyYXkgIT09ICd1bmRlZmluZWQnID8gRmxvYXQzMkFycmF5IDogQXJyYXk7XG5leHBvcnQgdmFyIFJBTkRPTSA9IE1hdGgucmFuZG9tO1xuLyoqXG4gKiBTZXRzIHRoZSB0eXBlIG9mIGFycmF5IHVzZWQgd2hlbiBjcmVhdGluZyBuZXcgdmVjdG9ycyBhbmQgbWF0cmljZXNcbiAqXG4gKiBAcGFyYW0ge0Zsb2F0MzJBcnJheUNvbnN0cnVjdG9yIHwgQXJyYXlDb25zdHJ1Y3Rvcn0gdHlwZSBBcnJheSB0eXBlLCBzdWNoIGFzIEZsb2F0MzJBcnJheSBvciBBcnJheVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRNYXRyaXhBcnJheVR5cGUodHlwZSkge1xuICBBUlJBWV9UWVBFID0gdHlwZTtcbn1cbnZhciBkZWdyZWUgPSBNYXRoLlBJIC8gMTgwO1xuLyoqXG4gKiBDb252ZXJ0IERlZ3JlZSBUbyBSYWRpYW5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gYSBBbmdsZSBpbiBEZWdyZWVzXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFuKGEpIHtcbiAgcmV0dXJuIGEgKiBkZWdyZWU7XG59XG4vKipcbiAqIFRlc3RzIHdoZXRoZXIgb3Igbm90IHRoZSBhcmd1bWVudHMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIHZhbHVlLCB3aXRoaW4gYW4gYWJzb2x1dGVcbiAqIG9yIHJlbGF0aXZlIHRvbGVyYW5jZSBvZiBnbE1hdHJpeC5FUFNJTE9OIChhbiBhYnNvbHV0ZSB0b2xlcmFuY2UgaXMgdXNlZCBmb3IgdmFsdWVzIGxlc3NcbiAqIHRoYW4gb3IgZXF1YWwgdG8gMS4wLCBhbmQgYSByZWxhdGl2ZSB0b2xlcmFuY2UgaXMgdXNlZCBmb3IgbGFyZ2VyIHZhbHVlcylcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gYSBUaGUgZmlyc3QgbnVtYmVyIHRvIHRlc3QuXG4gKiBAcGFyYW0ge051bWJlcn0gYiBUaGUgc2Vjb25kIG51bWJlciB0byB0ZXN0LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG51bWJlcnMgYXJlIGFwcHJveGltYXRlbHkgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIE1hdGguYWJzKGEgLSBiKSA8PSBFUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhKSwgTWF0aC5hYnMoYikpO1xufVxuaWYgKCFNYXRoLmh5cG90KSBNYXRoLmh5cG90ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgeSA9IDAsXG4gICAgICBpID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgeSArPSBhcmd1bWVudHNbaV0gKiBhcmd1bWVudHNbaV07XG4gIH1cblxuICByZXR1cm4gTWF0aC5zcXJ0KHkpO1xufTsiLAogICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogM3gzIE1hdHJpeFxuICogQG1vZHVsZSBtYXQzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDNcbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gYSBuZXcgM3gzIG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg5KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNV0gPSAwO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgfVxuXG4gIG91dFswXSA9IDE7XG4gIG91dFs0XSA9IDE7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcGllcyB0aGUgdXBwZXItbGVmdCAzeDMgdmFsdWVzIGludG8gdGhlIGdpdmVuIG1hdDMuXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyAzeDMgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSAgIHRoZSBzb3VyY2UgNHg0IG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTWF0NChvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVs0XTtcbiAgb3V0WzRdID0gYVs1XTtcbiAgb3V0WzVdID0gYVs2XTtcbiAgb3V0WzZdID0gYVs4XTtcbiAgb3V0WzddID0gYVs5XTtcbiAgb3V0WzhdID0gYVsxMF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWF0MyBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIG1hdHJpeCB0byBjbG9uZVxuICogQHJldHVybnMge21hdDN9IGEgbmV3IDN4MyBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOSk7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIG91dFs0XSA9IGFbNF07XG4gIG91dFs1XSA9IGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSBtYXQzIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IG1hdDMgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMCBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMSBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMCBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA0KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMiBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA1KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMCBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA2KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMSBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA3KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMiBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA4KVxuICogQHJldHVybnMge21hdDN9IEEgbmV3IG1hdDNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyhtMDAsIG0wMSwgbTAyLCBtMTAsIG0xMSwgbTEyLCBtMjAsIG0yMSwgbTIyKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg5KTtcbiAgb3V0WzBdID0gbTAwO1xuICBvdXRbMV0gPSBtMDE7XG4gIG91dFsyXSA9IG0wMjtcbiAgb3V0WzNdID0gbTEwO1xuICBvdXRbNF0gPSBtMTE7XG4gIG91dFs1XSA9IG0xMjtcbiAgb3V0WzZdID0gbTIwO1xuICBvdXRbN10gPSBtMjE7XG4gIG91dFs4XSA9IG0yMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgbWF0MyB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDAgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDEgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDIgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTAgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTEgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTIgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggNSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjAgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggNilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjEgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjIgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggOClcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgbTAwLCBtMDEsIG0wMiwgbTEwLCBtMTEsIG0xMiwgbTIwLCBtMjEsIG0yMikge1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMTA7XG4gIG91dFs0XSA9IG0xMTtcbiAgb3V0WzVdID0gbTEyO1xuICBvdXRbNl0gPSBtMjA7XG4gIG91dFs3XSA9IG0yMTtcbiAgb3V0WzhdID0gbTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgYSBtYXQzIHRvIHRoZSBpZGVudGl0eSBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMTtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNwb3NlIHRoZSB2YWx1ZXMgb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zcG9zZShvdXQsIGEpIHtcbiAgLy8gSWYgd2UgYXJlIHRyYW5zcG9zaW5nIG91cnNlbHZlcyB3ZSBjYW4gc2tpcCBhIGZldyBzdGVwcyBidXQgaGF2ZSB0byBjYWNoZSBzb21lIHZhbHVlc1xuICBpZiAob3V0ID09PSBhKSB7XG4gICAgdmFyIGEwMSA9IGFbMV0sXG4gICAgICAgIGEwMiA9IGFbMl0sXG4gICAgICAgIGExMiA9IGFbNV07XG4gICAgb3V0WzFdID0gYVszXTtcbiAgICBvdXRbMl0gPSBhWzZdO1xuICAgIG91dFszXSA9IGEwMTtcbiAgICBvdXRbNV0gPSBhWzddO1xuICAgIG91dFs2XSA9IGEwMjtcbiAgICBvdXRbN10gPSBhMTI7XG4gIH0gZWxzZSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzNdO1xuICAgIG91dFsyXSA9IGFbNl07XG4gICAgb3V0WzNdID0gYVsxXTtcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbN107XG4gICAgb3V0WzZdID0gYVsyXTtcbiAgICBvdXRbN10gPSBhWzVdO1xuICAgIG91dFs4XSA9IGFbOF07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBJbnZlcnRzIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHZhciBiMDEgPSBhMjIgKiBhMTEgLSBhMTIgKiBhMjE7XG4gIHZhciBiMTEgPSAtYTIyICogYTEwICsgYTEyICogYTIwO1xuICB2YXIgYjIxID0gYTIxICogYTEwIC0gYTExICogYTIwOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGEwMCAqIGIwMSArIGEwMSAqIGIxMSArIGEwMiAqIGIyMTtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSBiMDEgKiBkZXQ7XG4gIG91dFsxXSA9ICgtYTIyICogYTAxICsgYTAyICogYTIxKSAqIGRldDtcbiAgb3V0WzJdID0gKGExMiAqIGEwMSAtIGEwMiAqIGExMSkgKiBkZXQ7XG4gIG91dFszXSA9IGIxMSAqIGRldDtcbiAgb3V0WzRdID0gKGEyMiAqIGEwMCAtIGEwMiAqIGEyMCkgKiBkZXQ7XG4gIG91dFs1XSA9ICgtYTEyICogYTAwICsgYTAyICogYTEwKSAqIGRldDtcbiAgb3V0WzZdID0gYjIxICogZGV0O1xuICBvdXRbN10gPSAoLWEyMSAqIGEwMCArIGEwMSAqIGEyMCkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMTEgKiBhMDAgLSBhMDEgKiBhMTApICogZGV0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhZGp1Z2F0ZSBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRqb2ludChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgb3V0WzBdID0gYTExICogYTIyIC0gYTEyICogYTIxO1xuICBvdXRbMV0gPSBhMDIgKiBhMjEgLSBhMDEgKiBhMjI7XG4gIG91dFsyXSA9IGEwMSAqIGExMiAtIGEwMiAqIGExMTtcbiAgb3V0WzNdID0gYTEyICogYTIwIC0gYTEwICogYTIyO1xuICBvdXRbNF0gPSBhMDAgKiBhMjIgLSBhMDIgKiBhMjA7XG4gIG91dFs1XSA9IGEwMiAqIGExMCAtIGEwMCAqIGExMjtcbiAgb3V0WzZdID0gYTEwICogYTIxIC0gYTExICogYTIwO1xuICBvdXRbN10gPSBhMDEgKiBhMjAgLSBhMDAgKiBhMjE7XG4gIG91dFs4XSA9IGEwMCAqIGExMSAtIGEwMSAqIGExMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRldGVybWluYW50IG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5hbnQoYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdO1xuICB2YXIgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdO1xuICB2YXIgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdO1xuICByZXR1cm4gYTAwICogKGEyMiAqIGExMSAtIGExMiAqIGEyMSkgKyBhMDEgKiAoLWEyMiAqIGExMCArIGExMiAqIGEyMCkgKyBhMDIgKiAoYTIxICogYTEwIC0gYTExICogYTIwKTtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gbWF0MydzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHZhciBiMDAgPSBiWzBdLFxuICAgICAgYjAxID0gYlsxXSxcbiAgICAgIGIwMiA9IGJbMl07XG4gIHZhciBiMTAgPSBiWzNdLFxuICAgICAgYjExID0gYls0XSxcbiAgICAgIGIxMiA9IGJbNV07XG4gIHZhciBiMjAgPSBiWzZdLFxuICAgICAgYjIxID0gYls3XSxcbiAgICAgIGIyMiA9IGJbOF07XG4gIG91dFswXSA9IGIwMCAqIGEwMCArIGIwMSAqIGExMCArIGIwMiAqIGEyMDtcbiAgb3V0WzFdID0gYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxO1xuICBvdXRbMl0gPSBiMDAgKiBhMDIgKyBiMDEgKiBhMTIgKyBiMDIgKiBhMjI7XG4gIG91dFszXSA9IGIxMCAqIGEwMCArIGIxMSAqIGExMCArIGIxMiAqIGEyMDtcbiAgb3V0WzRdID0gYjEwICogYTAxICsgYjExICogYTExICsgYjEyICogYTIxO1xuICBvdXRbNV0gPSBiMTAgKiBhMDIgKyBiMTEgKiBhMTIgKyBiMTIgKiBhMjI7XG4gIG91dFs2XSA9IGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMDtcbiAgb3V0WzddID0gYjIwICogYTAxICsgYjIxICogYTExICsgYjIyICogYTIxO1xuICBvdXRbOF0gPSBiMjAgKiBhMDIgKyBiMjEgKiBhMTIgKyBiMjIgKiBhMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zbGF0ZSBhIG1hdDMgYnkgdGhlIGdpdmVuIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV0sXG4gICAgICBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF0sXG4gICAgICB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdO1xuICBvdXRbMF0gPSBhMDA7XG4gIG91dFsxXSA9IGEwMTtcbiAgb3V0WzJdID0gYTAyO1xuICBvdXRbM10gPSBhMTA7XG4gIG91dFs0XSA9IGExMTtcbiAgb3V0WzVdID0gYTEyO1xuICBvdXRbNl0gPSB4ICogYTAwICsgeSAqIGExMCArIGEyMDtcbiAgb3V0WzddID0geCAqIGEwMSArIHkgKiBhMTEgKyBhMjE7XG4gIG91dFs4XSA9IHggKiBhMDIgKyB5ICogYTEyICsgYTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0MyBieSB0aGUgZ2l2ZW4gYW5nbGVcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShvdXQsIGEsIHJhZCkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdLFxuICAgICAgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdLFxuICAgICAgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICBjID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYyAqIGEwMCArIHMgKiBhMTA7XG4gIG91dFsxXSA9IGMgKiBhMDEgKyBzICogYTExO1xuICBvdXRbMl0gPSBjICogYTAyICsgcyAqIGExMjtcbiAgb3V0WzNdID0gYyAqIGExMCAtIHMgKiBhMDA7XG4gIG91dFs0XSA9IGMgKiBhMTEgLSBzICogYTAxO1xuICBvdXRbNV0gPSBjICogYTEyIC0gcyAqIGEwMjtcbiAgb3V0WzZdID0gYTIwO1xuICBvdXRbN10gPSBhMjE7XG4gIG91dFs4XSA9IGEyMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2NhbGVzIHRoZSBtYXQzIGJ5IHRoZSBkaW1lbnNpb25zIGluIHRoZSBnaXZlbiB2ZWMyXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gdiB0aGUgdmVjMiB0byBzY2FsZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIHYpIHtcbiAgdmFyIHggPSB2WzBdLFxuICAgICAgeSA9IHZbMV07XG4gIG91dFswXSA9IHggKiBhWzBdO1xuICBvdXRbMV0gPSB4ICogYVsxXTtcbiAgb3V0WzJdID0geCAqIGFbMl07XG4gIG91dFszXSA9IHkgKiBhWzNdO1xuICBvdXRbNF0gPSB5ICogYVs0XTtcbiAgb3V0WzVdID0geSAqIGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHZlY3RvciB0cmFuc2xhdGlvblxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0My50cmFuc2xhdGUoZGVzdCwgZGVzdCwgdmVjKTtcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVRyYW5zbGF0aW9uKG91dCwgdikge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAxO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSB2WzBdO1xuICBvdXRbN10gPSB2WzFdO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBnaXZlbiBhbmdsZVxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0My5yb3RhdGUoZGVzdCwgZGVzdCwgcmFkKTtcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGM7XG4gIG91dFsxXSA9IHM7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IC1zO1xuICBvdXRbNF0gPSBjO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3Igc2NhbGluZ1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0My5zY2FsZShkZXN0LCBkZXN0LCB2ZWMpO1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IFNjYWxpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21TY2FsaW5nKG91dCwgdikge1xuICBvdXRbMF0gPSB2WzBdO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB2WzFdO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3BpZXMgdGhlIHZhbHVlcyBmcm9tIGEgbWF0MmQgaW50byBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDJkfSBhIHRoZSBtYXRyaXggdG8gY29weVxuICogQHJldHVybnMge21hdDN9IG91dFxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDJkKG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSBhWzJdO1xuICBvdXRbNF0gPSBhWzNdO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSBhWzRdO1xuICBvdXRbN10gPSBhWzVdO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGEgM3gzIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgUXVhdGVybmlvbiB0byBjcmVhdGUgbWF0cml4IGZyb21cbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdWF0KG91dCwgcSkge1xuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHl4ID0geSAqIHgyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB6eCA9IHogKiB4MjtcbiAgdmFyIHp5ID0geiAqIHkyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIG91dFswXSA9IDEgLSB5eSAtIHp6O1xuICBvdXRbM10gPSB5eCAtIHd6O1xuICBvdXRbNl0gPSB6eCArIHd5O1xuICBvdXRbMV0gPSB5eCArIHd6O1xuICBvdXRbNF0gPSAxIC0geHggLSB6ejtcbiAgb3V0WzddID0genkgLSB3eDtcbiAgb3V0WzJdID0genggLSB3eTtcbiAgb3V0WzVdID0genkgKyB3eDtcbiAgb3V0WzhdID0gMSAtIHh4IC0geXk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgYSAzeDMgbm9ybWFsIG1hdHJpeCAodHJhbnNwb3NlIGludmVyc2UpIGZyb20gdGhlIDR4NCBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBNYXQ0IHRvIGRlcml2ZSB0aGUgbm9ybWFsIG1hdHJpeCBmcm9tXG4gKlxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxGcm9tTWF0NChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICB2YXIgZGV0ID0gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xuXG4gIGlmICghZGV0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBkZXQgPSAxLjAgLyBkZXQ7XG4gIG91dFswXSA9IChhMTEgKiBiMTEgLSBhMTIgKiBiMTAgKyBhMTMgKiBiMDkpICogZGV0O1xuICBvdXRbMV0gPSAoYTEyICogYjA4IC0gYTEwICogYjExIC0gYTEzICogYjA3KSAqIGRldDtcbiAgb3V0WzJdID0gKGExMCAqIGIxMCAtIGExMSAqIGIwOCArIGExMyAqIGIwNikgKiBkZXQ7XG4gIG91dFszXSA9IChhMDIgKiBiMTAgLSBhMDEgKiBiMTEgLSBhMDMgKiBiMDkpICogZGV0O1xuICBvdXRbNF0gPSAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldDtcbiAgb3V0WzVdID0gKGEwMSAqIGIwOCAtIGEwMCAqIGIxMCAtIGEwMyAqIGIwNikgKiBkZXQ7XG4gIG91dFs2XSA9IChhMzEgKiBiMDUgLSBhMzIgKiBiMDQgKyBhMzMgKiBiMDMpICogZGV0O1xuICBvdXRbN10gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcbiAgb3V0WzhdID0gKGEzMCAqIGIwNCAtIGEzMSAqIGIwMiArIGEzMyAqIGIwMCkgKiBkZXQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIDJEIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kc1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB5b3VyIGdsIGNvbnRleHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIGdsIGNvbnRleHRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdGlvbihvdXQsIHdpZHRoLCBoZWlnaHQpIHtcbiAgb3V0WzBdID0gMiAvIHdpZHRoO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAtMiAvIGhlaWdodDtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gLTE7XG4gIG91dFs3XSA9IDE7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgbWF0cml4IHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwibWF0MyhcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIiwgXCIgKyBhWzRdICsgXCIsIFwiICsgYVs1XSArIFwiLCBcIiArIGFbNl0gKyBcIiwgXCIgKyBhWzddICsgXCIsIFwiICsgYVs4XSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIEZyb2Jlbml1cyBub3JtIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gY2FsY3VsYXRlIEZyb2Jlbml1cyBub3JtIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBGcm9iZW5pdXMgbm9ybVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9iKGEpIHtcbiAgcmV0dXJuIE1hdGguaHlwb3QoYVswXSwgYVsxXSwgYVsyXSwgYVszXSwgYVs0XSwgYVs1XSwgYVs2XSwgYVs3XSwgYVs4XSk7XG59XG4vKipcbiAqIEFkZHMgdHdvIG1hdDMnc1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgb3V0WzNdID0gYVszXSArIGJbM107XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdO1xuICBvdXRbNV0gPSBhWzVdICsgYls1XTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl07XG4gIG91dFs3XSA9IGFbN10gKyBiWzddO1xuICBvdXRbOF0gPSBhWzhdICsgYls4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIG1hdHJpeCBiIGZyb20gbWF0cml4IGFcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIG91dFs0XSA9IGFbNF0gLSBiWzRdO1xuICBvdXRbNV0gPSBhWzVdIC0gYls1XTtcbiAgb3V0WzZdID0gYVs2XSAtIGJbNl07XG4gIG91dFs3XSA9IGFbN10gLSBiWzddO1xuICBvdXRbOF0gPSBhWzhdIC0gYls4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTXVsdGlwbHkgZWFjaCBlbGVtZW50IG9mIHRoZSBtYXRyaXggYnkgYSBzY2FsYXIuXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgbWF0cml4J3MgZWxlbWVudHMgYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXIob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiO1xuICBvdXRbMV0gPSBhWzFdICogYjtcbiAgb3V0WzJdID0gYVsyXSAqIGI7XG4gIG91dFszXSA9IGFbM10gKiBiO1xuICBvdXRbNF0gPSBhWzRdICogYjtcbiAgb3V0WzVdID0gYVs1XSAqIGI7XG4gIG91dFs2XSA9IGFbNl0gKiBiO1xuICBvdXRbN10gPSBhWzddICogYjtcbiAgb3V0WzhdID0gYVs4XSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIG1hdDMncyBhZnRlciBtdWx0aXBseWluZyBlYWNoIGVsZW1lbnQgb2YgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiJ3MgZWxlbWVudHMgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhckFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIG91dFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdICogc2NhbGU7XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdICogc2NhbGU7XG4gIG91dFs2XSA9IGFbNl0gKyBiWzZdICogc2NhbGU7XG4gIG91dFs3XSA9IGFbN10gKyBiWzddICogc2NhbGU7XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBUaGUgZmlyc3QgbWF0cml4LlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgVGhlIHNlY29uZCBtYXRyaXguXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWF0cmljZXMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4YWN0RXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdICYmIGFbM10gPT09IGJbM10gJiYgYVs0XSA9PT0gYls0XSAmJiBhWzVdID09PSBiWzVdICYmIGFbNl0gPT09IGJbNl0gJiYgYVs3XSA9PT0gYls3XSAmJiBhWzhdID09PSBiWzhdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBtYXRyaWNlcyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgVGhlIGZpcnN0IG1hdHJpeC5cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIFRoZSBzZWNvbmQgbWF0cml4LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG1hdHJpY2VzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdLFxuICAgICAgYTQgPSBhWzRdLFxuICAgICAgYTUgPSBhWzVdLFxuICAgICAgYTYgPSBhWzZdLFxuICAgICAgYTcgPSBhWzddLFxuICAgICAgYTggPSBhWzhdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdLFxuICAgICAgYjQgPSBiWzRdLFxuICAgICAgYjUgPSBiWzVdLFxuICAgICAgYjYgPSBiWzZdLFxuICAgICAgYjcgPSBiWzddLFxuICAgICAgYjggPSBiWzhdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSkgJiYgTWF0aC5hYnMoYTMgLSBiMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTMpLCBNYXRoLmFicyhiMykpICYmIE1hdGguYWJzKGE0IC0gYjQpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE0KSwgTWF0aC5hYnMoYjQpKSAmJiBNYXRoLmFicyhhNSAtIGI1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNSksIE1hdGguYWJzKGI1KSkgJiYgTWF0aC5hYnMoYTYgLSBiNikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTYpLCBNYXRoLmFicyhiNikpICYmIE1hdGguYWJzKGE3IC0gYjcpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE3KSwgTWF0aC5hYnMoYjcpKSAmJiBNYXRoLmFicyhhOCAtIGI4KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhOCksIE1hdGguYWJzKGI4KSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0My5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0My5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7IiwKICAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcbiAqIDR4NCBNYXRyaXg8YnI+Rm9ybWF0OiBjb2x1bW4tbWFqb3IsIHdoZW4gdHlwZWQgb3V0IGl0IGxvb2tzIGxpa2Ugcm93LW1ham9yPGJyPlRoZSBtYXRyaWNlcyBhcmUgYmVpbmcgcG9zdCBtdWx0aXBsaWVkLlxuICogQG1vZHVsZSBtYXQ0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDRcbiAqXG4gKiBAcmV0dXJucyB7bWF0NH0gYSBuZXcgNHg0IG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgxNik7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMDtcbiAgICBvdXRbOV0gPSAwO1xuICAgIG91dFsxMV0gPSAwO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAwO1xuICB9XG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBtYXRyaXggdG8gY2xvbmVcbiAqIEByZXR1cm5zIHttYXQ0fSBhIG5ldyA0eDQgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDE2KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgb3V0WzldID0gYVs5XTtcbiAgb3V0WzEwXSA9IGFbMTBdO1xuICBvdXRbMTFdID0gYVsxMV07XG4gIG91dFsxMl0gPSBhWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdO1xuICBvdXRbMTRdID0gYVsxNF07XG4gIG91dFsxNV0gPSBhWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIG1hdDQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICBvdXRbOV0gPSBhWzldO1xuICBvdXRbMTBdID0gYVsxMF07XG4gIG91dFsxMV0gPSBhWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdO1xuICBvdXRbMTNdID0gYVsxM107XG4gIG91dFsxNF0gPSBhWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbWF0NCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEzIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDMgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDEwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMyBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMxIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDEgcG9zaXRpb24gKGluZGV4IDEzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMiBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXG4gKiBAcmV0dXJucyB7bWF0NH0gQSBuZXcgbWF0NFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKG0wMCwgbTAxLCBtMDIsIG0wMywgbTEwLCBtMTEsIG0xMiwgbTEzLCBtMjAsIG0yMSwgbTIyLCBtMjMsIG0zMCwgbTMxLCBtMzIsIG0zMykge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMTYpO1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMDM7XG4gIG91dFs0XSA9IG0xMDtcbiAgb3V0WzVdID0gbTExO1xuICBvdXRbNl0gPSBtMTI7XG4gIG91dFs3XSA9IG0xMztcbiAgb3V0WzhdID0gbTIwO1xuICBvdXRbOV0gPSBtMjE7XG4gIG91dFsxMF0gPSBtMjI7XG4gIG91dFsxMV0gPSBtMjM7XG4gIG91dFsxMl0gPSBtMzA7XG4gIG91dFsxM10gPSBtMzE7XG4gIG91dFsxNF0gPSBtMzI7XG4gIG91dFsxNV0gPSBtMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIG1hdDQgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEzIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDMgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDEwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMyBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMxIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDEgcG9zaXRpb24gKGluZGV4IDEzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMiBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIG0wMCwgbTAxLCBtMDIsIG0wMywgbTEwLCBtMTEsIG0xMiwgbTEzLCBtMjAsIG0yMSwgbTIyLCBtMjMsIG0zMCwgbTMxLCBtMzIsIG0zMykge1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMDM7XG4gIG91dFs0XSA9IG0xMDtcbiAgb3V0WzVdID0gbTExO1xuICBvdXRbNl0gPSBtMTI7XG4gIG91dFs3XSA9IG0xMztcbiAgb3V0WzhdID0gbTIwO1xuICBvdXRbOV0gPSBtMjE7XG4gIG91dFsxMF0gPSBtMjI7XG4gIG91dFsxMV0gPSBtMjM7XG4gIG91dFsxMl0gPSBtMzA7XG4gIG91dFsxM10gPSBtMzE7XG4gIG91dFsxNF0gPSBtMzI7XG4gIG91dFsxNV0gPSBtMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCBhIG1hdDQgdG8gdGhlIGlkZW50aXR5IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAxO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc3Bvc2UgdGhlIHZhbHVlcyBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNwb3NlKG91dCwgYSkge1xuICAvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gIGlmIChvdXQgPT09IGEpIHtcbiAgICB2YXIgYTAxID0gYVsxXSxcbiAgICAgICAgYTAyID0gYVsyXSxcbiAgICAgICAgYTAzID0gYVszXTtcbiAgICB2YXIgYTEyID0gYVs2XSxcbiAgICAgICAgYTEzID0gYVs3XTtcbiAgICB2YXIgYTIzID0gYVsxMV07XG4gICAgb3V0WzFdID0gYVs0XTtcbiAgICBvdXRbMl0gPSBhWzhdO1xuICAgIG91dFszXSA9IGFbMTJdO1xuICAgIG91dFs0XSA9IGEwMTtcbiAgICBvdXRbNl0gPSBhWzldO1xuICAgIG91dFs3XSA9IGFbMTNdO1xuICAgIG91dFs4XSA9IGEwMjtcbiAgICBvdXRbOV0gPSBhMTI7XG4gICAgb3V0WzExXSA9IGFbMTRdO1xuICAgIG91dFsxMl0gPSBhMDM7XG4gICAgb3V0WzEzXSA9IGExMztcbiAgICBvdXRbMTRdID0gYTIzO1xuICB9IGVsc2Uge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVs0XTtcbiAgICBvdXRbMl0gPSBhWzhdO1xuICAgIG91dFszXSA9IGFbMTJdO1xuICAgIG91dFs0XSA9IGFbMV07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICBvdXRbNl0gPSBhWzldO1xuICAgIG91dFs3XSA9IGFbMTNdO1xuICAgIG91dFs4XSA9IGFbMl07XG4gICAgb3V0WzldID0gYVs2XTtcbiAgICBvdXRbMTBdID0gYVsxMF07XG4gICAgb3V0WzExXSA9IGFbMTRdO1xuICAgIG91dFsxMl0gPSBhWzNdO1xuICAgIG91dFsxM10gPSBhWzddO1xuICAgIG91dFsxNF0gPSBhWzExXTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBJbnZlcnRzIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICB2YXIgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwO1xuICB2YXIgYjAxID0gYTAwICogYTEyIC0gYTAyICogYTEwO1xuICB2YXIgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwO1xuICB2YXIgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExO1xuICB2YXIgYjA0ID0gYTAxICogYTEzIC0gYTAzICogYTExO1xuICB2YXIgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyO1xuICB2YXIgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwO1xuICB2YXIgYjA3ID0gYTIwICogYTMyIC0gYTIyICogYTMwO1xuICB2YXIgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwO1xuICB2YXIgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxO1xuICB2YXIgYjEwID0gYTIxICogYTMzIC0gYTIzICogYTMxO1xuICB2YXIgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcbiAgb3V0WzFdID0gKGEwMiAqIGIxMCAtIGEwMSAqIGIxMSAtIGEwMyAqIGIwOSkgKiBkZXQ7XG4gIG91dFsyXSA9IChhMzEgKiBiMDUgLSBhMzIgKiBiMDQgKyBhMzMgKiBiMDMpICogZGV0O1xuICBvdXRbM10gPSAoYTIyICogYjA0IC0gYTIxICogYjA1IC0gYTIzICogYjAzKSAqIGRldDtcbiAgb3V0WzRdID0gKGExMiAqIGIwOCAtIGExMCAqIGIxMSAtIGExMyAqIGIwNykgKiBkZXQ7XG4gIG91dFs1XSA9IChhMDAgKiBiMTEgLSBhMDIgKiBiMDggKyBhMDMgKiBiMDcpICogZGV0O1xuICBvdXRbNl0gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcbiAgb3V0WzddID0gKGEyMCAqIGIwNSAtIGEyMiAqIGIwMiArIGEyMyAqIGIwMSkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMTAgKiBiMTAgLSBhMTEgKiBiMDggKyBhMTMgKiBiMDYpICogZGV0O1xuICBvdXRbOV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcbiAgb3V0WzEwXSA9IChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0O1xuICBvdXRbMTFdID0gKGEyMSAqIGIwMiAtIGEyMCAqIGIwNCAtIGEyMyAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxMl0gPSAoYTExICogYjA3IC0gYTEwICogYjA5IC0gYTEyICogYjA2KSAqIGRldDtcbiAgb3V0WzEzXSA9IChhMDAgKiBiMDkgLSBhMDEgKiBiMDcgKyBhMDIgKiBiMDYpICogZGV0O1xuICBvdXRbMTRdID0gKGEzMSAqIGIwMSAtIGEzMCAqIGIwMyAtIGEzMiAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxNV0gPSAoYTIwICogYjAzIC0gYTIxICogYjAxICsgYTIyICogYjAwKSAqIGRldDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgYWRqdWdhdGUgb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkam9pbnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICBvdXRbMF0gPSBhMTEgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMSAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpICsgYTMxICogKGExMiAqIGEyMyAtIGExMyAqIGEyMik7XG4gIG91dFsxXSA9IC0oYTAxICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjEgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMSAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpKTtcbiAgb3V0WzJdID0gYTAxICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgLSBhMTEgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMSAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpO1xuICBvdXRbM10gPSAtKGEwMSAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpIC0gYTExICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikgKyBhMjEgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gIG91dFs0XSA9IC0oYTEwICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjAgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSArIGEzMCAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpKTtcbiAgb3V0WzVdID0gYTAwICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjAgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMCAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpO1xuICBvdXRbNl0gPSAtKGEwMCAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpIC0gYTEwICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzAgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gIG91dFs3XSA9IGEwMCAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpIC0gYTEwICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikgKyBhMjAgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKTtcbiAgb3V0WzhdID0gYTEwICogKGEyMSAqIGEzMyAtIGEyMyAqIGEzMSkgLSBhMjAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSArIGEzMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpO1xuICBvdXRbOV0gPSAtKGEwMCAqIChhMjEgKiBhMzMgLSBhMjMgKiBhMzEpIC0gYTIwICogKGEwMSAqIGEzMyAtIGEwMyAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTIzIC0gYTAzICogYTIxKSk7XG4gIG91dFsxMF0gPSBhMDAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSAtIGExMCAqIChhMDEgKiBhMzMgLSBhMDMgKiBhMzEpICsgYTMwICogKGEwMSAqIGExMyAtIGEwMyAqIGExMSk7XG4gIG91dFsxMV0gPSAtKGEwMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpIC0gYTEwICogKGEwMSAqIGEyMyAtIGEwMyAqIGEyMSkgKyBhMjAgKiAoYTAxICogYTEzIC0gYTAzICogYTExKSk7XG4gIG91dFsxMl0gPSAtKGExMCAqIChhMjEgKiBhMzIgLSBhMjIgKiBhMzEpIC0gYTIwICogKGExMSAqIGEzMiAtIGExMiAqIGEzMSkgKyBhMzAgKiAoYTExICogYTIyIC0gYTEyICogYTIxKSk7XG4gIG91dFsxM10gPSBhMDAgKiAoYTIxICogYTMyIC0gYTIyICogYTMxKSAtIGEyMCAqIChhMDEgKiBhMzIgLSBhMDIgKiBhMzEpICsgYTMwICogKGEwMSAqIGEyMiAtIGEwMiAqIGEyMSk7XG4gIG91dFsxNF0gPSAtKGEwMCAqIChhMTEgKiBhMzIgLSBhMTIgKiBhMzEpIC0gYTEwICogKGEwMSAqIGEzMiAtIGEwMiAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTEyIC0gYTAyICogYTExKSk7XG4gIG91dFsxNV0gPSBhMDAgKiAoYTExICogYTIyIC0gYTEyICogYTIxKSAtIGExMCAqIChhMDEgKiBhMjIgLSBhMDIgKiBhMjEpICsgYTIwICogKGEwMSAqIGExMiAtIGEwMiAqIGExMSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRldGVybWluYW50IG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkZXRlcm1pbmFudCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICByZXR1cm4gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBtYXQ0c1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF0sXG4gICAgICBhMTEgPSBhWzVdLFxuICAgICAgYTEyID0gYVs2XSxcbiAgICAgIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdLFxuICAgICAgYTIxID0gYVs5XSxcbiAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgYTIzID0gYVsxMV07XG4gIHZhciBhMzAgPSBhWzEyXSxcbiAgICAgIGEzMSA9IGFbMTNdLFxuICAgICAgYTMyID0gYVsxNF0sXG4gICAgICBhMzMgPSBhWzE1XTsgLy8gQ2FjaGUgb25seSB0aGUgY3VycmVudCBsaW5lIG9mIHRoZSBzZWNvbmQgbWF0cml4XG5cbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgb3V0WzBdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFsxXSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbMl0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzNdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYls0XTtcbiAgYjEgPSBiWzVdO1xuICBiMiA9IGJbNl07XG4gIGIzID0gYls3XTtcbiAgb3V0WzRdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFs1XSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbNl0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzddID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYls4XTtcbiAgYjEgPSBiWzldO1xuICBiMiA9IGJbMTBdO1xuICBiMyA9IGJbMTFdO1xuICBvdXRbOF0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzldID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gIG91dFsxMF0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzExXSA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzO1xuICBiMCA9IGJbMTJdO1xuICBiMSA9IGJbMTNdO1xuICBiMiA9IGJbMTRdO1xuICBiMyA9IGJbMTVdO1xuICBvdXRbMTJdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFsxM10gPSBiMCAqIGEwMSArIGIxICogYTExICsgYjIgKiBhMjEgKyBiMyAqIGEzMTtcbiAgb3V0WzE0XSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbMTVdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zbGF0ZSBhIG1hdDQgYnkgdGhlIGdpdmVuIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdLFxuICAgICAgeiA9IHZbMl07XG4gIHZhciBhMDAsIGEwMSwgYTAyLCBhMDM7XG4gIHZhciBhMTAsIGExMSwgYTEyLCBhMTM7XG4gIHZhciBhMjAsIGEyMSwgYTIyLCBhMjM7XG5cbiAgaWYgKGEgPT09IG91dCkge1xuICAgIG91dFsxMl0gPSBhWzBdICogeCArIGFbNF0gKiB5ICsgYVs4XSAqIHogKyBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxXSAqIHggKyBhWzVdICogeSArIGFbOV0gKiB6ICsgYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMl0gKiB4ICsgYVs2XSAqIHkgKyBhWzEwXSAqIHogKyBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVszXSAqIHggKyBhWzddICogeSArIGFbMTFdICogeiArIGFbMTVdO1xuICB9IGVsc2Uge1xuICAgIGEwMCA9IGFbMF07XG4gICAgYTAxID0gYVsxXTtcbiAgICBhMDIgPSBhWzJdO1xuICAgIGEwMyA9IGFbM107XG4gICAgYTEwID0gYVs0XTtcbiAgICBhMTEgPSBhWzVdO1xuICAgIGExMiA9IGFbNl07XG4gICAgYTEzID0gYVs3XTtcbiAgICBhMjAgPSBhWzhdO1xuICAgIGEyMSA9IGFbOV07XG4gICAgYTIyID0gYVsxMF07XG4gICAgYTIzID0gYVsxMV07XG4gICAgb3V0WzBdID0gYTAwO1xuICAgIG91dFsxXSA9IGEwMTtcbiAgICBvdXRbMl0gPSBhMDI7XG4gICAgb3V0WzNdID0gYTAzO1xuICAgIG91dFs0XSA9IGExMDtcbiAgICBvdXRbNV0gPSBhMTE7XG4gICAgb3V0WzZdID0gYTEyO1xuICAgIG91dFs3XSA9IGExMztcbiAgICBvdXRbOF0gPSBhMjA7XG4gICAgb3V0WzldID0gYTIxO1xuICAgIG91dFsxMF0gPSBhMjI7XG4gICAgb3V0WzExXSA9IGEyMztcbiAgICBvdXRbMTJdID0gYTAwICogeCArIGExMCAqIHkgKyBhMjAgKiB6ICsgYVsxMl07XG4gICAgb3V0WzEzXSA9IGEwMSAqIHggKyBhMTEgKiB5ICsgYTIxICogeiArIGFbMTNdO1xuICAgIG91dFsxNF0gPSBhMDIgKiB4ICsgYTEyICogeSArIGEyMiAqIHogKyBhWzE0XTtcbiAgICBvdXRbMTVdID0gYTAzICogeCArIGExMyAqIHkgKyBhMjMgKiB6ICsgYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgdGhlIG1hdDQgYnkgdGhlIGRpbWVuc2lvbnMgaW4gdGhlIGdpdmVuIHZlYzMgbm90IHVzaW5nIHZlY3Rvcml6YXRpb25cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdGhlIHZlYzMgdG8gc2NhbGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdLFxuICAgICAgeiA9IHZbMl07XG4gIG91dFswXSA9IGFbMF0gKiB4O1xuICBvdXRbMV0gPSBhWzFdICogeDtcbiAgb3V0WzJdID0gYVsyXSAqIHg7XG4gIG91dFszXSA9IGFbM10gKiB4O1xuICBvdXRbNF0gPSBhWzRdICogeTtcbiAgb3V0WzVdID0gYVs1XSAqIHk7XG4gIG91dFs2XSA9IGFbNl0gKiB5O1xuICBvdXRbN10gPSBhWzddICogeTtcbiAgb3V0WzhdID0gYVs4XSAqIHo7XG4gIG91dFs5XSA9IGFbOV0gKiB6O1xuICBvdXRbMTBdID0gYVsxMF0gKiB6O1xuICBvdXRbMTFdID0gYVsxMV0gKiB6O1xuICBvdXRbMTJdID0gYVsxMl07XG4gIG91dFsxM10gPSBhWzEzXTtcbiAgb3V0WzE0XSA9IGFbMTRdO1xuICBvdXRbMTVdID0gYVsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXQ0IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIGdpdmVuIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShvdXQsIGEsIHJhZCwgYXhpcykge1xuICB2YXIgeCA9IGF4aXNbMF0sXG4gICAgICB5ID0gYXhpc1sxXSxcbiAgICAgIHogPSBheGlzWzJdO1xuICB2YXIgbGVuID0gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbiAgdmFyIHMsIGMsIHQ7XG4gIHZhciBhMDAsIGEwMSwgYTAyLCBhMDM7XG4gIHZhciBhMTAsIGExMSwgYTEyLCBhMTM7XG4gIHZhciBhMjAsIGEyMSwgYTIyLCBhMjM7XG4gIHZhciBiMDAsIGIwMSwgYjAyO1xuICB2YXIgYjEwLCBiMTEsIGIxMjtcbiAgdmFyIGIyMCwgYjIxLCBiMjI7XG5cbiAgaWYgKGxlbiA8IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxlbiA9IDEgLyBsZW47XG4gIHggKj0gbGVuO1xuICB5ICo9IGxlbjtcbiAgeiAqPSBsZW47XG4gIHMgPSBNYXRoLnNpbihyYWQpO1xuICBjID0gTWF0aC5jb3MocmFkKTtcbiAgdCA9IDEgLSBjO1xuICBhMDAgPSBhWzBdO1xuICBhMDEgPSBhWzFdO1xuICBhMDIgPSBhWzJdO1xuICBhMDMgPSBhWzNdO1xuICBhMTAgPSBhWzRdO1xuICBhMTEgPSBhWzVdO1xuICBhMTIgPSBhWzZdO1xuICBhMTMgPSBhWzddO1xuICBhMjAgPSBhWzhdO1xuICBhMjEgPSBhWzldO1xuICBhMjIgPSBhWzEwXTtcbiAgYTIzID0gYVsxMV07IC8vIENvbnN0cnVjdCB0aGUgZWxlbWVudHMgb2YgdGhlIHJvdGF0aW9uIG1hdHJpeFxuXG4gIGIwMCA9IHggKiB4ICogdCArIGM7XG4gIGIwMSA9IHkgKiB4ICogdCArIHogKiBzO1xuICBiMDIgPSB6ICogeCAqIHQgLSB5ICogcztcbiAgYjEwID0geCAqIHkgKiB0IC0geiAqIHM7XG4gIGIxMSA9IHkgKiB5ICogdCArIGM7XG4gIGIxMiA9IHogKiB5ICogdCArIHggKiBzO1xuICBiMjAgPSB4ICogeiAqIHQgKyB5ICogcztcbiAgYjIxID0geSAqIHogKiB0IC0geCAqIHM7XG4gIGIyMiA9IHogKiB6ICogdCArIGM7IC8vIFBlcmZvcm0gcm90YXRpb24tc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gYTAwICogYjAwICsgYTEwICogYjAxICsgYTIwICogYjAyO1xuICBvdXRbMV0gPSBhMDEgKiBiMDAgKyBhMTEgKiBiMDEgKyBhMjEgKiBiMDI7XG4gIG91dFsyXSA9IGEwMiAqIGIwMCArIGExMiAqIGIwMSArIGEyMiAqIGIwMjtcbiAgb3V0WzNdID0gYTAzICogYjAwICsgYTEzICogYjAxICsgYTIzICogYjAyO1xuICBvdXRbNF0gPSBhMDAgKiBiMTAgKyBhMTAgKiBiMTEgKyBhMjAgKiBiMTI7XG4gIG91dFs1XSA9IGEwMSAqIGIxMCArIGExMSAqIGIxMSArIGEyMSAqIGIxMjtcbiAgb3V0WzZdID0gYTAyICogYjEwICsgYTEyICogYjExICsgYTIyICogYjEyO1xuICBvdXRbN10gPSBhMDMgKiBiMTAgKyBhMTMgKiBiMTEgKyBhMjMgKiBiMTI7XG4gIG91dFs4XSA9IGEwMCAqIGIyMCArIGExMCAqIGIyMSArIGEyMCAqIGIyMjtcbiAgb3V0WzldID0gYTAxICogYjIwICsgYTExICogYjIxICsgYTIxICogYjIyO1xuICBvdXRbMTBdID0gYTAyICogYjIwICsgYTEyICogYjIxICsgYTIyICogYjIyO1xuICBvdXRbMTFdID0gYTAzICogYjIwICsgYTEzICogYjIxICsgYTIzICogYjIyO1xuXG4gIGlmIChhICE9PSBvdXQpIHtcbiAgICAvLyBJZiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbiBkaWZmZXIsIGNvcHkgdGhlIHVuY2hhbmdlZCBsYXN0IHJvd1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYTEwID0gYVs0XTtcbiAgdmFyIGExMSA9IGFbNV07XG4gIHZhciBhMTIgPSBhWzZdO1xuICB2YXIgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF07XG4gIHZhciBhMjEgPSBhWzldO1xuICB2YXIgYTIyID0gYVsxMF07XG4gIHZhciBhMjMgPSBhWzExXTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgcm93c1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuXG4gIG91dFs0XSA9IGExMCAqIGMgKyBhMjAgKiBzO1xuICBvdXRbNV0gPSBhMTEgKiBjICsgYTIxICogcztcbiAgb3V0WzZdID0gYTEyICogYyArIGEyMiAqIHM7XG4gIG91dFs3XSA9IGExMyAqIGMgKyBhMjMgKiBzO1xuICBvdXRbOF0gPSBhMjAgKiBjIC0gYTEwICogcztcbiAgb3V0WzldID0gYTIxICogYyAtIGExMSAqIHM7XG4gIG91dFsxMF0gPSBhMjIgKiBjIC0gYTEyICogcztcbiAgb3V0WzExXSA9IGEyMyAqIGMgLSBhMTMgKiBzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0cml4IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFkgYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTtcbiAgdmFyIGEwMCA9IGFbMF07XG4gIHZhciBhMDEgPSBhWzFdO1xuICB2YXIgYTAyID0gYVsyXTtcbiAgdmFyIGEwMyA9IGFbM107XG4gIHZhciBhMjAgPSBhWzhdO1xuICB2YXIgYTIxID0gYVs5XTtcbiAgdmFyIGEyMiA9IGFbMTBdO1xuICB2YXIgYTIzID0gYVsxMV07XG5cbiAgaWYgKGEgIT09IG91dCkge1xuICAgIC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIHJvd3NcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbNV07XG4gICAgb3V0WzZdID0gYVs2XTtcbiAgICBvdXRbN10gPSBhWzddO1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfSAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cblxuICBvdXRbMF0gPSBhMDAgKiBjIC0gYTIwICogcztcbiAgb3V0WzFdID0gYTAxICogYyAtIGEyMSAqIHM7XG4gIG91dFsyXSA9IGEwMiAqIGMgLSBhMjIgKiBzO1xuICBvdXRbM10gPSBhMDMgKiBjIC0gYTIzICogcztcbiAgb3V0WzhdID0gYTAwICogcyArIGEyMCAqIGM7XG4gIG91dFs5XSA9IGEwMSAqIHMgKyBhMjEgKiBjO1xuICBvdXRbMTBdID0gYTAyICogcyArIGEyMiAqIGM7XG4gIG91dFsxMV0gPSBhMDMgKiBzICsgYTIzICogYztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIG1hdHJpeCBieSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBaIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7XG4gIHZhciBhMDAgPSBhWzBdO1xuICB2YXIgYTAxID0gYVsxXTtcbiAgdmFyIGEwMiA9IGFbMl07XG4gIHZhciBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XTtcbiAgdmFyIGExMSA9IGFbNV07XG4gIHZhciBhMTIgPSBhWzZdO1xuICB2YXIgYTEzID0gYVs3XTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgbGFzdCByb3dcbiAgICBvdXRbOF0gPSBhWzhdO1xuICAgIG91dFs5XSA9IGFbOV07XG4gICAgb3V0WzEwXSA9IGFbMTBdO1xuICAgIG91dFsxMV0gPSBhWzExXTtcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH0gLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG5cbiAgb3V0WzBdID0gYTAwICogYyArIGExMCAqIHM7XG4gIG91dFsxXSA9IGEwMSAqIGMgKyBhMTEgKiBzO1xuICBvdXRbMl0gPSBhMDIgKiBjICsgYTEyICogcztcbiAgb3V0WzNdID0gYTAzICogYyArIGExMyAqIHM7XG4gIG91dFs0XSA9IGExMCAqIGMgLSBhMDAgKiBzO1xuICBvdXRbNV0gPSBhMTEgKiBjIC0gYTAxICogcztcbiAgb3V0WzZdID0gYTEyICogYyAtIGEwMiAqIHM7XG4gIG91dFs3XSA9IGExMyAqIGMgLSBhMDMgKiBzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIGRlc3QsIHZlYyk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21UcmFuc2xhdGlvbihvdXQsIHYpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXTtcbiAgb3V0WzEzXSA9IHZbMV07XG4gIG91dFsxNF0gPSB2WzJdO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgdmVjdG9yIHNjYWxpbmdcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgZGVzdCwgdmVjKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBTY2FsaW5nIHZlY3RvclxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tU2NhbGluZyhvdXQsIHYpIHtcbiAgb3V0WzBdID0gdlswXTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gdlsxXTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IHZbMl07XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgZ2l2ZW4gYW5nbGUgYXJvdW5kIGEgZ2l2ZW4gYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGUoZGVzdCwgZGVzdCwgcmFkLCBheGlzKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGF4aXMgdGhlIGF4aXMgdG8gcm90YXRlIGFyb3VuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb24ob3V0LCByYWQsIGF4aXMpIHtcbiAgdmFyIHggPSBheGlzWzBdLFxuICAgICAgeSA9IGF4aXNbMV0sXG4gICAgICB6ID0gYXhpc1syXTtcbiAgdmFyIGxlbiA9IE1hdGguaHlwb3QoeCwgeSwgeik7XG4gIHZhciBzLCBjLCB0O1xuXG4gIGlmIChsZW4gPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZW4gPSAxIC8gbGVuO1xuICB4ICo9IGxlbjtcbiAgeSAqPSBsZW47XG4gIHogKj0gbGVuO1xuICBzID0gTWF0aC5zaW4ocmFkKTtcbiAgYyA9IE1hdGguY29zKHJhZCk7XG4gIHQgPSAxIC0gYzsgLy8gUGVyZm9ybSByb3RhdGlvbi1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSB4ICogeCAqIHQgKyBjO1xuICBvdXRbMV0gPSB5ICogeCAqIHQgKyB6ICogcztcbiAgb3V0WzJdID0geiAqIHggKiB0IC0geSAqIHM7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHggKiB5ICogdCAtIHogKiBzO1xuICBvdXRbNV0gPSB5ICogeSAqIHQgKyBjO1xuICBvdXRbNl0gPSB6ICogeSAqIHQgKyB4ICogcztcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0geCAqIHogKiB0ICsgeSAqIHM7XG4gIG91dFs5XSA9IHkgKiB6ICogdCAtIHggKiBzO1xuICBvdXRbMTBdID0geiAqIHogKiB0ICsgYztcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnJvdGF0ZVgoZGVzdCwgZGVzdCwgcmFkKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tWFJvdGF0aW9uKG91dCwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpOyAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gYztcbiAgb3V0WzZdID0gcztcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gLXM7XG4gIG91dFsxMF0gPSBjO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBZIGF4aXNcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQucm90YXRlWShkZXN0LCBkZXN0LCByYWQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21ZUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSBjO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAtcztcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gcztcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IGM7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFogYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGVaKGRlc3QsIGRlc3QsIHJhZCk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVpSb3RhdGlvbihvdXQsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTsgLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IGM7XG4gIG91dFsxXSA9IHM7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IC1zO1xuICBvdXRbNV0gPSBjO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uIGFuZCB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7cXVhdDR9IHEgUm90YXRpb24gcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG91dCwgcSwgdikge1xuICAvLyBRdWF0ZXJuaW9uIG1hdGhcbiAgdmFyIHggPSBxWzBdLFxuICAgICAgeSA9IHFbMV0sXG4gICAgICB6ID0gcVsyXSxcbiAgICAgIHcgPSBxWzNdO1xuICB2YXIgeDIgPSB4ICsgeDtcbiAgdmFyIHkyID0geSArIHk7XG4gIHZhciB6MiA9IHogKyB6O1xuICB2YXIgeHggPSB4ICogeDI7XG4gIHZhciB4eSA9IHggKiB5MjtcbiAgdmFyIHh6ID0geCAqIHoyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB5eiA9IHkgKiB6MjtcbiAgdmFyIHp6ID0geiAqIHoyO1xuICB2YXIgd3ggPSB3ICogeDI7XG4gIHZhciB3eSA9IHcgKiB5MjtcbiAgdmFyIHd6ID0gdyAqIHoyO1xuICBvdXRbMF0gPSAxIC0gKHl5ICsgenopO1xuICBvdXRbMV0gPSB4eSArIHd6O1xuICBvdXRbMl0gPSB4eiAtIHd5O1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB4eSAtIHd6O1xuICBvdXRbNV0gPSAxIC0gKHh4ICsgenopO1xuICBvdXRbNl0gPSB5eiArIHd4O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB4eiArIHd5O1xuICBvdXRbOV0gPSB5eiAtIHd4O1xuICBvdXRbMTBdID0gMSAtICh4eCArIHl5KTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSB2WzBdO1xuICBvdXRbMTNdID0gdlsxXTtcbiAgb3V0WzE0XSA9IHZbMl07XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgZnJvbSBhIGR1YWwgcXVhdC5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBNYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHttYXQ0fSBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdWF0MihvdXQsIGEpIHtcbiAgdmFyIHRyYW5zbGF0aW9uID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIHZhciBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM10sXG4gICAgICBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN107XG4gIHZhciBtYWduaXR1ZGUgPSBieCAqIGJ4ICsgYnkgKiBieSArIGJ6ICogYnogKyBidyAqIGJ3OyAvL09ubHkgc2NhbGUgaWYgaXQgbWFrZXMgc2Vuc2VcblxuICBpZiAobWFnbml0dWRlID4gMCkge1xuICAgIHRyYW5zbGF0aW9uWzBdID0gKGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnkpICogMiAvIG1hZ25pdHVkZTtcbiAgICB0cmFuc2xhdGlvblsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDIgLyBtYWduaXR1ZGU7XG4gICAgdHJhbnNsYXRpb25bMl0gPSAoYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCkgKiAyIC8gbWFnbml0dWRlO1xuICB9IGVsc2Uge1xuICAgIHRyYW5zbGF0aW9uWzBdID0gKGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnkpICogMjtcbiAgICB0cmFuc2xhdGlvblsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDI7XG4gICAgdHJhbnNsYXRpb25bMl0gPSAoYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCkgKiAyO1xuICB9XG5cbiAgZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24ob3V0LCBhLCB0cmFuc2xhdGlvbik7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHRyYW5zbGF0aW9uIHZlY3RvciBjb21wb25lbnQgb2YgYSB0cmFuc2Zvcm1hdGlvblxuICogIG1hdHJpeC4gSWYgYSBtYXRyaXggaXMgYnVpbHQgd2l0aCBmcm9tUm90YXRpb25UcmFuc2xhdGlvbixcbiAqICB0aGUgcmV0dXJuZWQgdmVjdG9yIHdpbGwgYmUgdGhlIHNhbWUgYXMgdGhlIHRyYW5zbGF0aW9uIHZlY3RvclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXQgVmVjdG9yIHRvIHJlY2VpdmUgdHJhbnNsYXRpb24gY29tcG9uZW50XG4gKiBAcGFyYW0gIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24ob3V0LCBtYXQpIHtcbiAgb3V0WzBdID0gbWF0WzEyXTtcbiAgb3V0WzFdID0gbWF0WzEzXTtcbiAgb3V0WzJdID0gbWF0WzE0XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgc2NhbGluZyBmYWN0b3IgY29tcG9uZW50IG9mIGEgdHJhbnNmb3JtYXRpb25cbiAqICBtYXRyaXguIElmIGEgbWF0cml4IGlzIGJ1aWx0IHdpdGggZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25TY2FsZVxuICogIHdpdGggYSBub3JtYWxpemVkIFF1YXRlcm5pb24gcGFyYW10ZXIsIHRoZSByZXR1cm5lZCB2ZWN0b3Igd2lsbCBiZVxuICogIHRoZSBzYW1lIGFzIHRoZSBzY2FsaW5nIHZlY3RvclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXQgVmVjdG9yIHRvIHJlY2VpdmUgc2NhbGluZyBmYWN0b3IgY29tcG9uZW50XG4gKiBAcGFyYW0gIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2NhbGluZyhvdXQsIG1hdCkge1xuICB2YXIgbTExID0gbWF0WzBdO1xuICB2YXIgbTEyID0gbWF0WzFdO1xuICB2YXIgbTEzID0gbWF0WzJdO1xuICB2YXIgbTIxID0gbWF0WzRdO1xuICB2YXIgbTIyID0gbWF0WzVdO1xuICB2YXIgbTIzID0gbWF0WzZdO1xuICB2YXIgbTMxID0gbWF0WzhdO1xuICB2YXIgbTMyID0gbWF0WzldO1xuICB2YXIgbTMzID0gbWF0WzEwXTtcbiAgb3V0WzBdID0gTWF0aC5oeXBvdChtMTEsIG0xMiwgbTEzKTtcbiAgb3V0WzFdID0gTWF0aC5oeXBvdChtMjEsIG0yMiwgbTIzKTtcbiAgb3V0WzJdID0gTWF0aC5oeXBvdChtMzEsIG0zMiwgbTMzKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHF1YXRlcm5pb24gcmVwcmVzZW50aW5nIHRoZSByb3RhdGlvbmFsIGNvbXBvbmVudFxuICogIG9mIGEgdHJhbnNmb3JtYXRpb24gbWF0cml4LiBJZiBhIG1hdHJpeCBpcyBidWlsdCB3aXRoXG4gKiAgZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24sIHRoZSByZXR1cm5lZCBxdWF0ZXJuaW9uIHdpbGwgYmUgdGhlXG4gKiAgc2FtZSBhcyB0aGUgcXVhdGVybmlvbiBvcmlnaW5hbGx5IHN1cHBsaWVkLlxuICogQHBhcmFtIHtxdWF0fSBvdXQgUXVhdGVybmlvbiB0byByZWNlaXZlIHRoZSByb3RhdGlvbiBjb21wb25lbnRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBtYXQgTWF0cml4IHRvIGJlIGRlY29tcG9zZWQgKGlucHV0KVxuICogQHJldHVybiB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJvdGF0aW9uKG91dCwgbWF0KSB7XG4gIHZhciBzY2FsaW5nID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIGdldFNjYWxpbmcoc2NhbGluZywgbWF0KTtcbiAgdmFyIGlzMSA9IDEgLyBzY2FsaW5nWzBdO1xuICB2YXIgaXMyID0gMSAvIHNjYWxpbmdbMV07XG4gIHZhciBpczMgPSAxIC8gc2NhbGluZ1syXTtcbiAgdmFyIHNtMTEgPSBtYXRbMF0gKiBpczE7XG4gIHZhciBzbTEyID0gbWF0WzFdICogaXMyO1xuICB2YXIgc20xMyA9IG1hdFsyXSAqIGlzMztcbiAgdmFyIHNtMjEgPSBtYXRbNF0gKiBpczE7XG4gIHZhciBzbTIyID0gbWF0WzVdICogaXMyO1xuICB2YXIgc20yMyA9IG1hdFs2XSAqIGlzMztcbiAgdmFyIHNtMzEgPSBtYXRbOF0gKiBpczE7XG4gIHZhciBzbTMyID0gbWF0WzldICogaXMyO1xuICB2YXIgc20zMyA9IG1hdFsxMF0gKiBpczM7XG4gIHZhciB0cmFjZSA9IHNtMTEgKyBzbTIyICsgc20zMztcbiAgdmFyIFMgPSAwO1xuXG4gIGlmICh0cmFjZSA+IDApIHtcbiAgICBTID0gTWF0aC5zcXJ0KHRyYWNlICsgMS4wKSAqIDI7XG4gICAgb3V0WzNdID0gMC4yNSAqIFM7XG4gICAgb3V0WzBdID0gKHNtMjMgLSBzbTMyKSAvIFM7XG4gICAgb3V0WzFdID0gKHNtMzEgLSBzbTEzKSAvIFM7XG4gICAgb3V0WzJdID0gKHNtMTIgLSBzbTIxKSAvIFM7XG4gIH0gZWxzZSBpZiAoc20xMSA+IHNtMjIgJiYgc20xMSA+IHNtMzMpIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMTEgLSBzbTIyIC0gc20zMykgKiAyO1xuICAgIG91dFszXSA9IChzbTIzIC0gc20zMikgLyBTO1xuICAgIG91dFswXSA9IDAuMjUgKiBTO1xuICAgIG91dFsxXSA9IChzbTEyICsgc20yMSkgLyBTO1xuICAgIG91dFsyXSA9IChzbTMxICsgc20xMykgLyBTO1xuICB9IGVsc2UgaWYgKHNtMjIgPiBzbTMzKSB7XG4gICAgUyA9IE1hdGguc3FydCgxLjAgKyBzbTIyIC0gc20xMSAtIHNtMzMpICogMjtcbiAgICBvdXRbM10gPSAoc20zMSAtIHNtMTMpIC8gUztcbiAgICBvdXRbMF0gPSAoc20xMiArIHNtMjEpIC8gUztcbiAgICBvdXRbMV0gPSAwLjI1ICogUztcbiAgICBvdXRbMl0gPSAoc20yMyArIHNtMzIpIC8gUztcbiAgfSBlbHNlIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMzMgLSBzbTExIC0gc20yMikgKiAyO1xuICAgIG91dFszXSA9IChzbTEyIC0gc20yMSkgLyBTO1xuICAgIG91dFswXSA9IChzbTMxICsgc20xMykgLyBTO1xuICAgIG91dFsxXSA9IChzbTIzICsgc20zMikgLyBTO1xuICAgIG91dFsyXSA9IDAuMjUgKiBTO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvbiByb3RhdGlvbiwgdmVjdG9yIHRyYW5zbGF0aW9uIGFuZCB2ZWN0b3Igc2NhbGVcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgc2NhbGUpXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtxdWF0NH0gcSBSb3RhdGlvbiBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBzIFNjYWxpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGUob3V0LCBxLCB2LCBzKSB7XG4gIC8vIFF1YXRlcm5pb24gbWF0aFxuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHh5ID0geCAqIHkyO1xuICB2YXIgeHogPSB4ICogejI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHl6ID0geSAqIHoyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIHZhciBzeCA9IHNbMF07XG4gIHZhciBzeSA9IHNbMV07XG4gIHZhciBzeiA9IHNbMl07XG4gIG91dFswXSA9ICgxIC0gKHl5ICsgenopKSAqIHN4O1xuICBvdXRbMV0gPSAoeHkgKyB3eikgKiBzeDtcbiAgb3V0WzJdID0gKHh6IC0gd3kpICogc3g7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9ICh4eSAtIHd6KSAqIHN5O1xuICBvdXRbNV0gPSAoMSAtICh4eCArIHp6KSkgKiBzeTtcbiAgb3V0WzZdID0gKHl6ICsgd3gpICogc3k7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9ICh4eiArIHd5KSAqIHN6O1xuICBvdXRbOV0gPSAoeXogLSB3eCkgKiBzejtcbiAgb3V0WzEwXSA9ICgxIC0gKHh4ICsgeXkpKSAqIHN6O1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IHZbMF07XG4gIG91dFsxM10gPSB2WzFdO1xuICBvdXRbMTRdID0gdlsyXTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHF1YXRlcm5pb24gcm90YXRpb24sIHZlY3RvciB0cmFuc2xhdGlvbiBhbmQgdmVjdG9yIHNjYWxlLCByb3RhdGluZyBhbmQgc2NhbGluZyBhcm91bmQgdGhlIGdpdmVuIG9yaWdpblxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgdmVjKTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCBvcmlnaW4pO1xuICogICAgIGxldCBxdWF0TWF0ID0gbWF0NC5jcmVhdGUoKTtcbiAqICAgICBxdWF0NC50b01hdDQocXVhdCwgcXVhdE1hdCk7XG4gKiAgICAgbWF0NC5tdWx0aXBseShkZXN0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0LnNjYWxlKGRlc3QsIHNjYWxlKVxuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIG5lZ2F0aXZlT3JpZ2luKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge3F1YXQ0fSBxIFJvdGF0aW9uIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHMgU2NhbGluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBvIFRoZSBvcmlnaW4gdmVjdG9yIGFyb3VuZCB3aGljaCB0byBzY2FsZSBhbmQgcm90YXRlXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGVPcmlnaW4ob3V0LCBxLCB2LCBzLCBvKSB7XG4gIC8vIFF1YXRlcm5pb24gbWF0aFxuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHh5ID0geCAqIHkyO1xuICB2YXIgeHogPSB4ICogejI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHl6ID0geSAqIHoyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIHZhciBzeCA9IHNbMF07XG4gIHZhciBzeSA9IHNbMV07XG4gIHZhciBzeiA9IHNbMl07XG4gIHZhciBveCA9IG9bMF07XG4gIHZhciBveSA9IG9bMV07XG4gIHZhciBveiA9IG9bMl07XG4gIHZhciBvdXQwID0gKDEgLSAoeXkgKyB6eikpICogc3g7XG4gIHZhciBvdXQxID0gKHh5ICsgd3opICogc3g7XG4gIHZhciBvdXQyID0gKHh6IC0gd3kpICogc3g7XG4gIHZhciBvdXQ0ID0gKHh5IC0gd3opICogc3k7XG4gIHZhciBvdXQ1ID0gKDEgLSAoeHggKyB6eikpICogc3k7XG4gIHZhciBvdXQ2ID0gKHl6ICsgd3gpICogc3k7XG4gIHZhciBvdXQ4ID0gKHh6ICsgd3kpICogc3o7XG4gIHZhciBvdXQ5ID0gKHl6IC0gd3gpICogc3o7XG4gIHZhciBvdXQxMCA9ICgxIC0gKHh4ICsgeXkpKSAqIHN6O1xuICBvdXRbMF0gPSBvdXQwO1xuICBvdXRbMV0gPSBvdXQxO1xuICBvdXRbMl0gPSBvdXQyO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSBvdXQ0O1xuICBvdXRbNV0gPSBvdXQ1O1xuICBvdXRbNl0gPSBvdXQ2O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSBvdXQ4O1xuICBvdXRbOV0gPSBvdXQ5O1xuICBvdXRbMTBdID0gb3V0MTA7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXSArIG94IC0gKG91dDAgKiBveCArIG91dDQgKiBveSArIG91dDggKiBveik7XG4gIG91dFsxM10gPSB2WzFdICsgb3kgLSAob3V0MSAqIG94ICsgb3V0NSAqIG95ICsgb3V0OSAqIG96KTtcbiAgb3V0WzE0XSA9IHZbMl0gKyBveiAtIChvdXQyICogb3ggKyBvdXQ2ICogb3kgKyBvdXQxMCAqIG96KTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgYSA0eDQgbWF0cml4IGZyb20gdGhlIGdpdmVuIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBRdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICpcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVF1YXQob3V0LCBxKSB7XG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeXggPSB5ICogeDI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHp4ID0geiAqIHgyO1xuICB2YXIgenkgPSB6ICogeTI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gIG91dFsxXSA9IHl4ICsgd3o7XG4gIG91dFsyXSA9IHp4IC0gd3k7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHl4IC0gd3o7XG4gIG91dFs1XSA9IDEgLSB4eCAtIHp6O1xuICBvdXRbNl0gPSB6eSArIHd4O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB6eCArIHd5O1xuICBvdXRbOV0gPSB6eSAtIHd4O1xuICBvdXRbMTBdID0gMSAtIHh4IC0geXk7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgZnJ1c3R1bSBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtOdW1iZXJ9IGxlZnQgTGVmdCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IHJpZ2h0IFJpZ2h0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gYm90dG9tIEJvdHRvbSBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IHRvcCBUb3AgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZydXN0dW0ob3V0LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICB2YXIgcmwgPSAxIC8gKHJpZ2h0IC0gbGVmdCk7XG4gIHZhciB0YiA9IDEgLyAodG9wIC0gYm90dG9tKTtcbiAgdmFyIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzBdID0gbmVhciAqIDIgKiBybDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gbmVhciAqIDIgKiB0YjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gKHJpZ2h0ICsgbGVmdCkgKiBybDtcbiAgb3V0WzldID0gKHRvcCArIGJvdHRvbSkgKiB0YjtcbiAgb3V0WzEwXSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICBvdXRbMTFdID0gLTE7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IGZhciAqIG5lYXIgKiAyICogbmY7XG4gIG91dFsxNV0gPSAwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHMuXG4gKiBUaGUgbmVhci9mYXIgY2xpcCBwbGFuZXMgY29ycmVzcG9uZCB0byBhIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGUgWiByYW5nZSBvZiBbLTEsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHTC9PcGVuR0wncyBjbGlwIHZvbHVtZS5cbiAqIFBhc3NpbmcgbnVsbC91bmRlZmluZWQvbm8gdmFsdWUgZm9yIGZhciB3aWxsIGdlbmVyYXRlIGluZmluaXRlIHByb2plY3Rpb24gbWF0cml4LlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBBc3BlY3QgcmF0aW8uIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aC9oZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtLCBjYW4gYmUgbnVsbCBvciBJbmZpbml0eVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzcGVjdGl2ZU5PKG91dCwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgdmFyIGYgPSAxLjAgLyBNYXRoLnRhbihmb3Z5IC8gMiksXG4gICAgICBuZjtcbiAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gZjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNV0gPSAwO1xuXG4gIGlmIChmYXIgIT0gbnVsbCAmJiBmYXIgIT09IEluZmluaXR5KSB7XG4gICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIG91dFsxMF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgICBvdXRbMTRdID0gMiAqIGZhciAqIG5lYXIgKiBuZjtcbiAgfSBlbHNlIHtcbiAgICBvdXRbMTBdID0gLTE7XG4gICAgb3V0WzE0XSA9IC0yICogbmVhcjtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5wZXJzcGVjdGl2ZU5PfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBwZXJzcGVjdGl2ZSA9IHBlcnNwZWN0aXZlTk87XG4vKipcbiAqIEdlbmVyYXRlcyBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4IHN1aXRhYmxlIGZvciBXZWJHUFUgd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWzAsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHUFUvVnVsa2FuL0RpcmVjdFgvTWV0YWwncyBjbGlwIHZvbHVtZS5cbiAqIFBhc3NpbmcgbnVsbC91bmRlZmluZWQvbm8gdmFsdWUgZm9yIGZhciB3aWxsIGdlbmVyYXRlIGluZmluaXRlIHByb2plY3Rpb24gbWF0cml4LlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBBc3BlY3QgcmF0aW8uIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aC9oZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtLCBjYW4gYmUgbnVsbCBvciBJbmZpbml0eVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzcGVjdGl2ZVpPKG91dCwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgdmFyIGYgPSAxLjAgLyBNYXRoLnRhbihmb3Z5IC8gMiksXG4gICAgICBuZjtcbiAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gZjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNV0gPSAwO1xuXG4gIGlmIChmYXIgIT0gbnVsbCAmJiBmYXIgIT09IEluZmluaXR5KSB7XG4gICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIG91dFsxMF0gPSBmYXIgKiBuZjtcbiAgICBvdXRbMTRdID0gZmFyICogbmVhciAqIG5mO1xuICB9IGVsc2Uge1xuICAgIG91dFsxMF0gPSAtMTtcbiAgICBvdXRbMTRdID0gLW5lYXI7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBmaWVsZCBvZiB2aWV3LlxuICogVGhpcyBpcyBwcmltYXJpbHkgdXNlZnVsIGZvciBnZW5lcmF0aW5nIHByb2plY3Rpb24gbWF0cmljZXMgdG8gYmUgdXNlZFxuICogd2l0aCB0aGUgc3RpbGwgZXhwZXJpZW1lbnRhbCBXZWJWUiBBUEkuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtPYmplY3R9IGZvdiBPYmplY3QgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIHZhbHVlczogdXBEZWdyZWVzLCBkb3duRGVncmVlcywgbGVmdERlZ3JlZXMsIHJpZ2h0RGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGVyc3BlY3RpdmVGcm9tRmllbGRPZlZpZXcob3V0LCBmb3YsIG5lYXIsIGZhcikge1xuICB2YXIgdXBUYW4gPSBNYXRoLnRhbihmb3YudXBEZWdyZWVzICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgdmFyIGRvd25UYW4gPSBNYXRoLnRhbihmb3YuZG93bkRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgbGVmdFRhbiA9IE1hdGgudGFuKGZvdi5sZWZ0RGVncmVlcyAqIE1hdGguUEkgLyAxODAuMCk7XG4gIHZhciByaWdodFRhbiA9IE1hdGgudGFuKGZvdi5yaWdodERlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgeFNjYWxlID0gMi4wIC8gKGxlZnRUYW4gKyByaWdodFRhbik7XG4gIHZhciB5U2NhbGUgPSAyLjAgLyAodXBUYW4gKyBkb3duVGFuKTtcbiAgb3V0WzBdID0geFNjYWxlO1xuICBvdXRbMV0gPSAwLjA7XG4gIG91dFsyXSA9IDAuMDtcbiAgb3V0WzNdID0gMC4wO1xuICBvdXRbNF0gPSAwLjA7XG4gIG91dFs1XSA9IHlTY2FsZTtcbiAgb3V0WzZdID0gMC4wO1xuICBvdXRbN10gPSAwLjA7XG4gIG91dFs4XSA9IC0oKGxlZnRUYW4gLSByaWdodFRhbikgKiB4U2NhbGUgKiAwLjUpO1xuICBvdXRbOV0gPSAodXBUYW4gLSBkb3duVGFuKSAqIHlTY2FsZSAqIDAuNTtcbiAgb3V0WzEwXSA9IGZhciAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzExXSA9IC0xLjA7XG4gIG91dFsxMl0gPSAwLjA7XG4gIG91dFsxM10gPSAwLjA7XG4gIG91dFsxNF0gPSBmYXIgKiBuZWFyIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMTVdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBvcnRob2dvbmFsIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kcy5cbiAqIFRoZSBuZWFyL2ZhciBjbGlwIHBsYW5lcyBjb3JyZXNwb25kIHRvIGEgbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSBaIHJhbmdlIG9mIFstMSwgMV0sXG4gKiB3aGljaCBtYXRjaGVzIFdlYkdML09wZW5HTCdzIGNsaXAgdm9sdW1lLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IExlZnQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSByaWdodCBSaWdodCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSBCb3R0b20gYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgVG9wIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBvcnRob05PKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgdmFyIGxyID0gMSAvIChsZWZ0IC0gcmlnaHQpO1xuICB2YXIgYnQgPSAxIC8gKGJvdHRvbSAtIHRvcCk7XG4gIHZhciBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gIG91dFswXSA9IC0yICogbHI7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IC0yICogYnQ7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSAyICogbmY7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcbiAgb3V0WzEzXSA9ICh0b3AgKyBib3R0b20pICogYnQ7XG4gIG91dFsxNF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5vcnRob05PfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBvcnRobyA9IG9ydGhvTk87XG4vKipcbiAqIEdlbmVyYXRlcyBhIG9ydGhvZ29uYWwgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWzAsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHUFUvVnVsa2FuL0RpcmVjdFgvTWV0YWwncyBjbGlwIHZvbHVtZS5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge251bWJlcn0gbGVmdCBMZWZ0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gcmlnaHQgUmlnaHQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b20gQm90dG9tIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gdG9wIFRvcCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gb3J0aG9aTyhvdXQsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gIHZhciBsciA9IDEgLyAobGVmdCAtIHJpZ2h0KTtcbiAgdmFyIGJ0ID0gMSAvIChib3R0b20gLSB0b3ApO1xuICB2YXIgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMF0gPSAtMiAqIGxyO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAtMiAqIGJ0O1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gbmY7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcbiAgb3V0WzEzXSA9ICh0b3AgKyBib3R0b20pICogYnQ7XG4gIG91dFsxNF0gPSBuZWFyICogbmY7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBsb29rLWF0IG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBleWUgcG9zaXRpb24sIGZvY2FsIHBvaW50LCBhbmQgdXAgYXhpcy5cbiAqIElmIHlvdSB3YW50IGEgbWF0cml4IHRoYXQgYWN0dWFsbHkgbWFrZXMgYW4gb2JqZWN0IGxvb2sgYXQgYW5vdGhlciBvYmplY3QsIHlvdSBzaG91bGQgdXNlIHRhcmdldFRvIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGV5ZSBQb3NpdGlvbiBvZiB0aGUgdmlld2VyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gY2VudGVyIFBvaW50IHRoZSB2aWV3ZXIgaXMgbG9va2luZyBhdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHVwIHZlYzMgcG9pbnRpbmcgdXBcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbG9va0F0KG91dCwgZXllLCBjZW50ZXIsIHVwKSB7XG4gIHZhciB4MCwgeDEsIHgyLCB5MCwgeTEsIHkyLCB6MCwgejEsIHoyLCBsZW47XG4gIHZhciBleWV4ID0gZXllWzBdO1xuICB2YXIgZXlleSA9IGV5ZVsxXTtcbiAgdmFyIGV5ZXogPSBleWVbMl07XG4gIHZhciB1cHggPSB1cFswXTtcbiAgdmFyIHVweSA9IHVwWzFdO1xuICB2YXIgdXB6ID0gdXBbMl07XG4gIHZhciBjZW50ZXJ4ID0gY2VudGVyWzBdO1xuICB2YXIgY2VudGVyeSA9IGNlbnRlclsxXTtcbiAgdmFyIGNlbnRlcnogPSBjZW50ZXJbMl07XG5cbiAgaWYgKE1hdGguYWJzKGV5ZXggLSBjZW50ZXJ4KSA8IGdsTWF0cml4LkVQU0lMT04gJiYgTWF0aC5hYnMoZXlleSAtIGNlbnRlcnkpIDwgZ2xNYXRyaXguRVBTSUxPTiAmJiBNYXRoLmFicyhleWV6IC0gY2VudGVyeikgPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5KG91dCk7XG4gIH1cblxuICB6MCA9IGV5ZXggLSBjZW50ZXJ4O1xuICB6MSA9IGV5ZXkgLSBjZW50ZXJ5O1xuICB6MiA9IGV5ZXogLSBjZW50ZXJ6O1xuICBsZW4gPSAxIC8gTWF0aC5oeXBvdCh6MCwgejEsIHoyKTtcbiAgejAgKj0gbGVuO1xuICB6MSAqPSBsZW47XG4gIHoyICo9IGxlbjtcbiAgeDAgPSB1cHkgKiB6MiAtIHVweiAqIHoxO1xuICB4MSA9IHVweiAqIHowIC0gdXB4ICogejI7XG4gIHgyID0gdXB4ICogejEgLSB1cHkgKiB6MDtcbiAgbGVuID0gTWF0aC5oeXBvdCh4MCwgeDEsIHgyKTtcblxuICBpZiAoIWxlbikge1xuICAgIHgwID0gMDtcbiAgICB4MSA9IDA7XG4gICAgeDIgPSAwO1xuICB9IGVsc2Uge1xuICAgIGxlbiA9IDEgLyBsZW47XG4gICAgeDAgKj0gbGVuO1xuICAgIHgxICo9IGxlbjtcbiAgICB4MiAqPSBsZW47XG4gIH1cblxuICB5MCA9IHoxICogeDIgLSB6MiAqIHgxO1xuICB5MSA9IHoyICogeDAgLSB6MCAqIHgyO1xuICB5MiA9IHowICogeDEgLSB6MSAqIHgwO1xuICBsZW4gPSBNYXRoLmh5cG90KHkwLCB5MSwgeTIpO1xuXG4gIGlmICghbGVuKSB7XG4gICAgeTAgPSAwO1xuICAgIHkxID0gMDtcbiAgICB5MiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgbGVuID0gMSAvIGxlbjtcbiAgICB5MCAqPSBsZW47XG4gICAgeTEgKj0gbGVuO1xuICAgIHkyICo9IGxlbjtcbiAgfVxuXG4gIG91dFswXSA9IHgwO1xuICBvdXRbMV0gPSB5MDtcbiAgb3V0WzJdID0gejA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHgxO1xuICBvdXRbNV0gPSB5MTtcbiAgb3V0WzZdID0gejE7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHgyO1xuICBvdXRbOV0gPSB5MjtcbiAgb3V0WzEwXSA9IHoyO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IC0oeDAgKiBleWV4ICsgeDEgKiBleWV5ICsgeDIgKiBleWV6KTtcbiAgb3V0WzEzXSA9IC0oeTAgKiBleWV4ICsgeTEgKiBleWV5ICsgeTIgKiBleWV6KTtcbiAgb3V0WzE0XSA9IC0oejAgKiBleWV4ICsgejEgKiBleWV5ICsgejIgKiBleWV6KTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIG1hdHJpeCB0aGF0IG1ha2VzIHNvbWV0aGluZyBsb29rIGF0IHNvbWV0aGluZyBlbHNlLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBleWUgUG9zaXRpb24gb2YgdGhlIHZpZXdlclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGNlbnRlciBQb2ludCB0aGUgdmlld2VyIGlzIGxvb2tpbmcgYXRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB1cCB2ZWMzIHBvaW50aW5nIHVwXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRhcmdldFRvKG91dCwgZXllLCB0YXJnZXQsIHVwKSB7XG4gIHZhciBleWV4ID0gZXllWzBdLFxuICAgICAgZXlleSA9IGV5ZVsxXSxcbiAgICAgIGV5ZXogPSBleWVbMl0sXG4gICAgICB1cHggPSB1cFswXSxcbiAgICAgIHVweSA9IHVwWzFdLFxuICAgICAgdXB6ID0gdXBbMl07XG4gIHZhciB6MCA9IGV5ZXggLSB0YXJnZXRbMF0sXG4gICAgICB6MSA9IGV5ZXkgLSB0YXJnZXRbMV0sXG4gICAgICB6MiA9IGV5ZXogLSB0YXJnZXRbMl07XG4gIHZhciBsZW4gPSB6MCAqIHowICsgejEgKiB6MSArIHoyICogejI7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgejAgKj0gbGVuO1xuICAgIHoxICo9IGxlbjtcbiAgICB6MiAqPSBsZW47XG4gIH1cblxuICB2YXIgeDAgPSB1cHkgKiB6MiAtIHVweiAqIHoxLFxuICAgICAgeDEgPSB1cHogKiB6MCAtIHVweCAqIHoyLFxuICAgICAgeDIgPSB1cHggKiB6MSAtIHVweSAqIHowO1xuICBsZW4gPSB4MCAqIHgwICsgeDEgKiB4MSArIHgyICogeDI7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgeDAgKj0gbGVuO1xuICAgIHgxICo9IGxlbjtcbiAgICB4MiAqPSBsZW47XG4gIH1cblxuICBvdXRbMF0gPSB4MDtcbiAgb3V0WzFdID0geDE7XG4gIG91dFsyXSA9IHgyO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB6MSAqIHgyIC0gejIgKiB4MTtcbiAgb3V0WzVdID0gejIgKiB4MCAtIHowICogeDI7XG4gIG91dFs2XSA9IHowICogeDEgLSB6MSAqIHgwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB6MDtcbiAgb3V0WzldID0gejE7XG4gIG91dFsxMF0gPSB6MjtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSBleWV4O1xuICBvdXRbMTNdID0gZXlleTtcbiAgb3V0WzE0XSA9IGV5ZXo7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIG1hdHJpeCB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcIm1hdDQoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIsIFwiICsgYVs0XSArIFwiLCBcIiArIGFbNV0gKyBcIiwgXCIgKyBhWzZdICsgXCIsIFwiICsgYVs3XSArIFwiLCBcIiArIGFbOF0gKyBcIiwgXCIgKyBhWzldICsgXCIsIFwiICsgYVsxMF0gKyBcIiwgXCIgKyBhWzExXSArIFwiLCBcIiArIGFbMTJdICsgXCIsIFwiICsgYVsxM10gKyBcIiwgXCIgKyBhWzE0XSArIFwiLCBcIiArIGFbMTVdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgRnJvYmVuaXVzIG5vcm0gb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb2IoYSkge1xuICByZXR1cm4gTWF0aC5oeXBvdChhWzBdLCBhWzFdLCBhWzJdLCBhWzNdLCBhWzRdLCBhWzVdLCBhWzZdLCBhWzddLCBhWzhdLCBhWzldLCBhWzEwXSwgYVsxMV0sIGFbMTJdLCBhWzEzXSwgYVsxNF0sIGFbMTVdKTtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0NCdzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XTtcbiAgb3V0WzddID0gYVs3XSArIGJbN107XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdO1xuICBvdXRbOV0gPSBhWzldICsgYls5XTtcbiAgb3V0WzEwXSA9IGFbMTBdICsgYlsxMF07XG4gIG91dFsxMV0gPSBhWzExXSArIGJbMTFdO1xuICBvdXRbMTJdID0gYVsxMl0gKyBiWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdICsgYlsxM107XG4gIG91dFsxNF0gPSBhWzE0XSArIGJbMTRdO1xuICBvdXRbMTVdID0gYVsxNV0gKyBiWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIG1hdHJpeCBiIGZyb20gbWF0cml4IGFcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIG91dFs0XSA9IGFbNF0gLSBiWzRdO1xuICBvdXRbNV0gPSBhWzVdIC0gYls1XTtcbiAgb3V0WzZdID0gYVs2XSAtIGJbNl07XG4gIG91dFs3XSA9IGFbN10gLSBiWzddO1xuICBvdXRbOF0gPSBhWzhdIC0gYls4XTtcbiAgb3V0WzldID0gYVs5XSAtIGJbOV07XG4gIG91dFsxMF0gPSBhWzEwXSAtIGJbMTBdO1xuICBvdXRbMTFdID0gYVsxMV0gLSBiWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdIC0gYlsxMl07XG4gIG91dFsxM10gPSBhWzEzXSAtIGJbMTNdO1xuICBvdXRbMTRdID0gYVsxNF0gLSBiWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdIC0gYlsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGx5IGVhY2ggZWxlbWVudCBvZiB0aGUgbWF0cml4IGJ5IGEgc2NhbGFyLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIG1hdHJpeCdzIGVsZW1lbnRzIGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICBvdXRbM10gPSBhWzNdICogYjtcbiAgb3V0WzRdID0gYVs0XSAqIGI7XG4gIG91dFs1XSA9IGFbNV0gKiBiO1xuICBvdXRbNl0gPSBhWzZdICogYjtcbiAgb3V0WzddID0gYVs3XSAqIGI7XG4gIG91dFs4XSA9IGFbOF0gKiBiO1xuICBvdXRbOV0gPSBhWzldICogYjtcbiAgb3V0WzEwXSA9IGFbMTBdICogYjtcbiAgb3V0WzExXSA9IGFbMTFdICogYjtcbiAgb3V0WzEyXSA9IGFbMTJdICogYjtcbiAgb3V0WzEzXSA9IGFbMTNdICogYjtcbiAgb3V0WzE0XSA9IGFbMTRdICogYjtcbiAgb3V0WzE1XSA9IGFbMTVdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0NCdzIGFmdGVyIG11bHRpcGx5aW5nIGVhY2ggZWxlbWVudCBvZiB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIncyBlbGVtZW50cyBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgb3V0WzNdID0gYVszXSArIGJbM10gKiBzY2FsZTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF0gKiBzY2FsZTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV0gKiBzY2FsZTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl0gKiBzY2FsZTtcbiAgb3V0WzddID0gYVs3XSArIGJbN10gKiBzY2FsZTtcbiAgb3V0WzhdID0gYVs4XSArIGJbOF0gKiBzY2FsZTtcbiAgb3V0WzldID0gYVs5XSArIGJbOV0gKiBzY2FsZTtcbiAgb3V0WzEwXSA9IGFbMTBdICsgYlsxMF0gKiBzY2FsZTtcbiAgb3V0WzExXSA9IGFbMTFdICsgYlsxMV0gKiBzY2FsZTtcbiAgb3V0WzEyXSA9IGFbMTJdICsgYlsxMl0gKiBzY2FsZTtcbiAgb3V0WzEzXSA9IGFbMTNdICsgYlsxM10gKiBzY2FsZTtcbiAgb3V0WzE0XSA9IGFbMTRdICsgYlsxNF0gKiBzY2FsZTtcbiAgb3V0WzE1XSA9IGFbMTVdICsgYlsxNV0gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXSAmJiBhWzRdID09PSBiWzRdICYmIGFbNV0gPT09IGJbNV0gJiYgYVs2XSA9PT0gYls2XSAmJiBhWzddID09PSBiWzddICYmIGFbOF0gPT09IGJbOF0gJiYgYVs5XSA9PT0gYls5XSAmJiBhWzEwXSA9PT0gYlsxMF0gJiYgYVsxMV0gPT09IGJbMTFdICYmIGFbMTJdID09PSBiWzEyXSAmJiBhWzEzXSA9PT0gYlsxM10gJiYgYVsxNF0gPT09IGJbMTRdICYmIGFbMTVdID09PSBiWzE1XTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGE0ID0gYVs0XSxcbiAgICAgIGE1ID0gYVs1XSxcbiAgICAgIGE2ID0gYVs2XSxcbiAgICAgIGE3ID0gYVs3XTtcbiAgdmFyIGE4ID0gYVs4XSxcbiAgICAgIGE5ID0gYVs5XSxcbiAgICAgIGExMCA9IGFbMTBdLFxuICAgICAgYTExID0gYVsxMV07XG4gIHZhciBhMTIgPSBhWzEyXSxcbiAgICAgIGExMyA9IGFbMTNdLFxuICAgICAgYTE0ID0gYVsxNF0sXG4gICAgICBhMTUgPSBhWzE1XTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgdmFyIGI0ID0gYls0XSxcbiAgICAgIGI1ID0gYls1XSxcbiAgICAgIGI2ID0gYls2XSxcbiAgICAgIGI3ID0gYls3XTtcbiAgdmFyIGI4ID0gYls4XSxcbiAgICAgIGI5ID0gYls5XSxcbiAgICAgIGIxMCA9IGJbMTBdLFxuICAgICAgYjExID0gYlsxMV07XG4gIHZhciBiMTIgPSBiWzEyXSxcbiAgICAgIGIxMyA9IGJbMTNdLFxuICAgICAgYjE0ID0gYlsxNF0sXG4gICAgICBiMTUgPSBiWzE1XTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpICYmIE1hdGguYWJzKGEzIC0gYjMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEzKSwgTWF0aC5hYnMoYjMpKSAmJiBNYXRoLmFicyhhNCAtIGI0KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNCksIE1hdGguYWJzKGI0KSkgJiYgTWF0aC5hYnMoYTUgLSBiNSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTUpLCBNYXRoLmFicyhiNSkpICYmIE1hdGguYWJzKGE2IC0gYjYpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE2KSwgTWF0aC5hYnMoYjYpKSAmJiBNYXRoLmFicyhhNyAtIGI3KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNyksIE1hdGguYWJzKGI3KSkgJiYgTWF0aC5hYnMoYTggLSBiOCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTgpLCBNYXRoLmFicyhiOCkpICYmIE1hdGguYWJzKGE5IC0gYjkpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE5KSwgTWF0aC5hYnMoYjkpKSAmJiBNYXRoLmFicyhhMTAgLSBiMTApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMCksIE1hdGguYWJzKGIxMCkpICYmIE1hdGguYWJzKGExMSAtIGIxMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTExKSwgTWF0aC5hYnMoYjExKSkgJiYgTWF0aC5hYnMoYTEyIC0gYjEyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTIpLCBNYXRoLmFicyhiMTIpKSAmJiBNYXRoLmFicyhhMTMgLSBiMTMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMyksIE1hdGguYWJzKGIxMykpICYmIE1hdGguYWJzKGExNCAtIGIxNCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTE0KSwgTWF0aC5hYnMoYjE0KSkgJiYgTWF0aC5hYnMoYTE1IC0gYjE1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTUpLCBNYXRoLmFicyhiMTUpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0LnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzdWIgPSBzdWJ0cmFjdDsiLAogICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogMyBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjM1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjM1xuICpcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzMgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2xvbmVcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeik7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjMyBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSwgeikge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSB2ZWMzIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMyB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgeCwgeSwgeikge1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFN1YnRyYWN0cyB2ZWN0b3IgYiBmcm9tIHZlY3RvciBhXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3VidHJhY3Qob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLSBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC0gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAtIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKiBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBEaXZpZGVzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXZpZGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC8gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAvIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGguY2VpbCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNlaWxcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2VpbChvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5jZWlsKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmNlaWwoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGguY2VpbChhWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5mbG9vciB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGZsb29yXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZsb29yKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmZsb29yKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmZsb29yKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLmZsb29yKGFbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaW5pbXVtIG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtaW4ob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1pbihhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5taW4oYVsyXSwgYlsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1heGltdW0gb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1heChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gIG91dFsxXSA9IE1hdGgubWF4KGFbMV0sIGJbMV0pO1xuICBvdXRbMl0gPSBNYXRoLm1heChhWzJdLCBiWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5yb3VuZCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIHJvdW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLnJvdW5kKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLnJvdW5kKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLnJvdW5kKGFbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgYSB2ZWMzIGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjMydzIGFmdGVyIHNjYWxpbmcgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdO1xuICB2YXIgeSA9IGJbMV0gLSBhWzFdO1xuICB2YXIgeiA9IGJbMl0gLSBhWzJdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogejtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBzcXVhcmVkIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkTGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogejtcbn1cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBuZWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgb3V0WzJdID0gLWFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGludmVyc2Ugb2YgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBpbnZlcnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJzZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gMS4wIC8gYVswXTtcbiAgb3V0WzFdID0gMS4wIC8gYVsxXTtcbiAgb3V0WzJdID0gMS4wIC8gYVsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZShvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogejtcblxuICBpZiAobGVuID4gMCkge1xuICAgIC8vVE9ETzogZXZhbHVhdGUgdXNlIG9mIGdsbV9pbnZzcXJ0IGhlcmU/XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICB9XG5cbiAgb3V0WzBdID0gYVswXSAqIGxlbjtcbiAgb3V0WzFdID0gYVsxXSAqIGxlbjtcbiAgb3V0WzJdID0gYVsyXSAqIGxlbjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsxXSAqIGJbMV0gKyBhWzJdICogYlsyXTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyb3NzKG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdO1xuICBvdXRbMF0gPSBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXogKiBieCAtIGF4ICogYno7XG4gIG91dFsyXSA9IGF4ICogYnkgLSBheSAqIGJ4O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBheCA9IGFbMF07XG4gIHZhciBheSA9IGFbMV07XG4gIHZhciBheiA9IGFbMl07XG4gIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgb3V0WzJdID0gYXogKyB0ICogKGJbMl0gLSBheik7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgaGVybWl0ZSBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaGVybWl0ZShvdXQsIGEsIGIsIGMsIGQsIHQpIHtcbiAgdmFyIGZhY3RvclRpbWVzMiA9IHQgKiB0O1xuICB2YXIgZmFjdG9yMSA9IGZhY3RvclRpbWVzMiAqICgyICogdCAtIDMpICsgMTtcbiAgdmFyIGZhY3RvcjIgPSBmYWN0b3JUaW1lczIgKiAodCAtIDIpICsgdDtcbiAgdmFyIGZhY3RvcjMgPSBmYWN0b3JUaW1lczIgKiAodCAtIDEpO1xuICB2YXIgZmFjdG9yNCA9IGZhY3RvclRpbWVzMiAqICgzIC0gMiAqIHQpO1xuICBvdXRbMF0gPSBhWzBdICogZmFjdG9yMSArIGJbMF0gKiBmYWN0b3IyICsgY1swXSAqIGZhY3RvcjMgKyBkWzBdICogZmFjdG9yNDtcbiAgb3V0WzFdID0gYVsxXSAqIGZhY3RvcjEgKyBiWzFdICogZmFjdG9yMiArIGNbMV0gKiBmYWN0b3IzICsgZFsxXSAqIGZhY3RvcjQ7XG4gIG91dFsyXSA9IGFbMl0gKiBmYWN0b3IxICsgYlsyXSAqIGZhY3RvcjIgKyBjWzJdICogZmFjdG9yMyArIGRbMl0gKiBmYWN0b3I0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGJlemllciBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYmV6aWVyKG91dCwgYSwgYiwgYywgZCwgdCkge1xuICB2YXIgaW52ZXJzZUZhY3RvciA9IDEgLSB0O1xuICB2YXIgaW52ZXJzZUZhY3RvclRpbWVzVHdvID0gaW52ZXJzZUZhY3RvciAqIGludmVyc2VGYWN0b3I7XG4gIHZhciBmYWN0b3JUaW1lczIgPSB0ICogdDtcbiAgdmFyIGZhY3RvcjEgPSBpbnZlcnNlRmFjdG9yVGltZXNUd28gKiBpbnZlcnNlRmFjdG9yO1xuICB2YXIgZmFjdG9yMiA9IDMgKiB0ICogaW52ZXJzZUZhY3RvclRpbWVzVHdvO1xuICB2YXIgZmFjdG9yMyA9IDMgKiBmYWN0b3JUaW1lczIgKiBpbnZlcnNlRmFjdG9yO1xuICB2YXIgZmFjdG9yNCA9IGZhY3RvclRpbWVzMiAqIHQ7XG4gIG91dFswXSA9IGFbMF0gKiBmYWN0b3IxICsgYlswXSAqIGZhY3RvcjIgKyBjWzBdICogZmFjdG9yMyArIGRbMF0gKiBmYWN0b3I0O1xuICBvdXRbMV0gPSBhWzFdICogZmFjdG9yMSArIGJbMV0gKiBmYWN0b3IyICsgY1sxXSAqIGZhY3RvcjMgKyBkWzFdICogZmFjdG9yNDtcbiAgb3V0WzJdID0gYVsyXSAqIGZhY3RvcjEgKyBiWzJdICogZmFjdG9yMiArIGNbMl0gKiBmYWN0b3IzICsgZFsyXSAqIGZhY3RvcjQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gc2NhbGVcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IFtzY2FsZV0gTGVuZ3RoIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yLiBJZiBvbW1pdHRlZCwgYSB1bml0IHZlY3RvciB3aWxsIGJlIHJldHVybmVkXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbShvdXQsIHNjYWxlKSB7XG4gIHNjYWxlID0gc2NhbGUgfHwgMS4wO1xuICB2YXIgciA9IGdsTWF0cml4LlJBTkRPTSgpICogMi4wICogTWF0aC5QSTtcbiAgdmFyIHogPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIuMCAtIDEuMDtcbiAgdmFyIHpTY2FsZSA9IE1hdGguc3FydCgxLjAgLSB6ICogeikgKiBzY2FsZTtcbiAgb3V0WzBdID0gTWF0aC5jb3MocikgKiB6U2NhbGU7XG4gIG91dFsxXSA9IE1hdGguc2luKHIpICogelNjYWxlO1xuICBvdXRbMl0gPSB6ICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIG1hdDQuXG4gKiA0dGggdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcxJ1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDQob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07XG4gIHZhciB3ID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdO1xuICB3ID0gdyB8fCAxLjA7XG4gIG91dFswXSA9IChtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSkgLyB3O1xuICBvdXRbMV0gPSAobVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10pIC8gdztcbiAgb3V0WzJdID0gKG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSkgLyB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMzIHdpdGggYSBtYXQzLlxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gdGhlIDN4MyBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWF0MyhvdXQsIGEsIG0pIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgb3V0WzBdID0geCAqIG1bMF0gKyB5ICogbVszXSArIHogKiBtWzZdO1xuICBvdXRbMV0gPSB4ICogbVsxXSArIHkgKiBtWzRdICsgeiAqIG1bN107XG4gIG91dFsyXSA9IHggKiBtWzJdICsgeSAqIG1bNV0gKyB6ICogbVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMyB3aXRoIGEgcXVhdFxuICogQ2FuIGFsc28gYmUgdXNlZCBmb3IgZHVhbCBxdWF0ZXJuaW9ucy4gKE11bHRpcGx5IGl0IHdpdGggdGhlIHJlYWwgcGFydClcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIHF1YXRlcm5pb24gdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtUXVhdChvdXQsIGEsIHEpIHtcbiAgLy8gYmVuY2htYXJrczogaHR0cHM6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tdHJhbnNmb3JtLXZlYzMtaW1wbGVtZW50YXRpb25zLWZpeGVkXG4gIHZhciBxeCA9IHFbMF0sXG4gICAgICBxeSA9IHFbMV0sXG4gICAgICBxeiA9IHFbMl0sXG4gICAgICBxdyA9IHFbM107XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07IC8vIHZhciBxdmVjID0gW3F4LCBxeSwgcXpdO1xuICAvLyB2YXIgdXYgPSB2ZWMzLmNyb3NzKFtdLCBxdmVjLCBhKTtcblxuICB2YXIgdXZ4ID0gcXkgKiB6IC0gcXogKiB5LFxuICAgICAgdXZ5ID0gcXogKiB4IC0gcXggKiB6LFxuICAgICAgdXZ6ID0gcXggKiB5IC0gcXkgKiB4OyAvLyB2YXIgdXV2ID0gdmVjMy5jcm9zcyhbXSwgcXZlYywgdXYpO1xuXG4gIHZhciB1dXZ4ID0gcXkgKiB1dnogLSBxeiAqIHV2eSxcbiAgICAgIHV1dnkgPSBxeiAqIHV2eCAtIHF4ICogdXZ6LFxuICAgICAgdXV2eiA9IHF4ICogdXZ5IC0gcXkgKiB1dng7IC8vIHZlYzMuc2NhbGUodXYsIHV2LCAyICogdyk7XG5cbiAgdmFyIHcyID0gcXcgKiAyO1xuICB1dnggKj0gdzI7XG4gIHV2eSAqPSB3MjtcbiAgdXZ6ICo9IHcyOyAvLyB2ZWMzLnNjYWxlKHV1diwgdXV2LCAyKTtcblxuICB1dXZ4ICo9IDI7XG4gIHV1dnkgKj0gMjtcbiAgdXV2eiAqPSAyOyAvLyByZXR1cm4gdmVjMy5hZGQob3V0LCBhLCB2ZWMzLmFkZChvdXQsIHV2LCB1dXYpKTtcblxuICBvdXRbMF0gPSB4ICsgdXZ4ICsgdXV2eDtcbiAgb3V0WzFdID0geSArIHV2eSArIHV1dnk7XG4gIG91dFsyXSA9IHogKyB1dnogKyB1dXZ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGUgYSAzRCB2ZWN0b3IgYXJvdW5kIHRoZSB4LWF4aXNcbiAqIEBwYXJhbSB7dmVjM30gb3V0IFRoZSByZWNlaXZpbmcgdmVjM1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIHZlYzMgcG9pbnQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgb3JpZ2luIG9mIHRoZSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCBUaGUgYW5nbGUgb2Ygcm90YXRpb24gaW4gcmFkaWFuc1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgYiwgcmFkKSB7XG4gIHZhciBwID0gW10sXG4gICAgICByID0gW107IC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cblxuICBwWzBdID0gYVswXSAtIGJbMF07XG4gIHBbMV0gPSBhWzFdIC0gYlsxXTtcbiAgcFsyXSA9IGFbMl0gLSBiWzJdOyAvL3BlcmZvcm0gcm90YXRpb25cblxuICByWzBdID0gcFswXTtcbiAgclsxXSA9IHBbMV0gKiBNYXRoLmNvcyhyYWQpIC0gcFsyXSAqIE1hdGguc2luKHJhZCk7XG4gIHJbMl0gPSBwWzFdICogTWF0aC5zaW4ocmFkKSArIHBbMl0gKiBNYXRoLmNvcyhyYWQpOyAvL3RyYW5zbGF0ZSB0byBjb3JyZWN0IHBvc2l0aW9uXG5cbiAgb3V0WzBdID0gclswXSArIGJbMF07XG4gIG91dFsxXSA9IHJbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSByWzJdICsgYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlIGEgM0QgdmVjdG9yIGFyb3VuZCB0aGUgeS1heGlzXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSB2ZWMzIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIG9yaWdpbiBvZiB0aGUgcm90YXRpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIGIsIHJhZCkge1xuICB2YXIgcCA9IFtdLFxuICAgICAgciA9IFtdOyAvL1RyYW5zbGF0ZSBwb2ludCB0byB0aGUgb3JpZ2luXG5cbiAgcFswXSA9IGFbMF0gLSBiWzBdO1xuICBwWzFdID0gYVsxXSAtIGJbMV07XG4gIHBbMl0gPSBhWzJdIC0gYlsyXTsgLy9wZXJmb3JtIHJvdGF0aW9uXG5cbiAgclswXSA9IHBbMl0gKiBNYXRoLnNpbihyYWQpICsgcFswXSAqIE1hdGguY29zKHJhZCk7XG4gIHJbMV0gPSBwWzFdO1xuICByWzJdID0gcFsyXSAqIE1hdGguY29zKHJhZCkgLSBwWzBdICogTWF0aC5zaW4ocmFkKTsgLy90cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuXG4gIG91dFswXSA9IHJbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSByWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gclsyXSArIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZSBhIDNEIHZlY3RvciBhcm91bmQgdGhlIHotYXhpc1xuICogQHBhcmFtIHt2ZWMzfSBvdXQgVGhlIHJlY2VpdmluZyB2ZWMzXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgdmVjMyBwb2ludCB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIFRoZSBhbmdsZSBvZiByb3RhdGlvbiBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCBiLCByYWQpIHtcbiAgdmFyIHAgPSBbXSxcbiAgICAgIHIgPSBbXTsgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuXG4gIHBbMF0gPSBhWzBdIC0gYlswXTtcbiAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICBwWzJdID0gYVsyXSAtIGJbMl07IC8vcGVyZm9ybSByb3RhdGlvblxuXG4gIHJbMF0gPSBwWzBdICogTWF0aC5jb3MocmFkKSAtIHBbMV0gKiBNYXRoLnNpbihyYWQpO1xuICByWzFdID0gcFswXSAqIE1hdGguc2luKHJhZCkgKyBwWzFdICogTWF0aC5jb3MocmFkKTtcbiAgclsyXSA9IHBbMl07IC8vdHJhbnNsYXRlIHRvIGNvcnJlY3QgcG9zaXRpb25cblxuICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZXQgdGhlIGFuZ2xlIGJldHdlZW4gdHdvIDNEIHZlY3RvcnNcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFuZ2xlKGEsIGIpIHtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXSxcbiAgICAgIG1hZzEgPSBNYXRoLnNxcnQoYXggKiBheCArIGF5ICogYXkgKyBheiAqIGF6KSxcbiAgICAgIG1hZzIgPSBNYXRoLnNxcnQoYnggKiBieCArIGJ5ICogYnkgKyBieiAqIGJ6KSxcbiAgICAgIG1hZyA9IG1hZzEgKiBtYWcyLFxuICAgICAgY29zaW5lID0gbWFnICYmIGRvdChhLCBiKSAvIG1hZztcbiAgcmV0dXJuIE1hdGguYWNvcyhNYXRoLm1pbihNYXRoLm1heChjb3NpbmUsIC0xKSwgMSkpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzIHRvIHplcm9cbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB6ZXJvKG91dCkge1xuICBvdXRbMF0gPSAwLjA7XG4gIG91dFsxXSA9IDAuMDtcbiAgb3V0WzJdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwidmVjMyhcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl07XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5kaXZpZGV9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRpdiA9IGRpdmlkZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmRpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXN0ID0gZGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zcXVhcmVkRGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckRpc3QgPSBzcXVhcmVkRGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWMzcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWMzLiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjM3MgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmb3JFYWNoID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gMztcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIHZlY1syXSA9IGFbaSArIDJdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgICBhW2kgKyAyXSA9IHZlY1syXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbiAgfTtcbn0oKTsiLAogICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogNCBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjNFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjNFxuICpcbiAqIEByZXR1cm5zIHt2ZWM0fSBhIG5ldyA0RCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjNCBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjbG9uZVxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg0KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSwgeiwgdykge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIG91dFszXSA9IHc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSB2ZWM0IHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNCB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIHgsIHksIHosIHcpIHtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHZlY3RvciBiIGZyb20gdmVjdG9yIGFcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKiBiWzJdO1xuICBvdXRbM10gPSBhWzNdICogYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogRGl2aWRlcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGl2aWRlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC8gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAvIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLyBiWzJdO1xuICBvdXRbM10gPSBhWzNdIC8gYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5jZWlsIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2VpbFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjZWlsKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmNlaWwoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguY2VpbChhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5jZWlsKGFbMl0pO1xuICBvdXRbM10gPSBNYXRoLmNlaWwoYVszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGguZmxvb3IgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBmbG9vclxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmbG9vcihvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5mbG9vcihhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5mbG9vcihhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5mbG9vcihhWzJdKTtcbiAgb3V0WzNdID0gTWF0aC5mbG9vcihhWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbWluaW11bSBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWluKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICBvdXRbM10gPSBNYXRoLm1pbihhWzNdLCBiWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbWF4aW11bSBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWF4KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1heChhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWF4KGFbMl0sIGJbMl0pO1xuICBvdXRbM10gPSBNYXRoLm1heChhWzNdLCBiWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5yb3VuZCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIHJvdW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLnJvdW5kKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLnJvdW5kKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLnJvdW5kKGFbMl0pO1xuICBvdXRbM10gPSBNYXRoLnJvdW5kKGFbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgYSB2ZWM0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgb3V0WzNdID0gYVszXSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlYzQncyBhZnRlciBzY2FsaW5nIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGVBbmRBZGQob3V0LCBhLCBiLCBzY2FsZSkge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXSAqIHNjYWxlO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICBvdXRbM10gPSBhWzNdICsgYlszXSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgdmFyIHcgPSBiWzNdIC0gYVszXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeiwgdyk7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZShhLCBiKSB7XG4gIHZhciB4ID0gYlswXSAtIGFbMF07XG4gIHZhciB5ID0gYlsxXSAtIGFbMV07XG4gIHZhciB6ID0gYlsyXSAtIGFbMl07XG4gIHZhciB3ID0gYlszXSAtIGFbM107XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHksIHosIHcpO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRMZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcbn1cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBuZWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgb3V0WzJdID0gLWFbMl07XG4gIG91dFszXSA9IC1hWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gaW52ZXJ0XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVyc2Uob3V0LCBhKSB7XG4gIG91dFswXSA9IDEuMCAvIGFbMF07XG4gIG91dFsxXSA9IDEuMCAvIGFbMV07XG4gIG91dFsyXSA9IDEuMCAvIGFbMl07XG4gIG91dFszXSA9IDEuMCAvIGFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciB3ID0gYVszXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3O1xuXG4gIGlmIChsZW4gPiAwKSB7XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICB9XG5cbiAgb3V0WzBdID0geCAqIGxlbjtcbiAgb3V0WzFdID0geSAqIGxlbjtcbiAgb3V0WzJdID0geiAqIGxlbjtcbiAgb3V0WzNdID0gdyAqIGxlbjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsxXSAqIGJbMV0gKyBhWzJdICogYlsyXSArIGFbM10gKiBiWzNdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjcm9zcy1wcm9kdWN0IG9mIHRocmVlIHZlY3RvcnMgaW4gYSA0LWRpbWVuc2lvbmFsIHNwYWNlXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IHJlc3VsdCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IFUgdGhlIGZpcnN0IHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IFYgdGhlIHNlY29uZCB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBXIHRoZSB0aGlyZCB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWM0fSByZXN1bHRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3Jvc3Mob3V0LCB1LCB2LCB3KSB7XG4gIHZhciBBID0gdlswXSAqIHdbMV0gLSB2WzFdICogd1swXSxcbiAgICAgIEIgPSB2WzBdICogd1syXSAtIHZbMl0gKiB3WzBdLFxuICAgICAgQyA9IHZbMF0gKiB3WzNdIC0gdlszXSAqIHdbMF0sXG4gICAgICBEID0gdlsxXSAqIHdbMl0gLSB2WzJdICogd1sxXSxcbiAgICAgIEUgPSB2WzFdICogd1szXSAtIHZbM10gKiB3WzFdLFxuICAgICAgRiA9IHZbMl0gKiB3WzNdIC0gdlszXSAqIHdbMl07XG4gIHZhciBHID0gdVswXTtcbiAgdmFyIEggPSB1WzFdO1xuICB2YXIgSSA9IHVbMl07XG4gIHZhciBKID0gdVszXTtcbiAgb3V0WzBdID0gSCAqIEYgLSBJICogRSArIEogKiBEO1xuICBvdXRbMV0gPSAtKEcgKiBGKSArIEkgKiBDIC0gSiAqIEI7XG4gIG91dFsyXSA9IEcgKiBFIC0gSCAqIEMgKyBKICogQTtcbiAgb3V0WzNdID0gLShHICogRCkgKyBIICogQiAtIEkgKiBBO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBheCA9IGFbMF07XG4gIHZhciBheSA9IGFbMV07XG4gIHZhciBheiA9IGFbMl07XG4gIHZhciBhdyA9IGFbM107XG4gIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgb3V0WzJdID0gYXogKyB0ICogKGJbMl0gLSBheik7XG4gIG91dFszXSA9IGF3ICsgdCAqIChiWzNdIC0gYXcpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdmVjdG9yIHdpdGggdGhlIGdpdmVuIHNjYWxlXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2NhbGVdIExlbmd0aCBvZiB0aGUgcmVzdWx0aW5nIHZlY3Rvci4gSWYgb21taXR0ZWQsIGEgdW5pdCB2ZWN0b3Igd2lsbCBiZSByZXR1cm5lZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb20ob3V0LCBzY2FsZSkge1xuICBzY2FsZSA9IHNjYWxlIHx8IDEuMDsgLy8gTWFyc2FnbGlhLCBHZW9yZ2UuIENob29zaW5nIGEgUG9pbnQgZnJvbSB0aGUgU3VyZmFjZSBvZiBhXG4gIC8vIFNwaGVyZS4gQW5uLiBNYXRoLiBTdGF0aXN0LiA0MyAoMTk3MiksIG5vLiAyLCA2NDUtLTY0Ni5cbiAgLy8gaHR0cDovL3Byb2plY3RldWNsaWQub3JnL2V1Y2xpZC5hb21zLzExNzc2OTI2NDQ7XG5cbiAgdmFyIHYxLCB2MiwgdjMsIHY0O1xuICB2YXIgczEsIHMyO1xuXG4gIGRvIHtcbiAgICB2MSA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgdjIgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHMxID0gdjEgKiB2MSArIHYyICogdjI7XG4gIH0gd2hpbGUgKHMxID49IDEpO1xuXG4gIGRvIHtcbiAgICB2MyA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgdjQgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHMyID0gdjMgKiB2MyArIHY0ICogdjQ7XG4gIH0gd2hpbGUgKHMyID49IDEpO1xuXG4gIHZhciBkID0gTWF0aC5zcXJ0KCgxIC0gczEpIC8gczIpO1xuICBvdXRbMF0gPSBzY2FsZSAqIHYxO1xuICBvdXRbMV0gPSBzY2FsZSAqIHYyO1xuICBvdXRbMl0gPSBzY2FsZSAqIHYzICogZDtcbiAgb3V0WzNdID0gc2NhbGUgKiB2NCAqIGQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzQgd2l0aCBhIG1hdDQuXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWF0NChvdXQsIGEsIG0pIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICBvdXRbMF0gPSBtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSAqIHc7XG4gIG91dFsxXSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdICogdztcbiAgb3V0WzJdID0gbVsyXSAqIHggKyBtWzZdICogeSArIG1bMTBdICogeiArIG1bMTRdICogdztcbiAgb3V0WzNdID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdICogdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjNCB3aXRoIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgcXVhdGVybmlvbiB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1RdWF0KG91dCwgYSwgcSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdO1xuICB2YXIgcXggPSBxWzBdLFxuICAgICAgcXkgPSBxWzFdLFxuICAgICAgcXogPSBxWzJdLFxuICAgICAgcXcgPSBxWzNdOyAvLyBjYWxjdWxhdGUgcXVhdCAqIHZlY1xuXG4gIHZhciBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTtcbiAgdmFyIGl5ID0gcXcgKiB5ICsgcXogKiB4IC0gcXggKiB6O1xuICB2YXIgaXogPSBxdyAqIHogKyBxeCAqIHkgLSBxeSAqIHg7XG4gIHZhciBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7IC8vIGNhbGN1bGF0ZSByZXN1bHQgKiBpbnZlcnNlIHF1YXRcblxuICBvdXRbMF0gPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5O1xuICBvdXRbMV0gPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6O1xuICBvdXRbMl0gPSBpeiAqIHF3ICsgaXcgKiAtcXogKyBpeCAqIC1xeSAtIGl5ICogLXF4O1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0IHRvIHplcm9cbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB6ZXJvKG91dCkge1xuICBvdXRbMF0gPSAwLjA7XG4gIG91dFsxXSA9IDAuMDtcbiAgb3V0WzJdID0gMC4wO1xuICBvdXRbM10gPSAwLjA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJ2ZWM0KFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgdmVjdG9ycyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgVGhlIGZpcnN0IHZlY3Rvci5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIFRoZSBzZWNvbmQgdmVjdG9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl0sXG4gICAgICBhMyA9IGFbM107XG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl0sXG4gICAgICBiMyA9IGJbM107XG4gIHJldHVybiBNYXRoLmFicyhhMCAtIGIwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMCksIE1hdGguYWJzKGIwKSkgJiYgTWF0aC5hYnMoYTEgLSBiMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEpLCBNYXRoLmFicyhiMSkpICYmIE1hdGguYWJzKGEyIC0gYjIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEyKSwgTWF0aC5hYnMoYjIpKSAmJiBNYXRoLmFicyhhMyAtIGIzKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMyksIE1hdGguYWJzKGIzKSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5kaXZpZGV9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRpdiA9IGRpdmlkZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LmRpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXN0ID0gZGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5zcXVhcmVkRGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckRpc3QgPSBzcXVhcmVkRGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWM0cy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWM0LiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjNHMgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmb3JFYWNoID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gNDtcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIHZlY1syXSA9IGFbaSArIDJdO1xuICAgICAgdmVjWzNdID0gYVtpICsgM107XG4gICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgIGFbaV0gPSB2ZWNbMF07XG4gICAgICBhW2kgKyAxXSA9IHZlY1sxXTtcbiAgICAgIGFbaSArIDJdID0gdmVjWzJdO1xuICAgICAgYVtpICsgM10gPSB2ZWNbM107XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KCk7IiwKICAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG5pbXBvcnQgKiBhcyBtYXQzIGZyb20gXCIuL21hdDMuanNcIjtcbmltcG9ydCAqIGFzIHZlYzMgZnJvbSBcIi4vdmVjMy5qc1wiO1xuaW1wb3J0ICogYXMgdmVjNCBmcm9tIFwiLi92ZWM0LmpzXCI7XG4vKipcbiAqIFF1YXRlcm5pb25cbiAqIEBtb2R1bGUgcXVhdFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBxdWF0XG4gKlxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgYSBxdWF0IHRvIHRoZSBpZGVudGl0eSBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAwO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXRzIGEgcXVhdCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhbmQgcm90YXRpb24gYXhpcyxcbiAqIHRoZW4gcmV0dXJucyBpdC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBheGlzIHRoZSBheGlzIGFyb3VuZCB3aGljaCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEF4aXNBbmdsZShvdXQsIGF4aXMsIHJhZCkge1xuICByYWQgPSByYWQgKiAwLjU7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgb3V0WzBdID0gcyAqIGF4aXNbMF07XG4gIG91dFsxXSA9IHMgKiBheGlzWzFdO1xuICBvdXRbMl0gPSBzICogYXhpc1syXTtcbiAgb3V0WzNdID0gTWF0aC5jb3MocmFkKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2V0cyB0aGUgcm90YXRpb24gYXhpcyBhbmQgYW5nbGUgZm9yIGEgZ2l2ZW5cbiAqICBxdWF0ZXJuaW9uLiBJZiBhIHF1YXRlcm5pb24gaXMgY3JlYXRlZCB3aXRoXG4gKiAgc2V0QXhpc0FuZ2xlLCB0aGlzIG1ldGhvZCB3aWxsIHJldHVybiB0aGUgc2FtZVxuICogIHZhbHVlcyBhcyBwcm92aWRpZWQgaW4gdGhlIG9yaWdpbmFsIHBhcmFtZXRlciBsaXN0XG4gKiAgT1IgZnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdmFsdWVzLlxuICogRXhhbXBsZTogVGhlIHF1YXRlcm5pb24gZm9ybWVkIGJ5IGF4aXMgWzAsIDAsIDFdIGFuZFxuICogIGFuZ2xlIC05MCBpcyB0aGUgc2FtZSBhcyB0aGUgcXVhdGVybmlvbiBmb3JtZWQgYnlcbiAqICBbMCwgMCwgMV0gYW5kIDI3MC4gVGhpcyBtZXRob2QgZmF2b3JzIHRoZSBsYXR0ZXIuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXRfYXhpcyAgVmVjdG9yIHJlY2VpdmluZyB0aGUgYXhpcyBvZiByb3RhdGlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBxICAgICBRdWF0ZXJuaW9uIHRvIGJlIGRlY29tcG9zZWRcbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBvZiB0aGUgcm90YXRpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXhpc0FuZ2xlKG91dF9heGlzLCBxKSB7XG4gIHZhciByYWQgPSBNYXRoLmFjb3MocVszXSkgKiAyLjA7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkIC8gMi4wKTtcblxuICBpZiAocyA+IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICBvdXRfYXhpc1swXSA9IHFbMF0gLyBzO1xuICAgIG91dF9heGlzWzFdID0gcVsxXSAvIHM7XG4gICAgb3V0X2F4aXNbMl0gPSBxWzJdIC8gcztcbiAgfSBlbHNlIHtcbiAgICAvLyBJZiBzIGlzIHplcm8sIHJldHVybiBhbnkgYXhpcyAobm8gcm90YXRpb24gLSBheGlzIGRvZXMgbm90IG1hdHRlcilcbiAgICBvdXRfYXhpc1swXSA9IDE7XG4gICAgb3V0X2F4aXNbMV0gPSAwO1xuICAgIG91dF9heGlzWzJdID0gMDtcbiAgfVxuXG4gIHJldHVybiByYWQ7XG59XG4vKipcbiAqIEdldHMgdGhlIGFuZ3VsYXIgZGlzdGFuY2UgYmV0d2VlbiB0d28gdW5pdCBxdWF0ZXJuaW9uc1xuICpcbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdH0gYSAgICAgT3JpZ2luIHVuaXQgcXVhdGVybmlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBiICAgICBEZXN0aW5hdGlvbiB1bml0IHF1YXRlcm5pb25cbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBiZXR3ZWVuIHRoZSB0d28gcXVhdGVybmlvbnNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5nbGUoYSwgYikge1xuICB2YXIgZG90cHJvZHVjdCA9IGRvdChhLCBiKTtcbiAgcmV0dXJuIE1hdGguYWNvcygyICogZG90cHJvZHVjdCAqIGRvdHByb2R1Y3QgLSAxKTtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdLFxuICAgICAgYncgPSBiWzNdO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICBvdXRbMV0gPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbMl0gPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFggYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHF1YXQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGFuZ2xlIChpbiByYWRpYW5zKSB0byByb3RhdGVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWChvdXQsIGEsIHJhZCkge1xuICByYWQgKj0gMC41O1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYncgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieDtcbiAgb3V0WzFdID0gYXkgKiBidyArIGF6ICogYng7XG4gIG91dFsyXSA9IGF6ICogYncgLSBheSAqIGJ4O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIHF1YXRlcm5pb24gYnkgdGhlIGdpdmVuIGFuZ2xlIGFib3V0IHRoZSBZIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBhbmdsZSAoaW4gcmFkaWFucykgdG8gcm90YXRlXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCByYWQpIHtcbiAgcmFkICo9IDAuNTtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ5ID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGJ3ID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYXggKiBidyAtIGF6ICogYnk7XG4gIG91dFsxXSA9IGF5ICogYncgKyBhdyAqIGJ5O1xuICBvdXRbMl0gPSBheiAqIGJ3ICsgYXggKiBieTtcbiAgb3V0WzNdID0gYXcgKiBidyAtIGF5ICogYnk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBxdWF0ZXJuaW9uIGJ5IHRoZSBnaXZlbiBhbmdsZSBhYm91dCB0aGUgWiBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgcXVhdCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVaKG91dCwgYSwgcmFkKSB7XG4gIHJhZCAqPSAwLjU7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieiA9IE1hdGguc2luKHJhZCksXG4gICAgICBidyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGF4ICogYncgKyBheSAqIGJ6O1xuICBvdXRbMV0gPSBheSAqIGJ3IC0gYXggKiBiejtcbiAgb3V0WzJdID0gYXogKiBidyArIGF3ICogYno7XG4gIG91dFszXSA9IGF3ICogYncgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBXIGNvbXBvbmVudCBvZiBhIHF1YXQgZnJvbSB0aGUgWCwgWSwgYW5kIFogY29tcG9uZW50cy5cbiAqIEFzc3VtZXMgdGhhdCBxdWF0ZXJuaW9uIGlzIDEgdW5pdCBpbiBsZW5ndGguXG4gKiBBbnkgZXhpc3RpbmcgVyBjb21wb25lbnQgd2lsbCBiZSBpZ25vcmVkLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgVyBjb21wb25lbnQgb2ZcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVyhvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gTWF0aC5zcXJ0KE1hdGguYWJzKDEuMCAtIHggKiB4IC0geSAqIHkgLSB6ICogeikpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mIGEgdW5pdCBxdWF0ZXJuaW9uLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cChvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICB2YXIgciA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB2YXIgZXQgPSBNYXRoLmV4cCh3KTtcbiAgdmFyIHMgPSByID4gMCA/IGV0ICogTWF0aC5zaW4ocikgLyByIDogMDtcbiAgb3V0WzBdID0geCAqIHM7XG4gIG91dFsxXSA9IHkgKiBzO1xuICBvdXRbMl0gPSB6ICogcztcbiAgb3V0WzNdID0gZXQgKiBNYXRoLmNvcyhyKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBuYXR1cmFsIGxvZ2FyaXRobSBvZiBhIHVuaXQgcXVhdGVybmlvbi5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsbihvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICB2YXIgciA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB2YXIgdCA9IHIgPiAwID8gTWF0aC5hdGFuMihyLCB3KSAvIHIgOiAwO1xuICBvdXRbMF0gPSB4ICogdDtcbiAgb3V0WzFdID0geSAqIHQ7XG4gIG91dFsyXSA9IHogKiB0O1xuICBvdXRbM10gPSAwLjUgKiBNYXRoLmxvZyh4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdyk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgc2NhbGFyIHBvd2VyIG9mIGEgdW5pdCBxdWF0ZXJuaW9uLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHF1YXRlcm5pb24gYnlcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcG93KG91dCwgYSwgYikge1xuICBsbihvdXQsIGEpO1xuICBzY2FsZShvdXQsIG91dCwgYik7XG4gIGV4cChvdXQsIG91dCk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2xlcnAob3V0LCBhLCBiLCB0KSB7XG4gIC8vIGJlbmNobWFya3M6XG4gIC8vICAgIGh0dHA6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tc2xlcnAtaW1wbGVtZW50YXRpb25zXG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl0sXG4gICAgICBidyA9IGJbM107XG4gIHZhciBvbWVnYSwgY29zb20sIHNpbm9tLCBzY2FsZTAsIHNjYWxlMTsgLy8gY2FsYyBjb3NpbmVcblxuICBjb3NvbSA9IGF4ICogYnggKyBheSAqIGJ5ICsgYXogKiBieiArIGF3ICogYnc7IC8vIGFkanVzdCBzaWducyAoaWYgbmVjZXNzYXJ5KVxuXG4gIGlmIChjb3NvbSA8IDAuMCkge1xuICAgIGNvc29tID0gLWNvc29tO1xuICAgIGJ4ID0gLWJ4O1xuICAgIGJ5ID0gLWJ5O1xuICAgIGJ6ID0gLWJ6O1xuICAgIGJ3ID0gLWJ3O1xuICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHNcblxuXG4gIGlmICgxLjAgLSBjb3NvbSA+IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICBvbWVnYSA9IE1hdGguYWNvcyhjb3NvbSk7XG4gICAgc2lub20gPSBNYXRoLnNpbihvbWVnYSk7XG4gICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbm9tO1xuICB9IGVsc2Uge1xuICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAvLyAgLi4uIHNvIHdlIGNhbiBkbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uXG4gICAgc2NhbGUwID0gMS4wIC0gdDtcbiAgICBzY2FsZTEgPSB0O1xuICB9IC8vIGNhbGN1bGF0ZSBmaW5hbCB2YWx1ZXNcblxuXG4gIG91dFswXSA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gIG91dFsxXSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7XG4gIG91dFsyXSA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7XG4gIG91dFszXSA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB1bml0IHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCkge1xuICAvLyBJbXBsZW1lbnRhdGlvbiBvZiBodHRwOi8vcGxhbm5pbmcuY3MudWl1Yy5lZHUvbm9kZTE5OC5odG1sXG4gIC8vIFRPRE86IENhbGxpbmcgcmFuZG9tIDMgdGltZXMgaXMgcHJvYmFibHkgbm90IHRoZSBmYXN0ZXN0IHNvbHV0aW9uXG4gIHZhciB1MSA9IGdsTWF0cml4LlJBTkRPTSgpO1xuICB2YXIgdTIgPSBnbE1hdHJpeC5SQU5ET00oKTtcbiAgdmFyIHUzID0gZ2xNYXRyaXguUkFORE9NKCk7XG4gIHZhciBzcXJ0MU1pbnVzVTEgPSBNYXRoLnNxcnQoMSAtIHUxKTtcbiAgdmFyIHNxcnRVMSA9IE1hdGguc3FydCh1MSk7XG4gIG91dFswXSA9IHNxcnQxTWludXNVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsxXSA9IHNxcnQxTWludXNVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsyXSA9IHNxcnRVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIG91dFszXSA9IHNxcnRVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGludmVyc2Ugb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBpbnZlcnNlIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGRvdCA9IGEwICogYTAgKyBhMSAqIGExICsgYTIgKiBhMiArIGEzICogYTM7XG4gIHZhciBpbnZEb3QgPSBkb3QgPyAxLjAgLyBkb3QgOiAwOyAvLyBUT0RPOiBXb3VsZCBiZSBmYXN0ZXIgdG8gcmV0dXJuIFswLDAsMCwwXSBpbW1lZGlhdGVseSBpZiBkb3QgPT0gMFxuXG4gIG91dFswXSA9IC1hMCAqIGludkRvdDtcbiAgb3V0WzFdID0gLWExICogaW52RG90O1xuICBvdXRbMl0gPSAtYTIgKiBpbnZEb3Q7XG4gIG91dFszXSA9IGEzICogaW52RG90O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjb25qdWdhdGUgb2YgYSBxdWF0XG4gKiBJZiB0aGUgcXVhdGVybmlvbiBpcyBub3JtYWxpemVkLCB0aGlzIGZ1bmN0aW9uIGlzIGZhc3RlciB0aGFuIHF1YXQuaW52ZXJzZSBhbmQgcHJvZHVjZXMgdGhlIHNhbWUgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgY29uanVnYXRlIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmp1Z2F0ZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gLWFbMF07XG4gIG91dFsxXSA9IC1hWzFdO1xuICBvdXRbMl0gPSAtYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHF1YXRlcm5pb24gZnJvbSB0aGUgZ2l2ZW4gM3gzIHJvdGF0aW9uIG1hdHJpeC5cbiAqXG4gKiBOT1RFOiBUaGUgcmVzdWx0YW50IHF1YXRlcm5pb24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIHlvdSBzaG91bGQgYmUgc3VyZVxuICogdG8gcmVub3JtYWxpemUgdGhlIHF1YXRlcm5pb24geW91cnNlbGYgd2hlcmUgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gcm90YXRpb24gbWF0cml4XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDMob3V0LCBtKSB7XG4gIC8vIEFsZ29yaXRobSBpbiBLZW4gU2hvZW1ha2UncyBhcnRpY2xlIGluIDE5ODcgU0lHR1JBUEggY291cnNlIG5vdGVzXG4gIC8vIGFydGljbGUgXCJRdWF0ZXJuaW9uIENhbGN1bHVzIGFuZCBGYXN0IEFuaW1hdGlvblwiLlxuICB2YXIgZlRyYWNlID0gbVswXSArIG1bNF0gKyBtWzhdO1xuICB2YXIgZlJvb3Q7XG5cbiAgaWYgKGZUcmFjZSA+IDAuMCkge1xuICAgIC8vIHx3fCA+IDEvMiwgbWF5IGFzIHdlbGwgY2hvb3NlIHcgPiAxLzJcbiAgICBmUm9vdCA9IE1hdGguc3FydChmVHJhY2UgKyAxLjApOyAvLyAyd1xuXG4gICAgb3V0WzNdID0gMC41ICogZlJvb3Q7XG4gICAgZlJvb3QgPSAwLjUgLyBmUm9vdDsgLy8gMS8oNHcpXG5cbiAgICBvdXRbMF0gPSAobVs1XSAtIG1bN10pICogZlJvb3Q7XG4gICAgb3V0WzFdID0gKG1bNl0gLSBtWzJdKSAqIGZSb290O1xuICAgIG91dFsyXSA9IChtWzFdIC0gbVszXSkgKiBmUm9vdDtcbiAgfSBlbHNlIHtcbiAgICAvLyB8d3wgPD0gMS8yXG4gICAgdmFyIGkgPSAwO1xuICAgIGlmIChtWzRdID4gbVswXSkgaSA9IDE7XG4gICAgaWYgKG1bOF0gPiBtW2kgKiAzICsgaV0pIGkgPSAyO1xuICAgIHZhciBqID0gKGkgKyAxKSAlIDM7XG4gICAgdmFyIGsgPSAoaSArIDIpICUgMztcbiAgICBmUm9vdCA9IE1hdGguc3FydChtW2kgKiAzICsgaV0gLSBtW2ogKiAzICsgal0gLSBtW2sgKiAzICsga10gKyAxLjApO1xuICAgIG91dFtpXSA9IDAuNSAqIGZSb290O1xuICAgIGZSb290ID0gMC41IC8gZlJvb3Q7XG4gICAgb3V0WzNdID0gKG1baiAqIDMgKyBrXSAtIG1bayAqIDMgKyBqXSkgKiBmUm9vdDtcbiAgICBvdXRbal0gPSAobVtqICogMyArIGldICsgbVtpICogMyArIGpdKSAqIGZSb290O1xuICAgIG91dFtrXSA9IChtW2sgKiAzICsgaV0gKyBtW2kgKiAzICsga10pICogZlJvb3Q7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcXVhdGVybmlvbiBmcm9tIHRoZSBnaXZlbiBldWxlciBhbmdsZSB4LCB5LCB6LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHt4fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFggYXhpcyBpbiBkZWdyZWVzLlxuICogQHBhcmFtIHt5fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFkgYXhpcyBpbiBkZWdyZWVzLlxuICogQHBhcmFtIHt6fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFogYXhpcyBpbiBkZWdyZWVzLlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FdWxlcihvdXQsIHgsIHksIHopIHtcbiAgdmFyIGhhbGZUb1JhZCA9IDAuNSAqIE1hdGguUEkgLyAxODAuMDtcbiAgeCAqPSBoYWxmVG9SYWQ7XG4gIHkgKj0gaGFsZlRvUmFkO1xuICB6ICo9IGhhbGZUb1JhZDtcbiAgdmFyIHN4ID0gTWF0aC5zaW4oeCk7XG4gIHZhciBjeCA9IE1hdGguY29zKHgpO1xuICB2YXIgc3kgPSBNYXRoLnNpbih5KTtcbiAgdmFyIGN5ID0gTWF0aC5jb3MoeSk7XG4gIHZhciBzeiA9IE1hdGguc2luKHopO1xuICB2YXIgY3ogPSBNYXRoLmNvcyh6KTtcbiAgb3V0WzBdID0gc3ggKiBjeSAqIGN6IC0gY3ggKiBzeSAqIHN6O1xuICBvdXRbMV0gPSBjeCAqIHN5ICogY3ogKyBzeCAqIGN5ICogc3o7XG4gIG91dFsyXSA9IGN4ICogY3kgKiBzeiAtIHN4ICogc3kgKiBjejtcbiAgb3V0WzNdID0gY3ggKiBjeSAqIGN6ICsgc3ggKiBzeSAqIHN6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgcXVhdGVuaW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwicXVhdChcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIilcIjtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXRlcm5pb24gdG8gY2xvbmVcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGNsb25lID0gdmVjNC5jbG9uZTtcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmcm9tVmFsdWVzID0gdmVjNC5mcm9tVmFsdWVzO1xuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgcXVhdCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgc291cmNlIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgY29weSA9IHZlYzQuY29weTtcbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgcXVhdCB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzZXQgPSB2ZWM0LnNldDtcbi8qKlxuICogQWRkcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGFkZCA9IHZlYzQuYWRkO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBTY2FsZXMgYSBxdWF0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzY2FsZSA9IHZlYzQuc2NhbGU7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRvdCA9IHZlYzQuZG90O1xuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZXJwID0gdmVjNC5sZXJwO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IHZhciBsZW5ndGggPSB2ZWM0Lmxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Lmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxdWFyZWRMZW5ndGggPSB2ZWM0LnNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdC5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJMZW4gPSBzcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBOb3JtYWxpemUgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0ZXJuaW9uIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBub3JtYWxpemUgPSB2ZWM0Lm5vcm1hbGl6ZTtcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcXVhdGVybmlvbnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIFRoZSBmaXJzdCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IHZhciBleGFjdEVxdWFscyA9IHZlYzQuZXhhY3RFcXVhbHM7XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHF1YXRlcm5pb25zIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgdmFyIGVxdWFscyA9IHZlYzQuZXF1YWxzO1xuLyoqXG4gKiBTZXRzIGEgcXVhdGVybmlvbiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gb25lXG4gKiB2ZWN0b3IgdG8gYW5vdGhlci5cbiAqXG4gKiBCb3RoIHZlY3RvcnMgYXJlIGFzc3VtZWQgdG8gYmUgdW5pdCBsZW5ndGguXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGluaXRpYWwgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgZGVzdGluYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IHZhciByb3RhdGlvblRvID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdG1wdmVjMyA9IHZlYzMuY3JlYXRlKCk7XG4gIHZhciB4VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMSwgMCwgMCk7XG4gIHZhciB5VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgdmFyIGRvdCA9IHZlYzMuZG90KGEsIGIpO1xuXG4gICAgaWYgKGRvdCA8IC0wLjk5OTk5OSkge1xuICAgICAgdmVjMy5jcm9zcyh0bXB2ZWMzLCB4VW5pdFZlYzMsIGEpO1xuICAgICAgaWYgKHZlYzMubGVuKHRtcHZlYzMpIDwgMC4wMDAwMDEpIHZlYzMuY3Jvc3ModG1wdmVjMywgeVVuaXRWZWMzLCBhKTtcbiAgICAgIHZlYzMubm9ybWFsaXplKHRtcHZlYzMsIHRtcHZlYzMpO1xuICAgICAgc2V0QXhpc0FuZ2xlKG91dCwgdG1wdmVjMywgTWF0aC5QSSk7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSBpZiAoZG90ID4gMC45OTk5OTkpIHtcbiAgICAgIG91dFswXSA9IDA7XG4gICAgICBvdXRbMV0gPSAwO1xuICAgICAgb3V0WzJdID0gMDtcbiAgICAgIG91dFszXSA9IDE7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSB7XG4gICAgICB2ZWMzLmNyb3NzKHRtcHZlYzMsIGEsIGIpO1xuICAgICAgb3V0WzBdID0gdG1wdmVjM1swXTtcbiAgICAgIG91dFsxXSA9IHRtcHZlYzNbMV07XG4gICAgICBvdXRbMl0gPSB0bXB2ZWMzWzJdO1xuICAgICAgb3V0WzNdID0gMSArIGRvdDtcbiAgICAgIHJldHVybiBub3JtYWxpemUob3V0LCBvdXQpO1xuICAgIH1cbiAgfTtcbn0oKTtcbi8qKlxuICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gd2l0aCB0d28gY29udHJvbCBwb2ludHNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgdmFyIHNxbGVycCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRlbXAxID0gY3JlYXRlKCk7XG4gIHZhciB0ZW1wMiA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgYSwgYiwgYywgZCwgdCkge1xuICAgIHNsZXJwKHRlbXAxLCBhLCBkLCB0KTtcbiAgICBzbGVycCh0ZW1wMiwgYiwgYywgdCk7XG4gICAgc2xlcnAob3V0LCB0ZW1wMSwgdGVtcDIsIDIgKiB0ICogKDEgLSB0KSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfTtcbn0oKTtcbi8qKlxuICogU2V0cyB0aGUgc3BlY2lmaWVkIHF1YXRlcm5pb24gd2l0aCB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW5cbiAqIGF4ZXMuIEVhY2ggYXhpcyBpcyBhIHZlYzMgYW5kIGlzIGV4cGVjdGVkIHRvIGJlIHVuaXQgbGVuZ3RoIGFuZFxuICogcGVycGVuZGljdWxhciB0byBhbGwgb3RoZXIgc3BlY2lmaWVkIGF4ZXMuXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHZpZXcgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSB2aWV3aW5nIGRpcmVjdGlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHJpZ2h0IHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInJpZ2h0XCIgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdXAgICAgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGxvY2FsIFwidXBcIiBkaXJlY3Rpb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgdmFyIHNldEF4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBtYXRyID0gbWF0My5jcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIHZpZXcsIHJpZ2h0LCB1cCkge1xuICAgIG1hdHJbMF0gPSByaWdodFswXTtcbiAgICBtYXRyWzNdID0gcmlnaHRbMV07XG4gICAgbWF0cls2XSA9IHJpZ2h0WzJdO1xuICAgIG1hdHJbMV0gPSB1cFswXTtcbiAgICBtYXRyWzRdID0gdXBbMV07XG4gICAgbWF0cls3XSA9IHVwWzJdO1xuICAgIG1hdHJbMl0gPSAtdmlld1swXTtcbiAgICBtYXRyWzVdID0gLXZpZXdbMV07XG4gICAgbWF0cls4XSA9IC12aWV3WzJdO1xuICAgIHJldHVybiBub3JtYWxpemUob3V0LCBmcm9tTWF0MyhvdXQsIG1hdHIpKTtcbiAgfTtcbn0oKTsiLAogICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogMiBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjMlxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjMlxuICpcbiAqIEByZXR1cm5zIHt2ZWMyfSBhIG5ldyAyRCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMik7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWMyIGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7dmVjMn0gYSBuZXcgMkQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDIpO1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzIgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjMn0gYSBuZXcgMkQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMik7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSB2ZWMyIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMiB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCB4LCB5KSB7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIERpdmlkZXMgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpdmlkZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAvIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLyBiWzFdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmNlaWwgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMyXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHZlY3RvciB0byBjZWlsXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNlaWwob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguY2VpbChhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5jZWlsKGFbMV0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmZsb29yIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMlxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB2ZWN0b3IgdG8gZmxvb3JcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZmxvb3Iob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguZmxvb3IoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguZmxvb3IoYVsxXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1pbmltdW0gb2YgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1pbihvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gTWF0aC5taW4oYVswXSwgYlswXSk7XG4gIG91dFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXgob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5yb3VuZCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIHJvdW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLnJvdW5kKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLnJvdW5kKGFbMV0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgYSB2ZWMyIGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWMyJ3MgYWZ0ZXIgc2NhbGluZyB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIHRoZSBhbW91bnQgdG8gc2NhbGUgYiBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZShhLCBiKSB7XG4gIHZhciB4ID0gYlswXSAtIGFbMF0sXG4gICAgICB5ID0gYlsxXSAtIGFbMV07XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHkpO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdLFxuICAgICAgeSA9IGJbMV0gLSBhWzFdO1xuICByZXR1cm4geCAqIHggKyB5ICogeTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjMlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSk7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgdmVjMlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZExlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdO1xuICByZXR1cm4geCAqIHggKyB5ICogeTtcbn1cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBuZWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgaW52ZXJzZSBvZiB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIGludmVydFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnNlKG91dCwgYSkge1xuICBvdXRbMF0gPSAxLjAgLyBhWzBdO1xuICBvdXRbMV0gPSAxLjAgLyBhWzFdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBOb3JtYWxpemUgYSB2ZWMyXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHZlY3RvciB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHk7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICAvL1RPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlP1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IGFbMF0gKiBsZW47XG4gIG91dFsxXSA9IGFbMV0gKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRvdChhLCBiKSB7XG4gIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0d28gdmVjMidzXG4gKiBOb3RlIHRoYXQgdGhlIGNyb3NzIHByb2R1Y3QgbXVzdCBieSBkZWZpbml0aW9uIHByb2R1Y2UgYSAzRCB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcm9zcyhvdXQsIGEsIGIpIHtcbiAgdmFyIHogPSBhWzBdICogYlsxXSAtIGFbMV0gKiBiWzBdO1xuICBvdXRbMF0gPSBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSB6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV07XG4gIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgcmFuZG9tIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBzY2FsZVxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0gW3NjYWxlXSBMZW5ndGggb2YgdGhlIHJlc3VsdGluZyB2ZWN0b3IuIElmIG9tbWl0dGVkLCBhIHVuaXQgdmVjdG9yIHdpbGwgYmUgcmV0dXJuZWRcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCwgc2NhbGUpIHtcbiAgc2NhbGUgPSBzY2FsZSB8fCAxLjA7XG4gIHZhciByID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyLjAgKiBNYXRoLlBJO1xuICBvdXRbMF0gPSBNYXRoLmNvcyhyKSAqIHNjYWxlO1xuICBvdXRbMV0gPSBNYXRoLnNpbihyKSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMyIHdpdGggYSBtYXQyXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0Mn0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWF0MihvdXQsIGEsIG0pIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV07XG4gIG91dFswXSA9IG1bMF0gKiB4ICsgbVsyXSAqIHk7XG4gIG91dFsxXSA9IG1bMV0gKiB4ICsgbVszXSAqIHk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzIgd2l0aCBhIG1hdDJkXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0MmR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDJkKG91dCwgYSwgbSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXTtcbiAgb3V0WzBdID0gbVswXSAqIHggKyBtWzJdICogeSArIG1bNF07XG4gIG91dFsxXSA9IG1bMV0gKiB4ICsgbVszXSAqIHkgKyBtWzVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMyIHdpdGggYSBtYXQzXG4gKiAzcmQgdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcxJ1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDMob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdO1xuICBvdXRbMF0gPSBtWzBdICogeCArIG1bM10gKiB5ICsgbVs2XTtcbiAgb3V0WzFdID0gbVsxXSAqIHggKyBtWzRdICogeSArIG1bN107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzIgd2l0aCBhIG1hdDRcbiAqIDNyZCB2ZWN0b3IgY29tcG9uZW50IGlzIGltcGxpY2l0bHkgJzAnXG4gKiA0dGggdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcxJ1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDQob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICBvdXRbMF0gPSBtWzBdICogeCArIG1bNF0gKiB5ICsgbVsxMl07XG4gIG91dFsxXSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzEzXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlIGEgMkQgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIFRoZSB2ZWMyIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgVGhlIG9yaWdpbiBvZiB0aGUgcm90YXRpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKG91dCwgYSwgYiwgcmFkKSB7XG4gIC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cbiAgdmFyIHAwID0gYVswXSAtIGJbMF0sXG4gICAgICBwMSA9IGFbMV0gLSBiWzFdLFxuICAgICAgc2luQyA9IE1hdGguc2luKHJhZCksXG4gICAgICBjb3NDID0gTWF0aC5jb3MocmFkKTsgLy9wZXJmb3JtIHJvdGF0aW9uIGFuZCB0cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuXG4gIG91dFswXSA9IHAwICogY29zQyAtIHAxICogc2luQyArIGJbMF07XG4gIG91dFsxXSA9IHAwICogc2luQyArIHAxICogY29zQyArIGJbMV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdldCB0aGUgYW5nbGUgYmV0d2VlbiB0d28gMkQgdmVjdG9yc1xuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgVGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBiIFRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gVGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYW5nbGUoYSwgYikge1xuICB2YXIgeDEgPSBhWzBdLFxuICAgICAgeTEgPSBhWzFdLFxuICAgICAgeDIgPSBiWzBdLFxuICAgICAgeTIgPSBiWzFdLFxuICAgICAgLy8gbWFnIGlzIHRoZSBwcm9kdWN0IG9mIHRoZSBtYWduaXR1ZGVzIG9mIGEgYW5kIGJcbiAgbWFnID0gTWF0aC5zcXJ0KHgxICogeDEgKyB5MSAqIHkxKSAqIE1hdGguc3FydCh4MiAqIHgyICsgeTIgKiB5MiksXG4gICAgICAvLyBtYWcgJiYuLiBzaG9ydCBjaXJjdWl0cyBpZiBtYWcgPT0gMFxuICBjb3NpbmUgPSBtYWcgJiYgKHgxICogeDIgKyB5MSAqIHkyKSAvIG1hZzsgLy8gTWF0aC5taW4oTWF0aC5tYXgoY29zaW5lLCAtMSksIDEpIGNsYW1wcyB0aGUgY29zaW5lIGJldHdlZW4gLTEgYW5kIDFcblxuICByZXR1cm4gTWF0aC5hY29zKE1hdGgubWluKE1hdGgubWF4KGNvc2luZSwgLTEpLCAxKSk7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzIgdG8gemVyb1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHplcm8ob3V0KSB7XG4gIG91dFswXSA9IDAuMDtcbiAgb3V0WzFdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwidmVjMihcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgZXhhY3RseSBoYXZlIHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleGFjdEVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV07XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMyLmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIuc3VidHJhY3R9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHN1YiA9IHN1YnRyYWN0O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIuZGl2aWRlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXYgPSBkaXZpZGU7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMi5kaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZGlzdCA9IGRpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIuc3F1YXJlZERpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJEaXN0ID0gc3F1YXJlZERpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyTGVuID0gc3F1YXJlZExlbmd0aDtcbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzJzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzIuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWMycyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGZvckVhY2ggPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB2ZWMgPSBjcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSAyO1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KCk7IiwKICAiaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBjb25zdCByYWQyRGVnID0gKHJhZDogbnVtYmVyKSA9PiAocmFkIC8gTWF0aC5QSSkgKiAxODA7XG5leHBvcnQgY29uc3QgZGVnMlJhZCA9IChkZWc6IG51bWJlcikgPT4gKGRlZyAqIE1hdGguUEkpIC8gMTgwO1xuXG5leHBvcnQgY29uc3QgZ2V0RXVsZXIgPSAodmVjdG9yMzogZ2xtLlJlYWRvbmx5VmVjMyk6IFtudW1iZXIsIG51bWJlcl0gPT4ge1xuICBjb25zdCB0aGV0YSA9IE1hdGguYXRhbjIodmVjdG9yM1sxXSwgdmVjdG9yM1swXSk7XG4gIGNvbnN0IG1hZ25pdHVkZSA9IGdsbS52ZWMyLmxlbmd0aChbdmVjdG9yM1swXSwgdmVjdG9yM1sxXV0pO1xuICBjb25zdCBwaGkgPSBNYXRoLmF0YW4yKHZlY3RvcjNbMl0sIG1hZ25pdHVkZSk7XG4gIHJldHVybiBbdGhldGEsIHBoaV07XG59O1xuIiwKICAiaW1wb3J0IHtcbiAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLFxuICBHbG9iYWxNb3VzZU1hbmFnZXIsXG4gIEdsb2JhbFRvdWNoTWFuYWdlclxufSBmcm9tICcuLi9icm93c2VyJztcblxuaW1wb3J0IHsgZGVnMlJhZCB9IGZyb20gJy4uL21hdGgvYW5nbGVzJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmNvbnN0IEFsbEF4aXNlcyA9IHtcbiAgWDogMCxcbiAgWTogMSxcbiAgWjogMlxufTtcbnR5cGUgQXhpc1R5cGUgPSBrZXlvZiB0eXBlb2YgQWxsQXhpc2VzO1xudHlwZSBDb29yZGluYXRlcyA9IFtBeGlzVHlwZSwgQXhpc1R5cGUsIEF4aXNUeXBlXTtcblxuaW50ZXJmYWNlIElGcmVlRmx5Q29udHJvbGxlckRlZiB7XG4gIHBvc2l0aW9uOiBnbG0udmVjMztcbiAgY29vcmRpbmF0ZXM/OiBDb29yZGluYXRlcztcbiAgdGhldGE6IG51bWJlcjtcbiAgcGhpOiBudW1iZXI7XG4gIG1vdXNlU2Vuc2liaWxpdHk6IG51bWJlcjtcbiAga2V5Ym9hcmRTZW5zaWJpbGl0eTogbnVtYmVyO1xuICB0b3VjaFNlbnNpYmlsaXR5OiBudW1iZXI7XG4gIG1vdmluZ1NwZWVkOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBGcmVlRmx5Q29udHJvbGxlciB7XG4gIHByaXZhdGUgX2lzQWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX3RoZXRhOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9waGk6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBfbW91c2VTZW5zaWJpbGl0eTogbnVtYmVyO1xuICBwcml2YXRlIF9rZXlib2FyZFNlbnNpYmlsaXR5OiBudW1iZXI7XG4gIHByaXZhdGUgX3RvdWNoU2Vuc2liaWxpdHk6IG51bWJlcjtcbiAgcHJpdmF0ZSBfbW92aW5nU3BlZWQ6IG51bWJlcjtcblxuICBwcml2YXRlIF90b3VjaFdhc0FjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF90b3VjaFN0YXJ0VGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfdG91Y2hNb3ZlRm9yd2FyZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX2F4aXNJbmRpY2VzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG5cbiAgcHJpdmF0ZSBfcG9zaXRpb24gPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICBwcml2YXRlIF90YXJnZXQgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICBwcml2YXRlIF9mb3J3YXJkQXhpcyA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoMSwgMCwgMCk7XG4gIHByaXZhdGUgX2xlZnRBeGlzID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygwLCAwLCAxKTtcbiAgcHJpdmF0ZSBfdXBBeGlzID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygwLCAxLCAwKTtcblxuICBwcml2YXRlIF9tb3ZlX2ZvcndhcmRBeGlzID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygxLCAwLCAwKTtcbiAgcHJpdmF0ZSBfbW92ZV9sZWZ0QXhpcyA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoMCwgMCwgMSk7XG4gIHByaXZhdGUgX21vdmVfdXBBeGlzID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygwLCAxLCAwKTtcblxuICBjb25zdHJ1Y3RvcihkZWY6IElGcmVlRmx5Q29udHJvbGxlckRlZikge1xuICAgIHRoaXMuX21vdXNlU2Vuc2liaWxpdHkgPSBkZWYubW91c2VTZW5zaWJpbGl0eTtcbiAgICB0aGlzLl9rZXlib2FyZFNlbnNpYmlsaXR5ID0gZGVmLmtleWJvYXJkU2Vuc2liaWxpdHk7XG4gICAgdGhpcy5fdG91Y2hTZW5zaWJpbGl0eSA9IGRlZi50b3VjaFNlbnNpYmlsaXR5O1xuICAgIHRoaXMuX21vdmluZ1NwZWVkID0gZGVmLm1vdmluZ1NwZWVkO1xuICAgIGdsbS52ZWMzLmNvcHkodGhpcy5fcG9zaXRpb24sIGRlZi5wb3NpdGlvbik7XG5cbiAgICB0aGlzLl9heGlzSW5kaWNlcyA9IFtcbiAgICAgIGRlZi5jb29yZGluYXRlcyA/IEFsbEF4aXNlc1tkZWYuY29vcmRpbmF0ZXNbMF1dIDogQWxsQXhpc2VzLlgsXG4gICAgICBkZWYuY29vcmRpbmF0ZXMgPyBBbGxBeGlzZXNbZGVmLmNvb3JkaW5hdGVzWzFdXSA6IEFsbEF4aXNlcy5ZLFxuICAgICAgZGVmLmNvb3JkaW5hdGVzID8gQWxsQXhpc2VzW2RlZi5jb29yZGluYXRlc1syXV0gOiBBbGxBeGlzZXMuWlxuICAgIF07XG5cbiAgICB0aGlzLl90aGV0YSA9IGRlZi50aGV0YTtcbiAgICB0aGlzLl9waGkgPSBkZWYucGhpO1xuICB9XG5cbiAgaXNBY3RpdmF0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzQWN0aXZhdGVkO1xuICB9XG5cbiAgYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5faXNBY3RpdmF0ZWQgPSB0cnVlO1xuXG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdaJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdXJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdTJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdBJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdRJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdEJyk7XG5cbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIucHJldmVudERlZmF1bHQoJ1NoaWZ0Jyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdDJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdTcGFjZScpO1xuXG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdBcnJvd1VwJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdBcnJvd0Rvd24nKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIucHJldmVudERlZmF1bHQoJ0Fycm93TGVmdCcpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5wcmV2ZW50RGVmYXVsdCgnQXJyb3dSaWdodCcpO1xuICB9XG5cbiAgZGVhY3RpdmF0ZSgpIHtcbiAgICB0aGlzLl9pc0FjdGl2YXRlZCA9IGZhbHNlO1xuXG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmVuYWJsZURlZmF1bHQoJ1onKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnVycpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5lbmFibGVEZWZhdWx0KCdTJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmVuYWJsZURlZmF1bHQoJ0EnKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnUScpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5lbmFibGVEZWZhdWx0KCdEJyk7XG5cbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnU2hpZnQnKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnQycpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5lbmFibGVEZWZhdWx0KCdTcGFjZScpO1xuXG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmVuYWJsZURlZmF1bHQoJ0Fycm93VXAnKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnQXJyb3dEb3duJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmVuYWJsZURlZmF1bHQoJ0Fycm93TGVmdCcpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5lbmFibGVEZWZhdWx0KCdBcnJvd1JpZ2h0Jyk7XG4gIH1cblxuICBpc0ludGVyYWN0ZWRXaXRoKCkge1xuICAgIHJldHVybiAoXG4gICAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdaJywgJ1cnLCAnUycsICdBJywgJ1EnLCAnRCcpIHx8XG4gICAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdTaGlmdCcsICdDJywgJ1NwYWNlJykgfHxcbiAgICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoXG4gICAgICAgICdBcnJvd1VwJyxcbiAgICAgICAgJ0Fycm93RG93bicsXG4gICAgICAgICdBcnJvd0xlZnQnLFxuICAgICAgICAnQXJyb3dSaWdodCdcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgdXBkYXRlKGRlbHRhTXNUaW1lOiBudW1iZXIsIGZwc0NvbnRyb2xzOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBsZXQgbW92ZUZvcndhcmQgPSBmYWxzZTtcbiAgICBsZXQgbW92ZUJhY2t3YXJkID0gZmFsc2U7XG4gICAgbGV0IHN0cmFmZUxlZnQgPSBmYWxzZTtcbiAgICBsZXQgc3RyYWZlUmlnaHQgPSBmYWxzZTtcbiAgICBsZXQgaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgbGV0IGlzRGl2aW5nID0gZmFsc2U7XG4gICAgbGV0IGlzUmlzaW5nID0gZmFsc2U7XG4gICAgbGV0IGxvb2tEZWx0YVggPSAwO1xuICAgIGxldCBsb29rRGVsdGFZID0gMDtcblxuICAgIC8vXG4gICAgLy8gbW91c2VcbiAgICAvL1xuXG4gICAge1xuICAgICAgY29uc3QgZGVsdGFYID0gR2xvYmFsTW91c2VNYW5hZ2VyLmRlbHRhWCgpICogdGhpcy5fbW91c2VTZW5zaWJpbGl0eTtcbiAgICAgIGNvbnN0IGRlbHRhWSA9IEdsb2JhbE1vdXNlTWFuYWdlci5kZWx0YVkoKSAqIHRoaXMuX21vdXNlU2Vuc2liaWxpdHk7XG5cbiAgICAgIGxvb2tEZWx0YVggLT0gZGVnMlJhZChkZWx0YVgpICogZGVsdGFNc1RpbWU7XG4gICAgICBsb29rRGVsdGFZIC09IGRlZzJSYWQoZGVsdGFZKSAqIGRlbHRhTXNUaW1lO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gbW91c2VcbiAgICAvL1xuXG4gICAgLy9cbiAgICAvLyB0b3VjaFxuICAgIC8vXG5cbiAgICBjb25zdCBpc1RvdWNoZWQgPSBHbG9iYWxUb3VjaE1hbmFnZXIuZ2V0VG91Y2hEYXRhKCkubGVuZ3RoID4gMDtcblxuICAgIGlmIChpc1RvdWNoZWQpIHtcbiAgICAgIGlmICghdGhpcy5fdG91Y2hXYXNBY3RpdmUpIHtcbiAgICAgICAgY29uc3QgY3VyclRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBlbGFwc2VkID0gKGN1cnJUaW1lIC0gdGhpcy5fdG91Y2hTdGFydFRpbWUpIC8gMTAwMDtcbiAgICAgICAgaWYgKGVsYXBzZWQgPCAwLjI1KSB7XG4gICAgICAgICAgdGhpcy5fdG91Y2hNb3ZlRm9yd2FyZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fdG91Y2hTdGFydFRpbWUgPSBjdXJyVGltZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBmaXJzdFRvdWNoID0gR2xvYmFsVG91Y2hNYW5hZ2VyLmdldFRvdWNoRGF0YSgpWzBdO1xuXG4gICAgICBjb25zdCBkZWx0YVggPSBmaXJzdFRvdWNoLmRlbHRhWCAqIHRoaXMuX3RvdWNoU2Vuc2liaWxpdHk7XG4gICAgICBjb25zdCBkZWx0YVkgPSBmaXJzdFRvdWNoLmRlbHRhWSAqIHRoaXMuX3RvdWNoU2Vuc2liaWxpdHk7XG5cbiAgICAgIGxvb2tEZWx0YVggLT0gZGVnMlJhZChkZWx0YVgpICogZGVsdGFNc1RpbWU7XG4gICAgICBsb29rRGVsdGFZIC09IGRlZzJSYWQoZGVsdGFZKSAqIGRlbHRhTXNUaW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl90b3VjaE1vdmVGb3J3YXJkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5fdG91Y2hXYXNBY3RpdmUgPSBpc1RvdWNoZWQ7XG5cbiAgICBpZiAodGhpcy5fdG91Y2hNb3ZlRm9yd2FyZCkge1xuICAgICAgbW92ZUZvcndhcmQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gdG91Y2hcbiAgICAvL1xuXG4gICAgLy9cbiAgICAvLyBrZXlib2FyZFxuICAgIC8vXG5cbiAgICAvLyBmb3J3YXJkXG4gICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ1onLCAnVycpKSB7XG4gICAgICBtb3ZlRm9yd2FyZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmRcbiAgICBpZiAoR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnUycpKSB7XG4gICAgICBtb3ZlQmFja3dhcmQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIHN0cmFmZSBsZWZ0XG4gICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0EnLCAnUScpKSB7XG4gICAgICBzdHJhZmVMZWZ0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBzdHJhZmUgcmlnaHRcbiAgICBpZiAoR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnRCcpKSB7XG4gICAgICBzdHJhZmVSaWdodCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gcnVuXG4gICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ1NoaWZ0JykpIHtcbiAgICAgIGlzUnVubmluZyA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFmcHNDb250cm9scykge1xuICAgICAgLy8gZGl2ZVxuICAgICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0MnKSkge1xuICAgICAgICBpc0RpdmluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHJpc2VcbiAgICAgIGlmIChHbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdTcGFjZScpKSB7XG4gICAgICAgIGlzUmlzaW5nID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50TGluZWFyU3BlZWQgPVxuICAgICAgdGhpcy5fbW92aW5nU3BlZWQgKiAoaXNSdW5uaW5nID8gNCA6IDEpICogZGVsdGFNc1RpbWU7XG5cbiAgICAvL1xuICAgIC8vXG5cbiAgICBjb25zdCBjdXJyZW50QW5ndWxhclNwZWVkID0gdGhpcy5fa2V5Ym9hcmRTZW5zaWJpbGl0eSAqIGRlbHRhTXNUaW1lO1xuXG4gICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0Fycm93VXAnKSkge1xuICAgICAgbG9va0RlbHRhWSArPSBjdXJyZW50QW5ndWxhclNwZWVkO1xuICAgIH0gZWxzZSBpZiAoR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnQXJyb3dEb3duJykpIHtcbiAgICAgIGxvb2tEZWx0YVkgLT0gY3VycmVudEFuZ3VsYXJTcGVlZDtcbiAgICB9XG5cbiAgICBpZiAoR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnQXJyb3dMZWZ0JykpIHtcbiAgICAgIGxvb2tEZWx0YVggKz0gY3VycmVudEFuZ3VsYXJTcGVlZDtcbiAgICB9IGVsc2UgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0Fycm93UmlnaHQnKSkge1xuICAgICAgbG9va0RlbHRhWCAtPSBjdXJyZW50QW5ndWxhclNwZWVkO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8ga2V5Ym9hcmRcbiAgICAvL1xuXG4gICAgLy9cbiAgICAvLyBpbnRlcm5hbHNcbiAgICAvL1xuXG4gICAgdGhpcy5fdGhldGEgKz0gbG9va0RlbHRhWDtcbiAgICB0aGlzLl9waGkgKz0gbG9va0RlbHRhWTtcblxuICAgIGNvbnN0IGhQaSA9IE1hdGguUEkgKiAwLjU7XG4gICAgY29uc3QgdmVydGljYWxMaW1pdCA9IGhQaSAqIDAuOTU7XG5cbiAgICB0aGlzLl9waGkgPSBNYXRoLm1pbihNYXRoLm1heCh0aGlzLl9waGksIC12ZXJ0aWNhbExpbWl0KSwgK3ZlcnRpY2FsTGltaXQpO1xuXG4gICAgY29uc3QgY29zVGhldGEgPSBNYXRoLmNvcyh0aGlzLl90aGV0YSk7XG4gICAgY29uc3Qgc2luVGhldGEgPSBNYXRoLnNpbih0aGlzLl90aGV0YSk7XG5cbiAgICBjb25zdCBbYXhpc1gsIGF4aXNZLCBheGlzWl0gPSB0aGlzLl9heGlzSW5kaWNlcztcblxuICAgIGNvbnN0IHVwUmFkaXVzID0gTWF0aC5jb3ModGhpcy5fcGhpICsgaFBpKTtcbiAgICB0aGlzLl91cEF4aXNbYXhpc1hdID0gdXBSYWRpdXMgKiBjb3NUaGV0YTtcbiAgICB0aGlzLl91cEF4aXNbYXhpc1ldID0gdXBSYWRpdXMgKiBzaW5UaGV0YTtcbiAgICB0aGlzLl91cEF4aXNbYXhpc1pdID0gTWF0aC5zaW4odGhpcy5fcGhpICsgaFBpKTtcblxuICAgIGNvbnN0IGZvcndhcmRSYWRpdXMgPSBNYXRoLmNvcyh0aGlzLl9waGkpO1xuICAgIHRoaXMuX2ZvcndhcmRBeGlzW2F4aXNYXSA9IGZvcndhcmRSYWRpdXMgKiBjb3NUaGV0YTtcbiAgICB0aGlzLl9mb3J3YXJkQXhpc1theGlzWV0gPSBmb3J3YXJkUmFkaXVzICogc2luVGhldGE7XG4gICAgdGhpcy5fZm9yd2FyZEF4aXNbYXhpc1pdID0gTWF0aC5zaW4odGhpcy5fcGhpKTtcblxuICAgIGdsbS52ZWMzLmNyb3NzKHRoaXMuX2xlZnRBeGlzLCB0aGlzLl91cEF4aXMsIHRoaXMuX2ZvcndhcmRBeGlzKTtcblxuICAgIGlmIChmcHNDb250cm9scykge1xuICAgICAgdGhpcy5fbW92ZV9mb3J3YXJkQXhpc1theGlzWF0gPSBjb3NUaGV0YTtcbiAgICAgIHRoaXMuX21vdmVfZm9yd2FyZEF4aXNbYXhpc1ldID0gc2luVGhldGE7XG4gICAgICB0aGlzLl9tb3ZlX2ZvcndhcmRBeGlzW2F4aXNaXSA9IDA7XG5cbiAgICAgIHRoaXMuX21vdmVfbGVmdEF4aXNbYXhpc1hdID0gLXNpblRoZXRhO1xuICAgICAgdGhpcy5fbW92ZV9sZWZ0QXhpc1theGlzWV0gPSBjb3NUaGV0YTtcbiAgICAgIHRoaXMuX21vdmVfbGVmdEF4aXNbYXhpc1pdID0gMDtcblxuICAgICAgdGhpcy5fbW92ZV91cEF4aXNbYXhpc1hdID0gMDtcbiAgICAgIHRoaXMuX21vdmVfdXBBeGlzW2F4aXNZXSA9IDA7XG4gICAgICB0aGlzLl9tb3ZlX3VwQXhpc1theGlzWl0gPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBnbG0udmVjMy5jb3B5KHRoaXMuX21vdmVfZm9yd2FyZEF4aXMsIHRoaXMuX2ZvcndhcmRBeGlzKTtcbiAgICAgIGdsbS52ZWMzLmNvcHkodGhpcy5fbW92ZV9sZWZ0QXhpcywgdGhpcy5fbGVmdEF4aXMpO1xuICAgICAgZ2xtLnZlYzMuY29weSh0aGlzLl9tb3ZlX3VwQXhpcywgdGhpcy5fdXBBeGlzKTtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cblxuICAgIGNvbnN0IHNjYWxlZEZvcndhcmQgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICAgIGdsbS52ZWMzLnNjYWxlKHNjYWxlZEZvcndhcmQsIHRoaXMuX21vdmVfZm9yd2FyZEF4aXMsIGN1cnJlbnRMaW5lYXJTcGVlZCk7XG4gICAgY29uc3Qgc2NhbGVkTGVmdCA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoMCwgMCwgMCk7XG4gICAgZ2xtLnZlYzMuc2NhbGUoc2NhbGVkTGVmdCwgdGhpcy5fbW92ZV9sZWZ0QXhpcywgY3VycmVudExpbmVhclNwZWVkKTtcbiAgICBjb25zdCBzY2FsZWRVcCA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoMCwgMCwgMCk7XG4gICAgZ2xtLnZlYzMuc2NhbGUoc2NhbGVkVXAsIHRoaXMuX21vdmVfdXBBeGlzLCBjdXJyZW50TGluZWFyU3BlZWQpO1xuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG5cbiAgICBpZiAobW92ZUZvcndhcmQpIHtcbiAgICAgIGdsbS52ZWMzLmFkZCh0aGlzLl9wb3NpdGlvbiwgdGhpcy5fcG9zaXRpb24sIHNjYWxlZEZvcndhcmQpO1xuICAgIH0gZWxzZSBpZiAobW92ZUJhY2t3YXJkKSB7XG4gICAgICBnbG0udmVjMy5zdWIodGhpcy5fcG9zaXRpb24sIHRoaXMuX3Bvc2l0aW9uLCBzY2FsZWRGb3J3YXJkKTtcbiAgICB9XG5cbiAgICBpZiAoc3RyYWZlTGVmdCkge1xuICAgICAgZ2xtLnZlYzMuYWRkKHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9wb3NpdGlvbiwgc2NhbGVkTGVmdCk7XG4gICAgfSBlbHNlIGlmIChzdHJhZmVSaWdodCkge1xuICAgICAgZ2xtLnZlYzMuc3ViKHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9wb3NpdGlvbiwgc2NhbGVkTGVmdCk7XG4gICAgfVxuXG4gICAgaWYgKGlzUmlzaW5nKSB7XG4gICAgICBnbG0udmVjMy5hZGQodGhpcy5fcG9zaXRpb24sIHRoaXMuX3Bvc2l0aW9uLCBzY2FsZWRVcCk7XG4gICAgfSBlbHNlIGlmIChpc0RpdmluZykge1xuICAgICAgZ2xtLnZlYzMuc3ViKHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9wb3NpdGlvbiwgc2NhbGVkVXApO1xuICAgIH1cblxuICAgIGdsbS52ZWMzLmFkZCh0aGlzLl90YXJnZXQsIHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9mb3J3YXJkQXhpcyk7XG5cbiAgICAvL1xuICAgIC8vIGludGVybmFsc1xuICAgIC8vXG4gIH1cblxuICBnZXRQb3NpdGlvbigpOiBnbG0uUmVhZG9ubHlWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XG4gIH1cblxuICBzZXRQb3NpdGlvbihpblBvczogZ2xtLlJlYWRvbmx5VmVjMykge1xuICAgIGdsbS52ZWMzLmNvcHkodGhpcy5fcG9zaXRpb24sIGluUG9zKTtcbiAgICBnbG0udmVjMy5hZGQodGhpcy5fdGFyZ2V0LCB0aGlzLl9wb3NpdGlvbiwgdGhpcy5fZm9yd2FyZEF4aXMpO1xuICB9XG5cbiAgZ2V0VGFyZ2V0KCk6IGdsbS5SZWFkb25seVZlYzMge1xuICAgIHJldHVybiB0aGlzLl90YXJnZXQ7XG4gIH1cblxuICBnZXRVcEF4aXMoKTogZ2xtLlJlYWRvbmx5VmVjMyB7XG4gICAgcmV0dXJuIHRoaXMuX3VwQXhpcztcbiAgfVxuXG4gIGdldFRoZXRhKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3RoZXRhO1xuICB9XG5cbiAgZ2V0UGhpKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3BoaTtcbiAgfVxuXG4gIGdldFRvdWNoTW92ZUZvcndhcmQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3RvdWNoTW92ZUZvcndhcmQ7XG4gIH1cbn1cbiIsCiAgImV4cG9ydCBjb25zdCBjbGFtcCA9IChjdXJyVmFsOiBudW1iZXIsIG1pblZhbDogbnVtYmVyLCBtYXhWYWw6IG51bWJlcikgPT5cbiAgTWF0aC5taW4oTWF0aC5tYXgoY3VyclZhbCwgbWluVmFsKSwgbWF4VmFsKTtcbiIsCiAgImltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgY29uc3QgaW50ZXJzZWN0U2VnbWVudCA9IChcbiAgQTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgQjogZ2xtLlJlYWRvbmx5VmVjMixcbiAgSTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgUDogZ2xtLlJlYWRvbmx5VmVjMlxuKTogbnVtYmVyID0+IHtcbiAgY29uc3QgRCA9IGdsbS52ZWMyLmZyb21WYWx1ZXMoMCwgMCk7XG4gIGNvbnN0IEUgPSBnbG0udmVjMi5mcm9tVmFsdWVzKDAsIDApO1xuICBEWzBdID0gQlswXSAtIEFbMF07XG4gIERbMV0gPSBCWzFdIC0gQVsxXTtcbiAgRVswXSA9IFBbMF0gLSBJWzBdO1xuICBFWzFdID0gUFsxXSAtIElbMV07XG4gIGNvbnN0IGRlbm9tID0gRFswXSAqIEVbMV0gLSBEWzFdICogRVswXTtcbiAgaWYgKGRlbm9tID09IDApIHtcbiAgICByZXR1cm4gLTE7IC8vIGVycmV1ciwgY2FzIGxpbWl0ZVxuICB9XG4gIGNvbnN0IHQgPSAtKEFbMF0gKiBFWzFdIC0gSVswXSAqIEVbMV0gLSBFWzBdICogQVsxXSArIEVbMF0gKiBJWzFdKSAvIGRlbm9tO1xuICBpZiAodCA8IDAgfHwgdCA+PSAxKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgY29uc3QgdSA9IC0oLURbMF0gKiBBWzFdICsgRFswXSAqIElbMV0gKyBEWzFdICogQVswXSAtIERbMV0gKiBJWzBdKSAvIGRlbm9tO1xuICBpZiAodSA8IDAgfHwgdSA+PSAxKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIDE7XG59O1xuXG5leHBvcnQgY29uc3QgY29sbGlzaW9uTGluZXNTdHJpcCA9IChcbiAgdGFiOiBSZWFkb25seUFycmF5PGdsbS5SZWFkb25seVZlYzI+LFxuICBQOiBnbG0udmVjMlxuKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IEkgPSBnbG0udmVjMi5mcm9tVmFsdWVzKDAsIDApO1xuICBJWzBdID0gMTAwMDAgKyBNYXRoLnJhbmRvbSgpICogMTAwOyAvLyAxMDAwMCArIHVuIG5vbWJyZSBhbMOpYXRvaXJlIGVudHJlIDAgZXQgOTlcbiAgSVsxXSA9IDEwMDAwICsgTWF0aC5yYW5kb20oKSAqIDEwMDtcbiAgbGV0IG5iSW50ZXJzZWN0aW9ucyA9IDA7XG4gIGZvciAobGV0IGlpID0gMDsgaWkgPCB0YWIubGVuZ3RoOyArK2lpKSB7XG4gICAgbGV0IGpqID0gKGlpICsgMSkgJSB0YWIubGVuZ3RoO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gaW50ZXJzZWN0U2VnbWVudCh0YWJbaWldLCB0YWJbampdLCBJLCBQKTtcbiAgICBpZiAocmVzdWx0ID09IC0xKSB7XG4gICAgICByZXR1cm4gY29sbGlzaW9uTGluZXNTdHJpcCh0YWIsIFApOyAvLyBjYXMgbGltaXRlLCBvbiByZWxhbmNlIGxhIGZvbmN0aW9uLlxuICAgIH1cbiAgICBuYkludGVyc2VjdGlvbnMgKz0gcmVzdWx0O1xuICB9XG4gIGlmIChuYkludGVyc2VjdGlvbnMgJSAyID09IDEpIHtcbiAgICAvLyBuYkludGVyc2VjdGlvbnMgZXN0LWlsIGltcGFpciA/XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcbiIsCiAgImV4cG9ydCBjb25zdCBlYXNlQ2xhbXAgPSAodDogbnVtYmVyKSA9PiB7XG4gIGlmICh0ID4gMSkge1xuICAgIHJldHVybiB0IC0gTWF0aC5mbG9vcih0KTtcbiAgfVxuICByZXR1cm4gdDtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlUGluUG9uZyA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICB0ICo9IDIuMDtcbiAgaWYgKHQgPCAxLjApIHJldHVybiB0O1xuICB0IC09IDEuMDtcbiAgcmV0dXJuIDEuMCAtIHQ7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluU2luZSA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gTWF0aC5zaW4oMS41NzA3OTYzICogdCk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZU91dFNpbmUgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIDEuMCArIE1hdGguc2luKDEuNTcwNzk2MyAqICh0IC0gMS4wKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluT3V0U2luZSA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gMC41ICogKDEuMCArIE1hdGguc2luKDMuMTQxNTkyNiAqICh0IC0gMC41KSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJblF1YWQgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIHQgKiB0O1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VPdXRRdWFkID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIHJldHVybiB0ICogKDIuMCAtIHQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dFF1YWQgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIHQgPCAwLjUgPyAyLjAgKiB0ICogdCA6IHQgKiAoNC4wIC0gMi4wICogdCkgLSAxLjA7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluQ3ViaWMgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIHQgKiB0ICogdDtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlT3V0Q3ViaWMgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdDIgPSB0IC0gMTtcbiAgcmV0dXJuIDEuMCArIHQyICogdDIgKiB0Mjtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5PdXRDdWJpYyA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCB0MiA9IHQgLSAxLjA7XG4gIGNvbnN0IHQzID0gdDIgLSAxLjA7XG4gIHJldHVybiB0IDwgMC41ID8gNC4wICogdCAqIHQgKiB0IDogMS4wICsgdDIgKiAoMi4wICogdDMpICogKDIuMCAqIHQzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5RdWFydCA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICB0ICo9IHQ7XG4gIHJldHVybiB0ICogdDtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlT3V0UXVhcnQgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdDIgPSB0IC0gMS4wO1xuICB0ID0gdDIgKiB0MjtcbiAgcmV0dXJuIDEuMCAtIHQgKiB0O1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dFF1YXJ0ID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGlmICh0IDwgMC41KSB7XG4gICAgdCAqPSB0O1xuICAgIHJldHVybiA4LjAgKiB0ICogdDtcbiAgfVxuICBjb25zdCB0MiA9IHQgLSAxO1xuICB0ID0gdDIgKiB0MjtcbiAgcmV0dXJuIDEuMCAtIDguMCAqIHQgKiB0O1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJblF1aW50ID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHQyID0gdCAqIHQ7XG4gIHJldHVybiB0ICogdDIgKiB0Mjtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlT3V0UXVpbnQgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdHggPSB0IC0gMTtcbiAgY29uc3QgdDIgPSB0eCAqIHR4O1xuICByZXR1cm4gMS4wICsgdHggKiB0MiAqIHQyO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dFF1aW50ID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGxldCB0MjtcbiAgaWYgKHQgPCAwLjUpIHtcbiAgICB0MiA9IHQgKiB0O1xuICAgIHJldHVybiAxNi4wICogdCAqIHQyICogdDI7XG4gIH1cblxuICBjb25zdCB0eCA9IHQgLSAxLjA7XG4gIHQyID0gdHggKiB0eDtcbiAgcmV0dXJuIDEuMCArIDE2LjAgKiB0eCAqIHQyICogdDI7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluRXhwbyA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gKE1hdGgucG93KDIuMCwgOC4wICogdCkgLSAxKSAvIDI1NS4wO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VPdXRFeHBvID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIHJldHVybiAxLjAgLSBNYXRoLnBvdygyLjAsIC04LjAgKiB0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5PdXRFeHBvID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGlmICh0IDwgMC41KSByZXR1cm4gKE1hdGgucG93KDIuMCwgMTYuMCAqIHQpIC0gMSkgLyA1MTAuMDtcbiAgcmV0dXJuIDEuMCAtIDAuNSAqIE1hdGgucG93KDIuMCwgLTE2LjAgKiAodCAtIDAuNSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbkNpcmMgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIDEuMCAtIE1hdGguc3FydCgxLjAgLSB0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlT3V0Q2lyYyA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gTWF0aC5zcXJ0KHQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dENpcmMgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgaWYgKHQgPCAwLjUpIHJldHVybiAoMS4wIC0gTWF0aC5zcXJ0KDEuMCAtIDIuMCAqIHQpKSAqIDAuNTtcbiAgcmV0dXJuICgxLjAgKyBNYXRoLnNxcnQoMi4wICogdCAtIDEuMCkpICogMC41O1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbkJhY2sgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIHQgKiB0ICogKDIuNzAxNTggKiB0IC0gMS43MDE1OCk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZU91dEJhY2sgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdHggPSB0IC0gMTtcbiAgcmV0dXJuIDEuMCArIHR4ICogdHggKiAoMi43MDE1OCAqIHR4ICsgMS43MDE1OCk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluT3V0QmFjayA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBpZiAodCA8IDAuNSkgcmV0dXJuIHQgKiB0ICogKDcuMCAqIHQgLSAyLjUpICogMi4wO1xuICBjb25zdCB0eCA9IHQgLSAxLjA7XG4gIHJldHVybiAxLjAgKyB0eCAqIHR4ICogMi4wICogKDcuMCAqIHR4ICsgMi41KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5FbGFzdGljID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHQyID0gdCAqIHQ7XG4gIHJldHVybiB0MiAqIHQyICogTWF0aC5zaW4odCAqIE1hdGguUEkgKiA0LjUpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VPdXRFbGFzdGljID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHQyID0gKHQgLSAxLjApICogKHQgLSAxLjApO1xuICByZXR1cm4gMS4wIC0gdDIgKiB0MiAqIE1hdGguY29zKHQgKiBNYXRoLlBJICogNC41KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5PdXRFbGFzdGljID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGxldCB0MjtcbiAgaWYgKHQgPCAwLjQ1KSB7XG4gICAgdDIgPSB0ICogdDtcbiAgICByZXR1cm4gOC4wICogdDIgKiB0MiAqIE1hdGguc2luKHQgKiBNYXRoLlBJICogOS4wKTtcbiAgfVxuICBpZiAodCA8IDAuNTUpIHJldHVybiAwLjUgKyAwLjc1ICogTWF0aC5zaW4odCAqIE1hdGguUEkgKiA0LjApO1xuXG4gIHQyID0gKHQgLSAxLjApICogKHQgLSAxLjApO1xuICByZXR1cm4gMS4wIC0gOC4wICogdDIgKiB0MiAqIE1hdGguc2luKHQgKiBNYXRoLlBJICogOS4wKTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5Cb3VuY2UgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIE1hdGgucG93KDIuMCwgNi4wICogKHQgLSAxLjApKSAqIE1hdGguYWJzKE1hdGguc2luKHQgKiBNYXRoLlBJICogMy41KSk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZU91dEJvdW5jZSA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gMS4wIC0gTWF0aC5wb3coMi4wLCAtNi4wICogdCkgKiBNYXRoLmFicyhNYXRoLmNvcyh0ICogTWF0aC5QSSAqIDMuNSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dEJvdW5jZSA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBpZiAodCA8IDAuNSlcbiAgICByZXR1cm4gKFxuICAgICAgOC4wICpcbiAgICAgIE1hdGgucG93KDIuMCwgOC4wICogKHQgLSAxLjApKSAqXG4gICAgICBNYXRoLmFicyhNYXRoLnNpbih0ICogTWF0aC5QSSAqIDcuMCkpXG4gICAgKTtcbiAgcmV0dXJuIChcbiAgICAxLjAgLSA4LjAgKiBNYXRoLnBvdygyLjAsIC04LjAgKiB0KSAqIE1hdGguYWJzKE1hdGguc2luKHQgKiBNYXRoLlBJICogNy4wKSlcbiAgKTtcbn07XG4iLAogICJleHBvcnQgY29uc3QgbGVycCA9IChyYXRpbzogbnVtYmVyLCBtaW5WYWw6IG51bWJlciwgbWF4VmFsOiBudW1iZXIpOiBudW1iZXIgPT5cbiAgbWluVmFsICsgKG1heFZhbCAtIG1pblZhbCkgKiByYXRpbztcbiIsCiAgImltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgY29uc3QgcG9sYXIyQ2FydGVzaWFuID0gKFxuICBsYXQ6IG51bWJlcixcbiAgbG5nOiBudW1iZXIsXG4gIHJlbEFsdGl0dWRlID0gMCxcbiAgZ2xvYlJhZGl1cyA9IDEwMFxuKTogZ2xtLnZlYzMgPT4ge1xuICBjb25zdCBwaGkgPSAoKDkwIC0gbGF0KSAqIE1hdGguUEkpIC8gMTgwO1xuICBjb25zdCB0aGV0YSA9ICgoOTAgLSBsbmcpICogTWF0aC5QSSkgLyAxODA7XG4gIGNvbnN0IHIgPSBnbG9iUmFkaXVzICogKDEgKyByZWxBbHRpdHVkZSk7XG4gIHJldHVybiBbXG4gICAgciAqIE1hdGguc2luKHBoaSkgKiBNYXRoLmNvcyh0aGV0YSksXG4gICAgciAqIE1hdGguY29zKHBoaSksXG4gICAgciAqIE1hdGguc2luKHBoaSkgKiBNYXRoLnNpbih0aGV0YSlcbiAgXTtcbn07XG5cbmV4cG9ydCBjb25zdCBjYXJ0ZXNpYW4yUG9sYXIgPSAoXG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICB6OiBudW1iZXIsXG4gIGdsb2JSYWRpdXMgPSAxMDBcbik6IHtcbiAgbGF0OiBudW1iZXI7XG4gIGxuZzogbnVtYmVyO1xuICBhbHRpdHVkZTogbnVtYmVyO1xufSA9PiB7XG4gIGNvbnN0IHIgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcbiAgY29uc3QgcGhpID0gTWF0aC5hY29zKHkgLyByKTtcbiAgY29uc3QgdGhldGEgPSBNYXRoLmF0YW4yKHosIHgpO1xuXG4gIHJldHVybiB7XG4gICAgbGF0OiA5MCAtIChwaGkgKiAxODApIC8gTWF0aC5QSSxcbiAgICBsbmc6IDkwIC0gKHRoZXRhICogMTgwKSAvIE1hdGguUEkgLSAodGhldGEgPCAtTWF0aC5QSSAvIDIgPyAzNjAgOiAwKSwgLy8ga2VlcCB3aXRoaW4gWy0xODAsIDE4MF0gYm91bmRhcmllc1xuICAgIGFsdGl0dWRlOiByIC8gZ2xvYlJhZGl1cyAtIDFcbiAgfTtcbn07XG4iLAogICJpbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuLy8gSW50ZXJzZWN0cyByYXkgciA9IHAgKyB0ZCwgfGR8ID0gMSwgd2l0aCBzcGhlcmUgcyBhbmQsIGlmIGludGVyc2VjdGluZyxcbi8vIHJldHVybnMgdCB2YWx1ZSBvZiBpbnRlcnNlY3Rpb24gYW5kIGludGVyc2VjdGlvbiBwb2ludCBxXG5leHBvcnQgY29uc3QgaW50ZXJzZWN0UmF5U3BoZXJlID0gKFxuICBwb3M6IGdsbS5SZWFkb25seVZlYzMsXG4gIGRpcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgY2VudGVyOiBnbG0uUmVhZG9ubHlWZWMzLFxuICByYWRpdXM6IG51bWJlclxuKTogZ2xtLnZlYzMgfCBudWxsID0+IHtcbiAgLy8gVmVjdG9yIG0gPSBwIC0gcy5jO1xuICBjb25zdCBtID0gZ2xtLnZlYzMuc3ViKGdsbS52ZWMzLmNyZWF0ZSgpLCBwb3MsIGNlbnRlcik7XG4gIC8vIGZsb2F0IGIgPSBEb3QobSwgZCk7XG4gIGNvbnN0IGIgPSBnbG0udmVjMy5kb3QobSwgZGlyKTtcbiAgLy8gZmxvYXQgYyA9IERvdChtLCBtKSAtIHMuciAqIHMucjtcbiAgY29uc3QgYyA9IGdsbS52ZWMzLmRvdChtLCBtKSAtIHJhZGl1cyAqIHJhZGl1cztcblxuICAvLyBFeGl0IGlmIHLigJlzIG9yaWdpbiBvdXRzaWRlIHMgKGMgPiAwKSBhbmQgciBwb2ludGluZyBhd2F5IGZyb20gcyAoYiA+IDApXG4gIGlmIChjID4gMCAmJiBiID4gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGRpc2NyID0gYiAqIGIgLSBjO1xuXG4gIC8vIEEgbmVnYXRpdmUgZGlzY3JpbWluYW50IGNvcnJlc3BvbmRzIHRvIHJheSBtaXNzaW5nIHNwaGVyZVxuICBpZiAoZGlzY3IgPCAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBSYXkgbm93IGZvdW5kIHRvIGludGVyc2VjdCBzcGhlcmUsIGNvbXB1dGUgc21hbGxlc3QgdCB2YWx1ZSBvZiBpbnRlcnNlY3Rpb25cbiAgbGV0IHQgPSAtYiAtIE1hdGguc3FydChkaXNjcik7XG5cbiAgLy8gSWYgdCBpcyBuZWdhdGl2ZSwgcmF5IHN0YXJ0ZWQgaW5zaWRlIHNwaGVyZSBzbyBjbGFtcCB0IHRvIHplcm9cbiAgaWYgKHQgPCAwKSB7XG4gICAgdCA9IDA7XG4gIH1cblxuICByZXR1cm4gZ2xtLnZlYzMuZnJvbVZhbHVlcyhcbiAgICBwb3NbMF0gKyB0ICogZGlyWzBdLFxuICAgIHBvc1sxXSArIHQgKiBkaXJbMV0sXG4gICAgcG9zWzJdICsgdCAqIGRpclsyXVxuICApO1xufTtcbiIsCiAgImV4cG9ydCBpbnRlcmZhY2UgSUZyYW1lUHJvZmlsZXIge1xuICBmcmFtZXNEZWx0YTogUmVhZG9ubHlBcnJheTxudW1iZXI+O1xuICBhdmVyYWdlRGVsdGE6IG51bWJlcjtcbiAgbWluRGVsdGE6IG51bWJlcjtcbiAgbWF4RGVsdGE6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEZyYW1lUHJvZmlsZXIgaW1wbGVtZW50cyBJRnJhbWVQcm9maWxlciB7XG4gIHByaXZhdGUgX2ZyYW1lc0RlbHRhOiBudW1iZXJbXSA9IFtdO1xuICBwcml2YXRlIF9hdmVyYWdlRGVsdGE6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX21pbkRlbHRhOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9tYXhEZWx0YTogbnVtYmVyID0gMDtcblxuICBwdXNoRGVsdGEoaW5EZWx0YTogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuX2ZyYW1lc0RlbHRhLmxlbmd0aCA+PSAxMDApIHtcbiAgICAgIHRoaXMuX2ZyYW1lc0RlbHRhLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5fZnJhbWVzRGVsdGEucHVzaChpbkRlbHRhKTtcblxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuXG4gICAgdGhpcy5fbWluRGVsdGEgPSArOTk5OTk5OTk5O1xuICAgIHRoaXMuX21heERlbHRhID0gLTk5OTk5OTk5OTtcbiAgICB0aGlzLl9hdmVyYWdlRGVsdGEgPSAwO1xuXG4gICAgZm9yIChjb25zdCBjdXJyRGVsdGEgb2YgdGhpcy5fZnJhbWVzRGVsdGEpIHtcbiAgICAgIHRoaXMuX21pbkRlbHRhID0gTWF0aC5taW4odGhpcy5fbWluRGVsdGEsIGN1cnJEZWx0YSk7XG4gICAgICB0aGlzLl9tYXhEZWx0YSA9IE1hdGgubWF4KHRoaXMuX21heERlbHRhLCBjdXJyRGVsdGEpO1xuICAgICAgdGhpcy5fYXZlcmFnZURlbHRhICs9IGN1cnJEZWx0YTtcbiAgICB9XG4gICAgdGhpcy5fYXZlcmFnZURlbHRhIC89IHRoaXMuX2ZyYW1lc0RlbHRhLmxlbmd0aDtcbiAgfVxuXG4gIGdldCBmcmFtZXNEZWx0YSgpOiBSZWFkb25seUFycmF5PG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLl9mcmFtZXNEZWx0YTtcbiAgfVxuICBnZXQgYXZlcmFnZURlbHRhKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2F2ZXJhZ2VEZWx0YTtcbiAgfVxuICBnZXQgbWluRGVsdGEoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbWluRGVsdGE7XG4gIH1cbiAgZ2V0IG1heERlbHRhKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heERlbHRhO1xuICB9XG59XG4iLAogICJleHBvcnQgY29uc3QgcHJvZ3Jlc3NGZXRjaCA9IGFzeW5jIChcbiAgdXJsOiBzdHJpbmcsXG4gIG9uUHJvZ3Jlc3M/OiAodG90YWw6IG51bWJlcikgPT4gdm9pZFxuKTogUHJvbWlzZTxSZXNwb25zZT4gPT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG5cbiAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keSEuZ2V0UmVhZGVyKCk7XG5cbiAgbGV0IHRvdGFsUHJvZ3Jlc3MgPSAwO1xuICBjb25zdCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgICBmdW5jdGlvbiBwdW1wKCk6IGFueSB7XG4gICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4oKHsgZG9uZSwgdmFsdWUgfSkgPT4ge1xuICAgICAgICAgIC8vIFdoZW4gbm8gbW9yZSBkYXRhIG5lZWRzIHRvIGJlIGNvbnN1bWVkLCBjbG9zZSB0aGUgc3RyZWFtXG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgICAgICAgdG90YWxQcm9ncmVzcyArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICBvblByb2dyZXNzKHRvdGFsUHJvZ3Jlc3MpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEVucXVldWUgdGhlIG5leHQgZGF0YSBjaHVuayBpbnRvIG91ciB0YXJnZXQgc3RyZWFtXG4gICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBhd2FpdCBzdHJlYW07XG4gIHJldHVybiBuZXcgUmVzcG9uc2Uoc3RyZWFtKTtcbn07XG4iLAogICJleHBvcnQgY29uc3Qgc2xlZXAgPSBhc3luYyAoZGVsYXk6IG51bWJlcik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNhbmNlbGxhYmxlU2xlZXAgPSAoXG4gIGRlbGF5OiBudW1iZXJcbik6IHtcbiAgcHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcbiAgY2FuY2VsOiAoKSA9PiB2b2lkO1xufSA9PiB7XG4gIGxldCB0aW1lb3V0SGFuZGxlOiBudW1iZXIgPSAtMTtcbiAgbGV0IHJlc29sdmVDYWxsYmFjazogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgIHJlc29sdmVDYWxsYmFjayA9IHJlc29sdmU7XG4gICAgdGltZW91dEhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9taXNlLFxuICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgaWYgKHRpbWVvdXRIYW5kbGUgPj0gMCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc29sdmVDYWxsYmFjaykge1xuICAgICAgICByZXNvbHZlQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuIiwKICAiY29uc3QgUkFORF9NQVggPSAyMTQ3NDgzNjQ4IHwgMDtcblxuZXhwb3J0IGNsYXNzIERldGVybWluaXN0aWNSbmcge1xuICBwcml2YXRlIF9zZWVkOiBudW1iZXIgPSAxIHwgMDtcblxuICByYW5kb20oKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5fc2VlZCA9PSAwKSB7XG4gICAgICB0aGlzLl9zZWVkID0gMTIzNDU5ODc2IHwgMDtcbiAgICB9XG5cbiAgICBjb25zdCBoaSA9ICh0aGlzLl9zZWVkIC8gMTI3NzczKSB8IDA7XG4gICAgY29uc3QgbG8gPSB0aGlzLl9zZWVkICUgMTI3NzczIHwgMDtcbiAgICBsZXQgeCA9ICgxNjgwNyAqIGxvIC0gMjgzNiAqIGhpKSB8IDA7XG5cbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHggKz0gMHg3ZmZmZmZmZiB8IDA7XG4gICAgfVxuXG4gICAgdGhpcy5fc2VlZCA9IHg7XG5cbiAgICByZXR1cm4gKHggJSAoUkFORF9NQVggKyAxKSkgLyAtUkFORF9NQVg7XG4gIH1cblxuICBzZXRTZWVkKGluU2VlZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fc2VlZCA9IGluU2VlZCB8IDA7XG4gIH1cbn1cbiIsCiAgImltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5pbXBvcnQgeyBkZWcyUmFkIH0gZnJvbSAnLi4vLi4vc3lzdGVtL21hdGgvYW5nbGVzJztcblxuZW51bSBQcm9qZWN0aW9uVHlwZSB7XG4gIHBlcnNwZWN0aXZlID0gMCxcbiAgb3J0aG9nb25hbCA9IDFcbn1cblxuaW50ZXJmYWNlIElQZXJzcGVjdGl2ZURhdGFPcHRzIHtcbiAgZm92eTogbnVtYmVyO1xuICBhc3BlY3RSYXRpbz86IG51bWJlcjtcbiAgbmVhcjogbnVtYmVyO1xuICBmYXI6IG51bWJlcjtcbn1cblxudHlwZSBJUGVyc3BlY3RpdmVEYXRhID0gUmVxdWlyZWQ8SVBlcnNwZWN0aXZlRGF0YU9wdHM+O1xuXG5pbnRlcmZhY2UgSU9ydGhvZ29uYWxEYXRhIHtcbiAgbGVmdDogbnVtYmVyO1xuICByaWdodDogbnVtYmVyO1xuICB0b3A6IG51bWJlcjtcbiAgYm90dG9tOiBudW1iZXI7XG4gIG5lYXI6IG51bWJlcjtcbiAgZmFyOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNhbWVyYSB7XG4gIGdldEV5ZSgpOiBnbG0uUmVhZG9ubHlWZWMzO1xuICBnZXRUYXJnZXQoKTogZ2xtLlJlYWRvbmx5VmVjMztcbiAgZ2V0VXBBeGlzKCk6IGdsbS5SZWFkb25seVZlYzM7XG5cbiAgZ2V0UHJvamVjdGlvbk1hdHJpeCgpOiBnbG0uUmVhZG9ubHlNYXQ0O1xuICBnZXRWaWV3TWF0cml4KCk6IGdsbS5SZWFkb25seU1hdDQ7XG4gIGdldENvbXBvc2VkTWF0cml4KCk6IGdsbS5SZWFkb25seU1hdDQ7XG5cbiAgZ2V0UGVyc3BlY3RpdmVEYXRhKCk6IFJlYWRvbmx5PElQZXJzcGVjdGl2ZURhdGEgfCB1bmRlZmluZWQ+O1xuICBnZXRPcnRob2dvbmFsRGF0YSgpOiBSZWFkb25seTxJT3J0aG9nb25hbERhdGEgfCB1bmRlZmluZWQ+O1xufVxuXG5leHBvcnQgY2xhc3MgQ2FtZXJhIGltcGxlbWVudHMgSUNhbWVyYSB7XG4gIHByaXZhdGUgX3Byb2plY3Rpb25UeXBlID0gUHJvamVjdGlvblR5cGUucGVyc3BlY3RpdmU7XG4gIHByaXZhdGUgX3BlcnNwZWN0aXZlRGF0YT86IElQZXJzcGVjdGl2ZURhdGE7XG4gIHByaXZhdGUgX29ydGhvZ29uYWxEYXRhPzogSU9ydGhvZ29uYWxEYXRhO1xuXG4gIHByaXZhdGUgX3ZpZXdwb3J0UG9zID0gZ2xtLnZlYzIuZnJvbVZhbHVlcygwLCAwKTtcbiAgcHJpdmF0ZSBfdmlld3BvcnRTaXplID0gZ2xtLnZlYzIuZnJvbVZhbHVlcygwLCAwKTtcblxuICBwcml2YXRlIF9wcm9qZWN0aW9uTWF0cml4ID0gZ2xtLm1hdDQuY3JlYXRlKCk7XG4gIHByaXZhdGUgX3ZpZXdNYXRyaXggPSBnbG0ubWF0NC5jcmVhdGUoKTtcbiAgcHJpdmF0ZSBfY29tcG9zZWRNYXRyaXggPSBnbG0ubWF0NC5jcmVhdGUoKTtcblxuICBwcml2YXRlIF9leWUgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICBwcml2YXRlIF90YXJnZXQgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICBwcml2YXRlIF91cEF4aXMgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuXG4gIC8vXG5cbiAgc2V0QXNQZXJzcGVjdGl2ZShpbkRhdGE6IElQZXJzcGVjdGl2ZURhdGFPcHRzKSB7XG4gICAgdGhpcy5fcHJvamVjdGlvblR5cGUgPSBQcm9qZWN0aW9uVHlwZS5wZXJzcGVjdGl2ZTtcblxuICAgIGxldCBhc3BlY3RSYXRpbyA9IGluRGF0YS5hc3BlY3RSYXRpbztcbiAgICBpZiAoYXNwZWN0UmF0aW8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgYXNwZWN0UmF0aW8gPSB0aGlzLl92aWV3cG9ydFNpemVbMF0gLyB0aGlzLl92aWV3cG9ydFNpemVbMV07XG4gICAgfVxuXG4gICAgdGhpcy5fcGVyc3BlY3RpdmVEYXRhID0ge1xuICAgICAgZm92eTogaW5EYXRhLmZvdnksXG4gICAgICBhc3BlY3RSYXRpbyxcbiAgICAgIG5lYXI6IGluRGF0YS5uZWFyLFxuICAgICAgZmFyOiBpbkRhdGEuZmFyXG4gICAgfTtcbiAgfVxuXG4gIHNldEFzT3J0aG9nb25hbChpbkRhdGE6IElPcnRob2dvbmFsRGF0YSkge1xuICAgIHRoaXMuX3Byb2plY3Rpb25UeXBlID0gUHJvamVjdGlvblR5cGUub3J0aG9nb25hbDtcbiAgICB0aGlzLl9vcnRob2dvbmFsRGF0YSA9IHsgLi4uaW5EYXRhIH07XG4gIH1cblxuICAvL1xuXG4gIHNldFZpZXdwb3J0UG9zKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5fdmlld3BvcnRQb3NbMF0gPSB3aWR0aDtcbiAgICB0aGlzLl92aWV3cG9ydFBvc1sxXSA9IGhlaWdodDtcbiAgfVxuXG4gIGdldFZpZXdwb3J0UG9zKCk6IGdsbS5SZWFkb25seVZlYzIge1xuICAgIHJldHVybiB0aGlzLl92aWV3cG9ydFBvcztcbiAgfVxuXG4gIC8vXG5cbiAgc2V0Vmlld3BvcnRTaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5fdmlld3BvcnRTaXplWzBdID0gd2lkdGg7XG4gICAgdGhpcy5fdmlld3BvcnRTaXplWzFdID0gaGVpZ2h0O1xuXG4gICAgaWYgKFxuICAgICAgdGhpcy5fcHJvamVjdGlvblR5cGUgIT09IFByb2plY3Rpb25UeXBlLnBlcnNwZWN0aXZlICYmXG4gICAgICB0aGlzLl9wZXJzcGVjdGl2ZURhdGFcbiAgICApIHtcbiAgICAgIHRoaXMuX3BlcnNwZWN0aXZlRGF0YS5hc3BlY3RSYXRpbyA9XG4gICAgICAgIHRoaXMuX3ZpZXdwb3J0U2l6ZVswXSAvIHRoaXMuX3ZpZXdwb3J0U2l6ZVsxXTtcbiAgICB9XG4gIH1cblxuICBnZXRWaWV3cG9ydFNpemUoKTogZ2xtLlJlYWRvbmx5VmVjMiB7XG4gICAgcmV0dXJuIHRoaXMuX3ZpZXdwb3J0U2l6ZTtcbiAgfVxuXG4gIC8vXG5cbiAgbG9va0F0KFxuICAgIGluRXllOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluVGFyZ2V0OiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluVXBBeGlzOiBnbG0uUmVhZG9ubHlWZWMzXG4gICkge1xuICAgIHRoaXMuc2V0RXllKGluRXllKTtcbiAgICB0aGlzLnNldFRhcmdldChpblRhcmdldCk7XG4gICAgdGhpcy5zZXRVcEF4aXMoaW5VcEF4aXMpO1xuICB9XG5cbiAgLy9cblxuICBzZXRFeWUoaW5FeWU6IGdsbS5SZWFkb25seVZlYzMpIHtcbiAgICBnbG0udmVjMy5jb3B5KHRoaXMuX2V5ZSwgaW5FeWUpO1xuICB9XG4gIHNldFRhcmdldChpblRhcmdldDogZ2xtLlJlYWRvbmx5VmVjMykge1xuICAgIGdsbS52ZWMzLmNvcHkodGhpcy5fdGFyZ2V0LCBpblRhcmdldCk7XG4gIH1cbiAgc2V0VXBBeGlzKGluVXBBeGlzOiBnbG0uUmVhZG9ubHlWZWMzKSB7XG4gICAgZ2xtLnZlYzMuY29weSh0aGlzLl91cEF4aXMsIGluVXBBeGlzKTtcbiAgfVxuXG4gIGdldEV5ZSgpOiBnbG0uUmVhZG9ubHlWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5fZXllO1xuICB9XG4gIGdldFRhcmdldCgpOiBnbG0uUmVhZG9ubHlWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0O1xuICB9XG4gIGdldFVwQXhpcygpOiBnbG0uUmVhZG9ubHlWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5fdXBBeGlzO1xuICB9XG5cbiAgLy9cblxuICBjb21wdXRlTWF0cmljZXMoKSB7XG4gICAgaWYgKHRoaXMuX3Byb2plY3Rpb25UeXBlID09PSBQcm9qZWN0aW9uVHlwZS5wZXJzcGVjdGl2ZSkge1xuICAgICAgY29uc3QgeyBmb3Z5LCBhc3BlY3RSYXRpbywgbmVhciwgZmFyIH0gPSB0aGlzLl9wZXJzcGVjdGl2ZURhdGEhO1xuICAgICAgZ2xtLm1hdDQucGVyc3BlY3RpdmUoXG4gICAgICAgIHRoaXMuX3Byb2plY3Rpb25NYXRyaXgsXG4gICAgICAgIGRlZzJSYWQoZm92eSksXG4gICAgICAgIGFzcGVjdFJhdGlvISxcbiAgICAgICAgbmVhcixcbiAgICAgICAgZmFyXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fcHJvamVjdGlvblR5cGUgPT09IFByb2plY3Rpb25UeXBlLm9ydGhvZ29uYWwpIHtcbiAgICAgIGNvbnN0IHsgbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tLCBuZWFyLCBmYXIgfSA9IHRoaXMuX29ydGhvZ29uYWxEYXRhITtcbiAgICAgIGdsbS5tYXQ0Lm9ydGhvKFxuICAgICAgICB0aGlzLl9wcm9qZWN0aW9uTWF0cml4LFxuICAgICAgICBsZWZ0LFxuICAgICAgICByaWdodCxcbiAgICAgICAgdG9wLFxuICAgICAgICBib3R0b20sXG4gICAgICAgIG5lYXIsXG4gICAgICAgIGZhclxuICAgICAgKTtcbiAgICB9XG5cbiAgICBnbG0ubWF0NC5sb29rQXQodGhpcy5fdmlld01hdHJpeCwgdGhpcy5fZXllLCB0aGlzLl90YXJnZXQsIHRoaXMuX3VwQXhpcyk7XG5cbiAgICB0aGlzLmNvbXB1dGVDb21wb3NlZE1hdHJpeCgpO1xuICB9XG5cbiAgY29tcHV0ZUNvbXBvc2VkTWF0cml4KCkge1xuICAgIGdsbS5tYXQ0Lm11bHRpcGx5KFxuICAgICAgdGhpcy5fY29tcG9zZWRNYXRyaXgsXG4gICAgICB0aGlzLl9wcm9qZWN0aW9uTWF0cml4LFxuICAgICAgdGhpcy5fdmlld01hdHJpeFxuICAgICk7XG4gIH1cblxuICBzZXRQcm9qZWN0aW9uTWF0cml4KGluTWF0NDogZ2xtLlJlYWRvbmx5TWF0NCkge1xuICAgIGdsbS5tYXQ0LmNvcHkodGhpcy5fcHJvamVjdGlvbk1hdHJpeCwgaW5NYXQ0KTtcbiAgfVxuICBzZXRWaWV3TWF0cml4KGluTWF0NDogZ2xtLlJlYWRvbmx5TWF0NCkge1xuICAgIGdsbS5tYXQ0LmNvcHkodGhpcy5fdmlld01hdHJpeCwgaW5NYXQ0KTtcbiAgfVxuICBzZXRDb21wb3NlZE1hdHJpeChpbk1hdDQ6IGdsbS5SZWFkb25seU1hdDQpIHtcbiAgICBnbG0ubWF0NC5jb3B5KHRoaXMuX2NvbXBvc2VkTWF0cml4LCBpbk1hdDQpO1xuICB9XG5cbiAgZ2V0UHJvamVjdGlvbk1hdHJpeCgpOiBnbG0uUmVhZG9ubHlNYXQ0IHtcbiAgICByZXR1cm4gdGhpcy5fcHJvamVjdGlvbk1hdHJpeDtcbiAgfVxuICBnZXRWaWV3TWF0cml4KCk6IGdsbS5SZWFkb25seU1hdDQge1xuICAgIHJldHVybiB0aGlzLl92aWV3TWF0cml4O1xuICB9XG4gIGdldENvbXBvc2VkTWF0cml4KCk6IGdsbS5SZWFkb25seU1hdDQge1xuICAgIHJldHVybiB0aGlzLl9jb21wb3NlZE1hdHJpeDtcbiAgfVxuXG4gIC8vXG5cbiAgZ2V0UGVyc3BlY3RpdmVEYXRhKCk6IFJlYWRvbmx5PElQZXJzcGVjdGl2ZURhdGEgfCB1bmRlZmluZWQ+IHtcbiAgICBpZiAodGhpcy5fcHJvamVjdGlvblR5cGUgIT09IFByb2plY3Rpb25UeXBlLnBlcnNwZWN0aXZlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24nKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3BlcnNwZWN0aXZlRGF0YTtcbiAgfVxuICBnZXRPcnRob2dvbmFsRGF0YSgpOiBSZWFkb25seTxJT3J0aG9nb25hbERhdGEgfCB1bmRlZmluZWQ+IHtcbiAgICBpZiAodGhpcy5fcHJvamVjdGlvblR5cGUgIT09IFByb2plY3Rpb25UeXBlLm9ydGhvZ29uYWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbm90IGFuIG9ydGhvZ29uYWwgcHJvamVjdGlvbicpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fb3J0aG9nb25hbERhdGE7XG4gIH1cbn1cbiIsCiAgImltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5lbnVtIEZydXN0dW1TaWRlIHtcbiAgUmlnaHQgPSAwLFxuICBMZWZ0ID0gMSxcbiAgQm90dG9tID0gMixcbiAgVG9wID0gMyxcbiAgQmFjayA9IDQsXG4gIEZyb250ID0gNVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElGcnVzdHVtQ3VsbGluZyB7XG4gIGNhbGN1bGF0ZUZydXN0dW0ocHJvajogZ2xtLlJlYWRvbmx5TWF0NCwgdmlldzogZ2xtLlJlYWRvbmx5TWF0NCk6IHZvaWQ7XG4gIHNwaGVyZUluRnJ1c3R1bSh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCByYWRpdXM6IG51bWJlcik6IGJvb2xlYW47XG4gIHBvaW50SW5GcnVzdHVtKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpOiBib29sZWFuO1xuICBjdWJlSW5GcnVzdHVtKGluWDogbnVtYmVyLCBpblk6IG51bWJlciwgaW5aOiBudW1iZXIsIGluU2l6ZTogbnVtYmVyKTogYm9vbGVhbjtcbiAgY3ViZUluRnJ1c3R1bVZlYzMoY2VudGVyOiBnbG0uUmVhZG9ubHlWZWMzLCBpblNpemU6IG51bWJlcik6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBGcnVzdHVtQ3VsbGluZyBpbXBsZW1lbnRzIElGcnVzdHVtQ3VsbGluZyB7XG4gIHByaXZhdGUgX2ZydXN0dW0gPSBuZXcgRmxvYXQzMkFycmF5KDI0KTsgLy8gNiAqIDQgdmFsdWVzXG5cbiAgcHJpdmF0ZSBfc2V0UGxhbmUoXG4gICAgc2lkZTogRnJ1c3R1bVNpZGUsXG4gICAgbGVmdDogZ2xtLlJlYWRvbmx5VmVjNCxcbiAgICByaWdodDogZ2xtLlJlYWRvbmx5VmVjNCxcbiAgICBjb2VmOiBudW1iZXJcbiAgKSB7XG4gICAgY29uc3QgaW5kZXggPSBzaWRlICogNDtcblxuICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAwXSA9IGxlZnRbMF0gKyByaWdodFswXSAqIGNvZWY7XG4gICAgdGhpcy5fZnJ1c3R1bVtpbmRleCArIDFdID0gbGVmdFsxXSArIHJpZ2h0WzFdICogY29lZjtcbiAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMl0gPSBsZWZ0WzJdICsgcmlnaHRbMl0gKiBjb2VmO1xuICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAzXSA9IGxlZnRbM10gKyByaWdodFszXSAqIGNvZWY7XG5cbiAgICBjb25zdCBtYWduaXR1ZGUgPSBNYXRoLnNxcnQoXG4gICAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMF0gKiB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMF0gK1xuICAgICAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMV0gKiB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMV0gK1xuICAgICAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMl0gKiB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMl1cbiAgICApO1xuXG4gICAgaWYgKG1hZ25pdHVkZSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdGhpcy5fZnJ1c3R1bVtpbmRleCArIDBdIC89IG1hZ25pdHVkZTtcbiAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMV0gLz0gbWFnbml0dWRlO1xuICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAyXSAvPSBtYWduaXR1ZGU7XG4gICAgdGhpcy5fZnJ1c3R1bVtpbmRleCArIDNdIC89IG1hZ25pdHVkZTtcbiAgfVxuXG4gIGNhbGN1bGF0ZUZydXN0dW0ocHJvajogZ2xtLlJlYWRvbmx5TWF0NCwgdmlldzogZ2xtLlJlYWRvbmx5TWF0NCkge1xuICAgIGNvbnN0IGNsaXAgPSBnbG0ubWF0NC5tdWx0aXBseShnbG0ubWF0NC5jcmVhdGUoKSwgcHJvaiwgdmlldyk7XG5cbiAgICAvLy9cblxuICAgIGNvbnN0IHJvdzAgPSBnbG0udmVjNC5mcm9tVmFsdWVzKGNsaXBbMF0sIGNsaXBbNF0sIGNsaXBbOF0sIGNsaXBbMTJdKTtcbiAgICBjb25zdCByb3cxID0gZ2xtLnZlYzQuZnJvbVZhbHVlcyhjbGlwWzFdLCBjbGlwWzVdLCBjbGlwWzldLCBjbGlwWzEzXSk7XG4gICAgY29uc3Qgcm93MiA9IGdsbS52ZWM0LmZyb21WYWx1ZXMoY2xpcFsyXSwgY2xpcFs2XSwgY2xpcFsxMF0sIGNsaXBbMTRdKTtcbiAgICBjb25zdCByb3czID0gZ2xtLnZlYzQuZnJvbVZhbHVlcyhjbGlwWzNdLCBjbGlwWzddLCBjbGlwWzExXSwgY2xpcFsxNV0pO1xuXG4gICAgdGhpcy5fc2V0UGxhbmUoRnJ1c3R1bVNpZGUuUmlnaHQsIHJvdzMsIHJvdzAsIC0xKTtcbiAgICB0aGlzLl9zZXRQbGFuZShGcnVzdHVtU2lkZS5MZWZ0LCByb3czLCByb3cwLCArMSk7XG4gICAgdGhpcy5fc2V0UGxhbmUoRnJ1c3R1bVNpZGUuQm90dG9tLCByb3czLCByb3cxLCArMSk7XG4gICAgdGhpcy5fc2V0UGxhbmUoRnJ1c3R1bVNpZGUuVG9wLCByb3czLCByb3cxLCAtMSk7XG4gICAgdGhpcy5fc2V0UGxhbmUoRnJ1c3R1bVNpZGUuQmFjaywgcm93Mywgcm93MiwgLTEpO1xuICAgIHRoaXMuX3NldFBsYW5lKEZydXN0dW1TaWRlLkZyb250LCByb3czLCByb3cyLCArMSk7XG4gIH1cblxuICBzcGhlcmVJbkZydXN0dW0oeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciwgcmFkaXVzOiBudW1iZXIpIHtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgNjsgKytpaSkge1xuICAgICAgY29uc3QgaW5kZXggPSBpaSAqIDQ7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAwXSAqIHggK1xuICAgICAgICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAxXSAqIHkgK1xuICAgICAgICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAyXSAqIHogK1xuICAgICAgICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAzXSA8PVxuICAgICAgICAtcmFkaXVzXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcG9pbnRJbkZydXN0dW0oeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xuICAgIC8vIHNwaGVyZSBvZiByYWRpdXMgMCA9PiBwb2ludFxuICAgIHJldHVybiB0aGlzLnNwaGVyZUluRnJ1c3R1bSh4LCB5LCB6LCAwKTtcbiAgfVxuXG4gIGN1YmVJbkZydXN0dW1WZWMzKGNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMywgaW5TaXplOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5jdWJlSW5GcnVzdHVtKGNlbnRlclswXSwgY2VudGVyWzFdLCBjZW50ZXJbMl0sIGluU2l6ZSk7XG4gIH1cblxuICBjdWJlSW5GcnVzdHVtKGluWDogbnVtYmVyLCBpblk6IG51bWJlciwgaW5aOiBudW1iZXIsIGluU2l6ZTogbnVtYmVyKSB7XG4gICAgY29uc3QgaFNpemUgPSBpblNpemUgKiAwLjU7XG4gICAgY29uc3QgbWluWCA9IGluWCAtIGhTaXplO1xuICAgIGNvbnN0IG1pblkgPSBpblkgLSBoU2l6ZTtcbiAgICBjb25zdCBtaW5aID0gaW5aIC0gaFNpemU7XG4gICAgY29uc3QgbWF4WCA9IGluWCArIGhTaXplO1xuICAgIGNvbnN0IG1heFkgPSBpblkgKyBoU2l6ZTtcbiAgICBjb25zdCBtYXhaID0gaW5aICsgaFNpemU7XG5cbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgNjsgKytpaSkge1xuICAgICAgY29uc3QgaW5kZXggPSBpaSAqIDQ7XG4gICAgICBjb25zdCBwbGFuQSA9IHRoaXMuX2ZydXN0dW1baW5kZXggKyAwXTtcbiAgICAgIGNvbnN0IHBsYW5CID0gdGhpcy5fZnJ1c3R1bVtpbmRleCArIDFdO1xuICAgICAgY29uc3QgcGxhbkMgPSB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMl07XG4gICAgICBjb25zdCBwbGFuRCA9IHRoaXMuX2ZydXN0dW1baW5kZXggKyAzXTtcblxuICAgICAgaWYgKFxuICAgICAgICBwbGFuQSAqIG1pblggKyBwbGFuQiAqIG1pblkgKyBwbGFuQyAqIG1pblogKyBwbGFuRCA+IDAgfHxcbiAgICAgICAgcGxhbkEgKiBtYXhYICsgcGxhbkIgKiBtaW5ZICsgcGxhbkMgKiBtaW5aICsgcGxhbkQgPiAwIHx8XG4gICAgICAgIHBsYW5BICogbWluWCArIHBsYW5CICogbWF4WSArIHBsYW5DICogbWluWiArIHBsYW5EID4gMCB8fFxuICAgICAgICBwbGFuQSAqIG1heFggKyBwbGFuQiAqIG1heFkgKyBwbGFuQyAqIG1pblogKyBwbGFuRCA+IDAgfHxcbiAgICAgICAgcGxhbkEgKiBtaW5YICsgcGxhbkIgKiBtaW5ZICsgcGxhbkMgKiBtYXhaICsgcGxhbkQgPiAwIHx8XG4gICAgICAgIHBsYW5BICogbWF4WCArIHBsYW5CICogbWluWSArIHBsYW5DICogbWF4WiArIHBsYW5EID4gMCB8fFxuICAgICAgICBwbGFuQSAqIG1pblggKyBwbGFuQiAqIG1heFkgKyBwbGFuQyAqIG1heFogKyBwbGFuRCA+IDAgfHxcbiAgICAgICAgcGxhbkEgKiBtYXhYICsgcGxhbkIgKiBtYXhZICsgcGxhbkMgKiBtYXhaICsgcGxhbkQgPiAwXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwKICAiLy8gaHR0cHM6Ly93d3cub3BlbmdsLm9yZy93aWtpL0dsdVByb2plY3RfYW5kX2dsdVVuUHJvamVjdF9jb2RlXG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgY29uc3Qgc2NlbmVUb1NjcmVlbkNvb3JkaW5hdGVzID0gKFxuICBzY2VuZVBvczogZ2xtLlJlYWRvbmx5VmVjM1tdLFxuICBtb2RlbFZpZXc6IGdsbS5SZWFkb25seU1hdDQsXG4gIHByb2plY3Rpb246IGdsbS5SZWFkb25seU1hdDQsXG4gIHZpZXdwb3J0OiBnbG0uUmVhZG9ubHlWZWM0XG4pOiBnbG0udmVjM1tdID0+IHtcbiAgY29uc3QgY29tcG9zZWRNYXRyaXggPSBnbG0ubWF0NC5jcmVhdGUoKTtcblxuICBnbG0ubWF0NC5tdWx0aXBseShjb21wb3NlZE1hdHJpeCwgcHJvamVjdGlvbiwgbW9kZWxWaWV3KTtcblxuICByZXR1cm4gc2NlbmVUb1NjcmVlbkNvb3Jkc0Zyb21Db21wb3NlZChzY2VuZVBvcywgY29tcG9zZWRNYXRyaXgsIHZpZXdwb3J0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzY2VuZVRvU2NyZWVuQ29vcmRzRnJvbUNvbXBvc2VkID0gKFxuICBhbGxTY2VuZVBvczogZ2xtLlJlYWRvbmx5VmVjM1tdLFxuICBjb21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCxcbiAgdmlld3BvcnQ6IGdsbS5SZWFkb25seVZlYzRcbik6IGdsbS52ZWMzW10gPT4ge1xuICBjb25zdCBpbnB1dFZlYzQgPSBnbG0udmVjNC5jcmVhdGUoKTtcblxuICBjb25zdCBtdWx0aXBsaWVkVmVjNCA9IGdsbS52ZWM0LmNyZWF0ZSgpO1xuXG4gIGNvbnN0IHJlc3VsdHM6IGdsbS52ZWMzW10gPSBbXTtcblxuICBhbGxTY2VuZVBvcy5mb3JFYWNoKChzY2VuZVBvcykgPT4ge1xuICAgIGlucHV0VmVjNFswXSA9IHNjZW5lUG9zWzBdO1xuICAgIGlucHV0VmVjNFsxXSA9IHNjZW5lUG9zWzFdO1xuICAgIGlucHV0VmVjNFsyXSA9IHNjZW5lUG9zWzJdO1xuICAgIGlucHV0VmVjNFszXSA9IDE7XG5cbiAgICBnbG0udmVjNC50cmFuc2Zvcm1NYXQ0KG11bHRpcGxpZWRWZWM0LCBpbnB1dFZlYzQsIGNvbXBvc2VkTWF0cml4KTtcblxuICAgIC8vVGhlIHJlc3VsdCBub3JtYWxpemVzIGJldHdlZW4gLTEgYW5kIDFcbiAgICBpZiAobXVsdGlwbGllZFZlYzRbM10gPT09IDApIHtcbiAgICAgIC8vVGhlIHcgdmFsdWVcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIG11bHRpcGxpZWRWZWM0WzNdID0gMSAvIG11bHRpcGxpZWRWZWM0WzNdO1xuICAgIC8vIFBlcnNwZWN0aXZlIGRpdmlzaW9uXG4gICAgbXVsdGlwbGllZFZlYzRbMF0gKj0gbXVsdGlwbGllZFZlYzRbM107XG4gICAgbXVsdGlwbGllZFZlYzRbMV0gKj0gbXVsdGlwbGllZFZlYzRbM107XG4gICAgbXVsdGlwbGllZFZlYzRbMl0gKj0gbXVsdGlwbGllZFZlYzRbM107XG5cbiAgICAvLyBXaW5kb3cgY29vcmRpbmF0ZXNcbiAgICAvLyBNYXAgeCwgeSB0byByYW5nZSAwLTFcbiAgICAobXVsdGlwbGllZFZlYzRbMF0gPVxuICAgICAgKG11bHRpcGxpZWRWZWM0WzBdICogMC41ICsgMC41KSAqIHZpZXdwb3J0WzJdICsgdmlld3BvcnRbMF0pLFxuICAgICAgKG11bHRpcGxpZWRWZWM0WzFdID1cbiAgICAgICAgKG11bHRpcGxpZWRWZWM0WzFdICogMC41ICsgMC41KSAqIHZpZXdwb3J0WzNdICsgdmlld3BvcnRbMV0pO1xuXG4gICAgcmVzdWx0cy5wdXNoKGdsbS52ZWMzLmNvcHkoZ2xtLnZlYzMuY3JlYXRlKCksIG11bHRpcGxpZWRWZWM0IGFzIGdsbS52ZWMzKSk7XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHRzO1xufTtcbiIsCiAgIi8vIGh0dHBzOi8vd3d3Lm9wZW5nbC5vcmcvd2lraS9HbHVQcm9qZWN0X2FuZF9nbHVVblByb2plY3RfY29kZVxuXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuZXhwb3J0IGNvbnN0IHNjcmVlblRvU2NlbmVDb29yZGluYXRlcyA9IChcbiAgYWxsU2NyZWVuUG9zOiBnbG0uUmVhZG9ubHlWZWMzW10sXG4gIG1vZGVsVmlldzogZ2xtLlJlYWRvbmx5TWF0NCxcbiAgcHJvamVjdGlvbjogZ2xtLlJlYWRvbmx5TWF0NCxcbiAgdmlld3BvcnQ6IGdsbS5SZWFkb25seVZlYzRcbik6IGdsbS52ZWMzW10gPT4ge1xuICBjb25zdCBjb21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCA9IGdsbS5tYXQ0Lm11bHRpcGx5KFxuICAgIGdsbS5tYXQ0LmNyZWF0ZSgpLFxuICAgIHByb2plY3Rpb24sXG4gICAgbW9kZWxWaWV3XG4gICk7XG4gIHJldHVybiBzY3JlZW5Ub1NjZW5lQ29vcmRpbmF0ZXNGcm9tQ29tcG9zZWQoXG4gICAgYWxsU2NyZWVuUG9zLFxuICAgIGNvbXBvc2VkTWF0cml4LFxuICAgIHZpZXdwb3J0XG4gICk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2NyZWVuVG9TY2VuZUNvb3JkaW5hdGVzRnJvbUNvbXBvc2VkID0gKFxuICBhbGxTY3JlZW5Qb3M6IGdsbS5SZWFkb25seVZlYzNbXSxcbiAgY29tcG9zZWRNYXRyaXg6IGdsbS5SZWFkb25seU1hdDQsXG4gIHZpZXdwb3J0OiBnbG0uUmVhZG9ubHlWZWM0XG4pOiBnbG0udmVjM1tdID0+IHtcbiAgY29uc3QgaW52ZXJ0ZWRDb21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCA9IGdsbS5tYXQ0LmludmVydChcbiAgICBnbG0ubWF0NC5jcmVhdGUoKSxcbiAgICBjb21wb3NlZE1hdHJpeFxuICApO1xuXG4gIHJldHVybiBzY3JlZW5Ub1NjZW5lQ29vcmRpbmF0ZXNGcm9tSW52Q29tcG9zZWQoXG4gICAgYWxsU2NyZWVuUG9zLFxuICAgIGludmVydGVkQ29tcG9zZWRNYXRyaXgsXG4gICAgdmlld3BvcnRcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzY3JlZW5Ub1NjZW5lQ29vcmRpbmF0ZXNGcm9tSW52Q29tcG9zZWQgPSAoXG4gIGFsbFNjcmVlblBvczogZ2xtLlJlYWRvbmx5VmVjM1tdLFxuICBpbnZlcnRlZENvbXBvc2VkTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQ0LFxuICB2aWV3cG9ydDogZ2xtLlJlYWRvbmx5VmVjNFxuKTogZ2xtLnZlYzNbXSA9PiB7XG4gIGNvbnN0IHJlc3VsdHM6IGdsbS52ZWMzW10gPSBbXTtcblxuICBjb25zdCBtdWx0aXBsaWVkVmVjNCA9IGdsbS52ZWM0LmNyZWF0ZSgpO1xuXG4gIGFsbFNjcmVlblBvcy5mb3JFYWNoKChzY3JlZW5Qb3MpID0+IHtcbiAgICBtdWx0aXBsaWVkVmVjNFswXSA9XG4gICAgICAoKHNjcmVlblBvc1swXSAtIHZpZXdwb3J0WzBdKSAvIHZpZXdwb3J0WzJdKSAqIDIuMCAtIDEuMDtcbiAgICBtdWx0aXBsaWVkVmVjNFsxXSA9XG4gICAgICAoKHNjcmVlblBvc1sxXSAtIHZpZXdwb3J0WzFdKSAvIHZpZXdwb3J0WzNdKSAqIDIuMCAtIDEuMDtcbiAgICBtdWx0aXBsaWVkVmVjNFsyXSA9IDIuMCAqIHNjcmVlblBvc1syXSAtIDEuMDtcbiAgICBtdWx0aXBsaWVkVmVjNFszXSA9IDEuMDtcblxuICAgIGdsbS52ZWM0LnRyYW5zZm9ybU1hdDQoXG4gICAgICBtdWx0aXBsaWVkVmVjNCxcbiAgICAgIG11bHRpcGxpZWRWZWM0LFxuICAgICAgaW52ZXJ0ZWRDb21wb3NlZE1hdHJpeFxuICAgICk7XG5cbiAgICAvL1RoZSByZXN1bHQgbm9ybWFsaXplcyBiZXR3ZWVuIC0xIGFuZCAxXG4gICAgaWYgKG11bHRpcGxpZWRWZWM0WzNdID09PSAwKSB7XG4gICAgICAvLyBUaGUgdyB2YWx1ZVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG11bHRpcGxpZWRWZWM0WzNdID0gMSAvIG11bHRpcGxpZWRWZWM0WzNdO1xuICAgIC8vIFBlcnNwZWN0aXZlIGRpdmlzaW9uXG4gICAgbXVsdGlwbGllZFZlYzRbMF0gKj0gbXVsdGlwbGllZFZlYzRbM107XG4gICAgbXVsdGlwbGllZFZlYzRbMV0gKj0gbXVsdGlwbGllZFZlYzRbM107XG4gICAgbXVsdGlwbGllZFZlYzRbMl0gKj0gbXVsdGlwbGllZFZlYzRbM107XG5cbiAgICByZXN1bHRzLnB1c2goZ2xtLnZlYzMuY29weShnbG0udmVjMy5jcmVhdGUoKSwgbXVsdGlwbGllZFZlYzQgYXMgZ2xtLnZlYzMpKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdHM7XG59O1xuIiwKICAiZXhwb3J0IGNsYXNzIFdlYkdMQ29udGV4dCB7XG4gIHByaXZhdGUgc3RhdGljIF9nbDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBfZXh0ZW5zaW9uTG9zZUNvbnRleHQ6IFdFQkdMX2xvc2VfY29udGV4dCB8IG51bGwgPSBudWxsO1xuXG4gIHN0YXRpYyBpbml0aWFsaXplKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICBjb25zdCByZW5kZXJpbmdDb250ZXh0QXR0cmliczogV2ViR0xDb250ZXh0QXR0cmlidXRlcyA9IHtcbiAgICAgIC8vIEJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIGNhbnZhcyBjb250YWlucyBhbiBhbHBoYSBidWZmZXIuXG4gICAgICBhbHBoYTogZmFsc2UsXG5cbiAgICAgIC8vIEJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgd2hldGhlciBvciBub3QgdG8gcGVyZm9ybSBhbnRpLWFsaWFzaW5nLlxuICAgICAgYW50aWFsaWFzOiBmYWxzZSxcblxuICAgICAgLy8gQm9vbGVhbiB0aGF0IGluZGljYXRlcyB0aGF0IHRoZSBkcmF3aW5nIGJ1ZmZlciBoYXMgYSBkZXB0aFxuICAgICAgLy8gYnVmZmVyIG9mIGF0IGxlYXN0IDE2IGJpdHMuXG4gICAgICBkZXB0aDogdHJ1ZSxcblxuICAgICAgLy8gQm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiBhIGNvbnRleHQgd2lsbCBiZSBjcmVhdGVkIGlmIHRoZVxuICAgICAgLy8gc3lzdGVtIHBlcmZvcm1hbmNlIGlzIGxvdy5cbiAgICAgIGZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6IGZhbHNlLFxuXG4gICAgICAvLyBBIGhpbnQgdG8gdGhlIHVzZXIgYWdlbnQgaW5kaWNhdGluZyB3aGF0IGNvbmZpZ3VyYXRpb24gb2YgR1BVIGlzXG4gICAgICAvLyBzdWl0YWJsZSBmb3IgdGhlIFdlYkdMIGNvbnRleHQuIFBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAgICAvLyBcImRlZmF1bHRcIjpcbiAgICAgIC8vICAgICBMZXQgdGhlIHVzZXIgYWdlbnQgZGVjaWRlIHdoaWNoIEdQVSBjb25maWd1cmF0aW9uIGlzIG1vc3RcbiAgICAgIC8vICAgICBzdWl0YWJsZS4gVGhpcyBpcyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgIC8vIFwiaGlnaC1wZXJmb3JtYW5jZVwiOlxuICAgICAgLy8gICAgIFByaW9yaXRpemVzIHJlbmRlcmluZyBwZXJmb3JtYW5jZSBvdmVyIHBvd2VyIGNvbnN1bXB0aW9uLlxuICAgICAgLy8gXCJsb3ctcG93ZXJcIjpcbiAgICAgIC8vICAgICBQcmlvcml0aXplcyBwb3dlciBzYXZpbmcgb3ZlciByZW5kZXJpbmcgcGVyZm9ybWFuY2UuXG4gICAgICBwb3dlclByZWZlcmVuY2U6ICdoaWdoLXBlcmZvcm1hbmNlJyxcblxuICAgICAgLy8gQm9vbGVhbiB0aGF0IGluZGljYXRlcyB0aGF0IHRoZSBwYWdlIGNvbXBvc2l0b3Igd2lsbCBhc3N1bWUgdGhlXG4gICAgICAvLyBkcmF3aW5nIGJ1ZmZlciBjb250YWlucyBjb2xvcnMgd2l0aCBwcmUtbXVsdGlwbGllZCBhbHBoYS5cbiAgICAgIHByZW11bHRpcGxpZWRBbHBoYTogdHJ1ZSwgLy8gc2xvd2VyIGZyYW1lcmF0ZSB3aGVuIGZhbHNlXG5cbiAgICAgIC8vIElmIHRoZSB2YWx1ZSBpcyB0cnVlIHRoZSBidWZmZXJzIHdpbGwgbm90IGJlIGNsZWFyZWQgYW5kIHdpbGxcbiAgICAgIC8vIHByZXNlcnZlIHRoZWlyIHZhbHVlcyB1bnRpbCBjbGVhcmVkIG9yIG92ZXJ3cml0dGVuIGJ5IHRoZSBhdXRob3IuXG4gICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IHRydWUsXG5cbiAgICAgIC8vIEJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgdGhhdCB0aGUgZHJhd2luZyBidWZmZXIgaGFzIGFcbiAgICAgIC8vIHN0ZW5jaWwgYnVmZmVyIG9mIGF0IGxlYXN0IDggYml0cy5cbiAgICAgIHN0ZW5jaWw6IGZhbHNlXG4gICAgfTtcblxuICAgIFdlYkdMQ29udGV4dC5fZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wyJywgcmVuZGVyaW5nQ29udGV4dEF0dHJpYnMpO1xuXG4gICAgaWYgKCFXZWJHTENvbnRleHQuX2dsKSB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBjcmVhdGUgd2ViZ2wgY29udGV4dCcpO1xuXG4gICAgV2ViR0xDb250ZXh0Ll9leHRlbnNpb25Mb3NlQ29udGV4dCA9XG4gICAgICBXZWJHTENvbnRleHQuX2dsLmdldEV4dGVuc2lvbignV0VCR0xfbG9zZV9jb250ZXh0Jyk7XG5cbiAgICBXZWJHTENvbnRleHQuX2dsLmdldEV4dGVuc2lvbignRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdCcpO1xuICAgIFdlYkdMQ29udGV4dC5fZ2wuZ2V0RXh0ZW5zaW9uKCdFWFRfZmxvYXRfYmxlbmQnKTtcbiAgfVxuXG4gIC8vXG4gIC8vXG4gIC8vXG5cbiAgc3RhdGljIGdldENvbnRleHQoKSB7XG4gICAgaWYgKCFXZWJHTENvbnRleHQuX2dsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dlYmdsIGNvbnRleHQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIHJldHVybiBXZWJHTENvbnRleHQuX2dsO1xuICB9XG5cbiAgLy9cbiAgLy9cbiAgLy9cblxuICBzdGF0aWMgZ2V0RXh0ZW5zaW9uTG9zZUNvbnRleHQoKSB7XG4gICAgcmV0dXJuIFdlYkdMQ29udGV4dC5fZXh0ZW5zaW9uTG9zZUNvbnRleHQ7XG4gIH1cblxuICBzdGF0aWMgZ2V0RXh0ZW5zaW9uTG9zZUNvbnRleHRTdHJpY3QoKSB7XG4gICAgaWYgKCFXZWJHTENvbnRleHQuX2V4dGVuc2lvbkxvc2VDb250ZXh0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2xvc2UgY29udGV4dCBleHRlbnNpb24gbm90IGF2YWlsYWJsZScpO1xuICAgIH1cblxuICAgIHJldHVybiBXZWJHTENvbnRleHQuX2V4dGVuc2lvbkxvc2VDb250ZXh0O1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5cbmV4cG9ydCBlbnVtIEN1YmVNYXBUeXBlIHtcbiAgcG9zaXRpdmVYLFxuICBuZWdhdGl2ZVgsXG4gIHBvc2l0aXZlWSxcbiAgbmVnYXRpdmVZLFxuICBwb3NpdGl2ZVosXG4gIG5lZ2F0aXZlWlxufVxuXG5leHBvcnQgY29uc3QgZ2V0Q3ViZU1hcFR5cGUgPSAoaW5UeXBlOiBDdWJlTWFwVHlwZSk6IG51bWJlciA9PiB7XG4gIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgc3dpdGNoIChpblR5cGUpIHtcbiAgICBjYXNlIEN1YmVNYXBUeXBlLnBvc2l0aXZlWDpcbiAgICAgIHJldHVybiBnbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1g7XG4gICAgY2FzZSBDdWJlTWFwVHlwZS5uZWdhdGl2ZVg6XG4gICAgICByZXR1cm4gZ2wuVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9YO1xuICAgIGNhc2UgQ3ViZU1hcFR5cGUucG9zaXRpdmVZOlxuICAgICAgcmV0dXJuIGdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWTtcbiAgICBjYXNlIEN1YmVNYXBUeXBlLm5lZ2F0aXZlWTpcbiAgICAgIHJldHVybiBnbC5URVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1k7XG4gICAgY2FzZSBDdWJlTWFwVHlwZS5wb3NpdGl2ZVo6XG4gICAgICByZXR1cm4gZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9aO1xuICAgIGNhc2UgQ3ViZU1hcFR5cGUubmVnYXRpdmVaOlxuICAgICAgcmV0dXJuIGdsLlRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWjtcbiAgfVxuICAvLyB0aHJvdyBuZXcgRXJyb3IoJ2N1YmUgbWFwOiBpbnZhbGlkIHR5cGUnKTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRDdWJlTWFwIHtcbiAgaW5pdGlhbGl6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQ7XG4gIHJhd0JpbmQoKTogdm9pZDtcbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZEN1YmVNYXApID0+IHZvaWQpOiB2b2lkO1xuICBnZXRSYXdPYmplY3QoKTogV2ViR0xUZXh0dXJlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCb3VuZEN1YmVNYXAge1xuICBhbGxvY2F0ZSgpOiB2b2lkO1xuICBsb2FkRnJvbU1lbW9yeShpblR5cGU6IEN1YmVNYXBUeXBlLCBpblBpeGVsczogVWludDhBcnJheSk6IHZvaWQ7XG4gIGNvbXBsZXRlKCk6IHZvaWQ7XG4gIGdldFJhd09iamVjdCgpOiBXZWJHTFRleHR1cmU7XG59XG5cbmV4cG9ydCBjbGFzcyBDdWJlTWFwIGltcGxlbWVudHMgSVVuYm91bmRDdWJlTWFwLCBJQm91bmRDdWJlTWFwIHtcbiAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbWluQnVmZmVyU2l6ZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfdGV4dHVyZTogV2ViR0xUZXh0dXJlIHwgbnVsbCA9IG51bGw7XG5cbiAgaW5pdGlhbGl6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh3aWR0aCA8IDEpIHRocm93IG5ldyBFcnJvcihgY3ViZSBtYXA6IHdpZHRoIGlzIDwgMSwgaW5wdXQ6ICR7d2lkdGh9YCk7XG4gICAgaWYgKGhlaWdodCA8IDEpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGN1YmUgbWFwOiBoZWlnaHQgaXMgPCAxLCBpbnB1dDogJHtoZWlnaHR9YCk7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIHRoaXMuX3RleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fbWluQnVmZmVyU2l6ZSA9IHRoaXMuX3dpZHRoICogdGhpcy5faGVpZ2h0ICogNDtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy5fdGV4dHVyZSk7XG4gIH1cblxuICByYXdCaW5kKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkgdGhyb3cgbmV3IEVycm9yKCdjdWJlIG1hcDogbm90IGluaXRpYWxpemVkJyk7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfQ1VCRV9NQVAsIHRoaXMuX3RleHR1cmUpO1xuICB9XG5cbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZEN1YmVNYXApID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnJhd0JpbmQoKTtcblxuICAgIGluQ2FsbGJhY2sodGhpcyk7XG5cbiAgICBDdWJlTWFwLnVuYmluZCgpO1xuICB9XG5cbiAgc3RhdGljIHVuYmluZCgpOiB2b2lkIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFX0NVQkVfTUFQLCBudWxsKTtcbiAgfVxuXG4gIGxvYWRGcm9tTWVtb3J5KGluVHlwZTogQ3ViZU1hcFR5cGUsIGluUGl4ZWxzOiBVaW50OEFycmF5KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ2N1YmUgbWFwOiBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICBpZiAoaW5QaXhlbHMubGVuZ3RoIDwgdGhpcy5fbWluQnVmZmVyU2l6ZSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYGN1YmUgbWFwOiBtaXNzLW1hdGNoaW5nIHBpeGVscyBidWZmZXIgc2l6ZSwgaW5wdXQ6ICR7aW5QaXhlbHMubGVuZ3RofWBcbiAgICAgICk7XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBjb25zdCBsZXZlbCA9IDA7XG4gICAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBnbC5SR0JBO1xuICAgIGNvbnN0IGJvcmRlciA9IDA7XG4gICAgY29uc3Qgc3JjRm9ybWF0ID0gZ2wuUkdCQTtcbiAgICBjb25zdCBzcmNUeXBlID0gZ2wuVU5TSUdORURfQllURTtcblxuICAgIGdsLnRleEltYWdlMkQoXG4gICAgICBnZXRDdWJlTWFwVHlwZShpblR5cGUpLFxuICAgICAgbGV2ZWwsXG4gICAgICBpbnRlcm5hbEZvcm1hdCxcbiAgICAgIHRoaXMuX3dpZHRoLFxuICAgICAgdGhpcy5faGVpZ2h0LFxuICAgICAgYm9yZGVyLFxuICAgICAgc3JjRm9ybWF0LFxuICAgICAgc3JjVHlwZSxcbiAgICAgIGluUGl4ZWxzXG4gICAgKTtcbiAgfVxuXG4gIGFsbG9jYXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IGdsLlJHQkE7XG4gICAgY29uc3QgYm9yZGVyID0gMDtcbiAgICBjb25zdCBzcmNGb3JtYXQgPSBnbC5SR0JBO1xuICAgIGNvbnN0IHNyY1R5cGUgPSBnbC5VTlNJR05FRF9CWVRFO1xuXG4gICAgY29uc3QgcGl4ZWxzID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fd2lkdGggKiB0aGlzLl9oZWlnaHQgKiA0KTtcblxuICAgIFtcbiAgICAgIEN1YmVNYXBUeXBlLm5lZ2F0aXZlWCxcbiAgICAgIEN1YmVNYXBUeXBlLm5lZ2F0aXZlWSxcbiAgICAgIEN1YmVNYXBUeXBlLm5lZ2F0aXZlWixcbiAgICAgIEN1YmVNYXBUeXBlLnBvc2l0aXZlWCxcbiAgICAgIEN1YmVNYXBUeXBlLnBvc2l0aXZlWSxcbiAgICAgIEN1YmVNYXBUeXBlLnBvc2l0aXZlWlxuICAgIF0uZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgZ2wudGV4SW1hZ2UyRChcbiAgICAgICAgZ2V0Q3ViZU1hcFR5cGUodHlwZSksXG4gICAgICAgIGxldmVsLFxuICAgICAgICBpbnRlcm5hbEZvcm1hdCxcbiAgICAgICAgdGhpcy5fd2lkdGgsXG4gICAgICAgIHRoaXMuX2hlaWdodCxcbiAgICAgICAgYm9yZGVyLFxuICAgICAgICBzcmNGb3JtYXQsXG4gICAgICAgIHNyY1R5cGUsXG4gICAgICAgIHBpeGVsc1xuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBsZXRlKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmdlbmVyYXRlTWlwbWFwKGdsLlRFWFRVUkVfQ1VCRV9NQVApO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoXG4gICAgICBnbC5URVhUVVJFX0NVQkVfTUFQLFxuICAgICAgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLFxuICAgICAgZ2wuTElORUFSX01JUE1BUF9MSU5FQVJcbiAgICApO1xuICB9XG5cbiAgZ2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcignY3ViZSBtYXA6IG5vdCBpbml0aWFsaXplZCcpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICB9XG5cbiAgZ2V0SGVpZ2h0KCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ2N1YmUgbWFwOiBub3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gIH1cblxuICBnZXRSYXdPYmplY3QoKSB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG5cbiAgICAvLyBUT0RPOiB0aGlzIGlzIHVnbHlcbiAgICByZXR1cm4gdGhpcy5fdGV4dHVyZTtcbiAgfVxufVxuIiwKICAiaW1wb3J0IHsgV2ViR0xDb250ZXh0IH0gZnJvbSAnLi9XZWJHTENvbnRleHQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElVbmJvdW5kRGF0YVRleHR1cmUge1xuICBpbml0aWFsaXplKGRhdGE6IG51bWJlcltdIHwgbnVtYmVyKTogdm9pZDtcbiAgcmF3QmluZCgpOiB2b2lkO1xuICBwcmVCaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmUpID0+IHZvaWQpOiB2b2lkO1xuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmUpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCb3VuZERhdGFUZXh0dXJlIGV4dGVuZHMgSVVuYm91bmREYXRhVGV4dHVyZSB7XG4gIGFsbG9jYXRlKGRhdGE6IG51bWJlcltdIHwgbnVtYmVyKTogdm9pZDtcbiAgdXBkYXRlKHN0YXJ0OiBudW1iZXIsIGRhdGE6IG51bWJlcltdKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFUZXh0dXJlIGltcGxlbWVudHMgSUJvdW5kRGF0YVRleHR1cmUge1xuICBwcml2YXRlIF90ZXh0dXJlOiBXZWJHTFRleHR1cmUgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIF9idWZmZXI6IEZsb2F0MzJBcnJheSB8IHVuZGVmaW5lZDtcblxuICAvLyBpbml0aWFsaXplKGRhdGE6IG51bWJlcltdID0gW10sIG51bUNvbXBvbmVudHM6IG51bWJlciA9IDEpIHtcbiAgaW5pdGlhbGl6ZShkYXRhOiBudW1iZXJbXSB8IG51bWJlcikge1xuICAgIGlmICh0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSBhbHJlYWR5IGluaXRpYWxpemVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgdGhpcy5fdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0ZXh0dXJlIGZhaWxlZCB0byBiZSBjcmVhdGVkJyk7XG4gICAgfVxuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fdGV4dHVyZSk7XG5cbiAgICAvLyB3ZSBkb24ndCB3YW50IGFueSBmaWx0ZXJpbmdcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuXG4gICAgLy8gdGhpcy51cGRhdGUoZGF0YSwgbnVtQ29tcG9uZW50cyk7XG4gICAgdGhpcy5hbGxvY2F0ZShkYXRhKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy5fdGV4dHVyZSk7XG4gIH1cblxuICBhbGxvY2F0ZShkYXRhOiBudW1iZXJbXSB8IG51bWJlcikge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFTaXplID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEubGVuZ3RoIDogZGF0YTtcbiAgICBpZiAoZGF0YVNpemUgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiB3aWR0aCBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuICAgIGlmIChkYXRhU2l6ZSA+IDIwNDgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgZGF0YSB0ZXh0dXJlIG1heCBzaXplIGlzIDIwNDggKGlucHV0IHdhcyAke2RhdGFTaXplfSlgKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcblxuICAgIC8vIGRvbmUgZm9yIHR5cGUgc2FmZXR5IGNvbXBsaWFuY2UgcmVhc29uc1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAvLyAtPiBuZXcgRmxvYXQzMkFycmF5KG51bWJlcltdKVxuICAgICAgdGhpcy5fYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gLT4gbmV3IEZsb2F0MzJBcnJheShudW1iZXIpXG4gICAgICB0aGlzLl9idWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgIH1cblxuICAgIC8vIC8vIGV4cGFuZCB0aGUgZGF0YSB0byA0IHZhbHVlcyBwZXIgcGl4ZWwuXG4gICAgLy8gY29uc3QgbnVtRWxlbWVudHMgPSBkYXRhLmxlbmd0aCAvIG51bUNvbXBvbmVudHM7XG4gICAgLy8gY29uc3QgZXhwYW5kZWREYXRhID0gbmV3IEZsb2F0MzJBcnJheShudW1FbGVtZW50cyAqIDQpO1xuICAgIC8vIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1FbGVtZW50czsgKytpaSkge1xuICAgIC8vICAgY29uc3Qgc3JjT2Zmc2V0ID0gaWkgKiBudW1Db21wb25lbnRzO1xuICAgIC8vICAgY29uc3QgZHN0T2Zmc2V0ID0gaWkgKiA0O1xuICAgIC8vICAgZm9yIChsZXQgamogPSAwOyBqaiA8IG51bUNvbXBvbmVudHM7ICsramopXG4gICAgLy8gICAgIGV4cGFuZGVkRGF0YVtkc3RPZmZzZXQgKyBqal0gPSBkYXRhW3NyY09mZnNldCArIGpqXTtcbiAgICAvLyB9XG5cbiAgICBjb25zdCBsZXZlbCA9IDA7XG4gICAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBnbC5SMzJGO1xuICAgIGNvbnN0IHdpZHRoID0gZGF0YVNpemU7XG4gICAgY29uc3QgaGVpZ2h0ID0gMTtcbiAgICBjb25zdCBib3JkZXIgPSAwO1xuICAgIGNvbnN0IGZvcm1hdCA9IGdsLlJFRDtcbiAgICBjb25zdCB0eXBlID0gZ2wuRkxPQVQ7XG4gICAgZ2wudGV4SW1hZ2UyRChcbiAgICAgIGdsLlRFWFRVUkVfMkQsXG4gICAgICBsZXZlbCxcbiAgICAgIGludGVybmFsRm9ybWF0LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBib3JkZXIsXG4gICAgICBmb3JtYXQsXG4gICAgICB0eXBlLFxuICAgICAgdGhpcy5fYnVmZmVyXG4gICAgKTtcbiAgfVxuXG4gIHVwZGF0ZShzdGFydDogbnVtYmVyLCBkYXRhOiBudW1iZXJbXSkge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIGlmICghdGhpcy5fYnVmZmVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSB1cGRhdGUgYnV0IG5vdCBwcmV2aW91c2x5IGFsbG9jYXRlZCcpO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgKyBkYXRhLmxlbmd0aCA+IHRoaXMuX2J1ZmZlci5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYGRhdGEgdGV4dHVyZSB1cGRhdGUgYnV0IHNpemUgaXMgbGFyZ2VyIChzdGFydDogJHtzdGFydH0sIGxlbmd0aDogJHtkYXRhLmxlbmd0aH0sIG1heDogJHt0aGlzLl9idWZmZXIubGVuZ3RofSlgXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX3RleHR1cmUpO1xuXG4gICAgLy8gdGhpcy5fYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcblxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBkYXRhLmxlbmd0aDsgKytpaSkge1xuICAgICAgdGhpcy5fYnVmZmVyW2lpXSA9IGRhdGFbaWldO1xuICAgIH1cblxuICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICAvLyBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IGdsLlIzMkY7XG4gICAgY29uc3Qgd2lkdGggPSBkYXRhLmxlbmd0aDtcbiAgICBjb25zdCBoZWlnaHQgPSAxO1xuICAgIC8vIGNvbnN0IGJvcmRlciA9IDA7XG4gICAgY29uc3QgZm9ybWF0ID0gZ2wuUkVEO1xuICAgIGNvbnN0IHR5cGUgPSBnbC5GTE9BVDtcblxuICAgIGNvbnN0IHhvZmZzZXQgPSBzdGFydDtcbiAgICBjb25zdCB5b2Zmc2V0ID0gMDsgLy8gbXVzdCBzdGF5IDBcbiAgICBjb25zdCBzcmNPZmZzZXQgPSAwO1xuXG4gICAgZ2wudGV4U3ViSW1hZ2UyRChcbiAgICAgIGdsLlRFWFRVUkVfMkQsXG4gICAgICBsZXZlbCxcbiAgICAgIHhvZmZzZXQsXG4gICAgICB5b2Zmc2V0LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBmb3JtYXQsXG4gICAgICB0eXBlLFxuICAgICAgdGhpcy5fYnVmZmVyLFxuICAgICAgc3JjT2Zmc2V0XG4gICAgKTtcbiAgfVxuXG4gIHJhd0JpbmQoKSB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcbiAgfVxuXG4gIHByZUJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmREYXRhVGV4dHVyZSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucmF3QmluZCgpO1xuICAgIGluQ2FsbGJhY2sodGhpcyk7XG4gIH1cblxuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmUpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnByZUJpbmQoaW5DYWxsYmFjayk7XG4gICAgRGF0YVRleHR1cmUudW5iaW5kKCk7XG4gIH1cblxuICBzdGF0aWMgdW5iaW5kKCk6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmREYXRhVGV4dHVyZVZlYzRmMzIge1xuICBpbml0aWFsaXplKGRhdGE/OiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdIHwgbnVtYmVyKTogdm9pZDtcbiAgcmF3QmluZCgpOiB2b2lkO1xuICBwcmVCaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmVWZWM0ZjMyKSA9PiB2b2lkKTogdm9pZDtcbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZERhdGFUZXh0dXJlVmVjNGYzMikgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJvdW5kRGF0YVRleHR1cmVWZWM0ZjMyIGV4dGVuZHMgSVVuYm91bmREYXRhVGV4dHVyZVZlYzRmMzIge1xuICBhbGxvY2F0ZShkYXRhOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdIHwgbnVtYmVyKTogdm9pZDtcbiAgdXBkYXRlKHN0YXJ0OiBudW1iZXIsIGRhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdW10pOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgRGF0YVRleHR1cmVWZWM0ZjMyIGltcGxlbWVudHMgSUJvdW5kRGF0YVRleHR1cmVWZWM0ZjMyIHtcbiAgcHJpdmF0ZSBfdGV4dHVyZTogV2ViR0xUZXh0dXJlIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBfYnVmZmVyOiBGbG9hdDMyQXJyYXkgfCB1bmRlZmluZWQ7XG5cbiAgaW5pdGlhbGl6ZShkYXRhOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdIHwgbnVtYmVyID0gMCkge1xuICAgIGlmICh0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSBhbHJlYWR5IGluaXRpYWxpemVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgdGhpcy5fdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0ZXh0dXJlIGZhaWxlZCB0byBiZSBjcmVhdGVkJyk7XG4gICAgfVxuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fdGV4dHVyZSk7XG5cbiAgICAvLyB3ZSBkb24ndCB3YW50IGFueSBmaWx0ZXJpbmdcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuXG4gICAgdGhpcy5hbGxvY2F0ZShkYXRhKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy5fdGV4dHVyZSk7XG4gIH1cblxuICBhbGxvY2F0ZShkYXRhOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdIHwgbnVtYmVyKSB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gICAgY29uc3QgZGF0YVNpemUgPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YS5sZW5ndGggOiBNYXRoLmNlaWwoZGF0YSAvIDQpO1xuICAgIGlmIChkYXRhU2l6ZSA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmU6IHdpZHRoIG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgICB9XG4gICAgaWYgKGRhdGFTaXplID4gMjA0OCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBkYXRhIHRleHR1cmUgbWF4IHNpemUgaXMgMjA0OCAoaW5wdXQgd2FzICR7ZGF0YVNpemV9KWApO1xuICAgIH1cblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX3RleHR1cmUpO1xuXG4gICAgLy8gZG9uZSBmb3IgdHlwZSBzYWZldHkgY29tcGxpYW5jZSByZWFzb25zXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgIC8vIC0+IG5ldyBGbG9hdDMyQXJyYXkobnVtYmVyW10pXG4gICAgICB0aGlzLl9idWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEuZmxhdCgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gLT4gbmV3IEZsb2F0MzJBcnJheShudW1iZXIpXG4gICAgICB0aGlzLl9idWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgIH1cblxuICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IGdsLlJHQkEzMkY7XG4gICAgY29uc3Qgd2lkdGggPSBkYXRhU2l6ZTtcbiAgICBjb25zdCBoZWlnaHQgPSAxO1xuICAgIGNvbnN0IGJvcmRlciA9IDA7XG4gICAgY29uc3QgZm9ybWF0ID0gZ2wuUkdCQTtcbiAgICBjb25zdCB0eXBlID0gZ2wuRkxPQVQ7XG4gICAgZ2wudGV4SW1hZ2UyRChcbiAgICAgIGdsLlRFWFRVUkVfMkQsXG4gICAgICBsZXZlbCxcbiAgICAgIGludGVybmFsRm9ybWF0LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBib3JkZXIsXG4gICAgICBmb3JtYXQsXG4gICAgICB0eXBlLFxuICAgICAgdGhpcy5fYnVmZmVyXG4gICAgKTtcbiAgfVxuXG4gIHVwZGF0ZShzdGFydDogbnVtYmVyLCBkYXRhOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdKSB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9idWZmZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0ZXh0dXJlIHVwZGF0ZSBidXQgbm90IHByZXZpb3VzbHkgYWxsb2NhdGVkJyk7XG4gICAgfVxuICAgIGlmIChzdGFydCArIGRhdGEubGVuZ3RoID4gdGhpcy5fYnVmZmVyLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgZGF0YSB0ZXh0dXJlIHVwZGF0ZSBidXQgc2l6ZSBpcyBsYXJnZXIgKHN0YXJ0OiAke3N0YXJ0fSwgbGVuZ3RoOiAke2RhdGEubGVuZ3RofSwgbWF4OiAke3RoaXMuX2J1ZmZlci5sZW5ndGh9KWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fdGV4dHVyZSk7XG5cbiAgICAvLyB0aGlzLl9idWZmZXIgPSBuZXcgVWludDhBcnJheShkYXRhLmZsYXQoKSk7XG5cbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgZGF0YS5sZW5ndGg7ICsraWkpIHtcbiAgICAgIHRoaXMuX2J1ZmZlcltpaSAqIDQgKyAwXSA9IGRhdGFbaWldWzBdO1xuICAgICAgdGhpcy5fYnVmZmVyW2lpICogNCArIDFdID0gZGF0YVtpaV1bMV07XG4gICAgICB0aGlzLl9idWZmZXJbaWkgKiA0ICsgMl0gPSBkYXRhW2lpXVsyXTtcbiAgICAgIHRoaXMuX2J1ZmZlcltpaSAqIDQgKyAzXSA9IGRhdGFbaWldWzNdO1xuICAgIH1cblxuICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICBjb25zdCB3aWR0aCA9IGRhdGEubGVuZ3RoO1xuICAgIGNvbnN0IGhlaWdodCA9IDE7XG4gICAgY29uc3QgZm9ybWF0ID0gZ2wuUkdCQTtcbiAgICBjb25zdCB0eXBlID0gZ2wuRkxPQVQ7XG5cbiAgICBjb25zdCB4b2Zmc2V0ID0gc3RhcnQ7XG4gICAgY29uc3QgeW9mZnNldCA9IDA7IC8vIG11c3Qgc3RheSAwXG4gICAgY29uc3Qgc3JjT2Zmc2V0ID0gMDtcblxuICAgIGdsLnRleFN1YkltYWdlMkQoXG4gICAgICBnbC5URVhUVVJFXzJELFxuICAgICAgbGV2ZWwsXG4gICAgICB4b2Zmc2V0LFxuICAgICAgeW9mZnNldCxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgZm9ybWF0LFxuICAgICAgdHlwZSxcbiAgICAgIHRoaXMuX2J1ZmZlcixcbiAgICAgIHNyY09mZnNldFxuICAgICk7XG4gIH1cblxuICByYXdCaW5kKCkge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fdGV4dHVyZSk7XG4gIH1cblxuICBwcmVCaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmVWZWM0ZjMyKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5yYXdCaW5kKCk7XG4gICAgaW5DYWxsYmFjayh0aGlzKTtcbiAgfVxuXG4gIGJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmREYXRhVGV4dHVyZVZlYzRmMzIpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnByZUJpbmQoaW5DYWxsYmFjayk7XG4gICAgRGF0YVRleHR1cmVWZWM0ZjMyLnVuYmluZCgpO1xuICB9XG5cbiAgc3RhdGljIHVuYmluZCgpOiB2b2lkIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKTtcbiAgfVxufVxuIiwKICAiaW1wb3J0IHsgV2ViR0xDb250ZXh0IH0gZnJvbSAnLi9XZWJHTENvbnRleHQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElVbmJvdW5kRGF0YVRleHR1cmVWZWM0dTgge1xuICBpbml0aWFsaXplKGRhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdW10pOiB2b2lkO1xuICByYXdCaW5kKCk6IHZvaWQ7XG4gIHByZUJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmREYXRhVGV4dHVyZVZlYzR1OCkgPT4gdm9pZCk6IHZvaWQ7XG4gIGJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmREYXRhVGV4dHVyZVZlYzR1OCkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJvdW5kRGF0YVRleHR1cmVWZWM0dTggZXh0ZW5kcyBJVW5ib3VuZERhdGFUZXh0dXJlVmVjNHU4IHtcbiAgYWxsb2NhdGUoZGF0YTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSk6IHZvaWQ7XG4gIHVwZGF0ZShzdGFydDogbnVtYmVyLCBkYXRhOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFUZXh0dXJlVmVjNHU4IGltcGxlbWVudHMgSUJvdW5kRGF0YVRleHR1cmVWZWM0dTgge1xuICBwcml2YXRlIF90ZXh0dXJlOiBXZWJHTFRleHR1cmUgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIF9idWZmZXI6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQ7XG5cbiAgaW5pdGlhbGl6ZShkYXRhOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdID0gW10pIHtcbiAgICBpZiAodGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgYWxyZWFkeSBpbml0aWFsaXplZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIHRoaXMuX3RleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSBmYWlsZWQgdG8gYmUgY3JlYXRlZCcpO1xuICAgIH1cblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX3RleHR1cmUpO1xuXG4gICAgLy8gd2UgZG9uJ3Qgd2FudCBhbnkgZmlsdGVyaW5nXG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5ORUFSRVNUKTtcblxuICAgIHRoaXMuYWxsb2NhdGUoZGF0YSk7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC5kZWxldGVUZXh0dXJlKHRoaXMuX3RleHR1cmUpO1xuICB9XG5cbiAgYWxsb2NhdGUoZGF0YTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSkge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIGlmIChkYXRhLmxlbmd0aCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmU6IHdpZHRoIG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcblxuICAgIHRoaXMuX2J1ZmZlciA9IG5ldyBVaW50OEFycmF5KGRhdGEuZmxhdCgpKTtcblxuICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IGdsLlJHQkE7XG4gICAgY29uc3Qgd2lkdGggPSBkYXRhLmxlbmd0aDtcbiAgICBjb25zdCBoZWlnaHQgPSAxO1xuICAgIGNvbnN0IGJvcmRlciA9IDA7XG4gICAgY29uc3QgZm9ybWF0ID0gZ2wuUkdCQTtcbiAgICBjb25zdCB0eXBlID0gZ2wuVU5TSUdORURfQllURTtcbiAgICBnbC50ZXhJbWFnZTJEKFxuICAgICAgZ2wuVEVYVFVSRV8yRCxcbiAgICAgIGxldmVsLFxuICAgICAgaW50ZXJuYWxGb3JtYXQsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIGJvcmRlcixcbiAgICAgIGZvcm1hdCxcbiAgICAgIHR5cGUsXG4gICAgICB0aGlzLl9idWZmZXJcbiAgICApO1xuICB9XG5cbiAgdXBkYXRlKHN0YXJ0OiBudW1iZXIsIGRhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdW10pIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0ZXh0dXJlIG5vdCBpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2J1ZmZlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgdXBkYXRlIGJ1dCBub3QgcHJldmlvdXNseSBhbGxvY2F0ZWQnKTtcbiAgICB9XG4gICAgaWYgKHN0YXJ0ICsgZGF0YS5sZW5ndGggPiB0aGlzLl9idWZmZXIubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBkYXRhIHRleHR1cmUgdXBkYXRlIGJ1dCBzaXplIGlzIGxhcmdlciAoc3RhcnQ6ICR7c3RhcnR9LCBsZW5ndGg6ICR7ZGF0YS5sZW5ndGh9LCBtYXg6ICR7dGhpcy5fYnVmZmVyLmxlbmd0aH0pYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcblxuICAgIC8vIHRoaXMuX2J1ZmZlciA9IG5ldyBVaW50OEFycmF5KGRhdGEuZmxhdCgpKTtcblxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBkYXRhLmxlbmd0aDsgKytpaSkge1xuICAgICAgdGhpcy5fYnVmZmVyW2lpICogNCArIDBdID0gZGF0YVtpaV1bMF07XG4gICAgICB0aGlzLl9idWZmZXJbaWkgKiA0ICsgMV0gPSBkYXRhW2lpXVsxXTtcbiAgICAgIHRoaXMuX2J1ZmZlcltpaSAqIDQgKyAyXSA9IGRhdGFbaWldWzJdO1xuICAgICAgdGhpcy5fYnVmZmVyW2lpICogNCArIDNdID0gZGF0YVtpaV1bM107XG4gICAgfVxuXG4gICAgY29uc3QgbGV2ZWwgPSAwO1xuICAgIGNvbnN0IHdpZHRoID0gZGF0YS5sZW5ndGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gMTtcbiAgICBjb25zdCBmb3JtYXQgPSBnbC5SR0JBO1xuICAgIGNvbnN0IHR5cGUgPSBnbC5VTlNJR05FRF9CWVRFO1xuXG4gICAgY29uc3QgeG9mZnNldCA9IHN0YXJ0O1xuICAgIGNvbnN0IHlvZmZzZXQgPSAwOyAvLyBtdXN0IHN0YXkgMFxuICAgIGNvbnN0IHNyY09mZnNldCA9IDA7XG5cbiAgICBnbC50ZXhTdWJJbWFnZTJEKFxuICAgICAgZ2wuVEVYVFVSRV8yRCxcbiAgICAgIGxldmVsLFxuICAgICAgeG9mZnNldCxcbiAgICAgIHlvZmZzZXQsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIGZvcm1hdCxcbiAgICAgIHR5cGUsXG4gICAgICB0aGlzLl9idWZmZXIsXG4gICAgICBzcmNPZmZzZXRcbiAgICApO1xuICB9XG5cbiAgcmF3QmluZCgpIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0ZXh0dXJlIG5vdCBpbml0aWFsaXplZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX3RleHR1cmUpO1xuICB9XG5cbiAgcHJlQmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZERhdGFUZXh0dXJlVmVjNHU4KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5yYXdCaW5kKCk7XG4gICAgaW5DYWxsYmFjayh0aGlzKTtcbiAgfVxuXG4gIGJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmREYXRhVGV4dHVyZVZlYzR1OCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucHJlQmluZChpbkNhbGxiYWNrKTtcbiAgICBEYXRhVGV4dHVyZVZlYzR1OC51bmJpbmQoKTtcbiAgfVxuXG4gIHN0YXRpYyB1bmJpbmQoKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG4gIH1cbn1cbiIsCiAgImltcG9ydCB7IFdlYkdMQ29udGV4dCB9IGZyb20gJy4vV2ViR0xDb250ZXh0JztcblxuZXhwb3J0IGNvbnN0IGNoZWNrRXJyb3IgPSAoKSA9PiB7XG4gIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgY29uc3QgZXJyb3JJZCA9IGdsLmdldEVycm9yKCk7XG5cbiAgc3dpdGNoIChlcnJvcklkKSB7XG4gICAgLy8gR0xfTk9fRVJST1JcbiAgICAvLyAgIE5vIGVycm9yIGhhcyBiZWVuIHJlY29yZGVkLiBUaGUgdmFsdWUgb2YgdGhpcyBzeW1ib2xpYyBjb25zdGFudCBpcyBndWFyYW50ZWVkIHRvIGJlIDAuXG4gICAgY2FzZSBnbC5JTlZBTElEX0VOVU06XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdnbC5JTlZBTElEX0VOVU1cXG5BbiB1bmFjY2VwdGFibGUgdmFsdWUgaXMgc3BlY2lmaWVkIGZvciBhbiBlbnVtZXJhdGVkIGFyZ3VtZW50LiBUaGUgb2ZmZW5kaW5nIGNvbW1hbmQgaXMgaWdub3JlZCBhbmQgaGFzIG5vIG90aGVyIHNpZGUgZWZmZWN0IHRoYW4gdG8gc2V0IHRoZSBlcnJvciBmbGFnLidcbiAgICAgICk7XG4gICAgY2FzZSBnbC5JTlZBTElEX1ZBTFVFOlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnZ2wuSU5WQUxJRF9WQUxVRVxcbkEgbnVtZXJpYyBhcmd1bWVudCBpcyBvdXQgb2YgcmFuZ2UuIFRoZSBvZmZlbmRpbmcgY29tbWFuZCBpcyBpZ25vcmVkIGFuZCBoYXMgbm8gb3RoZXIgc2lkZSBlZmZlY3QgdGhhbiB0byBzZXQgdGhlIGVycm9yIGZsYWcuJ1xuICAgICAgKTtcbiAgICBjYXNlIGdsLklOVkFMSURfT1BFUkFUSU9OOlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnZ2wuSU5WQUxJRF9PUEVSQVRJT05cXG5UaGUgc3BlY2lmaWVkIG9wZXJhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiB0aGUgY3VycmVudCBzdGF0ZS4gVGhlIG9mZmVuZGluZyBjb21tYW5kIGlzIGlnbm9yZWQgYW5kIGhhcyBubyBvdGhlciBzaWRlIGVmZmVjdCB0aGFuIHRvIHNldCB0aGUgZXJyb3IgZmxhZy4nXG4gICAgICApO1xuICAgIGNhc2UgZ2wuSU5WQUxJRF9GUkFNRUJVRkZFUl9PUEVSQVRJT046XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdnbC5JTlZBTElEX0ZSQU1FQlVGRkVSX09QRVJBVElPTlxcblRoZSBmcmFtZWJ1ZmZlciBvYmplY3QgaXMgbm90IGNvbXBsZXRlLiBUaGUgb2ZmZW5kaW5nIGNvbW1hbmQgaXMgaWdub3JlZCBhbmQgaGFzIG5vIG90aGVyIHNpZGUgZWZmZWN0IHRoYW4gdG8gc2V0IHRoZSBlcnJvciBmbGFnLidcbiAgICAgICk7XG4gICAgY2FzZSBnbC5PVVRfT0ZfTUVNT1JZOlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnZ2wuT1VUX09GX01FTU9SWVxcblRoZXJlIGlzIG5vdCBlbm91Z2ggbWVtb3J5IGxlZnQgdG8gZXhlY3V0ZSB0aGUgY29tbWFuZC4gVGhlIHN0YXRlIG9mIHRoZSBHTCBpcyB1bmRlZmluZWQsIGV4Y2VwdCBmb3IgdGhlIHN0YXRlIG9mIHRoZSBlcnJvciBmbGFncywgYWZ0ZXIgdGhpcyBlcnJvciBpcyByZWNvcmRlZC4nXG4gICAgICApO1xuICAgIGNhc2UgZ2wuQ09OVEVYVF9MT1NUX1dFQkdMOlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnZ2wuQ09OVEVYVF9MT1NUX1dFQkdMXFxuIElmIHRoZSBXZWJHTCBjb250ZXh0IGlzIGxvc3QsIHRoaXMgZXJyb3IgaXMgcmV0dXJuZWQgb24gdGhlIGZpcnN0IGNhbGwgdG8gZ2V0RXJyb3IuIEFmdGVyd2FyZHMgYW5kIHVudGlsIHRoZSBjb250ZXh0IGhhcyBiZWVuIHJlc3RvcmVkLCBpdCByZXR1cm5zIGdsLk5PX0VSUk9SLidcbiAgICAgICk7XG4gICAgLy8gY2FzZSBnbC5TVEFDS19VTkRFUkZMT1c6XG4gICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoXCJBbiBhdHRlbXB0IGhhcyBiZWVuIG1hZGUgdG8gcGVyZm9ybSBhbiBvcGVyYXRpb24gdGhhdCB3b3VsZCBjYXVzZSBhbiBpbnRlcm5hbCBzdGFjayB0byB1bmRlcmZsb3cuXCIpXG4gICAgLy8gY2FzZSBnbC5TVEFDS19PVkVSRkxPVzpcbiAgICAvLyAgIHRocm93IG5ldyBFcnJvcihcIkFuIGF0dGVtcHQgaGFzIGJlZW4gbWFkZSB0byBwZXJmb3JtIGFuIG9wZXJhdGlvbiB0aGF0IHdvdWxkIGNhdXNlIGFuIGludGVybmFsIHN0YWNrIHRvIG92ZXJmbG93LlwiKVxuICB9XG59O1xuIiwKICAiaW1wb3J0IHsgV2ViR0xDb250ZXh0IH0gZnJvbSAnLi9XZWJHTENvbnRleHQnO1xuXG5leHBvcnQgY2xhc3MgRmVuY2VTeW5jIHtcbiAgcHJpdmF0ZSBfc3luYzogV2ViR0xTeW5jIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fc3luYykge1xuICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiZmVuY2Ugbm90IHN0YXJ0ZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC5kZWxldGVTeW5jKHRoaXMuX3N5bmMpO1xuICAgIHRoaXMuX3N5bmMgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpc1N0YXJ0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3N5bmMgIT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHN0YXJ0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zeW5jKSB7XG4gICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJmZW5jZSBhbHJlYWR5IHN0YXJ0ZWRcIik7XG4gICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGNvbnN0IHRtcFN5bmMgPSBnbC5mZW5jZVN5bmMoZ2wuU1lOQ19HUFVfQ09NTUFORFNfQ09NUExFVEUsIDApO1xuICAgIGlmICh0bXBTeW5jID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBjcmVhdGUgYSB3ZWJnbCBmZW5jZScpO1xuICAgIH1cbiAgICB0aGlzLl9zeW5jID0gdG1wU3luYztcbiAgICBnbC5mbHVzaCgpO1xuICAgIGdsLmZpbmlzaCgpO1xuICB9XG5cbiAgaXNTaWduYWxlZCgpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuX3N5bmMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZmVuY2Ugbm90IHN0YXJ0ZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgY29uc3Qgc2lnbmFsZWQgPSBnbC5nZXRTeW5jUGFyYW1ldGVyKHRoaXMuX3N5bmMsIGdsLlNZTkNfU1RBVFVTKTtcbiAgICByZXR1cm4gc2lnbmFsZWQgPT09IGdsLlNJR05BTEVEO1xuICB9XG5cbiAgd2FpdCh0aW1lb3V0TmFub1NlYzogbnVtYmVyKTogJ2RvbmUnIHwgJ3RpbWVkLW91dCcge1xuICAgIGlmICghdGhpcy5fc3luYykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmZW5jZSBub3Qgc3RhcnRlZCcpO1xuICAgIH1cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBjb25zdCBiaXRmbGFncyA9IDA7XG4gICAgY29uc3Qgc3RhdHVzID0gZ2wuY2xpZW50V2FpdFN5bmModGhpcy5fc3luYywgYml0ZmxhZ3MsIHRpbWVvdXROYW5vU2VjKTtcblxuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlIGdsLlRJTUVPVVRfRVhQSVJFRDpcbiAgICAgICAgLy8gaXQncyBub3QgZG9uZSwgY2hlY2sgYWdhaW4gbmV4dCB0aW1lXG4gICAgICAgIHJldHVybiAndGltZWQtb3V0JztcbiAgICAgIGNhc2UgZ2wuV0FJVF9GQUlMRUQ6XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcignZmVuY2Uud2FpdCAtPiBzaG91bGQgbmV2ZXIgZ2V0IGhlcmUnKTtcbiAgICAgICAgY29uc29sZS53YXJuKCdmZW5jZS53YWl0IC0+IHNob3VsZCBuZXZlciBnZXQgaGVyZScpO1xuICAgICAgICAvLyByZXR1cm4gJ3RpbWVkLW91dCc7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICByZXR1cm4gJ2RvbmUnO1xuICAgICAgY2FzZSBnbC5BTFJFQURZX1NJR05BTEVEOlxuICAgICAgY2FzZSBnbC5DT05ESVRJT05fU0FUSVNGSUVEOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIHJldHVybiAnZG9uZSc7XG4gICAgfVxuICB9XG59XG4iLAogICJpbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5pbXBvcnQgeyBJQm91bmRUZXh0dXJlIH0gZnJvbSAnLi9UZXh0dXJlJztcbmltcG9ydCB7IElCb3VuZFJlbmRlckJ1ZmZlciB9IGZyb20gJy4vUmVuZGVyQnVmZmVyJztcbmltcG9ydCB7IEN1YmVNYXBUeXBlLCBJQm91bmRDdWJlTWFwLCBnZXRDdWJlTWFwVHlwZSB9IGZyb20gJy4vQ3ViZU1hcCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRGcmFtZUJ1ZmZlciB7XG4gIHJhd0JpbmQoKTogdm9pZDtcbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZEZyYW1lQnVmZmVyKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQm91bmRGcmFtZUJ1ZmZlciB7XG4gIGF0dGFjaFRleHR1cmUodGV4dHVyZTogSUJvdW5kVGV4dHVyZSk6IHZvaWQ7XG4gIGF0dGFjaERlcHRoVGV4dHVyZSh0ZXh0dXJlOiBJQm91bmRUZXh0dXJlKTogdm9pZDtcbiAgYXR0YWNoUmVuZGVyQnVmZmVyKHRleHR1cmU6IElCb3VuZFJlbmRlckJ1ZmZlcik6IHZvaWQ7XG4gIGF0dGFjaEN1YmVNYXAodGV4dHVyZTogSUJvdW5kQ3ViZU1hcCwgdHlwZTogQ3ViZU1hcFR5cGUpOiB2b2lkO1xuICBnZXRQaXhlbHMoXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlcixcbiAgICB3aWR0aDogbnVtYmVyLFxuICAgIGhlaWdodDogbnVtYmVyLFxuICAgIG91dERzdDogVWludDhBcnJheVxuICApOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgRnJhbWVCdWZmZXIgaW1wbGVtZW50cyBJVW5ib3VuZEZyYW1lQnVmZmVyLCBJQm91bmRGcmFtZUJ1ZmZlciB7XG4gIHByaXZhdGUgX2ZyYW1lQnVmZmVyOiBXZWJHTEZyYW1lYnVmZmVyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGNvbnN0IHRtcEZibyA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gICAgaWYgKHRtcEZibyA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdudWxsIGZyYW1lIGJ1ZmZlciBvYmplY3QnKTtcbiAgICB0aGlzLl9mcmFtZUJ1ZmZlciA9IHRtcEZibztcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuX2ZyYW1lQnVmZmVyKTtcbiAgfVxuXG4gIHJhd0JpbmQoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5fZnJhbWVCdWZmZXIpO1xuICB9XG5cbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZEZyYW1lQnVmZmVyKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5yYXdCaW5kKCk7XG5cbiAgICBpbkNhbGxiYWNrKHRoaXMpO1xuXG4gICAgRnJhbWVCdWZmZXIudW5iaW5kKCk7XG4gIH1cblxuICBzdGF0aWMgdW5iaW5kKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gIH1cblxuICBhdHRhY2hUZXh0dXJlKHRleHR1cmU6IElCb3VuZFRleHR1cmUpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICAvLyBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHRoaXMuX2ZyYW1lQnVmZmVyKTtcblxuICAgIC8vIHRleHR1cmUucmF3QmluZCgpO1xuXG4gICAgY29uc3QgbWlwbWFwTGV2ZWwgPSAwO1xuXG4gICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoXG4gICAgICBnbC5GUkFNRUJVRkZFUixcbiAgICAgIGdsLkNPTE9SX0FUVEFDSE1FTlQwLFxuICAgICAgZ2wuVEVYVFVSRV8yRCxcbiAgICAgIHRleHR1cmUuZ2V0UmF3T2JqZWN0KCksXG4gICAgICBtaXBtYXBMZXZlbFxuICAgICk7XG4gIH1cblxuICBhdHRhY2hEZXB0aFRleHR1cmUodGV4dHVyZTogSUJvdW5kVGV4dHVyZSkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIC8vIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5fZnJhbWVCdWZmZXIpO1xuXG4gICAgLy8gdGV4dHVyZS5yYXdCaW5kKCk7XG5cbiAgICBjb25zdCBtaXBtYXBMZXZlbCA9IDA7XG5cbiAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChcbiAgICAgIGdsLkZSQU1FQlVGRkVSLFxuICAgICAgZ2wuREVQVEhfQVRUQUNITUVOVCxcbiAgICAgIGdsLlRFWFRVUkVfMkQsXG4gICAgICB0ZXh0dXJlLmdldFJhd09iamVjdCgpLFxuICAgICAgbWlwbWFwTGV2ZWxcbiAgICApO1xuICB9XG5cbiAgYXR0YWNoUmVuZGVyQnVmZmVyKHRleHR1cmU6IElCb3VuZFJlbmRlckJ1ZmZlcik6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKFxuICAgICAgZ2wuRlJBTUVCVUZGRVIsXG4gICAgICBnbC5ERVBUSF9BVFRBQ0hNRU5ULFxuICAgICAgZ2wuUkVOREVSQlVGRkVSLFxuICAgICAgdGV4dHVyZS5nZXRSYXdPYmplY3QoKVxuICAgICk7XG4gIH1cblxuICBhdHRhY2hDdWJlTWFwKHRleHR1cmU6IElCb3VuZEN1YmVNYXAsIHR5cGU6IEN1YmVNYXBUeXBlKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgLy8gZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLl9mcmFtZUJ1ZmZlcik7XG5cbiAgICAvLyB0ZXh0dXJlLnJhd0JpbmQoKTtcblxuICAgIGNvbnN0IG1pcG1hcExldmVsID0gMDtcblxuICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKFxuICAgICAgZ2wuRlJBTUVCVUZGRVIsXG4gICAgICBnbC5DT0xPUl9BVFRBQ0hNRU5UMCxcbiAgICAgIGdldEN1YmVNYXBUeXBlKHR5cGUpLFxuICAgICAgdGV4dHVyZS5nZXRSYXdPYmplY3QoKSxcbiAgICAgIG1pcG1hcExldmVsXG4gICAgKTtcbiAgfVxuXG4gIGdldFBpeGVscyhcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyLFxuICAgIHdpZHRoOiBudW1iZXIsXG4gICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgb3V0RHN0OiBVaW50OEFycmF5XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC5yZWFkUGl4ZWxzKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG91dERzdCk7XG4gIH1cbn1cbiIsCiAgImltcG9ydCB7IFdlYkdMQ29udGV4dCB9IGZyb20gJy4vV2ViR0xDb250ZXh0JztcbmltcG9ydCB7IElVbmJvdW5kU2hhZGVyIH0gZnJvbSAnLi9TaGFkZXJQcm9ncmFtJztcblxuZXhwb3J0IGNvbnN0IEJ5dGVzUGVyUGl4ZWwgPSA0OyAvLyBmbG9hdCAoZmxvYXQzMiA9IDQgYnl0ZXMpXG5cbmV4cG9ydCBlbnVtIEF0dHJpYnV0ZVR5cGUge1xuICBmbG9hdCxcbiAgdmVjMmYsXG4gIHZlYzNmLFxuICB2ZWM0ZixcbiAgbWF0M2YsXG4gIG1hdDRmXG59XG5cbmNvbnN0IGdldEF0dHJUeXBlU2l6ZSA9IChpblR5cGU6IEF0dHJpYnV0ZVR5cGUpID0+IHtcbiAgc3dpdGNoIChpblR5cGUpIHtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUuZmxvYXQ6XG4gICAgICByZXR1cm4gMTtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjMmY6XG4gICAgICByZXR1cm4gMjtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjM2Y6XG4gICAgICByZXR1cm4gMztcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjNGY6XG4gICAgICByZXR1cm4gNDtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0M2Y6XG4gICAgICByZXR1cm4gOTtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0NGY6XG4gICAgICByZXR1cm4gMTY7XG4gIH1cbn07XG5cbmV4cG9ydCBlbnVtIFByaW1pdGl2ZVR5cGUge1xuICBsaW5lcyxcbiAgbGluZVN0cmlwLFxuICBsaW5lTG9vcCxcbiAgdHJpYW5nbGVzLFxuICB0cmlhbmdsZVN0cmlwLFxuICB0cmlhbmdsZUZhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZib0F0dHIge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IEF0dHJpYnV0ZVR5cGU7XG4gIGluZGV4OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmJvRGVmaW5pdGlvbiB7XG4gIGF0dHJzOiBWYm9BdHRyW107XG4gIHN0cmlkZT86IG51bWJlcjtcbiAgaW5zdGFuY2VkOiBib29sZWFuO1xuICBtb2RlPzogJ3N0YXRpYycgfCAnZHluYW1pYycgfCAnc3RyZWFtaW5nJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW9tZXRyeURlZmluaXRpb24ge1xuICB2Ym9zOiBWYm9EZWZpbml0aW9uW107XG4gIHByaW1pdGl2ZVR5cGU6IFByaW1pdGl2ZVR5cGU7XG59XG5cbmNvbnN0IF9lbnN1cmVGbG9hdEJ1ZmZlciA9IChcbiAgdmVydGljZXM6IFJlYWRvbmx5QXJyYXk8bnVtYmVyPiB8IFJlYWRvbmx5PEZsb2F0MzJBcnJheT5cbik6IFJlYWRvbmx5PEZsb2F0MzJBcnJheT4gPT4ge1xuICBpZiAodmVydGljZXMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHtcbiAgICByZXR1cm4gdmVydGljZXM7XG4gIH1cbiAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpO1xufTtcblxuaW50ZXJmYWNlIElWYm9EYXRhIHtcbiAgb2JqZWN0OiBXZWJHTEJ1ZmZlcjtcbiAgbWF4U2l6ZTogbnVtYmVyO1xuICBtb2RlOiAnc3RhdGljJyB8ICdkeW5hbWljJyB8ICdzdHJlYW1pbmcnO1xufVxuXG5jb25zdCBfZ2V0QnVmZmVyVXNhZ2UgPSAoaW5Nb2RlOiAnc3RhdGljJyB8ICdkeW5hbWljJyB8ICdzdHJlYW1pbmcnKSA9PiB7XG4gIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICBpZiAoaW5Nb2RlID09PSAnZHluYW1pYycpIHtcbiAgICByZXR1cm4gZ2wuRFlOQU1JQ19EUkFXO1xuICB9XG4gIGlmIChpbk1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgcmV0dXJuIGdsLlNUUkVBTV9EUkFXO1xuICB9XG4gIHJldHVybiBnbC5TVEFUSUNfRFJBVztcbn07XG5cbmV4cG9ydCBjbGFzcyBHZW9tZXRyeSB7XG4gIHByaXZhdGUgX2RlZjogR2VvbWV0cnlEZWZpbml0aW9uO1xuICBwcml2YXRlIF92YW86IFdlYkdMVmVydGV4QXJyYXlPYmplY3RPRVM7XG4gIHByaXZhdGUgX3Zib3M6IElWYm9EYXRhW107XG4gIHByaXZhdGUgX3ByaW1pdGl2ZVR5cGU6IG51bWJlcjtcbiAgcHJpdmF0ZSBfcHJpbWl0aXZlU3RhcnQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3ByaW1pdGl2ZUNvdW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9pbnN0YW5jZUNvdW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9pc0luc3RhbmNlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHNoYWRlcjogSVVuYm91bmRTaGFkZXIsIGRlZjogR2VvbWV0cnlEZWZpbml0aW9uKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgaWYgKGRlZi52Ym9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbXB0eSB2Ym8gZGVmaW5pdGlvbicpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgdmJvIG9mIGRlZi52Ym9zKSB7XG4gICAgICBpZiAodmJvLmF0dHJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VtcHR5IHZibyBhdHRyaWJ1dGUgZGVmaW5pdGlvbicpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGF0dHIgb2YgdmJvLmF0dHJzKSB7XG4gICAgICAgIGlmICghc2hhZGVyLmhhc0F0dHJpYnV0ZShhdHRyLm5hbWUpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBhdHRyaWJ1dGUgbm90IGZvdW5kLCBuYW1lPVwiJHthdHRyLm5hbWV9XCJgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2RlZiA9IGRlZjtcblxuICAgIHN3aXRjaCAoZGVmLnByaW1pdGl2ZVR5cGUpIHtcbiAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS5saW5lczpcbiAgICAgICAgdGhpcy5fcHJpbWl0aXZlVHlwZSA9IGdsLkxJTkVTO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS5saW5lU3RyaXA6XG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZVR5cGUgPSBnbC5MSU5FX1NUUklQO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS5saW5lTG9vcDpcbiAgICAgICAgdGhpcy5fcHJpbWl0aXZlVHlwZSA9IGdsLkxJTkVfTE9PUDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFByaW1pdGl2ZVR5cGUudHJpYW5nbGVzOlxuICAgICAgICB0aGlzLl9wcmltaXRpdmVUeXBlID0gZ2wuVFJJQU5HTEVTO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS50cmlhbmdsZVN0cmlwOlxuICAgICAgICB0aGlzLl9wcmltaXRpdmVUeXBlID0gZ2wuVFJJQU5HTEVfU1RSSVA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBQcmltaXRpdmVUeXBlLnRyaWFuZ2xlRmFuOlxuICAgICAgICB0aGlzLl9wcmltaXRpdmVUeXBlID0gZ2wuVFJJQU5HTEVfRkFOO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigncHJpbWl0aXZlIHR5cGUgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgbmV3VmFvID0gZ2wuY3JlYXRlVmVydGV4QXJyYXkoKTtcbiAgICBpZiAoIW5ld1Zhbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmYWlsIG8gY3JlYXRlIGEgdmFvIHVuaXQnKTtcbiAgICB9XG5cbiAgICB0aGlzLl92YW8gPSBuZXdWYW87XG4gICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuX3Zhbyk7XG5cbiAgICAvL1xuXG4gICAgdGhpcy5fdmJvcyA9IFtdO1xuICAgIGZvciAoY29uc3QgdmJvRGVmIG9mIHRoaXMuX2RlZi52Ym9zKSB7XG4gICAgICBjb25zdCBuZXdWYm8gPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgIGlmICghbmV3VmJvKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZmFpbCBvIGNyZWF0ZSBhIHZibyB1bml0Jyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3Zib3MucHVzaCh7XG4gICAgICAgIG9iamVjdDogbmV3VmJvLFxuICAgICAgICBtYXhTaXplOiAwLFxuICAgICAgICBtb2RlOiB2Ym9EZWYubW9kZSB8fCAnc3RhdGljJ1xuICAgICAgfSk7XG5cbiAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBuZXdWYm8pO1xuXG4gICAgICBsZXQgc3RyaWRlID0gdmJvRGVmLnN0cmlkZSB8fCAwO1xuICAgICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgICAgLy8gYXV0byBkZXRlcm1pbmUgc3RyaWRlIHZhbHVlXG4gICAgICAgIGZvciAoY29uc3QgYXR0ciBvZiB2Ym9EZWYuYXR0cnMpIHtcbiAgICAgICAgICBzd2l0Y2ggKGF0dHIudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBBdHRyaWJ1dGVUeXBlLmZsb2F0OlxuICAgICAgICAgICAgICBzdHJpZGUgKz0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjMmY6XG4gICAgICAgICAgICAgIHN0cmlkZSArPSAyO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlVHlwZS52ZWMzZjpcbiAgICAgICAgICAgICAgc3RyaWRlICs9IDM7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBBdHRyaWJ1dGVUeXBlLnZlYzRmOlxuICAgICAgICAgICAgICBzdHJpZGUgKz0gNDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0M2Y6XG4gICAgICAgICAgICAgIHN0cmlkZSArPSA5O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlVHlwZS5tYXQ0ZjpcbiAgICAgICAgICAgICAgc3RyaWRlICs9IDE2O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RyaWRlICo9IEJ5dGVzUGVyUGl4ZWw7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgYXR0ciBvZiB2Ym9EZWYuYXR0cnMpIHtcbiAgICAgICAgbGV0IHJvd1NpemUgPSAxO1xuICAgICAgICBsZXQgdG90YWxSb3dzID0gMTtcbiAgICAgICAgc3dpdGNoIChhdHRyLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUuZmxvYXQ6XG4gICAgICAgICAgICByb3dTaXplID0gMTtcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjMmY6XG4gICAgICAgICAgICByb3dTaXplID0gMjtcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjM2Y6XG4gICAgICAgICAgICByb3dTaXplID0gMztcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjNGY6XG4gICAgICAgICAgICByb3dTaXplID0gNDtcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0M2Y6XG4gICAgICAgICAgICByb3dTaXplID0gMztcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0NGY6XG4gICAgICAgICAgICByb3dTaXplID0gNDtcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGF0dHJMb2NhdGlvbiA9IHNoYWRlci5nZXRBdHRyaWJ1dGUoYXR0ci5uYW1lKTtcblxuICAgICAgICAvLyBUT0RPOiBjaGVjayBpZiB0aGUgaW5kZXggaXMgMCBvbiBrPjAgYW5kIGFzc2VydC90aHJvdyBvbiBpdFxuXG4gICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCB0b3RhbFJvd3M7ICsraWkpIHtcbiAgICAgICAgICBjb25zdCBhdHRySWQgPSBhdHRyTG9jYXRpb24gKyBpaTtcbiAgICAgICAgICBjb25zdCByb3dJbmRleCA9IChhdHRyLmluZGV4ICsgaWkgKiByb3dTaXplKSAqIEJ5dGVzUGVyUGl4ZWw7XG5cbiAgICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRySWQpO1xuICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoXG4gICAgICAgICAgICBhdHRySWQsXG4gICAgICAgICAgICByb3dTaXplLFxuICAgICAgICAgICAgZ2wuRkxPQVQsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIHN0cmlkZSxcbiAgICAgICAgICAgIHJvd0luZGV4XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmICh2Ym9EZWYuaW5zdGFuY2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKGF0dHJJZCwgMSk7XG4gICAgICAgICAgICB0aGlzLl9pc0luc3RhbmNlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9cblxuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheShudWxsKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZm9yIChjb25zdCB2Ym8gb2YgdGhpcy5fdmJvcykge1xuICAgICAgZ2wuZGVsZXRlQnVmZmVyKHZiby5vYmplY3QpO1xuICAgIH1cbiAgICB0aGlzLl92Ym9zLmxlbmd0aCA9IDA7XG5cbiAgICBnbC5kZWxldGVWZXJ0ZXhBcnJheSh0aGlzLl92YW8pO1xuICB9XG5cbiAgc2V0QnVmZmVyU2l6ZShpbkluZGV4OiBudW1iZXIsIGluU2l6ZTogbnVtYmVyKSB7XG4gICAgaWYgKGluSW5kZXggPCAwIHx8IGluSW5kZXggPj0gdGhpcy5fdmJvcy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgbm8gdmJvIGF2YWlsYWJsZSB0byB0aGF0IGluZGV4IChpbnB1dDogJHtpbkluZGV4fSlgKTtcbiAgICB9XG5cbiAgICBpZiAoaW5TaXplIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdmJvIG11c3QgYmUgPiAwIChpbnB1dDogJHtpblNpemV9KWApO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJWYm8gPSB0aGlzLl92Ym9zW2luSW5kZXhdO1xuXG4gICAgaWYgKGluU2l6ZSA8IGN1cnJWYm8ubWF4U2l6ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGN1cnJWYm8ubWF4U2l6ZSA9IGluU2l6ZTtcblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBjdXJyVmJvLm9iamVjdCk7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIGluU2l6ZSwgX2dldEJ1ZmZlclVzYWdlKGN1cnJWYm8ubW9kZSkpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcbiAgfVxuXG4gIHNldEZsb2F0QnVmZmVyU2l6ZShpbmRleDogbnVtYmVyLCBpblNpemU6IG51bWJlcikge1xuICAgIHRoaXMuc2V0QnVmZmVyU2l6ZShpbmRleCwgaW5TaXplICogNCk7XG4gIH1cblxuICBhbGxvY2F0ZUJ1ZmZlcihcbiAgICBpbkluZGV4OiBudW1iZXIsXG4gICAgaW5WZXJ0aWNlczogUmVhZG9ubHlBcnJheTxudW1iZXI+IHwgUmVhZG9ubHk8RmxvYXQzMkFycmF5PixcbiAgICBpblNpemU6IG51bWJlclxuICApIHtcbiAgICBpZiAoaW5JbmRleCA8IDAgfHwgaW5JbmRleCA+PSB0aGlzLl92Ym9zLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgbm8gdmJvIGF2YWlsYWJsZSB0byB0aGF0IGluZGV4IChpbnB1dDogJHtpbkluZGV4fSwgdG90YWwgdmJvczogJHt0aGlzLl92Ym9zLmxlbmd0aH0pYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoaW5TaXplIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgc2l6ZSBtdXN0IGJlID4gMCAoaW5wdXQ6ICR7aW5TaXplfSlgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyVmJvID0gdGhpcy5fdmJvc1tpbkluZGV4XTtcblxuICAgIGlmIChpblNpemUgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB2Ym8gbXVzdCBiZSA+IDAgKGlucHV0OiAke2luU2l6ZX0pYCk7XG4gICAgfVxuXG4gICAgY3VyclZiby5tYXhTaXplID0gaW5TaXplO1xuXG4gICAgY29uc3QgYnVmZmVyID0gX2Vuc3VyZUZsb2F0QnVmZmVyKGluVmVydGljZXMpO1xuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGN1cnJWYm8ub2JqZWN0KTtcbiAgICBnbC5idWZmZXJEYXRhKFxuICAgICAgZ2wuQVJSQVlfQlVGRkVSLFxuICAgICAgYnVmZmVyLFxuICAgICAgX2dldEJ1ZmZlclVzYWdlKGN1cnJWYm8ubW9kZSksXG4gICAgICAwLFxuICAgICAgaW5TaXplXG4gICAgKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XG4gIH1cblxuICB1cGRhdGVCdWZmZXIoXG4gICAgaW5JbmRleDogbnVtYmVyLFxuICAgIGluVmVydGljZXM6IFJlYWRvbmx5QXJyYXk8bnVtYmVyPiB8IFJlYWRvbmx5PEZsb2F0MzJBcnJheT4sXG4gICAgaW5TaXplOiBudW1iZXIsXG4gICAgaW5TdGFydE9mZnNldD86IG51bWJlclxuICApIHtcbiAgICBpZiAoaW5JbmRleCA8IDAgfHwgaW5JbmRleCA+PSB0aGlzLl92Ym9zLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgbm8gdmJvIGF2YWlsYWJsZSB0byB0aGF0IGluZGV4IChpbnB1dDogJHtpbkluZGV4fSwgdG90YWwgdmJvczogJHt0aGlzLl92Ym9zLmxlbmd0aH0pYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoaW5TaXplIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgc2l6ZSBtdXN0IGJlID4gMCAoaW5wdXQ6ICR7aW5TaXplfSlgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyVmJvID0gdGhpcy5fdmJvc1tpbkluZGV4XTtcblxuICAgIGlmIChpblN0YXJ0T2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChpblN0YXJ0T2Zmc2V0IDwgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9mZnNldCBtdXN0IGJlID49IDAgKGlucHV0OiAke2luU3RhcnRPZmZzZXR9KWApO1xuICAgICAgfVxuICAgICAgY29uc3QgZW5kSW5kZXggPSBpblN0YXJ0T2Zmc2V0ICsgaW5TaXplO1xuICAgICAgaWYgKGVuZEluZGV4ID4gY3VyclZiby5tYXhTaXplKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgb2Zmc2V0ICsgc2l6ZSA+IHRvIHZibyBtYXggc2l6ZSAoaW5wdXQ6ICR7ZW5kSW5kZXh9LCBtYXggc2l6ZTogJHtjdXJyVmJvLm1heFNpemV9KWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGluU2l6ZSA+IGN1cnJWYm8ubWF4U2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgc2l6ZSBtdXN0IGJlIDwgdG8gdmJvIG1heCBzaXplIChpbnB1dDogJHtpblNpemV9LCBtYXggc2l6ZTogJHtjdXJyVmJvLm1heFNpemV9KWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gX2Vuc3VyZUZsb2F0QnVmZmVyKGluVmVydGljZXMpO1xuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGN1cnJWYm8ub2JqZWN0KTtcbiAgICBnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgaW5TdGFydE9mZnNldCA/PyAwLCBidWZmZXIuc2xpY2UoMCwgaW5TaXplKSwgMCwgaW5TaXplKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMuX3ByaW1pdGl2ZUNvdW50ID09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faXNJbnN0YW5jZWQgJiYgdGhpcy5faW5zdGFuY2VDb3VudCA9PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuX3Zhbyk7XG5cbiAgICBpZiAodGhpcy5faXNJbnN0YW5jZWQgPT09IHRydWUpIHtcbiAgICAgIGdsLmRyYXdBcnJheXNJbnN0YW5jZWQoXG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZVR5cGUsXG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZVN0YXJ0LFxuICAgICAgICB0aGlzLl9wcmltaXRpdmVDb3VudCxcbiAgICAgICAgdGhpcy5faW5zdGFuY2VDb3VudFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2wuZHJhd0FycmF5cyhcbiAgICAgICAgdGhpcy5fcHJpbWl0aXZlVHlwZSxcbiAgICAgICAgdGhpcy5fcHJpbWl0aXZlU3RhcnQsXG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZUNvdW50XG4gICAgICApO1xuICAgIH1cblxuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheShudWxsKTtcbiAgfVxuXG4gIHNldFByaW1pdGl2ZVN0YXJ0KHN0YXJ0OiBudW1iZXIpIHtcbiAgICB0aGlzLl9wcmltaXRpdmVTdGFydCA9IHN0YXJ0O1xuICB9XG5cbiAgc2V0UHJpbWl0aXZlQ291bnQoY291bnQ6IG51bWJlcikge1xuICAgIHRoaXMuX3ByaW1pdGl2ZUNvdW50ID0gY291bnQ7XG4gIH1cblxuICBzZXRJbnN0YW5jZWRDb3VudChjb3VudDogbnVtYmVyKSB7XG4gICAgdGhpcy5faW5zdGFuY2VDb3VudCA9IGNvdW50O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHZW9tZXRyeUJ1aWxkZXIge1xuICBwcml2YXRlIF9kZWY6IEdlb21ldHJ5RGVmaW5pdGlvbiA9IHtcbiAgICB2Ym9zOiBbXSxcbiAgICBwcmltaXRpdmVUeXBlOiBQcmltaXRpdmVUeXBlLmxpbmVzXG4gIH07XG5cbiAgcmVzZXQoKTogdGhpcyB7XG4gICAgdGhpcy5fZGVmID0ge1xuICAgICAgdmJvczogW10sXG4gICAgICBwcmltaXRpdmVUeXBlOiBQcmltaXRpdmVUeXBlLmxpbmVzXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldERlZigpOiBHZW9tZXRyeURlZmluaXRpb24ge1xuICAgIHJldHVybiB0aGlzLl9kZWY7XG4gIH1cblxuICBzZXRQcmltaXRpdmVUeXBlKFxuICAgIGluUHJpbWl0aXZlOlxuICAgICAgfCAnbGluZXMnXG4gICAgICB8ICdsaW5lU3RyaXAnXG4gICAgICB8ICdsaW5lTG9vcCdcbiAgICAgIHwgJ3RyaWFuZ2xlcydcbiAgICAgIHwgJ3RyaWFuZ2xlU3RyaXAnXG4gICAgICB8ICd0cmlhbmdsZUZhbidcbiAgKTogdGhpcyB7XG4gICAgdGhpcy5fZGVmLnByaW1pdGl2ZVR5cGUgPSBQcmltaXRpdmVUeXBlW2luUHJpbWl0aXZlXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRWYm8oKTogdGhpcyB7XG4gICAgdGhpcy5fZGVmLnZib3MucHVzaCh7XG4gICAgICBhdHRyczogW10sXG4gICAgICAvLyBzdHJpZGU6IDAsXG4gICAgICBpbnN0YW5jZWQ6IGZhbHNlXG4gICAgICAvLyBkeW5hbWljOiBmYWxzZSxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRWYm9Bc0luc3RhbmNlZCgpOiB0aGlzIHtcbiAgICB0aGlzLl9nZXRMYXN0VmJvKCkuaW5zdGFuY2VkID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRWYm9Bc0R5bmFtaWMoKTogdGhpcyB7XG4gICAgdGhpcy5fZ2V0TGFzdFZibygpLm1vZGUgPSAnZHluYW1pYyc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc2V0VmJvQXNTdHJlYW1pbmcoKTogdGhpcyB7XG4gICAgdGhpcy5fZ2V0TGFzdFZibygpLm1vZGUgPSAnc3RyZWFtaW5nJztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRTdHJpZGUoaW5TdHJpZGU6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuX2dldExhc3RWYm8oKS5zdHJpZGUgPSBpblN0cmlkZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRWYm9BdHRyaWJ1dGUoXG4gICAgaW5OYW1lOiBzdHJpbmcsXG4gICAgaW5UeXBlOiAnZmxvYXQnIHwgJ3ZlYzJmJyB8ICd2ZWMzZicgfCAndmVjNGYnIHwgJ21hdDNmJyB8ICdtYXQ0ZidcbiAgKTogdGhpcyB7XG4gICAgY29uc3QgY3VyclZibyA9IHRoaXMuX2dldExhc3RWYm8oKTtcbiAgICBjb25zdCBsYXN0QXR0ciA9XG4gICAgICBjdXJyVmJvLmF0dHJzLmxlbmd0aCA+IDAgPyBjdXJyVmJvLmF0dHJzW2N1cnJWYm8uYXR0cnMubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgIGN1cnJWYm8uYXR0cnMucHVzaCh7XG4gICAgICBuYW1lOiBpbk5hbWUsXG4gICAgICB0eXBlOiBBdHRyaWJ1dGVUeXBlW2luVHlwZV0sXG4gICAgICBpbmRleDogbGFzdEF0dHIgPyBsYXN0QXR0ci5pbmRleCArIGdldEF0dHJUeXBlU2l6ZShsYXN0QXR0ci50eXBlKSA6IDBcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHByaXZhdGUgX2dldExhc3RWYm8oKTogVmJvRGVmaW5pdGlvbiB7XG4gICAgaWYgKHRoaXMuX2RlZi52Ym9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBWQk8gc2V0dXAnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2RlZi52Ym9zW3RoaXMuX2RlZi52Ym9zLmxlbmd0aCAtIDFdO1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRSZW5kZXJCdWZmZXIge1xuICBkaXNwb3NlKCk6IHZvaWQ7XG4gIHJhd0JpbmQoKTogdm9pZDtcbiAgcHJlQmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFJlbmRlckJ1ZmZlcikgPT4gdm9pZCk6IHZvaWQ7XG4gIGJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmRSZW5kZXJCdWZmZXIpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCb3VuZFJlbmRlckJ1ZmZlciB7XG4gIHNldFNpemUoXG4gICAgdHlwZTogJ2RlcHRoMTYnIHwgJ2RlcHRoMjQnIHwgJ2RlcHRoMzJmJyxcbiAgICB3aWR0aDogbnVtYmVyLFxuICAgIGhlaWdodDogbnVtYmVyXG4gICk6IHZvaWQ7XG4gIGdldFJhd09iamVjdCgpOiBXZWJHTFJlbmRlcmJ1ZmZlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlckJ1ZmZlciBpbXBsZW1lbnRzIElVbmJvdW5kUmVuZGVyQnVmZmVyLCBJQm91bmRSZW5kZXJCdWZmZXIge1xuICBwcml2YXRlIF9idWZmZXI6IFdlYkdMUmVuZGVyYnVmZmVyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGNvbnN0IHRtcEJ1ZiA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xuICAgIGlmICh0bXBCdWYgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbnVsbCByZW5kZXIgYnVmZmVyIG9iamVjdCcpO1xuICAgIH1cbiAgICB0aGlzLl9idWZmZXIgPSB0bXBCdWY7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5fYnVmZmVyKTtcbiAgfVxuXG4gIHJhd0JpbmQoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCB0aGlzLl9idWZmZXIpO1xuICB9XG5cbiAgcHJlQmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFJlbmRlckJ1ZmZlcikgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucmF3QmluZCgpO1xuICAgIGluQ2FsbGJhY2sodGhpcyk7XG4gIH1cblxuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kUmVuZGVyQnVmZmVyKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5wcmVCaW5kKGluQ2FsbGJhY2spO1xuICAgIFJlbmRlckJ1ZmZlci51bmJpbmQoKTtcbiAgfVxuXG4gIHN0YXRpYyB1bmJpbmQoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICB9XG5cbiAgc2V0U2l6ZShcbiAgICB0eXBlOiAnZGVwdGgxNicgfCAnZGVwdGgyNCcgfCAnZGVwdGgzMmYnLFxuICAgIHdpZHRoOiBudW1iZXIsXG4gICAgaGVpZ2h0OiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgbGV0IGludGVybmFsRm9ybWF0OiBudW1iZXIgPSBnbC5ERVBUSF9DT01QT05FTlQzMkY7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdkZXB0aDE2Jzoge1xuICAgICAgICBpbnRlcm5hbEZvcm1hdCA9IGdsLkRFUFRIX0NPTVBPTkVOVDE2O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2RlcHRoMjQnOiB7XG4gICAgICAgIGludGVybmFsRm9ybWF0ID0gZ2wuREVQVEhfQ09NUE9ORU5UMTY7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoZ2wuUkVOREVSQlVGRkVSLCBpbnRlcm5hbEZvcm1hdCwgd2lkdGgsIGhlaWdodCk7XG4gIH1cblxuICBnZXRSYXdPYmplY3QoKTogV2ViR0xSZW5kZXJidWZmZXIge1xuICAgIHJldHVybiB0aGlzLl9idWZmZXI7XG4gIH1cbn1cbiIsCiAgImltcG9ydCB7IElVbmJvdW5kVGV4dHVyZUFycmF5IH0gZnJvbSAnLi9UZXh0dXJlQXJyYXknO1xuaW1wb3J0IHsgSVVuYm91bmRDdWJlTWFwIH0gZnJvbSAnLi9DdWJlTWFwJztcbmltcG9ydCB7IElVbmJvdW5kVGV4dHVyZSB9IGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgeyBJVW5ib3VuZERhdGFUZXh0dXJlIH0gZnJvbSAnLi9EYXRhVGV4dHVyZSc7XG5pbXBvcnQgeyBJVW5ib3VuZERhdGFUZXh0dXJlVmVjNGYzMiB9IGZyb20gJy4vRGF0YVRleHR1cmVWZWM0ZjMyJztcbmltcG9ydCB7IElVbmJvdW5kRGF0YVRleHR1cmVWZWM0dTggfSBmcm9tICcuL0RhdGFUZXh0dXJlVmVjNHU4JztcbmltcG9ydCB7IFdlYkdMQ29udGV4dCB9IGZyb20gJy4vV2ViR0xDb250ZXh0JztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNoYWRlclByb2dyYW1PcHRzIHtcbiAgdmVydGV4U3JjOiBzdHJpbmc7XG4gIGZyYWdtZW50U3JjOiBzdHJpbmc7XG4gIGF0dHJpYnV0ZXM6IHN0cmluZ1tdO1xuICB1bmlmb3Jtczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRTaGFkZXIge1xuICBpc0JvdW5kKCk6IGJvb2xlYW47XG4gIGhhc0F0dHJpYnV0ZShuYW1lOiBzdHJpbmcpOiBib29sZWFuO1xuICBnZXRBdHRyaWJ1dGUobmFtZTogc3RyaW5nKTogbnVtYmVyO1xuICBnZXRVbmlmb3JtKG5hbWU6IHN0cmluZyk6IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kU2hhZGVyKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQm91bmRTaGFkZXIge1xuICBzZXRUZXh0dXJlVW5pZm9ybShcbiAgICBpbk5hbWU6IHN0cmluZyxcbiAgICBpblRleHR1cmU6XG4gICAgICB8IElVbmJvdW5kVGV4dHVyZVxuICAgICAgfCBJVW5ib3VuZFRleHR1cmVBcnJheVxuICAgICAgfCBJVW5ib3VuZEN1YmVNYXBcbiAgICAgIHwgSVVuYm91bmREYXRhVGV4dHVyZVxuICAgICAgfCBJVW5ib3VuZERhdGFUZXh0dXJlVmVjNGYzMlxuICAgICAgfCBJVW5ib3VuZERhdGFUZXh0dXJlVmVjNHU4LFxuICAgIGluSW5kZXg6IG51bWJlclxuICApOiB2b2lkO1xuICBzZXRJbnRlZ2VyMVVuaWZvcm0oaW5OYW1lOiBzdHJpbmcsIGluVmFsdWU6IG51bWJlcik6IHZvaWQ7XG4gIHNldEludGVnZXIyVW5pZm9ybShpbk5hbWU6IHN0cmluZywgaW5WYWx1ZVg6IG51bWJlciwgaW5WYWx1ZVk6IG51bWJlcik6IHZvaWQ7XG4gIHNldEludGVnZXIzVW5pZm9ybShcbiAgICBpbk5hbWU6IHN0cmluZyxcbiAgICBpblZhbHVlWDogbnVtYmVyLFxuICAgIGluVmFsdWVZOiBudW1iZXIsXG4gICAgaW5WYWx1ZVo6IG51bWJlclxuICApOiB2b2lkO1xuICBzZXRGbG9hdDFVbmlmb3JtKGluTmFtZTogc3RyaW5nLCBpblZhbHVlOiBudW1iZXIpOiB2b2lkO1xuICBzZXRGbG9hdDJVbmlmb3JtKGluTmFtZTogc3RyaW5nLCBpblZhbHVlWDogbnVtYmVyLCBpblZhbHVlWTogbnVtYmVyKTogdm9pZDtcbiAgc2V0RmxvYXQzVW5pZm9ybShcbiAgICBpbk5hbWU6IHN0cmluZyxcbiAgICBpblZhbHVlWDogbnVtYmVyLFxuICAgIGluVmFsdWVZOiBudW1iZXIsXG4gICAgaW5WYWx1ZVo6IG51bWJlclxuICApOiB2b2lkO1xuICBzZXRNYXRyaXgzVW5pZm9ybShpbk5hbWU6IHN0cmluZywgaW5NYXRyaXg6IGdsbS5SZWFkb25seU1hdDMpOiB2b2lkO1xuICBzZXRNYXRyaXg0VW5pZm9ybShpbk5hbWU6IHN0cmluZywgaW5NYXRyaXg6IGdsbS5SZWFkb25seU1hdDQpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgU2hhZGVyUHJvZ3JhbSB7XG4gIHByaXZhdGUgc3RhdGljIF9pc0JvdW5kOiBTaGFkZXJQcm9ncmFtIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xuXG4gIHByaXZhdGUgX3Byb2dyYW06IFdlYkdMUHJvZ3JhbTtcblxuICBwcml2YXRlIF9hdHRyaWJ1dGVzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgcHJpdmF0ZSBfdW5pZm9ybXMgPSBuZXcgTWFwPHN0cmluZywgV2ViR0xVbmlmb3JtTG9jYXRpb24+KCk7XG5cbiAgY29uc3RydWN0b3IoaW5OYW1lOiBzdHJpbmcsIG9wdDogSVNoYWRlclByb2dyYW1PcHRzKSB7XG4gICAgdGhpcy5fbmFtZSA9IGluTmFtZTtcblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGNvbnN0IHZlcnRleFNoYWRlciA9IHRoaXMuX2dldFNoYWRlcihvcHQudmVydGV4U3JjLCBnbC5WRVJURVhfU0hBREVSKTtcbiAgICBjb25zdCBmcmFnbWVudFNoYWRlciA9IHRoaXMuX2dldFNoYWRlcihvcHQuZnJhZ21lbnRTcmMsIGdsLkZSQUdNRU5UX1NIQURFUik7XG5cbiAgICAvL1xuXG4gICAgY29uc3QgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICBpZiAoIXByb2dyYW0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IGNyZWF0ZSBhIHNoYWRlciBwcm9ncmFtJyk7XG4gICAgfVxuXG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcbiAgICBnbC5kZWxldGVTaGFkZXIodmVydGV4U2hhZGVyKTsgLy8gZnJlZSB1cCBub3cgdW51c2VkIG1lbW9yeVxuICAgIGdsLmRlbGV0ZVNoYWRlcihmcmFnbWVudFNoYWRlcik7IC8vIGZyZWUgdXAgbm93IHVudXNlZCBtZW1vcnlcblxuICAgIGlmICghZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUykpIHtcbiAgICAgIC8vIEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGxpbmtpbmdcbiAgICAgIGNvbnN0IGxhc3RFcnJvciA9IGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdGYWlsZWQgdG8gaW5pdGlhbGl6ZWQgc2hhZGVycywgRXJyb3IgbGlua2luZzonICsgbGFzdEVycm9yXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuX3Byb2dyYW0gPSBwcm9ncmFtO1xuXG4gICAgLy8gdGhpcy5fZ2V0QXR0cmliQW5kTG9jYXRpb24ob3B0LmF0dHJpYnV0ZXMsIG9wdC51bmlmb3Jtcyk7XG5cbiAgICAvLyB0aGlzLnJhd0JpbmQoKTtcbiAgICB0aGlzLmJpbmQoKCkgPT4ge1xuICAgICAgdGhpcy5fZ2V0QXR0cmlidXRlcyhvcHQuYXR0cmlidXRlcyk7XG4gICAgICB0aGlzLl9nZXRVbmlmb3JtcyhvcHQudW5pZm9ybXMpO1xuICAgIH0pO1xuICAgIC8vIFNoYWRlclByb2dyYW0udW5iaW5kKCk7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC5kZWxldGVQcm9ncmFtKHRoaXMuX3Byb2dyYW0pO1xuICB9XG5cbiAgLy8gcmF3QmluZCgpIHtcbiAgLy8gICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgLy8gICBnbC51c2VQcm9ncmFtKHRoaXMuX3Byb2dyYW0pO1xuICAvLyB9XG5cbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFNoYWRlcikgPT4gdm9pZCkge1xuICAgIGlmIChTaGFkZXJQcm9ncmFtLl9pc0JvdW5kICE9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBEb3VibGUgc2hhZGVyIGJpbmRpbmcgKGJvdW5kOiAke1NoYWRlclByb2dyYW0uX2lzQm91bmQuX25hbWV9LCBiaW5kaW5nOiAke3RoaXMuX25hbWV9KWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgU2hhZGVyUHJvZ3JhbS5faXNCb3VuZCA9IHRoaXM7XG4gICAgLy8gdGhpcy5yYXdCaW5kKCk7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLnVzZVByb2dyYW0odGhpcy5fcHJvZ3JhbSk7XG5cbiAgICBpbkNhbGxiYWNrKHRoaXMpO1xuXG4gICAgU2hhZGVyUHJvZ3JhbS51bmJpbmQoKTtcbiAgfVxuXG4gIHN0YXRpYyB1bmJpbmQoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wudXNlUHJvZ3JhbShudWxsKTtcbiAgICBTaGFkZXJQcm9ncmFtLl9pc0JvdW5kID0gbnVsbDtcbiAgfVxuXG4gIGlzQm91bmQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFNoYWRlclByb2dyYW0uX2lzQm91bmQgPT09IHRoaXM7XG4gIH1cblxuICBoYXNBdHRyaWJ1dGUobmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuX2F0dHJpYnV0ZXMuaGFzKG5hbWUpO1xuICB9XG5cbiAgZ2V0QXR0cmlidXRlKG5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IGF0dHJpYnV0ZSA9IHRoaXMuX2F0dHJpYnV0ZXMuZ2V0KG5hbWUpO1xuICAgIGlmIChhdHRyaWJ1dGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBhdHRyaWJ1dGUgbm90IGZvdW5kOiAke25hbWV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbiAgfVxuXG4gIGdldFVuaWZvcm0obmFtZTogc3RyaW5nKSB7XG4gICAgY29uc3QgdW5pZm9ybSA9IHRoaXMuX3VuaWZvcm1zLmdldChuYW1lKTtcbiAgICBpZiAodW5pZm9ybSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHVuaWZvcm0gbm90IGZvdW5kOiAke25hbWV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuaWZvcm07XG4gIH1cblxuICBzZXRUZXh0dXJlVW5pZm9ybShcbiAgICBpbk5hbWU6IHN0cmluZyxcbiAgICBpblRleHR1cmU6XG4gICAgICB8IElVbmJvdW5kVGV4dHVyZVxuICAgICAgfCBJVW5ib3VuZFRleHR1cmVBcnJheVxuICAgICAgfCBJVW5ib3VuZEN1YmVNYXBcbiAgICAgIHwgSVVuYm91bmREYXRhVGV4dHVyZVxuICAgICAgfCBJVW5ib3VuZERhdGFUZXh0dXJlVmVjNGYzMlxuICAgICAgfCBJVW5ib3VuZERhdGFUZXh0dXJlVmVjNHU4LFxuICAgIGluSW5kZXg6IG51bWJlclxuICApIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgaW5JbmRleCk7XG4gICAgZ2wudW5pZm9ybTFpKHRoaXMuZ2V0VW5pZm9ybShpbk5hbWUpLCBpbkluZGV4KTtcbiAgICBpblRleHR1cmUucmF3QmluZCgpO1xuICB9XG5cbiAgc2V0SW50ZWdlcjFVbmlmb3JtKGluTmFtZTogc3RyaW5nLCBpblZhbHVlOiBudW1iZXIpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wudW5pZm9ybTFpKHRoaXMuZ2V0VW5pZm9ybShpbk5hbWUpLCBpblZhbHVlKTtcbiAgfVxuXG4gIHNldEludGVnZXIyVW5pZm9ybShpbk5hbWU6IHN0cmluZywgaW5WYWx1ZVg6IG51bWJlciwgaW5WYWx1ZVk6IG51bWJlcikge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC51bmlmb3JtMmkodGhpcy5nZXRVbmlmb3JtKGluTmFtZSksIGluVmFsdWVYLCBpblZhbHVlWSk7XG4gIH1cblxuICBzZXRJbnRlZ2VyM1VuaWZvcm0oXG4gICAgaW5OYW1lOiBzdHJpbmcsXG4gICAgaW5WYWx1ZVg6IG51bWJlcixcbiAgICBpblZhbHVlWTogbnVtYmVyLFxuICAgIGluVmFsdWVaOiBudW1iZXJcbiAgKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLnVuaWZvcm0zaSh0aGlzLmdldFVuaWZvcm0oaW5OYW1lKSwgaW5WYWx1ZVgsIGluVmFsdWVZLCBpblZhbHVlWik7XG4gIH1cblxuICBzZXRGbG9hdDFVbmlmb3JtKGluTmFtZTogc3RyaW5nLCBpblZhbHVlOiBudW1iZXIpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wudW5pZm9ybTFmKHRoaXMuZ2V0VW5pZm9ybShpbk5hbWUpLCBpblZhbHVlKTtcbiAgfVxuXG4gIHNldEZsb2F0MlVuaWZvcm0oaW5OYW1lOiBzdHJpbmcsIGluVmFsdWVYOiBudW1iZXIsIGluVmFsdWVZOiBudW1iZXIpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wudW5pZm9ybTJmKHRoaXMuZ2V0VW5pZm9ybShpbk5hbWUpLCBpblZhbHVlWCwgaW5WYWx1ZVkpO1xuICB9XG5cbiAgc2V0RmxvYXQzVW5pZm9ybShcbiAgICBpbk5hbWU6IHN0cmluZyxcbiAgICBpblZhbHVlWDogbnVtYmVyLFxuICAgIGluVmFsdWVZOiBudW1iZXIsXG4gICAgaW5WYWx1ZVo6IG51bWJlclxuICApIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wudW5pZm9ybTNmKHRoaXMuZ2V0VW5pZm9ybShpbk5hbWUpLCBpblZhbHVlWCwgaW5WYWx1ZVksIGluVmFsdWVaKTtcbiAgfVxuXG4gIHNldE1hdHJpeDNVbmlmb3JtKGluTmFtZTogc3RyaW5nLCBpbk1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0Myk6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC51bmlmb3JtTWF0cml4M2Z2KHRoaXMuZ2V0VW5pZm9ybShpbk5hbWUpLCBmYWxzZSwgaW5NYXRyaXggYXMgZ2xtLm1hdDMpO1xuICB9XG5cbiAgc2V0TWF0cml4NFVuaWZvcm0oaW5OYW1lOiBzdHJpbmcsIGluTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQ0KSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5nZXRVbmlmb3JtKGluTmFtZSksIGZhbHNlLCBpbk1hdHJpeCBhcyBnbG0ubWF0NCk7XG4gIH1cblxuICBwcml2YXRlIF9nZXRBdHRyaWJ1dGVzKGF0dHJpYnV0ZXM6IHN0cmluZ1tdKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyArK2lpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMuX3Byb2dyYW0sIGF0dHJpYnV0ZXNbaWldKTtcblxuICAgICAgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGF0dHJpYnV0ZSBub3QgZm91bmQgPT4gJHthdHRyaWJ1dGVzW2lpXX1gKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fYXR0cmlidXRlcy5zZXQoYXR0cmlidXRlc1tpaV0sIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9nZXRVbmlmb3Jtcyh1bmlmb3Jtczogc3RyaW5nW10pIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdW5pZm9ybXMubGVuZ3RoOyArK2lpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLl9wcm9ncmFtLCB1bmlmb3Jtc1tpaV0pO1xuXG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmlmb3JtIG5vdCBmb3VuZCA9PiAke3VuaWZvcm1zW2lpXX1gKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fdW5pZm9ybXMuc2V0KHVuaWZvcm1zW2lpXSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vXG5cbiAgcHJpdmF0ZSBfZ2V0U2hhZGVyKHNyYzogc3RyaW5nLCB0eXBlOiBudW1iZXIpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgaWYgKCFzaGFkZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IGNyZWF0ZSBhIHNoYWRlcicpO1xuICAgIH1cblxuICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNyYyk7XG4gICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuXG4gICAgaWYgKCFnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgIGxldCBlcnJvcl9zdHIgPSBnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XG4gICAgICBpZiAoIWVycm9yX3N0cikgZXJyb3Jfc3RyID0gJ2ZhaWxlZCB0byBjb21waWxlIGEgc2hhZGVyJztcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yX3N0cik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoYWRlcjtcbiAgfVxufVxuIiwKICAiaW1wb3J0IHsgV2ViR0xDb250ZXh0IH0gZnJvbSAnLi9XZWJHTENvbnRleHQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElVbmJvdW5kVGV4dHVyZSB7XG4gIGluaXRpYWxpemUoKTogdm9pZDtcbiAgcmF3QmluZCgpOiB2b2lkO1xuICBwcmVCaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kVGV4dHVyZSkgPT4gdm9pZCk6IHZvaWQ7XG4gIGJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmRUZXh0dXJlKSA9PiB2b2lkKTogdm9pZDtcbiAgZ2V0V2lkdGgoKTogbnVtYmVyO1xuICBnZXRIZWlnaHQoKTogbnVtYmVyO1xuICBnZXRSYXdPYmplY3QoKTogV2ViR0xUZXh0dXJlO1xufVxuXG5leHBvcnQgZW51bSBUZXh0dXJlRmlsdGVyIHtcbiAgcGl4ZWxhdGVkID0gMCxcbiAgbGluZWFyID0gMSxcbiAgbWlwbWFwID0gMlxufVxuXG5leHBvcnQgZW51bSBUZXh0dXJlUmVwZWF0IHtcbiAgbm9SZXBlYXQgPSAwLFxuICByZXBlYXQgPSAxXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJvdW5kVGV4dHVyZSB7XG4gIGxvYWRGcm9tSW1hZ2UoXG4gICAgaW5JbWFnZTogSFRNTEltYWdlRWxlbWVudCxcbiAgICBtb2RlPzogVGV4dHVyZUZpbHRlcixcbiAgICByZXBlYXQ/OiBUZXh0dXJlUmVwZWF0XG4gICk6IHZvaWQ7XG4gIGxvYWRGcm9tTWVtb3J5KFxuICAgIGluV2lkdGg6IG51bWJlcixcbiAgICBpbkhlaWdodDogbnVtYmVyLFxuICAgIGluUGl4ZWxzOiBVaW50OEFycmF5LFxuICAgIG1vZGU/OiBUZXh0dXJlRmlsdGVyLFxuICAgIHJlcGVhdD86IFRleHR1cmVSZXBlYXRcbiAgKTogdm9pZDtcbiAgYWxsb2NhdGUoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgbW9kZT86IFRleHR1cmVGaWx0ZXIsXG4gICAgcmVwZWF0PzogVGV4dHVyZVJlcGVhdFxuICApOiB2b2lkO1xuICBhbGxvY2F0ZURlcHRoKFxuICAgIGluV2lkdGg6IG51bWJlcixcbiAgICBpbkhlaWdodDogbnVtYmVyLFxuICAgIG1vZGU/OiBUZXh0dXJlRmlsdGVyLFxuICAgIHJlcGVhdD86IFRleHR1cmVSZXBlYXRcbiAgKTogdm9pZDtcbiAgcmVzaXplKFxuICAgIGluV2lkdGg6IG51bWJlcixcbiAgICBpbkhlaWdodDogbnVtYmVyLFxuICAgIG1vZGU/OiBUZXh0dXJlRmlsdGVyLFxuICAgIHJlcGVhdD86IFRleHR1cmVSZXBlYXRcbiAgKTogdm9pZDtcbiAgZ2V0UmF3T2JqZWN0KCk6IFdlYkdMVGV4dHVyZTtcbn1cblxuZXhwb3J0IGNsYXNzIFRleHR1cmUgaW1wbGVtZW50cyBJVW5ib3VuZFRleHR1cmUsIElCb3VuZFRleHR1cmUge1xuICBwcml2YXRlIF93aWR0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfaGVpZ2h0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF90ZXh0dXJlOiBXZWJHTFRleHR1cmUgfCBudWxsID0gbnVsbDtcblxuICBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmU6IGFscmVhZHkgaW5pdGlhbGl6ZWQnKTtcblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICB0aGlzLl90ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICB9XG5cbiAgcmF3QmluZCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcigndGV4dHVyZTogbm90IGluaXRpYWxpemVkJyk7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX3RleHR1cmUpO1xuICB9XG5cbiAgcHJlQmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFRleHR1cmUpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnJhd0JpbmQoKTtcbiAgICBpbkNhbGxiYWNrKHRoaXMpO1xuICB9XG5cbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFRleHR1cmUpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnByZUJpbmQoaW5DYWxsYmFjayk7XG4gICAgVGV4dHVyZS51bmJpbmQoKTtcbiAgfVxuXG4gIHN0YXRpYyB1bmJpbmQoKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG4gIH1cblxuICBsb2FkRnJvbUltYWdlKFxuICAgIGluSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsXG4gICAgbW9kZTogVGV4dHVyZUZpbHRlciA9IFRleHR1cmVGaWx0ZXIucGl4ZWxhdGVkLFxuICAgIHJlcGVhdDogVGV4dHVyZVJlcGVhdCA9IFRleHR1cmVSZXBlYXQubm9SZXBlYXRcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fYWxsb2NhdGUoaW5JbWFnZS53aWR0aCwgaW5JbWFnZS5oZWlnaHQsIGluSW1hZ2UsIG1vZGUsIHJlcGVhdCk7XG4gIH1cblxuICBsb2FkRnJvbU1lbW9yeShcbiAgICBpbldpZHRoOiBudW1iZXIsXG4gICAgaW5IZWlnaHQ6IG51bWJlcixcbiAgICBpblBpeGVsczogVWludDhBcnJheSxcbiAgICBtb2RlOiBUZXh0dXJlRmlsdGVyID0gVGV4dHVyZUZpbHRlci5waXhlbGF0ZWQsXG4gICAgcmVwZWF0OiBUZXh0dXJlUmVwZWF0ID0gVGV4dHVyZVJlcGVhdC5ub1JlcGVhdFxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9hbGxvY2F0ZShpbldpZHRoLCBpbkhlaWdodCwgaW5QaXhlbHMsIG1vZGUsIHJlcGVhdCk7XG4gIH1cblxuICBhbGxvY2F0ZShcbiAgICBpbldpZHRoOiBudW1iZXIsXG4gICAgaW5IZWlnaHQ6IG51bWJlcixcbiAgICBtb2RlOiBUZXh0dXJlRmlsdGVyID0gVGV4dHVyZUZpbHRlci5waXhlbGF0ZWQsXG4gICAgcmVwZWF0OiBUZXh0dXJlUmVwZWF0ID0gVGV4dHVyZVJlcGVhdC5ub1JlcGVhdFxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9hbGxvY2F0ZShpbldpZHRoLCBpbkhlaWdodCwgbnVsbCwgbW9kZSwgcmVwZWF0KTtcbiAgfVxuXG4gIGFsbG9jYXRlRGVwdGgoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgbW9kZTogVGV4dHVyZUZpbHRlciA9IFRleHR1cmVGaWx0ZXIucGl4ZWxhdGVkLFxuICAgIHJlcGVhdDogVGV4dHVyZVJlcGVhdCA9IFRleHR1cmVSZXBlYXQubm9SZXBlYXRcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fYWxsb2NhdGUoaW5XaWR0aCwgaW5IZWlnaHQsIG51bGwsIG1vZGUsIHJlcGVhdCwgdHJ1ZSk7XG4gIH1cblxuICByZXNpemUoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgbW9kZTogVGV4dHVyZUZpbHRlciA9IFRleHR1cmVGaWx0ZXIucGl4ZWxhdGVkLFxuICAgIHJlcGVhdDogVGV4dHVyZVJlcGVhdCA9IFRleHR1cmVSZXBlYXQubm9SZXBlYXRcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fYWxsb2NhdGUoaW5XaWR0aCwgaW5IZWlnaHQsIG51bGwsIG1vZGUsIHJlcGVhdCk7XG4gIH1cblxuICBwcml2YXRlIF9hbGxvY2F0ZShcbiAgICBpbldpZHRoOiBudW1iZXIsXG4gICAgaW5IZWlnaHQ6IG51bWJlcixcbiAgICBpblBpeGVsczogVWludDhBcnJheSB8IEhUTUxJbWFnZUVsZW1lbnQgfCBudWxsID0gbnVsbCxcbiAgICBtb2RlOiBUZXh0dXJlRmlsdGVyID0gVGV4dHVyZUZpbHRlci5waXhlbGF0ZWQsXG4gICAgcmVwZWF0OiBUZXh0dXJlUmVwZWF0ID0gVGV4dHVyZVJlcGVhdC5ub1JlcGVhdCxcbiAgICBpc0RlcHRoVGV4dHVyZTogYm9vbGVhbiA9IGZhbHNlXG4gICk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gICAgaWYgKGluV2lkdGggPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiB3aWR0aCBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuICAgIGlmIChpbkhlaWdodCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmU6IGhlaWdodCBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgdGhpcy5fd2lkdGggPSBpbldpZHRoO1xuICAgIHRoaXMuX2hlaWdodCA9IGluSGVpZ2h0O1xuXG4gICAgY29uc3QgbGV2ZWwgPSAwO1xuICAgIGNvbnN0IGludGVybmFsRm9ybWF0ID0gaXNEZXB0aFRleHR1cmUgPyBnbC5ERVBUSF9DT01QT05FTlQzMkYgOiBnbC5SR0JBO1xuICAgIGNvbnN0IGJvcmRlciA9IDA7XG4gICAgY29uc3Qgc3JjRm9ybWF0ID0gaXNEZXB0aFRleHR1cmUgPyBnbC5ERVBUSF9DT01QT05FTlQgOiBnbC5SR0JBO1xuICAgIGNvbnN0IHNyY1R5cGUgPSBpc0RlcHRoVGV4dHVyZSA/IGdsLkZMT0FUIDogZ2wuVU5TSUdORURfQllURTtcblxuICAgIGlmIChpblBpeGVscyBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpIHtcbiAgICAgIGdsLnRleEltYWdlMkQoXG4gICAgICAgIGdsLlRFWFRVUkVfMkQsXG4gICAgICAgIGxldmVsLFxuICAgICAgICBpbnRlcm5hbEZvcm1hdCxcbiAgICAgICAgc3JjRm9ybWF0LFxuICAgICAgICBzcmNUeXBlLFxuICAgICAgICBpblBpeGVsc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2wudGV4SW1hZ2UyRChcbiAgICAgICAgZ2wuVEVYVFVSRV8yRCxcbiAgICAgICAgbGV2ZWwsXG4gICAgICAgIGludGVybmFsRm9ybWF0LFxuICAgICAgICBpbldpZHRoLFxuICAgICAgICBpbkhlaWdodCxcbiAgICAgICAgYm9yZGVyLFxuICAgICAgICBzcmNGb3JtYXQsXG4gICAgICAgIHNyY1R5cGUsXG4gICAgICAgIGluUGl4ZWxzXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChyZXBlYXQgPT09IFRleHR1cmVSZXBlYXQubm9SZXBlYXQpIHtcbiAgICAgIC8vIHdyYXBwaW5nIHRvIGNsYW1wIHRvIGVkZ2VcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSk7XG4gICAgfSBlbHNlIGlmIChyZXBlYXQgPT09IFRleHR1cmVSZXBlYXQucmVwZWF0KSB7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5SRVBFQVQpO1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuUkVQRUFUKTtcbiAgICB9XG5cbiAgICBpZiAobW9kZSA9PT0gVGV4dHVyZUZpbHRlci5waXhlbGF0ZWQpIHtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5ORUFSRVNUKTtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5ORUFSRVNUKTtcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09IFRleHR1cmVGaWx0ZXIubGluZWFyKSB7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5MSU5FQVIpO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gVGV4dHVyZUZpbHRlci5taXBtYXApIHtcbiAgICAgIGdsLmdlbmVyYXRlTWlwbWFwKGdsLlRFWFRVUkVfMkQpO1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShcbiAgICAgICAgZ2wuVEVYVFVSRV8yRCxcbiAgICAgICAgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLFxuICAgICAgICBnbC5MSU5FQVJfTUlQTUFQX0xJTkVBUlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBnZXRXaWR0aCgpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlIG5vdCBpbml0aWFsaXplZCcpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICB9XG5cbiAgZ2V0SGVpZ2h0KCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG5cbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xuICB9XG5cbiAgZ2V0UmF3T2JqZWN0KCkge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlIG5vdCBpbml0aWFsaXplZCcpO1xuXG4gICAgLy8gVE9ETzogdGhpcyBpcyB1Z2x5XG4gICAgcmV0dXJuIHRoaXMuX3RleHR1cmU7XG4gIH1cbn1cbiIsCiAgImltcG9ydCB7IFRleHR1cmVGaWx0ZXIsIFRleHR1cmVSZXBlYXQgfSBmcm9tICcuL1RleHR1cmUnO1xuaW1wb3J0IHsgV2ViR0xDb250ZXh0IH0gZnJvbSAnLi9XZWJHTENvbnRleHQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElVbmJvdW5kVGV4dHVyZUFycmF5IHtcbiAgaW5pdGlhbGl6ZSgpOiB2b2lkO1xuICByYXdCaW5kKCk6IHZvaWQ7XG4gIHByZUJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmRUZXh0dXJlQXJyYXkpID0+IHZvaWQpOiB2b2lkO1xuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kVGV4dHVyZUFycmF5KSA9PiB2b2lkKTogdm9pZDtcbiAgZ2V0V2lkdGgoKTogbnVtYmVyO1xuICBnZXRIZWlnaHQoKTogbnVtYmVyO1xuICBnZXRSYXdPYmplY3QoKTogV2ViR0xUZXh0dXJlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCb3VuZFRleHR1cmVBcnJheSB7XG4gIGxvYWRGcm9tSW1hZ2UoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgaW5Ub3RhbExheWVyczogbnVtYmVyLFxuICAgIGluSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsXG4gICAgbW9kZT86IFRleHR1cmVGaWx0ZXIsXG4gICAgcmVwZWF0PzogVGV4dHVyZVJlcGVhdFxuICApOiB2b2lkO1xuICBsb2FkRnJvbU1lbW9yeShcbiAgICBpbldpZHRoOiBudW1iZXIsXG4gICAgaW5IZWlnaHQ6IG51bWJlcixcbiAgICBpblRvdGFsTGF5ZXJzOiBudW1iZXIsXG4gICAgaW5QaXhlbHM6IFVpbnQ4QXJyYXksXG4gICAgbW9kZT86IFRleHR1cmVGaWx0ZXIsXG4gICAgcmVwZWF0PzogVGV4dHVyZVJlcGVhdFxuICApOiB2b2lkO1xuICBnZXRSYXdPYmplY3QoKTogV2ViR0xUZXh0dXJlO1xufVxuXG5leHBvcnQgY2xhc3MgVGV4dHVyZUFycmF5IGltcGxlbWVudHMgSVVuYm91bmRUZXh0dXJlQXJyYXksIElCb3VuZFRleHR1cmVBcnJheSB7XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3RleHR1cmU6IFdlYkdMVGV4dHVyZSB8IG51bGwgPSBudWxsO1xuXG4gIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcigndGV4dHVyZTogYWxyZWFkeSBpbml0aWFsaXplZCcpO1xuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIHRoaXMuX3RleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC5kZWxldGVUZXh0dXJlKHRoaXMuX3RleHR1cmUpO1xuICB9XG5cbiAgcmF3QmluZCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcigndGV4dHVyZTogbm90IGluaXRpYWxpemVkJyk7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkRfQVJSQVksIHRoaXMuX3RleHR1cmUpO1xuICB9XG5cbiAgcHJlQmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFRleHR1cmVBcnJheSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucmF3QmluZCgpO1xuICAgIGluQ2FsbGJhY2sodGhpcyk7XG4gIH1cblxuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kVGV4dHVyZUFycmF5KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5wcmVCaW5kKGluQ2FsbGJhY2spO1xuICAgIFRleHR1cmVBcnJheS51bmJpbmQoKTtcbiAgfVxuXG4gIHN0YXRpYyB1bmJpbmQoKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRF9BUlJBWSwgbnVsbCk7XG4gIH1cblxuICBsb2FkRnJvbUltYWdlKFxuICAgIGluV2lkdGg6IG51bWJlcixcbiAgICBpbkhlaWdodDogbnVtYmVyLFxuICAgIGluVG90YWxMYXllcnM6IG51bWJlcixcbiAgICBpbkltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LFxuICAgIG1vZGU6IFRleHR1cmVGaWx0ZXIgPSBUZXh0dXJlRmlsdGVyLnBpeGVsYXRlZCxcbiAgICByZXBlYXQ6IFRleHR1cmVSZXBlYXQgPSBUZXh0dXJlUmVwZWF0Lm5vUmVwZWF0XG4gICk6IHZvaWQge1xuICAgIHRoaXMuX2FsbG9jYXRlKGluV2lkdGgsIGluSGVpZ2h0LCBpblRvdGFsTGF5ZXJzLCBpbkltYWdlLCBtb2RlLCByZXBlYXQpO1xuICB9XG5cbiAgbG9hZEZyb21NZW1vcnkoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgaW5Ub3RhbExheWVyczogbnVtYmVyLFxuICAgIGluUGl4ZWxzOiBVaW50OEFycmF5LFxuICAgIG1vZGU6IFRleHR1cmVGaWx0ZXIgPSBUZXh0dXJlRmlsdGVyLnBpeGVsYXRlZCxcbiAgICByZXBlYXQ6IFRleHR1cmVSZXBlYXQgPSBUZXh0dXJlUmVwZWF0Lm5vUmVwZWF0XG4gICk6IHZvaWQge1xuICAgIHRoaXMuX2FsbG9jYXRlKGluV2lkdGgsIGluSGVpZ2h0LCBpblRvdGFsTGF5ZXJzLCBpblBpeGVscywgbW9kZSwgcmVwZWF0KTtcbiAgfVxuXG4gIHByaXZhdGUgX2FsbG9jYXRlKFxuICAgIGluV2lkdGg6IG51bWJlcixcbiAgICBpbkhlaWdodDogbnVtYmVyLFxuICAgIGluVG90YWxMYXllcnM6IG51bWJlcixcbiAgICBpblBpeGVsczogVWludDhBcnJheSB8IEhUTUxJbWFnZUVsZW1lbnQgfCBudWxsID0gbnVsbCxcbiAgICBtb2RlOiBUZXh0dXJlRmlsdGVyID0gVGV4dHVyZUZpbHRlci5waXhlbGF0ZWQsXG4gICAgcmVwZWF0OiBUZXh0dXJlUmVwZWF0ID0gVGV4dHVyZVJlcGVhdC5ub1JlcGVhdFxuICApOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndGV4dHVyZTogbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIGlmIChpbldpZHRoIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndGV4dHVyZTogd2lkdGggbXVzdCBiZSBwb3NpdGl2ZScpO1xuICAgIH1cbiAgICBpZiAoaW5IZWlnaHQgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiBoZWlnaHQgbXVzdCBiZSBwb3NpdGl2ZScpO1xuICAgIH1cblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIHRoaXMuX3dpZHRoID0gaW5XaWR0aDtcbiAgICB0aGlzLl9oZWlnaHQgPSBpbkhlaWdodDtcblxuICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IGdsLlJHQkE7XG4gICAgY29uc3QgYm9yZGVyID0gMDtcbiAgICBjb25zdCBzcmNGb3JtYXQgPSBnbC5SR0JBO1xuICAgIGNvbnN0IHNyY1R5cGUgPSBnbC5VTlNJR05FRF9CWVRFO1xuXG4gICAgaWYgKGluUGl4ZWxzIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkge1xuICAgICAgZ2wudGV4SW1hZ2UzRChcbiAgICAgICAgZ2wuVEVYVFVSRV8yRF9BUlJBWSxcbiAgICAgICAgbGV2ZWwsXG4gICAgICAgIGludGVybmFsRm9ybWF0LFxuICAgICAgICBpbldpZHRoLFxuICAgICAgICBpbkhlaWdodCxcbiAgICAgICAgaW5Ub3RhbExheWVycyxcbiAgICAgICAgYm9yZGVyLFxuICAgICAgICBzcmNGb3JtYXQsXG4gICAgICAgIHNyY1R5cGUsXG4gICAgICAgIGluUGl4ZWxzXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBnbC50ZXhJbWFnZTNEKFxuICAgICAgICBnbC5URVhUVVJFXzJEX0FSUkFZLFxuICAgICAgICBsZXZlbCxcbiAgICAgICAgaW50ZXJuYWxGb3JtYXQsXG4gICAgICAgIGluV2lkdGgsXG4gICAgICAgIGluSGVpZ2h0LFxuICAgICAgICBpblRvdGFsTGF5ZXJzLFxuICAgICAgICBib3JkZXIsXG4gICAgICAgIHNyY0Zvcm1hdCxcbiAgICAgICAgc3JjVHlwZSxcbiAgICAgICAgaW5QaXhlbHNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlcGVhdCA9PT0gVGV4dHVyZVJlcGVhdC5ub1JlcGVhdCkge1xuICAgICAgLy8gd3JhcHBpbmcgdG8gY2xhbXAgdG8gZWRnZVxuICAgICAgZ2wudGV4UGFyYW1ldGVyaShcbiAgICAgICAgZ2wuVEVYVFVSRV8yRF9BUlJBWSxcbiAgICAgICAgZ2wuVEVYVFVSRV9XUkFQX1MsXG4gICAgICAgIGdsLkNMQU1QX1RPX0VER0VcbiAgICAgICk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKFxuICAgICAgICBnbC5URVhUVVJFXzJEX0FSUkFZLFxuICAgICAgICBnbC5URVhUVVJFX1dSQVBfVCxcbiAgICAgICAgZ2wuQ0xBTVBfVE9fRURHRVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHJlcGVhdCA9PT0gVGV4dHVyZVJlcGVhdC5yZXBlYXQpIHtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRF9BUlJBWSwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLlJFUEVBVCk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkRfQVJSQVksIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5SRVBFQVQpO1xuICAgIH1cblxuICAgIGlmIChtb2RlID09PSBUZXh0dXJlRmlsdGVyLnBpeGVsYXRlZCkge1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJEX0FSUkFZLCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJEX0FSUkFZLCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gVGV4dHVyZUZpbHRlci5saW5lYXIpIHtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRF9BUlJBWSwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJEX0FSUkFZLCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLkxJTkVBUik7XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSBUZXh0dXJlRmlsdGVyLm1pcG1hcCkge1xuICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAoZ2wuVEVYVFVSRV8yRF9BUlJBWSk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkRfQVJSQVksIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKFxuICAgICAgICBnbC5URVhUVVJFXzJEX0FSUkFZLFxuICAgICAgICBnbC5URVhUVVJFX01JTl9GSUxURVIsXG4gICAgICAgIGdsLkxJTkVBUl9NSVBNQVBfTElORUFSXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGdldFdpZHRoKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG5cbiAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gIH1cblxuICBnZXRIZWlnaHQoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcigndGV4dHVyZSBub3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gIH1cblxuICBnZXRSYXdPYmplY3QoKSB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG5cbiAgICAvLyBUT0RPOiB0aGlzIGlzIHVnbHlcbiAgICByZXR1cm4gdGhpcy5fdGV4dHVyZTtcbiAgfVxufVxuIiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxudW5pZm9ybSBtYXQ0IHVfY29tcG9zZWRNYXRyaXg7XG5cbmluIHZlYzMgYV92ZXJ0ZXhfcG9zaXRpb247XG5pbiB2ZWMzIGFfdmVydGV4X25vcm1hbDtcblxuaW4gdmVjMyBhX29mZnNldF9jZW50ZXI7XG5pbiB2ZWM0IGFfb2Zmc2V0X29yaWVudGF0aW9uO1xuaW4gdmVjMyBhX29mZnNldF9jb2xvcjtcbmluIHZlYzMgYV9vZmZzZXRfc2NhbGU7XG5cbmZsYXQgb3V0IHZlYzQgdl9jb2xvcjtcbm91dCB2ZWMzIHZfd29ybGRTcGFjZVBvc2l0aW9uO1xub3V0IHZlYzMgdl93b3JsZFNwYWNlTm9ybWFsO1xuXG5cbnZlYzMgYXBwbHlfcXVhdF90b192ZWMzKHZlYzMgcG9zaXRpb24sIHZlYzQgcSlcbntcbiAgdmVjMyB2ID0gcG9zaXRpb24ueHl6O1xuICByZXR1cm4gdiArIDIuMCAqIGNyb3NzKHEueHl6LCBjcm9zcyhxLnh5eiwgdikgKyBxLncgKiB2KTtcbn1cblxudm9pZCBtYWluKHZvaWQpXG57XG5cdHZlYzMgd29ybGRTcGFjZVBvc2l0aW9uID0gYV9vZmZzZXRfY2VudGVyICsgYXBwbHlfcXVhdF90b192ZWMzKGFfdmVydGV4X3Bvc2l0aW9uICogYV9vZmZzZXRfc2NhbGUsIGFfb2Zmc2V0X29yaWVudGF0aW9uKTtcblx0dmVjMyB3b3JsZFNwYWNlTm9ybWFsID0gYXBwbHlfcXVhdF90b192ZWMzKGFfdmVydGV4X25vcm1hbCwgYV9vZmZzZXRfb3JpZW50YXRpb24pO1xuXG4gIGdsX1Bvc2l0aW9uID0gdV9jb21wb3NlZE1hdHJpeCAqIHZlYzQod29ybGRTcGFjZVBvc2l0aW9uLCAxLjApO1xuXG4gIHZfY29sb3IgPSB2ZWM0KGFfb2Zmc2V0X2NvbG9yLCAxLjApO1xuICB2X3dvcmxkU3BhY2VQb3NpdGlvbiA9IHdvcmxkU3BhY2VQb3NpdGlvbjtcbiAgdl93b3JsZFNwYWNlTm9ybWFsID0gd29ybGRTcGFjZU5vcm1hbDtcbn1cbmAudHJpbSgpOyIsCiAgImV4cG9ydCBkZWZhdWx0IGBcbiN2ZXJzaW9uIDMwMCBlc1xuXG5wcmVjaXNpb24gbG93cCBmbG9hdDtcblxudW5pZm9ybSB2ZWMzIHVfbGlnaHRQb3M7XG5cbmZsYXQgaW4gdmVjNCB2X2NvbG9yO1xuaW4gdmVjMyB2X3dvcmxkU3BhY2VQb3NpdGlvbjtcbmluIHZlYzMgdl93b3JsZFNwYWNlTm9ybWFsO1xuXG5vdXQgdmVjNCBvX2NvbG9yO1xuXG4vL1xuLy9cbi8vXG5cbmNvbnN0IGZsb2F0IGtfYW1iaWFudENvZWYgPSAwLjE7XG5cbmNvbnN0IHZlYzMga19zcGVjQ29sb3IgPSB2ZWMzKDEuMCwgMS4wLCAxLjApO1xuXG52ZWMzIF9nZXRMaWdodENvbG9yKHZlYzQgY3VycmVudENvbG9yKVxue1xuICB2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSh2X3dvcmxkU3BhY2VOb3JtYWwpO1xuICB2ZWMzIGxpZ2h0RGlyID0gbm9ybWFsaXplKHVfbGlnaHRQb3MgLSB2X3dvcmxkU3BhY2VQb3NpdGlvbik7XG5cbiAgZmxvYXQgZGlmZnVzZUNvZWYgPSBtYXgoZG90KGxpZ2h0RGlyLCB2X3dvcmxkU3BhY2VOb3JtYWwueHl6KSwgMC4wKTtcbiAgZmxvYXQgc3BlY3VsYXJDb2VmID0gMC4wO1xuXG4gIC8vIGlmIChkaWZmdXNlQ29lZiA+IDAuMCAmJiB2X3NraXBTcGVjdWxhciA8IDAuNSlcbiAgLy8ge1xuICAvLyAgIC8vIHNwZWN1bGFyXG5cbiAgLy8gICB2ZWMzIHJlZmxlY3REaXIgPSByZWZsZWN0KC1saWdodERpciwgbm9ybWFsKTtcbiAgLy8gICB2ZWMzIHZpZXdEaXIgPSBub3JtYWxpemUodV9saWdodFBvcyAtIHZfd29ybGRTcGFjZVBvc2l0aW9uKTtcblxuICAvLyAgIGZsb2F0IHNwZWNBbmdsZSA9IG1heChkb3QocmVmbGVjdERpciwgdmlld0RpciksIDAuMCk7XG4gIC8vICAgc3BlY3VsYXJDb2VmID0gcG93KHNwZWNBbmdsZSwgMzIuMCk7XG4gIC8vIH1cblxuICB2ZWMzIGRpZmZ1c2VDb2xvciA9IGN1cnJlbnRDb2xvci5yZ2IgKiAoa19hbWJpYW50Q29lZiArIGRpZmZ1c2VDb2VmKTtcbiAgdmVjMyBzcGVjdWxhckNvbG9yID0ga19zcGVjQ29sb3IgKiBzcGVjdWxhckNvZWYgKiBjdXJyZW50Q29sb3IuYTtcblxuICByZXR1cm4gZGlmZnVzZUNvbG9yICsgc3BlY3VsYXJDb2xvcjtcbn1cblxuLy9cbi8vXG4vL1xuXG52b2lkIG1haW4odm9pZClcbntcbiAgb19jb2xvciA9IHZlYzQoX2dldExpZ2h0Q29sb3Iodl9jb2xvciksIDEuMCk7XG59XG5gLnRyaW0oKTsiLAogICJpbXBvcnQgKiBhcyB3ZWJnbDIgZnJvbSAnLi4vLi4vLi4vZ3JhcGhpY3Mvd2ViZ2wyJztcbmltcG9ydCB7IElDYW1lcmEgfSBmcm9tICcuLi8uLi8uLi9ncmFwaGljcy9jYW1lcmEnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgc3RhY2tSZW5kZXJlclZlcnRleCBmcm9tICcuL3NoYWRlcnMvZ2VvbWV0cnktcmVuZGVyZXIuZ2xzbC52ZXJ0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBzdGFja1JlbmRlcmVyRnJhZ21lbnQgZnJvbSAnLi9zaGFkZXJzL2dlb21ldHJ5LXJlbmRlcmVyLmdsc2wuZnJhZyc7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5jb25zdCBrX2J1ZmZlclNpemUgPSAxNCAqIDEwMjQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVZlcnRleCB7XG4gIHBvczogZ2xtLnZlYzM7XG4gIG5vcm1hbDogZ2xtLnZlYzM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUdlb21ldHJ5UmVuZGVyZXIge1xuICBwdXNoKFxuICAgIGluUG9pbnRBOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUXVhdDogZ2xtLlJlYWRvbmx5UXVhdCxcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2NhbGU6IGdsbS5SZWFkb25seVZlYzNcbiAgKTogdm9pZDtcbiAgZmx1c2goaW5DYW1lcmE6IElDYW1lcmEpOiB2b2lkO1xuICBjbGVhcigpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgR2VvbWV0cnlSZW5kZXJlciBpbXBsZW1lbnRzIElHZW9tZXRyeVJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfc2hhZGVyOiB3ZWJnbDIuSVVuYm91bmRTaGFkZXI7XG4gIHByaXZhdGUgX2dlb21ldHJ5OiB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5O1xuXG4gIHByaXZhdGUgX2J1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoa19idWZmZXJTaXplKTtcbiAgcHJpdmF0ZSBfY3VycmVudFNpemU6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2hhZGVyID0gbmV3IHdlYmdsMi5TaGFkZXJQcm9ncmFtKCdHZW9tZXRyeVJlbmRlcmVyJywge1xuICAgICAgdmVydGV4U3JjOiBzdGFja1JlbmRlcmVyVmVydGV4LFxuICAgICAgZnJhZ21lbnRTcmM6IHN0YWNrUmVuZGVyZXJGcmFnbWVudCxcbiAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgJ2FfdmVydGV4X3Bvc2l0aW9uJyxcbiAgICAgICAgJ2FfdmVydGV4X25vcm1hbCcsXG4gICAgICAgICdhX29mZnNldF9jZW50ZXInLFxuICAgICAgICAnYV9vZmZzZXRfb3JpZW50YXRpb24nLFxuICAgICAgICAnYV9vZmZzZXRfY29sb3InLFxuICAgICAgICAnYV9vZmZzZXRfc2NhbGUnXG4gICAgICBdLFxuICAgICAgdW5pZm9ybXM6IFsndV9jb21wb3NlZE1hdHJpeCcsICd1X2xpZ2h0UG9zJ11cbiAgICB9KTtcblxuICAgIGNvbnN0IGdlb0J1aWxkZXIgPSBuZXcgd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeUJ1aWxkZXIoKTtcbiAgICBnZW9CdWlsZGVyXG4gICAgICAucmVzZXQoKVxuICAgICAgLnNldFByaW1pdGl2ZVR5cGUoJ3RyaWFuZ2xlcycpXG4gICAgICAuYWRkVmJvKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X3Bvc2l0aW9uJywgJ3ZlYzNmJylcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X25vcm1hbCcsICd2ZWMzZicpXG4gICAgICAvLyAuc2V0U3RyaWRlKDMgKiA0ICogNilcbiAgICAgIC5hZGRWYm8oKVxuICAgICAgLnNldFZib0FzU3RyZWFtaW5nKClcbiAgICAgIC5zZXRWYm9Bc0luc3RhbmNlZCgpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX29mZnNldF9jZW50ZXInLCAndmVjM2YnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfb3JpZW50YXRpb24nLCAndmVjNGYnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfY29sb3InLCAndmVjM2YnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfc2NhbGUnLCAndmVjM2YnKTtcblxuICAgIHRoaXMuX2dlb21ldHJ5ID0gbmV3IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnkoXG4gICAgICB0aGlzLl9zaGFkZXIsXG4gICAgICBnZW9CdWlsZGVyLmdldERlZigpXG4gICAgKTtcbiAgICB0aGlzLl9nZW9tZXRyeS5zZXRGbG9hdEJ1ZmZlclNpemUoMSwga19idWZmZXJTaXplKTtcbiAgfVxuXG4gIHNldEdlb21ldHJ5VmVydGljZXModmVydGljZXM6IElWZXJ0ZXhbXSkge1xuICAgIGNvbnN0IGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgLi4udmVydGljZXMubWFwKCh2YWwpID0+IFsuLi52YWwucG9zLCAuLi52YWwubm9ybWFsXSkuZmxhdCgpXG4gICAgXSk7XG4gICAgLy8gY29uc3QgYnVmID0gbmV3IEZsb2F0MzJBcnJheShbLi4udmVydGljZXMubWFwKHZhbCA9PiBbLi4udmFsLnBvc10pLmZsYXQoKV0pO1xuICAgIHRoaXMuX2dlb21ldHJ5LmFsbG9jYXRlQnVmZmVyKDAsIGJ1ZiwgYnVmLmxlbmd0aCk7XG4gICAgdGhpcy5fZ2VvbWV0cnkuc2V0UHJpbWl0aXZlQ291bnQoYnVmLmxlbmd0aCAvIDYpO1xuICB9XG5cbiAgcHVzaChcbiAgICBpblBvaW50QTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblF1YXQ6IGdsbS5SZWFkb25seVF1YXQsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNjYWxlOiBnbG0uUmVhZG9ubHlWZWMzXG4gICkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50U2l6ZSArIDEzID49IHRoaXMuX2J1ZmZlci5sZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLl9zaGFkZXIuaXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuX2ZsdXNoKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Qb2ludEFbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Qb2ludEFbMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Qb2ludEFbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5RdWF0WzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluUXVhdFsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblF1YXRbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5RdWF0WzNdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluQ29sb3JbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Db2xvclsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpbkNvbG9yWzJdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluU2NhbGVbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5TY2FsZVsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblNjYWxlWzJdO1xuICAgIC8vIHRoaXMuX2N1cnJlbnRTaXplICs9IDY7XG4gIH1cblxuICBmbHVzaChpbkNhbWVyYTogSUNhbWVyYSkge1xuICAgIGlmICghdGhpcy5jYW5SZW5kZXIoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NoYWRlci5iaW5kKChib3VuZCkgPT4ge1xuICAgICAgYm91bmQuc2V0TWF0cml4NFVuaWZvcm0oJ3VfY29tcG9zZWRNYXRyaXgnLCBpbkNhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpKTtcbiAgICAgIGNvbnN0IGV5ZVBvcyA9IGluQ2FtZXJhLmdldEV5ZSgpO1xuICAgICAgYm91bmQuc2V0RmxvYXQzVW5pZm9ybSgndV9saWdodFBvcycsIGV5ZVBvc1swXSwgZXllUG9zWzFdLCBleWVQb3NbMl0pO1xuXG4gICAgICB0aGlzLl9mbHVzaCgpO1xuICAgIH0pO1xuICB9XG5cbiAgc2FmZVJlbmRlcihpbkNhbWVyYTogSUNhbWVyYSwgaW5DYWxsYmFjazogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMuX3NoYWRlci5iaW5kKChib3VuZCkgPT4ge1xuICAgICAgYm91bmQuc2V0TWF0cml4NFVuaWZvcm0oJ3VfY29tcG9zZWRNYXRyaXgnLCBpbkNhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpKTtcbiAgICAgIGNvbnN0IGV5ZVBvcyA9IGluQ2FtZXJhLmdldEV5ZSgpO1xuICAgICAgYm91bmQuc2V0RmxvYXQzVW5pZm9ybSgndV9saWdodFBvcycsIGV5ZVBvc1swXSwgZXllUG9zWzFdLCBleWVQb3NbMl0pO1xuXG4gICAgICBpbkNhbGxiYWNrKCk7XG5cbiAgICAgIHRoaXMuX2ZsdXNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9mbHVzaCgpIHtcbiAgICB0aGlzLl9nZW9tZXRyeS51cGRhdGVCdWZmZXIoMSwgdGhpcy5fYnVmZmVyLCB0aGlzLl9jdXJyZW50U2l6ZSwgMCk7XG4gICAgdGhpcy5fZ2VvbWV0cnkuc2V0SW5zdGFuY2VkQ291bnQodGhpcy5fY3VycmVudFNpemUgLyAxMyk7XG5cbiAgICB0aGlzLl9nZW9tZXRyeS5yZW5kZXIoKTtcblxuICAgIHRoaXMuY2xlYXIoKTtcbiAgfVxuXG4gIGNhblJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFNpemUgPiAwO1xuICB9XG5cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fY3VycmVudFNpemUgPSAwO1xuICB9XG59XG4iLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG51bmlmb3JtIG1hdDQgdV9jb21wb3NlZE1hdHJpeDtcblxuaW4gdmVjMyBhX3ZlcnRleF9wb3NpdGlvbjtcblxuaW4gdmVjMyBhX29mZnNldF9jZW50ZXI7XG5pbiB2ZWM0IGFfb2Zmc2V0X29yaWVudGF0aW9uO1xuaW4gdmVjMyBhX29mZnNldF9jb2xvcjtcbmluIHZlYzMgYV9vZmZzZXRfc2NhbGU7XG5cbmZsYXQgb3V0IHZlYzQgdl9jb2xvcjtcblxudmVjMyBhcHBseV9xdWF0X3RvX3ZlYzModmVjMyBwb3NpdGlvbiwgdmVjNCBxKVxue1xuICB2ZWMzIHYgPSBwb3NpdGlvbi54eXo7XG4gIHJldHVybiB2ICsgMi4wICogY3Jvc3MocS54eXosIGNyb3NzKHEueHl6LCB2KSArIHEudyAqIHYpO1xufVxuXG52b2lkIG1haW4odm9pZClcbntcblx0dmVjMyB3b3JsZFNwYWNlUG9zaXRpb24gPSBhX29mZnNldF9jZW50ZXIgKyBhcHBseV9xdWF0X3RvX3ZlYzMoYV92ZXJ0ZXhfcG9zaXRpb24gKiBhX29mZnNldF9zY2FsZSwgYV9vZmZzZXRfb3JpZW50YXRpb24pO1xuXG4gIGdsX1Bvc2l0aW9uID0gdV9jb21wb3NlZE1hdHJpeCAqIHZlYzQod29ybGRTcGFjZVBvc2l0aW9uLCAxLjApO1xuXG4gIHZfY29sb3IgPSB2ZWM0KGFfb2Zmc2V0X2NvbG9yLCAxLjApO1xufVxuYC50cmltKCk7IiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBsb3dwIGZsb2F0O1xuXG5mbGF0IGluIHZlYzQgdl9jb2xvcjtcblxub3V0IHZlYzQgb19jb2xvcjtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIG9fY29sb3IgPSB2ZWM0KHZfY29sb3IucmJnLCAxLjApO1xufVxuYC50cmltKCk7IiwKICAiaW1wb3J0ICogYXMgd2ViZ2wyIGZyb20gJy4uLy4uLy4uL2dyYXBoaWNzL3dlYmdsMic7XG5pbXBvcnQgeyBJQ2FtZXJhIH0gZnJvbSAnLi4vLi4vLi4vZ3JhcGhpY3MvY2FtZXJhJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHN0YWNrUmVuZGVyZXJWZXJ0ZXggZnJvbSAnLi9zaGFkZXJzL2dlb21ldHJ5LXJlbmRlcmVyLWZsYXQuZ2xzbC52ZXJ0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBzdGFja1JlbmRlcmVyRnJhZ21lbnQgZnJvbSAnLi9zaGFkZXJzL2dlb21ldHJ5LXJlbmRlcmVyLWZsYXQuZ2xzbC5mcmFnJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmNvbnN0IGtfYnVmZmVyU2l6ZSA9IDE0ICogMTAyNDtcblxuZXhwb3J0IGludGVyZmFjZSBJRmxhdFZlcnRleCB7XG4gIHBvczogZ2xtLnZlYzM7XG4gIC8vIG5vcm1hbDogZ2xtLnZlYzM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUdlb21ldHJ5UmVuZGVyZXJGbGF0IHtcbiAgcHVzaChcbiAgICBpblBvaW50QTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblF1YXQ6IGdsbS5SZWFkb25seVF1YXQsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNjYWxlOiBnbG0uUmVhZG9ubHlWZWMzXG4gICk6IHZvaWQ7XG4gIGZsdXNoKGluQ2FtZXJhOiBJQ2FtZXJhKTogdm9pZDtcbiAgY2xlYXIoKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIEdlb21ldHJ5UmVuZGVyZXJGbGF0IGltcGxlbWVudHMgSUdlb21ldHJ5UmVuZGVyZXJGbGF0IHtcbiAgcHJpdmF0ZSBfc2hhZGVyOiB3ZWJnbDIuSVVuYm91bmRTaGFkZXI7XG4gIHByaXZhdGUgX2dlb21ldHJ5OiB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5O1xuXG4gIHByaXZhdGUgX2J1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoa19idWZmZXJTaXplKTtcbiAgcHJpdmF0ZSBfY3VycmVudFNpemU6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2hhZGVyID0gbmV3IHdlYmdsMi5TaGFkZXJQcm9ncmFtKCdHZW9tZXRyeVJlbmRlcmVyRmxhdCcsIHtcbiAgICAgIHZlcnRleFNyYzogc3RhY2tSZW5kZXJlclZlcnRleCxcbiAgICAgIGZyYWdtZW50U3JjOiBzdGFja1JlbmRlcmVyRnJhZ21lbnQsXG4gICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICdhX3ZlcnRleF9wb3NpdGlvbicsXG4gICAgICAgIC8vICdhX3ZlcnRleF9ub3JtYWwnLFxuICAgICAgICAnYV9vZmZzZXRfY2VudGVyJyxcbiAgICAgICAgJ2Ffb2Zmc2V0X29yaWVudGF0aW9uJyxcbiAgICAgICAgJ2Ffb2Zmc2V0X2NvbG9yJyxcbiAgICAgICAgJ2Ffb2Zmc2V0X3NjYWxlJ1xuICAgICAgXSxcbiAgICAgIHVuaWZvcm1zOiBbXG4gICAgICAgICd1X2NvbXBvc2VkTWF0cml4J1xuICAgICAgICAvLyAndV9saWdodFBvcydcbiAgICAgIF1cbiAgICB9KTtcblxuICAgIGNvbnN0IGdlb0J1aWxkZXIgPSBuZXcgd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeUJ1aWxkZXIoKTtcbiAgICBnZW9CdWlsZGVyXG4gICAgICAucmVzZXQoKVxuICAgICAgLnNldFByaW1pdGl2ZVR5cGUoJ3RyaWFuZ2xlcycpXG4gICAgICAuYWRkVmJvKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X3Bvc2l0aW9uJywgJ3ZlYzNmJylcbiAgICAgIC8vIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X25vcm1hbCcsICd2ZWMzZicpXG4gICAgICAvLyAuc2V0U3RyaWRlKDMgKiA0ICogNilcbiAgICAgIC5hZGRWYm8oKVxuICAgICAgLnNldFZib0FzU3RyZWFtaW5nKClcbiAgICAgIC5zZXRWYm9Bc0luc3RhbmNlZCgpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX29mZnNldF9jZW50ZXInLCAndmVjM2YnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfb3JpZW50YXRpb24nLCAndmVjNGYnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfY29sb3InLCAndmVjM2YnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfc2NhbGUnLCAndmVjM2YnKTtcblxuICAgIHRoaXMuX2dlb21ldHJ5ID0gbmV3IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnkoXG4gICAgICB0aGlzLl9zaGFkZXIsXG4gICAgICBnZW9CdWlsZGVyLmdldERlZigpXG4gICAgKTtcbiAgICB0aGlzLl9nZW9tZXRyeS5zZXRGbG9hdEJ1ZmZlclNpemUoMSwga19idWZmZXJTaXplKTtcbiAgfVxuXG4gIHNldEdlb21ldHJ5VmVydGljZXModmVydGljZXM6IElGbGF0VmVydGV4W10pIHtcbiAgICBjb25zdCBidWYgPSBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgIC8vIC4uLnZlcnRpY2VzLm1hcCgodmFsKSA9PiBbLi4udmFsLnBvcywgLi4udmFsLm5vcm1hbF0pLmZsYXQoKVxuICAgICAgLi4udmVydGljZXMubWFwKCh2YWwpID0+IFsuLi52YWwucG9zXSkuZmxhdCgpXG4gICAgXSk7XG4gICAgLy8gY29uc3QgYnVmID0gbmV3IEZsb2F0MzJBcnJheShbLi4udmVydGljZXMubWFwKHZhbCA9PiBbLi4udmFsLnBvc10pLmZsYXQoKV0pO1xuICAgIHRoaXMuX2dlb21ldHJ5LmFsbG9jYXRlQnVmZmVyKDAsIGJ1ZiwgYnVmLmxlbmd0aCk7XG4gICAgdGhpcy5fZ2VvbWV0cnkuc2V0UHJpbWl0aXZlQ291bnQoYnVmLmxlbmd0aCAvIDMpO1xuICB9XG5cbiAgcHVzaChcbiAgICBpblBvaW50QTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblF1YXQ6IGdsbS5SZWFkb25seVF1YXQsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNjYWxlOiBnbG0uUmVhZG9ubHlWZWMzXG4gICkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50U2l6ZSArIDEzID49IHRoaXMuX2J1ZmZlci5sZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLl9zaGFkZXIuaXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuX2ZsdXNoKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Qb2ludEFbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Qb2ludEFbMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Qb2ludEFbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5RdWF0WzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluUXVhdFsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblF1YXRbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5RdWF0WzNdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluQ29sb3JbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Db2xvclsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpbkNvbG9yWzJdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluU2NhbGVbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5TY2FsZVsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblNjYWxlWzJdO1xuICAgIC8vIHRoaXMuX2N1cnJlbnRTaXplICs9IDY7XG4gIH1cblxuICBmbHVzaChpbkNhbWVyYTogSUNhbWVyYSkge1xuICAgIGlmICghdGhpcy5jYW5SZW5kZXIoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NoYWRlci5iaW5kKChib3VuZCkgPT4ge1xuICAgICAgYm91bmQuc2V0TWF0cml4NFVuaWZvcm0oJ3VfY29tcG9zZWRNYXRyaXgnLCBpbkNhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpKTtcbiAgICAgIC8vIGNvbnN0IGV5ZVBvcyA9IGluQ2FtZXJhLmdldEV5ZSgpO1xuICAgICAgLy8gYm91bmQuc2V0RmxvYXQzVW5pZm9ybSgndV9saWdodFBvcycsIGV5ZVBvc1swXSwgZXllUG9zWzFdLCBleWVQb3NbMl0pO1xuXG4gICAgICB0aGlzLl9mbHVzaCgpO1xuICAgIH0pO1xuICB9XG5cbiAgc2FmZVJlbmRlcihpbkNhbWVyYTogSUNhbWVyYSwgaW5DYWxsYmFjazogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMuX3NoYWRlci5iaW5kKChib3VuZCkgPT4ge1xuICAgICAgYm91bmQuc2V0TWF0cml4NFVuaWZvcm0oJ3VfY29tcG9zZWRNYXRyaXgnLCBpbkNhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpKTtcbiAgICAgIC8vIGNvbnN0IGV5ZVBvcyA9IGluQ2FtZXJhLmdldEV5ZSgpO1xuICAgICAgLy8gYm91bmQuc2V0RmxvYXQzVW5pZm9ybSgndV9saWdodFBvcycsIGV5ZVBvc1swXSwgZXllUG9zWzFdLCBleWVQb3NbMl0pO1xuXG4gICAgICBpbkNhbGxiYWNrKCk7XG5cbiAgICAgIHRoaXMuX2ZsdXNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9mbHVzaCgpIHtcbiAgICB0aGlzLl9nZW9tZXRyeS51cGRhdGVCdWZmZXIoMSwgdGhpcy5fYnVmZmVyLCB0aGlzLl9jdXJyZW50U2l6ZSwgMCk7XG4gICAgdGhpcy5fZ2VvbWV0cnkuc2V0SW5zdGFuY2VkQ291bnQodGhpcy5fY3VycmVudFNpemUgLyAxMyk7XG5cbiAgICB0aGlzLl9nZW9tZXRyeS5yZW5kZXIoKTtcblxuICAgIHRoaXMuY2xlYXIoKTtcbiAgfVxuXG4gIGNhblJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFNpemUgPiAwO1xuICB9XG5cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fY3VycmVudFNpemUgPSAwO1xuICB9XG59XG4iLAogICJpbXBvcnQgKiBhcyB3ZWJnbDIgZnJvbSAnLi4vLi4vLi4vd2ViZ2wyJztcblxuZXhwb3J0IGNsYXNzIFNjZW5lQ2FwdHVyZXIge1xuICBwcml2YXRlIF93aWR0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfaGVpZ2h0OiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgX2ZyYW1lQnVmZmVyOiB3ZWJnbDIuSVVuYm91bmRGcmFtZUJ1ZmZlciA9IG5ldyB3ZWJnbDIuRnJhbWVCdWZmZXIoKTtcbiAgcHJpdmF0ZSBfcmVuZGVyQnVmZmVyOiB3ZWJnbDIuSVVuYm91bmRSZW5kZXJCdWZmZXIgPVxuICAgIG5ldyB3ZWJnbDIuUmVuZGVyQnVmZmVyKCk7XG4gIHByaXZhdGUgX2NvbG9yVGV4dHVyZXM6IHdlYmdsMi5JVW5ib3VuZFRleHR1cmVbXSA9IFtdO1xuICBwcml2YXRlIF9jdXJyZW50SW5kZXg6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLl9jb2xvclRleHR1cmVzLnB1c2gobmV3IHdlYmdsMi5UZXh0dXJlKCkpO1xuICAgIHRoaXMuX2NvbG9yVGV4dHVyZXMucHVzaChuZXcgd2ViZ2wyLlRleHR1cmUoKSk7XG4gICAgdGhpcy5fY29sb3JUZXh0dXJlcy5mb3JFYWNoKCh0ZXh0dXJlKSA9PiB0ZXh0dXJlLmluaXRpYWxpemUoKSk7XG5cbiAgICB0aGlzLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgfVxuXG4gIHJlc2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgdGhpcy5fcmVuZGVyQnVmZmVyLmJpbmQoKGJvdW5kQnVmZmVyKSA9PiB7XG4gICAgICBib3VuZEJ1ZmZlci5zZXRTaXplKCdkZXB0aDMyZicsIHRoaXMuX3dpZHRoLCB0aGlzLl9oZWlnaHQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY29sb3JUZXh0dXJlcy5mb3JFYWNoKCh0ZXh0dXJlKSA9PiB7XG4gICAgICB0ZXh0dXJlLmJpbmQoKGJvdW5kVGV4dHVyZSkgPT4ge1xuICAgICAgICBib3VuZFRleHR1cmUuYWxsb2NhdGUodGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmJpbmQoKGJvdW5kRnJhbWVCdWZmZXIpID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlckJ1ZmZlci5iaW5kKChib3VuZEJ1ZmZlcikgPT4ge1xuICAgICAgICBib3VuZEZyYW1lQnVmZmVyLmF0dGFjaFJlbmRlckJ1ZmZlcihib3VuZEJ1ZmZlcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNhcHR1cmVTY2VuZShyZW5kZXJDYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmJpbmQoKGJvdW5kRnJhbWVCdWZmZXIpID0+IHtcbiAgICAgIHRoaXMuX2NvbG9yVGV4dHVyZXNbdGhpcy5fY3VycmVudEluZGV4XS5iaW5kKChib3VuZFRleHR1cmUpID0+IHtcbiAgICAgICAgYm91bmRGcmFtZUJ1ZmZlci5hdHRhY2hUZXh0dXJlKGJvdW5kVGV4dHVyZSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZ2wgPSB3ZWJnbDIuV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIHRoaXMuX3dpZHRoLCB0aGlzLl9oZWlnaHQpO1xuICAgICAgZ2wuY2xlYXJDb2xvcigwLCAwLCAwLCAwKTtcblxuICAgICAgcmVuZGVyQ2FsbGJhY2soKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2N1cnJlbnRJbmRleCA9ICh0aGlzLl9jdXJyZW50SW5kZXggKyAxKSAlIHRoaXMuX2NvbG9yVGV4dHVyZXMubGVuZ3RoO1xuICB9XG5cbiAgZ2V0IGNvbG9yVGV4dHVyZSgpOiB3ZWJnbDIuSVVuYm91bmRUZXh0dXJlIHtcbiAgICByZXR1cm4gdGhpcy5fY29sb3JUZXh0dXJlc1t0aGlzLl9jdXJyZW50SW5kZXhdO1xuICB9XG59XG4iLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG51bmlmb3JtIG1hdDQgdV9jb21wb3NlZE1hdHJpeDtcblxuaW4gdmVjMyAgYV92ZXJ0ZXhfcG9zaXRpb247XG5pbiB2ZWMyICBhX3ZlcnRleF90ZXhDb29yZDtcblxub3V0IHZlYzIgdl90ZXhDb29yZDtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIHZfdGV4Q29vcmQgPSBhX3ZlcnRleF90ZXhDb29yZDtcbiAgZ2xfUG9zaXRpb24gPSB1X2NvbXBvc2VkTWF0cml4ICogdmVjNChhX3ZlcnRleF9wb3NpdGlvbiwgMS4wKTtcbn1cblxuYC50cmltKCk7IiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxudW5pZm9ybSBzYW1wbGVyMkQgdV90ZXh0dXJlO1xuXG5pbiB2ZWMyIHZfdGV4Q29vcmQ7XG5cbm91dCB2ZWM0IG9fY29sb3I7XG5cbnZvaWQgbWFpbih2b2lkKVxue1xuICBvX2NvbG9yID0gdGV4dHVyZSh1X3RleHR1cmUsIHZfdGV4Q29vcmQpO1xufVxuYC50cmltKCk7IiwKICAiaW1wb3J0ICogYXMgd2ViZ2wyIGZyb20gJy4uLy4uLy4uL3dlYmdsMic7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB2ZXJ0ZXhTaGFkZXIgZnJvbSAnLi9zaGFkZXJzL2h1ZC10ZXh0dXJlLXJlbmRlcmVyLmdsc2wudmVydCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgZnJhZ21lbnRTaGFkZXIgZnJvbSAnLi9zaGFkZXJzL2h1ZC10ZXh0dXJlLXJlbmRlcmVyLmdsc2wuZnJhZyc7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVySHVkVGV4dHVyZSB7XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBfc2hhZGVyOiB3ZWJnbDIuU2hhZGVyUHJvZ3JhbTtcbiAgcHJpdmF0ZSBfZ2VvbWV0cnk6IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnk7XG5cbiAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLl9zaGFkZXIgPSBuZXcgd2ViZ2wyLlNoYWRlclByb2dyYW0oJ1JlbmRlckh1ZFRleHR1cmUnLCB7XG4gICAgICB2ZXJ0ZXhTcmM6IHZlcnRleFNoYWRlcixcbiAgICAgIGZyYWdtZW50U3JjOiBmcmFnbWVudFNoYWRlcixcbiAgICAgIGF0dHJpYnV0ZXM6IFsnYV92ZXJ0ZXhfcG9zaXRpb24nLCAnYV92ZXJ0ZXhfdGV4Q29vcmQnXSxcbiAgICAgIHVuaWZvcm1zOiBbJ3VfY29tcG9zZWRNYXRyaXgnLCAndV90ZXh0dXJlJ11cbiAgICB9KTtcblxuICAgIGNvbnN0IGdlb0J1aWxkZXIgPSBuZXcgd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeUJ1aWxkZXIoKTtcbiAgICBnZW9CdWlsZGVyXG4gICAgICAucmVzZXQoKVxuICAgICAgLnNldFByaW1pdGl2ZVR5cGUoJ3RyaWFuZ2xlU3RyaXAnKVxuICAgICAgLmFkZFZibygpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX3ZlcnRleF9wb3NpdGlvbicsICd2ZWMzZicpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX3ZlcnRleF90ZXhDb29yZCcsICd2ZWMyZicpO1xuXG4gICAgdGhpcy5fZ2VvbWV0cnkgPSBuZXcgd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeShcbiAgICAgIHRoaXMuX3NoYWRlcixcbiAgICAgIGdlb0J1aWxkZXIuZ2V0RGVmKClcbiAgICApO1xuXG4gICAgdGhpcy5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gIH1cblxuICByZXNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcblxuICAgIGNvbnN0IHRtcFZlcnRpY2VzOiB7IHBvczogZ2xtLlJlYWRvbmx5VmVjMzsgdGV4OiBnbG0uUmVhZG9ubHlWZWMyIH1bXSA9IFtcbiAgICAgIHsgcG9zOiBbdGhpcy5fd2lkdGggKiAwLCB0aGlzLl9oZWlnaHQgKiAwLCAtMV0sIHRleDogWzAsIDBdIH0sXG4gICAgICB7IHBvczogW3RoaXMuX3dpZHRoICogMSwgdGhpcy5faGVpZ2h0ICogMCwgLTFdLCB0ZXg6IFsxLCAwXSB9LFxuICAgICAgeyBwb3M6IFt0aGlzLl93aWR0aCAqIDAsIHRoaXMuX2hlaWdodCAqIDEsIC0xXSwgdGV4OiBbMCwgMV0gfSxcbiAgICAgIHsgcG9zOiBbdGhpcy5fd2lkdGggKiAxLCB0aGlzLl9oZWlnaHQgKiAxLCAtMV0sIHRleDogWzEsIDFdIH1cbiAgICBdO1xuXG4gICAgY29uc3QgdmVydEFyciA9IHRtcFZlcnRpY2VzXG4gICAgICAubWFwKCh2ZXJ0ZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB2ZXJ0ZXgucG9zWzBdLFxuICAgICAgICAgIHZlcnRleC5wb3NbMV0sXG4gICAgICAgICAgdmVydGV4LnBvc1syXSxcbiAgICAgICAgICB2ZXJ0ZXgudGV4WzBdLFxuICAgICAgICAgIHZlcnRleC50ZXhbMV1cbiAgICAgICAgXTtcbiAgICAgIH0pXG4gICAgICAuZmxhdCgpO1xuXG4gICAgdGhpcy5fZ2VvbWV0cnkuYWxsb2NhdGVCdWZmZXIoMCwgdmVydEFyciwgdmVydEFyci5sZW5ndGgpO1xuICAgIHRoaXMuX2dlb21ldHJ5LnNldFByaW1pdGl2ZUNvdW50KHZlcnRBcnIubGVuZ3RoIC8gNSk7XG4gIH1cblxuICBmbHVzaChjb21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCwgY3ViZU1hcDogd2ViZ2wyLklVbmJvdW5kVGV4dHVyZSkge1xuICAgIHRoaXMuX3NoYWRlci5iaW5kKChib3VuZFNoYWRlcikgPT4ge1xuICAgICAgYm91bmRTaGFkZXIuc2V0TWF0cml4NFVuaWZvcm0oJ3VfY29tcG9zZWRNYXRyaXgnLCBjb21wb3NlZE1hdHJpeCk7XG4gICAgICBib3VuZFNoYWRlci5zZXRUZXh0dXJlVW5pZm9ybSgndV90ZXh0dXJlJywgY3ViZU1hcCwgMCk7XG5cbiAgICAgIHRoaXMuX2dlb21ldHJ5LnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBTY2VuZUNhcHR1cmVyIH0gZnJvbSAnLi9pbnRlcm5hbHMvU2NlbmVDYXB0dXJlcic7XG5pbXBvcnQgeyBSZW5kZXJIdWRUZXh0dXJlIH0gZnJvbSAnLi9pbnRlcm5hbHMvUmVuZGVySHVkVGV4dHVyZSc7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgY2xhc3MgTXVsdGlCdWZmZXJzUmVuZGVyaW5nIHtcbiAgcHJpdmF0ZSBfc2NlbmVDYXB0dXJlcjogU2NlbmVDYXB0dXJlcjtcbiAgcHJpdmF0ZSBfcmVuZGVySHVkVGV4dHVyZTogUmVuZGVySHVkVGV4dHVyZTtcblxuICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuX3NjZW5lQ2FwdHVyZXIgPSBuZXcgU2NlbmVDYXB0dXJlcih3aWR0aCwgaGVpZ2h0KTtcbiAgICB0aGlzLl9yZW5kZXJIdWRUZXh0dXJlID0gbmV3IFJlbmRlckh1ZFRleHR1cmUod2lkdGgsIGhlaWdodCk7XG4gIH1cblxuICByZXNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLl9zY2VuZUNhcHR1cmVyLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB0aGlzLl9yZW5kZXJIdWRUZXh0dXJlLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgfVxuXG4gIGNhcHR1cmVTY2VuZShyZW5kZXJDYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX3NjZW5lQ2FwdHVyZXIuY2FwdHVyZVNjZW5lKHJlbmRlckNhbGxiYWNrKTtcbiAgfVxuXG4gIHJlbmRlckh1ZChjb21wb3NlZE1hdDQ6IGdsbS5SZWFkb25seU1hdDQpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJIdWRUZXh0dXJlLmZsdXNoKFxuICAgICAgY29tcG9zZWRNYXQ0LFxuICAgICAgdGhpcy5fc2NlbmVDYXB0dXJlci5jb2xvclRleHR1cmVcbiAgICApO1xuICB9XG59XG4iLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG51bmlmb3JtIG1hdDQgdV9jb21wb3NlZE1hdHJpeDtcblxuaW4gdmVjMyBhX3ZlcnRleF9wb3NpdGlvbjtcbmluIHZlYzQgYV92ZXJ0ZXhfY29sb3I7XG5cbmZsYXQgb3V0IHZlYzQgdl9jb2xvcjtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIGdsX1Bvc2l0aW9uID0gdV9jb21wb3NlZE1hdHJpeCAqIHZlYzQoYV92ZXJ0ZXhfcG9zaXRpb24sIDEuMCk7XG5cbiAgdl9jb2xvciA9IGFfdmVydGV4X2NvbG9yO1xufVxuYC50cmltKCk7IiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBsb3dwIGZsb2F0O1xuXG5mbGF0IGluIHZlYzQgdl9jb2xvcjtcblxub3V0IHZlYzQgb19jb2xvcjtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIG9fY29sb3IgPSB2X2NvbG9yO1xufVxuYC50cmltKCk7IiwKICAiaW1wb3J0ICogYXMgd2ViZ2wyIGZyb20gJy4uLy4uLy4uLy4uL2dyYXBoaWNzL3dlYmdsMic7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5jb25zdCBrX2J1ZmZlclNpemUgPSAxNCAqIDEwMjQ7XG5cbmV4cG9ydCBjbGFzcyBXaXJlRnJhbWVzU3RhY2tSZW5kZXJlciB7XG4gIHByaXZhdGUgX3NoYWRlcjogd2ViZ2wyLklVbmJvdW5kU2hhZGVyO1xuICBwcml2YXRlIF9nZW9tZXRyeTogd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeTtcblxuICBwcml2YXRlIF9idWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KGtfYnVmZmVyU2l6ZSk7XG4gIHByaXZhdGUgX2N1cnJlbnRTaXplOiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGluU2hhZGVyOiB3ZWJnbDIuSVVuYm91bmRTaGFkZXIsXG4gICAgaW5HZW9tZXRyeURlZjogd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeURlZmluaXRpb25cbiAgKSB7XG4gICAgdGhpcy5fc2hhZGVyID0gaW5TaGFkZXI7XG4gICAgY29uc3QgZ2VvbWV0cnlEZWY6IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnlEZWZpbml0aW9uID0ge1xuICAgICAgLi4uaW5HZW9tZXRyeURlZixcbiAgICAgIHByaW1pdGl2ZVR5cGU6IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuUHJpbWl0aXZlVHlwZS5saW5lc1xuICAgIH07XG5cbiAgICB0aGlzLl9nZW9tZXRyeSA9IG5ldyB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5KGluU2hhZGVyLCBnZW9tZXRyeURlZik7XG4gIH1cblxuICBwdXNoTGluZShcbiAgICBpblBvaW50QTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblBvaW50QjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzIHwgZ2xtLlJlYWRvbmx5VmVjNFxuICApIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFNpemUgKyA3ICogMiA+PSB0aGlzLl9idWZmZXIubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5fc2hhZGVyLmlzQm91bmQoKSkge1xuICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWxwaGFWYWx1ZSA9IGluQ29sb3JbM10gPz8gMTtcblxuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDBdID0gaW5Qb2ludEFbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMV0gPSBpblBvaW50QVsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAyXSA9IGluUG9pbnRBWzJdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDNdID0gaW5Db2xvclswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA0XSA9IGluQ29sb3JbMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNV0gPSBpbkNvbG9yWzJdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDZdID0gYWxwaGFWYWx1ZTtcbiAgICB0aGlzLl9jdXJyZW50U2l6ZSArPSA3O1xuXG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMF0gPSBpblBvaW50QlswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAxXSA9IGluUG9pbnRCWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDJdID0gaW5Qb2ludEJbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgM10gPSBpbkNvbG9yWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDRdID0gaW5Db2xvclsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA1XSA9IGluQ29sb3JbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNl0gPSBhbHBoYVZhbHVlO1xuICAgIHRoaXMuX2N1cnJlbnRTaXplICs9IDc7XG4gIH1cblxuICBjYW5SZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRTaXplID4gMDtcbiAgfVxuXG4gIGZsdXNoKCkge1xuICAgIGlmICghdGhpcy5jYW5SZW5kZXIoKSkgcmV0dXJuO1xuXG4gICAgdGhpcy5fZ2VvbWV0cnkuYWxsb2NhdGVCdWZmZXIoMCwgdGhpcy5fYnVmZmVyLCB0aGlzLl9jdXJyZW50U2l6ZSk7XG4gICAgdGhpcy5fZ2VvbWV0cnkuc2V0UHJpbWl0aXZlQ291bnQodGhpcy5fY3VycmVudFNpemUgLyA3KTtcblxuICAgIHRoaXMuX2dlb21ldHJ5LnJlbmRlcigpO1xuXG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG5cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgLy8gcmVzZXQgdmVydGljZXNcbiAgICB0aGlzLl9jdXJyZW50U2l6ZSA9IDA7XG4gIH1cbn1cbiIsCiAgImltcG9ydCAqIGFzIHdlYmdsMiBmcm9tICcuLi8uLi8uLi8uLi9ncmFwaGljcy93ZWJnbDInO1xuXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuY29uc3Qga19idWZmZXJTaXplID0gNyAqIDEwMjQ7XG5cbmV4cG9ydCBjbGFzcyBUcmlhbmdsZXNTdGFja1JlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfc2hhZGVyOiB3ZWJnbDIuSVVuYm91bmRTaGFkZXI7XG4gIHByaXZhdGUgX2dlb21ldHJ5OiB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5O1xuXG4gIHByaXZhdGUgX2J1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoa19idWZmZXJTaXplKTtcbiAgcHJpdmF0ZSBfY3VycmVudFNpemU6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaW5TaGFkZXI6IHdlYmdsMi5JVW5ib3VuZFNoYWRlcixcbiAgICBpbkdlb21ldHJ5RGVmOiB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5RGVmaW5pdGlvblxuICApIHtcbiAgICB0aGlzLl9zaGFkZXIgPSBpblNoYWRlcjtcbiAgICBjb25zdCBnZW9tZXRyeURlZjogd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeURlZmluaXRpb24gPSB7XG4gICAgICAuLi5pbkdlb21ldHJ5RGVmLFxuICAgICAgcHJpbWl0aXZlVHlwZTogd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5QcmltaXRpdmVUeXBlLnRyaWFuZ2xlc1xuICAgIH07XG5cbiAgICB0aGlzLl9nZW9tZXRyeSA9IG5ldyB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5KGluU2hhZGVyLCBnZW9tZXRyeURlZik7XG4gIH1cblxuICBwdXNoVHJpYW5nbGUoXG4gICAgaW5Qb2ludEE6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb2ludEI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb2ludEM6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyB8IGdsbS5SZWFkb25seVZlYzRcbiAgKSB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRTaXplICsgNyAqIDYgPj0gdGhpcy5fYnVmZmVyLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuX3NoYWRlci5pc0JvdW5kKCkpIHtcbiAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFscGhhVmFsdWUgPSBpbkNvbG9yWzNdID8/IDE7XG5cbiAgICAvLyAwXG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMF0gPSBpblBvaW50QVswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAxXSA9IGluUG9pbnRBWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDJdID0gaW5Qb2ludEFbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgM10gPSBpbkNvbG9yWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDRdID0gaW5Db2xvclsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA1XSA9IGluQ29sb3JbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNl0gPSBhbHBoYVZhbHVlO1xuICAgIHRoaXMuX2N1cnJlbnRTaXplICs9IDc7XG5cbiAgICAvLyAyXG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMF0gPSBpblBvaW50QlswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAxXSA9IGluUG9pbnRCWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDJdID0gaW5Qb2ludEJbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgM10gPSBpbkNvbG9yWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDRdID0gaW5Db2xvclsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA1XSA9IGluQ29sb3JbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNl0gPSBhbHBoYVZhbHVlO1xuICAgIHRoaXMuX2N1cnJlbnRTaXplICs9IDc7XG5cbiAgICAvLyAzXG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMF0gPSBpblBvaW50Q1swXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAxXSA9IGluUG9pbnRDWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDJdID0gaW5Qb2ludENbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgM10gPSBpbkNvbG9yWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDRdID0gaW5Db2xvclsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA1XSA9IGluQ29sb3JbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNl0gPSBhbHBoYVZhbHVlO1xuICAgIHRoaXMuX2N1cnJlbnRTaXplICs9IDc7XG4gIH1cblxuICBwdXNoTGluZShcbiAgICBpblBvaW50QTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblBvaW50QjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICB0aGlja25lc3M6IG51bWJlcixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzIHwgZ2xtLlJlYWRvbmx5VmVjNFxuICApIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFNpemUgKyA3ICogNiA+PSB0aGlzLl9idWZmZXIubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGlmZlggPSBpblBvaW50QlswXSAtIGluUG9pbnRBWzBdO1xuICAgIGNvbnN0IGRpZmZZID0gaW5Qb2ludEJbMV0gLSBpblBvaW50QVsxXTtcbiAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoZGlmZlksIGRpZmZYKSArIE1hdGguUEkgKiAwLjU7XG5cbiAgICBjb25zdCBzdGVwWCA9IE1hdGguY29zKGFuZ2xlKSAqIHRoaWNrbmVzcyAqIDAuNTtcbiAgICBjb25zdCBzdGVwWSA9IE1hdGguc2luKGFuZ2xlKSAqIHRoaWNrbmVzcyAqIDAuNTtcblxuICAgIHRoaXMucHVzaFRyaWFuZ2xlKFxuICAgICAgW2luUG9pbnRBWzBdIC0gc3RlcFgsIGluUG9pbnRBWzFdIC0gc3RlcFksIGluUG9pbnRBWzJdXSxcbiAgICAgIFtpblBvaW50QlswXSAtIHN0ZXBYLCBpblBvaW50QlsxXSAtIHN0ZXBZLCBpblBvaW50QlsyXV0sXG4gICAgICBbaW5Qb2ludEJbMF0gKyBzdGVwWCwgaW5Qb2ludEJbMV0gKyBzdGVwWSwgaW5Qb2ludEJbMl1dLFxuICAgICAgaW5Db2xvclxuICAgICk7XG4gICAgdGhpcy5wdXNoVHJpYW5nbGUoXG4gICAgICBbaW5Qb2ludEFbMF0gLSBzdGVwWCwgaW5Qb2ludEFbMV0gLSBzdGVwWSwgaW5Qb2ludEFbMl1dLFxuICAgICAgW2luUG9pbnRCWzBdICsgc3RlcFgsIGluUG9pbnRCWzFdICsgc3RlcFksIGluUG9pbnRCWzJdXSxcbiAgICAgIFtpblBvaW50QVswXSArIHN0ZXBYLCBpblBvaW50QVsxXSArIHN0ZXBZLCBpblBvaW50QVsyXV0sXG4gICAgICBpbkNvbG9yXG4gICAgKTtcbiAgfVxuXG4gIHB1c2hSb3RhdGVkTGluZShcbiAgICBjZW50ZXI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgYW5nbGU6IG51bWJlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICB0aGlja25lc3M6IG51bWJlcixcbiAgICBjb2xvcjogZ2xtLlJlYWRvbmx5VmVjM1xuICApIHtcbiAgICB0aGlzLnB1c2hMaW5lKFxuICAgICAgW1xuICAgICAgICBjZW50ZXJbMF0gLSBsZW5ndGggKiBNYXRoLmNvcyhhbmdsZSksXG4gICAgICAgIGNlbnRlclsxXSAtIGxlbmd0aCAqIE1hdGguc2luKGFuZ2xlKSxcbiAgICAgICAgY2VudGVyWzJdXG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBjZW50ZXJbMF0gKyBsZW5ndGggKiBNYXRoLmNvcyhhbmdsZSksXG4gICAgICAgIGNlbnRlclsxXSArIGxlbmd0aCAqIE1hdGguc2luKGFuZ2xlKSxcbiAgICAgICAgY2VudGVyWzJdXG4gICAgICBdLFxuICAgICAgdGhpY2tuZXNzLFxuICAgICAgY29sb3JcbiAgICApO1xuICB9XG5cbiAgcHVzaE9yaWdpbkJvdW5kUmVjdGFuZ2xlKFxuICAgIGluT3JpZ2luOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2l6ZTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzIHwgZ2xtLlJlYWRvbmx5VmVjNFxuICApIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFNpemUgKyA3ICogNiA+PSB0aGlzLl9idWZmZXIubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWF4Q29vcmQ6IGdsbS5SZWFkb25seVZlYzIgPSBbXG4gICAgICBpbk9yaWdpblswXSArIGluU2l6ZVswXSxcbiAgICAgIGluT3JpZ2luWzFdICsgaW5TaXplWzFdXG4gICAgXTtcblxuICAgIHRoaXMucHVzaFRyaWFuZ2xlKFxuICAgICAgW2luT3JpZ2luWzBdLCBpbk9yaWdpblsxXSwgaW5PcmlnaW5bMl1dLFxuICAgICAgW21heENvb3JkWzBdLCBtYXhDb29yZFsxXSwgaW5PcmlnaW5bMl1dLFxuICAgICAgW2luT3JpZ2luWzBdLCBtYXhDb29yZFsxXSwgaW5PcmlnaW5bMl1dLFxuICAgICAgaW5Db2xvclxuICAgICk7XG5cbiAgICB0aGlzLnB1c2hUcmlhbmdsZShcbiAgICAgIFtpbk9yaWdpblswXSwgaW5PcmlnaW5bMV0sIGluT3JpZ2luWzJdXSxcbiAgICAgIFttYXhDb29yZFswXSwgaW5PcmlnaW5bMV0sIGluT3JpZ2luWzJdXSxcbiAgICAgIFttYXhDb29yZFswXSwgbWF4Q29vcmRbMV0sIGluT3JpZ2luWzJdXSxcbiAgICAgIGluQ29sb3JcbiAgICApO1xuICB9XG5cbiAgcHVzaENlbnRlcmVkUmVjdGFuZ2xlKFxuICAgIGluQ2VudGVyOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2l6ZTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzIHwgZ2xtLlJlYWRvbmx5VmVjNFxuICApIHtcbiAgICBjb25zdCBvcmlnaW46IGdsbS5SZWFkb25seVZlYzMgPSBbXG4gICAgICBpbkNlbnRlclswXSAtIGluU2l6ZVswXSAqIDAuNSxcbiAgICAgIGluQ2VudGVyWzFdIC0gaW5TaXplWzFdICogMC41LFxuICAgICAgaW5DZW50ZXJbMl1cbiAgICBdO1xuXG4gICAgdGhpcy5wdXNoT3JpZ2luQm91bmRSZWN0YW5nbGUob3JpZ2luLCBpblNpemUsIGluQ29sb3IpO1xuICB9XG5cbiAgY2FuUmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50U2l6ZSA+IDA7XG4gIH1cblxuICBmbHVzaCgpIHtcbiAgICBpZiAoIXRoaXMuY2FuUmVuZGVyKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9nZW9tZXRyeS5hbGxvY2F0ZUJ1ZmZlcigwLCB0aGlzLl9idWZmZXIsIHRoaXMuX2N1cnJlbnRTaXplKTtcbiAgICB0aGlzLl9nZW9tZXRyeS5zZXRQcmltaXRpdmVDb3VudCh0aGlzLl9jdXJyZW50U2l6ZSAvIDcpO1xuXG4gICAgdGhpcy5fZ2VvbWV0cnkucmVuZGVyKCk7XG5cbiAgICB0aGlzLmNsZWFyKCk7XG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICAvLyByZXNldCB2ZXJ0aWNlc1xuICAgIHRoaXMuX2N1cnJlbnRTaXplID0gMDtcbiAgfVxufVxuIiwKICAiaW1wb3J0ICogYXMgd2ViZ2wyIGZyb20gJy4uLy4uLy4uL2dyYXBoaWNzL3dlYmdsMic7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBzdGFja1JlbmRlcmVyVmVydGV4IGZyb20gJy4vc2hhZGVycy9zdGFjay1yZW5kZXJlci5nbHNsLnZlcnQnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHN0YWNrUmVuZGVyZXJGcmFnbWVudCBmcm9tICcuL3NoYWRlcnMvc3RhY2stcmVuZGVyZXIuZ2xzbC5mcmFnJztcblxuaW1wb3J0IHsgV2lyZUZyYW1lc1N0YWNrUmVuZGVyZXIgfSBmcm9tICcuL2ludGVybmFscy9XaXJlRnJhbWVzU3RhY2tSZW5kZXJlcic7XG5pbXBvcnQgeyBUcmlhbmdsZXNTdGFja1JlbmRlcmVyIH0gZnJvbSAnLi9pbnRlcm5hbHMvVHJpYW5nbGVzU3RhY2tSZW5kZXJlcic7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTdGFja1JlbmRlcmVycyB7XG4gIHB1c2hUcmlhbmdsZShcbiAgICBpblBvc0E6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb3NCOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUG9zQzogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzIHwgZ2xtLlJlYWRvbmx5VmVjNFxuICApOiB2b2lkO1xuXG4gIHB1c2hRdWFkKFxuICAgIGluUG9zOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2l6ZTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzIHwgZ2xtLlJlYWRvbmx5VmVjNFxuICApOiB2b2lkO1xuXG4gIHB1c2hMaW5lKFxuICAgIGluUG9pbnRBOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUG9pbnRCOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzNcbiAgKTogdm9pZDtcblxuICBwdXNoQ3Jvc3MoXG4gICAgaW5DZW50ZXI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5TaXplOiBudW1iZXIsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjM1xuICApOiB2b2lkO1xuXG4gIHB1c2hUaGlja0xpbmUoXG4gICAgaW5Qb2ludEE6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb2ludEI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgdGhpY2tuZXNzOiBudW1iZXIsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjM1xuICApOiB2b2lkO1xuXG4gIHB1c2hSb3RhdGVkTGluZShcbiAgICBjZW50ZXI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgYW5nbGU6IG51bWJlcixcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICB0aGlja25lc3M6IG51bWJlcixcbiAgICBjb2xvcjogZ2xtLlJlYWRvbmx5VmVjM1xuICApOiB2b2lkO1xuXG4gIHB1c2hPcmlnaW5Cb3VuZFJlY3RhbmdsZShcbiAgICBpbk9yaWdpbjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNpemU6IGdsbS5SZWFkb25seVZlYzIsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyB8IGdsbS5SZWFkb25seVZlYzRcbiAgKTogdm9pZDtcblxuICBwdXNoQ2VudGVyZWRSZWN0YW5nbGUoXG4gICAgaW5DZW50ZXI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5TaXplOiBnbG0uUmVhZG9ubHlWZWMyLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICk6IHZvaWQ7XG5cbiAgc2FmZVJlbmRlcihpbkNvbXBvc2VkTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQ0LCBpbkNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZDtcbiAgZmx1c2goY29tcG9zZWRNYXRyaXg6IGdsbS5SZWFkb25seU1hdDQpOiB2b2lkO1xuICBjbGVhcigpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgU3RhY2tSZW5kZXJlcnMgaW1wbGVtZW50cyBJU3RhY2tSZW5kZXJlcnMge1xuICBwcml2YXRlIF9zaGFkZXI6IHdlYmdsMi5JVW5ib3VuZFNoYWRlcjtcblxuICBwcml2YXRlIF93aXJlRnJhbWVzU3RhY2tSZW5kZXJlcjogV2lyZUZyYW1lc1N0YWNrUmVuZGVyZXI7XG4gIHByaXZhdGUgX3RyaWFuZ2xlc1N0YWNrUmVuZGVyZXI6IFRyaWFuZ2xlc1N0YWNrUmVuZGVyZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2hhZGVyID0gbmV3IHdlYmdsMi5TaGFkZXJQcm9ncmFtKCdTdGFja1JlbmRlcmVycycsIHtcbiAgICAgIHZlcnRleFNyYzogc3RhY2tSZW5kZXJlclZlcnRleCxcbiAgICAgIGZyYWdtZW50U3JjOiBzdGFja1JlbmRlcmVyRnJhZ21lbnQsXG4gICAgICBhdHRyaWJ1dGVzOiBbJ2FfdmVydGV4X3Bvc2l0aW9uJywgJ2FfdmVydGV4X2NvbG9yJ10sXG4gICAgICB1bmlmb3JtczogWyd1X2NvbXBvc2VkTWF0cml4J11cbiAgICB9KTtcblxuICAgIGNvbnN0IGdlb0J1aWxkZXIgPSBuZXcgd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeUJ1aWxkZXIoKTtcbiAgICBnZW9CdWlsZGVyXG4gICAgICAucmVzZXQoKVxuICAgICAgLnNldFByaW1pdGl2ZVR5cGUoJ2xpbmVzJylcbiAgICAgIC5hZGRWYm8oKVxuICAgICAgLnNldFZib0FzRHluYW1pYygpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX3ZlcnRleF9wb3NpdGlvbicsICd2ZWMzZicpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX3ZlcnRleF9jb2xvcicsICd2ZWM0ZicpO1xuXG4gICAgdGhpcy5fd2lyZUZyYW1lc1N0YWNrUmVuZGVyZXIgPSBuZXcgV2lyZUZyYW1lc1N0YWNrUmVuZGVyZXIoXG4gICAgICB0aGlzLl9zaGFkZXIsXG4gICAgICBnZW9CdWlsZGVyLmdldERlZigpXG4gICAgKTtcbiAgICB0aGlzLl90cmlhbmdsZXNTdGFja1JlbmRlcmVyID0gbmV3IFRyaWFuZ2xlc1N0YWNrUmVuZGVyZXIoXG4gICAgICB0aGlzLl9zaGFkZXIsXG4gICAgICBnZW9CdWlsZGVyLmdldERlZigpXG4gICAgKTtcbiAgfVxuXG4gIHB1c2hMaW5lKFxuICAgIGluUG9pbnRBOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUG9pbnRCOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzNcbiAgKSB7XG4gICAgdGhpcy5fd2lyZUZyYW1lc1N0YWNrUmVuZGVyZXIucHVzaExpbmUoaW5Qb2ludEEsIGluUG9pbnRCLCBpbkNvbG9yKTtcbiAgfVxuXG4gIHB1c2hDcm9zcyhcbiAgICBpbkNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNpemU6IG51bWJlcixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzXG4gICkge1xuICAgIGNvbnN0IGNyb3NzVmVydGljZXM6IGdsbS5SZWFkb25seVZlYzNbXSA9IFtcbiAgICAgIFtpbkNlbnRlclswXSAtIGluU2l6ZSwgaW5DZW50ZXJbMV0sIGluQ2VudGVyWzJdXSxcbiAgICAgIFtpbkNlbnRlclswXSArIGluU2l6ZSwgaW5DZW50ZXJbMV0sIGluQ2VudGVyWzJdXSxcbiAgICAgIFtpbkNlbnRlclswXSwgaW5DZW50ZXJbMV0gLSBpblNpemUsIGluQ2VudGVyWzJdXSxcbiAgICAgIFtpbkNlbnRlclswXSwgaW5DZW50ZXJbMV0gKyBpblNpemUsIGluQ2VudGVyWzJdXSxcbiAgICAgIFtpbkNlbnRlclswXSwgaW5DZW50ZXJbMV0sIGluQ2VudGVyWzJdIC0gaW5TaXplXSxcbiAgICAgIFtpbkNlbnRlclswXSwgaW5DZW50ZXJbMV0sIGluQ2VudGVyWzJdICsgaW5TaXplXVxuICAgIF07XG4gICAgY29uc3QgY3Jvc3NJbmRpY2VzOiBudW1iZXJbXSA9IFswLCAxLCAyLCAzLCA0LCA1XTtcblxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBjcm9zc0luZGljZXMubGVuZ3RoOyBpaSArPSAyKSB7XG4gICAgICBjb25zdCB2ZXJ0ZXhBID0gY3Jvc3NWZXJ0aWNlc1tpaSArIDBdO1xuICAgICAgY29uc3QgdmVydGV4QiA9IGNyb3NzVmVydGljZXNbaWkgKyAxXTtcbiAgICAgIHRoaXMuX3dpcmVGcmFtZXNTdGFja1JlbmRlcmVyLnB1c2hMaW5lKHZlcnRleEEsIHZlcnRleEIsIGluQ29sb3IpO1xuICAgIH1cbiAgfVxuXG4gIHB1c2hUaGlja0xpbmUoXG4gICAgaW5Qb2ludEE6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb2ludEI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgdGhpY2tuZXNzOiBudW1iZXIsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjM1xuICApIHtcbiAgICB0aGlzLl90cmlhbmdsZXNTdGFja1JlbmRlcmVyLnB1c2hMaW5lKFxuICAgICAgaW5Qb2ludEEsXG4gICAgICBpblBvaW50QixcbiAgICAgIHRoaWNrbmVzcyxcbiAgICAgIGluQ29sb3JcbiAgICApO1xuICB9XG5cbiAgcHVzaFJvdGF0ZWRMaW5lKFxuICAgIGNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBhbmdsZTogbnVtYmVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIHRoaWNrbmVzczogbnVtYmVyLFxuICAgIGNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzXG4gICkge1xuICAgIHRoaXMuX3RyaWFuZ2xlc1N0YWNrUmVuZGVyZXIucHVzaFJvdGF0ZWRMaW5lKFxuICAgICAgY2VudGVyLFxuICAgICAgYW5nbGUsXG4gICAgICBsZW5ndGgsXG4gICAgICB0aGlja25lc3MsXG4gICAgICBjb2xvclxuICAgICk7XG4gIH1cblxuICBwdXNoT3JpZ2luQm91bmRSZWN0YW5nbGUoXG4gICAgaW5PcmlnaW46IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5TaXplOiBnbG0uUmVhZG9ubHlWZWMyLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICkge1xuICAgIHRoaXMuX3RyaWFuZ2xlc1N0YWNrUmVuZGVyZXIucHVzaE9yaWdpbkJvdW5kUmVjdGFuZ2xlKFxuICAgICAgaW5PcmlnaW4sXG4gICAgICBpblNpemUsXG4gICAgICBpbkNvbG9yXG4gICAgKTtcbiAgfVxuXG4gIHB1c2hDZW50ZXJlZFJlY3RhbmdsZShcbiAgICBpbkNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNpemU6IGdsbS5SZWFkb25seVZlYzIsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyB8IGdsbS5SZWFkb25seVZlYzRcbiAgKSB7XG4gICAgdGhpcy5fdHJpYW5nbGVzU3RhY2tSZW5kZXJlci5wdXNoQ2VudGVyZWRSZWN0YW5nbGUoXG4gICAgICBpbkNlbnRlcixcbiAgICAgIGluU2l6ZSxcbiAgICAgIGluQ29sb3JcbiAgICApO1xuICB9XG5cbiAgcHVzaFRyaWFuZ2xlKFxuICAgIGluUG9zQTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblBvc0I6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb3NDOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICkge1xuICAgIHRoaXMuX3RyaWFuZ2xlc1N0YWNrUmVuZGVyZXIucHVzaFRyaWFuZ2xlKGluUG9zQSwgaW5Qb3NCLCBpblBvc0MsIGluQ29sb3IpO1xuICB9XG5cbiAgcHVzaFF1YWQoXG4gICAgaW5Qb3M6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5TaXplOiBnbG0uUmVhZG9ubHlWZWMyLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICkge1xuICAgIHRoaXMucHVzaFRyaWFuZ2xlKFxuICAgICAgW2luUG9zWzBdICsgaW5TaXplWzBdICogMCwgaW5Qb3NbMV0gKyBpblNpemVbMV0gKiAwLCBpblBvc1syXV0sXG4gICAgICBbaW5Qb3NbMF0gKyBpblNpemVbMF0gKiAxLCBpblBvc1sxXSArIGluU2l6ZVsxXSAqIDEsIGluUG9zWzJdXSxcbiAgICAgIFtpblBvc1swXSArIGluU2l6ZVswXSAqIDEsIGluUG9zWzFdICsgaW5TaXplWzFdICogMCwgaW5Qb3NbMl1dLFxuICAgICAgaW5Db2xvclxuICAgICk7XG4gICAgdGhpcy5wdXNoVHJpYW5nbGUoXG4gICAgICBbaW5Qb3NbMF0gKyBpblNpemVbMF0gKiAwLCBpblBvc1sxXSArIGluU2l6ZVsxXSAqIDAsIGluUG9zWzJdXSxcbiAgICAgIFtpblBvc1swXSArIGluU2l6ZVswXSAqIDEsIGluUG9zWzFdICsgaW5TaXplWzFdICogMSwgaW5Qb3NbMl1dLFxuICAgICAgW2luUG9zWzBdICsgaW5TaXplWzBdICogMCwgaW5Qb3NbMV0gKyBpblNpemVbMV0gKiAxLCBpblBvc1syXV0sXG4gICAgICBpbkNvbG9yXG4gICAgKTtcbiAgfVxuXG4gIGZsdXNoKGluQ29tcG9zZWRNYXRyaXg6IGdsbS5SZWFkb25seU1hdDQpIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5fd2lyZUZyYW1lc1N0YWNrUmVuZGVyZXIuY2FuUmVuZGVyKCkgJiZcbiAgICAgICF0aGlzLl90cmlhbmdsZXNTdGFja1JlbmRlcmVyLmNhblJlbmRlcigpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2hhZGVyLmJpbmQoKGJvdW5kKSA9PiB7XG4gICAgICBib3VuZC5zZXRNYXRyaXg0VW5pZm9ybSgndV9jb21wb3NlZE1hdHJpeCcsIGluQ29tcG9zZWRNYXRyaXgpO1xuXG4gICAgICB0aGlzLl93aXJlRnJhbWVzU3RhY2tSZW5kZXJlci5mbHVzaCgpO1xuICAgICAgdGhpcy5fdHJpYW5nbGVzU3RhY2tSZW5kZXJlci5mbHVzaCgpO1xuICAgIH0pO1xuICB9XG5cbiAgc2FmZVJlbmRlcihpbkNvbXBvc2VkTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQ0LCBpbkNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fc2hhZGVyLmJpbmQoKGJvdW5kKSA9PiB7XG4gICAgICBib3VuZC5zZXRNYXRyaXg0VW5pZm9ybSgndV9jb21wb3NlZE1hdHJpeCcsIGluQ29tcG9zZWRNYXRyaXgpO1xuXG4gICAgICBpbkNhbGxiYWNrKCk7XG5cbiAgICAgIHRoaXMuX3dpcmVGcmFtZXNTdGFja1JlbmRlcmVyLmZsdXNoKCk7XG4gICAgICB0aGlzLl90cmlhbmdsZXNTdGFja1JlbmRlcmVyLmZsdXNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl93aXJlRnJhbWVzU3RhY2tSZW5kZXJlci5jbGVhcigpO1xuICAgIHRoaXMuX3RyaWFuZ2xlc1N0YWNrUmVuZGVyZXIuY2xlYXIoKTtcbiAgfVxufVxuIiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxudW5pZm9ybSBtYXQ0IHVfY29tcG9zZWRNYXRyaXg7XG5cbmluIHZlYzIgYV92ZXJ0ZXhfcG9zaXRpb247XG5pbiB2ZWMyIGFfdmVydGV4X3RleENvb3JkO1xuaW4gdmVjMyBhX29mZnNldF9wb3NpdGlvbjtcbmluIHZlYzIgYV9vZmZzZXRfdGV4Q29vcmQ7XG5pbiB2ZWMzIGFfb2Zmc2V0X2NvbG9yO1xuaW4gZmxvYXQgYV9vZmZzZXRfc2NhbGU7XG5cbm91dCB2ZWMyIHZfdGV4Q29vcmQ7XG5mbGF0IG91dCB2ZWMzIHZfY29sb3I7XG5cbnZvaWQgbWFpbih2b2lkKVxue1xuICB2ZWMzIHBvc2l0aW9uID0gdmVjMyhhX3ZlcnRleF9wb3NpdGlvbiwgMC4wKSAqIGFfb2Zmc2V0X3NjYWxlICsgYV9vZmZzZXRfcG9zaXRpb247XG5cbiAgZ2xfUG9zaXRpb24gPSB1X2NvbXBvc2VkTWF0cml4ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcblxuICB2X3RleENvb3JkID0gYV92ZXJ0ZXhfdGV4Q29vcmQgKyBhX29mZnNldF90ZXhDb29yZDtcbiAgdl9jb2xvciA9IGFfb2Zmc2V0X2NvbG9yO1xufVxuYC50cmltKCk7IiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG51bmlmb3JtIHNhbXBsZXIyRCB1X3RleHR1cmU7XG5cbmluIHZlYzIgdl90ZXhDb29yZDtcbmZsYXQgaW4gdmVjMyB2X2NvbG9yO1xuXG5vdXQgdmVjNCBvX2NvbG9yO1xuXG52b2lkIG1haW4odm9pZClcbntcbiAgdmVjNCB0ZXh0dXJlQ29sb3IgPSB0ZXh0dXJlKHVfdGV4dHVyZSwgdl90ZXhDb29yZCk7XG4gIGlmICh0ZXh0dXJlQ29sb3IuYSA8IDAuNSlcbiAge1xuICAgIGRpc2NhcmQ7XG4gIH1cbiAgZWxzZVxuICB7XG4gICAgb19jb2xvciA9IHZlYzQodl9jb2xvciwgdGV4dHVyZUNvbG9yLmEpO1xuICB9XG59XG5gLnRyaW0oKTsiLAogICJleHBvcnQgY29uc3QgYXNjaWlUZXh0dXJlSGV4ID1cbiAgJzdlN2UyOGZkMDNmZDA3ZmUwNGZlMGFmZjAyZmY3ZTRkZmQwY2ZkMDNmZDA3ZmUwNGZlMGFmZjAyZmYxYWZjMGRmZDEwZmMwOGZjMGZmZTU1ZmYxNWZiMGJmZDAzZmQwN2ZlMDRmZTA4ZjcwN2ZkMDRmZjA3ZmUwMmZlMGNmZDBmZmQwY2ZkMGFmZjAzZmUwM2ZmMGFmZTQ0ZmUxNWZiMGJmZDAzZmQwNGYyMDRmNjA3ZmQwM2ZlMDdmZTAyZmUwY2ZkMGVmZDBlZmQwYWZmMDJmZTAyZmYwYmZlNDNmZDE1ZmIwY2ZlMDNmZTA1ZjIwNGZlMDFmZjAyZmYwYWZkMDJmZDA3ZmUwMmZlMGJmZDBlZmQxMGZkMGFmYTBjZmU0MmZkMTZmYjFiZmUwNGZlMDdmZTAxZmYwMmZmMGVmZDA5ZmMxY2ZkMTJmZDA5ZmEwY2ZlNDFmZDE3ZmIxYmZlMDRmZTA3ZjcwYmZkMGFmYzA0ZmYxN2ZkMTJmZDA2ZjQwNWY2MTZmNjFjZmQxOWZkMWNmZTA0ZmUwOGY3MDlmZDBiZmIwMmZlMTdmZDEyZmQwNmY0MDVmNjE2ZjYxYmZkMWFmZDFjZmUwNGZlMGFmZjAyZmYwMWZlMDhmZDBiZmUwMmZhMTdmZDEyZmQwOWZhMGNmZTNlZmQzN2YyMDdmZjAyZmYwMWZlMDdmZDAyZmQwN2ZlMDNmYzE5ZmQxMGZkMGFmYTBjZmUzZGZkMzhmMjA0ZjYwN2ZlMDNmZDA3ZmUwM2ZkMWJmZDBlZmQwYWZmMDJmZTAyZmYwYmZlMGNmZDFkZmQwZGZkMWRmZDFjZmUwNGZlMDdmNzA4ZmYwNGZkMDdmZTAyZmIxYmZkMGNmZDBhZmYwM2ZlMDNmZjBhZmUwY2ZkMWRmZDBjZmQxZWZkMWNmZTA0ZmUwYWZmMDJmZjFhZmIwMmZlMWJmYzA4ZmMwZmZlMWNmZDFkZmQwYmZkMWZmZDFjZmUwNGZlMGFmZjAyZmY3YWZkN2U3ZTdlN2U3ZTdlMGVmZDE3ZmQxMGZjMGFmODBiZmUwYmY5MDlmOTBkZmQwOGY2MDlmYjA4ZjUwNmY4MDhmODJjZmQxOWZkMGRmODA3ZmQwNGZkMGFmZTBhZmQwM2ZkMDdmZDAzZmQwYmZjMDhmZDBmZmQwYmZkMDVmZDA1ZmQwNGZkMDZmZDA0ZmQyYWZkMWJmZDBiZmMwMmZjMDZmZDAzZmMwOWZkMGFmZDA0ZmQwNmZkMDRmZDA5ZmIwOGZkMGVmZDBjZmQwNWZkMDVmZDA0ZmQwNmZkMDRmZDA5ZmQwY2ZkMGVmZDFkZmQwYWZlMDVmZDA2ZmQwMmZiMDZmYTExZmQwZGZkMDhmZTAxZmQwOGZkMGRmZDBkZmQwNWZkMDVmZDA0ZmQwNmZkMDRmZDA5ZmQwY2ZkMGRmZDBhZjQwOWZkMTBmZDA2ZmQwMmZiMDZmYTEwZmQwZGZkMDhmZTAyZmQwOGZkMGRmZDE1ZmQwNWZiMDJmZDA2ZmQwNGZkMDlmZDBjZmQwY2ZkMGJmNDBhZmQwZWZkMDdmZDAxZmUwMWZkMDlmZDBmZmQwYmZiMDhmZTAzZmQwOGY4MDhmNzBlZmQwOGZhMDhmNjI2ZmQyM2ZkMGNmZDA4ZmQwMWZlMDFmZDA5ZmQwZWZkMGNmYjA4ZjYwNmY3MDdmNjBjZmQwOWZhMDlmNzI2ZmQyM2ZkMGJmZDA5ZmIwMmZkMDlmZDBkZmQxMGZkMDdmNjBjZmMwNmZkMDRmZDBiZmQwOGZkMDJmYjBkZmQwOWZkMGNmZDBjZmQwYmY0MGFmZDBjZmQwOWZiMDJmZDA5ZmQwY2ZkMTJmZDBiZmQwZmZkMDZmZDA0ZmQwYWZkMDlmZDA0ZmQwZGZkMDlmZDBjZmQwZGZkMGFmNDA5ZmQxOWZjMDNmZDA5ZmQwYmZkMDNmZDA2ZmQwNGZkMGJmZDA4ZmQwNGZkMDZmZDA0ZmQwOWZkMGFmZDA0ZmQwY2ZkMGFmZDBjZmQwZWZkMWRmZDFhZmQwNGZkMDlmZDBhZmQwNGZkMDZmZDAzZmQwY2ZkMDhmZDAzZmQwN2ZkMDRmZDA5ZmQwYWZkMDRmZDBiZmQxOWZkMTBmZDFiZmQwZmZkMGFmODA3ZjcwN2Y2MDdmOTBiZjkwN2Y5MDlmODBhZmQwYmY4MDlmYjJlZmQxOWZkMTBmZDdlNTFmZDE3ZmQxMWZkN2U3ZTdlN2UxM2Y4N2U3OGZkMDVmZDA4ZmMwOWY3MDlmOTA3ZjgwOGY2MDZmNjA4ZjkwN2ZkMDNmZDA3ZjkwZGY5MDVmYzAzZmQwNmZiMGJmZDA1ZmQwNWZkMDVmZDA4ZmIwOGZkMDVmZDA3ZmEwOWZkMDNmZDA3ZmQwM2ZkMDdmZDAyZmQwOGZkMDRmZTA3ZmQwNGZlMDdmZDAzZmQwNmZkMDNmZDA5ZmQxMWZkMDhmZDAzZmQwN2ZkMGNmYzAzZmMwNWZkMDVmZDA3ZmQwMWZkMDdmZDA1ZmQwNmZkMDJmZDA4ZmQwM2ZkMDZmZDA0ZmQwN2ZkMDNmZDA3ZmQwNWZmMDdmZDA1ZmYwNmZkMDRmZDA2ZmQwM2ZkMDlmZDExZmQwOGZkMDJmZDA4ZmQwY2ZiMDFmYjA1ZmMwNGZkMDZmZDAzZmQwNmZkMDVmZDA1ZmQwNGZkMDdmZDAzZmQwNmZkMGVmZDAzZmQwN2ZkMGRmZDBjZmQwNGZkMDZmZDAzZmQwOWZkMTFmZDA4ZmQwMWZkMDlmZDBjZjUwNWZiMDNmZDA1ZmQwNWZkMDVmZDAyZmEwNWZkMDRmZDA3ZmQwM2ZkMDZmZDBlZmQwM2ZkMDdmZDAzZmUwOGZkMDNmZTA3ZmQwZGZkMDNmZDA5ZmQxMWZkMDhmYTBhZmQwY2Y1MDVmYTAyZmQwNWZkMDVmZDA1ZmQwMmZhMDVmZDA0ZmQwN2Y4MDdmZDBlZmQwM2ZkMDdmODA4ZjgwN2ZkMGRmNzA5ZmQxMWZkMDhmYjBiZmQwY2ZkMDFmZDAxZmQwNWZkMDFmZDAxZmQwNWZkMDVmZDA1ZmQwMmZhMDVmZDA0ZmQwN2Y4MDdmZDBlZmQwM2ZkMDdmODA4ZjgwN2ZkMGRmNzA5ZmQxMWZkMDhmYjBiZmQwY2ZkMDJmZjAyZmQwNWZkMDJmYTA1ZmQwNWZkMDVmZDAyZmEwNWY2MDdmZDAzZmQwNmZkMGVmZDAzZmQwN2ZkMDNmZTA4ZmQwM2ZlMDdmZDAyZmIwNmZkMDNmZDA5ZmQwYmZkMDNmZDA4ZmEwYWZkMGNmZDA1ZmQwNWZkMDNmYjA1ZmQwNWZkMDVmZDBkZmQwNGZkMDdmZDAzZmQwNmZkMGVmZDAzZmQwN2ZkMGRmZDBjZmQwNGZkMDZmZDAzZmQwOWZkMGJmZDAzZmQwOGZkMDFmZDA5ZmQwNWZmMDZmZDA1ZmQwNWZkMDRmYzA1ZmQwNWZkMDVmZDBkZmQwNGZkMDdmZDAzZmQwNmZkMDRmZDA3ZmQwM2ZkMDdmZDA1ZmYwN2ZkMGNmZDA0ZmQwNmZkMDNmZDA5ZmQwYmZkMDNmZDA4ZmQwMmZkMDhmZDA0ZmUwNmZkMDVmZDA1ZmQwNWZkMDZmZDAzZmQwNmZkMGRmZDA0ZmQwN2ZkMDNmZDA3ZmQwM2ZkMDdmZDAyZmQwOGZkMDRmZTA3ZmQwZGZkMDNmZDA2ZmQwM2ZkMDlmZDBiZmQwM2ZkMDhmZDAzZmQwN2ZkMDNmZDA2ZmQwNWZkMDVmZDA1ZmQwN2ZkMDFmZDA3ZmQwZGZkMDRmZDA2ZjcwOWY5MDdmODA4ZjYwNmZiMGRmODA2ZmQwM2ZkMDdmOTBhZjkwOGZjMDNmZDA2ZjYwNmZkMDVmZDA1ZmQwNWZkMDhmYjBhZjg3ZTdlN2U3ZTdlN2U3ZTY4ZmUxYWY3MGFmYjA4ZjcwOGY4MDdmNTA1ZmQwM2ZkMDdmZDAzZmQwN2ZkMDVmZDA1ZmQwM2ZkMDdmZDAzZmQwN2Y2MDhmOTA3ZmYxMWY5MGFmYzFhZmQwM2ZkMDdmYzAxZmMwN2ZkMDNmZDA2ZmQwNGZkMDZmZTAyZmQwMmZlMDVmZDAzZmQwN2ZkMDNmZDA3ZmQwNWZkMDVmZDAzZmQwN2ZkMDNmZDA3ZmQwNGZkMDhmZDBiZmUxNGZkMDlmYTE5ZmQwM2ZkMDdmZDAzZmQwN2ZkMDNmZDA2ZmQwNGZkMDZmZjAzZmQwM2ZmMDVmZDAzZmQwN2ZkMDNmZDA3ZmQwNWZkMDVmZDAzZmQwN2ZkMDNmZDA3ZmUwNWZkMDhmZDBiZmQxM2ZkMDhmZDAyZmQxOGZkMDNmZDA2ZmQwNWZkMDZmZDAzZmQwNmZkMDRmZDBhZmQwOWZkMDNmZDA3ZmQwM2ZkMDdmZDA1ZmQwNmZkMDFmZDA4ZmQwM2ZkMDdmZjA1ZmQwOWZkMGNmZDEyZmQwN2ZkMDRmZDE3ZmQwM2ZkMDZmZDA1ZmQwNmZkMDNmZDA2ZmQxMWZkMDlmZDAzZmQwN2ZkMDNmZDA3ZmQwNWZkMDdmYjA5ZmQwM2ZkMGNmZDBhZmQwZGZkMTFmZDI4ZjgwN2ZkMDVmZDA2ZjgwOGY5MGNmZDA5ZmQwM2ZkMDdmZDAzZmQwN2ZkMDJmZjAyZmQwOGZkMGJmZDAxZmQwY2ZkMGJmZDBlZmQxMGZkMjhmODA3ZmQwNWZkMDZmODA5ZjkwYmZkMDlmZDAzZmQwN2ZkMDNmZDA3ZmQwMmZmMDJmZDA4ZmQwY2ZiMGNmZDBjZmQwZmZkMGZmZDI4ZmQwY2ZkMDNmYjA2ZmQwMmZkMGVmZDBhZmQwOWZkMDNmZDA3ZmQwM2ZkMDdmZDAyZmYwMmZkMDdmYjBjZmQwY2ZkMGRmZDEwZmQwZWZkMjhmZDBjZmQwMmZhMDZmZDAzZmQwNmZkMDRmZDBhZmQwOWZkMDNmZDA3ZmQwM2ZkMDhmNzA3ZmQwMWZkMGJmZDBiZmQwNWZmMDhmZDExZmQwZGZkMjhmZDBkZjcwN2ZkMDNmZDA2ZmQwNGZkMGFmZDA5ZmQwM2ZkMDhmZDAxZmQwOWZjMDFmYzA2ZmQwM2ZkMGFmZDBhZmQwNWZlMDhmZDEyZmQwY2ZkMjhmZDBkZjcwN2ZkMDNmZDA2ZmQwNGZkMGFmZDA5ZmQwM2ZkMDlmYjBiZmQwMWZkMDdmZDAzZmQwYWZkMGFmZDA0ZmQwOGZkMTNmZDBiZmQyN2ZiMTJmZDA2ZmMwM2ZkMDdmODA5ZjkwOGY5MGJmZDBjZmQwMWZkMDdmZDAzZmQwOGY5MDhmNjA4ZjkxMGZkMDZmOTNjZmE3ZTU0ZjA3ZTcyZjA3ZTdlN2U3ZTBiZmQxZGZjMjFmYjE5ZmIxOGZjMTBmZDBmZmQwN2ZjMGRmYTM5ZmQxZWZkMjJmZDE5ZmQwMWZkMThmZDEwZmQwZmZkMDhmZDEwZmQzYmZkMWNmZDIyZmQxOWZkMDFmZDE4ZmQxMGZkMGZmZDA4ZmQxMGZkM2JmZDFjZmQyMmZkMTlmZDFjZmQyZGZkMTBmZDRhZjkwOWY4MDhmOTA5ZjgwOGY5MGFmZDBjZmIwMmZlMDdmZDAxZmMwOGZhMGNmYTA4ZmQwM2ZkMGFmZDA5ZjYwNmY4MDlmOTFlZmQwOGZkMDNmZDA2ZmQwM2ZkMDdmZDAzZmQwN2ZkMDNmZDA3ZjgwOGZkMDNmZDA4ZmMwMmZkMGFmZDBmZmQwOGZkMDJmZDBiZmQwOWZkMDJmZjAyZmQwNWZkMDNmZDA3ZmQwM2ZkMWRmZDA4ZmQwM2ZkMDZmZDAzZmQwN2ZkMDNmZDA3ZmQwM2ZkMDdmODA4ZmQwM2ZkMDhmYzAyZmQwYWZkMGZmZDA4ZmQwMWZkMGNmZDA5ZmQwMmZmMDJmZDA1ZmQwM2ZkMDdmZDAzZmQxOGY4MDhmZDAzZmQwNmZkMGRmZDAzZmQwN2Y3MDlmZDBiZmQwM2ZkMDhmZDAzZmQwYWZkMGZmZDA4ZmEwZGZkMDlmZDAyZmYwMmZkMDVmZDAzZmQwN2ZkMDNmZDE3ZmQwM2ZkMDhmZDAzZmQwNmZkMGRmZDAzZmQwN2ZkMGZmZDBiZmQwM2ZkMDhmZDAzZmQwYWZkMGZmZDA4ZmQwMWZkMGNmZDA5ZmQwMmZmMDJmZDA1ZmQwM2ZkMDdmZDAzZmQxN2ZkMDNmZDA4ZmQwM2ZkMDZmZDAzZmQwN2ZkMDNmZDA3ZmQwM2ZkMDlmZDBjZjgwOGZkMDNmZDBhZmQwZmZkMDhmZDAyZmQwYmZkMDlmZDAyZmYwMmZkMDVmZDAzZmQwN2ZkMDNmZDE3ZmQwM2ZkMDhmZDAzZmQwNmZkMDNmZDA3ZmQwM2ZkMDdmZDAzZmQwOWZkMGRmOTA4ZmQwM2ZkMGFmZDBmZmQwOGZkMDNmZDBhZmQwOWZkMDJmZjAyZmQwNWZkMDNmZDA3ZmQwM2ZkMThmYjAyZmUwNmZlMDJmYjA4ZjkwOWZiMDJmZTA3ZjkwOGY5MGZmZDA3ZmMwM2ZkMDdmNzA2ZmQwM2ZkMDdmYzAzZmQwN2Y3MDZmZDA1ZmQwNWZkMDNmZDA4Zjk3OGZkMDNmZDI3ZmQwM2ZkN2U0YWY5MmFmYTdlN2U3ZTdlN2U3ZTE4ZmEwOWZjMDlmYTFlZmU0ZWZmNmVmZDBkZmMwZGZkMWNmYzRjZmU2ZWZkMGRmYzBkZmQxYmZhNGFmZDZlZmQwZGZjMGRmZDFhZmQwMmZkMDdmZTAyZmIwN2ZiMDJmZTA3ZmMwMmZkMDhmOTA4ZjcwN2ZkMDNmZDA3ZmQwM2ZkMDdmZDA1ZmQwNWZkMDJmZDA5ZmQwM2ZkMDZmODBhZmQwZWZjMGVmZDA4ZmIwM2ZkMDVmZDA0ZmQwN2ZkMDNmZDA1ZmQwM2ZkMDlmNzA2ZmQwNGZlMDlmZDBiZmQwM2ZkMDdmZDAzZmQwN2ZkMDVmZDA1ZmQwMmZkMDlmZDAzZmQwNmZlMDNmZDA4ZmQyNGZkMDVmZDAxZmQwMmZkMDVmZTA2ZmUwN2ZkMDNmZDA1ZmQwM2ZkMDlmYzAyZmQwNmZkMDRmZTA5ZmQwYmZkMDNmZDA3ZmQwM2ZkMDdmZDA1ZmQwNmZhMGFmZDAzZmQwNmZmMDNmZDA5ZmQyNGZkMDVmZDAyZmQwMWZkMDVmZTA2ZmUwN2ZkMDNmZDA1ZmQwM2ZkMDlmZDBkZmIwY2ZkMGJmZDAzZmQwN2ZkMDNmZDA3ZmQwMmZmMDJmZDA3ZmMwYmZkMDNmZDA5ZmQwY2ZkMGVmYzBlZmQwN2ZkMDNmYjA2ZmUwNmZlMDdmZDAzZmQwNWZkMDNmZDA5ZmQwZmZiMGFmZDBiZmQwM2ZkMDdmZDAzZmQwN2ZkMDJmZjAyZmQwN2ZjMGJmZDAzZmQwOGZkMGVmZDBkZmMwZGZkMTlmZTA2ZmUwN2ZkMDNmZDA1ZmQwM2ZkMDlmZDBjZmUwNGZkMDlmZDAxZmQwN2ZkMDNmZDA4ZmQwMWZkMDlmYzAxZmMwN2ZhMGJmOTA4ZmQwM2ZmMGJmZDBkZmMwZGZkMTlmZTA2ZmUwN2Y4MDdmODA5ZmQwY2ZlMDRmZDA5ZmQwMWZkMDdmZDAzZmQwOWZiMGJmZDAxZmQwN2ZkMDJmZDBiZmIwOGZkMDNmZTBiZmQwZGZjMGRmZDE5ZjYwN2ZkMTFmZDA4ZmIwY2Y5MGJmYjA5ZmIwMmZlMDlmZDBjZmQwMWZkMDdmZDAyZmQwZGZkMDhmODBjZmEwOWZjMDlmYTFhZjYwN2ZkMTFmZDdjZmQ2OWZiMGZmYjc3ZmEnO1xuIiwKICAiaW1wb3J0ICogYXMgd2ViZ2wyIGZyb20gJy4uLy4uLy4uL2dyYXBoaWNzL3dlYmdsMic7XG5cbi8vIGltcG9ydCAqIGFzIHNoYWRlcnMgZnJvbSAnLi9zaGFkZXJzJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHRleHRSZW5kZXJlclZlcnRleCBmcm9tICcuL3NoYWRlcnMvdGV4dC1yZW5kZXJlci5nbHNsLnZlcnQnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHRleHRSZW5kZXJlckZyYWdtZW50IGZyb20gJy4vc2hhZGVycy90ZXh0LXJlbmRlcmVyLmdsc2wuZnJhZyc7XG5cbmltcG9ydCB7IGFzY2lpVGV4dHVyZUhleCB9IGZyb20gJy4vaW50ZXJuYWxzL2FzY2lpVGV4dHVyZUhleCc7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5jb25zdCBrX2dyaWRTaXplOiBnbG0uUmVhZG9ubHlWZWMyID0gWzE2LCA2XTtcbmNvbnN0IGtfdGV4Q29vcmQ6IGdsbS5SZWFkb25seVZlYzIgPSBbMSAvIGtfZ3JpZFNpemVbMF0sIDEgLyBrX2dyaWRTaXplWzFdXTtcblxuY29uc3Qga19idWZmZXJTaXplID0gOSAqIDEwMjQgKiA0O1xuXG50eXBlIEhvcml6b250YWxUZXh0QWxpZ24gPSAnbGVmdCcgfCAnY2VudGVyZWQnIHwgJ3JpZ2h0JztcbnR5cGUgVmVydGljYWxUZXh0QWxpZ24gPSAndG9wJyB8ICdjZW50ZXJlZCcgfCAnYm90dG9tJztcblxuZXhwb3J0IGludGVyZmFjZSBJVGV4dFJlbmRlcmVyIHtcbiAgc2V0VGV4dEFsaWduKFxuICAgIGluSG9yaXpvbnRhbFRleHRBbGlnbjogSG9yaXpvbnRhbFRleHRBbGlnbixcbiAgICBpblZlcnRpY2FsVGV4dEFsaWduOiBWZXJ0aWNhbFRleHRBbGlnblxuICApOiB0aGlzO1xuICBzZXRUZXh0U2NhbGUoaW5TY2FsZTogbnVtYmVyKTogdGhpcztcbiAgc2V0VGV4dENvbG9yKGluUmVkOiBudW1iZXIsIGluR3JlZW46IG51bWJlciwgaW5CbHVlOiBudW1iZXIpOiB0aGlzO1xuXG4gIHB1c2hUZXh0KGluTWVzc2FnZTogc3RyaW5nLCBpblBvc2l0aW9uOiBnbG0uUmVhZG9ubHlWZWMyKTogdGhpcztcblxuICBmbHVzaChjb21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCk6IHRoaXM7XG4gIGNsZWFyKCk6IHRoaXM7XG59XG5cbmV4cG9ydCBjbGFzcyBUZXh0UmVuZGVyZXIgaW1wbGVtZW50cyBJVGV4dFJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfc2hhZGVyOiB3ZWJnbDIuSVVuYm91bmRTaGFkZXI7XG4gIHByaXZhdGUgX2dlb21ldHJ5OiB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5O1xuICBwcml2YXRlIF90ZXh0dXJlOiB3ZWJnbDIuSVVuYm91bmRUZXh0dXJlID0gbmV3IHdlYmdsMi5UZXh0dXJlKCk7XG4gIHByaXZhdGUgX3RleENvb3JkTWFwOiBNYXA8c3RyaW5nLCBnbG0uUmVhZG9ubHlWZWMyPjtcblxuICBwcml2YXRlIF9idWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KGtfYnVmZmVyU2l6ZSk7XG4gIHByaXZhdGUgX2N1cnJlbnRTaXplOiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgX3RleHRTY2FsZTogbnVtYmVyID0gMTQ7XG4gIHByaXZhdGUgX3RleHRDb2xvcjogZ2xtLnZlYzMgPSBbMSwgMSwgMV07XG5cbiAgcHJpdmF0ZSBfaG9yaXpvbnRhbFRleHRBbGlnbjogSG9yaXpvbnRhbFRleHRBbGlnbiA9ICdsZWZ0JztcbiAgcHJpdmF0ZSBfdmVydGljYWxUZXh0QWxpZ246IFZlcnRpY2FsVGV4dEFsaWduID0gJ3RvcCc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2hhZGVyID0gbmV3IHdlYmdsMi5TaGFkZXJQcm9ncmFtKCdUZXh0UmVuZGVyZXInLCB7XG4gICAgICB2ZXJ0ZXhTcmM6IHRleHRSZW5kZXJlclZlcnRleCxcbiAgICAgIGZyYWdtZW50U3JjOiB0ZXh0UmVuZGVyZXJGcmFnbWVudCxcbiAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgJ2FfdmVydGV4X3Bvc2l0aW9uJyxcbiAgICAgICAgJ2FfdmVydGV4X3RleENvb3JkJyxcbiAgICAgICAgJ2Ffb2Zmc2V0X3Bvc2l0aW9uJyxcbiAgICAgICAgJ2Ffb2Zmc2V0X3RleENvb3JkJyxcbiAgICAgICAgJ2Ffb2Zmc2V0X2NvbG9yJyxcbiAgICAgICAgJ2Ffb2Zmc2V0X3NjYWxlJ1xuICAgICAgXSxcbiAgICAgIHVuaWZvcm1zOiBbJ3VfY29tcG9zZWRNYXRyaXgnLCAndV90ZXh0dXJlJ11cbiAgICB9KTtcblxuICAgIGNvbnN0IGdlb0J1aWxkZXIgPSBuZXcgd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeUJ1aWxkZXIoKTtcbiAgICBnZW9CdWlsZGVyXG4gICAgICAucmVzZXQoKVxuICAgICAgLnNldFByaW1pdGl2ZVR5cGUoJ3RyaWFuZ2xlcycpXG4gICAgICAuYWRkVmJvKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X3Bvc2l0aW9uJywgJ3ZlYzJmJylcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X3RleENvb3JkJywgJ3ZlYzJmJylcbiAgICAgIC5zZXRTdHJpZGUoNCAqIDQpXG4gICAgICAuYWRkVmJvKClcbiAgICAgIC5zZXRWYm9Bc0R5bmFtaWMoKVxuICAgICAgLnNldFZib0FzSW5zdGFuY2VkKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2Ffb2Zmc2V0X3Bvc2l0aW9uJywgJ3ZlYzNmJylcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2Ffb2Zmc2V0X3RleENvb3JkJywgJ3ZlYzJmJylcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2Ffb2Zmc2V0X2NvbG9yJywgJ3ZlYzNmJylcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2Ffb2Zmc2V0X3NjYWxlJywgJ2Zsb2F0JylcbiAgICAgIC5zZXRTdHJpZGUoOSAqIDQpO1xuXG4gICAgdGhpcy5fZ2VvbWV0cnkgPSBuZXcgd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeShcbiAgICAgIHRoaXMuX3NoYWRlcixcbiAgICAgIGdlb0J1aWxkZXIuZ2V0RGVmKClcbiAgICApO1xuXG4gICAgdHlwZSBWZXJ0ZXggPSB7IHBvc2l0aW9uOiBnbG0uUmVhZG9ubHlWZWMyOyB0ZXhDb29yZDogZ2xtLlJlYWRvbmx5VmVjMiB9O1xuXG4gICAgY29uc3QgdmVydGljZXM6IFtWZXJ0ZXgsIFZlcnRleCwgVmVydGV4LCBWZXJ0ZXhdID0gW1xuICAgICAge1xuICAgICAgICBwb3NpdGlvbjogWyswLjUsIC0wLjVdLFxuICAgICAgICB0ZXhDb29yZDogW2tfdGV4Q29vcmRbMF0gKiAxLCBrX3RleENvb3JkWzFdICogMV1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBvc2l0aW9uOiBbLTAuNSwgLTAuNV0sXG4gICAgICAgIHRleENvb3JkOiBba190ZXhDb29yZFswXSAqIDAsIGtfdGV4Q29vcmRbMV0gKiAxXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcG9zaXRpb246IFsrMC41LCArMC41XSxcbiAgICAgICAgdGV4Q29vcmQ6IFtrX3RleENvb3JkWzBdICogMSwga190ZXhDb29yZFsxXSAqIDBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwb3NpdGlvbjogWy0wLjUsICswLjVdLFxuICAgICAgICB0ZXhDb29yZDogW2tfdGV4Q29vcmRbMF0gKiAwLCBrX3RleENvb3JkWzFdICogMF1cbiAgICAgIH1cbiAgICBdO1xuXG4gICAgY29uc3QgaW5kaWNlcyA9IFsxLCAwLCAyLCAxLCAyLCAzXTtcblxuICAgIGNvbnN0IGxldHRlclZlcnRpY2VzOiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgaW5kZXggb2YgaW5kaWNlcykge1xuICAgICAgY29uc3QgdmVydGV4ID0gdmVydGljZXNbaW5kZXhdO1xuICAgICAgbGV0dGVyVmVydGljZXMucHVzaChcbiAgICAgICAgdmVydGV4LnBvc2l0aW9uWzBdLFxuICAgICAgICB2ZXJ0ZXgucG9zaXRpb25bMV0sXG4gICAgICAgIHZlcnRleC50ZXhDb29yZFswXSxcbiAgICAgICAgdmVydGV4LnRleENvb3JkWzFdXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuX2dlb21ldHJ5LmFsbG9jYXRlQnVmZmVyKDAsIGxldHRlclZlcnRpY2VzLCBsZXR0ZXJWZXJ0aWNlcy5sZW5ndGgpO1xuICAgIHRoaXMuX2dlb21ldHJ5LnNldFByaW1pdGl2ZUNvdW50KGxldHRlclZlcnRpY2VzLmxlbmd0aCAvIDQpO1xuXG4gICAgdGhpcy5fdGV4Q29vcmRNYXAgPSBuZXcgTWFwPHN0cmluZywgZ2xtLlJlYWRvbmx5VmVjMj4oW1xuICAgICAgWycgJywgWzAgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWychJywgWzEgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydcIicsIFsyICoga190ZXhDb29yZFswXSwgMCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnIycsIFszICoga190ZXhDb29yZFswXSwgMCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnJCcsIFs0ICoga190ZXhDb29yZFswXSwgMCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnJScsIFs1ICoga190ZXhDb29yZFswXSwgMCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnJicsIFs2ICoga190ZXhDb29yZFswXSwgMCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFtcIidcIiwgWzcgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWycoJywgWzggKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWycpJywgWzkgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWycqJywgWzEwICoga190ZXhDb29yZFswXSwgMCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnKycsIFsxMSAqIGtfdGV4Q29vcmRbMF0sIDAgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJywnLCBbMTIgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyctJywgWzEzICoga190ZXhDb29yZFswXSwgMCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnLicsIFsxNCAqIGtfdGV4Q29vcmRbMF0sIDAgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJy8nLCBbMTUgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuXG4gICAgICBbJzAnLCBbMCAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzEnLCBbMSAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzInLCBbMiAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzMnLCBbMyAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzQnLCBbNCAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzUnLCBbNSAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzYnLCBbNiAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzcnLCBbNyAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzgnLCBbOCAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzknLCBbOSAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzonLCBbMTAgKiBrX3RleENvb3JkWzBdLCAxICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyc7JywgWzExICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnPCcsIFsxMiAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJz0nLCBbMTMgKiBrX3RleENvb3JkWzBdLCAxICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyc+JywgWzE0ICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnPycsIFsxNSAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG5cbiAgICAgIFsnQCcsIFswICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnQScsIFsxICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnQicsIFsyICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnQycsIFszICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnRCcsIFs0ICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnRScsIFs1ICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnRicsIFs2ICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnRycsIFs3ICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnSCcsIFs4ICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnSScsIFs5ICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnSicsIFsxMCAqIGtfdGV4Q29vcmRbMF0sIDIgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ0snLCBbMTEgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydMJywgWzEyICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnTScsIFsxMyAqIGtfdGV4Q29vcmRbMF0sIDIgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ04nLCBbMTQgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydPJywgWzE1ICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcblxuICAgICAgWydQJywgWzAgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydRJywgWzEgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydSJywgWzIgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydTJywgWzMgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydUJywgWzQgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydVJywgWzUgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydWJywgWzYgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydXJywgWzcgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydYJywgWzggKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydZJywgWzkgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydaJywgWzEwICoga190ZXhDb29yZFswXSwgMyAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnWycsIFsxMSAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1xcXFwnLCBbMTIgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyddJywgWzEzICoga190ZXhDb29yZFswXSwgMyAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnXicsIFsxNCAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ18nLCBbMTUgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuXG4gICAgICBbJ2AnLCBbMCAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2EnLCBbMSAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2InLCBbMiAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2MnLCBbMyAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2QnLCBbNCAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2UnLCBbNSAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2YnLCBbNiAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2cnLCBbNyAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2gnLCBbOCAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2knLCBbOSAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2onLCBbMTAgKiBrX3RleENvb3JkWzBdLCA0ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydrJywgWzExICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnbCcsIFsxMiAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ20nLCBbMTMgKiBrX3RleENvb3JkWzBdLCA0ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyduJywgWzE0ICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnbycsIFsxNSAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG5cbiAgICAgIFsncCcsIFswICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsncScsIFsxICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsncicsIFsyICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsncycsIFszICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsndCcsIFs0ICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsndScsIFs1ICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsndicsIFs2ICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsndycsIFs3ICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsneCcsIFs4ICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsneScsIFs5ICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsneicsIFsxMCAqIGtfdGV4Q29vcmRbMF0sIDUgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ3snLCBbMTEgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyd8JywgWzEyICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnfScsIFsxMyAqIGtfdGV4Q29vcmRbMF0sIDUgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ34nLCBbMTQgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dXG4gICAgXSk7XG5cbiAgICBjb25zdCB3aWR0aCA9IDI1NjtcbiAgICBjb25zdCBoZWlnaHQgPSA5NjtcbiAgICBjb25zdCBpbWFnZVBpeGVscyA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0ICogNCk7XG4gICAge1xuICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBhc2NpaVRleHR1cmVIZXgubGVuZ3RoOyBpaSArPSAyKSB7XG4gICAgICAgIGxldCBjdXJyU2l6ZSA9XG4gICAgICAgICAgcGFyc2VJbnQoYCR7YXNjaWlUZXh0dXJlSGV4LnN1YnN0cmluZyhpaSwgaWkgKyAyKX0wMDAwMDBgLCAxNikgPj4gMjQ7XG5cbiAgICAgICAgbGV0IGN1cnJWYWwgPSAwO1xuICAgICAgICBpZiAoY3VyclNpemUgPCAwKSB7XG4gICAgICAgICAgY3VyclNpemUgPSAtY3VyclNpemU7XG4gICAgICAgICAgY3VyclZhbCA9IDI1NTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBjdXJyU2l6ZTsgKytpaSkge1xuICAgICAgICAgIGltYWdlUGl4ZWxzW2luZGV4ICogNCArIDBdID0gY3VyclZhbDtcbiAgICAgICAgICBpbWFnZVBpeGVsc1tpbmRleCAqIDQgKyAxXSA9IGN1cnJWYWw7XG4gICAgICAgICAgaW1hZ2VQaXhlbHNbaW5kZXggKiA0ICsgMl0gPSBjdXJyVmFsO1xuICAgICAgICAgIGltYWdlUGl4ZWxzW2luZGV4ICogNCArIDNdID0gY3VyclZhbDtcbiAgICAgICAgICArK2luZGV4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fdGV4dHVyZS5pbml0aWFsaXplKCk7XG4gICAgdGhpcy5fdGV4dHVyZS5iaW5kKChib3VuZFRleHR1cmUpID0+IHtcbiAgICAgIGJvdW5kVGV4dHVyZS5sb2FkRnJvbU1lbW9yeSh3aWR0aCwgaGVpZ2h0LCBpbWFnZVBpeGVscyk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRUZXh0QWxpZ24oXG4gICAgaW5Ib3Jpem9udGFsVGV4dEFsaWduOiBIb3Jpem9udGFsVGV4dEFsaWduLFxuICAgIGluVmVydGljYWxUZXh0QWxpZ246IFZlcnRpY2FsVGV4dEFsaWduXG4gICk6IHRoaXMge1xuICAgIHRoaXMuX2hvcml6b250YWxUZXh0QWxpZ24gPSBpbkhvcml6b250YWxUZXh0QWxpZ247XG4gICAgdGhpcy5fdmVydGljYWxUZXh0QWxpZ24gPSBpblZlcnRpY2FsVGV4dEFsaWduO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0VGV4dFNjYWxlKGluU2NhbGU6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuX3RleHRTY2FsZSA9IGluU2NhbGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZXRUZXh0Q29sb3IoaW5SZWQ6IG51bWJlciwgaW5HcmVlbjogbnVtYmVyLCBpbkJsdWU6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuX3RleHRDb2xvclswXSA9IGluUmVkO1xuICAgIHRoaXMuX3RleHRDb2xvclsxXSA9IGluR3JlZW47XG4gICAgdGhpcy5fdGV4dENvbG9yWzJdID0gaW5CbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVzaFRleHQoaW5NZXNzYWdlOiBzdHJpbmcsIGluUG9zaXRpb246IGdsbS5SZWFkb25seVZlYzIpOiB0aGlzIHtcbiAgICAvL1xuICAgIC8vIHZhbGlkYXRlXG4gICAgLy9cblxuICAgIGlmIChpbk1lc3NhZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RleHRTY2FsZSA8PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBhbGxMaW5lV2lkdGg6IG51bWJlcltdID0gWzBdO1xuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBpbk1lc3NhZ2UubGVuZ3RoOyArK2lpKSB7XG4gICAgICBpZiAoaW5NZXNzYWdlW2lpXSA9PSAnXFxuJykge1xuICAgICAgICBhbGxMaW5lV2lkdGgucHVzaCgwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsbExpbmVXaWR0aFthbGxMaW5lV2lkdGgubGVuZ3RoIC0gMV0gKz0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWxsTGluZVdpZHRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIGZvciAoY29uc3QgY3VyckxpbmUgb2YgYWxsTGluZVdpZHRoKSB7XG4gICAgLy8gICBpZiAoY3VyckxpbmUgPT09IDApIHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXM7XG4gICAgLy8gICB9XG4gICAgLy8gfVxuXG4gICAgbGV0IGxpbmVJbmRleCA9IDA7XG5cbiAgICBjb25zdCBjdXJyUG9zOiBnbG0udmVjMiA9IFswLCAwXTtcblxuICAgIC8vXG4gICAgLy8gcHJlIHByb2Nlc3NcbiAgICAvL1xuXG4gICAgY29uc3QgaFNjYWxlID0gdGhpcy5fdGV4dFNjYWxlICogMC41O1xuXG4gICAgc3dpdGNoICh0aGlzLl9ob3Jpem9udGFsVGV4dEFsaWduKSB7XG4gICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgY3VyclBvc1swXSA9IGluUG9zaXRpb25bMF07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2VudGVyZWQnOlxuICAgICAgICBjdXJyUG9zWzBdID0gaW5Qb3NpdGlvblswXSAtIGFsbExpbmVXaWR0aFtsaW5lSW5kZXhdICogaFNjYWxlICsgaFNjYWxlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgY3VyclBvc1swXSA9XG4gICAgICAgICAgaW5Qb3NpdGlvblswXSAtXG4gICAgICAgICAgYWxsTGluZVdpZHRoW2xpbmVJbmRleF0gKiB0aGlzLl90ZXh0U2NhbGUgK1xuICAgICAgICAgIHRoaXMuX3RleHRTY2FsZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLl92ZXJ0aWNhbFRleHRBbGlnbikge1xuICAgICAgY2FzZSAndG9wJzpcbiAgICAgICAgY3VyclBvc1sxXSA9IGluUG9zaXRpb25bMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2VudGVyZWQnOlxuICAgICAgICBjdXJyUG9zWzFdID0gaW5Qb3NpdGlvblsxXSArIGFsbExpbmVXaWR0aC5sZW5ndGggKiBoU2NhbGUgLSBoU2NhbGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgY3VyclBvc1sxXSA9XG4gICAgICAgICAgaW5Qb3NpdGlvblsxXSAtIChhbGxMaW5lV2lkdGgubGVuZ3RoIC0gMSkgKiB0aGlzLl90ZXh0U2NhbGU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gcHJvY2Vzc1xuICAgIC8vXG5cbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgaW5NZXNzYWdlLmxlbmd0aDsgKytpaSkge1xuICAgICAgY29uc3QgbGV0dGVyID0gaW5NZXNzYWdlW2lpXTtcblxuICAgICAgaWYgKGxldHRlciA9PSAnXFxuJykge1xuICAgICAgICBsaW5lSW5kZXggKz0gMTtcblxuICAgICAgICAvLyBnbyBiYWNrXG4gICAgICAgIHN3aXRjaCAodGhpcy5faG9yaXpvbnRhbFRleHRBbGlnbikge1xuICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgY3VyclBvc1swXSA9IGluUG9zaXRpb25bMF07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjZW50ZXJlZCc6XG4gICAgICAgICAgICBjdXJyUG9zWzBdID1cbiAgICAgICAgICAgICAgaW5Qb3NpdGlvblswXSAtIGFsbExpbmVXaWR0aFtsaW5lSW5kZXhdICogaFNjYWxlICsgaFNjYWxlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgY3VyclBvc1swXSA9XG4gICAgICAgICAgICAgIGluUG9zaXRpb25bMF0gLVxuICAgICAgICAgICAgICBhbGxMaW5lV2lkdGhbbGluZUluZGV4XSAqIHRoaXMuX3RleHRTY2FsZSArXG4gICAgICAgICAgICAgIHRoaXMuX3RleHRTY2FsZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VyclBvc1sxXSAtPSB0aGlzLl90ZXh0U2NhbGU7IC8vIGdvIGRvd25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3B1c2hMZXR0ZXIobGV0dGVyLCBjdXJyUG9zKTtcbiAgICAgICAgLy8gZ28gcmlnaHRcbiAgICAgICAgY3VyclBvc1swXSArPSB0aGlzLl90ZXh0U2NhbGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHJpdmF0ZSBfcHVzaExldHRlcihpbkNoYXJhY3Rlcjogc3RyaW5nLCBpblBvc2l0aW9uOiBnbG0uUmVhZG9ubHlWZWMyKSB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRTaXplICsgOSAqIDEwID49IHRoaXMuX2J1ZmZlci5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0ZXhDb29yZCA9IHRoaXMuX3RleENvb3JkTWFwLmdldChpbkNoYXJhY3Rlcik7XG5cbiAgICBpZiAoIXRleENvb3JkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBmYWlsIHRvIGZpbmQgYSBsZXR0ZXIsIGxldHRlcj0ke2luQ2hhcmFjdGVyfWApO1xuXG4gICAgZm9yIChsZXQgeXkgPSAtMTsgeXkgPD0gMTsgKyt5eSkge1xuICAgICAgZm9yIChsZXQgeHggPSAtMTsgeHggPD0gMTsgKyt4eCkge1xuICAgICAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblBvc2l0aW9uWzBdICsgMiAqIHh4O1xuICAgICAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblBvc2l0aW9uWzFdICsgMiAqIHl5O1xuICAgICAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSAtMC4xO1xuICAgICAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSB0ZXhDb29yZFswXTtcbiAgICAgICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gdGV4Q29vcmRbMV07XG4gICAgICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IDA7IC8vIGJsYWNrQ29sb3JcbiAgICAgICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gMDsgLy8gYmxhY2tDb2xvclxuICAgICAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSAwOyAvLyBibGFja0NvbG9yXG4gICAgICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IHRoaXMuX3RleHRTY2FsZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblBvc2l0aW9uWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluUG9zaXRpb25bMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gMC4wO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IHRleENvb3JkWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IHRleENvb3JkWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IHRoaXMuX3RleHRDb2xvclswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSB0aGlzLl90ZXh0Q29sb3JbMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gdGhpcy5fdGV4dENvbG9yWzJdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IHRoaXMuX3RleHRTY2FsZTtcbiAgfVxuXG4gIGZsdXNoKGNvbXBvc2VkTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQ0KTogdGhpcyB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRTaXplID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB0aGlzLl9zaGFkZXIuYmluZCgoYm91bmRTaGFkZXIpID0+IHtcbiAgICAgIGJvdW5kU2hhZGVyLnNldE1hdHJpeDRVbmlmb3JtKCd1X2NvbXBvc2VkTWF0cml4JywgY29tcG9zZWRNYXRyaXgpO1xuICAgICAgYm91bmRTaGFkZXIuc2V0VGV4dHVyZVVuaWZvcm0oJ3VfdGV4dHVyZScsIHRoaXMuX3RleHR1cmUsIDApO1xuXG4gICAgICB0aGlzLl9nZW9tZXRyeS5hbGxvY2F0ZUJ1ZmZlcigxLCB0aGlzLl9idWZmZXIsIHRoaXMuX2N1cnJlbnRTaXplKTtcbiAgICAgIHRoaXMuX2dlb21ldHJ5LnNldEluc3RhbmNlZENvdW50KHRoaXMuX2N1cnJlbnRTaXplIC8gOSk7XG4gICAgICB0aGlzLl9nZW9tZXRyeS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHdlYmdsMi5UZXh0dXJlLnVuYmluZCgpO1xuXG4gICAgdGhpcy5jbGVhcigpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjbGVhcigpOiB0aGlzIHtcbiAgICAvLyByZXNldCB2ZXJ0aWNlc1xuICAgIHRoaXMuX2N1cnJlbnRTaXplID0gMDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuIiwKICAiaW1wb3J0ICogYXMgYnJvd3NlciBmcm9tICcuLi8uLi8uLi9zeXN0ZW0vYnJvd3Nlcic7XG5pbXBvcnQgKiBhcyByZW5kZXJlcnMgZnJvbSAnLi4vLi4vLi4vZ3JhcGhpY3MvcmVuZGVyZXJzJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmludGVyZmFjZSBJbmRpY2F0b3Ige1xuICBjZW50ZXI6IGdsbS5SZWFkb25seVZlYzI7XG4gIHNpemU6IGdsbS5SZWFkb25seVZlYzI7XG4gIHRleHQ/OiBzdHJpbmc7XG4gIGxpbmVzPzoge1xuICAgIGE6IGdsbS5SZWFkb25seVZlYzI7XG4gICAgYjogZ2xtLlJlYWRvbmx5VmVjMjtcbiAgICB0aGlja25lc3M6IG51bWJlcjtcbiAgICBjb2xvcjogZ2xtLlJlYWRvbmx5VmVjMztcbiAgfVtdO1xuICBjb2xvcjogZ2xtLlJlYWRvbmx5VmVjMztcbn1cblxuY29uc3QgZGVmYXVsdENvbG9yOiBnbG0uUmVhZG9ubHlWZWMzID0gWzAuMiwgMC4yLCAwLjJdO1xuY29uc3QgYWN0aXZhdGVkQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgPSBbMC4yLCAwLjYsIDAuMl07XG5cbmNvbnN0IF9yZW5kZXJJbmRpY2F0b3IgPSAoXG4gIGN1cnJJbmRpY2F0b3I6IEluZGljYXRvcixcbiAgc3RhY2tSZW5kZXJlcnM6IHJlbmRlcmVycy5JU3RhY2tSZW5kZXJlcnMsXG4gIHRleHRSZW5kZXJlcjogcmVuZGVyZXJzLklUZXh0UmVuZGVyZXJcbikgPT4ge1xuICBjb25zdCB7IGNlbnRlciB9ID0gY3VyckluZGljYXRvcjtcblxuICBzdGFja1JlbmRlcmVycy5wdXNoQ2VudGVyZWRSZWN0YW5nbGUoXG4gICAgZ2xtLnZlYzMuZnJvbVZhbHVlcyhjZW50ZXJbMF0sIGNlbnRlclsxXSwgLTAuMyksXG4gICAgY3VyckluZGljYXRvci5zaXplLFxuICAgIFswLCAwLCAwXVxuICApO1xuXG4gIHN0YWNrUmVuZGVyZXJzLnB1c2hDZW50ZXJlZFJlY3RhbmdsZShcbiAgICBnbG0udmVjMy5mcm9tVmFsdWVzKGNlbnRlclswXSwgY2VudGVyWzFdLCAtMC4yKSxcbiAgICBbY3VyckluZGljYXRvci5zaXplWzBdIC0gMiwgY3VyckluZGljYXRvci5zaXplWzFdIC0gMl0sXG4gICAgY3VyckluZGljYXRvci5jb2xvclxuICApO1xuXG4gIGlmIChjdXJySW5kaWNhdG9yLnRleHQpIHtcbiAgICB0ZXh0UmVuZGVyZXJcbiAgICAgIC5zZXRUZXh0U2NhbGUoMTYpXG4gICAgICAuc2V0VGV4dEFsaWduKCdjZW50ZXJlZCcsICdjZW50ZXJlZCcpXG4gICAgICAucHVzaFRleHQoY3VyckluZGljYXRvci50ZXh0LCBjZW50ZXIpXG4gICAgICAuc2V0VGV4dEFsaWduKCdsZWZ0JywgJ3RvcCcpO1xuICB9XG5cbiAgaWYgKGN1cnJJbmRpY2F0b3IubGluZXMpIHtcbiAgICBjdXJySW5kaWNhdG9yLmxpbmVzLmZvckVhY2goKGN1cnJMaW5lKSA9PiB7XG4gICAgICBzdGFja1JlbmRlcmVycy5wdXNoVGhpY2tMaW5lKFxuICAgICAgICBbY2VudGVyWzBdICsgY3VyckxpbmUuYVswXSwgY2VudGVyWzFdICsgY3VyckxpbmUuYVsxXSwgMF0sXG4gICAgICAgIFtjZW50ZXJbMF0gKyBjdXJyTGluZS5iWzBdLCBjZW50ZXJbMV0gKyBjdXJyTGluZS5iWzFdLCAwXSxcbiAgICAgICAgY3VyckxpbmUudGhpY2tuZXNzLFxuICAgICAgICBjdXJyTGluZS5jb2xvclxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGFkZEtleVN0cm9rZXNXaWRnZXRzID0gKFxuICBpblBvczogZ2xtLlJlYWRvbmx5VmVjMixcbiAgc3RhY2tSZW5kZXJlcnM6IHJlbmRlcmVycy5JU3RhY2tSZW5kZXJlcnMsXG4gIHRleHRSZW5kZXJlcjogcmVuZGVyZXJzLklUZXh0UmVuZGVyZXJcbikgPT4ge1xuICBfcmVuZGVySW5kaWNhdG9yKFxuICAgIHtcbiAgICAgIGNlbnRlcjogW2luUG9zWzBdLCBpblBvc1sxXV0sXG4gICAgICBzaXplOiBbNDAsIDQwXSxcbiAgICAgIHRleHQ6ICdBXFxuUScsXG4gICAgICBjb2xvcjogYnJvd3Nlci5HbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdBJywgJ1EnKVxuICAgICAgICA/IGFjdGl2YXRlZENvbG9yXG4gICAgICAgIDogZGVmYXVsdENvbG9yXG4gICAgfSxcbiAgICBzdGFja1JlbmRlcmVycyxcbiAgICB0ZXh0UmVuZGVyZXJcbiAgKTtcblxuICBfcmVuZGVySW5kaWNhdG9yKFxuICAgIHtcbiAgICAgIGNlbnRlcjogW2luUG9zWzBdICsgNDUgKiAxLCBpblBvc1sxXV0sXG4gICAgICBzaXplOiBbNDAsIDQwXSxcbiAgICAgIHRleHQ6ICdTJyxcbiAgICAgIGNvbG9yOiBicm93c2VyLkdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ1MnKVxuICAgICAgICA/IGFjdGl2YXRlZENvbG9yXG4gICAgICAgIDogZGVmYXVsdENvbG9yXG4gICAgfSxcbiAgICBzdGFja1JlbmRlcmVycyxcbiAgICB0ZXh0UmVuZGVyZXJcbiAgKTtcblxuICBfcmVuZGVySW5kaWNhdG9yKFxuICAgIHtcbiAgICAgIGNlbnRlcjogW2luUG9zWzBdICsgNDUgKiAxLCBpblBvc1sxXSArIDQ1XSxcbiAgICAgIHNpemU6IFs0MCwgNDBdLFxuICAgICAgdGV4dDogJ1dcXG5aJyxcbiAgICAgIGNvbG9yOiBicm93c2VyLkdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ1cnLCAnWicpXG4gICAgICAgID8gYWN0aXZhdGVkQ29sb3JcbiAgICAgICAgOiBkZWZhdWx0Q29sb3JcbiAgICB9LFxuICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgIHRleHRSZW5kZXJlclxuICApO1xuXG4gIF9yZW5kZXJJbmRpY2F0b3IoXG4gICAge1xuICAgICAgY2VudGVyOiBbaW5Qb3NbMF0gKyA0NSAqIDIsIGluUG9zWzFdXSxcbiAgICAgIHNpemU6IFs0MCwgNDBdLFxuICAgICAgdGV4dDogJ0QnLFxuICAgICAgY29sb3I6IGJyb3dzZXIuR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnRCcpXG4gICAgICAgID8gYWN0aXZhdGVkQ29sb3JcbiAgICAgICAgOiBkZWZhdWx0Q29sb3JcbiAgICB9LFxuICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgIHRleHRSZW5kZXJlclxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZEFycm93U3Ryb2tlc1dpZGdldHMgPSAoXG4gIGluUG9zOiBnbG0uUmVhZG9ubHlWZWMyLFxuICBzdGFja1JlbmRlcmVyczogcmVuZGVyZXJzLklTdGFja1JlbmRlcmVycyxcbiAgdGV4dFJlbmRlcmVyOiByZW5kZXJlcnMuSVRleHRSZW5kZXJlclxuKSA9PiB7XG4gIC8vIGFycm93IGxlZnRcbiAgX3JlbmRlckluZGljYXRvcihcbiAgICB7XG4gICAgICBjZW50ZXI6IFtpblBvc1swXSwgaW5Qb3NbMV1dLFxuICAgICAgc2l6ZTogWzQwLCA0MF0sXG4gICAgICBsaW5lczogW1xuICAgICAgICB7IGE6IFsxNSwgMF0sIGI6IFstOCwgMF0sIHRoaWNrbmVzczogNiwgY29sb3I6IFsxLCAxLCAxXSB9LFxuICAgICAgICB7IGE6IFswLCAxMF0sIGI6IFstMTIsIC0yXSwgdGhpY2tuZXNzOiA2LCBjb2xvcjogWzEsIDEsIDFdIH0sXG4gICAgICAgIHsgYTogWzAsIC0xMF0sIGI6IFstMTIsIDJdLCB0aGlja25lc3M6IDYsIGNvbG9yOiBbMSwgMSwgMV0gfVxuICAgICAgXSxcbiAgICAgIGNvbG9yOiBicm93c2VyLkdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0Fycm93TGVmdCcpXG4gICAgICAgID8gYWN0aXZhdGVkQ29sb3JcbiAgICAgICAgOiBkZWZhdWx0Q29sb3JcbiAgICB9LFxuICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgIHRleHRSZW5kZXJlclxuICApO1xuXG4gIC8vIGFycm93IGRvd25cbiAgX3JlbmRlckluZGljYXRvcihcbiAgICB7XG4gICAgICBjZW50ZXI6IFtpblBvc1swXSArIDQ1LCBpblBvc1sxXV0sXG4gICAgICBzaXplOiBbNDAsIDQwXSxcbiAgICAgIGxpbmVzOiBbXG4gICAgICAgIHsgYTogWzAsIDE1XSwgYjogWzAsIC04XSwgdGhpY2tuZXNzOiA2LCBjb2xvcjogWzEsIDEsIDFdIH0sXG4gICAgICAgIHsgYTogWzEwLCAwXSwgYjogWy0yLCAtMTJdLCB0aGlja25lc3M6IDYsIGNvbG9yOiBbMSwgMSwgMV0gfSxcbiAgICAgICAgeyBhOiBbLTEwLCAwXSwgYjogWzIsIC0xMl0sIHRoaWNrbmVzczogNiwgY29sb3I6IFsxLCAxLCAxXSB9XG4gICAgICBdLFxuICAgICAgY29sb3I6IGJyb3dzZXIuR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnQXJyb3dEb3duJylcbiAgICAgICAgPyBhY3RpdmF0ZWRDb2xvclxuICAgICAgICA6IGRlZmF1bHRDb2xvclxuICAgIH0sXG4gICAgc3RhY2tSZW5kZXJlcnMsXG4gICAgdGV4dFJlbmRlcmVyXG4gICk7XG5cbiAgLy8gYXJyb3cgdXBcbiAgX3JlbmRlckluZGljYXRvcihcbiAgICB7XG4gICAgICBjZW50ZXI6IFtpblBvc1swXSArIDQ1LCBpblBvc1sxXSArIDQ1XSxcbiAgICAgIHNpemU6IFs0MCwgNDBdLFxuICAgICAgbGluZXM6IFtcbiAgICAgICAgeyBhOiBbMCwgLTE1XSwgYjogWzAsIDhdLCB0aGlja25lc3M6IDYsIGNvbG9yOiBbMSwgMSwgMV0gfSxcbiAgICAgICAgeyBhOiBbMTAsIDBdLCBiOiBbLTIsIDEyXSwgdGhpY2tuZXNzOiA2LCBjb2xvcjogWzEsIDEsIDFdIH0sXG4gICAgICAgIHsgYTogWy0xMCwgMF0sIGI6IFsyLCAxMl0sIHRoaWNrbmVzczogNiwgY29sb3I6IFsxLCAxLCAxXSB9XG4gICAgICBdLFxuICAgICAgY29sb3I6IGJyb3dzZXIuR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnQXJyb3dVcCcpXG4gICAgICAgID8gYWN0aXZhdGVkQ29sb3JcbiAgICAgICAgOiBkZWZhdWx0Q29sb3JcbiAgICB9LFxuICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgIHRleHRSZW5kZXJlclxuICApO1xuXG4gIC8vIGFycm93IHJpZ2h0XG4gIF9yZW5kZXJJbmRpY2F0b3IoXG4gICAge1xuICAgICAgY2VudGVyOiBbaW5Qb3NbMF0gKyA0NSAqIDIsIGluUG9zWzFdXSxcbiAgICAgIHNpemU6IFs0MCwgNDBdLFxuICAgICAgbGluZXM6IFtcbiAgICAgICAgeyBhOiBbLTE1LCAwXSwgYjogWzgsIDBdLCB0aGlja25lc3M6IDYsIGNvbG9yOiBbMSwgMSwgMV0gfSxcbiAgICAgICAgeyBhOiBbMCwgMTBdLCBiOiBbMTIsIC0yXSwgdGhpY2tuZXNzOiA2LCBjb2xvcjogWzEsIDEsIDFdIH0sXG4gICAgICAgIHsgYTogWzAsIC0xMF0sIGI6IFsxMiwgMl0sIHRoaWNrbmVzczogNiwgY29sb3I6IFsxLCAxLCAxXSB9XG4gICAgICBdLFxuICAgICAgY29sb3I6IGJyb3dzZXIuR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnQXJyb3dSaWdodCcpXG4gICAgICAgID8gYWN0aXZhdGVkQ29sb3JcbiAgICAgICAgOiBkZWZhdWx0Q29sb3JcbiAgICB9LFxuICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgIHRleHRSZW5kZXJlclxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZEtleXNUb3VjaGVzV2lkZ2V0cyA9IChcbiAgaW5DYW52YXNFbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudCxcbiAgaW5Qb3M6IGdsbS5SZWFkb25seVZlYzIsXG4gIHN0YWNrUmVuZGVyZXJzOiByZW5kZXJlcnMuSVN0YWNrUmVuZGVyZXJzLFxuICB0ZXh0UmVuZGVyZXI6IHJlbmRlcmVycy5JVGV4dFJlbmRlcmVyXG4pID0+IHtcbiAgaWYgKGJyb3dzZXIuR2xvYmFsVG91Y2hNYW5hZ2VyLmlzU3VwcG9ydGVkKGluQ2FudmFzRWxlbWVudCkpIHtcbiAgICBfcmVuZGVySW5kaWNhdG9yKFxuICAgICAge1xuICAgICAgICBjZW50ZXI6IFtpblBvc1swXSArIDExNSwgaW5Qb3NbMV1dLFxuICAgICAgICBzaXplOiBbMjMwLCA2MF0sXG4gICAgICAgIHRleHQ6ICdUb3VjaCBFdmVudHNcXG5TdXBwb3J0ZWRcXG4oZG91YmxlIHRhcCknLFxuICAgICAgICBjb2xvcjogWzAsIDAuNSwgMF1cbiAgICAgIH0sXG4gICAgICBzdGFja1JlbmRlcmVycyxcbiAgICAgIHRleHRSZW5kZXJlclxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgX3JlbmRlckluZGljYXRvcihcbiAgICAgIHtcbiAgICAgICAgY2VudGVyOiBbaW5Qb3NbMF0gKyAxMTUsIGluUG9zWzFdXSxcbiAgICAgICAgc2l6ZTogWzIzMCwgNjBdLFxuICAgICAgICB0ZXh0OiAnVG91Y2ggRXZlbnRzXFxuTm90IFN1cHBvcnRlZCcsXG4gICAgICAgIGNvbG9yOiBbMC41LCAwLCAwXVxuICAgICAgfSxcbiAgICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgICAgdGV4dFJlbmRlcmVyXG4gICAgKTtcbiAgfVxuXG4gIGlmIChicm93c2VyLkdsb2JhbFBvaW50ZXJMb2NrTWFuYWdlci5jYW5CZVBvaW50ZXJMb2NrZWQoaW5DYW52YXNFbGVtZW50KSkge1xuICAgIF9yZW5kZXJJbmRpY2F0b3IoXG4gICAgICB7XG4gICAgICAgIGNlbnRlcjogW2luUG9zWzBdICsgMTA1LCBpblBvc1sxXSArIDcwXSxcbiAgICAgICAgc2l6ZTogWzIxMCwgNjBdLFxuICAgICAgICB0ZXh0OiAnTW91c2VcXG5TdXBwb3J0ZWQnLFxuICAgICAgICBjb2xvcjogWzAsIDAuNSwgMF1cbiAgICAgIH0sXG4gICAgICBzdGFja1JlbmRlcmVycyxcbiAgICAgIHRleHRSZW5kZXJlclxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgX3JlbmRlckluZGljYXRvcihcbiAgICAgIHtcbiAgICAgICAgY2VudGVyOiBbaW5Qb3NbMF0gKyAxMDUsIGluUG9zWzFdICsgNzBdLFxuICAgICAgICBzaXplOiBbMjEwLCA2MF0sXG4gICAgICAgIHRleHQ6ICdNb3VzZSBFdmVudHNcXG5Ob3QgU3VwcG9ydGVkJyxcbiAgICAgICAgY29sb3I6IFswLjUsIDAsIDBdXG4gICAgICB9LFxuICAgICAgc3RhY2tSZW5kZXJlcnMsXG4gICAgICB0ZXh0UmVuZGVyZXJcbiAgICApO1xuICB9XG59O1xuXG4vLyBleHBvcnQgY29uc3QgcmVuZGVyQ29udHJvbHMgPSAoXG4vLyAgIGluQ2FudmFzRWxlbWVudDogSFRNTENhbnZhc0VsZW1lbnQsXG4vLyAgIHN0YWNrUmVuZGVyZXJzOiByZW5kZXJlcnMuSVN0YWNrUmVuZGVyZXJzLFxuLy8gICB0ZXh0UmVuZGVyZXI6IHJlbmRlcmVycy5JVGV4dFJlbmRlcmVyXG4vLyApID0+IHtcbi8vICAgLy8gY29uc3QgYWxsSW5kaWNhdG9yOiBJbmRpY2F0b3JbXSA9IFtdO1xuXG4vLyAgIGNvbnN0IGtleUV2ZW50c1BvczogZ2xtLlJlYWRvbmx5VmVjMiA9IFs3ICsgMjAsIDE2NV07XG4vLyAgIGNvbnN0IHRvdWNoRXZlbnRzUG9zOiBnbG0uUmVhZG9ubHlWZWMyID0gWzcgKyAyMCwgMjYwXTtcbi8vICAgY29uc3QgYm9hcmRQb3M6IGdsbS5SZWFkb25seVZlYzIgPSBbNywgMzVdO1xuXG4vLyAgIGFkZEtleVN0cm9rZXNXaWRnZXRzKGtleUV2ZW50c1Bvcywgc3RhY2tSZW5kZXJlcnMsIHRleHRSZW5kZXJlcik7XG4vLyAgIGFkZEFycm93U3Ryb2tlc1dpZGdldHModG91Y2hFdmVudHNQb3MsIHN0YWNrUmVuZGVyZXJzLCB0ZXh0UmVuZGVyZXIpO1xuLy8gICBhZGRLZXlzVG91Y2hlc1dpZGdldHMoaW5DYW52YXNFbGVtZW50LCBib2FyZFBvcywgc3RhY2tSZW5kZXJlcnMsIHRleHRSZW5kZXJlcik7XG4vLyB9O1xuIiwKICAiaW1wb3J0IHsgc3lzdGVtLCBncmFwaGljcyB9IGZyb20gJy4uLy4uLy4uJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBjb25zdCByZW5kZXJGcHNNZXRlciA9IChcbiAgaW5Qb3M6IGdsbS5SZWFkb25seVZlYzMsXG4gIGluU2l6ZTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgaW5GcmFtZVByb2ZpbGVyOiBzeXN0ZW0ubWV0cmljcy5JRnJhbWVQcm9maWxlcixcbiAgaW5TdGFja1JlbmRlcmVyczogZ3JhcGhpY3MucmVuZGVyZXJzLklTdGFja1JlbmRlcmVycyxcbiAgaW5UZXh0UmVuZGVyZXI6IGdyYXBoaWNzLnJlbmRlcmVycy5JVGV4dFJlbmRlcmVyLFxuICBpblNob3dGcHMgPSBmYWxzZVxuKSA9PiB7XG4gIC8vIGZwcyBtZXRlclxuXG4gIGNvbnN0IGtfZGl2aWRlciA9IDU7XG4gIGNvbnN0IGtfdmVydGljYWxTaXplID1cbiAgICBNYXRoLmNlaWwoaW5GcmFtZVByb2ZpbGVyLm1heERlbHRhIC8ga19kaXZpZGVyKSAqIGtfZGl2aWRlcjtcblxuICB7XG4gICAgLy8gYm9yZGVyXG5cbiAgICBpblN0YWNrUmVuZGVyZXJzLnB1c2hPcmlnaW5Cb3VuZFJlY3RhbmdsZShpblBvcywgaW5TaXplLCBbMCwgMCwgMCwgMC41XSk7XG5cbiAgICBjb25zdCBhbGxWZXJ0aWNlczogW1xuICAgICAgZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICAgIGdsbS5SZWFkb25seVZlYzMsXG4gICAgICBnbG0uUmVhZG9ubHlWZWMzLFxuICAgICAgZ2xtLlJlYWRvbmx5VmVjM1xuICAgIF0gPSBbXG4gICAgICBbaW5Qb3NbMF0gKyBpblNpemVbMF0gKiAwLCBpblBvc1sxXSArIGluU2l6ZVsxXSAqIDAsIDBdLFxuICAgICAgW2luUG9zWzBdICsgaW5TaXplWzBdICogMSwgaW5Qb3NbMV0gKyBpblNpemVbMV0gKiAwLCAwXSxcbiAgICAgIFtpblBvc1swXSArIGluU2l6ZVswXSAqIDEsIGluUG9zWzFdICsgaW5TaXplWzFdICogMSwgMF0sXG4gICAgICBbaW5Qb3NbMF0gKyBpblNpemVbMF0gKiAwLCBpblBvc1sxXSArIGluU2l6ZVsxXSAqIDEsIDBdXG4gICAgXTtcblxuICAgIGluU3RhY2tSZW5kZXJlcnMucHVzaExpbmUoYWxsVmVydGljZXNbMF0sIGFsbFZlcnRpY2VzWzFdLCBbMSwgMSwgMV0pO1xuICAgIGluU3RhY2tSZW5kZXJlcnMucHVzaExpbmUoYWxsVmVydGljZXNbMV0sIGFsbFZlcnRpY2VzWzJdLCBbMSwgMSwgMV0pO1xuICAgIGluU3RhY2tSZW5kZXJlcnMucHVzaExpbmUoYWxsVmVydGljZXNbMl0sIGFsbFZlcnRpY2VzWzNdLCBbMSwgMSwgMV0pO1xuICAgIGluU3RhY2tSZW5kZXJlcnMucHVzaExpbmUoYWxsVmVydGljZXNbM10sIGFsbFZlcnRpY2VzWzBdLCBbMSwgMSwgMV0pO1xuICB9IC8vIGJvcmRlclxuXG4gIHtcbiAgICAvLyBkaXZpZGVyc1xuXG4gICAgZm9yIChcbiAgICAgIGxldCBjdXJyRGl2aWRlciA9IGtfZGl2aWRlcjtcbiAgICAgIGN1cnJEaXZpZGVyIDwga192ZXJ0aWNhbFNpemU7XG4gICAgICBjdXJyRGl2aWRlciArPSBrX2RpdmlkZXJcbiAgICApIHtcbiAgICAgIGNvbnN0IHJhdGlvID0gY3VyckRpdmlkZXIgLyBrX3ZlcnRpY2FsU2l6ZTtcblxuICAgICAgY29uc3QgcG9pbnRBOiBnbG0uUmVhZG9ubHlWZWMzID0gW1xuICAgICAgICBpblBvc1swXSArIDAsXG4gICAgICAgIGluUG9zWzFdICsgaW5TaXplWzFdICogcmF0aW8sXG4gICAgICAgIDBcbiAgICAgIF07XG4gICAgICBjb25zdCBwb2ludEI6IGdsbS5SZWFkb25seVZlYzMgPSBbXG4gICAgICAgIGluUG9zWzBdICsgaW5TaXplWzBdLFxuICAgICAgICBpblBvc1sxXSArIGluU2l6ZVsxXSAqIHJhdGlvLFxuICAgICAgICAwXG4gICAgICBdO1xuXG4gICAgICBpblN0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKHBvaW50QSwgcG9pbnRCLCBbMC41LCAwLjUsIDAuNV0pO1xuICAgIH1cbiAgfSAvLyBkaXZpZGVyc1xuXG4gIHtcbiAgICAvLyBjdXJ2ZVxuXG4gICAgaWYgKGluRnJhbWVQcm9maWxlci5mcmFtZXNEZWx0YS5sZW5ndGggPj0gMikge1xuICAgICAgY29uc3Qgd2lkdGhTdGVwID0gaW5TaXplWzBdIC8gaW5GcmFtZVByb2ZpbGVyLmZyYW1lc0RlbHRhLmxlbmd0aDtcblxuICAgICAgbGV0IHByZXZEZWx0YSA9IGluRnJhbWVQcm9maWxlci5mcmFtZXNEZWx0YVswXTtcbiAgICAgIGxldCBwcmV2Q29vcmRYID0gMDtcbiAgICAgIGxldCBwcmV2Q29vcmRZID0gKGluU2l6ZVsxXSAqIHByZXZEZWx0YSkgLyBrX3ZlcnRpY2FsU2l6ZTtcblxuICAgICAgZm9yIChsZXQgaWkgPSAxOyBpaSA8IGluRnJhbWVQcm9maWxlci5mcmFtZXNEZWx0YS5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgY29uc3QgY3VyckRlbHRhID0gaW5GcmFtZVByb2ZpbGVyLmZyYW1lc0RlbHRhW2lpXTtcbiAgICAgICAgY29uc3QgY3VyckNvb3JkWCA9IGlpICogd2lkdGhTdGVwO1xuICAgICAgICBjb25zdCBjdXJyQ29vcmRZID0gKGluU2l6ZVsxXSAqIGN1cnJEZWx0YSkgLyBrX3ZlcnRpY2FsU2l6ZTtcblxuICAgICAgICBjb25zdCBwb2ludEE6IGdsbS5SZWFkb25seVZlYzMgPSBbXG4gICAgICAgICAgaW5Qb3NbMF0gKyBwcmV2Q29vcmRYLFxuICAgICAgICAgIGluUG9zWzFdICsgcHJldkNvb3JkWSxcbiAgICAgICAgICAwXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHBvaW50QjogZ2xtLlJlYWRvbmx5VmVjMyA9IFtcbiAgICAgICAgICBpblBvc1swXSArIGN1cnJDb29yZFgsXG4gICAgICAgICAgaW5Qb3NbMV0gKyBjdXJyQ29vcmRZLFxuICAgICAgICAgIDBcbiAgICAgICAgXTtcblxuICAgICAgICBpblN0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKHBvaW50QSwgcG9pbnRCLCBbMSwgMSwgMV0pO1xuXG4gICAgICAgIHByZXZEZWx0YSA9IGN1cnJEZWx0YTtcbiAgICAgICAgcHJldkNvb3JkWCA9IGN1cnJDb29yZFg7XG4gICAgICAgIHByZXZDb29yZFkgPSBjdXJyQ29vcmRZO1xuICAgICAgfVxuICAgIH1cbiAgfSAvLyBjdXJ2ZVxuXG4gIHtcbiAgICAvLyBjb3VudGVyXG5cbiAgICBjb25zdCBrX3RleHRTY2FsZSA9IDE0O1xuICAgIGNvbnN0IGtfdGV4dEhTY2FsZSA9IGtfdGV4dFNjYWxlICogMC41O1xuXG4gICAgY29uc3QgYXZlcmFnZVZhbHVlID0gaW5GcmFtZVByb2ZpbGVyLmF2ZXJhZ2VEZWx0YTtcbiAgICBjb25zdCBtYXhWYWx1ZSA9IGluRnJhbWVQcm9maWxlci5tYXhEZWx0YTtcbiAgICBjb25zdCBtaW5WYWx1ZSA9IGluRnJhbWVQcm9maWxlci5taW5EZWx0YTtcblxuICAgIGxldCBhdmVyYWdlU3RyID0gYH4ke2F2ZXJhZ2VWYWx1ZS50b0ZpeGVkKDApfW1zYDtcbiAgICBsZXQgbWF4U3RyID0gYDwke21heFZhbHVlfW1zYDtcbiAgICBsZXQgbWluU3RyID0gYD4ke21pblZhbHVlfW1zYDtcblxuICAgIGlmIChpblNob3dGcHMgPT09IHRydWUpIHtcbiAgICAgIGNvbnN0IF9nZXRGcHNTdHIgPSAoaW5WYWw6IG51bWJlcikgPT5cbiAgICAgICAgaW5WYWwgPCA5OTkgPyBpblZhbC50b0ZpeGVkKDApIDogJz8/Pyc7XG5cbiAgICAgIGF2ZXJhZ2VTdHIgKz0gYFxcbn4ke19nZXRGcHNTdHIoMTAwMCAvIGF2ZXJhZ2VWYWx1ZSl9ZnBzYDtcbiAgICAgIG1heFN0ciArPSBgXFxuPCR7X2dldEZwc1N0cigxMDAwIC8gbWF4VmFsdWUpfWZwc2A7XG4gICAgICBtaW5TdHIgKz0gYFxcbj4ke19nZXRGcHNTdHIoMTAwMCAvIG1pblZhbHVlKX1mcHNgO1xuICAgIH1cblxuICAgIGluVGV4dFJlbmRlcmVyXG4gICAgICAuc2V0VGV4dFNjYWxlKGtfdGV4dFNjYWxlKVxuICAgICAgLnNldFRleHRBbGlnbignbGVmdCcsICd0b3AnKVxuICAgICAgLnNldFRleHRDb2xvcigxLjAsIDEuMCwgMC43NSlcbiAgICAgIC5wdXNoVGV4dChhdmVyYWdlU3RyLCBbaW5Qb3NbMF0gKyA3LCBpblBvc1sxXSAtIDhdKVxuICAgICAgLnNldFRleHRBbGlnbignbGVmdCcsICdjZW50ZXJlZCcpXG4gICAgICAuc2V0VGV4dENvbG9yKDEuMCwgMC43NSwgMC43NSlcbiAgICAgIC5wdXNoVGV4dChtYXhTdHIsIFtcbiAgICAgICAgaW5Qb3NbMF0gKyBpblNpemVbMF0gKyBrX3RleHRIU2NhbGUsXG4gICAgICAgIGluUG9zWzFdICsgaW5TaXplWzFdIC0ga190ZXh0SFNjYWxlICogMVxuICAgICAgXSlcbiAgICAgIC5zZXRUZXh0Q29sb3IoMC43NSwgMS4wLCAwLjc1KVxuICAgICAgLnB1c2hUZXh0KG1pblN0ciwgW1xuICAgICAgICBpblBvc1swXSArIGluU2l6ZVswXSArIGtfdGV4dEhTY2FsZSxcbiAgICAgICAgaW5Qb3NbMV0gKyBrX3RleHRIU2NhbGUgKiAxXG4gICAgICBdKVxuICAgICAgLnNldFRleHRDb2xvcigxLjAsIDEuMCwgMS4wKTtcbiAgfSAvLyBjb3VudGVyXG59O1xuIiwKICAiZXhwb3J0IGNvbnN0IGdldEltYWdlRnJvbVVybCA9ICh1cmw6IHN0cmluZyk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgaW1hZ2Uub25lcnJvciA9IHJlamVjdDtcbiAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICByZXNvbHZlKGltYWdlKTtcbiAgICB9O1xuICAgIGltYWdlLnNyYyA9IHVybDtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hJbWFnZUJ1ZmZlciA9IGFzeW5jIChcbiAgdXJsOiBzdHJpbmcsXG4gIG9uUHJvZ3Jlc3M/OiAocmVjZWl2ZWQ6IG51bWJlciwgdG90YWw6IG51bWJlcikgPT4gdm9pZFxuKTogUHJvbWlzZTx7IGJ1ZmZlcjogVWludDhBcnJheTsgdHlwZTogc3RyaW5nIH0+ID0+IHtcbiAgLy8gU3RlcCAxOiBzdGFydCB0aGUgZmV0Y2ggYW5kIG9idGFpbiBhIHJlYWRlclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHkhLmdldFJlYWRlcigpO1xuXG4gIC8vIFN0ZXAgMjogZ2V0IHRvdGFsIGxlbmd0aFxuICBjb25zdCBjb250ZW50TGVuZ3RoID0gK3Jlc3BvbnNlLmhlYWRlcnMuZ2V0KCdDb250ZW50LUxlbmd0aCcpITtcbiAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJykhO1xuXG4gIGxldCBsYXN0UGVyY2VudCA9IDA7XG5cbiAgLy8gU3RlcCAzOiByZWFkIHRoZSBkYXRhXG4gIGxldCByZWNlaXZlZExlbmd0aCA9IDA7IC8vIHJlY2VpdmVkIHRoYXQgbWFueSBieXRlcyBhdCB0aGUgbW9tZW50XG4gIGxldCBjaHVua3MgPSBbXTsgLy8gYXJyYXkgb2YgcmVjZWl2ZWQgYmluYXJ5IGNodW5rcyAoY29tcHJpc2VzIHRoZSBib2R5KVxuICB3aGlsZSAodHJ1ZSkge1xuICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG5cbiAgICBpZiAoZG9uZSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2h1bmtzLnB1c2godmFsdWUpO1xuICAgIHJlY2VpdmVkTGVuZ3RoICs9IHZhbHVlLmxlbmd0aDtcblxuICAgIGlmIChvblByb2dyZXNzKSB7XG4gICAgICAvLyBjb25zdCBjdXJyZW50UGVyY2VudCA9IE1hdGguZmxvb3IocmVjZWl2ZWRMZW5ndGggLyBjb250ZW50TGVuZ3RoICogMTAwKTtcbiAgICAgIC8vIGlmIChsYXN0UGVyY2VudCAhPT0gY3VycmVudFBlcmNlbnQpIHtcbiAgICAgIC8vICAgbGFzdFBlcmNlbnQgPSBjdXJyZW50UGVyY2VudDtcbiAgICAgIG9uUHJvZ3Jlc3MocmVjZWl2ZWRMZW5ndGgsIGNvbnRlbnRMZW5ndGgpO1xuICAgICAgLy8gfVxuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKGBSZWNlaXZlZCAke3JlY2VpdmVkTGVuZ3RofSBvZiAke2NvbnRlbnRMZW5ndGh9YCk7XG4gIH1cblxuICAvLyBTdGVwIDQ6IGNvbmNhdGVuYXRlIGNodW5rcyBpbnRvIHNpbmdsZSBVaW50OEFycmF5XG4gIGNvbnN0IGNodW5rc0FsbCA9IG5ldyBVaW50OEFycmF5KHJlY2VpdmVkTGVuZ3RoKTsgLy8gKDQuMSlcbiAgbGV0IHBvc2l0aW9uID0gMDtcbiAgZm9yIChsZXQgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAgY2h1bmtzQWxsLnNldChjaHVuaywgcG9zaXRpb24pOyAvLyAoNC4yKVxuICAgIHBvc2l0aW9uICs9IGNodW5rLmxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYnVmZmVyOiBjaHVua3NBbGwsXG4gICAgdHlwZTogY29udGVudFR5cGVcbiAgfTtcblxuICAvLyAvLyBTdGVwIDU6IGRlY29kZSBpbnRvIGEgc3RyaW5nXG4gIC8vIGxldCByZXN1bHQgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKS5kZWNvZGUoY2h1bmtzQWxsKTtcblxuICAvLyAvLyBXZSdyZSBkb25lIVxuICAvLyBsZXQgY29tbWl0cyA9IEpTT04ucGFyc2UocmVzdWx0KTtcbiAgLy8gYWxlcnQoY29tbWl0c1swXS5hdXRob3IubG9naW4pO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEltYWdlRnJvbUJ1ZmZlciA9IGFzeW5jIChcbiAgYnVmZmVyOiBVaW50OEFycmF5LFxuICB0eXBlOiBzdHJpbmdcbik6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4gPT4ge1xuICAvLyBmZXRjaEltYWdlQnVmZmVyKCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICBpbWFnZS5vbmVycm9yID0gcmVqZWN0O1xuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIHJlc29sdmUoaW1hZ2UpO1xuICAgIH07XG4gICAgaW1hZ2Uuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbYnVmZmVyXSwgeyB0eXBlIH0gLyogKDEpICovKSk7XG4gIH0pO1xuXG4gIC8vIGNvbnN0IHRtcEltYWdlID0gbmV3IEltYWdlKCk7XG4gIC8vIHRtcEltYWdlLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoXG4gIC8vICAgbmV3IEJsb2IoW2J1ZmZlcl0sIHsgdHlwZSB9IC8qICgxKSAqLylcbiAgLy8gKTtcblxuICAvLyByZXR1cm4gdG1wSW1hZ2U7XG59O1xuXG4vLyAvLyBTbWFsbCByZWQgZG90IGltYWdlXG4vLyBjb25zdCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoWzEzNywgODAsIDc4LCA3MSwgMTMsIDEwLCAyNiwgMTAsIDAsIDAsIDAsIDEzLCA3MywgNzIsIDY4LCA4MiwgMCwgMCwgMCwgNSwgMCwgMCwgMCwgNSwgOCwgNiwgMCwgMCwgMCwgMTQxLCAxMTEsIDM4LCAyMjksIDAsIDAsIDAsIDI4LCA3MywgNjgsIDY1LCA4NCwgOCwgMjE1LCA5OSwgMjQ4LCAyNTUsIDI1NSwgNjMsIDE5NSwgMTI3LCA2LCAzMiwgNSwgMTk1LCAzMiwgMTgsIDEzMiwgMjA4LCA0OSwgMjQxLCAxMzAsIDg4LCAyMDUsIDQsIDAsIDE0LCAyNDUsIDUzLCAyMDMsIDIwOSwgMTQyLCAxNCwgMzEsIDAsIDAsIDAsIDAsIDczLCA2OSwgNzgsIDY4LCAxNzQsIDY2LCA5NiwgMTMwXSk7XG5cbi8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS1pbWcnKS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKFxuLy8gICBuZXcgQmxvYihbY29udGVudC5idWZmZXJdLCB7IHR5cGU6ICdpbWFnZS9wbmcnIH0gLyogKDEpICovKVxuLy8gKTtcbiIsCiAgImltcG9ydCB7IElWZXJ0ZXggfSBmcm9tICcuL0lWZXJ0ZXgnO1xuXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuLy8gZXhwb3J0IGludGVyZmFjZSBJVmVydGV4IHtcbi8vICAgcG9zOiBnbG0udmVjMztcbi8vICAgbm9ybWFsOiBnbG0udmVjMztcbi8vIH1cblxuZXhwb3J0IGNvbnN0IG1ha2VCb3ggPSAoaW5TaXplOiBnbG0uUmVhZG9ubHlWZWMzKTogSVZlcnRleFtdID0+IHtcbiAgY29uc3QgaFNpemVYID0gaW5TaXplWzBdICogMC41O1xuICBjb25zdCBoU2l6ZVkgPSBpblNpemVbMV0gKiAwLjU7XG4gIGNvbnN0IGhTaXplWiA9IGluU2l6ZVsyXSAqIDAuNTtcblxuICBjb25zdCBhbGxOb3JtYWxzOiBnbG0uUmVhZG9ubHlWZWMzW10gPSBbXTtcbiAgYWxsTm9ybWFscy5wdXNoKFstMSwgMCwgMF0pOyAvLyAwXG4gIGFsbE5vcm1hbHMucHVzaChbKzEsIDAsIDBdKTsgLy8gMVxuICBhbGxOb3JtYWxzLnB1c2goWzAsIC0xLCAwXSk7IC8vIDJcbiAgYWxsTm9ybWFscy5wdXNoKFswLCArMSwgMF0pOyAvLyAzXG4gIGFsbE5vcm1hbHMucHVzaChbMCwgMCwgLTFdKTsgLy8gNFxuICBhbGxOb3JtYWxzLnB1c2goWzAsIDAsICsxXSk7IC8vIDVcblxuICBjb25zdCBhbGxWZXJ0aWNlczogZ2xtLlJlYWRvbmx5VmVjM1tdID0gW107XG4gIGFsbFZlcnRpY2VzLnB1c2goWy1oU2l6ZVgsIC1oU2l6ZVksIC1oU2l6ZVpdKTsgLy8gMFxuICBhbGxWZXJ0aWNlcy5wdXNoKFsraFNpemVYLCAtaFNpemVZLCAtaFNpemVaXSk7IC8vIDFcbiAgYWxsVmVydGljZXMucHVzaChbLWhTaXplWCwgK2hTaXplWSwgLWhTaXplWl0pOyAvLyAyXG4gIGFsbFZlcnRpY2VzLnB1c2goWytoU2l6ZVgsICtoU2l6ZVksIC1oU2l6ZVpdKTsgLy8gM1xuICBhbGxWZXJ0aWNlcy5wdXNoKFstaFNpemVYLCAtaFNpemVZLCAraFNpemVaXSk7IC8vIDRcbiAgYWxsVmVydGljZXMucHVzaChbK2hTaXplWCwgLWhTaXplWSwgK2hTaXplWl0pOyAvLyA1XG4gIGFsbFZlcnRpY2VzLnB1c2goWy1oU2l6ZVgsICtoU2l6ZVksICtoU2l6ZVpdKTsgLy8gNlxuICBhbGxWZXJ0aWNlcy5wdXNoKFsraFNpemVYLCAraFNpemVZLCAraFNpemVaXSk7IC8vIDdcblxuICAvL1xuXG4gIGNvbnN0IGFsbEluZGljZXM6IGdsbS5SZWFkb25seVZlYzRbXSA9IFtdO1xuXG4gIC8vIC16IDAxMjNcbiAgYWxsSW5kaWNlcy5wdXNoKFswLCAyLCAxLCAvKm5vcm1hbCA9PiAqLyA0XSk7XG4gIGFsbEluZGljZXMucHVzaChbMiwgMywgMSwgLypub3JtYWwgPT4gKi8gNF0pO1xuICAvLyAreiA0NTY3XG4gIGFsbEluZGljZXMucHVzaChbNCwgNSwgNiwgLypub3JtYWwgPT4gKi8gNV0pO1xuICBhbGxJbmRpY2VzLnB1c2goWzYsIDUsIDcsIC8qbm9ybWFsID0+ICovIDVdKTtcblxuICAvLyAreCAxMzU3XG4gIGFsbEluZGljZXMucHVzaChbMSwgMywgNSwgLypub3JtYWwgPT4gKi8gMV0pO1xuICBhbGxJbmRpY2VzLnB1c2goWzUsIDMsIDcsIC8qbm9ybWFsID0+ICovIDFdKTtcbiAgLy8gLXggMDI0NlxuICBhbGxJbmRpY2VzLnB1c2goWzAsIDQsIDIsIC8qbm9ybWFsID0+ICovIDBdKTtcbiAgYWxsSW5kaWNlcy5wdXNoKFs0LCA2LCAyLCAvKm5vcm1hbCA9PiAqLyAwXSk7XG5cbiAgLy8gK3kgMjM2N1xuICBhbGxJbmRpY2VzLnB1c2goWzIsIDYsIDMsIC8qbm9ybWFsID0+ICovIDNdKTtcbiAgYWxsSW5kaWNlcy5wdXNoKFs2LCA3LCAzLCAvKm5vcm1hbCA9PiAqLyAzXSk7XG4gIC8vIC15IDAxNDVcbiAgYWxsSW5kaWNlcy5wdXNoKFswLCAxLCA0LCAvKm5vcm1hbCA9PiAqLyAyXSk7XG4gIGFsbEluZGljZXMucHVzaChbNCwgMSwgNSwgLypub3JtYWwgPT4gKi8gMl0pO1xuXG4gIC8vIGNvbnN0IGZpbmFsVmVydGljZXM6IG51bWJlcltdID0gW107XG4gIGNvbnN0IHZlcnRpY2VzOiBJVmVydGV4W10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGluZGV4IG9mIGFsbEluZGljZXMpIHtcbiAgICB2ZXJ0aWNlcy5wdXNoKHtcbiAgICAgIHBvczogZ2xtLnZlYzMuY29weShbMCwgMCwgMF0sIGFsbFZlcnRpY2VzW2luZGV4WzBdXSksXG4gICAgICBub3JtYWw6IGdsbS52ZWMzLmNvcHkoWzAsIDAsIDBdLCBhbGxOb3JtYWxzW2luZGV4WzNdXSlcbiAgICB9KTtcbiAgICB2ZXJ0aWNlcy5wdXNoKHtcbiAgICAgIHBvczogZ2xtLnZlYzMuY29weShbMCwgMCwgMF0sIGFsbFZlcnRpY2VzW2luZGV4WzFdXSksXG4gICAgICBub3JtYWw6IGdsbS52ZWMzLmNvcHkoWzAsIDAsIDBdLCBhbGxOb3JtYWxzW2luZGV4WzNdXSlcbiAgICB9KTtcbiAgICB2ZXJ0aWNlcy5wdXNoKHtcbiAgICAgIHBvczogZ2xtLnZlYzMuY29weShbMCwgMCwgMF0sIGFsbFZlcnRpY2VzW2luZGV4WzJdXSksXG4gICAgICBub3JtYWw6IGdsbS52ZWMzLmNvcHkoWzAsIDAsIDBdLCBhbGxOb3JtYWxzW2luZGV4WzNdXSlcbiAgICB9KTtcblxuICAgIC8vIGZpbmFsVmVydGljZXMucHVzaChhbGxWZXJ0aWNlc1tpbmRleFswXV1bMF0pO1xuICAgIC8vIGZpbmFsVmVydGljZXMucHVzaChhbGxWZXJ0aWNlc1tpbmRleFswXV1bMV0pO1xuICAgIC8vIGZpbmFsVmVydGljZXMucHVzaChhbGxWZXJ0aWNlc1tpbmRleFswXV1bMl0pO1xuXG4gICAgLy8gaWYgKGluQWRkTm9ybWFscykge1xuICAgIC8vICAgZmluYWxWZXJ0aWNlcy5wdXNoKGFsbE5vcm1hbHNbaW5kZXhbM11dWzBdKTtcbiAgICAvLyAgIGZpbmFsVmVydGljZXMucHVzaChhbGxOb3JtYWxzW2luZGV4WzNdXVsxXSk7XG4gICAgLy8gICBmaW5hbFZlcnRpY2VzLnB1c2goYWxsTm9ybWFsc1tpbmRleFszXV1bMl0pO1xuICAgIC8vIH1cblxuICAgIC8vIGZpbmFsVmVydGljZXMucHVzaChhbGxWZXJ0aWNlc1tpbmRleFsxXV1bMF0pO1xuICAgIC8vIGZpbmFsVmVydGljZXMucHVzaChhbGxWZXJ0aWNlc1tpbmRleFsxXV1bMV0pO1xuICAgIC8vIGZpbmFsVmVydGljZXMucHVzaChhbGxWZXJ0aWNlc1tpbmRleFsxXV1bMl0pO1xuXG4gICAgLy8gaWYgKGluQWRkTm9ybWFscykge1xuICAgIC8vICAgZmluYWxWZXJ0aWNlcy5wdXNoKGFsbE5vcm1hbHNbaW5kZXhbM11dWzBdKTtcbiAgICAvLyAgIGZpbmFsVmVydGljZXMucHVzaChhbGxOb3JtYWxzW2luZGV4WzNdXVsxXSk7XG4gICAgLy8gICBmaW5hbFZlcnRpY2VzLnB1c2goYWxsTm9ybWFsc1tpbmRleFszXV1bMl0pO1xuICAgIC8vIH1cblxuICAgIC8vIGZpbmFsVmVydGljZXMucHVzaChhbGxWZXJ0aWNlc1tpbmRleFsyXV1bMF0pO1xuICAgIC8vIGZpbmFsVmVydGljZXMucHVzaChhbGxWZXJ0aWNlc1tpbmRleFsyXV1bMV0pO1xuICAgIC8vIGZpbmFsVmVydGljZXMucHVzaChhbGxWZXJ0aWNlc1tpbmRleFsyXV1bMl0pO1xuXG4gICAgLy8gaWYgKGluQWRkTm9ybWFscykge1xuICAgIC8vICAgZmluYWxWZXJ0aWNlcy5wdXNoKGFsbE5vcm1hbHNbaW5kZXhbM11dWzBdKTtcbiAgICAvLyAgIGZpbmFsVmVydGljZXMucHVzaChhbGxOb3JtYWxzW2luZGV4WzNdXVsxXSk7XG4gICAgLy8gICBmaW5hbFZlcnRpY2VzLnB1c2goYWxsTm9ybWFsc1tpbmRleFszXV1bMl0pO1xuICAgIC8vIH1cbiAgfVxuXG4gIHJldHVybiB2ZXJ0aWNlcztcbn07XG4iLAogICJpbXBvcnQgeyBJVmVydGV4IH0gZnJvbSAnLi9JVmVydGV4JztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbi8vIGV4cG9ydCBpbnRlcmZhY2UgSVZlcnRleCB7XG4vLyAgIHBvczogZ2xtLnZlYzM7XG4vLyAgIG5vcm1hbDogZ2xtLnZlYzM7XG4vLyB9XG5cbmNvbnN0IF9kcmF3U3BoZXJlUGF0Y2ggPSAoXG4gIHZlcnRpY2VzOiBJVmVydGV4W10sXG4gIHF1YWxpdHk6IG51bWJlcixcbiAgcmFkaXVzOiBudW1iZXIsXG4gIHYwMTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgdjAyOiBnbG0uUmVhZG9ubHlWZWMzLFxuICB2MDM6IGdsbS5SZWFkb25seVZlYzNcbikgPT4ge1xuICBpZiAocXVhbGl0eSA8PSAwKSB7XG4gICAgLy8gaGFjazogcG9zaXRpb24gPSBub3JtYWxcbiAgICB2ZXJ0aWNlcy5wdXNoKHtcbiAgICAgIHBvczogZ2xtLnZlYzMuc2NhbGUoZ2xtLnZlYzMuY3JlYXRlKCksIHYwMSwgcmFkaXVzKSxcbiAgICAgIG5vcm1hbDogZ2xtLnZlYzMuY29weShnbG0udmVjMy5jcmVhdGUoKSwgdjAxKVxuICAgIH0pO1xuICAgIHZlcnRpY2VzLnB1c2goe1xuICAgICAgcG9zOiBnbG0udmVjMy5zY2FsZShnbG0udmVjMy5jcmVhdGUoKSwgdjAzLCByYWRpdXMpLFxuICAgICAgbm9ybWFsOiBnbG0udmVjMy5jb3B5KGdsbS52ZWMzLmNyZWF0ZSgpLCB2MDMpXG4gICAgfSk7XG4gICAgdmVydGljZXMucHVzaCh7XG4gICAgICBwb3M6IGdsbS52ZWMzLnNjYWxlKGdsbS52ZWMzLmNyZWF0ZSgpLCB2MDIsIHJhZGl1cyksXG4gICAgICBub3JtYWw6IGdsbS52ZWMzLmNvcHkoZ2xtLnZlYzMuY3JlYXRlKCksIHYwMilcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB2MTIgPSBnbG0udmVjMy5ub3JtYWxpemUoXG4gICAgICBnbG0udmVjMy5jcmVhdGUoKSxcbiAgICAgIGdsbS52ZWMzLmxlcnAoZ2xtLnZlYzMuY3JlYXRlKCksIHYwMSwgdjAyLCAwLjUpXG4gICAgKTtcbiAgICBjb25zdCB2MjMgPSBnbG0udmVjMy5ub3JtYWxpemUoXG4gICAgICBnbG0udmVjMy5jcmVhdGUoKSxcbiAgICAgIGdsbS52ZWMzLmxlcnAoZ2xtLnZlYzMuY3JlYXRlKCksIHYwMiwgdjAzLCAwLjUpXG4gICAgKTtcbiAgICBjb25zdCB2MzEgPSBnbG0udmVjMy5ub3JtYWxpemUoXG4gICAgICBnbG0udmVjMy5jcmVhdGUoKSxcbiAgICAgIGdsbS52ZWMzLmxlcnAoZ2xtLnZlYzMuY3JlYXRlKCksIHYwMywgdjAxLCAwLjUpXG4gICAgKTtcblxuICAgIHF1YWxpdHkgLT0gMTtcblxuICAgIF9kcmF3U3BoZXJlUGF0Y2godmVydGljZXMsIHF1YWxpdHksIHJhZGl1cywgdjAxLCB2MTIsIHYzMSk7XG4gICAgX2RyYXdTcGhlcmVQYXRjaCh2ZXJ0aWNlcywgcXVhbGl0eSwgcmFkaXVzLCB2MTIsIHYwMiwgdjIzKTtcbiAgICBfZHJhd1NwaGVyZVBhdGNoKHZlcnRpY2VzLCBxdWFsaXR5LCByYWRpdXMsIHYzMSwgdjIzLCB2MDMpO1xuICAgIF9kcmF3U3BoZXJlUGF0Y2godmVydGljZXMsIHF1YWxpdHksIHJhZGl1cywgdjEyLCB2MjMsIHYzMSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBtYWtlU3BoZXJlID0gKFxuICBxdWFsaXR5OiBudW1iZXIsXG4gIHJhZGl1czogbnVtYmVyXG4gIC8vIG1vZGVsTWF0NDogZ2xtLlJlYWRvbmx5TWF0NFxuKTogSVZlcnRleFtdID0+IHtcbiAgY29uc3Qga19pY3ggPSAwLjUyNTczMTExMjExOTEzMzYwNjtcbiAgY29uc3Qga19pY3ogPSAwLjg1MDY1MDgwODM1MjAzOTkzMjtcblxuICBjb25zdCB0bXBWZXJ0aWNlczogZ2xtLlJlYWRvbmx5VmVjM1tdID0gW1xuICAgIFsta19pY3gsIDAuMCwgK2tfaWN6XSxcbiAgICBbK2tfaWN4LCAwLjAsICtrX2ljel0sXG4gICAgWy1rX2ljeCwgMC4wLCAta19pY3pdLFxuICAgIFsra19pY3gsIDAuMCwgLWtfaWN6XSxcbiAgICBbMC4wLCAra19pY3osICtrX2ljeF0sXG4gICAgWzAuMCwgK2tfaWN6LCAta19pY3hdLFxuICAgIFswLjAsIC1rX2ljeiwgK2tfaWN4XSxcbiAgICBbMC4wLCAta19pY3osIC1rX2ljeF0sXG4gICAgWytrX2ljeiwgK2tfaWN4LCAwLjBdLFxuICAgIFsta19pY3osICtrX2ljeCwgMC4wXSxcbiAgICBbK2tfaWN6LCAta19pY3gsIDAuMF0sXG4gICAgWy1rX2ljeiwgLWtfaWN4LCAwLjBdXG4gIF07XG5cbiAgY29uc3QgdG1wSW5kaWNlczogZ2xtLlJlYWRvbmx5VmVjM1tdID0gW1xuICAgIFswLCA0LCAxXSxcbiAgICBbMCwgOSwgNF0sXG4gICAgWzksIDUsIDRdLFxuICAgIFs0LCA1LCA4XSxcbiAgICBbNCwgOCwgMV0sXG4gICAgWzgsIDEwLCAxXSxcbiAgICBbOCwgMywgMTBdLFxuICAgIFs1LCAzLCA4XSxcbiAgICBbNSwgMiwgM10sXG4gICAgWzIsIDcsIDNdLFxuICAgIFs3LCAxMCwgM10sXG4gICAgWzcsIDYsIDEwXSxcbiAgICBbNywgMTEsIDZdLFxuICAgIFsxMSwgMCwgNl0sXG4gICAgWzAsIDEsIDZdLFxuICAgIFs2LCAxLCAxMF0sXG4gICAgWzksIDAsIDExXSxcbiAgICBbOSwgMTEsIDJdLFxuICAgIFs5LCAyLCA1XSxcbiAgICBbNywgMiwgMTFdXG4gIF07XG5cbiAgY29uc3QgdmVydGljZXM6IElWZXJ0ZXhbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgaW5kZXggb2YgdG1wSW5kaWNlcykge1xuICAgIF9kcmF3U3BoZXJlUGF0Y2goXG4gICAgICB2ZXJ0aWNlcyxcbiAgICAgIHF1YWxpdHksXG4gICAgICByYWRpdXMsXG4gICAgICB0bXBWZXJ0aWNlc1tpbmRleFswXV0sXG4gICAgICB0bXBWZXJ0aWNlc1tpbmRleFsxXV0sXG4gICAgICB0bXBWZXJ0aWNlc1tpbmRleFsyXV1cbiAgICApO1xuICB9XG5cbiAgLy8gY29uc3QgbmV3UG9zID0gZ2xtLnZlYzMuY3JlYXRlKCk7XG4gIC8vIC8vIGNvbnN0IG5ld05vcm0gPSBnbG0udmVjMy5jcmVhdGUoKTtcbiAgLy8gLy8gY29uc3QgbW9kZWxNYXQzID0gZ2xtLm1hdDMuZnJvbU1hdDQoZ2xtLm1hdDMuY3JlYXRlKCksIG1vZGVsTWF0NCk7XG5cbiAgLy8gZm9yIChjb25zdCB2ZXJ0ZXggb2YgdmVydGljZXMpIHtcbiAgLy8gICBnbG0udmVjMy50cmFuc2Zvcm1NYXQ0KG5ld1BvcywgdmVydGV4LnBvcywgbW9kZWxNYXQ0KTtcbiAgLy8gICBnbG0udmVjMy5jb3B5KHZlcnRleC5wb3MsIG5ld1Bvcyk7XG4gIC8vIH1cblxuICByZXR1cm4gdmVydGljZXM7XG5cbiAgLy8gcmV0dXJuIHZlcnRpY2VzLm1hcCgodmVydGV4KSA9PiB7XG5cbiAgLy8gICBnbG0udmVjMy50cmFuc2Zvcm1NYXQ0KG5ld1BvcywgdmVydGV4LnBvcywgbW9kZWxNYXQ0KTtcbiAgLy8gICAvLyBnbG0udmVjMy50cmFuc2Zvcm1NYXQzKG5ld05vcm0sIHZlcnRleC5ub3JtYWwsIG1vZGVsTWF0Myk7XG5cbiAgLy8gICByZXR1cm4ge1xuICAvLyAgICAgcG9zOiBnbG0udmVjMy5jb3B5KGdsbS52ZWMzLmNyZWF0ZSgpLCBuZXdQb3MpLFxuICAvLyAgIH1cbiAgLy8gICAvLyAgIG5ld1Bvc1swXSxcbiAgLy8gICAvLyAgIG5ld1Bvc1sxXSxcbiAgLy8gICAvLyAgIG5ld1Bvc1syXSxcbiAgLy8gICAvLyAgIHZlcnRleC5ub3JtYWxbMF0sXG4gIC8vICAgLy8gICB2ZXJ0ZXgubm9ybWFsWzFdLFxuICAvLyAgIC8vICAgdmVydGV4Lm5vcm1hbFsyXVxuICAvLyAgIC8vIF07XG4gIC8vIH0pXG4gIC8vICAgLy8gLmZsYXQoKTtcbn07XG4iLAogICJleHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgcHJpdmF0ZSBfdGV4dEFyZWFFbGVtZW50OiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuXG4gIHByaXZhdGUgX2xpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIF9tYXhMaW5lcyA9IDMwO1xuXG4gIGNvbnN0cnVjdG9yKHRleHRBcmVhRWxlbWVudElkOiBzdHJpbmcpIHtcbiAgICB0aGlzLl90ZXh0QXJlYUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgIHRleHRBcmVhRWxlbWVudElkXG4gICAgKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuXG4gICAgaWYgKCF0aGlzLl90ZXh0QXJlYUVsZW1lbnQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERPTSBlbGVtZW50cyBub3QgZm91bmQsIGlkPSR7dGV4dEFyZWFFbGVtZW50SWR9YCk7XG5cbiAgICB0aGlzLl90ZXh0QXJlYUVsZW1lbnQudmFsdWUgPSAnJzsgLy8gPD0gY2xlYXIgYW55IGJyb3dzZXIgY2FjaGVcbiAgfVxuXG4gIGxvZyguLi5hcmdzOiBhbnlbXSkge1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgY29uc3QgdGV4dCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MpLmpvaW4oJyAnKTtcblxuICAgIGNvbnNvbGUubG9nKHRleHQpO1xuXG4gICAgdGhpcy5fcHVzaFRleHQodGV4dCk7XG4gIH1cblxuICBlcnJvciguLi5hcmdzOiBhbnlbXSkge1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgY29uc3QgdGV4dCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MpLmpvaW4oJyAnKTtcblxuICAgIGNvbnNvbGUuZXJyb3IodGV4dCk7XG5cbiAgICB0aGlzLl9wdXNoVGV4dChgW0VSUl0gLSAke3RleHR9YCk7XG4gIH1cblxuICBfcHVzaFRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgdGhpcy5fbGluZXMucHVzaCh0ZXh0KTtcbiAgICBpZiAodGhpcy5fbGluZXMubGVuZ3RoID4gdGhpcy5fbWF4TGluZXMpXG4gICAgICB0aGlzLl9saW5lcy5zcGxpY2UoMCwgdGhpcy5fbGluZXMubGVuZ3RoIC0gdGhpcy5fbWF4TGluZXMpO1xuXG4gICAgdGhpcy5fdGV4dEFyZWFFbGVtZW50LnZhbHVlID0gYCR7dGhpcy5fbGluZXMuam9pbignXFxuJyl9XFxuYDtcblxuICAgIC8vIGZvcmNlIGZvY3VzIG9uIGxhc3QgbGluZVxuICAgIHRoaXMuX3RleHRBcmVhRWxlbWVudC5zY3JvbGxUb3AgPSB0aGlzLl90ZXh0QXJlYUVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcGVla0xhc3QoKSB7XG4gICAgaWYgKHRoaXMuX2xpbmVzLmxlbmd0aCA+IDApIHJldHVybiB0aGlzLl9saW5lc1t0aGlzLl9saW5lcy5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcG9wTGFzdCgpIHtcbiAgICBpZiAodGhpcy5fbGluZXMubGVuZ3RoID4gMCkgdGhpcy5fbGluZXMuc3BsaWNlKHRoaXMuX2xpbmVzLmxlbmd0aCAtIDEsIDEpO1xuICB9XG59XG4iLAogICIndXNlIHN0cmljdCc7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wsIEl0ZXJhdG9yICovXHJcblxyXG5cclxuZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxudHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XG5cbmNvbnN0IHNjcmlwdExvYWRpbmdVdGlsaXR5ID0gKGluU3JjKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3Qgc2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgIHNjcmlwdEVsZW1lbnQuc3JjID0gaW5TcmM7XG4gICAgICAgIC8vIHNjcmlwdEVsZW1lbnQub25wcm9ncmVzcyA9IChldmVudCkgPT4gbG9nZ2VyLmxvZyhcImV2ZW50XCIsIGV2ZW50KTtcbiAgICAgICAgc2NyaXB0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZSk7XG4gICAgICAgIHNjcmlwdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCByZWplY3QpO1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdEVsZW1lbnQpO1xuICAgIH0pO1xufTtcblxuY2xhc3MgQnJvd3NlckZyYW5rZW5QaHlzV2FzbU1vZHVsZSB7XG4gICAgc3RhdGljIGxvYWQob3B0cykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgQnJvd3NlckZyYW5rZW5QaHlzV2FzbU1vZHVsZS5sb2FkSnNQYXJ0KG9wdHMuanNVcmwpO1xuICAgICAgICAgICAgeWllbGQgQnJvd3NlckZyYW5rZW5QaHlzV2FzbU1vZHVsZS5sb2FkV2FzbVBhcnQob3B0cy53YXNtVXJsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBsb2FkSnNQYXJ0KHVybCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgc2NyaXB0TG9hZGluZ1V0aWxpdHkodXJsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBsb2FkV2FzbVBhcnQodXJsUHJlZml4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlLl93YXNtTW9kdWxlID0geWllbGQgRnJhbmtlblBoeXNMb2FkZXIoe1xuICAgICAgICAgICAgICAgIGxvY2F0ZUZpbGU6ICh1cmwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke3VybFByZWZpeH0vJHt1cmx9YDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIFRPVEFMX01FTU9SWTogMSAqIDEwMjRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGdldCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl93YXNtTW9kdWxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGcmFua2VuUGh5cyB3YXNtIG1vZHVsZSBub3QgbG9hZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl93YXNtTW9kdWxlO1xuICAgIH1cbn1cblxuY2xhc3MgQ29udGFjdEV2ZW50SGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVyc01hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgLy8gY29uc3RydWN0b3IoKSB7XG4gICAgLy8gfVxuICAgIGlzRXZlbnRMaXN0ZW5lZFRvKHR5cGUpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzTWFwLmdldCh0eXBlKTtcbiAgICAgICAgcmV0dXJuICghIWxpc3RlbmVycyAmJiBsaXN0ZW5lcnMubGVuZ3RoID4gMCk7XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgLy8gaWYgKCF0aGlzLmlzRXZlbnRBbGxvd2VkKHR5cGUpKVxuICAgICAgICAvLyBcdHJldHVybiBFcnJvckhhbmRsZXIucmVwb3J0RXJyb3IoYGV2ZW50IHR5cGUgbm90IGluIHRoZSB3aGl0ZSBsaXN0LCB0eXBlPSR7dHlwZX1gKTtcbiAgICAgICAgbGV0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc01hcC5nZXQodHlwZSk7XG4gICAgICAgIGlmICghbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVyc01hcC5zZXQodHlwZSwgbGlzdGVuZXJzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkaXJ0eSBjYXN0XG4gICAgICAgIGlmIChsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gRXJyb3JIYW5kbGVyLnJlcG9ydEVycm9yKGBkdXBsaWNhdGUgZXZlbnQgbGlzdGVuZXIsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBkdXBsaWNhdGVkIGV2ZW50IGxpc3RlbmVyLCB0eXBlPSR7dHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkaXJ0eSBjYXN0XG4gICAgICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICAvLyBpZiAoIXRoaXMuaXNFdmVudEFsbG93ZWQodHlwZSkpXG4gICAgICAgIC8vIFx0cmV0dXJuIEVycm9ySGFuZGxlci5yZXBvcnRFcnJvcihgZXZlbnQgdHlwZSBub3QgaW4gdGhlIHdoaXRlIGxpc3QsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNNYXAuZ2V0KHR5cGUpO1xuICAgICAgICAvLyBkaXJ0eSBjYXN0XG4gICAgICAgIHJldHVybiAobGlzdGVuZXJzICE9PSB1bmRlZmluZWQgJiYgbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpICE9PSAtMSk7XG4gICAgfVxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgLy8gaWYgKCF0aGlzLmlzRXZlbnRBbGxvd2VkKHR5cGUpKVxuICAgICAgICAvLyBcdHJldHVybiBFcnJvckhhbmRsZXIucmVwb3J0RXJyb3IoYGV2ZW50IHR5cGUgbm90IGluIHRoZSB3aGl0ZSBsaXN0LCB0eXBlPSR7dHlwZX1gKTtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzTWFwLmdldCh0eXBlKTtcbiAgICAgICAgaWYgKGxpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIGV2ZW50IGxpc3RlbmVyLCB0eXBlPSR7dHlwZX1gKTtcbiAgICAgICAgICAgIC8vIHJldHVybiBFcnJvckhhbmRsZXIucmVwb3J0RXJyb3IoYHVua25vd24gZXZlbnQgbGlzdGVuZXIsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIC8vIGlmICghdGhpcy5pc0V2ZW50QWxsb3dlZChldmVudC50eXBlKSlcbiAgICAgICAgLy8gXHRyZXR1cm4gRXJyb3JIYW5kbGVyLnJlcG9ydEVycm9yKGBldmVudCB0eXBlIG5vdCBpbiB0aGUgd2hpdGUgbGlzdCwgdHlwZT0ke2V2ZW50LnR5cGV9YCk7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc01hcC5nZXQoZXZlbnQudHlwZSk7XG4gICAgICAgIGlmIChsaXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGV2ZW50LnRhcmdldCA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyc0NvcHkgPSBsaXN0ZW5lcnMuc2xpY2UoMCk7XG4gICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBsaXN0ZW5lcnNDb3B5Lmxlbmd0aDsgKytpaSkge1xuICAgICAgICAgICAgbGlzdGVuZXJzQ29weVtpaV0uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIFdhc21Nb2R1bGVIb2xkZXIge1xuICAgIHN0YXRpYyBzZXQod2FzbU1vZHVsZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgV2FzbU1vZHVsZUhvbGRlci5fd2FzbU1vZHVsZSA9IHdhc21Nb2R1bGU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0KCkge1xuICAgICAgICBpZiAoIXRoaXMuX3dhc21Nb2R1bGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZyYW5rZW5QaHlzIHdhc20gbW9kdWxlIG5vdCBsb2FkZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3dhc21Nb2R1bGU7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbW1vbiB1dGlsaXRpZXNcbiAqIEBtb2R1bGUgZ2xNYXRyaXhcbiAqL1xuLy8gQ29uZmlndXJhdGlvbiBDb25zdGFudHNcbnZhciBFUFNJTE9OID0gMC4wMDAwMDE7XG52YXIgQVJSQVlfVFlQRSA9IHR5cGVvZiBGbG9hdDMyQXJyYXkgIT09ICd1bmRlZmluZWQnID8gRmxvYXQzMkFycmF5IDogQXJyYXk7XG5pZiAoIU1hdGguaHlwb3QpIE1hdGguaHlwb3QgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB5ID0gMCxcbiAgICAgIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICB5ICs9IGFyZ3VtZW50c1tpXSAqIGFyZ3VtZW50c1tpXTtcbiAgfVxuXG4gIHJldHVybiBNYXRoLnNxcnQoeSk7XG59O1xuXG4vKipcbiAqIDN4MyBNYXRyaXhcbiAqIEBtb2R1bGUgbWF0M1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBtYXQzXG4gKlxuICogQHJldHVybnMge21hdDN9IGEgbmV3IDN4MyBtYXRyaXhcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGUkNCgpIHtcbiAgdmFyIG91dCA9IG5ldyBBUlJBWV9UWVBFKDkpO1xuXG4gIGlmIChBUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs1XSA9IDA7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICB9XG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzRdID0gMTtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cblxuLyoqXG4gKiAzIERpbWVuc2lvbmFsIFZlY3RvclxuICogQG1vZHVsZSB2ZWMzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3LCBlbXB0eSB2ZWMzXG4gKlxuICogQHJldHVybnMge3ZlYzN9IGEgbmV3IDNEIHZlY3RvclxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZSQzKCkge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoMyk7XG5cbiAgaWYgKEFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cblxuZnVuY3Rpb24gbGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeik7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjMyBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZnVuY3Rpb24gZnJvbVZhbHVlcyQxKHgsIHksIHopIHtcbiAgdmFyIG91dCA9IG5ldyBBUlJBWV9UWVBFKDMpO1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBOb3JtYWxpemUgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUkMihvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogejtcblxuICBpZiAobGVuID4gMCkge1xuICAgIC8vVE9ETzogZXZhbHVhdGUgdXNlIG9mIGdsbV9pbnZzcXJ0IGhlcmU/XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICB9XG5cbiAgb3V0WzBdID0gYVswXSAqIGxlbjtcbiAgb3V0WzFdID0gYVsxXSAqIGxlbjtcbiAgb3V0WzJdID0gYVsyXSAqIGxlbjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqL1xuXG5mdW5jdGlvbiBkb3QoYSwgYikge1xuICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXSArIGFbMl0gKiBiWzJdO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5mdW5jdGlvbiBjcm9zcyhvdXQsIGEsIGIpIHtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXTtcbiAgdmFyIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXTtcbiAgb3V0WzBdID0gYXkgKiBieiAtIGF6ICogYnk7XG4gIG91dFsxXSA9IGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbMl0gPSBheCAqIGJ5IC0gYXkgKiBieDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbnZhciBsZW4gPSBsZW5ndGg7XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWMzcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWMzLiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjM3MgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZlYyA9IGNyZWF0ZSQzKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gMztcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIHZlY1syXSA9IGFbaSArIDJdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgICBhW2kgKyAyXSA9IHZlY1syXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbiAgfTtcbn0pKCk7XG5cbi8qKlxuICogNCBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjNFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjNFxuICpcbiAqIEByZXR1cm5zIHt2ZWM0fSBhIG5ldyA0RCB2ZWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGUkMigpIHtcbiAgdmFyIG91dCA9IG5ldyBBUlJBWV9UWVBFKDQpO1xuXG4gIGlmIChBUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzQgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWM0fSBhIG5ldyA0RCB2ZWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBmcm9tVmFsdWVzKHgsIHksIHosIHcpIHtcbiAgdmFyIG91dCA9IG5ldyBBUlJBWV9UWVBFKDQpO1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICBvdXRbM10gPSB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBOb3JtYWxpemUgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUkMShvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIHcgPSBhWzNdO1xuICB2YXIgbGVuID0geCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHc7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gIH1cblxuICBvdXRbMF0gPSB4ICogbGVuO1xuICBvdXRbMV0gPSB5ICogbGVuO1xuICBvdXRbMl0gPSB6ICogbGVuO1xuICBvdXRbM10gPSB3ICogbGVuO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjNHMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjNC4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzRzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciB2ZWMgPSBjcmVhdGUkMigpO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgIHZhciBpLCBsO1xuXG4gICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgIHN0cmlkZSA9IDQ7XG4gICAgfVxuXG4gICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBsID0gTWF0aC5taW4oY291bnQgKiBzdHJpZGUgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IGEubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGw7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2ZWNbMF0gPSBhW2ldO1xuICAgICAgdmVjWzFdID0gYVtpICsgMV07XG4gICAgICB2ZWNbMl0gPSBhW2kgKyAyXTtcbiAgICAgIHZlY1szXSA9IGFbaSArIDNdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgICBhW2kgKyAyXSA9IHZlY1syXTtcbiAgICAgIGFbaSArIDNdID0gdmVjWzNdO1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9O1xufSkoKTtcblxuLyoqXG4gKiBRdWF0ZXJuaW9uXG4gKiBAbW9kdWxlIHF1YXRcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgcXVhdFxuICpcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlJDEoKSB7XG4gIHZhciBvdXQgPSBuZXcgQVJSQVlfVFlQRSg0KTtcblxuICBpZiAoQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgfVxuXG4gIG91dFszXSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldHMgYSBxdWF0IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFuZCByb3RhdGlvbiBheGlzLFxuICogdGhlbiByZXR1cm5zIGl0LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGF4aXMgdGhlIGF4aXMgYXJvdW5kIHdoaWNoIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICoqL1xuXG5mdW5jdGlvbiBzZXRBeGlzQW5nbGUob3V0LCBheGlzLCByYWQpIHtcbiAgcmFkID0gcmFkICogMC41O1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIG91dFswXSA9IHMgKiBheGlzWzBdO1xuICBvdXRbMV0gPSBzICogYXhpc1sxXTtcbiAgb3V0WzJdID0gcyAqIGF4aXNbMl07XG4gIG91dFszXSA9IE1hdGguY29zKHJhZCk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5mdW5jdGlvbiBzbGVycChvdXQsIGEsIGIsIHQpIHtcbiAgLy8gYmVuY2htYXJrczpcbiAgLy8gICAgaHR0cDovL2pzcGVyZi5jb20vcXVhdGVybmlvbi1zbGVycC1pbXBsZW1lbnRhdGlvbnNcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXSxcbiAgICAgIGJ3ID0gYlszXTtcbiAgdmFyIG9tZWdhLCBjb3NvbSwgc2lub20sIHNjYWxlMCwgc2NhbGUxOyAvLyBjYWxjIGNvc2luZVxuXG4gIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidzsgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpXG5cbiAgaWYgKGNvc29tIDwgMC4wKSB7XG4gICAgY29zb20gPSAtY29zb207XG4gICAgYnggPSAtYng7XG4gICAgYnkgPSAtYnk7XG4gICAgYnogPSAtYno7XG4gICAgYncgPSAtYnc7XG4gIH0gLy8gY2FsY3VsYXRlIGNvZWZmaWNpZW50c1xuXG5cbiAgaWYgKDEuMCAtIGNvc29tID4gRVBTSUxPTikge1xuICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKVxuICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTtcbiAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTtcbiAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTtcbiAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207XG4gIH0gZWxzZSB7XG4gICAgLy8gXCJmcm9tXCIgYW5kIFwidG9cIiBxdWF0ZXJuaW9ucyBhcmUgdmVyeSBjbG9zZVxuICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb25cbiAgICBzY2FsZTAgPSAxLjAgLSB0O1xuICAgIHNjYWxlMSA9IHQ7XG4gIH0gLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlc1xuXG5cbiAgb3V0WzBdID0gc2NhbGUwICogYXggKyBzY2FsZTEgKiBieDtcbiAgb3V0WzFdID0gc2NhbGUwICogYXkgKyBzY2FsZTEgKiBieTtcbiAgb3V0WzJdID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejtcbiAgb3V0WzNdID0gc2NhbGUwICogYXcgKyBzY2FsZTEgKiBidztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHF1YXRlcm5pb24gZnJvbSB0aGUgZ2l2ZW4gM3gzIHJvdGF0aW9uIG1hdHJpeC5cbiAqXG4gKiBOT1RFOiBUaGUgcmVzdWx0YW50IHF1YXRlcm5pb24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIHlvdSBzaG91bGQgYmUgc3VyZVxuICogdG8gcmVub3JtYWxpemUgdGhlIHF1YXRlcm5pb24geW91cnNlbGYgd2hlcmUgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gcm90YXRpb24gbWF0cml4XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5mdW5jdGlvbiBmcm9tTWF0MyhvdXQsIG0pIHtcbiAgLy8gQWxnb3JpdGhtIGluIEtlbiBTaG9lbWFrZSdzIGFydGljbGUgaW4gMTk4NyBTSUdHUkFQSCBjb3Vyc2Ugbm90ZXNcbiAgLy8gYXJ0aWNsZSBcIlF1YXRlcm5pb24gQ2FsY3VsdXMgYW5kIEZhc3QgQW5pbWF0aW9uXCIuXG4gIHZhciBmVHJhY2UgPSBtWzBdICsgbVs0XSArIG1bOF07XG4gIHZhciBmUm9vdDtcblxuICBpZiAoZlRyYWNlID4gMC4wKSB7XG4gICAgLy8gfHd8ID4gMS8yLCBtYXkgYXMgd2VsbCBjaG9vc2UgdyA+IDEvMlxuICAgIGZSb290ID0gTWF0aC5zcXJ0KGZUcmFjZSArIDEuMCk7IC8vIDJ3XG5cbiAgICBvdXRbM10gPSAwLjUgKiBmUm9vdDtcbiAgICBmUm9vdCA9IDAuNSAvIGZSb290OyAvLyAxLyg0dylcblxuICAgIG91dFswXSA9IChtWzVdIC0gbVs3XSkgKiBmUm9vdDtcbiAgICBvdXRbMV0gPSAobVs2XSAtIG1bMl0pICogZlJvb3Q7XG4gICAgb3V0WzJdID0gKG1bMV0gLSBtWzNdKSAqIGZSb290O1xuICB9IGVsc2Uge1xuICAgIC8vIHx3fCA8PSAxLzJcbiAgICB2YXIgaSA9IDA7XG4gICAgaWYgKG1bNF0gPiBtWzBdKSBpID0gMTtcbiAgICBpZiAobVs4XSA+IG1baSAqIDMgKyBpXSkgaSA9IDI7XG4gICAgdmFyIGogPSAoaSArIDEpICUgMztcbiAgICB2YXIgayA9IChpICsgMikgJSAzO1xuICAgIGZSb290ID0gTWF0aC5zcXJ0KG1baSAqIDMgKyBpXSAtIG1baiAqIDMgKyBqXSAtIG1bayAqIDMgKyBrXSArIDEuMCk7XG4gICAgb3V0W2ldID0gMC41ICogZlJvb3Q7XG4gICAgZlJvb3QgPSAwLjUgLyBmUm9vdDtcbiAgICBvdXRbM10gPSAobVtqICogMyArIGtdIC0gbVtrICogMyArIGpdKSAqIGZSb290O1xuICAgIG91dFtqXSA9IChtW2ogKiAzICsgaV0gKyBtW2kgKiAzICsgal0pICogZlJvb3Q7XG4gICAgb3V0W2tdID0gKG1bayAqIDMgKyBpXSArIG1baSAqIDMgKyBrXSkgKiBmUm9vdDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXRlcm5pb24gdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG52YXIgbm9ybWFsaXplID0gbm9ybWFsaXplJDE7XG4vKipcbiAqIFNldHMgYSBxdWF0ZXJuaW9uIHRvIHJlcHJlc2VudCB0aGUgc2hvcnRlc3Qgcm90YXRpb24gZnJvbSBvbmVcbiAqIHZlY3RvciB0byBhbm90aGVyLlxuICpcbiAqIEJvdGggdmVjdG9ycyBhcmUgYXNzdW1lZCB0byBiZSB1bml0IGxlbmd0aC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgaW5pdGlhbCB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBkZXN0aW5hdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgdG1wdmVjMyA9IGNyZWF0ZSQzKCk7XG4gIHZhciB4VW5pdFZlYzMgPSBmcm9tVmFsdWVzJDEoMSwgMCwgMCk7XG4gIHZhciB5VW5pdFZlYzMgPSBmcm9tVmFsdWVzJDEoMCwgMSwgMCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgdmFyIGRvdCQxID0gZG90KGEsIGIpO1xuXG4gICAgaWYgKGRvdCQxIDwgLTAuOTk5OTk5KSB7XG4gICAgICBjcm9zcyh0bXB2ZWMzLCB4VW5pdFZlYzMsIGEpO1xuICAgICAgaWYgKGxlbih0bXB2ZWMzKSA8IDAuMDAwMDAxKSBjcm9zcyh0bXB2ZWMzLCB5VW5pdFZlYzMsIGEpO1xuICAgICAgbm9ybWFsaXplJDIodG1wdmVjMywgdG1wdmVjMyk7XG4gICAgICBzZXRBeGlzQW5nbGUob3V0LCB0bXB2ZWMzLCBNYXRoLlBJKTtcbiAgICAgIHJldHVybiBvdXQ7XG4gICAgfSBlbHNlIGlmIChkb3QkMSA+IDAuOTk5OTk5KSB7XG4gICAgICBvdXRbMF0gPSAwO1xuICAgICAgb3V0WzFdID0gMDtcbiAgICAgIG91dFsyXSA9IDA7XG4gICAgICBvdXRbM10gPSAxO1xuICAgICAgcmV0dXJuIG91dDtcbiAgICB9IGVsc2Uge1xuICAgICAgY3Jvc3ModG1wdmVjMywgYSwgYik7XG4gICAgICBvdXRbMF0gPSB0bXB2ZWMzWzBdO1xuICAgICAgb3V0WzFdID0gdG1wdmVjM1sxXTtcbiAgICAgIG91dFsyXSA9IHRtcHZlYzNbMl07XG4gICAgICBvdXRbM10gPSAxICsgZG90JDE7XG4gICAgICByZXR1cm4gbm9ybWFsaXplKG91dCwgb3V0KTtcbiAgICB9XG4gIH07XG59KSgpO1xuLyoqXG4gKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aXRoIHR3byBjb250cm9sIHBvaW50c1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGMgdGhlIHRoaXJkIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBkIHRoZSBmb3VydGggb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciB0ZW1wMSA9IGNyZWF0ZSQxKCk7XG4gIHZhciB0ZW1wMiA9IGNyZWF0ZSQxKCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCBhLCBiLCBjLCBkLCB0KSB7XG4gICAgc2xlcnAodGVtcDEsIGEsIGQsIHQpO1xuICAgIHNsZXJwKHRlbXAyLCBiLCBjLCB0KTtcbiAgICBzbGVycChvdXQsIHRlbXAxLCB0ZW1wMiwgMiAqIHQgKiAoMSAtIHQpKTtcbiAgICByZXR1cm4gb3V0O1xuICB9O1xufSkoKTtcbi8qKlxuICogU2V0cyB0aGUgc3BlY2lmaWVkIHF1YXRlcm5pb24gd2l0aCB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW5cbiAqIGF4ZXMuIEVhY2ggYXhpcyBpcyBhIHZlYzMgYW5kIGlzIGV4cGVjdGVkIHRvIGJlIHVuaXQgbGVuZ3RoIGFuZFxuICogcGVycGVuZGljdWxhciB0byBhbGwgb3RoZXIgc3BlY2lmaWVkIGF4ZXMuXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHZpZXcgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSB2aWV3aW5nIGRpcmVjdGlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHJpZ2h0IHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInJpZ2h0XCIgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdXAgICAgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGxvY2FsIFwidXBcIiBkaXJlY3Rpb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgbWF0ciA9IGNyZWF0ZSQ0KCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCB2aWV3LCByaWdodCwgdXApIHtcbiAgICBtYXRyWzBdID0gcmlnaHRbMF07XG4gICAgbWF0clszXSA9IHJpZ2h0WzFdO1xuICAgIG1hdHJbNl0gPSByaWdodFsyXTtcbiAgICBtYXRyWzFdID0gdXBbMF07XG4gICAgbWF0cls0XSA9IHVwWzFdO1xuICAgIG1hdHJbN10gPSB1cFsyXTtcbiAgICBtYXRyWzJdID0gLXZpZXdbMF07XG4gICAgbWF0cls1XSA9IC12aWV3WzFdO1xuICAgIG1hdHJbOF0gPSAtdmlld1syXTtcbiAgICByZXR1cm4gbm9ybWFsaXplKG91dCwgZnJvbU1hdDMob3V0LCBtYXRyKSk7XG4gIH07XG59KSgpO1xuXG4vKipcbiAqIDIgRGltZW5zaW9uYWwgVmVjdG9yXG4gKiBAbW9kdWxlIHZlYzJcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzJcbiAqXG4gKiBAcmV0dXJucyB7dmVjMn0gYSBuZXcgMkQgdmVjdG9yXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoMik7XG5cbiAgaWYgKEFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzJzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzIuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWMycyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gMjtcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgYVtpXSA9IHZlY1swXTtcbiAgICAgIGFbaSArIDFdID0gdmVjWzFdO1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9O1xufSkoKTtcblxuY29uc3QgY29udmV4U3dlZXAgPSAocmF3RHluYW1pY3NXb3JsZCwgZGVmKSA9PiB7XG4gICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICBjb25zdCBmcm9tVmVjMyA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5mcm9tWzBdLCBkZWYuZnJvbVsxXSwgZGVmLmZyb21bMl0pO1xuICAgIGNvbnN0IHRvVmVjMyA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi50b1swXSwgZGVmLnRvWzFdLCBkZWYudG9bMl0pO1xuICAgIGNvbnN0IGZyb21UcnNmID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybSgpO1xuICAgIGZyb21UcnNmLnNldElkZW50aXR5KCk7XG4gICAgZnJvbVRyc2Yuc2V0T3JpZ2luKGZyb21WZWMzKTtcbiAgICBjb25zdCB0b1Ryc2YgPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKCk7XG4gICAgdG9UcnNmLnNldElkZW50aXR5KCk7XG4gICAgdG9UcnNmLnNldE9yaWdpbih0b1ZlYzMpO1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBidWxsZXQuQ2xvc2VzdENvbnZleFJlc3VsdENhbGxiYWNrKGZyb21WZWMzLCB0b1ZlYzMpO1xuICAgIHJlc3VsdC5zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cChkZWYuY29sbGlzaW9uRmlsdGVyR3JvdXApO1xuICAgIHJlc3VsdC5zZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrKGRlZi5jb2xsaXNpb25GaWx0ZXJNYXNrKTtcbiAgICBjb25zdCBzaGFwZSA9IG5ldyBidWxsZXQuYnRTcGhlcmVTaGFwZShkZWYucmFkaXVzKTtcbiAgICByYXdEeW5hbWljc1dvcmxkLmNvbnZleFN3ZWVwVGVzdChzaGFwZSwgZnJvbVRyc2YsIHRvVHJzZiwgcmVzdWx0LCAwKTtcbiAgICBpZiAoIXJlc3VsdC5oYXNIaXQoKSkge1xuICAgICAgICBidWxsZXQuZGVzdHJveShmcm9tVmVjMyk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRvVmVjMyk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJlc3VsdCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHNoYXBlKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koZnJvbVRyc2YpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0b1Ryc2YpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGNvbnN0IG9iamVjdCA9IGJvZHlNYXAuZ2V0KChyZXN1bHQuZ2V0KCkgYXMgYW55KS5wdHIpO1xuICAgIC8vIGlmICghb2JqZWN0KSB7XG4gICAgLy8gICBidWxsZXQuZGVzdHJveShmcm9tVmVjMyk7XG4gICAgLy8gICBidWxsZXQuZGVzdHJveSh0b1ZlYzMpO1xuICAgIC8vICAgYnVsbGV0LmRlc3Ryb3kocmVzdWx0KTtcbiAgICAvLyAgIHJldHVybjtcbiAgICAvLyB9XG4gICAgLy8gZ2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uKCk6IG51bWJlcjtcbiAgICAvLyBnZXRfbV9jb2xsaXNpb25PYmplY3QoKTogYnRDb2xsaXNpb25PYmplY3Q7XG4gICAgY29uc3QgcmF3UG9zaXRpb24gPSByZXN1bHQuZ2V0X21faGl0UG9pbnRXb3JsZCgpO1xuICAgIGNvbnN0IHJhd05vcm1hbCA9IHJlc3VsdC5nZXRfbV9oaXROb3JtYWxXb3JsZCgpO1xuICAgIGNvbnN0IGZyYWN0aW9uID0gcmVzdWx0LmdldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbigpO1xuICAgIGNvbnN0IGltcGFjdCA9IGZyb21WYWx1ZXMkMShyYXdQb3NpdGlvbi54KCksIHJhd1Bvc2l0aW9uLnkoKSwgcmF3UG9zaXRpb24ueigpKTtcbiAgICBjb25zdCBub3JtYWwgPSBmcm9tVmFsdWVzJDEocmF3Tm9ybWFsLngoKSwgcmF3Tm9ybWFsLnkoKSwgcmF3Tm9ybWFsLnooKSk7XG4gICAgYnVsbGV0LmRlc3Ryb3kocmF3Tm9ybWFsKTtcbiAgICBidWxsZXQuZGVzdHJveShyYXdQb3NpdGlvbik7XG4gICAgYnVsbGV0LmRlc3Ryb3koZnJvbVZlYzMpO1xuICAgIGJ1bGxldC5kZXN0cm95KHRvVmVjMyk7XG4gICAgYnVsbGV0LmRlc3Ryb3kocmVzdWx0KTtcbiAgICBidWxsZXQuZGVzdHJveShzaGFwZSk7XG4gICAgYnVsbGV0LmRlc3Ryb3koZnJvbVRyc2YpO1xuICAgIGJ1bGxldC5kZXN0cm95KHRvVHJzZik7XG4gICAgcmV0dXJuIHsgZnJhY3Rpb24sIGltcGFjdCwgbm9ybWFsIH07XG59O1xuXG5jb25zdCBESVNBQkxFX0RFQUNUSVZBVElPTiA9IDQ7XG5jbGFzcyBDb25jcmV0ZVBoeXNpY0JvZHkgZXh0ZW5kcyBDb250YWN0RXZlbnRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihkZWYsIHJhd1NoYXBlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2lzQWxpdmUgPSB0cnVlO1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICB0aGlzLl9jdXN0b21TaGFwZSA9IHJhd1NoYXBlO1xuICAgICAgICBjb25zdCB0bXBWZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgdGhpcy5fY3VzdG9tU2hhcGUuc2hhcGUuY2FsY3VsYXRlTG9jYWxJbmVydGlhKGRlZi5tYXNzLCB0bXBWZWMzKTtcbiAgICAgICAgY29uc3QgbW90aW9uU3RhdGUgPSBudWxsOyAvLyBoYWNrIDooXG4gICAgICAgIGNvbnN0IHJiSW5mbyA9IG5ldyBidWxsZXQuYnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvKGRlZi5tYXNzLCBtb3Rpb25TdGF0ZSwgdGhpcy5fY3VzdG9tU2hhcGUuc2hhcGUsIHRtcFZlYzMpO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkgPSBuZXcgYnVsbGV0LmJ0UmlnaWRCb2R5KHJiSW5mbyk7XG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb25BbmRSb3RhdGlvbihkZWYucG9zaXRpb24sIGRlZi5vcmllbnRhdGlvbik7XG4gICAgICAgIC8vIHRoaXMuX2N1c3RvbVNoYXBlID0gdGhpcy5fZ2V0U2hhcGUoZGVmLnNoYXBlKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodG1wVmVjMyk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJiSW5mbyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX3Jhd1JpZ2lkQm9keSk7XG4gICAgICAgIC8vIGJ1bGxldC5kZXN0cm95KHRoaXMuX2N1c3RvbVNoYXBlKTtcbiAgICAgICAgdGhpcy5fY3VzdG9tU2hhcGUuY2xlYW51cCgpO1xuICAgICAgICAvLyBoYWNrIHRvIGZvcmNlIGl0IHRvIGNyYXNoIGlmIHRoZSBib2R5IGlzIHJldXNlZFxuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkgPSBudWxsO1xuICAgICAgICB0aGlzLl9pc0FsaXZlID0gZmFsc2U7XG4gICAgfVxuICAgIGlzQWxpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0FsaXZlO1xuICAgIH1cbiAgICBzZXRQb3NpdGlvbkFuZFJvdGF0aW9uKHBvc2l0aW9uLCByb3RhdGlvbikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pO1xuICAgICAgICBjb25zdCBuZXdSb3RhdGlvbiA9IG5ldyBidWxsZXQuYnRRdWF0ZXJuaW9uKHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0sIHJvdGF0aW9uWzNdKTtcbiAgICAgICAgY29uc3QgbmV3VHJhbnNmb3JtID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybShuZXdSb3RhdGlvbiwgbmV3UG9zaXRpb24pO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0V29ybGRUcmFuc2Zvcm0obmV3VHJhbnNmb3JtKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VHJhbnNmb3JtKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3UG9zaXRpb24pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdSb3RhdGlvbik7XG4gICAgfVxuICAgIHNldFBvc2l0aW9uKHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIGNvbnN0IG5ld1JvdGF0aW9uID0gbmV3IGJ1bGxldC5idFF1YXRlcm5pb24ocm90YXRpb25bMF0sIHJvdGF0aW9uWzFdLCByb3RhdGlvblsyXSwgcm90YXRpb25bM10pO1xuICAgICAgICBjb25zdCBuZXdUcmFuc2Zvcm0gPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKG5ld1JvdGF0aW9uLCBuZXdQb3NpdGlvbik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRXb3JsZFRyYW5zZm9ybShuZXdUcmFuc2Zvcm0pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdUcmFuc2Zvcm0pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdQb3NpdGlvbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1JvdGF0aW9uKTtcbiAgICB9XG4gICAgc2V0Um90YXRpb24oeCwgeSwgeiwgdykge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBvcmlnaW4gPSB0aGlzLmdldFBvc2l0aW9uKCk7XG4gICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gbmV3IGJ1bGxldC5idFZlY3RvcjMob3JpZ2luWzBdLCBvcmlnaW5bMV0sIG9yaWdpblsyXSk7XG4gICAgICAgIGNvbnN0IG5ld1JvdGF0aW9uID0gbmV3IGJ1bGxldC5idFF1YXRlcm5pb24oeCwgeSwgeiwgdyk7XG4gICAgICAgIGNvbnN0IG5ld1RyYW5zZm9ybSA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0obmV3Um90YXRpb24sIG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldFdvcmxkVHJhbnNmb3JtKG5ld1RyYW5zZm9ybSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1RyYW5zZm9ybSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3Um90YXRpb24pO1xuICAgIH1cbiAgICBnZXRQb3NpdGlvbkFuZFJvdGF0aW9uKHBvc2l0aW9uLCByb3RhdGlvbikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByYXdUcmFuc2Zvcm0gPSB0aGlzLl9yYXdSaWdpZEJvZHkuZ2V0V29ybGRUcmFuc2Zvcm0oKTtcbiAgICAgICAgY29uc3QgcmF3T3JpZ2luID0gcmF3VHJhbnNmb3JtLmdldE9yaWdpbigpO1xuICAgICAgICBjb25zdCByYXdSb3RhdGlvbiA9IHJhd1RyYW5zZm9ybS5nZXRSb3RhdGlvbigpO1xuICAgICAgICBwb3NpdGlvblswXSA9IHJhd09yaWdpbi54KCk7XG4gICAgICAgIHBvc2l0aW9uWzFdID0gcmF3T3JpZ2luLnkoKTtcbiAgICAgICAgcG9zaXRpb25bMl0gPSByYXdPcmlnaW4ueigpO1xuICAgICAgICByb3RhdGlvblswXSA9IHJhd1JvdGF0aW9uLngoKTtcbiAgICAgICAgcm90YXRpb25bMV0gPSByYXdSb3RhdGlvbi55KCk7XG4gICAgICAgIHJvdGF0aW9uWzJdID0gcmF3Um90YXRpb24ueigpO1xuICAgICAgICByb3RhdGlvblszXSA9IHJhd1JvdGF0aW9uLncoKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3Um90YXRpb24pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyYXdPcmlnaW4pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyYXdUcmFuc2Zvcm0pO1xuICAgIH1cbiAgICBnZXRQb3NpdGlvbigpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgcmF3VHJhbnNmb3JtID0gdGhpcy5fcmF3UmlnaWRCb2R5LmdldFdvcmxkVHJhbnNmb3JtKCk7XG4gICAgICAgIGNvbnN0IHJhd09yaWdpbiA9IHJhd1RyYW5zZm9ybS5nZXRPcmlnaW4oKTtcbiAgICAgICAgY29uc3Qgb3JpZ2luID0gZnJvbVZhbHVlcyQxKHJhd09yaWdpbi54KCksIHJhd09yaWdpbi55KCksIHJhd09yaWdpbi56KCkpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyYXdPcmlnaW4pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyYXdUcmFuc2Zvcm0pO1xuICAgICAgICByZXR1cm4gb3JpZ2luO1xuICAgIH1cbiAgICBnZXRSb3RhdGlvbigpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgcmF3VHJhbnNmb3JtID0gdGhpcy5fcmF3UmlnaWRCb2R5LmdldFdvcmxkVHJhbnNmb3JtKCk7XG4gICAgICAgIGNvbnN0IHJhd1JvdGF0aW9uID0gcmF3VHJhbnNmb3JtLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gZnJvbVZhbHVlcyhyYXdSb3RhdGlvbi54KCksIHJhd1JvdGF0aW9uLnkoKSwgcmF3Um90YXRpb24ueigpLCByYXdSb3RhdGlvbi53KCkpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyYXdSb3RhdGlvbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1RyYW5zZm9ybSk7XG4gICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICB9XG4gICAgZ2V0TGluZWFyVmVsb2NpdHkoKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHZlbCA9IHRoaXMuX3Jhd1JpZ2lkQm9keS5nZXRMaW5lYXJWZWxvY2l0eSgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGZyb21WYWx1ZXMkMSh2ZWwueCgpLCB2ZWwueSgpLCB2ZWwueigpKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodmVsKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBnZXRBbmd1bGFyVmVsb2NpdHkoKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHZlbCA9IHRoaXMuX3Jhd1JpZ2lkQm9keS5nZXRBbmd1bGFyVmVsb2NpdHkoKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmcm9tVmFsdWVzJDEodmVsLngoKSwgdmVsLnkoKSwgdmVsLnooKSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHZlbCk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgc2V0TGluZWFyVmVsb2NpdHkoeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWZWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldExpbmVhclZlbG9jaXR5KG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIHNldEFuZ3VsYXJWZWxvY2l0eSh4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0QW5ndWxhclZlbG9jaXR5KG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIHNldExpbmVhckZhY3Rvcih4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0TGluZWFyRmFjdG9yKG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIHNldEFuZ3VsYXJGYWN0b3IoeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWZWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldEFuZ3VsYXJGYWN0b3IobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgYXBwbHlDZW50cmFsRm9yY2UoeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWZWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LmFwcGx5Q2VudHJhbEZvcmNlKG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIGFwcGx5Q2VudHJhbEltcHVsc2UoeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWZWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LmFwcGx5Q2VudHJhbEltcHVsc2UobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgc2V0RGFtcGluZyhsaW5lYXIsIGFuZ3VsYXIgPSAwKSB7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXREYW1waW5nKGxpbmVhciwgYW5ndWxhcik7XG4gICAgfVxuICAgIHNldENjZE1vdGlvblRocmVzaG9sZChjY2RNb3Rpb25UaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldENjZE1vdGlvblRocmVzaG9sZChjY2RNb3Rpb25UaHJlc2hvbGQpO1xuICAgIH1cbiAgICBzZXRDY2RTd2VwdFNwaGVyZVJhZGl1cyhyYWRpdXMpIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldENjZFN3ZXB0U3BoZXJlUmFkaXVzKHJhZGl1cyk7XG4gICAgfVxuICAgIHNldFJlc3RpdHV0aW9uKHJlc3RpdHV0aW9uKSB7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRSZXN0aXR1dGlvbihyZXN0aXR1dGlvbik7XG4gICAgfVxuICAgIHNldEZyaWN0aW9uKGZyaWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRGcmljdGlvbihmcmljdGlvbik7XG4gICAgfVxuICAgIHNldFJvbGxpbmdGcmljdGlvbihmcmljdGlvbikge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0Um9sbGluZ0ZyaWN0aW9uKGZyaWN0aW9uKTtcbiAgICB9XG4gICAgc2V0R3Jhdml0eSh4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0R3Jhdml0eShuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBpc1N0YXRpY09iamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1JpZ2lkQm9keS5pc1N0YXRpY09iamVjdCgpO1xuICAgIH1cbiAgICBpc0tpbmVtYXRpY09iamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1JpZ2lkQm9keS5pc0tpbmVtYXRpY09iamVjdCgpO1xuICAgIH1cbiAgICBpc1N0YXRpY09yS2luZW1hdGljT2JqZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3UmlnaWRCb2R5LmlzU3RhdGljT3JLaW5lbWF0aWNPYmplY3QoKTtcbiAgICB9XG4gICAgaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0KCkgfHwgdGhpcy5fcmF3UmlnaWRCb2R5LmlzQWN0aXZlKCkpO1xuICAgIH1cbiAgICBlbmFibGVEZWFjdGl2YXRpb24oKSB7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5hY3RpdmF0ZSh0cnVlKTtcbiAgICB9XG4gICAgZGlzYWJsZURlYWN0aXZhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldEFjdGl2YXRpb25TdGF0ZShESVNBQkxFX0RFQUNUSVZBVElPTik7XG4gICAgfVxuICAgIGNhbm5vdERlYWN0aXZhdGUoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0KCkgfHxcbiAgICAgICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5nZXRBY3RpdmF0aW9uU3RhdGUoKSA9PSBESVNBQkxFX0RFQUNUSVZBVElPTik7XG4gICAgfVxuICAgIGNhbkRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jYW5ub3REZWFjdGl2YXRlKCk7XG4gICAgfVxufVxuXG5jbGFzcyBDb25jcmV0ZVBoeXNpY1ZlaGljbGUge1xuICAgIGNvbnN0cnVjdG9yKHJhd0R5bmFtaWNzV29ybGQsIGNoYXNzaXNCb2R5LCBkZWYpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgdGhpcy5fY2hhc3Npc0JvZHkgPSBjaGFzc2lzQm9keTtcbiAgICAgICAgdGhpcy5fdmVoaWNsZVR1bmluZyA9IG5ldyBidWxsZXQuYnRWZWhpY2xlVHVuaW5nKCk7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRWZWhpY2xlUmF5Y2FzdGVyID0gbmV3IGJ1bGxldC5idERlZmF1bHRWZWhpY2xlUmF5Y2FzdGVyKHJhd0R5bmFtaWNzV29ybGQpO1xuICAgICAgICB0aGlzLl9yYXdWZWhpY2xlID0gbmV3IGJ1bGxldC5idFJheWNhc3RWZWhpY2xlKHRoaXMuX3ZlaGljbGVUdW5pbmcsIGNoYXNzaXNCb2R5Ll9yYXdSaWdpZEJvZHksIHRoaXMuX2RlZmF1bHRWZWhpY2xlUmF5Y2FzdGVyKTtcbiAgICAgICAgdGhpcy5fcmF3VmVoaWNsZS5zZXRDb29yZGluYXRlU3lzdGVtKGRlZi5jb29yZGluYXRlU3lzdGVtWzBdLCBkZWYuY29vcmRpbmF0ZVN5c3RlbVsxXSwgZGVmLmNvb3JkaW5hdGVTeXN0ZW1bMl0pO1xuICAgICAgICBjb25zdCBncm91bmREaXJlY3Rpb24gPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYuZ3JvdW5kRGlyZWN0aW9uWzBdLCBkZWYuZ3JvdW5kRGlyZWN0aW9uWzFdLCBkZWYuZ3JvdW5kRGlyZWN0aW9uWzJdKTtcbiAgICAgICAgY29uc3Qgcm90YXRpb25BeGlzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLnJvdGF0aW9uQXhpc1swXSwgZGVmLnJvdGF0aW9uQXhpc1sxXSwgZGVmLnJvdGF0aW9uQXhpc1syXSk7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb25Qb2ludCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKCk7XG4gICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBkZWYud2hlZWxzLmxlbmd0aDsgKytpaSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGRlZi53aGVlbHNbaWldO1xuICAgICAgICAgICAgY29ubmVjdGlvblBvaW50LnNldFZhbHVlKGN1cnJlbnQuY29ubmVjdGlvblBvaW50WzBdLCBjdXJyZW50LmNvbm5lY3Rpb25Qb2ludFsxXSwgY3VycmVudC5jb25uZWN0aW9uUG9pbnRbMl0pO1xuICAgICAgICAgICAgY29uc3Qgd2hlZWxJbmZvID0gdGhpcy5fcmF3VmVoaWNsZS5hZGRXaGVlbChjb25uZWN0aW9uUG9pbnQsIC8vIGNvbm5lY3Rpb25Qb2ludENTMCxcbiAgICAgICAgICAgIGdyb3VuZERpcmVjdGlvbiwgLy8gd2hlZWxEaXJlY3Rpb25DUzAsXG4gICAgICAgICAgICByb3RhdGlvbkF4aXMsIC8vIHdoZWVsQXhsZUNTLFxuICAgICAgICAgICAgZGVmLnN1c3BlbnNpb25SZXN0TGVuZ3RoLCBkZWYud2hlZWxSYWRpdXMsIHRoaXMuX3ZlaGljbGVUdW5pbmcsIGN1cnJlbnQuaXNGcm9udFdoZWVsKTtcbiAgICAgICAgICAgIHdoZWVsSW5mby5zZXRfbV9zdXNwZW5zaW9uU3RpZmZuZXNzKGRlZi5zdXNwZW5zaW9uU3RpZmZuZXNzKTtcbiAgICAgICAgICAgIHdoZWVsSW5mby5zZXRfbV93aGVlbHNEYW1waW5nUmVsYXhhdGlvbihkZWYud2hlZWxzRGFtcGluZ1JlbGF4YXRpb24pO1xuICAgICAgICAgICAgd2hlZWxJbmZvLnNldF9tX3doZWVsc0RhbXBpbmdDb21wcmVzc2lvbihkZWYud2hlZWxzRGFtcGluZ0NvbXByZXNzaW9uKTtcbiAgICAgICAgICAgIHdoZWVsSW5mby5zZXRfbV9mcmljdGlvblNsaXAoZGVmLndoZWVsRnJpY3Rpb24pO1xuICAgICAgICAgICAgd2hlZWxJbmZvLnNldF9tX3JvbGxJbmZsdWVuY2UoZGVmLnJvbGxJbmZsdWVuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGNvbm5lY3Rpb25Qb2ludCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGdyb3VuZERpcmVjdGlvbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJvdGF0aW9uQXhpcyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX3Jhd1ZlaGljbGUpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9kZWZhdWx0VmVoaWNsZVJheWNhc3Rlcik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX3ZlaGljbGVUdW5pbmcpO1xuICAgIH1cbiAgICBnZXRDaGFzc2lzQm9keSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoYXNzaXNCb2R5O1xuICAgIH1cbiAgICBzZXRTdGVlcmluZ1ZhbHVlKGluZGV4LCBhbmdsZSkge1xuICAgICAgICB0aGlzLl9yYXdWZWhpY2xlLnNldFN0ZWVyaW5nVmFsdWUoYW5nbGUsIGluZGV4KTtcbiAgICB9XG4gICAgYXBwbHlFbmdpbmVGb3JjZShpbmRleCwgZm9yY2UpIHtcbiAgICAgICAgdGhpcy5fcmF3VmVoaWNsZS5hcHBseUVuZ2luZUZvcmNlKGZvcmNlLCBpbmRleCk7XG4gICAgfVxuICAgIHNldEJyYWtlKGluZGV4LCBmb3JjZSkge1xuICAgICAgICB0aGlzLl9yYXdWZWhpY2xlLnNldEJyYWtlKGZvcmNlLCBpbmRleCk7XG4gICAgfVxuICAgIGdldFdoZWVUcmFuc2Zvcm1zKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBhbGxUcmFuc2Zvcm1zID0gW107XG4gICAgICAgIGNvbnN0IGludGVycG9sYXRlZFRyYW5zZm9ybSA9IHRydWU7XG4gICAgICAgIGNvbnN0IG51bVdoZWVscyA9IHRoaXMuX3Jhd1ZlaGljbGUuZ2V0TnVtV2hlZWxzKCk7XG4gICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1XaGVlbHM7ICsraWkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Jhd1ZlaGljbGUudXBkYXRlV2hlZWxUcmFuc2Zvcm0oaWksIGludGVycG9sYXRlZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICBjb25zdCByYXdUcmFuc2Zvcm0gPSB0aGlzLl9yYXdWZWhpY2xlLmdldFdoZWVsVHJhbnNmb3JtV1MoaWkpO1xuICAgICAgICAgICAgY29uc3QgcmF3T3JpZ2luID0gcmF3VHJhbnNmb3JtLmdldE9yaWdpbigpO1xuICAgICAgICAgICAgY29uc3QgcmF3Um90YXRpb24gPSByYXdUcmFuc2Zvcm0uZ2V0Um90YXRpb24oKTtcbiAgICAgICAgICAgIGFsbFRyYW5zZm9ybXMucHVzaCh7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGZyb21WYWx1ZXMkMShyYXdPcmlnaW4ueCgpLCByYXdPcmlnaW4ueSgpLCByYXdPcmlnaW4ueigpKSxcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogZnJvbVZhbHVlcyhyYXdSb3RhdGlvbi54KCksIHJhd1JvdGF0aW9uLnkoKSwgcmF3Um90YXRpb24ueigpLCByYXdSb3RhdGlvbi53KCkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBidWxsZXQuZGVzdHJveShyYXdSb3RhdGlvbik7XG4gICAgICAgICAgICBidWxsZXQuZGVzdHJveShyYXdPcmlnaW4pO1xuICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3VHJhbnNmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWxsVHJhbnNmb3JtcztcbiAgICB9XG59XG5cbmNsYXNzIENvbmNyZXRlR2VuZXJpYzZEb2ZDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgdGhpcy5fYm9keUEgPSBkZWYuYm9keUE7XG4gICAgICAgIHRoaXMuX2JvZHlCID0gZGVmLmJvZHlCO1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByYXdSaWdpZEJvZHlBID0gZGVmLmJvZHlBLl9yYXdSaWdpZEJvZHk7XG4gICAgICAgIGNvbnN0IHJhd1JpZ2lkQm9keUIgPSBkZWYuYm9keUIuX3Jhd1JpZ2lkQm9keTtcbiAgICAgICAgY29uc3QgbmV3Um90YXRpb24gPSBuZXcgYnVsbGV0LmJ0UXVhdGVybmlvbigwLCAwLCAxLCAwKTtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb25BID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmZyYW1lQVswXSwgZGVmLmZyYW1lQVsxXSwgZGVmLmZyYW1lQVsyXSk7XG4gICAgICAgIGNvbnN0IG5ld1RyYW5zZm9ybUEgPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKG5ld1JvdGF0aW9uLCBuZXdQb3NpdGlvbkEpO1xuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbkIgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYuZnJhbWVCWzBdLCBkZWYuZnJhbWVCWzFdLCBkZWYuZnJhbWVCWzJdKTtcbiAgICAgICAgY29uc3QgbmV3VHJhbnNmb3JtQiA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0obmV3Um90YXRpb24sIG5ld1Bvc2l0aW9uQik7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQgPSBuZXcgYnVsbGV0LmJ0R2VuZXJpYzZEb2ZTcHJpbmdDb25zdHJhaW50KHJhd1JpZ2lkQm9keUEsIHJhd1JpZ2lkQm9keUIsIG5ld1RyYW5zZm9ybUEsIG5ld1RyYW5zZm9ybUIsIGRlZi51c2VSZWZlcmVuY2VGcmFtZUEpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZVNwcmluZygwLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlU3ByaW5nKDEsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVTcHJpbmcoMiwgZmFsc2UpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldFN0aWZmbmVzcygwLCAxKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRTdGlmZm5lc3MoMSwgMSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0U3RpZmZuZXNzKDIsIDEpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldERhbXBpbmcoMCwgMSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0RGFtcGluZygxLCAxKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXREYW1waW5nKDIsIDEpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdUcmFuc2Zvcm1BKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VHJhbnNmb3JtQik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1Bvc2l0aW9uQSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1Bvc2l0aW9uQik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1JvdGF0aW9uKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fcmF3Q29uc3RyYWludCk7XG4gICAgfVxuICAgIHNldExpbmVhckxvd2VyTGltaXQodmFsKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZhbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHZhbFswXSwgdmFsWzFdLCB2YWxbMl0pO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldExpbmVhckxvd2VyTGltaXQobmV3VmFsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmFsKTtcbiAgICB9XG4gICAgc2V0TGluZWFyVXBwZXJMaW1pdCh2YWwpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmFsID0gbmV3IGJ1bGxldC5idFZlY3RvcjModmFsWzBdLCB2YWxbMV0sIHZhbFsyXSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0TGluZWFyVXBwZXJMaW1pdChuZXdWYWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWYWwpO1xuICAgIH1cbiAgICBzZXRBbmd1bGFyTG93ZXJMaW1pdCh2YWwpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmFsID0gbmV3IGJ1bGxldC5idFZlY3RvcjModmFsWzBdLCB2YWxbMV0sIHZhbFsyXSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0QW5ndWxhckxvd2VyTGltaXQobmV3VmFsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmFsKTtcbiAgICB9XG4gICAgc2V0QW5ndWxhclVwcGVyTGltaXQodmFsKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZhbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHZhbFswXSwgdmFsWzFdLCB2YWxbMl0pO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldEFuZ3VsYXJVcHBlckxpbWl0KG5ld1ZhbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZhbCk7XG4gICAgfVxufVxuXG5jbGFzcyBDb25jcmV0ZUhpbmdlQ29uc3RyYWludCB7XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIHRoaXMuX2JvZHlBID0gZGVmLmJvZHlBO1xuICAgICAgICB0aGlzLl9ib2R5QiA9IGRlZi5ib2R5QjtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgcmF3UmlnaWRCb2R5QSA9IGRlZi5ib2R5QS5fcmF3UmlnaWRCb2R5O1xuICAgICAgICBjb25zdCByYXdSaWdpZEJvZHlCID0gZGVmLmJvZHlCLl9yYXdSaWdpZEJvZHk7XG4gICAgICAgIC8vIGNvbnN0IG5ld1JvdGF0aW9uID0gbmV3IGJ1bGxldC5idFF1YXRlcm5pb24oMCwgMCwgMSwgMCk7XG4gICAgICAgIGNvbnN0IHBpdm90SW5BID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLnBpdm90SW5BWzBdLCBkZWYucGl2b3RJbkFbMV0sIGRlZi5waXZvdEluQVsyXSk7XG4gICAgICAgIGNvbnN0IHBpdm90SW5CID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLnBpdm90SW5CWzBdLCBkZWYucGl2b3RJbkJbMV0sIGRlZi5waXZvdEluQlsyXSk7XG4gICAgICAgIGNvbnN0IGF4aXNJbkEgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYuYXhpc0luQVswXSwgZGVmLmF4aXNJbkFbMV0sIGRlZi5heGlzSW5BWzJdKTtcbiAgICAgICAgY29uc3QgYXhpc0luQiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5heGlzSW5CWzBdLCBkZWYuYXhpc0luQlsxXSwgZGVmLmF4aXNJbkJbMl0pO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50ID0gbmV3IGJ1bGxldC5idEhpbmdlQ29uc3RyYWludChyYXdSaWdpZEJvZHlBLCByYXdSaWdpZEJvZHlCLCBwaXZvdEluQSwgcGl2b3RJbkIsIGF4aXNJbkEsIGF4aXNJbkIsIGRlZi51c2VSZWZlcmVuY2VGcmFtZUEpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZVNwcmluZygwLCBmYWxzZSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlU3ByaW5nKDEsIGZhbHNlKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVTcHJpbmcoMiwgZmFsc2UpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LnNldFN0aWZmbmVzcygwLCAxKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5zZXRTdGlmZm5lc3MoMSwgMSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0U3RpZmZuZXNzKDIsIDEpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LnNldERhbXBpbmcoMCwgMSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0RGFtcGluZygxLCAxKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5zZXREYW1waW5nKDIsIDEpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShwaXZvdEluQSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHBpdm90SW5CKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koYXhpc0luQSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGF4aXNJbkIpO1xuICAgICAgICAvLyBidWxsZXQuZGVzdHJveShuZXdSb3RhdGlvbik7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX3Jhd0NvbnN0cmFpbnQpO1xuICAgIH1cbiAgICBzZXRMaW1pdChsb3csIGhpZ2gsIHNvZnRuZXNzLCBiaWFzRmFjdG9yLCByZWxheGF0aW9uRmFjdG9yKSB7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0TGltaXQobG93LCBoaWdoLCBzb2Z0bmVzcywgYmlhc0ZhY3RvciwgcmVsYXhhdGlvbkZhY3Rvcik7XG4gICAgfVxuICAgIGVuYWJsZUFuZ3VsYXJNb3RvcihlbmFibGVNb3RvciwgdGFyZ2V0VmVsb2NpdHksIG1heE1vdG9ySW1wdWxzZSkge1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZUFuZ3VsYXJNb3RvcihlbmFibGVNb3RvciwgdGFyZ2V0VmVsb2NpdHksIG1heE1vdG9ySW1wdWxzZSk7XG4gICAgfVxuICAgIC8vIHNldEFuZ3VsYXJPbmx5KGFuZ3VsYXJPbmx5OiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gICB0aGlzLl9yYXdDb25zdHJhaW50LnNldEFuZ3VsYXJPbmx5KGFuZ3VsYXJPbmx5KTtcbiAgICAvLyB9XG4gICAgZW5hYmxlTW90b3IoZW5hYmxlTW90b3IpIHtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVNb3RvcihlbmFibGVNb3Rvcik7XG4gICAgfVxuICAgIHNldE1heE1vdG9ySW1wdWxzZShtYXhNb3RvckltcHVsc2UpIHtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRNYXhNb3RvckltcHVsc2UobWF4TW90b3JJbXB1bHNlKTtcbiAgICB9XG4gICAgc2V0TW90b3JUYXJnZXQodGFyZ2V0QW5nbGUsIGR0KSB7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0TW90b3JUYXJnZXQodGFyZ2V0QW5nbGUsIGR0KTtcbiAgICB9XG59XG5cbmNvbnN0IHJheUNhc3QgPSAocmF3RHluYW1pY3NXb3JsZCwgYm9keU1hcCwgZGVmKSA9PiB7XG4gICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICBjb25zdCBmcm9tVmVjMyA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5mcm9tWzBdLCBkZWYuZnJvbVsxXSwgZGVmLmZyb21bMl0pO1xuICAgIGNvbnN0IHRvVmVjMyA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi50b1swXSwgZGVmLnRvWzFdLCBkZWYudG9bMl0pO1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBidWxsZXQuQ2xvc2VzdFJheVJlc3VsdENhbGxiYWNrKGZyb21WZWMzLCB0b1ZlYzMpO1xuICAgIHJlc3VsdC5zZXRfbV9jb2xsaXNpb25GaWx0ZXJHcm91cChkZWYuY29sbGlzaW9uRmlsdGVyR3JvdXApO1xuICAgIHJlc3VsdC5zZXRfbV9jb2xsaXNpb25GaWx0ZXJNYXNrKGRlZi5jb2xsaXNpb25GaWx0ZXJNYXNrKTtcbiAgICByYXdEeW5hbWljc1dvcmxkLnJheVRlc3QoZnJvbVZlYzMsIHRvVmVjMywgcmVzdWx0KTtcbiAgICBpZiAoIXJlc3VsdC5oYXNIaXQoKSkge1xuICAgICAgICBidWxsZXQuZGVzdHJveShmcm9tVmVjMyk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRvVmVjMyk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJlc3VsdCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb2JqZWN0ID0gYm9keU1hcC5nZXQocmVzdWx0LmdldF9tX2NvbGxpc2lvbk9iamVjdCgpLnB0cik7XG4gICAgaWYgKCFvYmplY3QpIHtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koZnJvbVZlYzMpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0b1ZlYzMpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyZXN1bHQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGdldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbigpOiBudW1iZXI7XG4gICAgLy8gZ2V0X21fY29sbGlzaW9uT2JqZWN0KCk6IGJ0Q29sbGlzaW9uT2JqZWN0O1xuICAgIGNvbnN0IHJhd05vcm1hbCA9IHJlc3VsdC5nZXRfbV9oaXROb3JtYWxXb3JsZCgpO1xuICAgIGNvbnN0IHJhd1Bvc2l0aW9uID0gcmVzdWx0LmdldF9tX2hpdFBvaW50V29ybGQoKTtcbiAgICBjb25zdCBpbXBhY3QgPSBmcm9tVmFsdWVzJDEocmF3UG9zaXRpb24ueCgpLCByYXdQb3NpdGlvbi55KCksIHJhd1Bvc2l0aW9uLnooKSk7XG4gICAgY29uc3Qgbm9ybWFsID0gZnJvbVZhbHVlcyQxKHJhd05vcm1hbC54KCksIHJhd05vcm1hbC55KCksIHJhd05vcm1hbC56KCkpO1xuICAgIGJ1bGxldC5kZXN0cm95KHJhd05vcm1hbCk7XG4gICAgYnVsbGV0LmRlc3Ryb3kocmF3UG9zaXRpb24pO1xuICAgIGJ1bGxldC5kZXN0cm95KGZyb21WZWMzKTtcbiAgICBidWxsZXQuZGVzdHJveSh0b1ZlYzMpO1xuICAgIGJ1bGxldC5kZXN0cm95KHJlc3VsdCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb2JqZWN0LFxuICAgICAgICBmcmFjdGlvbjogcmVzdWx0LmdldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbigpLFxuICAgICAgICBpbXBhY3QsXG4gICAgICAgIG5vcm1hbCxcbiAgICB9O1xufTtcblxuY2xhc3MgUGh5c2ljV29ybGQgZXh0ZW5kcyBDb250YWN0RXZlbnRIYW5kbGVyIHtcbiAgICAvLyBwcml2YXRlIF9xdWVyeVNoYXBlID0gbmV3IFF1ZXJ5U2hhcGUoKTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fYm9keU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fdmVoaWNsZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMgPSBbXTtcbiAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcDIgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzMiA9IFtdO1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICAvLyBidWxsZXQubGlzdGVuVG9Db250YWN0Q2FsbGJhY2tzKCk7XG4gICAgICAgIHRoaXMuX2NvbGxpc2lvbkNvbmYgPSBuZXcgYnVsbGV0LmJ0RGVmYXVsdENvbGxpc2lvbkNvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2hlciA9IG5ldyBidWxsZXQuYnRDb2xsaXNpb25EaXNwYXRjaGVyKHRoaXMuX2NvbGxpc2lvbkNvbmYpO1xuICAgICAgICB0aGlzLl9icm9hZFBoYXNlID0gbmV3IGJ1bGxldC5idERidnRCcm9hZHBoYXNlKCk7XG4gICAgICAgIHRoaXMuX3NvbHZlciA9IG5ldyBidWxsZXQuYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXIoKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3RHluYW1pY3NXb3JsZCA9IG5ldyBidWxsZXQuYnREaXNjcmV0ZUR5bmFtaWNzV29ybGQodGhpcy5fZGlzcGF0Y2hlciwgdGhpcy5fYnJvYWRQaGFzZSwgdGhpcy5fc29sdmVyLCB0aGlzLl9jb2xsaXNpb25Db25mKTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZCA9IG5ldyBidWxsZXQuYnRqc0R5bmFtaWNzV29ybGQodGhpcy5fZGlzcGF0Y2hlciwgdGhpcy5fYnJvYWRQaGFzZSwgdGhpcy5fc29sdmVyLCB0aGlzLl9jb2xsaXNpb25Db25mKTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5zZXRHcmF2aXR5KG5ldyBidWxsZXQuYnRWZWN0b3IzKDAsIDAsIC0xMCkpO1xuICAgICAgICB0aGlzLl9pbml0Q29sbGlzaW9uRXZlbnRzKCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzLmZvckVhY2goKGN1cnJDb25zdHJhaW50KSA9PiBjdXJyQ29uc3RyYWludC5kaXNwb3NlKCkpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50cy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzMi5mb3JFYWNoKChjdXJyQ29uc3RyYWludCkgPT4gY3VyckNvbnN0cmFpbnQuZGlzcG9zZSgpKTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMyLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAyLmNsZWFyKCk7XG4gICAgICAgIFsuLi50aGlzLl92ZWhpY2xlTWFwLnZhbHVlcygpXS5mb3JFYWNoKChjdXJyVmVoaWNsZSkgPT4gY3VyclZlaGljbGUuZGlzcG9zZSgpKTtcbiAgICAgICAgdGhpcy5fdmVoaWNsZU1hcC5jbGVhcigpO1xuICAgICAgICBbLi4udGhpcy5fYm9keU1hcC52YWx1ZXMoKV0uZm9yRWFjaCgoY3VyckJvZHkpID0+IGN1cnJCb2R5LmRpc3Bvc2UoKSk7XG4gICAgICAgIHRoaXMuX2JvZHlNYXAuY2xlYXIoKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fcmF3RHluYW1pY3NXb3JsZCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX3NvbHZlcik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX2Jyb2FkUGhhc2UpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9kaXNwYXRjaGVyKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fY29sbGlzaW9uQ29uZik7XG4gICAgfVxuICAgIGNyZWF0ZVJpZ2lkQm9keShkZWYpIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB0aGlzLl9nZXRTaGFwZShkZWYuc2hhcGUsIGRlZi5tYXNzID4gMCk7XG4gICAgICAgIGNvbnN0IG5ld0JvZHkgPSBuZXcgQ29uY3JldGVQaHlzaWNCb2R5KGRlZiwgbmV3U2hhcGUpO1xuICAgICAgICAvLyBpZiAoZGVmLnNoYXBlLnR5cGUgPT09ICdtZXNoJykge1xuICAgICAgICAvLyAgIGNvbnN0IG1lc2hTaGFwZSA9IG5ld0JvZHkuX3Jhd1NoYXBlIGFzIGJ1bGxldEpzLmJ0R0ltcGFjdE1lc2hTaGFwZTtcbiAgICAgICAgLy8gICBuZXdCb2R5Ll9yYXdTaGFwZSA9IHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuY3JlYXRlQ29tcG91bmRGcm9tR2ltcGFjdFNoYXBlKG1lc2hTaGFwZSwgMCk7XG4gICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgIC8vIH1cbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5hZGRSaWdpZEJvZHkobmV3Qm9keS5fcmF3UmlnaWRCb2R5LCAtMSwgLTEpO1xuICAgICAgICAvLyBoYWNrLCB3ZSB1c2UgdGhlIHdhc20gaGVhcCBtZW1vcnkgYWRkcmVzcyBhcyBhbiBpZGVudGlmaWVyLCBpdCdzIGZhc3RlclxuICAgICAgICB0aGlzLl9ib2R5TWFwLnNldChuZXdCb2R5Ll9yYXdSaWdpZEJvZHkucHRyLCBuZXdCb2R5KTtcbiAgICAgICAgcmV0dXJuIG5ld0JvZHk7XG4gICAgfVxuICAgIF9nZXRTaGFwZShkZWYsIGlzRHluYW1pYykge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBzd2l0Y2ggKGRlZi50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdib3gnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYm94SGFsZkV4dGVudCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgYm94SGFsZkV4dGVudC5zZXRWYWx1ZShkZWYuc2l6ZVswXSAqIDAuNSwgZGVmLnNpemVbMV0gKiAwLjUsIGRlZi5zaXplWzJdICogMC41KTtcbiAgICAgICAgICAgICAgICBjb25zdCByYXdTaGFwZSA9IG5ldyBidWxsZXQuYnRCb3hTaGFwZShib3hIYWxmRXh0ZW50KTtcbiAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShib3hIYWxmRXh0ZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZTogcmF3U2hhcGUsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IGJ1bGxldC5kZXN0cm95KHJhd1NoYXBlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnc3BoZXJlJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhd1NoYXBlID0gbmV3IGJ1bGxldC5idFNwaGVyZVNoYXBlKGRlZi5yYWRpdXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4gYnVsbGV0LmRlc3Ryb3kocmF3U2hhcGUpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdjeWxpbmRlcic6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBiVmVjID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLnJhZGl1cywgZGVmLnJhZGl1cywgZGVmLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3U2hhcGUgPSBuZXcgYnVsbGV0LmJ0Q3lsaW5kZXJTaGFwZShiVmVjKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZTogcmF3U2hhcGUsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGJWZWMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdjYXBzdWxlJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhd1NoYXBlID0gbmV3IGJ1bGxldC5idENhcHN1bGVTaGFwZShkZWYucmFkaXVzLCBkZWYubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZTogcmF3U2hhcGUsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IGJ1bGxldC5kZXN0cm95KHJhd1NoYXBlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnbWVzaCc6IHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBtZW1vcnkgbGVha1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyaWFuZ2xlTWVzaCA9IG5ldyBidWxsZXQuYnRUcmlhbmdsZU1lc2goKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiVmVjMSA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYlZlYzIgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJWZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICBkZWYudHJpYW5nbGVzLmZvckVhY2goKFt2ZWMxLCB2ZWMyLCB2ZWMzXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBiVmVjMS5zZXRWYWx1ZSh2ZWMxWzBdLCB2ZWMxWzFdLCB2ZWMxWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgYlZlYzIuc2V0VmFsdWUodmVjMlswXSwgdmVjMlsxXSwgdmVjMlsyXSk7XG4gICAgICAgICAgICAgICAgICAgIGJWZWMzLnNldFZhbHVlKHZlYzNbMF0sIHZlYzNbMV0sIHZlYzNbMl0pO1xuICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZU1lc2guYWRkVHJpYW5nbGUoYlZlYzEsIGJWZWMyLCBiVmVjMyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3koYlZlYzEpO1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGJWZWMyKTtcbiAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShiVmVjMyk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRHluYW1pYykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNoU2hhcGUgPSBuZXcgYnVsbGV0LmJ0R0ltcGFjdE1lc2hTaGFwZSh0cmlhbmdsZU1lc2gpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdTaGFwZSA9IHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuY3JlYXRlQ29tcG91bmRGcm9tR2ltcGFjdFNoYXBlKG1lc2hTaGFwZSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTogcmF3U2hhcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3U2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KG1lc2hTaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kodHJpYW5nbGVNZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJhd1NoYXBlID0gbmV3IGJ1bGxldC5idEJ2aFRyaWFuZ2xlTWVzaFNoYXBlKHRyaWFuZ2xlTWVzaCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGU6IHJhd1NoYXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShyYXdTaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveSh0cmlhbmdsZU1lc2gpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdjb21wb3VuZCc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCByYXdDb21wb3VuZCA9IG5ldyBidWxsZXQuYnRDb21wb3VuZFNoYXBlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmF3U2hhcGVzID0gW107XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxWZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFF1YXQgPSBuZXcgYnVsbGV0LmJ0UXVhdGVybmlvbigwLCAwLCAxLCAwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFRyYW5zZm9ybSA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgc2hhcGUsIHBvc2l0aW9uLCBvcmllbnRhdGlvbiB9IG9mIGRlZi5zaGFwZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3VmFsdWVzID0gdGhpcy5fZ2V0U2hhcGUoc2hhcGUsIGlzRHluYW1pYyk7XG4gICAgICAgICAgICAgICAgICAgIGFsbFJhd1NoYXBlcy5wdXNoKHJhd1ZhbHVlcyk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsVmVjMy5zZXRWYWx1ZShwb3NpdGlvblswXSwgcG9zaXRpb25bMV0sIHBvc2l0aW9uWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxRdWF0LnNldFZhbHVlKG9yaWVudGF0aW9uWzBdLCBvcmllbnRhdGlvblsxXSwgb3JpZW50YXRpb25bMl0sIG9yaWVudGF0aW9uWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxUcmFuc2Zvcm0uc2V0T3JpZ2luKGxvY2FsVmVjMyk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsVHJhbnNmb3JtLnNldFJvdGF0aW9uKGxvY2FsUXVhdCk7XG4gICAgICAgICAgICAgICAgICAgIHJhd0NvbXBvdW5kLmFkZENoaWxkU2hhcGUobG9jYWxUcmFuc2Zvcm0sIHJhd1ZhbHVlcy5zaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGN1cnJTaGFwZS5wb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBjdXJyU2hhcGUub3JpZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gY3VyclNoYXBlLnNoYXBlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGxvY2FsVmVjMyk7XG4gICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kobG9jYWxRdWF0KTtcbiAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShsb2NhbFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGU6IHJhd0NvbXBvdW5kLFxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShyYXdDb21wb3VuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGN1cnJSYXdTaGFwZSBvZiBhbGxSYXdTaGFwZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShjdXJyUmF3U2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveVJpZ2lkQm9keShyaWdpZEJvZHkpIHtcbiAgICAgICAgY29uc3QgcmF3UmlnaWRCb2R5ID0gcmlnaWRCb2R5Ll9yYXdSaWdpZEJvZHk7XG4gICAgICAgIGNvbnN0IGJvZHlQdHIgPSByYXdSaWdpZEJvZHkucHRyO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnJlbW92ZVJpZ2lkQm9keShyYXdSaWdpZEJvZHkpO1xuICAgICAgICAvLyBoYWNrLCB3ZSB1c2UgdGhlIHdhc20gaGVhcCBtZW1vcnkgYWRkcmVzcyBhcyBhbiBpZGVudGlmaWVyLCBpdCdzIGZhc3RlclxuICAgICAgICB0aGlzLl9ib2R5TWFwLmRlbGV0ZShib2R5UHRyKTtcbiAgICAgICAgcmlnaWRCb2R5LmRpc3Bvc2UoKTtcbiAgICAgICAgLy8gZGVzdHJveSBhbnkgY29uc3RyYWludHMgdGhhdCBtaWdodCBhZmZlY3QgdGhpcyBib2R5XG4gICAgICAgIGNvbnN0IGJvZHlMaXN0T2ZDb25zdHJhaW50cyA9IHRoaXMuX2NvbnN0cmFpbnRNYXAuZ2V0KGJvZHlQdHIpO1xuICAgICAgICBpZiAoYm9keUxpc3RPZkNvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGN1cnJDb25zdHJhaW50IG9mIGJvZHlMaXN0T2ZDb25zdHJhaW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUdlbmVyaWM2RG9mQ29uc3RyYWludChjdXJyQ29uc3RyYWludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGVzdHJveSBhbnkgY29uc3RyYWludHMgdGhhdCBtaWdodCBhZmZlY3QgdGhpcyBib2R5XG4gICAgICAgIGNvbnN0IGJvZHlMaXN0T2ZDb25zdHJhaW50czIgPSB0aGlzLl9jb25zdHJhaW50TWFwMi5nZXQoYm9keVB0cik7XG4gICAgICAgIGlmIChib2R5TGlzdE9mQ29uc3RyYWludHMyKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGN1cnJDb25zdHJhaW50IG9mIGJvZHlMaXN0T2ZDb25zdHJhaW50czIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lIaW5nZUNvbnN0cmFpbnQoY3VyckNvbnN0cmFpbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IHpvbWJpZSBib2RpZXMgY291bGQgc3RpbGwgYmUgcmVmL3VzZWQsIGNhbiBpdCBiZSBwcmV2ZW50ZWQ/XG4gICAgICAgIC8vIC0+IHJhdyByaWdpZCBib2R5IGlzIHNldCB0byBudWxsIGluc2lkZVxuICAgICAgICAvLyAtPiBzaG91bGQgZmluZCBhIGZyaWVuZGxpZXIgd2F5XG4gICAgfVxuICAgIGNyZWF0ZVZlaGljbGUoZGVmKSB7XG4gICAgICAgIGNvbnN0IG5ld0JvZHkgPSB0aGlzLmNyZWF0ZVJpZ2lkQm9keShkZWYuY2hhc3Npc0RlZik7XG4gICAgICAgIGNvbnN0IHJhd1JpZ2lkQm9keSA9IG5ld0JvZHk7XG4gICAgICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgQ29uY3JldGVQaHlzaWNWZWhpY2xlKHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQsIHJhd1JpZ2lkQm9keSwgZGVmKTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5hZGRBY3Rpb24odmVoaWNsZS5fcmF3VmVoaWNsZSk7XG4gICAgICAgIC8vIGhhY2ssIHdlIHVzZSB0aGUgd2FzbSBoZWFwIG1lbW9yeSBhZGRyZXNzIGFzIGFuIGlkZW50aWZpZXIsIGl0J3MgZmFzdGVyXG4gICAgICAgIHRoaXMuX3ZlaGljbGVNYXAuc2V0KHZlaGljbGUucHRyLCB2ZWhpY2xlKTtcbiAgICAgICAgcmV0dXJuIHZlaGljbGU7XG4gICAgfVxuICAgIGRlc3Ryb3lWZWhpY2xlKHZlaGljbGUpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95UmlnaWRCb2R5KHZlaGljbGUuX2NoYXNzaXNCb2R5KTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5yZW1vdmVBY3Rpb24odmVoaWNsZS5fcmF3VmVoaWNsZSk7XG4gICAgICAgIC8vIGhhY2ssIHdlIHVzZSB0aGUgd2FzbSBoZWFwIG1lbW9yeSBhZGRyZXNzIGFzIGFuIGlkZW50aWZpZXIsIGl0J3MgZmFzdGVyXG4gICAgICAgIHRoaXMuX3ZlaGljbGVNYXAuZGVsZXRlKHZlaGljbGUucHRyKTtcbiAgICAgICAgdmVoaWNsZS5kaXNwb3NlKCk7XG4gICAgICAgIC8vIFRPRE86IHpvbWJpZSB2ZWhpY2xlcyBjb3VsZCBzdGlsbCBiZSByZWYvdXNlZCwgY2FuIGl0IGJlIHByZXZlbnRlZD9cbiAgICB9XG4gICAgY3JlYXRlR2VuZXJpYzZEb2ZDb25zdHJhaW50KGRlZikge1xuICAgICAgICBjb25zdCBjb25zdHJhaW50ID0gbmV3IENvbmNyZXRlR2VuZXJpYzZEb2ZDb25zdHJhaW50KGRlZik7XG4gICAgICAgIC8vIGdldCBvciBjcmVhdGVcbiAgICAgICAgY29uc3QgcHRyQSA9IGRlZi5ib2R5QS5fcmF3UmlnaWRCb2R5LnB0cjtcbiAgICAgICAgbGV0IGJvZHlMaXN0QSA9IHRoaXMuX2NvbnN0cmFpbnRNYXAuZ2V0KHB0ckEpO1xuICAgICAgICBpZiAoIWJvZHlMaXN0QSkge1xuICAgICAgICAgICAgYm9keUxpc3RBID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwLnNldChwdHJBLCBib2R5TGlzdEEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNhdmUgY29uc3RyYWludCBhZ2FpbnN0IGJvZHlBIHBvaW50ZXIgdmFsdWVcbiAgICAgICAgYm9keUxpc3RBLnB1c2goY29uc3RyYWludCk7XG4gICAgICAgIC8vIGdldCBvciBjcmVhdGVcbiAgICAgICAgY29uc3QgcHRyQiA9IGRlZi5ib2R5Qi5fcmF3UmlnaWRCb2R5LnB0cjtcbiAgICAgICAgbGV0IGJvZHlMaXN0QiA9IHRoaXMuX2NvbnN0cmFpbnRNYXAuZ2V0KHB0ckIpO1xuICAgICAgICBpZiAoIWJvZHlMaXN0Qikge1xuICAgICAgICAgICAgYm9keUxpc3RCID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwLnNldChwdHJBLCBib2R5TGlzdEIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNhdmUgY29uc3RyYWludCBhZ2FpbnN0IGJvZHlCIHBvaW50ZXIgdmFsdWVcbiAgICAgICAgYm9keUxpc3RCLnB1c2goY29uc3RyYWludCk7XG4gICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzLnB1c2goY29uc3RyYWludCk7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50Ll9yYXdDb25zdHJhaW50LCB0cnVlKTtcbiAgICAgICAgLy8gVE9ETzogc2F2ZSBpbiBtYXBcbiAgICAgICAgLy8gVE9ETzogZGlzY2FyZCBpZiBvbmUgb2YgdGhlIGJvZHkgaXMgcmVtb3ZlZFxuICAgICAgICByZXR1cm4gY29uc3RyYWludDtcbiAgICB9XG4gICAgZGVzdHJveUdlbmVyaWM2RG9mQ29uc3RyYWludChjb25zdHJhaW50KSB7XG4gICAgICAgIGNvbnN0IGNvbmNyZXRlID0gY29uc3RyYWludDtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5yZW1vdmVDb25zdHJhaW50KGNvbmNyZXRlLl9yYXdDb25zdHJhaW50KTtcbiAgICAgICAgLy8gcmVtb3ZlIGNvbnN0cmFpbnRzIGZyb20gdGhlIG1hcCB2YWx1ZSAoYm9keUEpXG4gICAgICAgIGNvbnN0IGJvZHlMaXN0QSA9IHRoaXMuX2NvbnN0cmFpbnRNYXAuZ2V0KGNvbmNyZXRlLl9ib2R5QS5fcmF3UmlnaWRCb2R5LnB0cik7XG4gICAgICAgIGlmIChib2R5TGlzdEEpIHtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvbnN0cmFpbnQgYW5kIHJlbW92ZSBpdFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBib2R5TGlzdEEuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGJvZHlMaXN0QS5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSBjb25zdHJhaW50cyBmcm9tIHRoZSBtYXAgKGJvZHlCKVxuICAgICAgICBjb25zdCBib2R5TGlzdEIgPSB0aGlzLl9jb25zdHJhaW50TWFwLmdldChjb25jcmV0ZS5fYm9keUIuX3Jhd1JpZ2lkQm9keS5wdHIpO1xuICAgICAgICBpZiAoYm9keUxpc3RCKSB7XG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBjb25zdHJhaW50IGFuZCByZW1vdmUgaXRcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gYm9keUxpc3RCLmluZGV4T2YoY29uY3JldGUpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICBib2R5TGlzdEIuc3BsaWNlKGluZGV4LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgZnJvbSBsaXN0IG9mIGFsbCBjb25zdHJhaW50c1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2FsbENvbnN0cmFpbnRzLmluZGV4T2YoY29uY3JldGUpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMuc3BsaWNlKGluZGV4LCAwKTtcbiAgICAgICAgfVxuICAgICAgICBjb25jcmV0ZS5kaXNwb3NlKCk7XG4gICAgfVxuICAgIGNyZWF0ZUhpbmdlQ29uc3RyYWludChkZWYpIHtcbiAgICAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBDb25jcmV0ZUhpbmdlQ29uc3RyYWludChkZWYpO1xuICAgICAgICAvLyBnZXQgb3IgY3JlYXRlXG4gICAgICAgIGNvbnN0IHB0ckEgPSBkZWYuYm9keUEuX3Jhd1JpZ2lkQm9keS5wdHI7XG4gICAgICAgIGxldCBib2R5TGlzdEEgPSB0aGlzLl9jb25zdHJhaW50TWFwMi5nZXQocHRyQSk7XG4gICAgICAgIGlmICghYm9keUxpc3RBKSB7XG4gICAgICAgICAgICBib2R5TGlzdEEgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAyLnNldChwdHJBLCBib2R5TGlzdEEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNhdmUgY29uc3RyYWludCBhZ2FpbnN0IGJvZHlBIHBvaW50ZXIgdmFsdWVcbiAgICAgICAgYm9keUxpc3RBLnB1c2goY29uc3RyYWludCk7XG4gICAgICAgIC8vIGdldCBvciBjcmVhdGVcbiAgICAgICAgY29uc3QgcHRyQiA9IGRlZi5ib2R5Qi5fcmF3UmlnaWRCb2R5LnB0cjtcbiAgICAgICAgbGV0IGJvZHlMaXN0QiA9IHRoaXMuX2NvbnN0cmFpbnRNYXAyLmdldChwdHJCKTtcbiAgICAgICAgaWYgKCFib2R5TGlzdEIpIHtcbiAgICAgICAgICAgIGJvZHlMaXN0QiA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcDIuc2V0KHB0ckEsIGJvZHlMaXN0Qik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSBjb25zdHJhaW50IGFnYWluc3QgYm9keUIgcG9pbnRlciB2YWx1ZVxuICAgICAgICBib2R5TGlzdEIucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMyLnB1c2goY29uc3RyYWludCk7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50Ll9yYXdDb25zdHJhaW50LCB0cnVlKTtcbiAgICAgICAgLy8gVE9ETzogc2F2ZSBpbiBtYXBcbiAgICAgICAgLy8gVE9ETzogZGlzY2FyZCBpZiBvbmUgb2YgdGhlIGJvZHkgaXMgcmVtb3ZlZFxuICAgICAgICByZXR1cm4gY29uc3RyYWludDtcbiAgICB9XG4gICAgZGVzdHJveUhpbmdlQ29uc3RyYWludChjb25zdHJhaW50KSB7XG4gICAgICAgIGNvbnN0IGNvbmNyZXRlID0gY29uc3RyYWludDtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5yZW1vdmVDb25zdHJhaW50KGNvbmNyZXRlLl9yYXdDb25zdHJhaW50KTtcbiAgICAgICAgLy8gcmVtb3ZlIGNvbnN0cmFpbnRzIGZyb20gdGhlIG1hcCB2YWx1ZSAoYm9keUEpXG4gICAgICAgIGNvbnN0IGJvZHlMaXN0QSA9IHRoaXMuX2NvbnN0cmFpbnRNYXAyLmdldChjb25jcmV0ZS5fYm9keUEuX3Jhd1JpZ2lkQm9keS5wdHIpO1xuICAgICAgICBpZiAoYm9keUxpc3RBKSB7XG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBjb25zdHJhaW50IGFuZCByZW1vdmUgaXRcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gYm9keUxpc3RBLmluZGV4T2YoY29uY3JldGUpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICBib2R5TGlzdEEuc3BsaWNlKGluZGV4LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgY29uc3RyYWludHMgZnJvbSB0aGUgbWFwIChib2R5QilcbiAgICAgICAgY29uc3QgYm9keUxpc3RCID0gdGhpcy5fY29uc3RyYWludE1hcDIuZ2V0KGNvbmNyZXRlLl9ib2R5Qi5fcmF3UmlnaWRCb2R5LnB0cik7XG4gICAgICAgIGlmIChib2R5TGlzdEIpIHtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvbnN0cmFpbnQgYW5kIHJlbW92ZSBpdFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBib2R5TGlzdEIuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGJvZHlMaXN0Qi5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIGxpc3Qgb2YgYWxsIGNvbnN0cmFpbnRzXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fYWxsQ29uc3RyYWludHMyLmluZGV4T2YoY29uY3JldGUpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMyLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uY3JldGUuZGlzcG9zZSgpO1xuICAgIH1cbiAgICByYXlDYXN0KGZyb20sIHRvKSB7XG4gICAgICAgIHJldHVybiByYXlDYXN0KHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQsIHRoaXMuX2JvZHlNYXAsIHtcbiAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICB0byxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiAtMSxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IC0xXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb252ZXhTd2VlcChmcm9tLCB0bywgcmFkaXVzKSB7XG4gICAgICAgIHJldHVybiBjb252ZXhTd2VlcCh0aGlzLl9yYXdEeW5hbWljc1dvcmxkLCB7XG4gICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJHcm91cDogLTEsXG4gICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiAtMSxcbiAgICAgICAgICAgIHJhZGl1czogcmFkaXVzXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfaW5pdENvbGxpc2lvbkV2ZW50cygpIHtcbiAgICAgICAgY29uc3QgZXZlbnRGbGFncyA9IHtcbiAgICAgICAgICAgIHdvcmxkOiAxIDw8IDAsXG4gICAgICAgICAgICBib2R5QTogMSA8PCAxLFxuICAgICAgICAgICAgYm9keUI6IDEgPDwgMlxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBfb25Db250YWN0Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBib2R5QSA9IGV2ZW50LmRhdGEuZ2V0Qm9keUEoKTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHlCID0gZXZlbnQuZGF0YS5nZXRCb2R5QigpO1xuICAgICAgICAgICAgY29uc3QgcmlnaWRCb2R5QSA9IHRoaXMuX2JvZHlNYXAuZ2V0KGJvZHlBLnB0cik7XG4gICAgICAgICAgICBjb25zdCByaWdpZEJvZHlCID0gdGhpcy5fYm9keU1hcC5nZXQoYm9keUIucHRyKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdfb25Db250YWN0Q2hhbmdlJyk7XG4gICAgICAgICAgICBpZiAoIXJpZ2lkQm9keUEgfHwgIXJpZ2lkQm9keUIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gZXZlbnQudHlwZTtcbiAgICAgICAgICAgIGNvbnN0IGNvbGxpc2lvbkZsYWcgPSAoKHRoaXMuaXNFdmVudExpc3RlbmVkVG8odHlwZSkgPyBldmVudEZsYWdzLndvcmxkIDogMCkgfFxuICAgICAgICAgICAgICAgIChyaWdpZEJvZHlBLmlzRXZlbnRMaXN0ZW5lZFRvKHR5cGUpID8gZXZlbnRGbGFncy5ib2R5QSA6IDApIHxcbiAgICAgICAgICAgICAgICAocmlnaWRCb2R5Qi5pc0V2ZW50TGlzdGVuZWRUbyh0eXBlKSA/IGV2ZW50RmxhZ3MuYm9keUIgOiAwKSk7XG4gICAgICAgICAgICBpZiAoY29sbGlzaW9uRmxhZyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29udGFjdElkID0gZXZlbnQuZGF0YS5nZXRJZCgpO1xuICAgICAgICAgICAgY29uc3QgYnVsbGV0UG9zID0gZXZlbnQuZGF0YS5nZXRQb3NpdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgYnVsbGV0Tm9ybWFsQiA9IGV2ZW50LmRhdGEuZ2V0Tm9ybWFsQigpO1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgeDogYnVsbGV0UG9zLngoKSxcbiAgICAgICAgICAgICAgICB5OiBidWxsZXRQb3MueSgpLFxuICAgICAgICAgICAgICAgIHo6IGJ1bGxldFBvcy56KCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsQiA9IHtcbiAgICAgICAgICAgICAgICB4OiBidWxsZXROb3JtYWxCLngoKSxcbiAgICAgICAgICAgICAgICB5OiBidWxsZXROb3JtYWxCLnkoKSxcbiAgICAgICAgICAgICAgICB6OiBidWxsZXROb3JtYWxCLnooKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoY29sbGlzaW9uRmxhZyAmIGV2ZW50RmxhZ3Mud29ybGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdpZEJvZHlBLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaWRCb2R5QixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmcm9tVmFsdWVzJDEocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueiksXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxCOiBmcm9tVmFsdWVzJDEobm9ybWFsQi54LCBub3JtYWxCLnksIG5vcm1hbEIueiksXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2xsaXNpb25GbGFnICYgZXZlbnRGbGFncy5ib2R5QSkge1xuICAgICAgICAgICAgICAgIHJpZ2lkQm9keUEuZGlzcGF0Y2hFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyOiByaWdpZEJvZHlCLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb246IHsgeDogcG9zaXRpb24ueCwgeTogcG9zaXRpb24ueSwgejogcG9zaXRpb24ueiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsQjogeyB4OiAtbm9ybWFsQi54LCB5OiAtbm9ybWFsQi55LCB6OiAtbm9ybWFsQi56IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmcm9tVmFsdWVzJDEocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueiksXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxCOiBmcm9tVmFsdWVzJDEoLW5vcm1hbEIueCwgLW5vcm1hbEIueSwgLW5vcm1hbEIueiksXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2xsaXNpb25GbGFnICYgZXZlbnRGbGFncy5ib2R5Qikge1xuICAgICAgICAgICAgICAgIHJpZ2lkQm9keUIuZGlzcGF0Y2hFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG90aGVyOiByaWdpZEJvZHlBLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb246IHsgeDogcG9zaXRpb24ueCwgeTogcG9zaXRpb24ueSwgejogcG9zaXRpb24ueiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsQjogeyB4OiBub3JtYWxCLngsIHk6IG5vcm1hbEIueSwgejogbm9ybWFsQi56IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmcm9tVmFsdWVzJDEocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueiksXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxCOiBmcm9tVmFsdWVzJDEobm9ybWFsQi54LCBub3JtYWxCLnksIG5vcm1hbEIueiksXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogaGFja3lcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgYnVsbGV0Lm9uKFwiYmVnaW5Db250YWN0XCIsIF9vbkNvbnRhY3RDaGFuZ2UpO1xuICAgICAgICBidWxsZXQub24oXCJ1cGRhdGVDb250YWN0XCIsIF9vbkNvbnRhY3RDaGFuZ2UpO1xuICAgICAgICBidWxsZXQub24oXCJlbmRDb250YWN0XCIsIF9vbkNvbnRhY3RDaGFuZ2UpO1xuICAgICAgICBidWxsZXQub24oXCJjY2RDb250YWN0XCIsIF9vbkNvbnRhY3RDaGFuZ2UpO1xuICAgICAgICBidWxsZXQubGlzdGVuVG9Db250YWN0Q2FsbGJhY2tzKCk7XG4gICAgfVxuICAgIHN0ZXBTaW11bGF0aW9uKGRlbHRhVGltZVNlYywgbWF4U3ViU3RlcHMgPSAzLCBmaXhlZFN0ZXAgPSAxIC8gNjApIHtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5zdGVwU2ltdWxhdGlvbihkZWx0YVRpbWVTZWMsIG1heFN1YlN0ZXBzLCBmaXhlZFN0ZXApO1xuICAgIH1cbiAgICBzZXRHcmF2aXR5KHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuc2V0R3Jhdml0eShuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBzZXREZWJ1Z1dpcmVmcmFtZUNhbGxiYWNrKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IGNvbnRhY3RQdHIgPSBidWxsZXQuYWRkRnVuY3Rpb24oY2FsbGJhY2ssIFwidmZmZmZmZmZmZlwiKTsgLy8gdmZmZmZmZmZmZiAtPiBWb2lkIEZsb2F0IEZsb2F0IC4uLlxuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnNldERlYnVnV2lyZWZyYW1lQ2FsbGJhY2soY29udGFjdFB0cik7XG4gICAgfVxuICAgIHNldERlYnVnV2lyZWZyYW1lRmVhdHVyZXNGbGFnKGZsYWcpIHtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5zZXREZWJ1Z1dpcmVmcmFtZUZlYXR1cmVzRmxhZyhmbGFnKTtcbiAgICB9XG4gICAgZGVidWdEcmF3V29ybGQoKSB7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuZGVidWdEcmF3V29ybGQoKTtcbiAgICB9XG59XG5cbnZhciBEZWJ1Z0RyYXdGbGFncztcbihmdW5jdGlvbiAoRGVidWdEcmF3RmxhZ3MpIHtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19Ob0RlYnVnXCJdID0gMF0gPSBcIkRCR19Ob0RlYnVnXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd1dpcmVmcmFtZVwiXSA9IDFdID0gXCJEQkdfRHJhd1dpcmVmcmFtZVwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdBYWJiXCJdID0gMl0gPSBcIkRCR19EcmF3QWFiYlwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdGZWF0dXJlc1RleHRcIl0gPSA0XSA9IFwiREJHX0RyYXdGZWF0dXJlc1RleHRcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3Q29udGFjdFBvaW50c1wiXSA9IDhdID0gXCJEQkdfRHJhd0NvbnRhY3RQb2ludHNcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19Ob0RlYWN0aXZhdGlvblwiXSA9IDE2XSA9IFwiREJHX05vRGVhY3RpdmF0aW9uXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfTm9IZWxwVGV4dFwiXSA9IDMyXSA9IFwiREJHX05vSGVscFRleHRcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3VGV4dFwiXSA9IDY0XSA9IFwiREJHX0RyYXdUZXh0XCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfUHJvZmlsZVRpbWluZ3NcIl0gPSAxMjhdID0gXCJEQkdfUHJvZmlsZVRpbWluZ3NcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19FbmFibGVTYXRDb21wYXJpc29uXCJdID0gMjU2XSA9IFwiREJHX0VuYWJsZVNhdENvbXBhcmlzb25cIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EaXNhYmxlQnVsbGV0TENQXCJdID0gNTEyXSA9IFwiREJHX0Rpc2FibGVCdWxsZXRMQ1BcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19FbmFibGVDQ0RcIl0gPSAxMDI0XSA9IFwiREJHX0VuYWJsZUNDRFwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdDb25zdHJhaW50c1wiXSA9IDIwNDhdID0gXCJEQkdfRHJhd0NvbnN0cmFpbnRzXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd0NvbnN0cmFpbnRMaW1pdHNcIl0gPSA0MDk2XSA9IFwiREJHX0RyYXdDb25zdHJhaW50TGltaXRzXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRmFzdFdpcmVmcmFtZVwiXSA9IDgxOTJdID0gXCJEQkdfRmFzdFdpcmVmcmFtZVwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdOb3JtYWxzXCJdID0gMTYzODRdID0gXCJEQkdfRHJhd05vcm1hbHNcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3RnJhbWVzXCJdID0gMzI3NjhdID0gXCJEQkdfRHJhd0ZyYW1lc1wiO1xufSkoRGVidWdEcmF3RmxhZ3MgfHwgKERlYnVnRHJhd0ZsYWdzID0ge30pKTtcblxudmFyIGluZGV4ID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICBDb25jcmV0ZVBoeXNpY0JvZHk6IENvbmNyZXRlUGh5c2ljQm9keSxcbiAgICBDb25jcmV0ZVBoeXNpY1ZlaGljbGU6IENvbmNyZXRlUGh5c2ljVmVoaWNsZSxcbiAgICBDb250YWN0RXZlbnRIYW5kbGVyOiBDb250YWN0RXZlbnRIYW5kbGVyLFxuICAgIGdldCBEZWJ1Z0RyYXdGbGFncyAoKSB7IHJldHVybiBEZWJ1Z0RyYXdGbGFnczsgfSxcbiAgICBQaHlzaWNXb3JsZDogUGh5c2ljV29ybGQsXG4gICAgV2FzbU1vZHVsZUhvbGRlcjogV2FzbU1vZHVsZUhvbGRlcixcbiAgICBjb252ZXhTd2VlcDogY29udmV4U3dlZXAsXG4gICAgcmF5Q2FzdDogcmF5Q2FzdFxufSk7XG5cbmV4cG9ydHMuQnJvd3NlckZyYW5rZW5QaHlzV2FzbU1vZHVsZSA9IEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGU7XG5leHBvcnRzLnBoeXNpY3MgPSBpbmRleDtcbiIsCiAgIid1c2Ugc3RyaWN0JztcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cclxuXHJcblxyXG5mdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG50eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcclxuICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxufTtcblxuY29uc3Qgc2NyaXB0TG9hZGluZ1V0aWxpdHkgPSAoaW5TcmMpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgc2NyaXB0RWxlbWVudC5zcmMgPSBpblNyYztcbiAgICAgICAgLy8gc2NyaXB0RWxlbWVudC5vbnByb2dyZXNzID0gKGV2ZW50KSA9PiBsb2dnZXIubG9nKFwiZXZlbnRcIiwgZXZlbnQpO1xuICAgICAgICBzY3JpcHRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCByZXNvbHZlKTtcbiAgICAgICAgc2NyaXB0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gICAgfSk7XG59O1xuXG5jbGFzcyBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlIHtcbiAgICBzdGF0aWMgbG9hZChvcHRzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlLmxvYWRKc1BhcnQob3B0cy5qc1VybCk7XG4gICAgICAgICAgICB5aWVsZCBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlLmxvYWRXYXNtUGFydChvcHRzLndhc21VcmwpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxvYWRKc1BhcnQodXJsKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCBzY3JpcHRMb2FkaW5nVXRpbGl0eSh1cmwpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxvYWRXYXNtUGFydCh1cmxQcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUuX3dhc21Nb2R1bGUgPSB5aWVsZCBGcmFua2VuUGh5c0xvYWRlcih7XG4gICAgICAgICAgICAgICAgbG9jYXRlRmlsZTogKHVybCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7dXJsUHJlZml4fS8ke3VybH1gO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gVE9UQUxfTUVNT1JZOiAxICogMTAyNFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0KCkge1xuICAgICAgICBpZiAoIXRoaXMuX3dhc21Nb2R1bGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZyYW5rZW5QaHlzIHdhc20gbW9kdWxlIG5vdCBsb2FkZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3dhc21Nb2R1bGU7XG4gICAgfVxufVxuXG5jbGFzcyBDb250YWN0RXZlbnRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzTWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvLyBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyB9XG4gICAgaXNFdmVudExpc3RlbmVkVG8odHlwZSkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNNYXAuZ2V0KHR5cGUpO1xuICAgICAgICByZXR1cm4gKCEhbGlzdGVuZXJzICYmIGxpc3RlbmVycy5sZW5ndGggPiAwKTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICAvLyBpZiAoIXRoaXMuaXNFdmVudEFsbG93ZWQodHlwZSkpXG4gICAgICAgIC8vIFx0cmV0dXJuIEVycm9ySGFuZGxlci5yZXBvcnRFcnJvcihgZXZlbnQgdHlwZSBub3QgaW4gdGhlIHdoaXRlIGxpc3QsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICBsZXQgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzTWFwLmdldCh0eXBlKTtcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzTWFwLnNldCh0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRpcnR5IGNhc3RcbiAgICAgICAgaWYgKGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIHJldHVybiBFcnJvckhhbmRsZXIucmVwb3J0RXJyb3IoYGR1cGxpY2F0ZSBldmVudCBsaXN0ZW5lciwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGR1cGxpY2F0ZWQgZXZlbnQgbGlzdGVuZXIsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRpcnR5IGNhc3RcbiAgICAgICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICBoYXNFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIC8vIGlmICghdGhpcy5pc0V2ZW50QWxsb3dlZCh0eXBlKSlcbiAgICAgICAgLy8gXHRyZXR1cm4gRXJyb3JIYW5kbGVyLnJlcG9ydEVycm9yKGBldmVudCB0eXBlIG5vdCBpbiB0aGUgd2hpdGUgbGlzdCwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc01hcC5nZXQodHlwZSk7XG4gICAgICAgIC8vIGRpcnR5IGNhc3RcbiAgICAgICAgcmV0dXJuIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgIT09IC0xKTtcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICAvLyBpZiAoIXRoaXMuaXNFdmVudEFsbG93ZWQodHlwZSkpXG4gICAgICAgIC8vIFx0cmV0dXJuIEVycm9ySGFuZGxlci5yZXBvcnRFcnJvcihgZXZlbnQgdHlwZSBub3QgaW4gdGhlIHdoaXRlIGxpc3QsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNNYXAuZ2V0KHR5cGUpO1xuICAgICAgICBpZiAobGlzdGVuZXJzID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gZXZlbnQgbGlzdGVuZXIsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICAgICAgLy8gcmV0dXJuIEVycm9ySGFuZGxlci5yZXBvcnRFcnJvcihgdW5rbm93biBldmVudCBsaXN0ZW5lciwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgLy8gaWYgKCF0aGlzLmlzRXZlbnRBbGxvd2VkKGV2ZW50LnR5cGUpKVxuICAgICAgICAvLyBcdHJldHVybiBFcnJvckhhbmRsZXIucmVwb3J0RXJyb3IoYGV2ZW50IHR5cGUgbm90IGluIHRoZSB3aGl0ZSBsaXN0LCB0eXBlPSR7ZXZlbnQudHlwZX1gKTtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzTWFwLmdldChldmVudC50eXBlKTtcbiAgICAgICAgaWYgKGxpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXZlbnQudGFyZ2V0ID0gdGhpcztcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzQ29weSA9IGxpc3RlbmVycy5zbGljZSgwKTtcbiAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGxpc3RlbmVyc0NvcHkubGVuZ3RoOyArK2lpKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNDb3B5W2lpXS5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgV2FzbU1vZHVsZUhvbGRlciB7XG4gICAgc3RhdGljIHNldCh3YXNtTW9kdWxlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBXYXNtTW9kdWxlSG9sZGVyLl93YXNtTW9kdWxlID0gd2FzbU1vZHVsZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5fd2FzbU1vZHVsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnJhbmtlblBoeXMgd2FzbSBtb2R1bGUgbm90IGxvYWRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fd2FzbU1vZHVsZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tbW9uIHV0aWxpdGllc1xuICogQG1vZHVsZSBnbE1hdHJpeFxuICovXG4vLyBDb25maWd1cmF0aW9uIENvbnN0YW50c1xudmFyIEVQU0lMT04gPSAwLjAwMDAwMTtcbnZhciBBUlJBWV9UWVBFID0gdHlwZW9mIEZsb2F0MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBGbG9hdDMyQXJyYXkgOiBBcnJheTtcbmlmICghTWF0aC5oeXBvdCkgTWF0aC5oeXBvdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHkgPSAwLFxuICAgICAgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIHkgKz0gYXJndW1lbnRzW2ldICogYXJndW1lbnRzW2ldO1xuICB9XG5cbiAgcmV0dXJuIE1hdGguc3FydCh5KTtcbn07XG5cbi8qKlxuICogM3gzIE1hdHJpeFxuICogQG1vZHVsZSBtYXQzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDNcbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gYSBuZXcgM3gzIG1hdHJpeFxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZSQ0KCkge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoOSk7XG5cbiAgaWYgKEFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzVdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gIH1cblxuICBvdXRbMF0gPSAxO1xuICBvdXRbNF0gPSAxO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuXG4vKipcbiAqIDMgRGltZW5zaW9uYWwgVmVjdG9yXG4gKiBAbW9kdWxlIHZlYzNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzNcbiAqXG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlJDMoKSB7XG4gIHZhciBvdXQgPSBuZXcgQVJSQVlfVFlQRSgzKTtcblxuICBpZiAoQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xuXG5mdW5jdGlvbiBsZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWMzIGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBmcm9tVmFsdWVzJDEoeCwgeSwgeikge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoMyk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSQyKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgbGVuID0geCAqIHggKyB5ICogeSArIHogKiB6O1xuXG4gIGlmIChsZW4gPiAwKSB7XG4gICAgLy9UT0RPOiBldmFsdWF0ZSB1c2Ugb2YgZ2xtX2ludnNxcnQgaGVyZT9cbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gIH1cblxuICBvdXRbMF0gPSBhWzBdICogbGVuO1xuICBvdXRbMV0gPSBhWzFdICogbGVuO1xuICBvdXRbMl0gPSBhWzJdICogbGVuO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICovXG5cbmZ1bmN0aW9uIGRvdChhLCBiKSB7XG4gIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdICsgYVsyXSAqIGJbMl07XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmZ1bmN0aW9uIGNyb3NzKG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdO1xuICBvdXRbMF0gPSBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXogKiBieCAtIGF4ICogYno7XG4gIG91dFsyXSA9IGF4ICogYnkgLSBheSAqIGJ4O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxudmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzNzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzMuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWMzcyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlJDMoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSAzO1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgdmVjWzJdID0gYVtpICsgMl07XG4gICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgIGFbaV0gPSB2ZWNbMF07XG4gICAgICBhW2kgKyAxXSA9IHZlY1sxXTtcbiAgICAgIGFbaSArIDJdID0gdmVjWzJdO1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9O1xufSkoKTtcblxuLyoqXG4gKiA0IERpbWVuc2lvbmFsIFZlY3RvclxuICogQG1vZHVsZSB2ZWM0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3LCBlbXB0eSB2ZWM0XG4gKlxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZSQyKCkge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKEFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjNCBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSwgeiwgdykge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoNCk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIG91dFszXSA9IHc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSQxKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHZhciBsZW4gPSB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcblxuICBpZiAobGVuID4gMCkge1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IHggKiBsZW47XG4gIG91dFsxXSA9IHkgKiBsZW47XG4gIG91dFsyXSA9IHogKiBsZW47XG4gIG91dFszXSA9IHcgKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWM0cy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWM0LiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjNHMgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZlYyA9IGNyZWF0ZSQyKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gNDtcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIHZlY1syXSA9IGFbaSArIDJdO1xuICAgICAgdmVjWzNdID0gYVtpICsgM107XG4gICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgIGFbaV0gPSB2ZWNbMF07XG4gICAgICBhW2kgKyAxXSA9IHZlY1sxXTtcbiAgICAgIGFbaSArIDJdID0gdmVjWzJdO1xuICAgICAgYVtpICsgM10gPSB2ZWNbM107XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KSgpO1xuXG4vKipcbiAqIFF1YXRlcm5pb25cbiAqIEBtb2R1bGUgcXVhdFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBxdWF0XG4gKlxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGUkMSgpIHtcbiAgdmFyIG91dCA9IG5ldyBBUlJBWV9UWVBFKDQpO1xuXG4gIGlmIChBUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICB9XG5cbiAgb3V0WzNdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0cyBhIHF1YXQgZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYW5kIHJvdGF0aW9uIGF4aXMsXG4gKiB0aGVuIHJldHVybnMgaXQuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyBhcm91bmQgd2hpY2ggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiovXG5cbmZ1bmN0aW9uIHNldEF4aXNBbmdsZShvdXQsIGF4aXMsIHJhZCkge1xuICByYWQgPSByYWQgKiAwLjU7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgb3V0WzBdID0gcyAqIGF4aXNbMF07XG4gIG91dFsxXSA9IHMgKiBheGlzWzFdO1xuICBvdXRbMl0gPSBzICogYXhpc1syXTtcbiAgb3V0WzNdID0gTWF0aC5jb3MocmFkKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmZ1bmN0aW9uIHNsZXJwKG91dCwgYSwgYiwgdCkge1xuICAvLyBiZW5jaG1hcmtzOlxuICAvLyAgICBodHRwOi8vanNwZXJmLmNvbS9xdWF0ZXJuaW9uLXNsZXJwLWltcGxlbWVudGF0aW9uc1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdLFxuICAgICAgYncgPSBiWzNdO1xuICB2YXIgb21lZ2EsIGNvc29tLCBzaW5vbSwgc2NhbGUwLCBzY2FsZTE7IC8vIGNhbGMgY29zaW5lXG5cbiAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSlcblxuICBpZiAoY29zb20gPCAwLjApIHtcbiAgICBjb3NvbSA9IC1jb3NvbTtcbiAgICBieCA9IC1ieDtcbiAgICBieSA9IC1ieTtcbiAgICBieiA9IC1iejtcbiAgICBidyA9IC1idztcbiAgfSAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzXG5cblxuICBpZiAoMS4wIC0gY29zb20gPiBFUFNJTE9OKSB7XG4gICAgLy8gc3RhbmRhcmQgY2FzZSAoc2xlcnApXG4gICAgb21lZ2EgPSBNYXRoLmFjb3MoY29zb20pO1xuICAgIHNpbm9tID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgIHNjYWxlMCA9IE1hdGguc2luKCgxLjAgLSB0KSAqIG9tZWdhKSAvIHNpbm9tO1xuICAgIHNjYWxlMSA9IE1hdGguc2luKHQgKiBvbWVnYSkgLyBzaW5vbTtcbiAgfSBlbHNlIHtcbiAgICAvLyBcImZyb21cIiBhbmQgXCJ0b1wiIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlXG4gICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvblxuICAgIHNjYWxlMCA9IDEuMCAtIHQ7XG4gICAgc2NhbGUxID0gdDtcbiAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzXG5cblxuICBvdXRbMF0gPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4O1xuICBvdXRbMV0gPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICBvdXRbMl0gPSBzY2FsZTAgKiBheiArIHNjYWxlMSAqIGJ6O1xuICBvdXRbM10gPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcXVhdGVybmlvbiBmcm9tIHRoZSBnaXZlbiAzeDMgcm90YXRpb24gbWF0cml4LlxuICpcbiAqIE5PVEU6IFRoZSByZXN1bHRhbnQgcXVhdGVybmlvbiBpcyBub3Qgbm9ybWFsaXplZCwgc28geW91IHNob3VsZCBiZSBzdXJlXG4gKiB0byByZW5vcm1hbGl6ZSB0aGUgcXVhdGVybmlvbiB5b3Vyc2VsZiB3aGVyZSBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gbSByb3RhdGlvbiBtYXRyaXhcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmZ1bmN0aW9uIGZyb21NYXQzKG91dCwgbSkge1xuICAvLyBBbGdvcml0aG0gaW4gS2VuIFNob2VtYWtlJ3MgYXJ0aWNsZSBpbiAxOTg3IFNJR0dSQVBIIGNvdXJzZSBub3Rlc1xuICAvLyBhcnRpY2xlIFwiUXVhdGVybmlvbiBDYWxjdWx1cyBhbmQgRmFzdCBBbmltYXRpb25cIi5cbiAgdmFyIGZUcmFjZSA9IG1bMF0gKyBtWzRdICsgbVs4XTtcbiAgdmFyIGZSb290O1xuXG4gIGlmIChmVHJhY2UgPiAwLjApIHtcbiAgICAvLyB8d3wgPiAxLzIsIG1heSBhcyB3ZWxsIGNob29zZSB3ID4gMS8yXG4gICAgZlJvb3QgPSBNYXRoLnNxcnQoZlRyYWNlICsgMS4wKTsgLy8gMndcblxuICAgIG91dFszXSA9IDAuNSAqIGZSb290O1xuICAgIGZSb290ID0gMC41IC8gZlJvb3Q7IC8vIDEvKDR3KVxuXG4gICAgb3V0WzBdID0gKG1bNV0gLSBtWzddKSAqIGZSb290O1xuICAgIG91dFsxXSA9IChtWzZdIC0gbVsyXSkgKiBmUm9vdDtcbiAgICBvdXRbMl0gPSAobVsxXSAtIG1bM10pICogZlJvb3Q7XG4gIH0gZWxzZSB7XG4gICAgLy8gfHd8IDw9IDEvMlxuICAgIHZhciBpID0gMDtcbiAgICBpZiAobVs0XSA+IG1bMF0pIGkgPSAxO1xuICAgIGlmIChtWzhdID4gbVtpICogMyArIGldKSBpID0gMjtcbiAgICB2YXIgaiA9IChpICsgMSkgJSAzO1xuICAgIHZhciBrID0gKGkgKyAyKSAlIDM7XG4gICAgZlJvb3QgPSBNYXRoLnNxcnQobVtpICogMyArIGldIC0gbVtqICogMyArIGpdIC0gbVtrICogMyArIGtdICsgMS4wKTtcbiAgICBvdXRbaV0gPSAwLjUgKiBmUm9vdDtcbiAgICBmUm9vdCA9IDAuNSAvIGZSb290O1xuICAgIG91dFszXSA9IChtW2ogKiAzICsga10gLSBtW2sgKiAzICsgal0pICogZlJvb3Q7XG4gICAgb3V0W2pdID0gKG1baiAqIDMgKyBpXSArIG1baSAqIDMgKyBqXSkgKiBmUm9vdDtcbiAgICBvdXRba10gPSAobVtrICogMyArIGldICsgbVtpICogMyArIGtdKSAqIGZSb290O1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTm9ybWFsaXplIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdGVybmlvbiB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbnZhciBub3JtYWxpemUgPSBub3JtYWxpemUkMTtcbi8qKlxuICogU2V0cyBhIHF1YXRlcm5pb24gdG8gcmVwcmVzZW50IHRoZSBzaG9ydGVzdCByb3RhdGlvbiBmcm9tIG9uZVxuICogdmVjdG9yIHRvIGFub3RoZXIuXG4gKlxuICogQm90aCB2ZWN0b3JzIGFyZSBhc3N1bWVkIHRvIGJlIHVuaXQgbGVuZ3RoLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBpbml0aWFsIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIGRlc3RpbmF0aW9uIHZlY3RvclxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciB0bXB2ZWMzID0gY3JlYXRlJDMoKTtcbiAgdmFyIHhVbml0VmVjMyA9IGZyb21WYWx1ZXMkMSgxLCAwLCAwKTtcbiAgdmFyIHlVbml0VmVjMyA9IGZyb21WYWx1ZXMkMSgwLCAxLCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICB2YXIgZG90JDEgPSBkb3QoYSwgYik7XG5cbiAgICBpZiAoZG90JDEgPCAtMC45OTk5OTkpIHtcbiAgICAgIGNyb3NzKHRtcHZlYzMsIHhVbml0VmVjMywgYSk7XG4gICAgICBpZiAobGVuKHRtcHZlYzMpIDwgMC4wMDAwMDEpIGNyb3NzKHRtcHZlYzMsIHlVbml0VmVjMywgYSk7XG4gICAgICBub3JtYWxpemUkMih0bXB2ZWMzLCB0bXB2ZWMzKTtcbiAgICAgIHNldEF4aXNBbmdsZShvdXQsIHRtcHZlYzMsIE1hdGguUEkpO1xuICAgICAgcmV0dXJuIG91dDtcbiAgICB9IGVsc2UgaWYgKGRvdCQxID4gMC45OTk5OTkpIHtcbiAgICAgIG91dFswXSA9IDA7XG4gICAgICBvdXRbMV0gPSAwO1xuICAgICAgb3V0WzJdID0gMDtcbiAgICAgIG91dFszXSA9IDE7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjcm9zcyh0bXB2ZWMzLCBhLCBiKTtcbiAgICAgIG91dFswXSA9IHRtcHZlYzNbMF07XG4gICAgICBvdXRbMV0gPSB0bXB2ZWMzWzFdO1xuICAgICAgb3V0WzJdID0gdG1wdmVjM1syXTtcbiAgICAgIG91dFszXSA9IDEgKyBkb3QkMTtcbiAgICAgIHJldHVybiBub3JtYWxpemUob3V0LCBvdXQpO1xuICAgIH1cbiAgfTtcbn0pKCk7XG4vKipcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYyB0aGUgdGhpcmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGQgdGhlIGZvdXJ0aCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRlbXAxID0gY3JlYXRlJDEoKTtcbiAgdmFyIHRlbXAyID0gY3JlYXRlJDEoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIGEsIGIsIGMsIGQsIHQpIHtcbiAgICBzbGVycCh0ZW1wMSwgYSwgZCwgdCk7XG4gICAgc2xlcnAodGVtcDIsIGIsIGMsIHQpO1xuICAgIHNsZXJwKG91dCwgdGVtcDEsIHRlbXAyLCAyICogdCAqICgxIC0gdCkpO1xuICAgIHJldHVybiBvdXQ7XG4gIH07XG59KSgpO1xuLyoqXG4gKiBTZXRzIHRoZSBzcGVjaWZpZWQgcXVhdGVybmlvbiB3aXRoIHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlblxuICogYXhlcy4gRWFjaCBheGlzIGlzIGEgdmVjMyBhbmQgaXMgZXhwZWN0ZWQgdG8gYmUgdW5pdCBsZW5ndGggYW5kXG4gKiBwZXJwZW5kaWN1bGFyIHRvIGFsbCBvdGhlciBzcGVjaWZpZWQgYXhlcy5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdmlldyAgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIHZpZXdpbmcgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gcmlnaHQgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGxvY2FsIFwicmlnaHRcIiBkaXJlY3Rpb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB1cCAgICB0aGUgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgbG9jYWwgXCJ1cFwiIGRpcmVjdGlvblxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBtYXRyID0gY3JlYXRlJDQoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIHZpZXcsIHJpZ2h0LCB1cCkge1xuICAgIG1hdHJbMF0gPSByaWdodFswXTtcbiAgICBtYXRyWzNdID0gcmlnaHRbMV07XG4gICAgbWF0cls2XSA9IHJpZ2h0WzJdO1xuICAgIG1hdHJbMV0gPSB1cFswXTtcbiAgICBtYXRyWzRdID0gdXBbMV07XG4gICAgbWF0cls3XSA9IHVwWzJdO1xuICAgIG1hdHJbMl0gPSAtdmlld1swXTtcbiAgICBtYXRyWzVdID0gLXZpZXdbMV07XG4gICAgbWF0cls4XSA9IC12aWV3WzJdO1xuICAgIHJldHVybiBub3JtYWxpemUob3V0LCBmcm9tTWF0MyhvdXQsIG1hdHIpKTtcbiAgfTtcbn0pKCk7XG5cbi8qKlxuICogMiBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjMlxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjMlxuICpcbiAqIEByZXR1cm5zIHt2ZWMyfSBhIG5ldyAyRCB2ZWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgQVJSQVlfVFlQRSgyKTtcblxuICBpZiAoQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjMnMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjMi4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzJzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciB2ZWMgPSBjcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSAyO1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KSgpO1xuXG5jb25zdCBjb252ZXhTd2VlcCA9IChyYXdEeW5hbWljc1dvcmxkLCBkZWYpID0+IHtcbiAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgIGNvbnN0IGZyb21WZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmZyb21bMF0sIGRlZi5mcm9tWzFdLCBkZWYuZnJvbVsyXSk7XG4gICAgY29uc3QgdG9WZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLnRvWzBdLCBkZWYudG9bMV0sIGRlZi50b1syXSk7XG4gICAgY29uc3QgZnJvbVRyc2YgPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKCk7XG4gICAgZnJvbVRyc2Yuc2V0SWRlbnRpdHkoKTtcbiAgICBmcm9tVHJzZi5zZXRPcmlnaW4oZnJvbVZlYzMpO1xuICAgIGNvbnN0IHRvVHJzZiA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0oKTtcbiAgICB0b1Ryc2Yuc2V0SWRlbnRpdHkoKTtcbiAgICB0b1Ryc2Yuc2V0T3JpZ2luKHRvVmVjMyk7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IGJ1bGxldC5DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2soZnJvbVZlYzMsIHRvVmVjMyk7XG4gICAgcmVzdWx0LnNldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwKGRlZi5jb2xsaXNpb25GaWx0ZXJHcm91cCk7XG4gICAgcmVzdWx0LnNldF9tX2NvbGxpc2lvbkZpbHRlck1hc2soZGVmLmNvbGxpc2lvbkZpbHRlck1hc2spO1xuICAgIGNvbnN0IHNoYXBlID0gbmV3IGJ1bGxldC5idFNwaGVyZVNoYXBlKGRlZi5yYWRpdXMpO1xuICAgIHJhd0R5bmFtaWNzV29ybGQuY29udmV4U3dlZXBUZXN0KHNoYXBlLCBmcm9tVHJzZiwgdG9UcnNmLCByZXN1bHQsIDApO1xuICAgIGlmICghcmVzdWx0Lmhhc0hpdCgpKSB7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGZyb21WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodG9WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmVzdWx0KTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koc2hhcGUpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShmcm9tVHJzZik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRvVHJzZik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gY29uc3Qgb2JqZWN0ID0gYm9keU1hcC5nZXQoKHJlc3VsdC5nZXQoKSBhcyBhbnkpLnB0cik7XG4gICAgLy8gaWYgKCFvYmplY3QpIHtcbiAgICAvLyAgIGJ1bGxldC5kZXN0cm95KGZyb21WZWMzKTtcbiAgICAvLyAgIGJ1bGxldC5kZXN0cm95KHRvVmVjMyk7XG4gICAgLy8gICBidWxsZXQuZGVzdHJveShyZXN1bHQpO1xuICAgIC8vICAgcmV0dXJuO1xuICAgIC8vIH1cbiAgICAvLyBnZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb24oKTogbnVtYmVyO1xuICAgIC8vIGdldF9tX2NvbGxpc2lvbk9iamVjdCgpOiBidENvbGxpc2lvbk9iamVjdDtcbiAgICBjb25zdCByYXdQb3NpdGlvbiA9IHJlc3VsdC5nZXRfbV9oaXRQb2ludFdvcmxkKCk7XG4gICAgY29uc3QgcmF3Tm9ybWFsID0gcmVzdWx0LmdldF9tX2hpdE5vcm1hbFdvcmxkKCk7XG4gICAgY29uc3QgZnJhY3Rpb24gPSByZXN1bHQuZ2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uKCk7XG4gICAgY29uc3QgaW1wYWN0ID0gZnJvbVZhbHVlcyQxKHJhd1Bvc2l0aW9uLngoKSwgcmF3UG9zaXRpb24ueSgpLCByYXdQb3NpdGlvbi56KCkpO1xuICAgIGNvbnN0IG5vcm1hbCA9IGZyb21WYWx1ZXMkMShyYXdOb3JtYWwueCgpLCByYXdOb3JtYWwueSgpLCByYXdOb3JtYWwueigpKTtcbiAgICBidWxsZXQuZGVzdHJveShyYXdOb3JtYWwpO1xuICAgIGJ1bGxldC5kZXN0cm95KHJhd1Bvc2l0aW9uKTtcbiAgICBidWxsZXQuZGVzdHJveShmcm9tVmVjMyk7XG4gICAgYnVsbGV0LmRlc3Ryb3kodG9WZWMzKTtcbiAgICBidWxsZXQuZGVzdHJveShyZXN1bHQpO1xuICAgIGJ1bGxldC5kZXN0cm95KHNoYXBlKTtcbiAgICBidWxsZXQuZGVzdHJveShmcm9tVHJzZik7XG4gICAgYnVsbGV0LmRlc3Ryb3kodG9UcnNmKTtcbiAgICByZXR1cm4geyBmcmFjdGlvbiwgaW1wYWN0LCBub3JtYWwgfTtcbn07XG5cbmNvbnN0IERJU0FCTEVfREVBQ1RJVkFUSU9OID0gNDtcbmNsYXNzIENvbmNyZXRlUGh5c2ljQm9keSBleHRlbmRzIENvbnRhY3RFdmVudEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKGRlZiwgcmF3U2hhcGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5faXNBbGl2ZSA9IHRydWU7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIHRoaXMuX2N1c3RvbVNoYXBlID0gcmF3U2hhcGU7XG4gICAgICAgIGNvbnN0IHRtcFZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICB0aGlzLl9jdXN0b21TaGFwZS5zaGFwZS5jYWxjdWxhdGVMb2NhbEluZXJ0aWEoZGVmLm1hc3MsIHRtcFZlYzMpO1xuICAgICAgICBjb25zdCBtb3Rpb25TdGF0ZSA9IG51bGw7IC8vIGhhY2sgOihcbiAgICAgICAgY29uc3QgcmJJbmZvID0gbmV3IGJ1bGxldC5idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm8oZGVmLm1hc3MsIG1vdGlvblN0YXRlLCB0aGlzLl9jdXN0b21TaGFwZS5zaGFwZSwgdG1wVmVjMyk7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keSA9IG5ldyBidWxsZXQuYnRSaWdpZEJvZHkocmJJbmZvKTtcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbkFuZFJvdGF0aW9uKGRlZi5wb3NpdGlvbiwgZGVmLm9yaWVudGF0aW9uKTtcbiAgICAgICAgLy8gdGhpcy5fY3VzdG9tU2hhcGUgPSB0aGlzLl9nZXRTaGFwZShkZWYuc2hhcGUpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0bXBWZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmJJbmZvKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fcmF3UmlnaWRCb2R5KTtcbiAgICAgICAgLy8gYnVsbGV0LmRlc3Ryb3kodGhpcy5fY3VzdG9tU2hhcGUpO1xuICAgICAgICB0aGlzLl9jdXN0b21TaGFwZS5jbGVhbnVwKCk7XG4gICAgICAgIC8vIGhhY2sgdG8gZm9yY2UgaXQgdG8gY3Jhc2ggaWYgdGhlIGJvZHkgaXMgcmV1c2VkXG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2lzQWxpdmUgPSBmYWxzZTtcbiAgICB9XG4gICAgaXNBbGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzQWxpdmU7XG4gICAgfVxuICAgIHNldFBvc2l0aW9uQW5kUm90YXRpb24ocG9zaXRpb24sIHJvdGF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gbmV3IGJ1bGxldC5idFZlY3RvcjMocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXSk7XG4gICAgICAgIGNvbnN0IG5ld1JvdGF0aW9uID0gbmV3IGJ1bGxldC5idFF1YXRlcm5pb24ocm90YXRpb25bMF0sIHJvdGF0aW9uWzFdLCByb3RhdGlvblsyXSwgcm90YXRpb25bM10pO1xuICAgICAgICBjb25zdCBuZXdUcmFuc2Zvcm0gPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKG5ld1JvdGF0aW9uLCBuZXdQb3NpdGlvbik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRXb3JsZFRyYW5zZm9ybShuZXdUcmFuc2Zvcm0pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdUcmFuc2Zvcm0pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdQb3NpdGlvbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1JvdGF0aW9uKTtcbiAgICB9XG4gICAgc2V0UG9zaXRpb24oeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgY29uc3QgbmV3Um90YXRpb24gPSBuZXcgYnVsbGV0LmJ0UXVhdGVybmlvbihyb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uWzJdLCByb3RhdGlvblszXSk7XG4gICAgICAgIGNvbnN0IG5ld1RyYW5zZm9ybSA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0obmV3Um90YXRpb24sIG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldFdvcmxkVHJhbnNmb3JtKG5ld1RyYW5zZm9ybSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1RyYW5zZm9ybSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3Um90YXRpb24pO1xuICAgIH1cbiAgICBzZXRSb3RhdGlvbih4LCB5LCB6LCB3KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhvcmlnaW5bMF0sIG9yaWdpblsxXSwgb3JpZ2luWzJdKTtcbiAgICAgICAgY29uc3QgbmV3Um90YXRpb24gPSBuZXcgYnVsbGV0LmJ0UXVhdGVybmlvbih4LCB5LCB6LCB3KTtcbiAgICAgICAgY29uc3QgbmV3VHJhbnNmb3JtID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybShuZXdSb3RhdGlvbiwgbmV3UG9zaXRpb24pO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0V29ybGRUcmFuc2Zvcm0obmV3VHJhbnNmb3JtKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VHJhbnNmb3JtKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3UG9zaXRpb24pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdSb3RhdGlvbik7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uQW5kUm90YXRpb24ocG9zaXRpb24sIHJvdGF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJhd1RyYW5zZm9ybSA9IHRoaXMuX3Jhd1JpZ2lkQm9keS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICBjb25zdCByYXdPcmlnaW4gPSByYXdUcmFuc2Zvcm0uZ2V0T3JpZ2luKCk7XG4gICAgICAgIGNvbnN0IHJhd1JvdGF0aW9uID0gcmF3VHJhbnNmb3JtLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHBvc2l0aW9uWzBdID0gcmF3T3JpZ2luLngoKTtcbiAgICAgICAgcG9zaXRpb25bMV0gPSByYXdPcmlnaW4ueSgpO1xuICAgICAgICBwb3NpdGlvblsyXSA9IHJhd09yaWdpbi56KCk7XG4gICAgICAgIHJvdGF0aW9uWzBdID0gcmF3Um90YXRpb24ueCgpO1xuICAgICAgICByb3RhdGlvblsxXSA9IHJhd1JvdGF0aW9uLnkoKTtcbiAgICAgICAgcm90YXRpb25bMl0gPSByYXdSb3RhdGlvbi56KCk7XG4gICAgICAgIHJvdGF0aW9uWzNdID0gcmF3Um90YXRpb24udygpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyYXdSb3RhdGlvbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd09yaWdpbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1RyYW5zZm9ybSk7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByYXdUcmFuc2Zvcm0gPSB0aGlzLl9yYXdSaWdpZEJvZHkuZ2V0V29ybGRUcmFuc2Zvcm0oKTtcbiAgICAgICAgY29uc3QgcmF3T3JpZ2luID0gcmF3VHJhbnNmb3JtLmdldE9yaWdpbigpO1xuICAgICAgICBjb25zdCBvcmlnaW4gPSBmcm9tVmFsdWVzJDEocmF3T3JpZ2luLngoKSwgcmF3T3JpZ2luLnkoKSwgcmF3T3JpZ2luLnooKSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd09yaWdpbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1RyYW5zZm9ybSk7XG4gICAgICAgIHJldHVybiBvcmlnaW47XG4gICAgfVxuICAgIGdldFJvdGF0aW9uKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByYXdUcmFuc2Zvcm0gPSB0aGlzLl9yYXdSaWdpZEJvZHkuZ2V0V29ybGRUcmFuc2Zvcm0oKTtcbiAgICAgICAgY29uc3QgcmF3Um90YXRpb24gPSByYXdUcmFuc2Zvcm0uZ2V0Um90YXRpb24oKTtcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSBmcm9tVmFsdWVzKHJhd1JvdGF0aW9uLngoKSwgcmF3Um90YXRpb24ueSgpLCByYXdSb3RhdGlvbi56KCksIHJhd1JvdGF0aW9uLncoKSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1JvdGF0aW9uKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3VHJhbnNmb3JtKTtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgIH1cbiAgICBnZXRMaW5lYXJWZWxvY2l0eSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgdmVsID0gdGhpcy5fcmF3UmlnaWRCb2R5LmdldExpbmVhclZlbG9jaXR5KCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZnJvbVZhbHVlcyQxKHZlbC54KCksIHZlbC55KCksIHZlbC56KCkpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh2ZWwpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGdldEFuZ3VsYXJWZWxvY2l0eSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgdmVsID0gdGhpcy5fcmF3UmlnaWRCb2R5LmdldEFuZ3VsYXJWZWxvY2l0eSgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGZyb21WYWx1ZXMkMSh2ZWwueCgpLCB2ZWwueSgpLCB2ZWwueigpKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodmVsKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBzZXRMaW5lYXJWZWxvY2l0eSh4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0TGluZWFyVmVsb2NpdHkobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgc2V0QW5ndWxhclZlbG9jaXR5KHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRBbmd1bGFyVmVsb2NpdHkobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgc2V0TGluZWFyRmFjdG9yKHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRMaW5lYXJGYWN0b3IobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgc2V0QW5ndWxhckZhY3Rvcih4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0QW5ndWxhckZhY3RvcihuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBhcHBseUNlbnRyYWxGb3JjZSh4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuYXBwbHlDZW50cmFsRm9yY2UobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgYXBwbHlDZW50cmFsSW1wdWxzZSh4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuYXBwbHlDZW50cmFsSW1wdWxzZShuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBzZXREYW1waW5nKGxpbmVhciwgYW5ndWxhciA9IDApIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldERhbXBpbmcobGluZWFyLCBhbmd1bGFyKTtcbiAgICB9XG4gICAgc2V0Q2NkTW90aW9uVGhyZXNob2xkKGNjZE1vdGlvblRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0Q2NkTW90aW9uVGhyZXNob2xkKGNjZE1vdGlvblRocmVzaG9sZCk7XG4gICAgfVxuICAgIHNldENjZFN3ZXB0U3BoZXJlUmFkaXVzKHJhZGl1cykge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXMocmFkaXVzKTtcbiAgICB9XG4gICAgc2V0UmVzdGl0dXRpb24ocmVzdGl0dXRpb24pIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldFJlc3RpdHV0aW9uKHJlc3RpdHV0aW9uKTtcbiAgICB9XG4gICAgc2V0RnJpY3Rpb24oZnJpY3Rpb24pIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldEZyaWN0aW9uKGZyaWN0aW9uKTtcbiAgICB9XG4gICAgc2V0Um9sbGluZ0ZyaWN0aW9uKGZyaWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRSb2xsaW5nRnJpY3Rpb24oZnJpY3Rpb24pO1xuICAgIH1cbiAgICBzZXRHcmF2aXR5KHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRHcmF2aXR5KG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIGlzU3RhdGljT2JqZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3UmlnaWRCb2R5LmlzU3RhdGljT2JqZWN0KCk7XG4gICAgfVxuICAgIGlzS2luZW1hdGljT2JqZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3UmlnaWRCb2R5LmlzS2luZW1hdGljT2JqZWN0KCk7XG4gICAgfVxuICAgIGlzU3RhdGljT3JLaW5lbWF0aWNPYmplY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdSaWdpZEJvZHkuaXNTdGF0aWNPcktpbmVtYXRpY09iamVjdCgpO1xuICAgIH1cbiAgICBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmlzU3RhdGljT3JLaW5lbWF0aWNPYmplY3QoKSB8fCB0aGlzLl9yYXdSaWdpZEJvZHkuaXNBY3RpdmUoKSk7XG4gICAgfVxuICAgIGVuYWJsZURlYWN0aXZhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LmFjdGl2YXRlKHRydWUpO1xuICAgIH1cbiAgICBkaXNhYmxlRGVhY3RpdmF0aW9uKCkge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0QWN0aXZhdGlvblN0YXRlKERJU0FCTEVfREVBQ1RJVkFUSU9OKTtcbiAgICB9XG4gICAgY2Fubm90RGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmlzU3RhdGljT3JLaW5lbWF0aWNPYmplY3QoKSB8fFxuICAgICAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LmdldEFjdGl2YXRpb25TdGF0ZSgpID09IERJU0FCTEVfREVBQ1RJVkFUSU9OKTtcbiAgICB9XG4gICAgY2FuRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmNhbm5vdERlYWN0aXZhdGUoKTtcbiAgICB9XG59XG5cbmNsYXNzIENvbmNyZXRlUGh5c2ljVmVoaWNsZSB7XG4gICAgY29uc3RydWN0b3IocmF3RHluYW1pY3NXb3JsZCwgY2hhc3Npc0JvZHksIGRlZikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICB0aGlzLl9jaGFzc2lzQm9keSA9IGNoYXNzaXNCb2R5O1xuICAgICAgICB0aGlzLl92ZWhpY2xlVHVuaW5nID0gbmV3IGJ1bGxldC5idFZlaGljbGVUdW5pbmcoKTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFZlaGljbGVSYXljYXN0ZXIgPSBuZXcgYnVsbGV0LmJ0RGVmYXVsdFZlaGljbGVSYXljYXN0ZXIocmF3RHluYW1pY3NXb3JsZCk7XG4gICAgICAgIHRoaXMuX3Jhd1ZlaGljbGUgPSBuZXcgYnVsbGV0LmJ0UmF5Y2FzdFZlaGljbGUodGhpcy5fdmVoaWNsZVR1bmluZywgY2hhc3Npc0JvZHkuX3Jhd1JpZ2lkQm9keSwgdGhpcy5fZGVmYXVsdFZlaGljbGVSYXljYXN0ZXIpO1xuICAgICAgICB0aGlzLl9yYXdWZWhpY2xlLnNldENvb3JkaW5hdGVTeXN0ZW0oZGVmLmNvb3JkaW5hdGVTeXN0ZW1bMF0sIGRlZi5jb29yZGluYXRlU3lzdGVtWzFdLCBkZWYuY29vcmRpbmF0ZVN5c3RlbVsyXSk7XG4gICAgICAgIGNvbnN0IGdyb3VuZERpcmVjdGlvbiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5ncm91bmREaXJlY3Rpb25bMF0sIGRlZi5ncm91bmREaXJlY3Rpb25bMV0sIGRlZi5ncm91bmREaXJlY3Rpb25bMl0pO1xuICAgICAgICBjb25zdCByb3RhdGlvbkF4aXMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYucm90YXRpb25BeGlzWzBdLCBkZWYucm90YXRpb25BeGlzWzFdLCBkZWYucm90YXRpb25BeGlzWzJdKTtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvblBvaW50ID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGRlZi53aGVlbHMubGVuZ3RoOyArK2lpKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gZGVmLndoZWVsc1tpaV07XG4gICAgICAgICAgICBjb25uZWN0aW9uUG9pbnQuc2V0VmFsdWUoY3VycmVudC5jb25uZWN0aW9uUG9pbnRbMF0sIGN1cnJlbnQuY29ubmVjdGlvblBvaW50WzFdLCBjdXJyZW50LmNvbm5lY3Rpb25Qb2ludFsyXSk7XG4gICAgICAgICAgICBjb25zdCB3aGVlbEluZm8gPSB0aGlzLl9yYXdWZWhpY2xlLmFkZFdoZWVsKGNvbm5lY3Rpb25Qb2ludCwgLy8gY29ubmVjdGlvblBvaW50Q1MwLFxuICAgICAgICAgICAgZ3JvdW5kRGlyZWN0aW9uLCAvLyB3aGVlbERpcmVjdGlvbkNTMCxcbiAgICAgICAgICAgIHJvdGF0aW9uQXhpcywgLy8gd2hlZWxBeGxlQ1MsXG4gICAgICAgICAgICBkZWYuc3VzcGVuc2lvblJlc3RMZW5ndGgsIGRlZi53aGVlbFJhZGl1cywgdGhpcy5fdmVoaWNsZVR1bmluZywgY3VycmVudC5pc0Zyb250V2hlZWwpO1xuICAgICAgICAgICAgd2hlZWxJbmZvLnNldF9tX3N1c3BlbnNpb25TdGlmZm5lc3MoZGVmLnN1c3BlbnNpb25TdGlmZm5lc3MpO1xuICAgICAgICAgICAgd2hlZWxJbmZvLnNldF9tX3doZWVsc0RhbXBpbmdSZWxheGF0aW9uKGRlZi53aGVlbHNEYW1waW5nUmVsYXhhdGlvbik7XG4gICAgICAgICAgICB3aGVlbEluZm8uc2V0X21fd2hlZWxzRGFtcGluZ0NvbXByZXNzaW9uKGRlZi53aGVlbHNEYW1waW5nQ29tcHJlc3Npb24pO1xuICAgICAgICAgICAgd2hlZWxJbmZvLnNldF9tX2ZyaWN0aW9uU2xpcChkZWYud2hlZWxGcmljdGlvbik7XG4gICAgICAgICAgICB3aGVlbEluZm8uc2V0X21fcm9sbEluZmx1ZW5jZShkZWYucm9sbEluZmx1ZW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koY29ubmVjdGlvblBvaW50KTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koZ3JvdW5kRGlyZWN0aW9uKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocm90YXRpb25BeGlzKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fcmF3VmVoaWNsZSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX2RlZmF1bHRWZWhpY2xlUmF5Y2FzdGVyKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fdmVoaWNsZVR1bmluZyk7XG4gICAgfVxuICAgIGdldENoYXNzaXNCb2R5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hhc3Npc0JvZHk7XG4gICAgfVxuICAgIHNldFN0ZWVyaW5nVmFsdWUoaW5kZXgsIGFuZ2xlKSB7XG4gICAgICAgIHRoaXMuX3Jhd1ZlaGljbGUuc2V0U3RlZXJpbmdWYWx1ZShhbmdsZSwgaW5kZXgpO1xuICAgIH1cbiAgICBhcHBseUVuZ2luZUZvcmNlKGluZGV4LCBmb3JjZSkge1xuICAgICAgICB0aGlzLl9yYXdWZWhpY2xlLmFwcGx5RW5naW5lRm9yY2UoZm9yY2UsIGluZGV4KTtcbiAgICB9XG4gICAgc2V0QnJha2UoaW5kZXgsIGZvcmNlKSB7XG4gICAgICAgIHRoaXMuX3Jhd1ZlaGljbGUuc2V0QnJha2UoZm9yY2UsIGluZGV4KTtcbiAgICB9XG4gICAgZ2V0V2hlZVRyYW5zZm9ybXMoKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IGFsbFRyYW5zZm9ybXMgPSBbXTtcbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdGVkVHJhbnNmb3JtID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgbnVtV2hlZWxzID0gdGhpcy5fcmF3VmVoaWNsZS5nZXROdW1XaGVlbHMoKTtcbiAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVdoZWVsczsgKytpaSkge1xuICAgICAgICAgICAgdGhpcy5fcmF3VmVoaWNsZS51cGRhdGVXaGVlbFRyYW5zZm9ybShpaSwgaW50ZXJwb2xhdGVkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIGNvbnN0IHJhd1RyYW5zZm9ybSA9IHRoaXMuX3Jhd1ZlaGljbGUuZ2V0V2hlZWxUcmFuc2Zvcm1XUyhpaSk7XG4gICAgICAgICAgICBjb25zdCByYXdPcmlnaW4gPSByYXdUcmFuc2Zvcm0uZ2V0T3JpZ2luKCk7XG4gICAgICAgICAgICBjb25zdCByYXdSb3RhdGlvbiA9IHJhd1RyYW5zZm9ybS5nZXRSb3RhdGlvbigpO1xuICAgICAgICAgICAgYWxsVHJhbnNmb3Jtcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZnJvbVZhbHVlcyQxKHJhd09yaWdpbi54KCksIHJhd09yaWdpbi55KCksIHJhd09yaWdpbi56KCkpLFxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBmcm9tVmFsdWVzKHJhd1JvdGF0aW9uLngoKSwgcmF3Um90YXRpb24ueSgpLCByYXdSb3RhdGlvbi56KCksIHJhd1JvdGF0aW9uLncoKSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1JvdGF0aW9uKTtcbiAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd09yaWdpbik7XG4gICAgICAgICAgICBidWxsZXQuZGVzdHJveShyYXdUcmFuc2Zvcm0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGxUcmFuc2Zvcm1zO1xuICAgIH1cbn1cblxuY2xhc3MgQ29uY3JldGVHZW5lcmljNkRvZkNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKGRlZikge1xuICAgICAgICB0aGlzLl9ib2R5QSA9IGRlZi5ib2R5QTtcbiAgICAgICAgdGhpcy5fYm9keUIgPSBkZWYuYm9keUI7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJhd1JpZ2lkQm9keUEgPSBkZWYuYm9keUEuX3Jhd1JpZ2lkQm9keTtcbiAgICAgICAgY29uc3QgcmF3UmlnaWRCb2R5QiA9IGRlZi5ib2R5Qi5fcmF3UmlnaWRCb2R5O1xuICAgICAgICBjb25zdCBuZXdSb3RhdGlvbiA9IG5ldyBidWxsZXQuYnRRdWF0ZXJuaW9uKDAsIDAsIDEsIDApO1xuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbkEgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYuZnJhbWVBWzBdLCBkZWYuZnJhbWVBWzFdLCBkZWYuZnJhbWVBWzJdKTtcbiAgICAgICAgY29uc3QgbmV3VHJhbnNmb3JtQSA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0obmV3Um90YXRpb24sIG5ld1Bvc2l0aW9uQSk7XG4gICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uQiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5mcmFtZUJbMF0sIGRlZi5mcmFtZUJbMV0sIGRlZi5mcmFtZUJbMl0pO1xuICAgICAgICBjb25zdCBuZXdUcmFuc2Zvcm1CID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybShuZXdSb3RhdGlvbiwgbmV3UG9zaXRpb25CKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludCA9IG5ldyBidWxsZXQuYnRHZW5lcmljNkRvZlNwcmluZ0NvbnN0cmFpbnQocmF3UmlnaWRCb2R5QSwgcmF3UmlnaWRCb2R5QiwgbmV3VHJhbnNmb3JtQSwgbmV3VHJhbnNmb3JtQiwgZGVmLnVzZVJlZmVyZW5jZUZyYW1lQSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlU3ByaW5nKDAsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVTcHJpbmcoMSwgZmFsc2UpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZVNwcmluZygyLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0U3RpZmZuZXNzKDAsIDEpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldFN0aWZmbmVzcygxLCAxKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRTdGlmZm5lc3MoMiwgMSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0RGFtcGluZygwLCAxKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXREYW1waW5nKDEsIDEpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldERhbXBpbmcoMiwgMSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1RyYW5zZm9ybUEpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdUcmFuc2Zvcm1CKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3UG9zaXRpb25BKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3UG9zaXRpb25CKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3Um90YXRpb24pO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9yYXdDb25zdHJhaW50KTtcbiAgICB9XG4gICAgc2V0TGluZWFyTG93ZXJMaW1pdCh2YWwpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmFsID0gbmV3IGJ1bGxldC5idFZlY3RvcjModmFsWzBdLCB2YWxbMV0sIHZhbFsyXSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0TGluZWFyTG93ZXJMaW1pdChuZXdWYWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWYWwpO1xuICAgIH1cbiAgICBzZXRMaW5lYXJVcHBlckxpbWl0KHZhbCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWYWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh2YWxbMF0sIHZhbFsxXSwgdmFsWzJdKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRMaW5lYXJVcHBlckxpbWl0KG5ld1ZhbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZhbCk7XG4gICAgfVxuICAgIHNldEFuZ3VsYXJMb3dlckxpbWl0KHZhbCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWYWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh2YWxbMF0sIHZhbFsxXSwgdmFsWzJdKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRBbmd1bGFyTG93ZXJMaW1pdChuZXdWYWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWYWwpO1xuICAgIH1cbiAgICBzZXRBbmd1bGFyVXBwZXJMaW1pdCh2YWwpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmFsID0gbmV3IGJ1bGxldC5idFZlY3RvcjModmFsWzBdLCB2YWxbMV0sIHZhbFsyXSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0QW5ndWxhclVwcGVyTGltaXQobmV3VmFsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmFsKTtcbiAgICB9XG59XG5cbmNsYXNzIENvbmNyZXRlSGluZ2VDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgdGhpcy5fYm9keUEgPSBkZWYuYm9keUE7XG4gICAgICAgIHRoaXMuX2JvZHlCID0gZGVmLmJvZHlCO1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByYXdSaWdpZEJvZHlBID0gZGVmLmJvZHlBLl9yYXdSaWdpZEJvZHk7XG4gICAgICAgIGNvbnN0IHJhd1JpZ2lkQm9keUIgPSBkZWYuYm9keUIuX3Jhd1JpZ2lkQm9keTtcbiAgICAgICAgLy8gY29uc3QgbmV3Um90YXRpb24gPSBuZXcgYnVsbGV0LmJ0UXVhdGVybmlvbigwLCAwLCAxLCAwKTtcbiAgICAgICAgY29uc3QgcGl2b3RJbkEgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYucGl2b3RJbkFbMF0sIGRlZi5waXZvdEluQVsxXSwgZGVmLnBpdm90SW5BWzJdKTtcbiAgICAgICAgY29uc3QgcGl2b3RJbkIgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYucGl2b3RJbkJbMF0sIGRlZi5waXZvdEluQlsxXSwgZGVmLnBpdm90SW5CWzJdKTtcbiAgICAgICAgY29uc3QgYXhpc0luQSA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5heGlzSW5BWzBdLCBkZWYuYXhpc0luQVsxXSwgZGVmLmF4aXNJbkFbMl0pO1xuICAgICAgICBjb25zdCBheGlzSW5CID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmF4aXNJbkJbMF0sIGRlZi5heGlzSW5CWzFdLCBkZWYuYXhpc0luQlsyXSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQgPSBuZXcgYnVsbGV0LmJ0SGluZ2VDb25zdHJhaW50KHJhd1JpZ2lkQm9keUEsIHJhd1JpZ2lkQm9keUIsIHBpdm90SW5BLCBwaXZvdEluQiwgYXhpc0luQSwgYXhpc0luQiwgZGVmLnVzZVJlZmVyZW5jZUZyYW1lQSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlU3ByaW5nKDAsIGZhbHNlKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVTcHJpbmcoMSwgZmFsc2UpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZVNwcmluZygyLCBmYWxzZSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0U3RpZmZuZXNzKDAsIDEpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LnNldFN0aWZmbmVzcygxLCAxKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5zZXRTdGlmZm5lc3MoMiwgMSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0RGFtcGluZygwLCAxKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5zZXREYW1waW5nKDEsIDEpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LnNldERhbXBpbmcoMiwgMSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHBpdm90SW5BKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocGl2b3RJbkIpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShheGlzSW5BKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koYXhpc0luQik7XG4gICAgICAgIC8vIGJ1bGxldC5kZXN0cm95KG5ld1JvdGF0aW9uKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fcmF3Q29uc3RyYWludCk7XG4gICAgfVxuICAgIHNldExpbWl0KGxvdywgaGlnaCwgc29mdG5lc3MsIGJpYXNGYWN0b3IsIHJlbGF4YXRpb25GYWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRMaW1pdChsb3csIGhpZ2gsIHNvZnRuZXNzLCBiaWFzRmFjdG9yLCByZWxheGF0aW9uRmFjdG9yKTtcbiAgICB9XG4gICAgZW5hYmxlQW5ndWxhck1vdG9yKGVuYWJsZU1vdG9yLCB0YXJnZXRWZWxvY2l0eSwgbWF4TW90b3JJbXB1bHNlKSB7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlQW5ndWxhck1vdG9yKGVuYWJsZU1vdG9yLCB0YXJnZXRWZWxvY2l0eSwgbWF4TW90b3JJbXB1bHNlKTtcbiAgICB9XG4gICAgLy8gc2V0QW5ndWxhck9ubHkoYW5ndWxhck9ubHk6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0QW5ndWxhck9ubHkoYW5ndWxhck9ubHkpO1xuICAgIC8vIH1cbiAgICBlbmFibGVNb3RvcihlbmFibGVNb3Rvcikge1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZU1vdG9yKGVuYWJsZU1vdG9yKTtcbiAgICB9XG4gICAgc2V0TWF4TW90b3JJbXB1bHNlKG1heE1vdG9ySW1wdWxzZSkge1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldE1heE1vdG9ySW1wdWxzZShtYXhNb3RvckltcHVsc2UpO1xuICAgIH1cbiAgICBzZXRNb3RvclRhcmdldCh0YXJnZXRBbmdsZSwgZHQpIHtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRNb3RvclRhcmdldCh0YXJnZXRBbmdsZSwgZHQpO1xuICAgIH1cbn1cblxuY29uc3QgcmF5Q2FzdCA9IChyYXdEeW5hbWljc1dvcmxkLCBib2R5TWFwLCBkZWYpID0+IHtcbiAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgIGNvbnN0IGZyb21WZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmZyb21bMF0sIGRlZi5mcm9tWzFdLCBkZWYuZnJvbVsyXSk7XG4gICAgY29uc3QgdG9WZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLnRvWzBdLCBkZWYudG9bMV0sIGRlZi50b1syXSk7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IGJ1bGxldC5DbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2soZnJvbVZlYzMsIHRvVmVjMyk7XG4gICAgcmVzdWx0LnNldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwKGRlZi5jb2xsaXNpb25GaWx0ZXJHcm91cCk7XG4gICAgcmVzdWx0LnNldF9tX2NvbGxpc2lvbkZpbHRlck1hc2soZGVmLmNvbGxpc2lvbkZpbHRlck1hc2spO1xuICAgIHJhd0R5bmFtaWNzV29ybGQucmF5VGVzdChmcm9tVmVjMywgdG9WZWMzLCByZXN1bHQpO1xuICAgIGlmICghcmVzdWx0Lmhhc0hpdCgpKSB7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGZyb21WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodG9WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmVzdWx0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvYmplY3QgPSBib2R5TWFwLmdldChyZXN1bHQuZ2V0X21fY29sbGlzaW9uT2JqZWN0KCkucHRyKTtcbiAgICBpZiAoIW9iamVjdCkge1xuICAgICAgICBidWxsZXQuZGVzdHJveShmcm9tVmVjMyk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRvVmVjMyk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJlc3VsdCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gZ2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uKCk6IG51bWJlcjtcbiAgICAvLyBnZXRfbV9jb2xsaXNpb25PYmplY3QoKTogYnRDb2xsaXNpb25PYmplY3Q7XG4gICAgY29uc3QgcmF3Tm9ybWFsID0gcmVzdWx0LmdldF9tX2hpdE5vcm1hbFdvcmxkKCk7XG4gICAgY29uc3QgcmF3UG9zaXRpb24gPSByZXN1bHQuZ2V0X21faGl0UG9pbnRXb3JsZCgpO1xuICAgIGNvbnN0IGltcGFjdCA9IGZyb21WYWx1ZXMkMShyYXdQb3NpdGlvbi54KCksIHJhd1Bvc2l0aW9uLnkoKSwgcmF3UG9zaXRpb24ueigpKTtcbiAgICBjb25zdCBub3JtYWwgPSBmcm9tVmFsdWVzJDEocmF3Tm9ybWFsLngoKSwgcmF3Tm9ybWFsLnkoKSwgcmF3Tm9ybWFsLnooKSk7XG4gICAgYnVsbGV0LmRlc3Ryb3kocmF3Tm9ybWFsKTtcbiAgICBidWxsZXQuZGVzdHJveShyYXdQb3NpdGlvbik7XG4gICAgYnVsbGV0LmRlc3Ryb3koZnJvbVZlYzMpO1xuICAgIGJ1bGxldC5kZXN0cm95KHRvVmVjMyk7XG4gICAgYnVsbGV0LmRlc3Ryb3kocmVzdWx0KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBvYmplY3QsXG4gICAgICAgIGZyYWN0aW9uOiByZXN1bHQuZ2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uKCksXG4gICAgICAgIGltcGFjdCxcbiAgICAgICAgbm9ybWFsLFxuICAgIH07XG59O1xuXG5jbGFzcyBQaHlzaWNXb3JsZCBleHRlbmRzIENvbnRhY3RFdmVudEhhbmRsZXIge1xuICAgIC8vIHByaXZhdGUgX3F1ZXJ5U2hhcGUgPSBuZXcgUXVlcnlTaGFwZSgpO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9ib2R5TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl92ZWhpY2xlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50cyA9IFtdO1xuICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwMiA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMyID0gW107XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIC8vIGJ1bGxldC5saXN0ZW5Ub0NvbnRhY3RDYWxsYmFja3MoKTtcbiAgICAgICAgdGhpcy5fY29sbGlzaW9uQ29uZiA9IG5ldyBidWxsZXQuYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbigpO1xuICAgICAgICB0aGlzLl9kaXNwYXRjaGVyID0gbmV3IGJ1bGxldC5idENvbGxpc2lvbkRpc3BhdGNoZXIodGhpcy5fY29sbGlzaW9uQ29uZik7XG4gICAgICAgIHRoaXMuX2Jyb2FkUGhhc2UgPSBuZXcgYnVsbGV0LmJ0RGJ2dEJyb2FkcGhhc2UoKTtcbiAgICAgICAgdGhpcy5fc29sdmVyID0gbmV3IGJ1bGxldC5idFNlcXVlbnRpYWxJbXB1bHNlQ29uc3RyYWludFNvbHZlcigpO1xuICAgICAgICAvLyB0aGlzLl9yYXdEeW5hbWljc1dvcmxkID0gbmV3IGJ1bGxldC5idERpc2NyZXRlRHluYW1pY3NXb3JsZCh0aGlzLl9kaXNwYXRjaGVyLCB0aGlzLl9icm9hZFBoYXNlLCB0aGlzLl9zb2x2ZXIsIHRoaXMuX2NvbGxpc2lvbkNvbmYpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkID0gbmV3IGJ1bGxldC5idGpzRHluYW1pY3NXb3JsZCh0aGlzLl9kaXNwYXRjaGVyLCB0aGlzLl9icm9hZFBoYXNlLCB0aGlzLl9zb2x2ZXIsIHRoaXMuX2NvbGxpc2lvbkNvbmYpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnNldEdyYXZpdHkobmV3IGJ1bGxldC5idFZlY3RvcjMoMCwgMCwgLTEwKSk7XG4gICAgICAgIHRoaXMuX2luaXRDb2xsaXNpb25FdmVudHMoKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMuZm9yRWFjaCgoY3VyckNvbnN0cmFpbnQpID0+IGN1cnJDb25zdHJhaW50LmRpc3Bvc2UoKSk7XG4gICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMyLmZvckVhY2goKGN1cnJDb25zdHJhaW50KSA9PiBjdXJyQ29uc3RyYWludC5kaXNwb3NlKCkpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50czIubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcDIuY2xlYXIoKTtcbiAgICAgICAgWy4uLnRoaXMuX3ZlaGljbGVNYXAudmFsdWVzKCldLmZvckVhY2goKGN1cnJWZWhpY2xlKSA9PiBjdXJyVmVoaWNsZS5kaXNwb3NlKCkpO1xuICAgICAgICB0aGlzLl92ZWhpY2xlTWFwLmNsZWFyKCk7XG4gICAgICAgIFsuLi50aGlzLl9ib2R5TWFwLnZhbHVlcygpXS5mb3JFYWNoKChjdXJyQm9keSkgPT4gY3VyckJvZHkuZGlzcG9zZSgpKTtcbiAgICAgICAgdGhpcy5fYm9keU1hcC5jbGVhcigpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9yYXdEeW5hbWljc1dvcmxkKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fc29sdmVyKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fYnJvYWRQaGFzZSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX2Rpc3BhdGNoZXIpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9jb2xsaXNpb25Db25mKTtcbiAgICB9XG4gICAgY3JlYXRlUmlnaWRCb2R5KGRlZikge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHRoaXMuX2dldFNoYXBlKGRlZi5zaGFwZSwgZGVmLm1hc3MgPiAwKTtcbiAgICAgICAgY29uc3QgbmV3Qm9keSA9IG5ldyBDb25jcmV0ZVBoeXNpY0JvZHkoZGVmLCBuZXdTaGFwZSk7XG4gICAgICAgIC8vIGlmIChkZWYuc2hhcGUudHlwZSA9PT0gJ21lc2gnKSB7XG4gICAgICAgIC8vICAgY29uc3QgbWVzaFNoYXBlID0gbmV3Qm9keS5fcmF3U2hhcGUgYXMgYnVsbGV0SnMuYnRHSW1wYWN0TWVzaFNoYXBlO1xuICAgICAgICAvLyAgIG5ld0JvZHkuX3Jhd1NoYXBlID0gdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5jcmVhdGVDb21wb3VuZEZyb21HaW1wYWN0U2hhcGUobWVzaFNoYXBlLCAwKTtcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gfVxuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLmFkZFJpZ2lkQm9keShuZXdCb2R5Ll9yYXdSaWdpZEJvZHksIC0xLCAtMSk7XG4gICAgICAgIC8vIGhhY2ssIHdlIHVzZSB0aGUgd2FzbSBoZWFwIG1lbW9yeSBhZGRyZXNzIGFzIGFuIGlkZW50aWZpZXIsIGl0J3MgZmFzdGVyXG4gICAgICAgIHRoaXMuX2JvZHlNYXAuc2V0KG5ld0JvZHkuX3Jhd1JpZ2lkQm9keS5wdHIsIG5ld0JvZHkpO1xuICAgICAgICByZXR1cm4gbmV3Qm9keTtcbiAgICB9XG4gICAgX2dldFNoYXBlKGRlZiwgaXNEeW5hbWljKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIHN3aXRjaCAoZGVmLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2JveCc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBib3hIYWxmRXh0ZW50ID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICBib3hIYWxmRXh0ZW50LnNldFZhbHVlKGRlZi5zaXplWzBdICogMC41LCBkZWYuc2l6ZVsxXSAqIDAuNSwgZGVmLnNpemVbMl0gKiAwLjUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhd1NoYXBlID0gbmV3IGJ1bGxldC5idEJveFNoYXBlKGJveEhhbGZFeHRlbnQpO1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGJveEhhbGZFeHRlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4gYnVsbGV0LmRlc3Ryb3kocmF3U2hhcGUpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdzcGhlcmUnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3U2hhcGUgPSBuZXcgYnVsbGV0LmJ0U3BoZXJlU2hhcGUoZGVmLnJhZGl1cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGU6IHJhd1NoYXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwOiAoKSA9PiBidWxsZXQuZGVzdHJveShyYXdTaGFwZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2N5bGluZGVyJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJWZWMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYucmFkaXVzLCBkZWYucmFkaXVzLCBkZWYubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByYXdTaGFwZSA9IG5ldyBidWxsZXQuYnRDeWxpbmRlclNoYXBlKGJWZWMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3U2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3koYlZlYyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2NhcHN1bGUnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3U2hhcGUgPSBuZXcgYnVsbGV0LmJ0Q2Fwc3VsZVNoYXBlKGRlZi5yYWRpdXMsIGRlZi5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4gYnVsbGV0LmRlc3Ryb3kocmF3U2hhcGUpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdtZXNoJzoge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IG1lbW9yeSBsZWFrXG4gICAgICAgICAgICAgICAgY29uc3QgdHJpYW5nbGVNZXNoID0gbmV3IGJ1bGxldC5idFRyaWFuZ2xlTWVzaCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJWZWMxID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiVmVjMiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYlZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICAgICAgICAgIGRlZi50cmlhbmdsZXMuZm9yRWFjaCgoW3ZlYzEsIHZlYzIsIHZlYzNdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJWZWMxLnNldFZhbHVlKHZlYzFbMF0sIHZlYzFbMV0sIHZlYzFbMl0pO1xuICAgICAgICAgICAgICAgICAgICBiVmVjMi5zZXRWYWx1ZSh2ZWMyWzBdLCB2ZWMyWzFdLCB2ZWMyWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgYlZlYzMuc2V0VmFsdWUodmVjM1swXSwgdmVjM1sxXSwgdmVjM1syXSk7XG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlTWVzaC5hZGRUcmlhbmdsZShiVmVjMSwgYlZlYzIsIGJWZWMzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShiVmVjMSk7XG4gICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3koYlZlYzIpO1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGJWZWMzKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNEeW5hbWljKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc2hTaGFwZSA9IG5ldyBidWxsZXQuYnRHSW1wYWN0TWVzaFNoYXBlKHRyaWFuZ2xlTWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd1NoYXBlID0gdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5jcmVhdGVDb21wb3VuZEZyb21HaW1wYWN0U2hhcGUobWVzaFNoYXBlLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShyYXdTaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kobWVzaFNoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveSh0cmlhbmdsZU1lc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3U2hhcGUgPSBuZXcgYnVsbGV0LmJ0QnZoVHJpYW5nbGVNZXNoU2hhcGUodHJpYW5nbGVNZXNoLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZTogcmF3U2hhcGUsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHRyaWFuZ2xlTWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2NvbXBvdW5kJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhd0NvbXBvdW5kID0gbmV3IGJ1bGxldC5idENvbXBvdW5kU2hhcGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxSYXdTaGFwZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsUXVhdCA9IG5ldyBidWxsZXQuYnRRdWF0ZXJuaW9uKDAsIDAsIDEsIDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVHJhbnNmb3JtID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBzaGFwZSwgcG9zaXRpb24sIG9yaWVudGF0aW9uIH0gb2YgZGVmLnNoYXBlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZXMgPSB0aGlzLl9nZXRTaGFwZShzaGFwZSwgaXNEeW5hbWljKTtcbiAgICAgICAgICAgICAgICAgICAgYWxsUmF3U2hhcGVzLnB1c2gocmF3VmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxWZWMzLnNldFZhbHVlKHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFF1YXQuc2V0VmFsdWUob3JpZW50YXRpb25bMF0sIG9yaWVudGF0aW9uWzFdLCBvcmllbnRhdGlvblsyXSwgb3JpZW50YXRpb25bM10pO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFRyYW5zZm9ybS5zZXRPcmlnaW4obG9jYWxWZWMzKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxUcmFuc2Zvcm0uc2V0Um90YXRpb24obG9jYWxRdWF0KTtcbiAgICAgICAgICAgICAgICAgICAgcmF3Q29tcG91bmQuYWRkQ2hpbGRTaGFwZShsb2NhbFRyYW5zZm9ybSwgcmF3VmFsdWVzLnNoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VyclNoYXBlLnBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGN1cnJTaGFwZS5vcmllbnRhdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBjdXJyU2hhcGUuc2hhcGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kobG9jYWxWZWMzKTtcbiAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShsb2NhbFF1YXQpO1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGxvY2FsVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZTogcmF3Q29tcG91bmQsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd0NvbXBvdW5kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY3VyclJhd1NoYXBlIG9mIGFsbFJhd1NoYXBlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGN1cnJSYXdTaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95UmlnaWRCb2R5KHJpZ2lkQm9keSkge1xuICAgICAgICBjb25zdCByYXdSaWdpZEJvZHkgPSByaWdpZEJvZHkuX3Jhd1JpZ2lkQm9keTtcbiAgICAgICAgY29uc3QgYm9keVB0ciA9IHJhd1JpZ2lkQm9keS5wdHI7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQucmVtb3ZlUmlnaWRCb2R5KHJhd1JpZ2lkQm9keSk7XG4gICAgICAgIC8vIGhhY2ssIHdlIHVzZSB0aGUgd2FzbSBoZWFwIG1lbW9yeSBhZGRyZXNzIGFzIGFuIGlkZW50aWZpZXIsIGl0J3MgZmFzdGVyXG4gICAgICAgIHRoaXMuX2JvZHlNYXAuZGVsZXRlKGJvZHlQdHIpO1xuICAgICAgICByaWdpZEJvZHkuZGlzcG9zZSgpO1xuICAgICAgICAvLyBkZXN0cm95IGFueSBjb25zdHJhaW50cyB0aGF0IG1pZ2h0IGFmZmVjdCB0aGlzIGJvZHlcbiAgICAgICAgY29uc3QgYm9keUxpc3RPZkNvbnN0cmFpbnRzID0gdGhpcy5fY29uc3RyYWludE1hcC5nZXQoYm9keVB0cik7XG4gICAgICAgIGlmIChib2R5TGlzdE9mQ29uc3RyYWludHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY3VyckNvbnN0cmFpbnQgb2YgYm9keUxpc3RPZkNvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95R2VuZXJpYzZEb2ZDb25zdHJhaW50KGN1cnJDb25zdHJhaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBkZXN0cm95IGFueSBjb25zdHJhaW50cyB0aGF0IG1pZ2h0IGFmZmVjdCB0aGlzIGJvZHlcbiAgICAgICAgY29uc3QgYm9keUxpc3RPZkNvbnN0cmFpbnRzMiA9IHRoaXMuX2NvbnN0cmFpbnRNYXAyLmdldChib2R5UHRyKTtcbiAgICAgICAgaWYgKGJvZHlMaXN0T2ZDb25zdHJhaW50czIpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY3VyckNvbnN0cmFpbnQgb2YgYm9keUxpc3RPZkNvbnN0cmFpbnRzMikge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUhpbmdlQ29uc3RyYWludChjdXJyQ29uc3RyYWludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogem9tYmllIGJvZGllcyBjb3VsZCBzdGlsbCBiZSByZWYvdXNlZCwgY2FuIGl0IGJlIHByZXZlbnRlZD9cbiAgICAgICAgLy8gLT4gcmF3IHJpZ2lkIGJvZHkgaXMgc2V0IHRvIG51bGwgaW5zaWRlXG4gICAgICAgIC8vIC0+IHNob3VsZCBmaW5kIGEgZnJpZW5kbGllciB3YXlcbiAgICB9XG4gICAgY3JlYXRlVmVoaWNsZShkZWYpIHtcbiAgICAgICAgY29uc3QgbmV3Qm9keSA9IHRoaXMuY3JlYXRlUmlnaWRCb2R5KGRlZi5jaGFzc2lzRGVmKTtcbiAgICAgICAgY29uc3QgcmF3UmlnaWRCb2R5ID0gbmV3Qm9keTtcbiAgICAgICAgY29uc3QgdmVoaWNsZSA9IG5ldyBDb25jcmV0ZVBoeXNpY1ZlaGljbGUodGhpcy5fcmF3RHluYW1pY3NXb3JsZCwgcmF3UmlnaWRCb2R5LCBkZWYpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLmFkZEFjdGlvbih2ZWhpY2xlLl9yYXdWZWhpY2xlKTtcbiAgICAgICAgLy8gaGFjaywgd2UgdXNlIHRoZSB3YXNtIGhlYXAgbWVtb3J5IGFkZHJlc3MgYXMgYW4gaWRlbnRpZmllciwgaXQncyBmYXN0ZXJcbiAgICAgICAgdGhpcy5fdmVoaWNsZU1hcC5zZXQodmVoaWNsZS5wdHIsIHZlaGljbGUpO1xuICAgICAgICByZXR1cm4gdmVoaWNsZTtcbiAgICB9XG4gICAgZGVzdHJveVZlaGljbGUodmVoaWNsZSkge1xuICAgICAgICB0aGlzLmRlc3Ryb3lSaWdpZEJvZHkodmVoaWNsZS5fY2hhc3Npc0JvZHkpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnJlbW92ZUFjdGlvbih2ZWhpY2xlLl9yYXdWZWhpY2xlKTtcbiAgICAgICAgLy8gaGFjaywgd2UgdXNlIHRoZSB3YXNtIGhlYXAgbWVtb3J5IGFkZHJlc3MgYXMgYW4gaWRlbnRpZmllciwgaXQncyBmYXN0ZXJcbiAgICAgICAgdGhpcy5fdmVoaWNsZU1hcC5kZWxldGUodmVoaWNsZS5wdHIpO1xuICAgICAgICB2ZWhpY2xlLmRpc3Bvc2UoKTtcbiAgICAgICAgLy8gVE9ETzogem9tYmllIHZlaGljbGVzIGNvdWxkIHN0aWxsIGJlIHJlZi91c2VkLCBjYW4gaXQgYmUgcHJldmVudGVkP1xuICAgIH1cbiAgICBjcmVhdGVHZW5lcmljNkRvZkNvbnN0cmFpbnQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgQ29uY3JldGVHZW5lcmljNkRvZkNvbnN0cmFpbnQoZGVmKTtcbiAgICAgICAgLy8gZ2V0IG9yIGNyZWF0ZVxuICAgICAgICBjb25zdCBwdHJBID0gZGVmLmJvZHlBLl9yYXdSaWdpZEJvZHkucHRyO1xuICAgICAgICBsZXQgYm9keUxpc3RBID0gdGhpcy5fY29uc3RyYWludE1hcC5nZXQocHRyQSk7XG4gICAgICAgIGlmICghYm9keUxpc3RBKSB7XG4gICAgICAgICAgICBib2R5TGlzdEEgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAuc2V0KHB0ckEsIGJvZHlMaXN0QSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSBjb25zdHJhaW50IGFnYWluc3QgYm9keUEgcG9pbnRlciB2YWx1ZVxuICAgICAgICBib2R5TGlzdEEucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgLy8gZ2V0IG9yIGNyZWF0ZVxuICAgICAgICBjb25zdCBwdHJCID0gZGVmLmJvZHlCLl9yYXdSaWdpZEJvZHkucHRyO1xuICAgICAgICBsZXQgYm9keUxpc3RCID0gdGhpcy5fY29uc3RyYWludE1hcC5nZXQocHRyQik7XG4gICAgICAgIGlmICghYm9keUxpc3RCKSB7XG4gICAgICAgICAgICBib2R5TGlzdEIgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAuc2V0KHB0ckEsIGJvZHlMaXN0Qik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSBjb25zdHJhaW50IGFnYWluc3QgYm9keUIgcG9pbnRlciB2YWx1ZVxuICAgICAgICBib2R5TGlzdEIucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQuX3Jhd0NvbnN0cmFpbnQsIHRydWUpO1xuICAgICAgICAvLyBUT0RPOiBzYXZlIGluIG1hcFxuICAgICAgICAvLyBUT0RPOiBkaXNjYXJkIGlmIG9uZSBvZiB0aGUgYm9keSBpcyByZW1vdmVkXG4gICAgICAgIHJldHVybiBjb25zdHJhaW50O1xuICAgIH1cbiAgICBkZXN0cm95R2VuZXJpYzZEb2ZDb25zdHJhaW50KGNvbnN0cmFpbnQpIHtcbiAgICAgICAgY29uc3QgY29uY3JldGUgPSBjb25zdHJhaW50O1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnJlbW92ZUNvbnN0cmFpbnQoY29uY3JldGUuX3Jhd0NvbnN0cmFpbnQpO1xuICAgICAgICAvLyByZW1vdmUgY29uc3RyYWludHMgZnJvbSB0aGUgbWFwIHZhbHVlIChib2R5QSlcbiAgICAgICAgY29uc3QgYm9keUxpc3RBID0gdGhpcy5fY29uc3RyYWludE1hcC5nZXQoY29uY3JldGUuX2JvZHlBLl9yYXdSaWdpZEJvZHkucHRyKTtcbiAgICAgICAgaWYgKGJvZHlMaXN0QSkge1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY29uc3RyYWludCBhbmQgcmVtb3ZlIGl0XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGJvZHlMaXN0QS5pbmRleE9mKGNvbmNyZXRlKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYm9keUxpc3RBLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIGNvbnN0cmFpbnRzIGZyb20gdGhlIG1hcCAoYm9keUIpXG4gICAgICAgIGNvbnN0IGJvZHlMaXN0QiA9IHRoaXMuX2NvbnN0cmFpbnRNYXAuZ2V0KGNvbmNyZXRlLl9ib2R5Qi5fcmF3UmlnaWRCb2R5LnB0cik7XG4gICAgICAgIGlmIChib2R5TGlzdEIpIHtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvbnN0cmFpbnQgYW5kIHJlbW92ZSBpdFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBib2R5TGlzdEIuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGJvZHlMaXN0Qi5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIGxpc3Qgb2YgYWxsIGNvbnN0cmFpbnRzXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fYWxsQ29uc3RyYWludHMuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50cy5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICB9XG4gICAgICAgIGNvbmNyZXRlLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgY3JlYXRlSGluZ2VDb25zdHJhaW50KGRlZikge1xuICAgICAgICBjb25zdCBjb25zdHJhaW50ID0gbmV3IENvbmNyZXRlSGluZ2VDb25zdHJhaW50KGRlZik7XG4gICAgICAgIC8vIGdldCBvciBjcmVhdGVcbiAgICAgICAgY29uc3QgcHRyQSA9IGRlZi5ib2R5QS5fcmF3UmlnaWRCb2R5LnB0cjtcbiAgICAgICAgbGV0IGJvZHlMaXN0QSA9IHRoaXMuX2NvbnN0cmFpbnRNYXAyLmdldChwdHJBKTtcbiAgICAgICAgaWYgKCFib2R5TGlzdEEpIHtcbiAgICAgICAgICAgIGJvZHlMaXN0QSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcDIuc2V0KHB0ckEsIGJvZHlMaXN0QSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSBjb25zdHJhaW50IGFnYWluc3QgYm9keUEgcG9pbnRlciB2YWx1ZVxuICAgICAgICBib2R5TGlzdEEucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgLy8gZ2V0IG9yIGNyZWF0ZVxuICAgICAgICBjb25zdCBwdHJCID0gZGVmLmJvZHlCLl9yYXdSaWdpZEJvZHkucHRyO1xuICAgICAgICBsZXQgYm9keUxpc3RCID0gdGhpcy5fY29uc3RyYWludE1hcDIuZ2V0KHB0ckIpO1xuICAgICAgICBpZiAoIWJvZHlMaXN0Qikge1xuICAgICAgICAgICAgYm9keUxpc3RCID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwMi5zZXQocHRyQSwgYm9keUxpc3RCKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzYXZlIGNvbnN0cmFpbnQgYWdhaW5zdCBib2R5QiBwb2ludGVyIHZhbHVlXG4gICAgICAgIGJvZHlMaXN0Qi5wdXNoKGNvbnN0cmFpbnQpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50czIucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQuX3Jhd0NvbnN0cmFpbnQsIHRydWUpO1xuICAgICAgICAvLyBUT0RPOiBzYXZlIGluIG1hcFxuICAgICAgICAvLyBUT0RPOiBkaXNjYXJkIGlmIG9uZSBvZiB0aGUgYm9keSBpcyByZW1vdmVkXG4gICAgICAgIHJldHVybiBjb25zdHJhaW50O1xuICAgIH1cbiAgICBkZXN0cm95SGluZ2VDb25zdHJhaW50KGNvbnN0cmFpbnQpIHtcbiAgICAgICAgY29uc3QgY29uY3JldGUgPSBjb25zdHJhaW50O1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnJlbW92ZUNvbnN0cmFpbnQoY29uY3JldGUuX3Jhd0NvbnN0cmFpbnQpO1xuICAgICAgICAvLyByZW1vdmUgY29uc3RyYWludHMgZnJvbSB0aGUgbWFwIHZhbHVlIChib2R5QSlcbiAgICAgICAgY29uc3QgYm9keUxpc3RBID0gdGhpcy5fY29uc3RyYWludE1hcDIuZ2V0KGNvbmNyZXRlLl9ib2R5QS5fcmF3UmlnaWRCb2R5LnB0cik7XG4gICAgICAgIGlmIChib2R5TGlzdEEpIHtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvbnN0cmFpbnQgYW5kIHJlbW92ZSBpdFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBib2R5TGlzdEEuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGJvZHlMaXN0QS5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSBjb25zdHJhaW50cyBmcm9tIHRoZSBtYXAgKGJvZHlCKVxuICAgICAgICBjb25zdCBib2R5TGlzdEIgPSB0aGlzLl9jb25zdHJhaW50TWFwMi5nZXQoY29uY3JldGUuX2JvZHlCLl9yYXdSaWdpZEJvZHkucHRyKTtcbiAgICAgICAgaWYgKGJvZHlMaXN0Qikge1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY29uc3RyYWludCBhbmQgcmVtb3ZlIGl0XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGJvZHlMaXN0Qi5pbmRleE9mKGNvbmNyZXRlKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYm9keUxpc3RCLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIGZyb20gbGlzdCBvZiBhbGwgY29uc3RyYWludHNcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9hbGxDb25zdHJhaW50czIuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50czIuc3BsaWNlKGluZGV4LCAwKTtcbiAgICAgICAgfVxuICAgICAgICBjb25jcmV0ZS5kaXNwb3NlKCk7XG4gICAgfVxuICAgIHJheUNhc3QoZnJvbSwgdG8pIHtcbiAgICAgICAgcmV0dXJuIHJheUNhc3QodGhpcy5fcmF3RHluYW1pY3NXb3JsZCwgdGhpcy5fYm9keU1hcCwge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IC0xLFxuICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyTWFzazogLTFcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnZleFN3ZWVwKGZyb20sIHRvLCByYWRpdXMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnZleFN3ZWVwKHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQsIHtcbiAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICB0byxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiAtMSxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IC0xLFxuICAgICAgICAgICAgcmFkaXVzOiByYWRpdXNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9pbml0Q29sbGlzaW9uRXZlbnRzKCkge1xuICAgICAgICBjb25zdCBldmVudEZsYWdzID0ge1xuICAgICAgICAgICAgd29ybGQ6IDEgPDwgMCxcbiAgICAgICAgICAgIGJvZHlBOiAxIDw8IDEsXG4gICAgICAgICAgICBib2R5QjogMSA8PCAyXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IF9vbkNvbnRhY3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvZHlBID0gZXZlbnQuZGF0YS5nZXRCb2R5QSgpO1xuICAgICAgICAgICAgY29uc3QgYm9keUIgPSBldmVudC5kYXRhLmdldEJvZHlCKCk7XG4gICAgICAgICAgICBjb25zdCByaWdpZEJvZHlBID0gdGhpcy5fYm9keU1hcC5nZXQoYm9keUEucHRyKTtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2lkQm9keUIgPSB0aGlzLl9ib2R5TWFwLmdldChib2R5Qi5wdHIpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ19vbkNvbnRhY3RDaGFuZ2UnKTtcbiAgICAgICAgICAgIGlmICghcmlnaWRCb2R5QSB8fCAhcmlnaWRCb2R5Qikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBldmVudC50eXBlO1xuICAgICAgICAgICAgY29uc3QgY29sbGlzaW9uRmxhZyA9ICgodGhpcy5pc0V2ZW50TGlzdGVuZWRUbyh0eXBlKSA/IGV2ZW50RmxhZ3Mud29ybGQgOiAwKSB8XG4gICAgICAgICAgICAgICAgKHJpZ2lkQm9keUEuaXNFdmVudExpc3RlbmVkVG8odHlwZSkgPyBldmVudEZsYWdzLmJvZHlBIDogMCkgfFxuICAgICAgICAgICAgICAgIChyaWdpZEJvZHlCLmlzRXZlbnRMaXN0ZW5lZFRvKHR5cGUpID8gZXZlbnRGbGFncy5ib2R5QiA6IDApKTtcbiAgICAgICAgICAgIGlmIChjb2xsaXNpb25GbGFnID09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb250YWN0SWQgPSBldmVudC5kYXRhLmdldElkKCk7XG4gICAgICAgICAgICBjb25zdCBidWxsZXRQb3MgPSBldmVudC5kYXRhLmdldFBvc2l0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBidWxsZXROb3JtYWxCID0gZXZlbnQuZGF0YS5nZXROb3JtYWxCKCk7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICB4OiBidWxsZXRQb3MueCgpLFxuICAgICAgICAgICAgICAgIHk6IGJ1bGxldFBvcy55KCksXG4gICAgICAgICAgICAgICAgejogYnVsbGV0UG9zLnooKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBub3JtYWxCID0ge1xuICAgICAgICAgICAgICAgIHg6IGJ1bGxldE5vcm1hbEIueCgpLFxuICAgICAgICAgICAgICAgIHk6IGJ1bGxldE5vcm1hbEIueSgpLFxuICAgICAgICAgICAgICAgIHo6IGJ1bGxldE5vcm1hbEIueigpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjb2xsaXNpb25GbGFnICYgZXZlbnRGbGFncy53b3JsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2lkQm9keUEsXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdpZEJvZHlCLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZyb21WYWx1ZXMkMShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEI6IGZyb21WYWx1ZXMkMShub3JtYWxCLngsIG5vcm1hbEIueSwgbm9ybWFsQi56KSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbGxpc2lvbkZsYWcgJiBldmVudEZsYWdzLmJvZHlBKSB7XG4gICAgICAgICAgICAgICAgcmlnaWRCb2R5QS5kaXNwYXRjaEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXI6IHJpZ2lkQm9keUIsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbjogeyB4OiBwb3NpdGlvbi54LCB5OiBwb3NpdGlvbi55LCB6OiBwb3NpdGlvbi56IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3JtYWxCOiB7IHg6IC1ub3JtYWxCLngsIHk6IC1ub3JtYWxCLnksIHo6IC1ub3JtYWxCLnogfVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZyb21WYWx1ZXMkMShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEI6IGZyb21WYWx1ZXMkMSgtbm9ybWFsQi54LCAtbm9ybWFsQi55LCAtbm9ybWFsQi56KSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbGxpc2lvbkZsYWcgJiBldmVudEZsYWdzLmJvZHlCKSB7XG4gICAgICAgICAgICAgICAgcmlnaWRCb2R5Qi5kaXNwYXRjaEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXI6IHJpZ2lkQm9keUEsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbjogeyB4OiBwb3NpdGlvbi54LCB5OiBwb3NpdGlvbi55LCB6OiBwb3NpdGlvbi56IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3JtYWxCOiB7IHg6IG5vcm1hbEIueCwgeTogbm9ybWFsQi55LCB6OiBub3JtYWxCLnogfVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZyb21WYWx1ZXMkMShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEI6IGZyb21WYWx1ZXMkMShub3JtYWxCLngsIG5vcm1hbEIueSwgbm9ybWFsQi56KSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBoYWNreVxuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBidWxsZXQub24oXCJiZWdpbkNvbnRhY3RcIiwgX29uQ29udGFjdENoYW5nZSk7XG4gICAgICAgIGJ1bGxldC5vbihcInVwZGF0ZUNvbnRhY3RcIiwgX29uQ29udGFjdENoYW5nZSk7XG4gICAgICAgIGJ1bGxldC5vbihcImVuZENvbnRhY3RcIiwgX29uQ29udGFjdENoYW5nZSk7XG4gICAgICAgIGJ1bGxldC5vbihcImNjZENvbnRhY3RcIiwgX29uQ29udGFjdENoYW5nZSk7XG4gICAgICAgIGJ1bGxldC5saXN0ZW5Ub0NvbnRhY3RDYWxsYmFja3MoKTtcbiAgICB9XG4gICAgc3RlcFNpbXVsYXRpb24oZGVsdGFUaW1lU2VjLCBtYXhTdWJTdGVwcyA9IDMsIGZpeGVkU3RlcCA9IDEgLyA2MCkge1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnN0ZXBTaW11bGF0aW9uKGRlbHRhVGltZVNlYywgbWF4U3ViU3RlcHMsIGZpeGVkU3RlcCk7XG4gICAgfVxuICAgIHNldEdyYXZpdHkoeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWZWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5zZXRHcmF2aXR5KG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIHNldERlYnVnV2lyZWZyYW1lQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgY29udGFjdFB0ciA9IGJ1bGxldC5hZGRGdW5jdGlvbihjYWxsYmFjaywgXCJ2ZmZmZmZmZmZmXCIpOyAvLyB2ZmZmZmZmZmZmIC0+IFZvaWQgRmxvYXQgRmxvYXQgLi4uXG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuc2V0RGVidWdXaXJlZnJhbWVDYWxsYmFjayhjb250YWN0UHRyKTtcbiAgICB9XG4gICAgc2V0RGVidWdXaXJlZnJhbWVGZWF0dXJlc0ZsYWcoZmxhZykge1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnNldERlYnVnV2lyZWZyYW1lRmVhdHVyZXNGbGFnKGZsYWcpO1xuICAgIH1cbiAgICBkZWJ1Z0RyYXdXb3JsZCgpIHtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5kZWJ1Z0RyYXdXb3JsZCgpO1xuICAgIH1cbn1cblxudmFyIERlYnVnRHJhd0ZsYWdzO1xuKGZ1bmN0aW9uIChEZWJ1Z0RyYXdGbGFncykge1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX05vRGVidWdcIl0gPSAwXSA9IFwiREJHX05vRGVidWdcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3V2lyZWZyYW1lXCJdID0gMV0gPSBcIkRCR19EcmF3V2lyZWZyYW1lXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd0FhYmJcIl0gPSAyXSA9IFwiREJHX0RyYXdBYWJiXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd0ZlYXR1cmVzVGV4dFwiXSA9IDRdID0gXCJEQkdfRHJhd0ZlYXR1cmVzVGV4dFwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdDb250YWN0UG9pbnRzXCJdID0gOF0gPSBcIkRCR19EcmF3Q29udGFjdFBvaW50c1wiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX05vRGVhY3RpdmF0aW9uXCJdID0gMTZdID0gXCJEQkdfTm9EZWFjdGl2YXRpb25cIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19Ob0hlbHBUZXh0XCJdID0gMzJdID0gXCJEQkdfTm9IZWxwVGV4dFwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdUZXh0XCJdID0gNjRdID0gXCJEQkdfRHJhd1RleHRcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19Qcm9maWxlVGltaW5nc1wiXSA9IDEyOF0gPSBcIkRCR19Qcm9maWxlVGltaW5nc1wiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0VuYWJsZVNhdENvbXBhcmlzb25cIl0gPSAyNTZdID0gXCJEQkdfRW5hYmxlU2F0Q29tcGFyaXNvblwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0Rpc2FibGVCdWxsZXRMQ1BcIl0gPSA1MTJdID0gXCJEQkdfRGlzYWJsZUJ1bGxldExDUFwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0VuYWJsZUNDRFwiXSA9IDEwMjRdID0gXCJEQkdfRW5hYmxlQ0NEXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd0NvbnN0cmFpbnRzXCJdID0gMjA0OF0gPSBcIkRCR19EcmF3Q29uc3RyYWludHNcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3Q29uc3RyYWludExpbWl0c1wiXSA9IDQwOTZdID0gXCJEQkdfRHJhd0NvbnN0cmFpbnRMaW1pdHNcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19GYXN0V2lyZWZyYW1lXCJdID0gODE5Ml0gPSBcIkRCR19GYXN0V2lyZWZyYW1lXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd05vcm1hbHNcIl0gPSAxNjM4NF0gPSBcIkRCR19EcmF3Tm9ybWFsc1wiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdGcmFtZXNcIl0gPSAzMjc2OF0gPSBcIkRCR19EcmF3RnJhbWVzXCI7XG59KShEZWJ1Z0RyYXdGbGFncyB8fCAoRGVidWdEcmF3RmxhZ3MgPSB7fSkpO1xuXG52YXIgaW5kZXggPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIENvbmNyZXRlUGh5c2ljQm9keTogQ29uY3JldGVQaHlzaWNCb2R5LFxuICAgIENvbmNyZXRlUGh5c2ljVmVoaWNsZTogQ29uY3JldGVQaHlzaWNWZWhpY2xlLFxuICAgIENvbnRhY3RFdmVudEhhbmRsZXI6IENvbnRhY3RFdmVudEhhbmRsZXIsXG4gICAgZ2V0IERlYnVnRHJhd0ZsYWdzICgpIHsgcmV0dXJuIERlYnVnRHJhd0ZsYWdzOyB9LFxuICAgIFBoeXNpY1dvcmxkOiBQaHlzaWNXb3JsZCxcbiAgICBXYXNtTW9kdWxlSG9sZGVyOiBXYXNtTW9kdWxlSG9sZGVyLFxuICAgIGNvbnZleFN3ZWVwOiBjb252ZXhTd2VlcCxcbiAgICByYXlDYXN0OiByYXlDYXN0XG59KTtcblxuZXhwb3J0cy5Ccm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlID0gQnJvd3NlckZyYW5rZW5QaHlzV2FzbU1vZHVsZTtcbmV4cG9ydHMucGh5c2ljcyA9IGluZGV4O1xuIiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxuaW4gdmVjMiBhX3ZlcnRleFBvc2l0aW9uO1xuaW4gdmVjMyBhX3Bsb3RQb3NpdGlvbjtcblxub3V0IHZlYzMgdl9wb3NpdGlvbjtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIGdsX1Bvc2l0aW9uID0gdmVjNChhX3ZlcnRleFBvc2l0aW9uLCAxLjAsIDEuMCk7XG5cbiAgdl9wb3NpdGlvbiA9IGFfcGxvdFBvc2l0aW9uO1xufVxuYC50cmltKCk7IiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBoaWdocCBpbnQ7XG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbi8vXG4vL1xuLy9cblxuLy8gI2RlZmluZSBEX1NJTVBMSUZJRURcblxuLy8gSW5kaWNlcyBvZiByZWZyYWN0aW9uRmFjdG9yXG5jb25zdCBmbG9hdCBBaXIgPSAxLjA7XG5jb25zdCBmbG9hdCBHbGFzcyA9IDEuNTE3MTQ7XG5cbi8vIEFpciB0byBnbGFzcyByYXRpbyBvZiB0aGUgaW5kaWNlcyBvZiByZWZyYWN0aW9uRmFjdG9yIChFdGEpXG5jb25zdCBmbG9hdCBFdGEgPSBBaXIgLyBHbGFzcztcblxuLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmVmcmFjdGl2ZV9pbmRleCBSZWZsZWN0aXZpdHlcbmNvbnN0IGZsb2F0IFIwID0gKChBaXIgLSBHbGFzcykgKiAoQWlyIC0gR2xhc3MpKSAvICgoQWlyICsgR2xhc3MpICogKEFpciArIEdsYXNzKSk7XG5cbi8vXG4vL1xuLy9cblxudW5pZm9ybSB2ZWMzICAgICAgICB1X2NhbWVyYUV5ZTtcblxuLy9cblxudW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgICB1X3NjZW5lVGV4dHVyZURhdGE7XG51bmlmb3JtIGludCAgICAgICAgIHVfc2NlbmVUZXh0dXJlU2l6ZTtcblxudW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgICB1X21hdGVyaWFsc1RleHR1cmVEYXRhO1xuXG51bmlmb3JtIGludCAgICAgICB1X3RvdGFsU2hhcGVzO1xuXG4vL1xuXG51bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCAgIHVfbGlnaHRzVGV4dHVyZURhdGE7XG5cbnVuaWZvcm0gaW50ICAgICAgIHVfc3VuTGlnaHRzU3RvcDtcbnVuaWZvcm0gaW50ICAgICAgIHVfc3BvdExpZ2h0c1N0b3A7XG5cbi8vXG5cbnVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEICAgdV9idmhEYXRhVGV4dHVyZTtcblxuLy9cbi8vXG4vL1xuXG5pbiB2ZWMzICB2X3Bvc2l0aW9uO1xuXG5vdXQgdmVjNCBvX2NvbG9yO1xuXG4vL1xuXG5jb25zdCBmbG9hdCAgICAgZ19hbWJpYW50TGlnaHQgPSAwLjE1O1xuXG5jb25zdCB2ZWMzICAgICAgZ19iYWNrZ3JvdW5kQ29sb3IgPSB2ZWMzKDAuMSk7XG5cbi8vXG5cbnN0cnVjdCBSYXlWYWx1ZXNcbntcbiAgdmVjMyBvcmlnaW47XG4gIHZlYzMgZGlyZWN0aW9uO1xufTtcblxuc3RydWN0IFJheVJlc3VsdFxue1xuICBib29sIGhhc0hpdDtcbiAgZmxvYXQgZGlzdGFuY2U7XG4gIHZlYzMgcG9zaXRpb247XG4gIHZlYzMgbm9ybWFsO1xuICB2ZWM0IGNvbG9yO1xuICBmbG9hdCByZWZsZWN0aW9uRmFjdG9yO1xuICBmbG9hdCByZWZyYWN0aW9uRmFjdG9yO1xuICBib29sIGxpZ2h0RW5hYmxlZDtcbn07XG5cblxuc3RydWN0IFN0YWNrRGF0YVxue1xuICAvLyBpbnQgcGFyZW50SW5kZXg7XG4gIGJvb2wgdXNlZDtcbiAgUmF5VmFsdWVzIHJheTtcbiAgUmF5UmVzdWx0IHJlc3VsdDtcbiAgaW50IHJlZmxlY3Rpb25JbmRleDtcbiAgaW50IHJlZnJhY3Rpb25JbmRleDtcbn07XG5cbi8vXG4vL1xuLy9cbi8vXG4vL1xuXG52ZWMzIGFwcGx5X3F1YXRfdG9fdmVjMyh2ZWMzIHBvc2l0aW9uLCB2ZWM0IHEpXG57XG4gIHZlYzMgdiA9IHBvc2l0aW9uLnh5ejtcbiAgcmV0dXJuIHYgKyAyLjAgKiBjcm9zcyhxLnh5eiwgY3Jvc3MocS54eXosIHYpICsgcS53ICogdik7XG59XG5tYXQzIHF1YXRfdG9fbWF0Myh2ZWM0IHEpXG57XG5cbiAgLy8gbXVsdGlwbHkgYnkgc3FydCgyKSB0byBnZXQgcmlkIG9mIGFsbCB0aGUgMi4wIGZhY3RvcnMgaW4gdGhlIG1hdHJpeFxuICBxICo9IDEuNDE0MjE0O1xuXG4gIGZsb2F0IHh4ID0gcS54ICogcS54O1xuICBmbG9hdCB4eSA9IHEueCAqIHEueTtcbiAgZmxvYXQgeHogPSBxLnggKiBxLno7XG4gIGZsb2F0IHh3ID0gcS54ICogcS53O1xuXG4gIGZsb2F0IHl5ID0gcS55ICogcS55O1xuICBmbG9hdCB5eiA9IHEueSAqIHEuejtcbiAgZmxvYXQgeXcgPSBxLnkgKiBxLnc7XG5cbiAgZmxvYXQgenogPSBxLnogKiBxLno7XG4gIGZsb2F0IHp3ID0gcS56ICogcS53O1xuXG4gIHJldHVybiBtYXQzKFxuICAgIDEuMCAtIHl5IC0genosXG4gICAgeHkgKyB6dyxcbiAgICB4eiAtIHl3LFxuXG4gICAgeHkgLSB6dyxcbiAgICAxLjAgLSB4eCAtIHp6LFxuICAgIHl6ICsgeHcsXG5cbiAgICB4eiArIHl3LFxuICAgIHl6IC0geHcsXG4gICAgMS4wIC0geHggLSB5eVxuICApO1xufVxuLy9cbi8vXG4vL1xuLy9cbi8vXG5cbmJvb2wgaW50ZXJzZWN0U3BoZXJlKFJheVZhbHVlcyByYXksIGZsb2F0IHJhZGl1cywgb3V0IGZsb2F0IG91dERpc3RhbmNlLCBvdXQgdmVjMyBub3JtYWwpXG57XG4gIGZsb2F0IG5lYXJWYWx1ZSA9IDAuMDAxOyAvLyBUT0RPOiBoYXJkY29kZWRcbiAgZmxvYXQgZmFyVmFsdWUgPSAxMDAuMDsgLy8gVE9ETzogaGFyZGNvZGVkXG5cbiAgZmxvYXQgYiA9IGRvdChyYXkub3JpZ2luLCByYXkuZGlyZWN0aW9uKTtcbiAgZmxvYXQgYyA9IGRvdChyYXkub3JpZ2luLCByYXkub3JpZ2luKSAtIHJhZGl1cyAqIHJhZGl1cztcbiAgZmxvYXQgaCA9IGIgKiBiIC0gYztcbiAgaWYgKGggPCAwLjApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBoID0gc3FydChoKTtcblxuICBmbG9hdCBkMSA9IC1iIC0gaDtcbiAgaWYgKGQxID49IG5lYXJWYWx1ZSAmJiBkMSA8PSBmYXJWYWx1ZSlcbiAge1xuICAgIG5vcm1hbCA9IG5vcm1hbGl6ZShyYXkub3JpZ2luICsgcmF5LmRpcmVjdGlvbiAqIGQxKTtcbiAgICBvdXREaXN0YW5jZSA9IGQxO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZmxvYXQgZDIgPSAtYiArIGg7XG4gIGlmIChkMiA+PSBuZWFyVmFsdWUgJiYgZDIgPD0gZmFyVmFsdWUpXG4gIHtcbiAgICBub3JtYWwgPSBub3JtYWxpemUocmF5Lm9yaWdpbiArIHJheS5kaXJlY3Rpb24gKiBkMik7XG4gICAgb3V0RGlzdGFuY2UgPSBkMjtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuYm9vbCBpbnRlcnNlY3RCb3goUmF5VmFsdWVzIHJheSwgdmVjMyBib3hTaXplLCBvdXQgZmxvYXQgb3V0RGlzdGFuY2UsIG91dCB2ZWMzIG5vcm1hbClcbntcbiAgZmxvYXQgbmVhclZhbHVlID0gMC4wMDE7IC8vIFRPRE86IGhhcmRjb2RlZFxuICBmbG9hdCBmYXJWYWx1ZSA9IDEwMC4wOyAvLyBUT0RPOiBoYXJkY29kZWRcblxuICAvL1xuICAvL1xuICAvLyBzYWQgaGFjazogZml4IGEgc2hhZG93IHJlbGF0ZWQgYnVnXG5cbiAgLy8gaWYgKHJheS5vcmlnaW4ueCA9PSAwLjApIHJheS5vcmlnaW4ueCA9IC0xZS04O1xuICAvLyBpZiAocmF5Lm9yaWdpbi55ID09IDAuMCkgcmF5Lm9yaWdpbi55ID0gLTFlLTg7XG4gIC8vIGlmIChyYXkub3JpZ2luLnogPT0gMC4wKSByYXkub3JpZ2luLnogPSAtMWUtODtcblxuICBpZiAocmF5LmRpcmVjdGlvbi54ID09IDAuMCkgcmF5LmRpcmVjdGlvbi54ID0gLTFlLTg7XG4gIGlmIChyYXkuZGlyZWN0aW9uLnkgPT0gMC4wKSByYXkuZGlyZWN0aW9uLnkgPSAtMWUtODtcbiAgaWYgKHJheS5kaXJlY3Rpb24ueiA9PSAwLjApIHJheS5kaXJlY3Rpb24ueiA9IC0xZS04O1xuXG4gIC8vIHNhZCBoYWNrOiBmaXggYSBzaGFkb3cgcmVsYXRlZCBidWdcbiAgLy9cbiAgLy9cblxuICB2ZWMzIG0gPSBzaWduKHJheS5kaXJlY3Rpb24pIC8gbWF4KGFicyhyYXkuZGlyZWN0aW9uKSwgMWUtOCk7XG4gIHZlYzMgbiA9IG0gKiByYXkub3JpZ2luO1xuICB2ZWMzIGsgPSBhYnMobSkgKiBib3hTaXplO1xuXG4gIHZlYzMgdDEgPSAtbiAtIGs7XG4gIHZlYzMgdDIgPSAtbiArIGs7XG5cbiAgZmxvYXQgdE4gPSBtYXgobWF4KHQxLngsIHQxLnkpLCB0MS56KTtcbiAgZmxvYXQgdEYgPSBtaW4obWluKHQyLngsIHQyLnkpLCB0Mi56KTtcblxuICBpZiAodE4gPiB0RiB8fCB0RiA8PSAwLjApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAodE4gPj0gbmVhclZhbHVlICYmIHROIDw9IGZhclZhbHVlKVxuICB7XG4gICAgbm9ybWFsID0gbm9ybWFsaXplKC1zaWduKHJheS5kaXJlY3Rpb24pICogc3RlcCh0MS55engsIHQxLnh5eikgKiBzdGVwKHQxLnp4eSwgdDEueHl6KSk7XG4gICAgb3V0RGlzdGFuY2UgPSB0TjtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICh0RiA+PSBuZWFyVmFsdWUgJiYgdEYgPD0gZmFyVmFsdWUpXG4gIHtcbiAgICBub3JtYWwgPSBub3JtYWxpemUoLXNpZ24ocmF5LmRpcmVjdGlvbikgKiBzdGVwKHQxLnl6eCwgdDEueHl6KSAqIHN0ZXAodDEuenh5LCB0MS54eXopKTtcbiAgICBvdXREaXN0YW5jZSA9IHRGO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5ib29sIGludGVyc2VjdFRyaWFuZ2xlKFJheVZhbHVlcyByYXksIHZlYzMgdjAsIHZlYzMgdjEsIHZlYzMgdjIsIG91dCBmbG9hdCBvdXREaXN0YW5jZSwgb3V0IHZlYzMgbm9ybWFsKVxue1xuICBmbG9hdCBuZWFyVmFsdWUgPSAwLjAwMTsgLy8gVE9ETzogaGFyZGNvZGVkXG4gIGZsb2F0IGZhclZhbHVlID0gMTAwLjA7IC8vIFRPRE86IGhhcmRjb2RlZFxuXG4gIHZlYzMgdjF2MCA9IHYxIC0gdjA7XG4gIHZlYzMgdjJ2MCA9IHYyIC0gdjA7XG4gIHZlYzMgcm92MCA9IHJheS5vcmlnaW4gLSB2MDtcblxuICB2ZWMzIG4gPSBjcm9zcyh2MXYwLCB2MnYwKTtcbiAgdmVjMyBxID0gY3Jvc3Mocm92MCwgcmF5LmRpcmVjdGlvbik7XG4gIGZsb2F0IGQgPSAxLjAgLyBkb3QocmF5LmRpcmVjdGlvbiwgbik7XG4gIGZsb2F0IHUgPSBkICogZG90KC1xLCB2MnYwKTtcbiAgZmxvYXQgdiA9IGQgKiBkb3QocSwgdjF2MCk7XG4gIGZsb2F0IHQgPSBkICogZG90KC1uLCByb3YwKTtcblxuICBpZiAodSA8IDAuMCB8fCB2IDwgMC4wIHx8ICh1ICsgdikgPiAxLjAgfHwgdCA8IG5lYXJWYWx1ZSB8fCB0ID4gZmFyVmFsdWUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBub3JtYWwgPSBub3JtYWxpemUoLW4pO1xuICBvdXREaXN0YW5jZSA9IHQ7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBmbG9hdCBpbnRlcnNlY3RQbGFuZShSYXlWYWx1ZXMgcmF5LCB2ZWMzIG5vcm1hbCwgZmxvYXQgb2Zmc2V0KVxuLy8ge1xuLy8gICAgIHJldHVybiAtKGRvdChyYXkub3JpZ2luLCBub3JtYWwpICsgb2Zmc2V0KSAvIGRvdChyYXkuZGlyZWN0aW9uLCBub3JtYWwpO1xuLy8gfVxuXG4vLyBmbG9hdCBpbnRlcnNlY3RQbGFuZTIoUmF5VmFsdWVzIHJheSwgdmVjMyBub3JtYWwsIGZsb2F0IG9mZnNldClcbi8vIHtcbi8vICAgICBmbG9hdCBuZWFyVmFsdWUgPSAwLjAwMTsgLy8gVE9ETzogaGFyZGNvZGVkXG4vLyAgICAgZmxvYXQgZmFyVmFsdWUgPSAxMDAwLjA7IC8vIFRPRE86IGhhcmRjb2RlZFxuXG4vLyAgICAgZmxvYXQgYSA9IGRvdChyYXkuZGlyZWN0aW9uLCBub3JtYWwpO1xuLy8gICAgIGZsb2F0IGQgPSAtKGRvdChyYXkub3JpZ2luLCBub3JtYWwpICsgb2Zmc2V0KSAvIGE7XG5cbi8vICAgICBpZiAoYSA+IDAuMCB8fCBkIDwgbmVhclZhbHVlIHx8IGQgPiBmYXJWYWx1ZSlcbi8vICAgICAgICAgcmV0dXJuIC0xLjA7XG5cbi8vICAgICByZXR1cm4gZDtcbi8vIH1cblxuLy8gZmxvYXQgZGlza0ludGVyc2VjdChSYXlWYWx1ZXMgcmF5LCB2ZWMzIGNlbnRlciwgdmVjMyBub3JtYWwsIGZsb2F0IHJhZGl1cylcbi8vIHtcbi8vICAgICB2ZWMzICBvID0gcmF5Lm9yaWdpbiAtIGNlbnRlcjtcbi8vICAgICBmbG9hdCB0ID0gLWRvdChub3JtYWwsIG8pIC8gZG90KHJheS5kaXJlY3Rpb24sIG5vcm1hbCk7XG4vLyAgICAgdmVjMyAgcSA9IG8gKyByYXkuZGlyZWN0aW9uICogdDtcbi8vICAgICByZXR1cm4gKGRvdChxLCBxKSA8IHJhZGl1cyAqIHJhZGl1cykgPyB0IDogLTEuMDtcbi8vIH1cblxuLy9cbi8vXG4vL1xuLy9cbi8vXG5cblxudm9pZCBpbnRlcnNlY3RTY2VuZU9uZVNoYXBlKGludCBpbmRleCwgUmF5VmFsdWVzIHJheSwgaW5vdXQgUmF5UmVzdWx0IG91dEJlc3RSZXN1bHQsIGJvb2wgc2hhZG93TW9kZSlcbntcbiAgUmF5VmFsdWVzIHRtcFJheTtcbiAgdmVjMyBub3JtYWw7XG5cbiAgdmVjNCBzaFRleGVsMCA9IHRleGVsRmV0Y2godV9zY2VuZVRleHR1cmVEYXRhLCBpdmVjMihpbmRleCArIDAsIDApLCAwKTtcblxuICBpbnQgbWF0ZXJpYWxJbmRleCA9IGludChzaFRleGVsMC5nKTtcbiAgdmVjNCBtYXRUZXhlbDEgPSB0ZXhlbEZldGNoKHVfbWF0ZXJpYWxzVGV4dHVyZURhdGEsIGl2ZWMyKG1hdGVyaWFsSW5kZXggKiAyICsgMSwgMCksIDApO1xuXG4gIGJvb2wgY2FzdFNoYWRvdyA9IChtYXRUZXhlbDEuZyAhPSAwLjApO1xuXG4gIGlmIChzaGFkb3dNb2RlICYmICFjYXN0U2hhZG93KSB7XG4gICAgcmV0dXJuOyAvLyB0aGlzIHNwaGVyZSBkb2VzIG5vdCBjYXN0IGEgc2hhZG93XG4gIH1cblxuICB2ZWM0IHNoVGV4ZWwxID0gdGV4ZWxGZXRjaCh1X3NjZW5lVGV4dHVyZURhdGEsIGl2ZWMyKGluZGV4ICsgMSwgMCksIDApO1xuICB2ZWM0IHNoVGV4ZWwyID0gdGV4ZWxGZXRjaCh1X3NjZW5lVGV4dHVyZURhdGEsIGl2ZWMyKGluZGV4ICsgMiwgMCksIDApO1xuXG4gIGludCBzaGFwZVR5cGUgPSBpbnQoc2hUZXhlbDAucik7XG5cbiAgc3dpdGNoIChzaGFwZVR5cGUpIHtcbiAgICBjYXNlIDE6IHtcblxuICAgICAgdmVjMyBjZW50ZXIgPSB2ZWMzKHNoVGV4ZWwwLmIsIHNoVGV4ZWwwLmEsIHNoVGV4ZWwxLnIpO1xuXG4gICAgICBmbG9hdCByYWRpdXMgPSBzaFRleGVsMi5nO1xuXG4jaWZkZWYgRF9TSU1QTElGSUVEXG4gICAgICBmbG9hdCByZWZyYWN0aW9uRmFjdG9yID0gMC4wO1xuI2Vsc2VcbiAgICAgIGZsb2F0IHJlZnJhY3Rpb25GYWN0b3IgPSBtYXRUZXhlbDEucjtcbiAgICAgIGlmIChyZWZyYWN0aW9uRmFjdG9yID4gMC4wKVxuICAgICAge1xuICAgICAgICAvLyBbcmVmcmFjdGlvbiBsb2dpY10gLT4gcHJpbWFyeSByYXlcblxuICAgICAgICB0bXBSYXkub3JpZ2luID0gcmF5Lm9yaWdpbiAtIGNlbnRlcjtcbiAgICAgICAgdG1wUmF5LmRpcmVjdGlvbiA9IHJheS5kaXJlY3Rpb247XG5cbiAgICAgICAgZmxvYXQgY3VyckRpc3RhbmNlMSA9IDAuMDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFpbnRlcnNlY3RTcGhlcmUodG1wUmF5LCByYWRpdXMsIGN1cnJEaXN0YW5jZTEsIG5vcm1hbCkgfHxcbiAgICAgICAgICAob3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA+IDAuMCAmJiBjdXJyRGlzdGFuY2UxID4gb3V0QmVzdFJlc3VsdC5kaXN0YW5jZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gW3JlZnJhY3Rpb24gbG9naWNdIC0+IHNlY29uZGFyeSByYXkgLT4gaW5zaWRlIHRoZSBzcGhlcmVcblxuICAgICAgICAvLyBoZXJlIHdlIHVzZSAxLjAxIGFzIGNvZWYgZm9yIHRoZSBuZXcgb3JpZ2luIC0+IGdldCBwcm9wZXJseSBpbnNpZGUgdGhlIHNwaGVyZVxuICAgICAgICB2ZWMzIG5ld09yaWdpbiA9IHJheS5vcmlnaW4gKyAoY3VyckRpc3RhbmNlMSAqIDEuMDEpICogcmF5LmRpcmVjdGlvbjtcblxuICAgICAgICB0bXBSYXkub3JpZ2luID0gKG5ld09yaWdpbiAtIGNlbnRlcik7XG4gICAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSByYXkuZGlyZWN0aW9uO1xuXG4gICAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSByZWZyYWN0KHRtcFJheS5kaXJlY3Rpb24sIC1ub3JtYWwsIEV0YSk7XG5cbiAgICAgICAgZmxvYXQgY3VyckRpc3RhbmNlMiA9IDAuMDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFpbnRlcnNlY3RTcGhlcmUodG1wUmF5LCByYWRpdXMsIGN1cnJEaXN0YW5jZTIsIG5vcm1hbCkgfHxcbiAgICAgICAgICAob3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA+IDAuMCAmJiBjdXJyRGlzdGFuY2UyID4gb3V0QmVzdFJlc3VsdC5kaXN0YW5jZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmVjNCBtYXRUZXhlbDAgPSB0ZXhlbEZldGNoKHVfbWF0ZXJpYWxzVGV4dHVyZURhdGEsIGl2ZWMyKG1hdGVyaWFsSW5kZXggKiAyICsgMCwgMCksIDApO1xuXG4gICAgICAgIGZsb2F0IHJlZmxlY3Rpb25GYWN0b3IgPSBtYXRUZXhlbDAuYTtcblxuICAgICAgICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICAgIG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPSBjdXJyRGlzdGFuY2UxICsgY3VyckRpc3RhbmNlMjtcbiAgICAgICAgb3V0QmVzdFJlc3VsdC5wb3NpdGlvbiA9IG5ld09yaWdpbiArIChjdXJyRGlzdGFuY2UyICogMS4wMSkgKiByYXkuZGlyZWN0aW9uO1xuICAgICAgICBvdXRCZXN0UmVzdWx0Lm5vcm1hbCA9IG5vcm1hbDtcbiAgICAgICAgb3V0QmVzdFJlc3VsdC5yZWZsZWN0aW9uRmFjdG9yID0gcmVmbGVjdGlvbkZhY3RvcjtcbiAgICAgICAgb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gcmVmcmFjdGlvbkZhY3RvcjtcblxuICAgICAgICBib29sIGxpZ2h0RW5hYmxlZCA9IChtYXRUZXhlbDEuYiAhPSAwLjApO1xuICAgICAgICBvdXRCZXN0UmVzdWx0LmxpZ2h0RW5hYmxlZCA9IGxpZ2h0RW5hYmxlZDtcblxuICAgICAgICB2ZWMzIGNvbG9yID0gbWF0VGV4ZWwwLnJnYjtcblxuICAgICAgICBvdXRCZXN0UmVzdWx0LmNvbG9yID0gdmVjNChjb2xvciwgMC41KTtcblxuICAgICAgICByZXR1cm47IC8vIGJ5cGFzcyBub24gcmVmcmFjdGl2ZSBsb2dpY1xuICAgICAgfVxuI2VuZGlmXG5cbiAgICAgIHZlYzQgb3JpZW50YXRpb24gPSB2ZWM0KFxuICAgICAgICBzaFRleGVsMS5nLFxuICAgICAgICBzaFRleGVsMS5iLFxuICAgICAgICBzaFRleGVsMS5hLFxuICAgICAgICBzaFRleGVsMi5yXG4gICAgICApO1xuICAgICAgbWF0MyBub3JtYWxNYXRyaXggPSBxdWF0X3RvX21hdDMob3JpZW50YXRpb24pO1xuICAgICAgbWF0MyBpbnZlcnNlTm9ybWFsTWF0cml4ID0gaW52ZXJzZShub3JtYWxNYXRyaXgpO1xuXG4gICAgICAvLyBjb252ZXJ0IHJheSBmcm9tIHdvcmxkIHNwYWNlIHRvIGJveCBzcGFjZVxuICAgICAgdG1wUmF5Lm9yaWdpbiA9IChpbnZlcnNlTm9ybWFsTWF0cml4ICogKHJheS5vcmlnaW4gLSBjZW50ZXIpKTtcbiAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSAoaW52ZXJzZU5vcm1hbE1hdHJpeCAqIHJheS5kaXJlY3Rpb24pO1xuXG4gICAgICBmbG9hdCBjdXJyRGlzdGFuY2UgPSAwLjA7XG4gICAgICBpZiAoXG4gICAgICAgICFpbnRlcnNlY3RTcGhlcmUodG1wUmF5LCByYWRpdXMsIGN1cnJEaXN0YW5jZSwgbm9ybWFsKSB8fFxuICAgICAgICAob3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA+IDAuMCAmJiBjdXJyRGlzdGFuY2UgPiBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gY29udmVydCBub3JtYWwgZnJvbSBib3ggc3BhY2UgdG8gd29ybGQgc3BhY2VcbiAgICAgIG5vcm1hbCA9IG5vcm1hbE1hdHJpeCAqIG5vcm1hbDtcblxuICAgICAgb3V0QmVzdFJlc3VsdC5oYXNIaXQgPSB0cnVlO1xuICAgICAgb3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA9IGN1cnJEaXN0YW5jZTtcbiAgICAgIG91dEJlc3RSZXN1bHQucG9zaXRpb24gPSByYXkub3JpZ2luICsgY3VyckRpc3RhbmNlICogcmF5LmRpcmVjdGlvbjtcbiAgICAgIG91dEJlc3RSZXN1bHQubm9ybWFsID0gbm9ybWFsO1xuICAgICAgb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wO1xuXG4gICAgICBib29sIGNoZXNzYm9hcmRNYXRlcmlhbEVuYWJsZWQgPSAobWF0VGV4ZWwxLmEgIT0gMC4wKTtcblxuICAgICAgdmVjNCBtYXRUZXhlbDAgPSB0ZXhlbEZldGNoKHVfbWF0ZXJpYWxzVGV4dHVyZURhdGEsIGl2ZWMyKG1hdGVyaWFsSW5kZXggKiAyICsgMCwgMCksIDApO1xuXG4gICAgICBpZiAoY2hlc3Nib2FyZE1hdGVyaWFsRW5hYmxlZClcbiAgICAgIHtcbiAgICAgICAgdmVjMyBsb2NhbFBvcyA9IHJheS5vcmlnaW4gKyBjdXJyRGlzdGFuY2UgKiByYXkuZGlyZWN0aW9uO1xuICAgICAgICB2ZWMzIHR4UG9zID0gaW52ZXJzZU5vcm1hbE1hdHJpeCAqIChsb2NhbFBvcyAtIGNlbnRlcik7XG5cbiAgICAgICAgLy8gY2hlc3Nib2FyZCBjb2xvciBlZmZlY3RcbiAgICAgICAgaWYgKChmcmFjdCh0eFBvcy54ICogMC45KSA+IDAuNSkgPT0gKGZyYWN0KHR4UG9zLnkgKiAwLjkpID4gMC41KSA9PSAoZnJhY3QodHhQb3MueiAqIDAuOSkgPiAwLjUpKVxuICAgICAgICB7XG5cbiAgICAgICAgICBpZiAoc2hhZG93TW9kZSlcbiAgICAgICAgICB7XG5cbi8vICNpZmRlZiBEX1NJTVBMSUZJRURcbi8vICAgICAgICAgICAgIG91dEJlc3RSZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbi8vICNlbHNlXG4gICAgICAgICAgICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IGZhbHNlOyAvLyBubyBzaGFkb3cgLT4gYWxsb3cgbGlnaHQgdG8gZ28gdGhyb3VnaFxuLy8gI2VuZGlmXG5cbiAgICAgICAgICAgIC8vIG91dEJlc3RSZXN1bHQuY29sb3IgPSB2ZWM0KDEuMCwgMS4wLCAwLjAsIDEuMCk7XG4gICAgICAgICAgICBvdXRCZXN0UmVzdWx0LnJlZmxlY3Rpb25GYWN0b3IgPSAwLjA7IC8vIG92ZXJyaWRlIHJlZmxlY3Rpb24gLT4gcGxhaW4gY29sb3JcbiAgICAgICAgICAgIG91dEJlc3RSZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IDAuMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZlYzMgY29sb3IgPSBtYXRUZXhlbDAucmdiO1xuXG4gICAgICAgICAgICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICAgICAgICBvdXRCZXN0UmVzdWx0LmNvbG9yID0gdmVjNChjb2xvciwgMS4wKTtcbiAgICAgICAgICAgIG91dEJlc3RSZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IDAuMDsgLy8gb3ZlcnJpZGUgcmVmbGVjdGlvbiAtPiBwbGFpbiBjb2xvclxuICAgICAgICAgICAgb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMS4wO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICAgICAgb3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA9IGN1cnJEaXN0YW5jZTtcbiAgICAgICAgICBvdXRCZXN0UmVzdWx0LnBvc2l0aW9uID0gcmF5Lm9yaWdpbiArIGN1cnJEaXN0YW5jZSAqIHJheS5kaXJlY3Rpb247XG4gICAgICAgICAgb3V0QmVzdFJlc3VsdC5ub3JtYWwgPSBub3JtYWw7XG4gICAgICAgICAgLy8gb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wO1xuXG5cbiAgICAgICAgICAvLyBibHVlL2dyZWVuLCBtYXRcbiAgICAgICAgICBvdXRCZXN0UmVzdWx0LmNvbG9yID0gdmVjNCgxLjAsIDEuMCwgMS4wLCAxLjApO1xuICAgICAgICAgIG91dEJlc3RSZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IDAuMDtcbiAgICAgICAgICBvdXRCZXN0UmVzdWx0LnJlZnJhY3Rpb25GYWN0b3IgPSAwLjA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgIHtcblxuICAgICAgICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICAgIG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPSBjdXJyRGlzdGFuY2U7XG4gICAgICAgIG91dEJlc3RSZXN1bHQucG9zaXRpb24gPSByYXkub3JpZ2luICsgY3VyckRpc3RhbmNlICogcmF5LmRpcmVjdGlvbjtcbiAgICAgICAgb3V0QmVzdFJlc3VsdC5ub3JtYWwgPSBub3JtYWw7XG4gICAgICAgIC8vIG91dEJlc3RSZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IDAuMDtcblxuICAgICAgICB2ZWMzIGNvbG9yID0gbWF0VGV4ZWwwLnJnYjtcblxuICAgICAgICBmbG9hdCByZWZsZWN0aW9uRmFjdG9yID0gbWF0VGV4ZWwwLmE7XG5cbiAgICAgICAgb3V0QmVzdFJlc3VsdC5jb2xvciA9IHZlYzQoY29sb3IsIDAuNSk7XG4gICAgICAgIG91dEJlc3RSZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IHJlZmxlY3Rpb25GYWN0b3I7XG4gICAgICAgIG91dEJlc3RSZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IHJlZnJhY3Rpb25GYWN0b3I7XG4gICAgICB9XG5cbiAgICAgIGJvb2wgbGlnaHRFbmFibGVkID0gKG1hdFRleGVsMS5iICE9IDAuMCk7XG4gICAgICBvdXRCZXN0UmVzdWx0LmxpZ2h0RW5hYmxlZCA9IGxpZ2h0RW5hYmxlZDtcblxuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjYXNlIDI6IHtcblxuXG4gICAgICB0bXBSYXkub3JpZ2luID0gcmF5Lm9yaWdpbjtcbiAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSByYXkuZGlyZWN0aW9uO1xuXG4gICAgICB2ZWMzIGNlbnRlciA9IHZlYzMoc2hUZXhlbDAuYiwgc2hUZXhlbDAuYSwgc2hUZXhlbDEucik7XG4gICAgICB2ZWM0IG9yaWVudGF0aW9uID0gdmVjNChcbiAgICAgICAgc2hUZXhlbDEuZyxcbiAgICAgICAgc2hUZXhlbDEuYixcbiAgICAgICAgc2hUZXhlbDEuYSxcbiAgICAgICAgc2hUZXhlbDIuclxuICAgICAgKTtcblxuICAgICAgdmVjMyBib3hTaXplID0gc2hUZXhlbDIuZ2JhO1xuXG4gICAgICBmbG9hdCByZWZyYWN0aW9uRmFjdG9yID0gbWF0VGV4ZWwxLnI7XG4gICAgICBpZiAocmVmcmFjdGlvbkZhY3RvciA+IDAuMClcbiAgICAgIHtcblxuICAgICAgICAvLyByZWZyYWN0aW9uIGxvZ2ljXG5cbiAgICAgICAgLy8gY29udmVydCByYXkgZnJvbSB3b3JsZCBzcGFjZSB0byBzcGhlcmUgc3BhY2VcbiAgICAgICAgbWF0MyBub3JtYWxNYXRyaXggPSBxdWF0X3RvX21hdDMob3JpZW50YXRpb24pO1xuICAgICAgICBtYXQzIGludmVyc2VOb3JtYWxNYXRyaXggPSBpbnZlcnNlKG5vcm1hbE1hdHJpeCk7XG5cbiAgICAgICAgdG1wUmF5Lm9yaWdpbiA9IChpbnZlcnNlTm9ybWFsTWF0cml4ICogKHJheS5vcmlnaW4gLSBjZW50ZXIpKTtcbiAgICAgICAgdG1wUmF5LmRpcmVjdGlvbiA9IChpbnZlcnNlTm9ybWFsTWF0cml4ICogcmF5LmRpcmVjdGlvbik7XG5cbiAgICAgICAgZmxvYXQgY3VyckRpc3RhbmNlMSA9IDAuMDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFpbnRlcnNlY3RCb3godG1wUmF5LCBib3hTaXplLCBjdXJyRGlzdGFuY2UxLCBub3JtYWwpIHx8XG4gICAgICAgICAgKG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPiAwLjAgJiYgY3VyckRpc3RhbmNlMSA+IG91dEJlc3RSZXN1bHQuZGlzdGFuY2UpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vdyBjb2xsaWRlIHdpdGggdGhlIGluc2lkZSBvZiB0aGUgYm94XG5cbiAgICAgICAgdmVjMyBuZXdPcmlnaW4gPSByYXkub3JpZ2luICsgKGN1cnJEaXN0YW5jZTEgKiAxLjAwMCkgKiByYXkuZGlyZWN0aW9uO1xuXG4gICAgICAgIHRtcFJheS5vcmlnaW4gPSBpbnZlcnNlTm9ybWFsTWF0cml4ICogKG5ld09yaWdpbiAtIGNlbnRlcik7XG4gICAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSByZWZyYWN0KHRtcFJheS5kaXJlY3Rpb24sIG5vcm1hbCwgRXRhKTtcblxuICAgICAgICBmbG9hdCBjdXJyRGlzdGFuY2UyID0gMC4wO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIWludGVyc2VjdEJveCh0bXBSYXksIGJveFNpemUsIGN1cnJEaXN0YW5jZTIsIG5vcm1hbCkgfHxcbiAgICAgICAgICAob3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA+IDAuMCAmJiBjdXJyRGlzdGFuY2UyID4gb3V0QmVzdFJlc3VsdC5kaXN0YW5jZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29udmVydCBub3JtYWwgZnJvbSBib3ggc3BhY2UgdG8gd29ybGQgc3BhY2VcbiAgICAgICAgbm9ybWFsID0gbm9ybWFsTWF0cml4ICogbm9ybWFsO1xuXG4gICAgICAgIHZlYzQgbWF0VGV4ZWwwID0gdGV4ZWxGZXRjaCh1X21hdGVyaWFsc1RleHR1cmVEYXRhLCBpdmVjMihtYXRlcmlhbEluZGV4ICogMiArIDAsIDApLCAwKTtcblxuICAgICAgICBmbG9hdCByZWZsZWN0aW9uRmFjdG9yID0gbWF0VGV4ZWwwLmE7XG5cbiAgICAgICAgb3V0QmVzdFJlc3VsdC5oYXNIaXQgPSB0cnVlO1xuICAgICAgICBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID0gY3VyckRpc3RhbmNlMSArIGN1cnJEaXN0YW5jZTI7XG4gICAgICAgIG91dEJlc3RSZXN1bHQucG9zaXRpb24gPSBuZXdPcmlnaW4gKyAoY3VyckRpc3RhbmNlMiAqIDEuMDAwKSAqIHJheS5kaXJlY3Rpb247XG4gICAgICAgIG91dEJlc3RSZXN1bHQubm9ybWFsID0gbm9ybWFsO1xuICAgICAgICBvdXRCZXN0UmVzdWx0LnJlZmxlY3Rpb25GYWN0b3IgPSByZWZsZWN0aW9uRmFjdG9yO1xuICAgICAgICBvdXRCZXN0UmVzdWx0LnJlZnJhY3Rpb25GYWN0b3IgPSByZWZyYWN0aW9uRmFjdG9yO1xuXG4gICAgICAgIGJvb2wgbGlnaHRFbmFibGVkID0gKG1hdFRleGVsMS5iICE9IDAuMCk7XG4gICAgICAgIG91dEJlc3RSZXN1bHQubGlnaHRFbmFibGVkID0gbGlnaHRFbmFibGVkO1xuXG4gICAgICAgIHZlYzMgY29sb3IgPSBtYXRUZXhlbDAucmdiO1xuICAgICAgICBvdXRCZXN0UmVzdWx0LmNvbG9yID0gdmVjNChjb2xvciwgMC41KTtcblxuICAgICAgICByZXR1cm47IC8vIGJ5cGFzcyBub24gcmVmcmFjdGl2ZSBsb2dpY1xuICAgICAgfVxuXG4gICAgICAvLyBjb252ZXJ0IHJheSBmcm9tIHdvcmxkIHNwYWNlIHRvIHNwaGVyZSBzcGFjZVxuICAgICAgbWF0MyBub3JtYWxNYXRyaXggPSBxdWF0X3RvX21hdDMob3JpZW50YXRpb24pO1xuICAgICAgbWF0MyBpbnZlcnNlTm9ybWFsTWF0cml4ID0gaW52ZXJzZShub3JtYWxNYXRyaXgpO1xuICAgICAgdG1wUmF5Lm9yaWdpbiA9IChpbnZlcnNlTm9ybWFsTWF0cml4ICogKHJheS5vcmlnaW4gLSBjZW50ZXIpKTtcbiAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSAoaW52ZXJzZU5vcm1hbE1hdHJpeCAqIHRtcFJheS5kaXJlY3Rpb24pO1xuXG4gICAgICBmbG9hdCBjdXJyRGlzdGFuY2UgPSAwLjA7XG4gICAgICBpZiAoXG4gICAgICAgICFpbnRlcnNlY3RCb3godG1wUmF5LCBib3hTaXplLCBjdXJyRGlzdGFuY2UsIG5vcm1hbCkgfHxcbiAgICAgICAgKG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPiAwLjAgJiYgY3VyckRpc3RhbmNlID4gb3V0QmVzdFJlc3VsdC5kaXN0YW5jZSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnZlcnQgbm9ybWFsIGZyb20gYm94IHNwYWNlIHRvIHdvcmxkIHNwYWNlXG4gICAgICBub3JtYWwgPSBub3JtYWxNYXRyaXggKiBub3JtYWw7XG5cbiAgICAgIG91dEJlc3RSZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgIG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPSBjdXJyRGlzdGFuY2U7XG4gICAgICBvdXRCZXN0UmVzdWx0LnBvc2l0aW9uID0gcmF5Lm9yaWdpbiArIGN1cnJEaXN0YW5jZSAqIHJheS5kaXJlY3Rpb247XG4gICAgICBvdXRCZXN0UmVzdWx0Lm5vcm1hbCA9IG5vcm1hbDtcbiAgICAgIG91dEJlc3RSZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IDAuMDtcblxuICAgICAgYm9vbCBjaGVzc2JvYXJkTWF0ZXJpYWxFbmFibGVkID0gKG1hdFRleGVsMS5hICE9IDAuMCk7XG5cbiAgICAgIHZlYzQgbWF0VGV4ZWwwID0gdGV4ZWxGZXRjaCh1X21hdGVyaWFsc1RleHR1cmVEYXRhLCBpdmVjMihtYXRlcmlhbEluZGV4ICogMiArIDAsIDApLCAwKTtcblxuICAgICAgaWYgKGNoZXNzYm9hcmRNYXRlcmlhbEVuYWJsZWQpXG4gICAgICB7XG4gICAgICAgIG91dEJlc3RSZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IDAuNTtcbiAgICAgICAgb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wOyAvLyBUT0RPXG5cbiAgICAgICAgLy8gdGhlIG11bHRpcGxpY2F0aW9uIGJ5IDAuOTk5IHdpbGwgcmVtb3ZlIGdyYXBoaWMgYXJ0aWZhY3RcbiAgICAgICAgdmVjMyB0eFBvcyA9IChpbnZlcnNlTm9ybWFsTWF0cml4ICogMC45OTkpICogKGNlbnRlciAtIG91dEJlc3RSZXN1bHQucG9zaXRpb24pO1xuXG4gICAgICAgIC8vIGNoZXNzYm9hcmQgY29sb3IgZWZmZWN0XG4gICAgICAgIC8vIGlmIChmcmFjdCh0eFBvcy54ICogMC4yKSA+IDAuNSA9PSBmcmFjdCh0eFBvcy56ICogMC4yKSA+IDAuNSA9PSBmcmFjdCh0eFBvcy55ICogMC4yKSA+IDAuNSlcbiAgICAgICAgaWYgKGZyYWN0KHR4UG9zLnggKiAwLjkpID4gMC41ID09IGZyYWN0KHR4UG9zLnkgKiAwLjkpID4gMC41ID09IGZyYWN0KHR4UG9zLnogKiAwLjkpID4gMC41KVxuICAgICAgICB7XG4gICAgICAgICAgb3V0QmVzdFJlc3VsdC5jb2xvciA9IHZlYzQoMS4wKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgIHtcbiAgICAgICAgICBvdXRCZXN0UmVzdWx0LmNvbG9yID0gdmVjNCgwLjAsIDAuNCwgMC40NSwgMS4wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZVxuICAgICAge1xuICAgICAgICB2ZWMzIGNvbG9yID0gbWF0VGV4ZWwwLnJnYjtcblxuICAgICAgICBmbG9hdCByZWZsZWN0aW9uRmFjdG9yID0gbWF0VGV4ZWwwLmE7XG5cbiAgICAgICAgb3V0QmVzdFJlc3VsdC5jb2xvciA9IHZlYzQoY29sb3IsIDEuMCk7XG4gICAgICAgIG91dEJlc3RSZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IHJlZmxlY3Rpb25GYWN0b3I7XG4gICAgICAgIG91dEJlc3RSZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IHJlZnJhY3Rpb25GYWN0b3I7XG4gICAgICB9XG5cbiAgICAgIGJvb2wgbGlnaHRFbmFibGVkID0gKG1hdFRleGVsMS5iICE9IDAuMCk7XG4gICAgICBvdXRCZXN0UmVzdWx0LmxpZ2h0RW5hYmxlZCA9IGxpZ2h0RW5hYmxlZDtcblxuXG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAzOiB7XG5cblxuXG4gICAgICB0bXBSYXkub3JpZ2luID0gcmF5Lm9yaWdpbjtcbiAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSByYXkuZGlyZWN0aW9uO1xuXG4gICAgICB2ZWMzIHYwID0gdmVjMyhzaFRleGVsMC5iLCBzaFRleGVsMC5hLCBzaFRleGVsMS5yKTtcbiAgICAgIHZlYzMgdjEgPSBzaFRleGVsMS5nYmE7XG4gICAgICB2ZWMzIHYyID0gc2hUZXhlbDIucmdiO1xuXG4gICAgICBmbG9hdCBjdXJyRGlzdGFuY2UgPSAwLjA7XG4gICAgICBpZiAoXG4gICAgICAgICFpbnRlcnNlY3RUcmlhbmdsZSh0bXBSYXksIHYwLCB2MSwgdjIsIGN1cnJEaXN0YW5jZSwgbm9ybWFsKSB8fFxuICAgICAgICAob3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA+IDAuMCAmJiBjdXJyRGlzdGFuY2UgPiBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmVjNCBtYXRUZXhlbDAgPSB0ZXhlbEZldGNoKHVfbWF0ZXJpYWxzVGV4dHVyZURhdGEsIGl2ZWMyKG1hdGVyaWFsSW5kZXggKiAyICsgMCwgMCksIDApO1xuXG4gICAgICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID0gY3VyckRpc3RhbmNlO1xuICAgICAgb3V0QmVzdFJlc3VsdC5wb3NpdGlvbiA9IHJheS5vcmlnaW4gKyBjdXJyRGlzdGFuY2UgKiByYXkuZGlyZWN0aW9uO1xuICAgICAgb3V0QmVzdFJlc3VsdC5ub3JtYWwgPSBub3JtYWw7XG5cbiAgICAgIG91dEJlc3RSZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IDAuMDsgLy8gVE9ET1xuXG4gICAgICB2ZWMzIGNvbG9yID0gbWF0VGV4ZWwwLnJnYjtcblxuICAgICAgZmxvYXQgcmVmbGVjdGlvbkZhY3RvciA9IG1hdFRleGVsMC5hO1xuXG4gICAgICBvdXRCZXN0UmVzdWx0LmNvbG9yID0gdmVjNChjb2xvciwgMS4wKTtcbiAgICAgIG91dEJlc3RSZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IHJlZmxlY3Rpb25GYWN0b3I7XG5cbiAgICAgIGJvb2wgbGlnaHRFbmFibGVkID0gKG1hdFRleGVsMS5iICE9IDAuMCk7XG4gICAgICBvdXRCZXN0UmVzdWx0LmxpZ2h0RW5hYmxlZCA9IGxpZ2h0RW5hYmxlZDtcblxuXG5cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG5cbn1cblxuXG5ib29sIHJheUludGVyc2VjdEJ2aEFBQkIoUmF5VmFsdWVzIHJheSwgdmVjMyBidmhNaW4sIHZlYzMgYnZoTWF4KVxue1xuICB2ZWMzIHZhbEEgPSAoYnZoTWluIC0gcmF5Lm9yaWdpbikgLyByYXkuZGlyZWN0aW9uO1xuICB2ZWMzIHZhbEIgPSAoYnZoTWF4IC0gcmF5Lm9yaWdpbikgLyByYXkuZGlyZWN0aW9uO1xuICB2ZWMzIG1pblZhbCA9IG1pbih2YWxBLCB2YWxCKTtcbiAgdmVjMyBtYXhWYWwgPSBtYXgodmFsQSwgdmFsQik7XG5cbiAgZmxvYXQgbWF4X21pblZhbCA9IG1heChtaW5WYWwueCwgbWF4KG1pblZhbC55LCBtaW5WYWwueikpO1xuICBmbG9hdCBtaW5fbWF4VmFsID0gbWluKG1heFZhbC54LCBtaW4obWF4VmFsLnksIG1heFZhbC56KSk7XG5cbiAgcmV0dXJuIG1heF9taW5WYWwgPCBtaW5fbWF4VmFsO1xufVxuXG5ib29sIGludGVyc2VjdFNjZW5lKFJheVZhbHVlcyByYXksIG91dCBSYXlSZXN1bHQgb3V0QmVzdFJlc3VsdCwgYm9vbCBzaGFkb3dNb2RlKVxue1xuICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IGZhbHNlO1xuICBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID0gLTEuMDtcblxuICBpZiAodV9zY2VuZVRleHR1cmVTaXplIDw9IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgdV90b3RhbFNoYXBlczsgaW5kZXggKz0gMykge1xuICAvLyAgIGludGVyc2VjdFNjZW5lT25lU2hhcGUoaW5kZXgsIHJheSwgb3V0QmVzdFJlc3VsdCwgc2hhZG93TW9kZSk7XG4gIC8vIH1cblxuXG4gIC8qKi9cbiAgaWYgKHVfdG90YWxTaGFwZXMgPiAwKSB7XG5cbiAgICBjb25zdCBpbnQgbWF4QnZoU3RhY2sgPSAxNjtcbiAgICBpbnQgYnZoU3RhY2tbbWF4QnZoU3RhY2tdO1xuXG4gICAgYnZoU3RhY2tbMF0gPSAwOyAvLyBCVkggcm9vdCBub2RlIGluZGV4XG4gICAgaW50IHRvcCA9IDA7XG5cbiAgICB3aGlsZSAodG9wID49IDApIHtcblxuICAgICAgLy8gcG9wIHN0YWNrXG4gICAgICBpbnQgYnZfaWR4ID0gYnZoU3RhY2tbdG9wXTtcbiAgICAgIHRvcCAtPSAxO1xuXG4gICAgICB2ZWM0IHJvb3ROb2RlVGV4ZWwwID0gdGV4ZWxGZXRjaCh1X2J2aERhdGFUZXh0dXJlLCBpdmVjMihidl9pZHggKiAzICsgMCwgMCksIDApO1xuICAgICAgdmVjNCByb290Tm9kZVRleGVsMSA9IHRleGVsRmV0Y2godV9idmhEYXRhVGV4dHVyZSwgaXZlYzIoYnZfaWR4ICogMyArIDEsIDApLCAwKTtcblxuICAgICAgdmVjMyBhYWJiTWluID0gcm9vdE5vZGVUZXhlbDAucmdiO1xuICAgICAgdmVjMyBhYWJiTWF4ID0gdmVjMyhyb290Tm9kZVRleGVsMC5hLCByb290Tm9kZVRleGVsMS5yLCByb290Tm9kZVRleGVsMS5nKTtcblxuICAgICAgaWYgKCFyYXlJbnRlcnNlY3RCdmhBQUJCKHJheSwgYWFiYk1pbiwgYWFiYk1heCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vXG5cbiAgICAgIGludCBsZWZ0Tm9kZUluZGV4ID0gaW50KHJvb3ROb2RlVGV4ZWwxLmIpO1xuICAgICAgaWYgKGxlZnROb2RlSW5kZXggPj0gMCkge1xuICAgICAgICAvLyBwdXNoIGxlZnQgYnZoIG5vZGUgaW5kZXggb24gdG8gdGhlIHN0YWNrXG4gICAgICAgIHRvcCArPSAxO1xuICAgICAgICBidmhTdGFja1t0b3BdID0gbGVmdE5vZGVJbmRleDtcbiAgICAgIH1cblxuICAgICAgaW50IHJpZ2h0Tm9kZUluZGV4ID0gaW50KHJvb3ROb2RlVGV4ZWwxLmEpO1xuICAgICAgaWYgKHJpZ2h0Tm9kZUluZGV4ID49IDApIHtcbiAgICAgICAgLy8gcHVzaCByaWdodCBidmggbm9kZSBpbmRleCBvbiB0byB0aGUgc3RhY2tcbiAgICAgICAgdG9wICs9IDE7XG4gICAgICAgIGJ2aFN0YWNrW3RvcF0gPSByaWdodE5vZGVJbmRleDtcbiAgICAgIH1cblxuICAgICAgLy9cblxuICAgICAgdmVjNCByb290Tm9kZVRleGVsMiA9IHRleGVsRmV0Y2godV9idmhEYXRhVGV4dHVyZSwgaXZlYzIoYnZfaWR4ICogMyArIDIsIDApLCAwKTtcblxuICAgICAgaW50IGxlZnRMRWFmSW5kZXggPSBpbnQocm9vdE5vZGVUZXhlbDIucik7XG4gICAgICBpZiAobGVmdExFYWZJbmRleCA+PSAwKSB7XG4gICAgICAgIGludGVyc2VjdFNjZW5lT25lU2hhcGUobGVmdExFYWZJbmRleCAqIDMsIHJheSwgb3V0QmVzdFJlc3VsdCwgc2hhZG93TW9kZSk7XG4gICAgICB9XG5cbiAgICAgIGludCByaWdodExlYWZJbmRleCA9IGludChyb290Tm9kZVRleGVsMi5nKTtcbiAgICAgIGlmIChyaWdodExlYWZJbmRleCA+PSAwKSB7XG4gICAgICAgIGludGVyc2VjdFNjZW5lT25lU2hhcGUocmlnaHRMZWFmSW5kZXggKiAzLCByYXksIG91dEJlc3RSZXN1bHQsIHNoYWRvd01vZGUpO1xuICAgICAgfVxuXG4gICAgICAvL1xuXG4gICAgfVxuXG4gIH1cbiAgLy8qL1xuXG4jaWZkZWYgRF9TSU1QTElGSUVEXG4gIG91dEJlc3RSZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IDAuMDtcbiAgb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wO1xuI2VuZGlmXG5cbiAgcmV0dXJuIG91dEJlc3RSZXN1bHQuaGFzSGl0O1xufVxuXG5mbG9hdCBsaWdodEF0KHZlYzMgaW1wYWN0UG9zaXRpb24sIHZlYzMgaW1wYWN0Tm9ybWFsLCB2ZWMzIHZpZXdlcilcbntcbiAgZmxvYXQgYmVzdEludGVuc2l0eSA9IDAuMDtcblxuICBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgdV9zdW5MaWdodHNTdG9wOyBpbmRleCArPSAxKVxuICB7XG4gICAgdmVjNCB0ZXhlbDAgPSB0ZXhlbEZldGNoKHVfbGlnaHRzVGV4dHVyZURhdGEsIGl2ZWMyKGluZGV4ICsgMCwgMCksIDApO1xuICAgIHZlYzMgbGlnaHREaXIgPSB0ZXhlbDAucmdiO1xuICAgIGZsb2F0IGxvY2FsSW50ZW5zaXR5ID0gdGV4ZWwwLmE7XG5cbiAgICBmbG9hdCBjb2VmID0gbG9jYWxJbnRlbnNpdHk7XG4gICAgbGlnaHREaXIgPSBub3JtYWxpemUobGlnaHREaXIpO1xuXG4gICAgLy8gaXMgdGhlIHN1biBsaWdodCBibG9ja2VkIGJ5IGFuIG9iamVjdD9cbiAgICBSYXlSZXN1bHQgcmVzdWx0O1xuICAgIGlmIChpbnRlcnNlY3RTY2VuZShSYXlWYWx1ZXMoaW1wYWN0UG9zaXRpb24sIGxpZ2h0RGlyKSwgcmVzdWx0LCB0cnVlKSkge1xuICAgICAgLy8gbGlnaHQgcmF5IGlzIGJsb2NrZWQsIHNraXAgdGhpcyBsaWdodFxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG5cbiAgICBmbG9hdCBpbnRlbnNpdHkgPSAwLjA7XG4gICAgdmVjMyByZWZsZWN0aW9uRmFjdG9yID0gcmVmbGVjdCgtbGlnaHREaXIsIGltcGFjdE5vcm1hbCk7XG4gICAgaW50ZW5zaXR5ICs9IDAuNiAqIHBvdyhtYXgoZG90KHJlZmxlY3Rpb25GYWN0b3IsIHZpZXdlciksIDAuMCksIDMwLjApO1xuICAgIGludGVuc2l0eSArPSAxLjAgKiBkb3QobGlnaHREaXIsIGltcGFjdE5vcm1hbCk7XG5cbiAgICBpbnRlbnNpdHkgKj0gY29lZjtcblxuICAgIGlmIChiZXN0SW50ZW5zaXR5IDwgaW50ZW5zaXR5KSB7XG4gICAgICBiZXN0SW50ZW5zaXR5ID0gaW50ZW5zaXR5O1xuICAgIH1cbiAgfVxuXG4gIGZvciAoaW50IGluZGV4ID0gdV9zdW5MaWdodHNTdG9wOyBpbmRleCA8IHVfc3BvdExpZ2h0c1N0b3A7IGluZGV4ICs9IDIpXG4gIHtcbiAgICB2ZWMzIGxpZ2h0RGlyID0gdmVjMygxLjApO1xuICAgIGZsb2F0IGNvZWYgPSAxLjA7XG5cbiAgICAvLyBzcG90IGxpZ2h0XG5cbiAgICB2ZWM0IHRleGVsMCA9IHRleGVsRmV0Y2godV9saWdodHNUZXh0dXJlRGF0YSwgaXZlYzIoaW5kZXggKyAwLCAwKSwgMCk7XG4gICAgdmVjNCB0ZXhlbDEgPSB0ZXhlbEZldGNoKHVfbGlnaHRzVGV4dHVyZURhdGEsIGl2ZWMyKGluZGV4ICsgMSwgMCksIDApO1xuICAgIHZlYzMgbGlnaHRQb3MgPSB0ZXhlbDAucmdiO1xuICAgIGZsb2F0IGxpZ2h0UmFkaXVzID0gdGV4ZWwwLmE7XG4gICAgZmxvYXQgbG9jYWxJbnRlbnNpdHkgPSB0ZXhlbDEucjtcblxuICAgIHZlYzMgbGlnaHRUb0ltcGFjdFZlYzMgPSBsaWdodFBvcyAtIGltcGFjdFBvc2l0aW9uO1xuXG4gICAgLy8gaXMgaXQgb3V0IG9mIHRoZSBzcG90IGxpZ2h0IGVmZmVjdCByYWRpdXM/XG4gICAgZmxvYXQgbGlnaHRUb0ltcGFjdERpc3RhbmNlID0gbGVuZ3RoKGxpZ2h0VG9JbXBhY3RWZWMzKTtcbiAgICBpZiAobGlnaHRUb0ltcGFjdERpc3RhbmNlID4gbGlnaHRSYWRpdXMpIHtcbiAgICAgIC8vIG91dCBvZiByYW5nZSwgZG8gbm90IGFwcGx5IHRoaXMgbGlnaHRcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGxpZ2h0RGlyLnggPSBsaWdodFRvSW1wYWN0VmVjMy54IC8gbGlnaHRUb0ltcGFjdERpc3RhbmNlOyAvLyBub3JtYWxpemVcbiAgICBsaWdodERpci55ID0gbGlnaHRUb0ltcGFjdFZlYzMueSAvIGxpZ2h0VG9JbXBhY3REaXN0YW5jZTsgLy8gbm9ybWFsaXplXG4gICAgbGlnaHREaXIueiA9IGxpZ2h0VG9JbXBhY3RWZWMzLnogLyBsaWdodFRvSW1wYWN0RGlzdGFuY2U7IC8vIG5vcm1hbGl6ZVxuXG4gICAgY29lZiA9IGxvY2FsSW50ZW5zaXR5ICogKDEuMCAtIGxpZ2h0VG9JbXBhY3REaXN0YW5jZSAvIGxpZ2h0UmFkaXVzKTtcblxuICAgIFJheVJlc3VsdCByZXN1bHQ7XG4gICAgaWYgKFxuICAgICAgLy8gaXMgdGhlIHNwb3QgbGlnaHQgYmxvY2tlZCBieSBhbiBvYmplY3Q/XG4gICAgICBpbnRlcnNlY3RTY2VuZShSYXlWYWx1ZXMoaW1wYWN0UG9zaXRpb24sIGxpZ2h0RGlyKSwgcmVzdWx0LCB0cnVlKSAmJlxuICAgICAgLy8gaXMgdGhlIGJsb2NraW5nIG9iamVjdCBpbiByYW5nZSBvZiB0aGUgc3BvdCBsaWdodCBlZmZlY3QgcmFkaXVzP1xuICAgICAgcmVzdWx0LmRpc3RhbmNlIDwgbGlnaHRUb0ltcGFjdERpc3RhbmNlXG4gICAgKSB7XG4gICAgICAvLyBsaWdodCByYXkgaXMgYmxvY2tlZCwgc2tpcCB0aGlzIGxpZ2h0XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cblxuICAgIGZsb2F0IGludGVuc2l0eSA9IDAuMDtcbiAgICB2ZWMzIHJlZmxlY3Rpb25GYWN0b3IgPSByZWZsZWN0KC1saWdodERpciwgaW1wYWN0Tm9ybWFsKTtcbiAgICBpbnRlbnNpdHkgKz0gMC42ICogcG93KG1heChkb3QocmVmbGVjdGlvbkZhY3Rvciwgdmlld2VyKSwgMC4wKSwgMzAuMCk7XG4gICAgaW50ZW5zaXR5ICs9IDEuMCAqIGRvdChsaWdodERpciwgaW1wYWN0Tm9ybWFsKTtcblxuICAgIGludGVuc2l0eSAqPSBjb2VmO1xuXG4gICAgaWYgKGJlc3RJbnRlbnNpdHkgPCBpbnRlbnNpdHkpIHtcbiAgICAgIGJlc3RJbnRlbnNpdHkgPSBpbnRlbnNpdHk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1heChnX2FtYmlhbnRMaWdodCwgYmVzdEludGVuc2l0eSk7XG59XG5cbnZvaWQgbWFpbigpXG57XG4gIC8vXG4gIC8vXG4gIC8vIGluaXRpYWwgcmF5XG5cbiAgdmVjMyByYXlEaXIgPSBub3JtYWxpemUodl9wb3NpdGlvbiAtIHVfY2FtZXJhRXllKTsgLy8gY2FtZXJhIGRpcmVjdGlvblxuICB2ZWMzIGZpbmFsUGl4ZWxDb2xvciA9IGdfYmFja2dyb3VuZENvbG9yO1xuXG4jaWZkZWYgRF9TSU1QTElGSUVEXG4gIGNvbnN0IGludCBtYXhTdGFjayA9IDE7XG4jZWxzZVxuICBjb25zdCBpbnQgbWF4U3RhY2sgPSA0O1xuI2VuZGlmXG4gIFN0YWNrRGF0YSBfc3RhY2tbbWF4U3RhY2tdO1xuXG4gIC8vIGluaXRpYWxpemUgc3RhY2tcbiAgZm9yIChpbnQgaWkgPSAwOyBpaSA8IG1heFN0YWNrOyArK2lpKVxuICB7XG4gICAgX3N0YWNrW2lpXS51c2VkID0gZmFsc2U7XG4gICAgX3N0YWNrW2lpXS5yZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IDAuMDtcbiAgICBfc3RhY2tbaWldLnJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wO1xuICAgIF9zdGFja1tpaV0ucmVzdWx0LmxpZ2h0RW5hYmxlZCA9IGZhbHNlO1xuICAgIF9zdGFja1tpaV0ucmVmbGVjdGlvbkluZGV4ID0gLTE7XG4gICAgX3N0YWNrW2lpXS5yZWZyYWN0aW9uSW5kZXggPSAtMTtcbiAgfVxuXG4gIC8vIGluaXRpYWxpemUgZmlyc3Qgc3RhY2sgZWxlbWVudFxuICBfc3RhY2tbMF0udXNlZCA9IHRydWU7XG4gIF9zdGFja1swXS5yYXkgPSBSYXlWYWx1ZXModV9jYW1lcmFFeWUsIHJheURpcik7XG4gIF9zdGFja1swXS5yZXN1bHQucG9zaXRpb24gPSB1X2NhbWVyYUV5ZTtcbiNpZmRlZiBEX1NJTVBMSUZJRURcbiAgX3N0YWNrWzBdLnJlc3VsdC5yZWZsZWN0aW9uRmFjdG9yID0gMC4wO1xuICBfc3RhY2tbMF0ucmVzdWx0LnJlZnJhY3Rpb25GYWN0b3IgPSAwLjA7XG4jZWxzZVxuICBfc3RhY2tbMF0ucmVzdWx0LnJlZmxlY3Rpb25GYWN0b3IgPSAxLjA7XG4gIF9zdGFja1swXS5yZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IDEuMDtcbiNlbmRpZlxuICBfc3RhY2tbMF0ucmVzdWx0LmxpZ2h0RW5hYmxlZCA9IHRydWU7XG4gIF9zdGFja1swXS5yZWZsZWN0aW9uSW5kZXggPSAtMTtcbiAgX3N0YWNrWzBdLnJlZnJhY3Rpb25JbmRleCA9IC0xO1xuXG4gIGludCBzdGFja0luZGV4ID0gMDtcblxuICBmb3IgKGludCBpaSA9IDA7IGlpIDwgbWF4U3RhY2s7ICsraWkpXG4gIHtcbiAgICAvLyBpbnRlcnNlY3Qgb2JqZWN0XG4gICAgLy8gaWYgcmVmbGVjdGlvbi9yZWZyYWN0aW9uIHB1c2ggdG8gc3RhY2sgJiBzZXQgaW5kZXhcbiAgICAvLyByZXBlYXRcblxuICAgIGlmICghX3N0YWNrW2lpXS51c2VkKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBfc3RhY2tbaWldLnJlc3VsdC5oYXNIaXQgPSBpbnRlcnNlY3RTY2VuZShcbiAgICAgIF9zdGFja1tpaV0ucmF5LFxuICAgICAgX3N0YWNrW2lpXS5yZXN1bHQsXG4gICAgICBmYWxzZVxuICAgICk7XG5cbiAgICBpZiAoIV9zdGFja1tpaV0ucmVzdWx0Lmhhc0hpdClcbiAgICB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBmbG9hdCBsaWdodEludGVuc2l0eSA9IDEuMDtcblxuICAgIGlmIChfc3RhY2tbaWldLnJlc3VsdC5saWdodEVuYWJsZWQpXG4gICAge1xuICAgICAgbGlnaHRJbnRlbnNpdHkgPSBsaWdodEF0KFxuICAgICAgICBfc3RhY2tbaWldLnJlc3VsdC5wb3NpdGlvbixcbiAgICAgICAgX3N0YWNrW2lpXS5yZXN1bHQubm9ybWFsLFxuICAgICAgICAtX3N0YWNrW2lpXS5yYXkuZGlyZWN0aW9uXG4gICAgICApO1xuICAgIH1cblxuICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiAqPSBsaWdodEludGVuc2l0eTtcblxuICAgIGlmIChfc3RhY2tbaWldLnJlc3VsdC5saWdodEVuYWJsZWQgJiYgbGlnaHRJbnRlbnNpdHkgPD0gMC4wKVxuICAgIHtcbiAgICAgIC8vIG5vdCBsaXRcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIHJlZmxlY3Rpb24vcmVmcmFjdGlvbiBoZXJlXG5cbiAgICBpZiAoc3RhY2tJbmRleCArIDEgPj0gbWF4U3RhY2spXG4gICAge1xuICAgICAgLy8gbm8gbW9yZSBzdGFjayBzcGFjZSBsZWZ0XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoX3N0YWNrW2lpXS5yZXN1bHQucmVmcmFjdGlvbkZhY3RvciA+IDAuMClcbiAgICB7XG4gICAgICAvLyBwdXNoIHJlZnJhY3Rpb24gdG8gdGhlIHN0YWNrXG4gICAgICBzdGFja0luZGV4ICs9IDE7XG5cbiAgICAgIF9zdGFja1tzdGFja0luZGV4XS51c2VkID0gdHJ1ZTtcbiAgICAgIF9zdGFja1tzdGFja0luZGV4XS5yYXkub3JpZ2luID0gX3N0YWNrW2lpXS5yZXN1bHQucG9zaXRpb247XG4gICAgICBfc3RhY2tbc3RhY2tJbmRleF0ucmF5LmRpcmVjdGlvbiA9IHJlZnJhY3QoX3N0YWNrW2lpXS5yYXkuZGlyZWN0aW9uLCBfc3RhY2tbaWldLnJlc3VsdC5ub3JtYWwsIEV0YSk7XG5cbiAgICAgIF9zdGFja1tpaV0ucmVmcmFjdGlvbkluZGV4ID0gc3RhY2tJbmRleDtcbiAgICB9XG5cbiAgICBpZiAoX3N0YWNrW2lpXS5yZXN1bHQucmVmbGVjdGlvbkZhY3RvciA+IDAuMClcbiAgICB7XG4gICAgICAvLyBwdXNoIHJlZmxlY3Rpb24gdG8gdGhlIHN0YWNrXG4gICAgICBzdGFja0luZGV4ICs9IDE7XG5cbiAgICAgIF9zdGFja1tzdGFja0luZGV4XS51c2VkID0gdHJ1ZTtcbiAgICAgIF9zdGFja1tzdGFja0luZGV4XS5yYXkub3JpZ2luID0gX3N0YWNrW2lpXS5yZXN1bHQucG9zaXRpb247XG4gICAgICBfc3RhY2tbc3RhY2tJbmRleF0ucmF5LmRpcmVjdGlvbiA9IHJlZmxlY3QoX3N0YWNrW2lpXS5yYXkuZGlyZWN0aW9uLCBfc3RhY2tbaWldLnJlc3VsdC5ub3JtYWwpO1xuXG4gICAgICBfc3RhY2tbaWldLnJlZmxlY3Rpb25JbmRleCA9IHN0YWNrSW5kZXg7XG4gICAgfVxuXG4gIH1cblxuICAvLyBjb21iaW5lIGFsbCBjb2xvcnMgKGZyb20gbGFzdCBlbGVtZW50IHRvIGZpcnN0IGVsZW1lbnQpXG4gIGZvciAoaW50IGlpID0gbWF4U3RhY2sgLSAxOyBpaSA+PSAwOyAtLWlpKVxuICB7XG5cblxuICAgIGlmICghX3N0YWNrW2lpXS51c2VkIHx8ICFfc3RhY2tbaWldLnJlc3VsdC5oYXNIaXQpIHtcbiAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiA9IGdfYmFja2dyb3VuZENvbG9yO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKF9zdGFja1tpaV0ucmVmbGVjdGlvbkluZGV4ICE9IC0xKVxuICAgIHtcbiAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiA9XG4gICAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiAqICgxLjAgLSBfc3RhY2tbaWldLnJlc3VsdC5yZWZsZWN0aW9uRmFjdG9yKSArXG4gICAgICAgIF9zdGFja1tfc3RhY2tbaWldLnJlZmxlY3Rpb25JbmRleF0ucmVzdWx0LmNvbG9yLnh5eiAqIF9zdGFja1tpaV0ucmVzdWx0LnJlZmxlY3Rpb25GYWN0b3I7XG4gICAgfVxuXG4gICAgaWYgKF9zdGFja1tpaV0ucmVmcmFjdGlvbkluZGV4ICE9IC0xKVxuICAgIHtcbiAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiA9XG4gICAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiAqICgxLjAgLSBfc3RhY2tbaWldLnJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yKSArXG4gICAgICAgIF9zdGFja1tfc3RhY2tbaWldLnJlZnJhY3Rpb25JbmRleF0ucmVzdWx0LmNvbG9yLnh5eiAqIF9zdGFja1tpaV0ucmVzdWx0LnJlZnJhY3Rpb25GYWN0b3I7XG4gICAgfVxuICB9XG5cbiAgaWYgKF9zdGFja1swXS5yZXN1bHQuaGFzSGl0KSB7XG4gICAgZmluYWxQaXhlbENvbG9yID0gX3N0YWNrWzBdLnJlc3VsdC5jb2xvci54eXo7XG4gIH1cblxuICBvX2NvbG9yID0gdmVjNChmaW5hbFBpeGVsQ29sb3IsIDEuMCk7XG5cbn1cbmAudHJpbSgpOyIsCiAgImV4cG9ydCBkZWZhdWx0IGBcbiN2ZXJzaW9uIDMwMCBlc1xuXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbmluIHZlYzIgYV92ZXJ0ZXhQb3NpdGlvbjtcbmluIHZlYzIgYV92ZXJ0ZXhUZXh0dXJlQ29vcmQ7XG5cbm91dCB2ZWMyIHZfdGV4dHVyZUNvb3JkO1xuXG52b2lkIG1haW4odm9pZClcbntcbiAgdl90ZXh0dXJlQ29vcmQgPSBhX3ZlcnRleFRleHR1cmVDb29yZDtcblxuICBnbF9Qb3NpdGlvbiA9IHZlYzQoYV92ZXJ0ZXhQb3NpdGlvbiwgMS4wLCAxLjApO1xufVxuYC50cmltKCk7IiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxudW5pZm9ybSBzYW1wbGVyMkQgdV90ZXh0dXJlO1xudW5pZm9ybSB2ZWMyIHVfc3RlcDtcblxuaW4gdmVjMiB2X3RleHR1cmVDb29yZDtcblxub3V0IHZlYzQgb19jb2xvcjtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIC8vIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUodV90ZXh0dXJlLCB2X3RleHR1cmVDb29yZCk7XG5cbiAgZmxvYXQgdG90YWwgPSAwLjA7XG4gIHZlYzQgYWNjdW11bGF0ZWQgPSB2ZWM0KDAuMCk7XG5cbiAgLy9cblxuICBpZiAodl90ZXh0dXJlQ29vcmQueCAtIHVfc3RlcC54ID4gMC4wKVxuICB7XG4gICAgYWNjdW11bGF0ZWQgKz0gdGV4dHVyZSh1X3RleHR1cmUsIHZlYzIodl90ZXh0dXJlQ29vcmQueCAtIHVfc3RlcC54LCB2X3RleHR1cmVDb29yZC55KSk7XG4gICAgdG90YWwgKz0gMS4wO1xuICB9XG5cbiAgaWYgKHZfdGV4dHVyZUNvb3JkLnggKyB1X3N0ZXAueCA+IDAuMClcbiAge1xuICAgIGFjY3VtdWxhdGVkICs9IHRleHR1cmUodV90ZXh0dXJlLCB2ZWMyKHZfdGV4dHVyZUNvb3JkLnggKyB1X3N0ZXAueCwgdl90ZXh0dXJlQ29vcmQueSkpO1xuICAgIHRvdGFsICs9IDEuMDtcbiAgfVxuXG4gIGlmICh2X3RleHR1cmVDb29yZC55IC0gdV9zdGVwLnkgPiAwLjApXG4gIHtcbiAgICBhY2N1bXVsYXRlZCArPSB0ZXh0dXJlKHVfdGV4dHVyZSwgdmVjMih2X3RleHR1cmVDb29yZC54LCB2X3RleHR1cmVDb29yZC55IC0gdV9zdGVwLnkpKTtcbiAgICB0b3RhbCArPSAxLjA7XG4gIH1cblxuICBpZiAodl90ZXh0dXJlQ29vcmQueSArIHVfc3RlcC55ID4gMC4wKVxuICB7XG4gICAgYWNjdW11bGF0ZWQgKz0gdGV4dHVyZSh1X3RleHR1cmUsIHZlYzIodl90ZXh0dXJlQ29vcmQueCwgdl90ZXh0dXJlQ29vcmQueSArIHVfc3RlcC55KSk7XG4gICAgdG90YWwgKz0gMS4wO1xuICB9XG5cbiAgLy9cblxuICBpZiAodl90ZXh0dXJlQ29vcmQueCAtIHVfc3RlcC54ID4gMC4wICYmIHZfdGV4dHVyZUNvb3JkLnkgLSB1X3N0ZXAueSA+IDAuMClcbiAge1xuICAgIGFjY3VtdWxhdGVkICs9IHRleHR1cmUodV90ZXh0dXJlLCB2ZWMyKHZfdGV4dHVyZUNvb3JkLnggLSB1X3N0ZXAueCwgdl90ZXh0dXJlQ29vcmQueSAtIHVfc3RlcC55KSk7XG4gICAgdG90YWwgKz0gMS4wO1xuICB9XG5cbiAgaWYgKHZfdGV4dHVyZUNvb3JkLnggKyB1X3N0ZXAueCA+IDAuMCAmJiB2X3RleHR1cmVDb29yZC55IC0gdV9zdGVwLnkgPiAwLjApXG4gIHtcbiAgICBhY2N1bXVsYXRlZCArPSB0ZXh0dXJlKHVfdGV4dHVyZSwgdmVjMih2X3RleHR1cmVDb29yZC54ICsgdV9zdGVwLngsIHZfdGV4dHVyZUNvb3JkLnkgLSB1X3N0ZXAueSkpO1xuICAgIHRvdGFsICs9IDEuMDtcbiAgfVxuXG4gIGlmICh2X3RleHR1cmVDb29yZC54IC0gdV9zdGVwLnggPiAwLjAgJiYgdl90ZXh0dXJlQ29vcmQueSArIHVfc3RlcC55ID4gMC4wKVxuICB7XG4gICAgYWNjdW11bGF0ZWQgKz0gdGV4dHVyZSh1X3RleHR1cmUsIHZlYzIodl90ZXh0dXJlQ29vcmQueCAtIHVfc3RlcC54LCB2X3RleHR1cmVDb29yZC55ICsgdV9zdGVwLnkpKTtcbiAgICB0b3RhbCArPSAxLjA7XG4gIH1cblxuICBpZiAodl90ZXh0dXJlQ29vcmQueCArIHVfc3RlcC54ID4gMC4wICYmIHZfdGV4dHVyZUNvb3JkLnkgKyB1X3N0ZXAueSA+IDAuMClcbiAge1xuICAgIGFjY3VtdWxhdGVkICs9IHRleHR1cmUodV90ZXh0dXJlLCB2ZWMyKHZfdGV4dHVyZUNvb3JkLnggKyB1X3N0ZXAueCwgdl90ZXh0dXJlQ29vcmQueSArIHVfc3RlcC55KSk7XG4gICAgdG90YWwgKz0gMS4wO1xuICB9XG5cbiAgLy9cblxuICBpZiAodG90YWwgPiAwLjApXG4gICAgb19jb2xvciA9IGFjY3VtdWxhdGVkIC8gdG90YWw7XG4gIGVsc2VcbiAgICBvX2NvbG9yID0gdmVjNCgxLjAsIDAuMCwgMC4wLCAxLjApOyAvLyB3YXJuaW5nXG59XG5gLnRyaW0oKTsiLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG5pbiB2ZWMyIGFfdmVydGV4UG9zaXRpb247XG5pbiB2ZWMyIGFfdmVydGV4VGV4dHVyZUNvb3JkO1xuXG5vdXQgdmVjMiB2X3RleHR1cmVDb29yZDtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIHZfdGV4dHVyZUNvb3JkID0gYV92ZXJ0ZXhUZXh0dXJlQ29vcmQ7XG5cbiAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFfdmVydGV4UG9zaXRpb24sIDEuMCwgMS4wKTtcbn1cbmAudHJpbSgpOyIsCiAgImV4cG9ydCBkZWZhdWx0IGBcbiN2ZXJzaW9uIDMwMCBlc1xuXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbnVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4dHVyZTtcblxuXG5cbi8vIGh0dHBzOi8vd3d3LnNoYWRlcnRveS5jb20vdmlldy80bGwzUkJcblxuI2RlZmluZSByIHZlYzIoODAwLCA2MDApXG4vLyAjZGVmaW5lIHQgMFxuXG4jZGVmaW5lIHpvb20gMS5cbiNkZWZpbmUgUChpZCxhLGIsYyxkLGUsZixnLGgpIGlmKCBpZCA9PSBpbnQocG9zLnkpICl7IGludCBwYSA9IGErMiooYisyKihjKzIqKGQrMiooZSsyKihmKzIqKGcrMiooaCkpKSkpKSk7IGNoYSA9IGZsb29yKG1vZChmbG9hdChwYSkvcG93KDIuLGZsb2F0KHBvcy54KS0xLiksMi4pKTsgfVxuXG5mbG9hdCBncmF5KHZlYzMgX2kpXG57XG4gIHJldHVybiBfaS54KjAuMjk5K19pLnkqMC41ODcrX2kueiowLjExNDtcbn1cbnZvaWQgbWFpbkltYWdlKCBvdXQgdmVjNCBmcmFnQ29sb3IsIGluIHZlYzIgZnJhZ0Nvb3JkIClcbntcbiAgdmVjMiB1diA9IHZlYzIoZmxvb3IoZnJhZ0Nvb3JkLngvOC4vem9vbSkqOC4qem9vbSxmbG9vcihmcmFnQ29vcmQueS8xMi4vem9vbSkqMTIuKnpvb20pL3I7XG4gIGl2ZWMyIHBvcyA9IGl2ZWMyKG1vZChmcmFnQ29vcmQueC96b29tLDguKSxtb2QoZnJhZ0Nvb3JkLnkvem9vbSwxMi4pKTtcbiAgdmVjNCB0ZXggPSB0ZXh0dXJlKHVfdGV4dHVyZSx1dik7XG4gIGZsb2F0IGNoYSA9IDAuO1xuXG4gIGZsb2F0IGcgPSBncmF5KHRleC54eXopO1xuICBpZiggZyA8IC4xMjUgKVxuICB7XG4gICAgUCgxMSwwLDAsMCwwLDAsMCwwLDApO1xuICAgIFAoMTAsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDksMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDgsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDcsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDYsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDUsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDQsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDMsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDIsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDEsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDAsMCwwLDAsMCwwLDAsMCwwKTtcbiAgfVxuICBlbHNlIGlmKCBnIDwgLjI1ICkgLy8gLlxuICB7XG4gICAgUCgxMSwwLDAsMCwwLDAsMCwwLDApO1xuICAgIFAoMTAsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDksMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDgsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDcsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDYsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDUsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDQsMCwwLDAsMSwxLDAsMCwwKTtcbiAgICBQKDMsMCwwLDAsMSwxLDAsMCwwKTtcbiAgICBQKDIsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDEsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDAsMCwwLDAsMCwwLDAsMCwwKTtcbiAgfVxuICBlbHNlIGlmKCBnIDwgLjM3NSApIC8vICxcbiAge1xuICAgIFAoMTEsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDEwLDAsMCwwLDAsMCwwLDAsMCk7XG4gICAgUCg5LDAsMCwwLDAsMCwwLDAsMCk7XG4gICAgUCg4LDAsMCwwLDAsMCwwLDAsMCk7XG4gICAgUCg3LDAsMCwwLDAsMCwwLDAsMCk7XG4gICAgUCg2LDAsMCwwLDAsMCwwLDAsMCk7XG4gICAgUCg1LDAsMCwwLDAsMCwwLDAsMCk7XG4gICAgUCg0LDAsMCwwLDEsMSwwLDAsMCk7XG4gICAgUCgzLDAsMCwwLDEsMSwwLDAsMCk7XG4gICAgUCgyLDAsMCwwLDAsMSwwLDAsMCk7XG4gICAgUCgxLDAsMCwwLDEsMCwwLDAsMCk7XG4gICAgUCgwLDAsMCwwLDAsMCwwLDAsMCk7XG4gIH1cbiAgZWxzZSBpZiggZyA8IC41ICkgLy8gLVxuICB7XG4gICAgUCgxMSwwLDAsMCwwLDAsMCwwLDApO1xuICAgIFAoMTAsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDksMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDgsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDcsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDYsMSwxLDEsMSwxLDEsMSwwKTtcbiAgICBQKDUsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDQsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDMsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDIsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDEsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDAsMCwwLDAsMCwwLDAsMCwwKTtcbiAgfVxuICBlbHNlIGlmKGcgPCAuNjI1ICkgLy8gK1xuICB7XG4gICAgUCgxMSwwLDAsMCwwLDAsMCwwLDApO1xuICAgIFAoMTAsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDksMCwwLDAsMSwwLDAsMCwwKTtcbiAgICBQKDgsMCwwLDAsMSwwLDAsMCwwKTtcbiAgICBQKDcsMCwwLDAsMSwwLDAsMCwwKTtcbiAgICBQKDYsMSwxLDEsMSwxLDEsMSwwKTtcbiAgICBQKDUsMCwwLDAsMSwwLDAsMCwwKTtcbiAgICBQKDQsMCwwLDAsMSwwLDAsMCwwKTtcbiAgICBQKDMsMCwwLDAsMSwwLDAsMCwwKTtcbiAgICBQKDIsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDEsMCwwLDAsMCwwLDAsMCwwKTtcbiAgICBQKDAsMCwwLDAsMCwwLDAsMCwwKTtcbiAgfVxuICBlbHNlIGlmKGcgPCAuNzUgKSAvLyAqXG4gIHtcbiAgICBQKDExLDAsMCwwLDAsMCwwLDAsMCk7XG4gICAgUCgxMCwwLDAsMCwxLDAsMCwwLDApO1xuICAgIFAoOSwxLDAsMCwxLDAsMCwxLDApO1xuICAgIFAoOCwwLDEsMCwxLDAsMSwwLDApO1xuICAgIFAoNywwLDAsMSwxLDEsMCwwLDApO1xuICAgIFAoNiwwLDAsMCwxLDAsMCwwLDApO1xuICAgIFAoNSwwLDAsMSwxLDEsMCwwLDApO1xuICAgIFAoNCwwLDEsMCwxLDAsMSwwLDApO1xuICAgIFAoMywxLDAsMCwxLDAsMCwxLDApO1xuICAgIFAoMiwwLDAsMCwxLDAsMCwwLDApO1xuICAgIFAoMSwwLDAsMCwwLDAsMCwwLDApO1xuICAgIFAoMCwwLDAsMCwwLDAsMCwwLDApO1xuICB9XG4gIGVsc2UgaWYoZyA8IC44NzUgKSAvLyAjXG4gIHtcbiAgICBQKDExLDAsMCwwLDAsMCwwLDAsMCk7XG4gICAgUCgxMCwwLDAsMSwwLDAsMSwwLDApO1xuICAgIFAoOSwwLDAsMSwwLDAsMSwwLDApO1xuICAgIFAoOCwxLDEsMSwxLDEsMSwxLDApO1xuICAgIFAoNywwLDAsMSwwLDAsMSwwLDApO1xuICAgIFAoNiwwLDAsMSwwLDAsMSwwLDApO1xuICAgIFAoNSwwLDEsMCwwLDEsMCwwLDApO1xuICAgIFAoNCwwLDEsMCwwLDEsMCwwLDApO1xuICAgIFAoMywxLDEsMSwxLDEsMSwxLDApO1xuICAgIFAoMiwwLDEsMCwwLDEsMCwwLDApO1xuICAgIFAoMSwwLDEsMCwwLDEsMCwwLDApO1xuICAgIFAoMCwwLDAsMCwwLDAsMCwwLDApO1xuICB9XG4gIGVsc2UgLy8gQFxuICB7XG4gICAgUCgxMSwwLDAsMCwwLDAsMCwwLDApO1xuICAgIFAoMTAsMCwwLDEsMSwxLDEsMCwwKTtcbiAgICBQKDksMCwxLDAsMCwwLDAsMSwwKTtcbiAgICBQKDgsMSwwLDAsMCwxLDEsMSwwKTtcbiAgICBQKDcsMSwwLDAsMSwwLDAsMSwwKTtcbiAgICBQKDYsMSwwLDAsMSwwLDAsMSwwKTtcbiAgICBQKDUsMSwwLDAsMSwwLDAsMSwwKTtcbiAgICBQKDQsMSwwLDAsMSwwLDAsMSwwKTtcbiAgICBQKDMsMSwwLDAsMSwxLDEsMSwwKTtcbiAgICBQKDIsMCwxLDAsMCwwLDAsMCwwKTtcbiAgICBQKDEsMCwwLDEsMSwxLDEsMSwwKTtcbiAgICBQKDAsMCwwLDAsMCwwLDAsMCwwKTtcbiAgfVxuXG4gIHZlYzMgY29sID0gdGV4Lnh5ei9tYXgodGV4LngsbWF4KHRleC55LHRleC56KSk7XG4gIGZyYWdDb2xvciA9IHZlYzQoY2hhKmNvbCwxLik7XG59XG5cblxuaW4gdmVjMiB2X3RleHR1cmVDb29yZDtcblxub3V0IHZlYzQgb19jb2xvcjtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIG1haW5JbWFnZShvX2NvbG9yLCB2X3RleHR1cmVDb29yZCAqIHIpO1xuICAvLyBtYWluSW1hZ2Uob19jb2xvciwgdmVjMihnbF9GcmFnQ29vcmQpKTtcblxufVxuYC50cmltKCk7IiwKICAiXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCB7IElJbnRlcm5hbEJveCwgSUludGVybmFsU3BoZXJlLCBJSW50ZXJuYWxUcmlhbmdsZSwgSVN0YWNrUmVuZGVyZXIgfSBmcm9tICcuL1JheVRyYWNlclJlbmRlcmVyJztcblxuY29uc3Qga19taW5EZWx0YSA9IDAuMDE7XG5cbmludGVyZmFjZSBJU3BoZXJlU2hhcGUge1xuICBpbmRleDogbnVtYmVyO1xuICBtaW46IGdsbS5SZWFkb25seVZlYzM7XG4gIG1heDogZ2xtLlJlYWRvbmx5VmVjMztcbiAgdHlwZTogJ3NwaGVyZSc7XG4gIHNoYXBlOiBJSW50ZXJuYWxTcGhlcmU7XG59O1xuaW50ZXJmYWNlIElCb3hTaGFwZSB7XG4gIGluZGV4OiBudW1iZXI7XG4gIG1pbjogZ2xtLlJlYWRvbmx5VmVjMztcbiAgbWF4OiBnbG0uUmVhZG9ubHlWZWMzO1xuICB0eXBlOiAnYm94JztcbiAgc2hhcGU6IElJbnRlcm5hbEJveDtcbn07XG5pbnRlcmZhY2UgSVRyaWFuZ2xlU2hhcGUge1xuICBpbmRleDogbnVtYmVyO1xuICBtaW46IGdsbS5SZWFkb25seVZlYzM7XG4gIG1heDogZ2xtLlJlYWRvbmx5VmVjMztcbiAgdHlwZTogJ3RyaWFuZ2xlJztcbiAgc2hhcGU6IElJbnRlcm5hbFRyaWFuZ2xlO1xufTtcbnR5cGUgSVNoYXBlID0gSVNwaGVyZVNoYXBlIHwgSUJveFNoYXBlIHwgSVRyaWFuZ2xlU2hhcGU7XG5cbmNvbnN0IF9yZW5kZXJBQUJCID0gKFxuICByZW5kZXJlcjogSVN0YWNrUmVuZGVyZXIsXG4gIG1pbjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgbWF4OiBnbG0uUmVhZG9ubHlWZWMzLFxuICBjb2xvcjogZ2xtLlJlYWRvbmx5VmVjMyxcbikgPT4ge1xuXG4gIGNvbnN0IHZlcnRpY2VzOiBnbG0uUmVhZG9ubHlWZWMzW10gPSBbXG4gICAgW21pblswXSwgbWluWzFdLCBtaW5bMl1dLFxuICAgIFttYXhbMF0sIG1pblsxXSwgbWluWzJdXSxcbiAgICBbbWluWzBdLCBtYXhbMV0sIG1pblsyXV0sXG4gICAgW21heFswXSwgbWF4WzFdLCBtaW5bMl1dLFxuICAgIFttaW5bMF0sIG1pblsxXSwgbWF4WzJdXSxcbiAgICBbbWF4WzBdLCBtaW5bMV0sIG1heFsyXV0sXG4gICAgW21pblswXSwgbWF4WzFdLCBtYXhbMl1dLFxuICAgIFttYXhbMF0sIG1heFsxXSwgbWF4WzJdXSxcbiAgXTtcblxuICBjb25zdCBpbmRpY2VzOiBbbnVtYmVyLG51bWJlcl1bXSA9IFtcbiAgICBbMCwxXSxbMSwzXSxbMywyXSxbMiwwXSxcbiAgICBbNCw1XSxbNSw3XSxbNyw2XSxbNiw0XSxcbiAgICBbMCw0XSxbMSw1XSxbMiw2XSxbMyw3XSxcbiAgXTtcblxuICBmb3IgKGNvbnN0IHBhaXIgb2YgaW5kaWNlcykge1xuICAgIHJlbmRlcmVyLnB1c2hMaW5lKHZlcnRpY2VzW3BhaXJbMF1dLCB2ZXJ0aWNlc1twYWlyWzFdXSwgY29sb3IpO1xuICB9XG59O1xuXG5jbGFzcyBCVkhOb2RlIHtcblxuICBfaW5kZXg6IG51bWJlciA9IC0xO1xuXG4gIF9taW4gPSBnbG0udmVjMy5jcmVhdGUoKTtcbiAgX21heCA9IGdsbS52ZWMzLmNyZWF0ZSgpO1xuXG4gIF9sZWZ0Tm9kZT86IEJWSE5vZGU7XG4gIF9yaWdodE5vZGU/OiBCVkhOb2RlO1xuXG4gIF9sZWZ0TGVhZj86IElTaGFwZTtcbiAgX3JpZ2h0TGVhZj86IElTaGFwZTtcblxuICBwdWJsaWMgc3RhdGljIHNfaW5kZXg6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbWluOiBnbG0udmVjMyxcbiAgICBtYXg6IGdsbS52ZWMzLFxuICApIHtcbiAgICB0aGlzLl9pbmRleCA9IEJWSE5vZGUuc19pbmRleDtcbiAgICBCVkhOb2RlLnNfaW5kZXggKz0gMTtcbiAgICBnbG0udmVjMy5jb3B5KHRoaXMuX21pbiwgbWluKTtcbiAgICBnbG0udmVjMy5jb3B5KHRoaXMuX21heCwgbWF4KTtcbiAgfVxuXG4gIHN1YkRpdmlkZShcbiAgICBhbGxTaGFwZXM6IFJlYWRvbmx5QXJyYXk8SVNoYXBlPixcbiAgKTogdm9pZCB7XG5cbiAgICBpZiAoYWxsU2hhcGVzLmxlbmd0aCA8PSAyKSB7XG4gICAgICB0aGlzLl9sZWZ0TGVhZiA9IGFsbFNoYXBlc1swXTtcbiAgICAgIHRoaXMuX3JpZ2h0TGVhZiA9IGFsbFNoYXBlc1sxXTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBzcGxpdCB0aGUgQUFCQiBpbnRvIHR3byBhY3Jvc3MgdGhlIGxvbmdlc3QgQUFCQiBheGlzXG4gICAgY29uc3QgZHggPSBNYXRoLmFicyh0aGlzLl9tYXhbMF0gLSB0aGlzLl9taW5bMF0pO1xuICAgIGNvbnN0IGR5ID0gTWF0aC5hYnModGhpcy5fbWF4WzFdIC0gdGhpcy5fbWluWzFdKTtcbiAgICBjb25zdCBkeiA9IE1hdGguYWJzKHRoaXMuX21heFsyXSAtIHRoaXMuX21pblsyXSk7XG4gICAgY29uc3QgbGFyZ2VzdERlbHRhID0gTWF0aC5tYXgoZHgsIGR5LCBkeik7XG5cbiAgICBpZiAobGFyZ2VzdERlbHRhID09PSBkeCkge1xuICAgICAgdGhpcy5fc3BsaXRBY3Jvc3MoMCwgYWxsU2hhcGVzKTsgLy8gc3BsaXQgQlYgQUFCQiBhY3Jvc3MgeCBheGlzXG4gICAgfSBlbHNlIGlmIChsYXJnZXN0RGVsdGEgPT09IGR5KSB7XG4gICAgICB0aGlzLl9zcGxpdEFjcm9zcygxLCBhbGxTaGFwZXMpOyAvLyBzcGxpdCBCViBBQUJCIGFjcm9zcyB5IGF4aXNcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3BsaXRBY3Jvc3MoMiwgYWxsU2hhcGVzKTsgLy8gc3BsaXQgQlYgQUFCQiBhY3Jvc3MgeiBheGlzXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfc3BsaXRBY3Jvc3MoYXhpczogMCB8IDEgfCAyLCBhbGxTaGFwZXM6IFJlYWRvbmx5QXJyYXk8SVNoYXBlPikge1xuICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5hbGxTaGFwZXNdLnNvcnQoKHNoYXBlQSwgc2hhcGVCKSA9PiB7XG4gICAgICBjb25zdCBhMCA9IHNoYXBlQS5taW5bYXhpc107XG4gICAgICBjb25zdCBhMSA9IHNoYXBlQS5tYXhbYXhpc107XG5cbiAgICAgIGNvbnN0IGIwID0gc2hhcGVCLm1pbltheGlzXTtcbiAgICAgIGNvbnN0IGIxID0gc2hhcGVCLm1heFtheGlzXTtcblxuICAgICAgcmV0dXJuIChhMCArIGExKSAvIDIuMCAtIChiMCArIGIxKSAvIDIuMDtcbiAgICB9KTtcblxuICAgIGNvbnN0IGggPSBzb3J0ZWQubGVuZ3RoIC8gMjtcbiAgICBjb25zdCBsID0gc29ydGVkLmxlbmd0aDtcbiAgICBjb25zdCBsdEZhY2VzID0gc29ydGVkLnNsaWNlKDAsIGgpOyAvLyBsZWZ0IGZhY2VzXG4gICAgY29uc3QgcnRGYWNlcyA9IHNvcnRlZC5zbGljZShoLCBsKTsgLy8gcmlnaHQgZmFjZXNcblxuICAgIGlmIChsdEZhY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG1pbiA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUik7XG4gICAgICBjb25zdCBtYXggPSBnbG0udmVjMy5mcm9tVmFsdWVzKE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpO1xuICAgICAgbHRGYWNlcy5mb3JFYWNoKChmKSA9PiB7XG4gICAgICAgIG1pblswXSA9IE1hdGgubWluKG1pblswXSwgZi5taW5bMF0pO1xuICAgICAgICBtaW5bMV0gPSBNYXRoLm1pbihtaW5bMV0sIGYubWluWzFdKTtcbiAgICAgICAgbWluWzJdID0gTWF0aC5taW4obWluWzJdLCBmLm1pblsyXSk7XG4gICAgICAgIG1heFswXSA9IE1hdGgubWF4KG1heFswXSwgZi5tYXhbMF0pO1xuICAgICAgICBtYXhbMV0gPSBNYXRoLm1heChtYXhbMV0sIGYubWF4WzFdKTtcbiAgICAgICAgbWF4WzJdID0gTWF0aC5tYXgobWF4WzJdLCBmLm1heFsyXSk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fbGVmdE5vZGUgPSBuZXcgQlZITm9kZShtaW4sIG1heCk7XG4gICAgfVxuXG4gICAgaWYgKHJ0RmFjZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbWluID0gZ2xtLnZlYzMuZnJvbVZhbHVlcyhOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKTtcbiAgICAgIGNvbnN0IG1heCA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUik7XG4gICAgICBydEZhY2VzLmZvckVhY2goKGYpID0+IHtcbiAgICAgICAgbWluWzBdID0gTWF0aC5taW4obWluWzBdLCBmLm1pblswXSk7XG4gICAgICAgIG1pblsxXSA9IE1hdGgubWluKG1pblsxXSwgZi5taW5bMV0pO1xuICAgICAgICBtaW5bMl0gPSBNYXRoLm1pbihtaW5bMl0sIGYubWluWzJdKTtcbiAgICAgICAgbWF4WzBdID0gTWF0aC5tYXgobWF4WzBdLCBmLm1heFswXSk7XG4gICAgICAgIG1heFsxXSA9IE1hdGgubWF4KG1heFsxXSwgZi5tYXhbMV0pO1xuICAgICAgICBtYXhbMl0gPSBNYXRoLm1heChtYXhbMl0sIGYubWF4WzJdKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9yaWdodE5vZGUgPSBuZXcgQlZITm9kZShtaW4sIG1heCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xlZnROb2RlKSB7XG4gICAgICB0aGlzLl9sZWZ0Tm9kZS5zdWJEaXZpZGUobHRGYWNlcyk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9yaWdodE5vZGUpIHtcbiAgICAgIHRoaXMuX3JpZ2h0Tm9kZS5zdWJEaXZpZGUocnRGYWNlcyk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKHJlbmRlcmVyOiBJU3RhY2tSZW5kZXJlciwgY29sb3I6IGdsbS5SZWFkb25seVZlYzMpOiB2b2lkIHtcbiAgICBfcmVuZGVyQUFCQihyZW5kZXJlciwgdGhpcy5fbWluLCB0aGlzLl9tYXgsIGNvbG9yKTtcblxuICAgIGlmICh0aGlzLl9sZWZ0Tm9kZSkge1xuICAgICAgdGhpcy5fbGVmdE5vZGUucmVuZGVyKHJlbmRlcmVyLCBbMCwgMC41LCAwXSk7XG4gICAgICByZW5kZXJlci5wdXNoTGluZShcbiAgICAgICAgWyB0aGlzLl9tYXhbMF0gKyAwLjEsIHRoaXMuX21heFsxXSArIDAuMSwgdGhpcy5fbWF4WzJdICsgMC4xIF0sXG4gICAgICAgIFsgdGhpcy5fbGVmdE5vZGUuX21heFswXSArIDAuMSwgdGhpcy5fbGVmdE5vZGUuX21heFsxXSArIDAuMSwgdGhpcy5fbGVmdE5vZGUuX21heFsyXSArIDAuMSBdLFxuICAgICAgICBbMSwwLDFdXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9yaWdodE5vZGUpIHtcbiAgICAgIHRoaXMuX3JpZ2h0Tm9kZS5yZW5kZXIocmVuZGVyZXIsIFswLCAwLCAwLjVdKTtcbiAgICAgIHJlbmRlcmVyLnB1c2hMaW5lKFxuICAgICAgICBbIHRoaXMuX21heFswXSArIDAuMSwgdGhpcy5fbWF4WzFdICsgMC4xLCB0aGlzLl9tYXhbMl0gKyAwLjEgXSxcbiAgICAgICAgWyB0aGlzLl9yaWdodE5vZGUuX21heFswXSArIDAuMSwgdGhpcy5fcmlnaHROb2RlLl9tYXhbMV0gKyAwLjEsIHRoaXMuX3JpZ2h0Tm9kZS5fbWF4WzJdICsgMC4xIF0sXG4gICAgICAgIFsxLDAsMV1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xlZnRMZWFmKSB7XG4gICAgICBfcmVuZGVyQUFCQihyZW5kZXJlciwgdGhpcy5fbGVmdExlYWYubWluLCB0aGlzLl9sZWZ0TGVhZi5tYXgsIFswLjUsMC41LDBdKTtcbiAgICAgIHJlbmRlcmVyLnB1c2hMaW5lKFxuICAgICAgICBbIHRoaXMuX21heFswXSArIDAuMSwgdGhpcy5fbWF4WzFdICsgMC4xLCB0aGlzLl9tYXhbMl0gKyAwLjEgXSxcbiAgICAgICAgWyB0aGlzLl9sZWZ0TGVhZi5tYXhbMF0gKyAwLjEsIHRoaXMuX2xlZnRMZWFmLm1heFsxXSArIDAuMSwgdGhpcy5fbGVmdExlYWYubWF4WzJdICsgMC4xIF0sXG4gICAgICAgIFsxLDAsMF1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3JpZ2h0TGVhZikge1xuICAgICAgX3JlbmRlckFBQkIocmVuZGVyZXIsIHRoaXMuX3JpZ2h0TGVhZi5taW4sIHRoaXMuX3JpZ2h0TGVhZi5tYXgsIFswLjUsMC41LDBdKTtcbiAgICAgIHJlbmRlcmVyLnB1c2hMaW5lKFxuICAgICAgICBbIHRoaXMuX21heFswXSArIDAuMSwgdGhpcy5fbWF4WzFdICsgMC4xLCB0aGlzLl9tYXhbMl0gKyAwLjEgXSxcbiAgICAgICAgWyB0aGlzLl9yaWdodExlYWYubWF4WzBdICsgMC4xLCB0aGlzLl9yaWdodExlYWYubWF4WzFdICsgMC4xLCB0aGlzLl9yaWdodExlYWYubWF4WzJdICsgMC4xIF0sXG4gICAgICAgIFsxLDAsMF1cbiAgICAgICk7XG4gICAgfVxuXG4gIH1cblxufTtcblxuZXhwb3J0IGNsYXNzIEJWSCB7XG5cbiAgcHJpdmF0ZSBfYWxsU2hhcGVzOiBJU2hhcGVbXSA9IFtdO1xuXG4gIHByaXZhdGUgX3Jvb3ROb2RlPzogQlZITm9kZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuX2FsbFNoYXBlcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX3Jvb3ROb2RlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgc3luY2hyb25pemUoXG4gICAgYWxsU3BoZXJlczogSUludGVybmFsU3BoZXJlW10sXG4gICAgYWxsQm94ZXM6IElJbnRlcm5hbEJveFtdLFxuICAgIGFsbFRyaWFuZ2xlczogSUludGVybmFsVHJpYW5nbGVbXSxcbiAgKSB7XG5cbiAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICAvLyBzZXR1cCB0aGUgZ2VuZXJpYyBzaGFwZSBsaXN0XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBmb3IgKGNvbnN0IGN1cnJTaGFwZSBvZiBhbGxTcGhlcmVzKSB7XG5cbiAgICAgIGNvbnN0IG1pbiA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUik7XG4gICAgICBjb25zdCBtYXggPSBnbG0udmVjMy5mcm9tVmFsdWVzKE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpO1xuXG4gICAgICBtaW5bMF0gPSBNYXRoLm1pbihtaW5bMF0sIGN1cnJTaGFwZS5wb3NpdGlvblswXSAtIGN1cnJTaGFwZS5yYWRpdXMpO1xuICAgICAgbWluWzFdID0gTWF0aC5taW4obWluWzFdLCBjdXJyU2hhcGUucG9zaXRpb25bMV0gLSBjdXJyU2hhcGUucmFkaXVzKTtcbiAgICAgIG1pblsyXSA9IE1hdGgubWluKG1pblsyXSwgY3VyclNoYXBlLnBvc2l0aW9uWzJdIC0gY3VyclNoYXBlLnJhZGl1cyk7XG4gICAgICBtYXhbMF0gPSBNYXRoLm1heChtYXhbMF0sIGN1cnJTaGFwZS5wb3NpdGlvblswXSArIGN1cnJTaGFwZS5yYWRpdXMpO1xuICAgICAgbWF4WzFdID0gTWF0aC5tYXgobWF4WzFdLCBjdXJyU2hhcGUucG9zaXRpb25bMV0gKyBjdXJyU2hhcGUucmFkaXVzKTtcbiAgICAgIG1heFsyXSA9IE1hdGgubWF4KG1heFsyXSwgY3VyclNoYXBlLnBvc2l0aW9uWzJdICsgY3VyclNoYXBlLnJhZGl1cyk7XG5cbiAgICAgIGlmIChtYXhbMF0gLSBtaW5bMF0gPCBrX21pbkRlbHRhKSB7XG4gICAgICAgIG1heFswXSArPSBrX21pbkRlbHRhO1xuICAgICAgfVxuICAgICAgaWYgKG1heFsxXSAtIG1pblsxXSA8IGtfbWluRGVsdGEpIHtcbiAgICAgICAgbWF4WzFdICs9IGtfbWluRGVsdGE7XG4gICAgICB9XG4gICAgICBpZiAobWF4WzJdIC0gbWluWzJdIDwga19taW5EZWx0YSkge1xuICAgICAgICBtYXhbMl0gKz0ga19taW5EZWx0YTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fYWxsU2hhcGVzLnB1c2goeyBpbmRleDogaW5kZXgrKywgdHlwZTogJ3NwaGVyZScsIHNoYXBlOiBjdXJyU2hhcGUsIG1pbiwgbWF4IH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGN1cnJTaGFwZSBvZiBhbGxCb3hlcykge1xuXG4gICAgICBjb25zdCBtaW4gPSBnbG0udmVjMy5mcm9tVmFsdWVzKE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpO1xuICAgICAgY29uc3QgbWF4ID0gZ2xtLnZlYzMuZnJvbVZhbHVlcyhOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIE51bWJlci5NSU5fU0FGRV9JTlRFR0VSKTtcblxuICAgICAgY29uc3QgdmVydGljZXM6IFJlYWRvbmx5QXJyYXk8Z2xtLlJlYWRvbmx5VmVjMz4gPSBbXG4gICAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoLWN1cnJTaGFwZS5ib3hTaXplWzBdLCAtY3VyclNoYXBlLmJveFNpemVbMV0sIC1jdXJyU2hhcGUuYm94U2l6ZVsyXSksXG4gICAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoK2N1cnJTaGFwZS5ib3hTaXplWzBdLCAtY3VyclNoYXBlLmJveFNpemVbMV0sIC1jdXJyU2hhcGUuYm94U2l6ZVsyXSksXG4gICAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoLWN1cnJTaGFwZS5ib3hTaXplWzBdLCArY3VyclNoYXBlLmJveFNpemVbMV0sIC1jdXJyU2hhcGUuYm94U2l6ZVsyXSksXG4gICAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoK2N1cnJTaGFwZS5ib3hTaXplWzBdLCArY3VyclNoYXBlLmJveFNpemVbMV0sIC1jdXJyU2hhcGUuYm94U2l6ZVsyXSksXG4gICAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoLWN1cnJTaGFwZS5ib3hTaXplWzBdLCAtY3VyclNoYXBlLmJveFNpemVbMV0sICtjdXJyU2hhcGUuYm94U2l6ZVsyXSksXG4gICAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoK2N1cnJTaGFwZS5ib3hTaXplWzBdLCAtY3VyclNoYXBlLmJveFNpemVbMV0sICtjdXJyU2hhcGUuYm94U2l6ZVsyXSksXG4gICAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoLWN1cnJTaGFwZS5ib3hTaXplWzBdLCArY3VyclNoYXBlLmJveFNpemVbMV0sICtjdXJyU2hhcGUuYm94U2l6ZVsyXSksXG4gICAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoK2N1cnJTaGFwZS5ib3hTaXplWzBdLCArY3VyclNoYXBlLmJveFNpemVbMV0sICtjdXJyU2hhcGUuYm94U2l6ZVsyXSlcbiAgICAgIF07XG5cbiAgICAgIC8vIGNvbnN0IHZlcnRpY2VzMjogZ2xtLlJlYWRvbmx5VmVjM1tdID0gW107XG5cbiAgICAgIHZlcnRpY2VzLmZvckVhY2goKHZlcnRleCkgPT4ge1xuICAgICAgICBjb25zdCBwb3MgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuXG4gICAgICAgIGNvbnN0IG1hdDQgPSBnbG0ubWF0NC5pZGVudGl0eShnbG0ubWF0NC5jcmVhdGUoKSk7XG4gICAgICAgIGdsbS5tYXQ0LnRyYW5zbGF0ZShtYXQ0LCBtYXQ0LCBjdXJyU2hhcGUucG9zaXRpb24pO1xuICAgICAgICBjb25zdCBtYXQ0YiA9IGdsbS5tYXQ0LmZyb21RdWF0KGdsbS5tYXQ0LmNyZWF0ZSgpLCBjdXJyU2hhcGUub3JpZW50YXRpb24pO1xuICAgICAgICBnbG0ubWF0NC5tdWx0aXBseShtYXQ0LCBtYXQ0LCBtYXQ0Yik7XG5cbiAgICAgICAgZ2xtLnZlYzMudHJhbnNmb3JtTWF0NChwb3MsIHZlcnRleCwgbWF0NCk7XG4gICAgICAgIC8vIHZlcnRpY2VzMi5wdXNoKHBvcyk7XG5cbiAgICAgICAgbWluWzBdID0gTWF0aC5taW4obWluWzBdLCBwb3NbMF0pO1xuICAgICAgICBtaW5bMV0gPSBNYXRoLm1pbihtaW5bMV0sIHBvc1sxXSk7XG4gICAgICAgIG1pblsyXSA9IE1hdGgubWluKG1pblsyXSwgcG9zWzJdKTtcbiAgICAgICAgbWF4WzBdID0gTWF0aC5tYXgobWF4WzBdLCBwb3NbMF0pO1xuICAgICAgICBtYXhbMV0gPSBNYXRoLm1heChtYXhbMV0sIHBvc1sxXSk7XG4gICAgICAgIG1heFsyXSA9IE1hdGgubWF4KG1heFsyXSwgcG9zWzJdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAobWF4WzBdIC0gbWluWzBdIDwga19taW5EZWx0YSkge1xuICAgICAgICBtYXhbMF0gKz0ga19taW5EZWx0YTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhbMV0gLSBtaW5bMV0gPCBrX21pbkRlbHRhKSB7XG4gICAgICAgIG1heFsxXSArPSBrX21pbkRlbHRhO1xuICAgICAgfVxuICAgICAgaWYgKG1heFsyXSAtIG1pblsyXSA8IGtfbWluRGVsdGEpIHtcbiAgICAgICAgbWF4WzJdICs9IGtfbWluRGVsdGE7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2FsbFNoYXBlcy5wdXNoKHsgaW5kZXg6IGluZGV4KyssIHR5cGU6ICdib3gnLCBzaGFwZTogY3VyclNoYXBlLCBtaW4sIG1heCB9KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBjdXJyU2hhcGUgb2YgYWxsVHJpYW5nbGVzKSB7XG5cbiAgICAgIGNvbnN0IG1pbiA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUik7XG4gICAgICBjb25zdCBtYXggPSBnbG0udmVjMy5mcm9tVmFsdWVzKE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpO1xuXG4gICAgICBtaW5bMF0gPSBNYXRoLm1pbihtaW5bMF0sIGN1cnJTaGFwZS52MFswXSk7XG4gICAgICBtaW5bMV0gPSBNYXRoLm1pbihtaW5bMV0sIGN1cnJTaGFwZS52MFsxXSk7XG4gICAgICBtaW5bMl0gPSBNYXRoLm1pbihtaW5bMl0sIGN1cnJTaGFwZS52MFsyXSk7XG4gICAgICBtYXhbMF0gPSBNYXRoLm1heChtYXhbMF0sIGN1cnJTaGFwZS52MFswXSk7XG4gICAgICBtYXhbMV0gPSBNYXRoLm1heChtYXhbMV0sIGN1cnJTaGFwZS52MFsxXSk7XG4gICAgICBtYXhbMl0gPSBNYXRoLm1heChtYXhbMl0sIGN1cnJTaGFwZS52MFsyXSk7XG5cbiAgICAgIG1pblswXSA9IE1hdGgubWluKG1pblswXSwgY3VyclNoYXBlLnYxWzBdKTtcbiAgICAgIG1pblsxXSA9IE1hdGgubWluKG1pblsxXSwgY3VyclNoYXBlLnYxWzFdKTtcbiAgICAgIG1pblsyXSA9IE1hdGgubWluKG1pblsyXSwgY3VyclNoYXBlLnYxWzJdKTtcbiAgICAgIG1heFswXSA9IE1hdGgubWF4KG1heFswXSwgY3VyclNoYXBlLnYxWzBdKTtcbiAgICAgIG1heFsxXSA9IE1hdGgubWF4KG1heFsxXSwgY3VyclNoYXBlLnYxWzFdKTtcbiAgICAgIG1heFsyXSA9IE1hdGgubWF4KG1heFsyXSwgY3VyclNoYXBlLnYxWzJdKTtcblxuICAgICAgbWluWzBdID0gTWF0aC5taW4obWluWzBdLCBjdXJyU2hhcGUudjJbMF0pO1xuICAgICAgbWluWzFdID0gTWF0aC5taW4obWluWzFdLCBjdXJyU2hhcGUudjJbMV0pO1xuICAgICAgbWluWzJdID0gTWF0aC5taW4obWluWzJdLCBjdXJyU2hhcGUudjJbMl0pO1xuICAgICAgbWF4WzBdID0gTWF0aC5tYXgobWF4WzBdLCBjdXJyU2hhcGUudjJbMF0pO1xuICAgICAgbWF4WzFdID0gTWF0aC5tYXgobWF4WzFdLCBjdXJyU2hhcGUudjJbMV0pO1xuICAgICAgbWF4WzJdID0gTWF0aC5tYXgobWF4WzJdLCBjdXJyU2hhcGUudjJbMl0pO1xuXG4gICAgICBpZiAobWF4WzBdIC0gbWluWzBdIDwga19taW5EZWx0YSkge1xuICAgICAgICBtYXhbMF0gKz0ga19taW5EZWx0YTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhbMV0gLSBtaW5bMV0gPCBrX21pbkRlbHRhKSB7XG4gICAgICAgIG1heFsxXSArPSBrX21pbkRlbHRhO1xuICAgICAgfVxuICAgICAgaWYgKG1heFsyXSAtIG1pblsyXSA8IGtfbWluRGVsdGEpIHtcbiAgICAgICAgbWF4WzJdICs9IGtfbWluRGVsdGE7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2FsbFNoYXBlcy5wdXNoKHsgaW5kZXg6IGluZGV4KyssIHR5cGU6ICd0cmlhbmdsZScsIHNoYXBlOiBjdXJyU2hhcGUsIG1pbiwgbWF4IH0pO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSByb290IG5vZGVcbiAgICBjb25zdCBtaW4gPSBnbG0udmVjMy5mcm9tVmFsdWVzKE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpO1xuICAgIGNvbnN0IG1heCA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUik7XG4gICAgZm9yIChjb25zdCBjdXJyU2hhcGUgb2YgdGhpcy5fYWxsU2hhcGVzKSB7XG5cbiAgICAgIG1pblswXSA9IE1hdGgubWluKG1pblswXSwgY3VyclNoYXBlLm1pblswXSk7XG4gICAgICBtaW5bMV0gPSBNYXRoLm1pbihtaW5bMV0sIGN1cnJTaGFwZS5taW5bMV0pO1xuICAgICAgbWluWzJdID0gTWF0aC5taW4obWluWzJdLCBjdXJyU2hhcGUubWluWzJdKTtcbiAgICAgIG1heFswXSA9IE1hdGgubWF4KG1heFswXSwgY3VyclNoYXBlLm1heFswXSk7XG4gICAgICBtYXhbMV0gPSBNYXRoLm1heChtYXhbMV0sIGN1cnJTaGFwZS5tYXhbMV0pO1xuICAgICAgbWF4WzJdID0gTWF0aC5tYXgobWF4WzJdLCBjdXJyU2hhcGUubWF4WzJdKTtcbiAgICB9XG5cbiAgICBCVkhOb2RlLnNfaW5kZXggPSAwO1xuXG4gICAgdGhpcy5fcm9vdE5vZGUgPSBuZXcgQlZITm9kZShtaW4sIG1heCk7XG4gICAgdGhpcy5fcm9vdE5vZGUuc3ViRGl2aWRlKHRoaXMuX2FsbFNoYXBlcyk7XG4gIH1cblxuXG4gIGZpbGxEYXRhVGV4dHVyZSgpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdIHtcblxuICAgIGNvbnN0IHBpeGVsczogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSA9IFtdO1xuXG4gICAgaWYgKCF0aGlzLl9yb290Tm9kZSkge1xuICAgICAgcmV0dXJuIHBpeGVscztcbiAgICB9XG5cbiAgICBjb25zdCBhbGxOb2RlczogQlZITm9kZVtdID0gW107XG5cbiAgICBjb25zdCBfcmVjRnVuYyA9IChjdXJyTm9kZTogQlZITm9kZSkgPT4ge1xuXG4gICAgICBhbGxOb2Rlcy5wdXNoKGN1cnJOb2RlKTtcblxuICAgICAgaWYgKGN1cnJOb2RlLl9sZWZ0Tm9kZSkge1xuICAgICAgICBfcmVjRnVuYyhjdXJyTm9kZS5fbGVmdE5vZGUpO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJOb2RlLl9yaWdodE5vZGUpIHtcbiAgICAgICAgX3JlY0Z1bmMoY3Vyck5vZGUuX3JpZ2h0Tm9kZSk7XG4gICAgICB9XG5cbiAgICB9O1xuICAgIF9yZWNGdW5jKHRoaXMuX3Jvb3ROb2RlKTtcblxuICAgIGFsbE5vZGVzLnNvcnQoKGEsIGIpID0+IGEuX2luZGV4IC0gYi5faW5kZXgpO1xuXG4gICAgZm9yIChjb25zdCBjdXJyTm9kZSBvZiBhbGxOb2Rlcykge1xuXG4gICAgICBwaXhlbHMucHVzaChbXG4gICAgICAgIGN1cnJOb2RlLl9taW5bMF0sXG4gICAgICAgIGN1cnJOb2RlLl9taW5bMV0sXG4gICAgICAgIGN1cnJOb2RlLl9taW5bMl0sXG4gICAgICAgIGN1cnJOb2RlLl9tYXhbMF0sXG4gICAgICBdKTtcbiAgICAgIHBpeGVscy5wdXNoKFtcbiAgICAgICAgY3Vyck5vZGUuX21heFsxXSxcbiAgICAgICAgY3Vyck5vZGUuX21heFsyXSxcbiAgICAgICAgKGN1cnJOb2RlLl9sZWZ0Tm9kZT8uX2luZGV4ID8/IC0yKSArIDAuNSxcbiAgICAgICAgKGN1cnJOb2RlLl9yaWdodE5vZGU/Ll9pbmRleCA/PyAtMikgKyAwLjUsXG4gICAgICBdKTtcbiAgICAgIHBpeGVscy5wdXNoKFtcbiAgICAgICAgKGN1cnJOb2RlLl9sZWZ0TGVhZj8uaW5kZXggPz8gLTIpICsgMC41LFxuICAgICAgICAoY3Vyck5vZGUuX3JpZ2h0TGVhZj8uaW5kZXggPz8gLTIpICsgMC41LFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgXSk7XG5cbiAgICB9XG5cbiAgICAvL1xuXG4gICAgcmV0dXJuIHBpeGVscztcbiAgfVxuXG4gIHJlbmRlcihcbiAgICByZW5kZXJlcjogSVN0YWNrUmVuZGVyZXIsXG4gICkge1xuXG4gICAgaWYgKCF0aGlzLl9yb290Tm9kZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3Jvb3ROb2RlLnJlbmRlcihyZW5kZXJlciwgWzAuNSwwLjAsMC4wXSk7XG5cbiAgICBmb3IgKGNvbnN0IGN1cnJTaGFwZSBvZiB0aGlzLl9hbGxTaGFwZXMpIHtcbiAgICAgIF9yZW5kZXJBQUJCKHJlbmRlcmVyLCBjdXJyU2hhcGUubWluLCBjdXJyU2hhcGUubWF4LCBbMS4wLDEuMCwwLjBdKTtcbiAgICB9XG5cbiAgfVxuXG59O1xuIiwKICAiaW1wb3J0IHsgZ3JhcGhpY3MgfSBmcm9tICdAbG9jYWwtZnJhbWV3b3JrJztcbmNvbnN0IHtcbiAgV2ViR0xDb250ZXh0LFxuICAvLyBEYXRhVGV4dHVyZSxcbiAgRGF0YVRleHR1cmVWZWM0ZjMyLFxuICBUZXh0dXJlLFxuICBGcmFtZUJ1ZmZlcixcbiAgU2hhZGVyUHJvZ3JhbSxcbiAgR2VvbWV0cnlXcmFwcGVyXG59ID0gZ3JhcGhpY3Mud2ViZ2wyO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgcmF5VHJhY2VyVmVydGV4IGZyb20gJy4vc2hhZGVycy9yYXktdHJhY2VyLmdsc2wudmVydCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgcmF5VHJhY2VyRnJhZ21lbnQgZnJvbSAnLi9zaGFkZXJzL3JheS10cmFjZXIuZ2xzbC5mcmFnJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHRleHR1cmVWZXJ0ZXggZnJvbSAnLi9zaGFkZXJzL3RleHR1cmUuZ2xzbC52ZXJ0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB0ZXh0dXJlRnJhZ21lbnQgZnJvbSAnLi9zaGFkZXJzL3RleHR1cmUuZ2xzbC5mcmFnJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IGFzY2lpQXJ0VmVydGV4IGZyb20gJy4vc2hhZGVycy9hc2NpaS1hcnQuZ2xzbC52ZXJ0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBhc2NpaUFydEZyYWdtZW50IGZyb20gJy4vc2hhZGVycy9hc2NpaS1hcnQuZ2xzbC5mcmFnJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmltcG9ydCB7IEJWSCB9IGZyb20gJy4vQlZIJztcblxuY29uc3QgX2RlZ3JlZVRvUmFkID0gKGFuZ2xlOiBudW1iZXIpID0+IChhbmdsZSAqIE1hdGguUEkpIC8gMTgwO1xuXG5leHBvcnQgaW50ZXJmYWNlIElEZWZpbml0aW9uIHtcbiAgY2FudmFzV2lkdGg6IG51bWJlcjtcbiAgY2FudmFzSGVpZ2h0OiBudW1iZXI7XG4gIGZvdnk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUHVibGljU3BoZXJlIHtcbiAgcG9zaXRpb246IGdsbS5SZWFkb25seVZlYzM7XG4gIG9yaWVudGF0aW9uOiBnbG0uUmVhZG9ubHlRdWF0O1xuICByYWRpdXM6IG51bWJlcjtcbiAgY29sb3I6IGdsbS5SZWFkb25seVZlYzM7XG4gIHJlZmxlY3Rpb25GYWN0b3I6IG51bWJlcjtcbiAgcmVmcmFjdGlvbkZhY3RvcjogbnVtYmVyO1xuICBjYXN0U2hhZG93RW5hYmxlZDogYm9vbGVhbjtcbiAgcmVjZWl2ZUxpZ2h0RW5hYmxlZDogYm9vbGVhbjtcbiAgY2hlc3Nib2FyZEVuYWJsZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIElJbnRlcm5hbFNwaGVyZSA9IElQdWJsaWNTcGhlcmU7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVB1YmxpY0JveCB7XG4gIHBvc2l0aW9uOiBnbG0uUmVhZG9ubHlWZWMzO1xuICBvcmllbnRhdGlvbjogZ2xtLlJlYWRvbmx5UXVhdDtcbiAgYm94U2l6ZTogZ2xtLlJlYWRvbmx5VmVjMztcbiAgY29sb3I6IGdsbS5SZWFkb25seVZlYzM7XG4gIHJlZmxlY3Rpb25GYWN0b3I6IG51bWJlcjtcbiAgcmVmcmFjdGlvbkZhY3RvcjogbnVtYmVyO1xuICBjYXN0U2hhZG93RW5hYmxlZDogYm9vbGVhbjtcbiAgcmVjZWl2ZUxpZ2h0RW5hYmxlZDogYm9vbGVhbjtcbiAgY2hlc3Nib2FyZEVuYWJsZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIElJbnRlcm5hbEJveCA9IElQdWJsaWNCb3g7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVB1YmxpY1RyaWFuZ2xlIHtcbiAgdjA6IGdsbS5SZWFkb25seVZlYzM7XG4gIHYxOiBnbG0uUmVhZG9ubHlWZWMzO1xuICB2MjogZ2xtLlJlYWRvbmx5VmVjMztcbiAgY29sb3I6IGdsbS5SZWFkb25seVZlYzM7XG4gIHJlZmxlY3Rpb25GYWN0b3I6IG51bWJlcjtcbiAgY2FzdFNoYWRvd0VuYWJsZWQ6IGJvb2xlYW47XG4gIHJlY2VpdmVMaWdodEVuYWJsZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIElJbnRlcm5hbFRyaWFuZ2xlID0gSVB1YmxpY1RyaWFuZ2xlO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTdW5MaWdodCB7XG4gIGRpcmVjdGlvbjogZ2xtLlJlYWRvbmx5VmVjMztcbiAgaW50ZW5zaXR5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNwb3RMaWdodCB7XG4gIHBvc2l0aW9uOiBnbG0uUmVhZG9ubHlWZWMzO1xuICBpbnRlbnNpdHk6IG51bWJlcjtcbiAgcmFkaXVzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNhbWVyYSB7XG4gIHBvc2l0aW9uOiBnbG0udmVjMztcbiAgdGFyZ2V0OiBnbG0udmVjMztcbiAgdXA6IGdsbS52ZWMzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTdGFja1JlbmRlcmVyIHtcbiAgcHVzaExpbmUoXG4gICAgaW5Qb2ludEE6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb2ludEI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgKTogdm9pZDtcbn07XG5cblxuXG5cblxuXG5cbi8vXG4vL1xuLy9cblxuLy9cbi8vXG4vL1xuXG5cblxuXG5cblxuLy8gI3JlZ2lvbiBSQVlUUkFDRVJcblxuZXhwb3J0IGludGVyZmFjZSBJUmF5VHJhY2VyUmVuZGVyZXIge1xuICBwdXNoU3BoZXJlKHtcbiAgICBwb3NpdGlvbixcbiAgICBvcmllbnRhdGlvbixcbiAgICByYWRpdXMsXG4gICAgY29sb3IsXG4gICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICBjaGVzc2JvYXJkRW5hYmxlZCxcbiAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICByZWNlaXZlTGlnaHRFbmFibGVkXG4gIH06IElQdWJsaWNTcGhlcmUpOiB2b2lkO1xuXG4gIHB1c2hCb3goe1xuICAgIHBvc2l0aW9uLFxuICAgIG9yaWVudGF0aW9uLFxuICAgIGJveFNpemUsXG4gICAgY29sb3IsXG4gICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICBjaGVzc2JvYXJkRW5hYmxlZCxcbiAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICByZWNlaXZlTGlnaHRFbmFibGVkXG4gIH06IElQdWJsaWNCb3gpOiB2b2lkO1xuXG4gIHB1c2hUcmlhbmdsZSh7XG4gICAgdjAsXG4gICAgdjEsXG4gICAgdjIsXG4gICAgY29sb3IsXG4gICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICByZWNlaXZlTGlnaHRFbmFibGVkXG4gIH06IElQdWJsaWNUcmlhbmdsZSk6IHZvaWQ7XG5cbiAgcHVzaFN1bkxpZ2h0KHsgZGlyZWN0aW9uLCBpbnRlbnNpdHkgfTogSVN1bkxpZ2h0KTogdm9pZDtcblxuICBwdXNoU3BvdExpZ2h0KHsgcG9zaXRpb24sIGludGVuc2l0eSwgcmFkaXVzIH06IElTcG90TGlnaHQpOiB2b2lkO1xuXG4gIGxvb2tBdChcbiAgICBleWU6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgdGFyZ2V0OiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIHVwOiBnbG0uUmVhZG9ubHlWZWMzXG4gICk6IHZvaWQ7XG5cbiAgcmVuZGVyKCk6IHZvaWQ7XG4gIHJlbmRlckFzY2lpQXJ0KCk6IHZvaWQ7XG5cbiAgcmVzZXQoKTogdm9pZDtcblxuICBzZXRSZXNvbHV0aW9uQ29lZihpblJlc29sdXRpb25Db2VmOiBudW1iZXIpOiB2b2lkO1xuICBnZXRSZXNvbHV0aW9uQ29lZigpOiBudW1iZXI7XG5cbiAgc2V0QW50aUFsaWFzaW5nKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkO1xuICBnZXRBbnRpQWxpYXNpbmcoKTogYm9vbGVhbjtcblxuICBnZXRDdXJyZW50U2l6ZSgpOiBnbG0uUmVhZG9ubHlWZWMyO1xufVxuXG5leHBvcnQgY2xhc3MgUmF5VHJhY2VyUmVuZGVyZXIgaW1wbGVtZW50cyBJUmF5VHJhY2VyUmVuZGVyZXIge1xuICBwcml2YXRlIF9jYW1lcmFGb3Z5OiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfY2FudmFzV2lkdGg6IG51bWJlcjtcbiAgcHJpdmF0ZSBfY2FudmFzSGVpZ2h0OiBudW1iZXI7XG4gIHByaXZhdGUgX3JlbmRlcldpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgX3JlbmRlckhlaWdodDogbnVtYmVyO1xuICBwcml2YXRlIF9yZXNvbHV0aW9uQ29lZjogbnVtYmVyID0gMTtcbiAgcHJpdmF0ZSBfYW50aUFsaWFzaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfcmF5VHJhY2VyU2hhZGVyUHJvZ3JhbTogZ3JhcGhpY3Mud2ViZ2wyLklVbmJvdW5kU2hhZGVyO1xuICBwcml2YXRlIF90ZXh0dXJlU2hhZGVyUHJvZ3JhbTogZ3JhcGhpY3Mud2ViZ2wyLklVbmJvdW5kU2hhZGVyO1xuICBwcml2YXRlIF9hc2NpaUFydFNoYWRlclByb2dyYW06IGdyYXBoaWNzLndlYmdsMi5JVW5ib3VuZFNoYWRlcjtcblxuICBwcml2YXRlIF9yYXlUcmFjZXJHZW9tZXRyeTogZ3JhcGhpY3Mud2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeTtcbiAgcHJpdmF0ZSBfc2NyZWVuR2VvbWV0cnk6IGdyYXBoaWNzLndlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnk7XG4gIHByaXZhdGUgX2FzY2lpQXJ0U2NyZWVuR2VvbWV0cnk6IGdyYXBoaWNzLndlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnk7XG5cbiAgcHJpdmF0ZSBfZmluYWxUZXh0dXJlOiBncmFwaGljcy53ZWJnbDIuSVVuYm91bmRUZXh0dXJlO1xuICBwcml2YXRlIF9mcmFtZUJ1ZmZlcjogZ3JhcGhpY3Mud2ViZ2wyLklVbmJvdW5kRnJhbWVCdWZmZXI7XG5cbiAgcHJpdmF0ZSBfc2NlbmVEYXRhVGV4dHVyZTogZ3JhcGhpY3Mud2ViZ2wyLklVbmJvdW5kRGF0YVRleHR1cmVWZWM0ZjMyO1xuICBwcml2YXRlIF9zcGhlcmVzOiBJSW50ZXJuYWxTcGhlcmVbXSA9IFtdO1xuICBwcml2YXRlIF9ib3hlczogSUludGVybmFsQm94W10gPSBbXTtcbiAgcHJpdmF0ZSBfdHJpYW5nbGVzOiBJSW50ZXJuYWxUcmlhbmdsZVtdID0gW107XG5cbiAgcHJpdmF0ZSBfbWF0ZXJpYWxzRGF0YVRleHR1cmU6IGdyYXBoaWNzLndlYmdsMi5JVW5ib3VuZERhdGFUZXh0dXJlVmVjNGYzMjtcblxuICBwcml2YXRlIF9saWdodHNEYXRhVGV4dHVyZTogZ3JhcGhpY3Mud2ViZ2wyLklVbmJvdW5kRGF0YVRleHR1cmVWZWM0ZjMyO1xuICBwcml2YXRlIF9zdW5MaWdodHM6IElTdW5MaWdodFtdID0gW107XG4gIHByaXZhdGUgX3Nwb3RMaWdodHM6IElTcG90TGlnaHRbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2J2aERhdGFUZXh0dXJlOiBncmFwaGljcy53ZWJnbDIuSVVuYm91bmREYXRhVGV4dHVyZVZlYzRmMzI7XG5cbiAgcHJpdmF0ZSBfY2FtZXJhOiBJQ2FtZXJhO1xuXG4gIHByaXZhdGUgX2J2aCA9IG5ldyBCVkgoKTtcblxuICBjb25zdHJ1Y3RvcihpbkRlZjogSURlZmluaXRpb24pIHtcbiAgICB0aGlzLl9jYW1lcmFGb3Z5ID0gaW5EZWYuZm92eTtcblxuICAgIHRoaXMuX3JlbmRlcldpZHRoID0gdGhpcy5fY2FudmFzV2lkdGggPSBpbkRlZi5jYW52YXNXaWR0aDtcbiAgICB0aGlzLl9yZW5kZXJIZWlnaHQgPSB0aGlzLl9jYW52YXNIZWlnaHQgPSBpbkRlZi5jYW52YXNIZWlnaHQ7XG5cbiAgICB0aGlzLl9yYXlUcmFjZXJTaGFkZXJQcm9ncmFtID0gbmV3IFNoYWRlclByb2dyYW0oJ1JheVRyYWNlclJlbmRlcmVyLTEnLCB7XG4gICAgICB2ZXJ0ZXhTcmM6IHJheVRyYWNlclZlcnRleCxcbiAgICAgIGZyYWdtZW50U3JjOiByYXlUcmFjZXJGcmFnbWVudCxcbiAgICAgIGF0dHJpYnV0ZXM6IFsnYV92ZXJ0ZXhQb3NpdGlvbicsICdhX3Bsb3RQb3NpdGlvbiddLFxuICAgICAgdW5pZm9ybXM6IFtcbiAgICAgICAgJ3VfY2FtZXJhRXllJyxcblxuICAgICAgICAndV9zY2VuZVRleHR1cmVEYXRhJyxcbiAgICAgICAgJ3Vfc2NlbmVUZXh0dXJlU2l6ZScsXG4gICAgICAgICd1X21hdGVyaWFsc1RleHR1cmVEYXRhJyxcblxuICAgICAgICAndV90b3RhbFNoYXBlcycsXG5cbiAgICAgICAgJ3VfbGlnaHRzVGV4dHVyZURhdGEnLFxuXG4gICAgICAgICd1X3N1bkxpZ2h0c1N0b3AnLFxuICAgICAgICAndV9zcG90TGlnaHRzU3RvcCcsXG5cbiAgICAgICAgJ3VfYnZoRGF0YVRleHR1cmUnLFxuICAgICAgXVxuICAgIH0pO1xuXG4gICAgdGhpcy5fdGV4dHVyZVNoYWRlclByb2dyYW0gPSBuZXcgU2hhZGVyUHJvZ3JhbSgnUmF5VHJhY2VyUmVuZGVyZXItMScsIHtcbiAgICAgIHZlcnRleFNyYzogdGV4dHVyZVZlcnRleCxcbiAgICAgIGZyYWdtZW50U3JjOiB0ZXh0dXJlRnJhZ21lbnQsXG4gICAgICBhdHRyaWJ1dGVzOiBbJ2FfdmVydGV4UG9zaXRpb24nLCAnYV92ZXJ0ZXhUZXh0dXJlQ29vcmQnXSxcbiAgICAgIHVuaWZvcm1zOiBbJ3VfdGV4dHVyZScsICd1X3N0ZXAnXVxuICAgIH0pO1xuXG4gICAgdGhpcy5fYXNjaWlBcnRTaGFkZXJQcm9ncmFtID0gbmV3IFNoYWRlclByb2dyYW0oJ1JheVRyYWNlclJlbmRlcmVyLWFzY2lpLWFydCcsIHtcbiAgICAgIHZlcnRleFNyYzogYXNjaWlBcnRWZXJ0ZXgsXG4gICAgICBmcmFnbWVudFNyYzogYXNjaWlBcnRGcmFnbWVudCxcbiAgICAgIGF0dHJpYnV0ZXM6IFsnYV92ZXJ0ZXhQb3NpdGlvbicsICdhX3ZlcnRleFRleHR1cmVDb29yZCddLFxuICAgICAgdW5pZm9ybXM6IFsndV90ZXh0dXJlJ11cbiAgICB9KTtcblxuICAgIHRoaXMuX2ZpbmFsVGV4dHVyZSA9IG5ldyBUZXh0dXJlKCk7XG4gICAgdGhpcy5fZnJhbWVCdWZmZXIgPSBuZXcgRnJhbWVCdWZmZXIoKTtcblxuICAgIHRoaXMuX2ZpbmFsVGV4dHVyZS5pbml0aWFsaXplKCk7XG4gICAgdGhpcy5fZmluYWxUZXh0dXJlLnByZUJpbmQoKGJvdW5kVGV4dHVyZSkgPT4ge1xuICAgICAgYm91bmRUZXh0dXJlLmFsbG9jYXRlKHRoaXMuX3JlbmRlcldpZHRoLCB0aGlzLl9yZW5kZXJIZWlnaHQpO1xuXG4gICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5iaW5kKChib3VuZEZyYW1lQnVmZmVyKSA9PiB7XG4gICAgICAgIGJvdW5kRnJhbWVCdWZmZXIuYXR0YWNoVGV4dHVyZShib3VuZFRleHR1cmUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvL1xuICAgIC8vXG5cbiAgICBjb25zdCBnZW9CdWlsZGVyID0gbmV3IEdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeUJ1aWxkZXIoKTtcbiAgICBnZW9CdWlsZGVyXG4gICAgICAucmVzZXQoKVxuICAgICAgLnNldFByaW1pdGl2ZVR5cGUoJ3RyaWFuZ2xlU3RyaXAnKVxuICAgICAgLmFkZFZibygpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX3ZlcnRleFBvc2l0aW9uJywgJ3ZlYzJmJylcbiAgICAgIC5hZGRWYm8oKVxuICAgICAgLnNldFZib0FzRHluYW1pYygpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX3Bsb3RQb3NpdGlvbicsICd2ZWMzZicpO1xuXG4gICAgdGhpcy5fcmF5VHJhY2VyR2VvbWV0cnkgPSBuZXcgR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5KFxuICAgICAgdGhpcy5fcmF5VHJhY2VyU2hhZGVyUHJvZ3JhbSxcbiAgICAgIGdlb0J1aWxkZXIuZ2V0RGVmKClcbiAgICApO1xuXG4gICAgY29uc3QgcmF5VHJhY2VyVmVydGljZXMgPSBbXTtcbiAgICByYXlUcmFjZXJWZXJ0aWNlcy5wdXNoKCsxLjAsICsxLjApOyAvLyB0b3AgcmlnaHRcbiAgICByYXlUcmFjZXJWZXJ0aWNlcy5wdXNoKC0xLjAsICsxLjApOyAvLyB0b3AgbGVmdFxuICAgIHJheVRyYWNlclZlcnRpY2VzLnB1c2goKzEuMCwgLTEuMCk7IC8vIGJvdHRvbSByaWdodFxuICAgIHJheVRyYWNlclZlcnRpY2VzLnB1c2goLTEuMCwgLTEuMCk7IC8vIGJvdHRvbSBsZWZ0XG5cbiAgICB0aGlzLl9yYXlUcmFjZXJHZW9tZXRyeS5hbGxvY2F0ZUJ1ZmZlcihcbiAgICAgIDAsXG4gICAgICByYXlUcmFjZXJWZXJ0aWNlcyxcbiAgICAgIHJheVRyYWNlclZlcnRpY2VzLmxlbmd0aFxuICAgICk7XG4gICAgdGhpcy5fcmF5VHJhY2VyR2VvbWV0cnkuc2V0UHJpbWl0aXZlU3RhcnQoMCk7XG4gICAgdGhpcy5fcmF5VHJhY2VyR2VvbWV0cnkuc2V0UHJpbWl0aXZlQ291bnQoNCk7XG5cbiAgICAvL1xuICAgIC8vXG5cbiAgICBjb25zdCBzY3JlZW5WZXJ0aWNlczogbnVtYmVyW10gPSBbXTtcbiAgICBzY3JlZW5WZXJ0aWNlcy5wdXNoKCsxLjAsICsxLjAsIDEsIDEpOyAvLyB0b3AgcmlnaHRcbiAgICBzY3JlZW5WZXJ0aWNlcy5wdXNoKC0xLjAsICsxLjAsIDAsIDEpOyAvLyB0b3AgbGVmdFxuICAgIHNjcmVlblZlcnRpY2VzLnB1c2goKzEuMCwgLTEuMCwgMSwgMCk7IC8vIGJvdHRvbSByaWdodFxuICAgIHNjcmVlblZlcnRpY2VzLnB1c2goLTEuMCwgLTEuMCwgMCwgMCk7IC8vIGJvdHRvbSBsZWZ0XG5cbiAgICAvL1xuXG4gICAgZ2VvQnVpbGRlclxuICAgICAgLnJlc2V0KClcbiAgICAgIC5zZXRQcmltaXRpdmVUeXBlKCd0cmlhbmdsZVN0cmlwJylcbiAgICAgIC5hZGRWYm8oKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV92ZXJ0ZXhQb3NpdGlvbicsICd2ZWMyZicpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX3ZlcnRleFRleHR1cmVDb29yZCcsICd2ZWMyZicpO1xuXG4gICAgLy9cblxuICAgIHRoaXMuX3NjcmVlbkdlb21ldHJ5ID0gbmV3IEdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeShcbiAgICAgIHRoaXMuX2FzY2lpQXJ0U2hhZGVyUHJvZ3JhbSxcbiAgICAgIGdlb0J1aWxkZXIuZ2V0RGVmKClcbiAgICApO1xuXG4gICAgdGhpcy5fc2NyZWVuR2VvbWV0cnkuYWxsb2NhdGVCdWZmZXIoXG4gICAgICAwLFxuICAgICAgc2NyZWVuVmVydGljZXMsXG4gICAgICBzY3JlZW5WZXJ0aWNlcy5sZW5ndGhcbiAgICApO1xuICAgIHRoaXMuX3NjcmVlbkdlb21ldHJ5LnNldFByaW1pdGl2ZVN0YXJ0KDApO1xuICAgIHRoaXMuX3NjcmVlbkdlb21ldHJ5LnNldFByaW1pdGl2ZUNvdW50KDQpO1xuXG4gICAgLy9cblxuICAgIHRoaXMuX2FzY2lpQXJ0U2NyZWVuR2VvbWV0cnkgPSBuZXcgR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5KFxuICAgICAgdGhpcy5fYXNjaWlBcnRTaGFkZXJQcm9ncmFtLFxuICAgICAgZ2VvQnVpbGRlci5nZXREZWYoKVxuICAgICk7XG5cbiAgICB0aGlzLl9hc2NpaUFydFNjcmVlbkdlb21ldHJ5LmFsbG9jYXRlQnVmZmVyKFxuICAgICAgMCxcbiAgICAgIHNjcmVlblZlcnRpY2VzLFxuICAgICAgc2NyZWVuVmVydGljZXMubGVuZ3RoXG4gICAgKTtcbiAgICB0aGlzLl9hc2NpaUFydFNjcmVlbkdlb21ldHJ5LnNldFByaW1pdGl2ZVN0YXJ0KDApO1xuICAgIHRoaXMuX2FzY2lpQXJ0U2NyZWVuR2VvbWV0cnkuc2V0UHJpbWl0aXZlQ291bnQoNCk7XG5cbiAgICAvL1xuICAgIC8vXG5cbiAgICB0aGlzLl9zY2VuZURhdGFUZXh0dXJlID0gbmV3IERhdGFUZXh0dXJlVmVjNGYzMigpO1xuICAgIHRoaXMuX3NjZW5lRGF0YVRleHR1cmUuaW5pdGlhbGl6ZSgyMDQ4KTtcblxuICAgIHRoaXMuX21hdGVyaWFsc0RhdGFUZXh0dXJlID0gbmV3IERhdGFUZXh0dXJlVmVjNGYzMigpO1xuICAgIHRoaXMuX21hdGVyaWFsc0RhdGFUZXh0dXJlLmluaXRpYWxpemUoMjA0OCk7XG5cbiAgICB0aGlzLl9saWdodHNEYXRhVGV4dHVyZSA9IG5ldyBEYXRhVGV4dHVyZVZlYzRmMzIoKTtcbiAgICB0aGlzLl9saWdodHNEYXRhVGV4dHVyZS5pbml0aWFsaXplKDIwNDgpO1xuXG4gICAgdGhpcy5fYnZoRGF0YVRleHR1cmUgPSBuZXcgRGF0YVRleHR1cmVWZWM0ZjMyKCk7XG4gICAgdGhpcy5fYnZoRGF0YVRleHR1cmUuaW5pdGlhbGl6ZSgyMDQ4KTtcblxuICAgIHRoaXMuX2NhbWVyYSA9IHtcbiAgICAgIHBvc2l0aW9uOiBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApLFxuICAgICAgdGFyZ2V0OiBnbG0udmVjMy5mcm9tVmFsdWVzKDEuNSwgMS41LCAxLjUpLFxuICAgICAgdXA6IGdsbS52ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMClcbiAgICB9O1xuICB9XG5cbiAgcHVzaFNwaGVyZSh7XG4gICAgcG9zaXRpb24sXG4gICAgb3JpZW50YXRpb24sXG4gICAgcmFkaXVzLFxuICAgIGNvbG9yLFxuICAgIHJlZmxlY3Rpb25GYWN0b3IsXG4gICAgcmVmcmFjdGlvbkZhY3RvcixcbiAgICBjaGVzc2JvYXJkRW5hYmxlZCxcbiAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICByZWNlaXZlTGlnaHRFbmFibGVkXG4gIH06IElQdWJsaWNTcGhlcmUpOiB2b2lkIHtcbiAgICBpZiAocmFkaXVzIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBzcGhlcmUgcmFkaXVzJyk7XG4gICAgfVxuICAgIGlmIChyZWZsZWN0aW9uRmFjdG9yIDwgMCB8fCByZWZsZWN0aW9uRmFjdG9yID4gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHNwaGVyZSByZWZsZWN0aW9uJyk7XG4gICAgfVxuICAgIGlmIChyZWZyYWN0aW9uRmFjdG9yIDwgMCB8fCByZWZyYWN0aW9uRmFjdG9yID4gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHNwaGVyZSByZWZyYWN0aW9uRmFjdG9yJyk7XG4gICAgfVxuXG5cbiAgICAvLyBjb25zdCBxdWF0ID0gZ2xtLnF1YXQuaWRlbnRpdHkoZ2xtLnF1YXQuY3JlYXRlKCkpO1xuICAgIC8vIGdsbS5xdWF0LnNldEF4aXNBbmdsZShxdWF0LCBbMCwwLDFdLCBNYXRoLlBJICogMC4yNSk7XG5cbiAgICAvLyBjb25zdCBxdWF0QSA9IGdsbS5xdWF0LmlkZW50aXR5KGdsbS5xdWF0LmNyZWF0ZSgpKTtcbiAgICAvLyBnbG0ucXVhdC5zZXRBeGlzQW5nbGUocXVhdEEsIFswLDAsMV0sIE1hdGguUEkgKiAwLjI1KTtcblxuICAgIC8vIGNvbnN0IHF1YXRCID0gZ2xtLnF1YXQuaWRlbnRpdHkoZ2xtLnF1YXQuY3JlYXRlKCkpO1xuICAgIC8vIGdsbS5xdWF0LnNldEF4aXNBbmdsZShxdWF0QiwgWzEsMCwwXSwgTWF0aC5QSSAqIDAuMjUpO1xuXG4gICAgLy8gY29uc3QgcXVhdEMgPSBnbG0ucXVhdC5pZGVudGl0eShnbG0ucXVhdC5jcmVhdGUoKSk7XG4gICAgLy8gZ2xtLnF1YXQubXVsdGlwbHkocXVhdEMsIHF1YXRBLCBxdWF0Qik7XG5cbiAgICAvLyBjb25zdCBtYXQ0ID0gZ2xtLm1hdDQuY3JlYXRlKCk7XG4gICAgLy8gZ2xtLm1hdDQuaWRlbnRpdHkobWF0NCk7XG4gICAgLy8gZ2xtLm1hdDQudHJhbnNsYXRlKG1hdDQsIG1hdDQsIHBvc2l0aW9uKTtcblxuICAgIC8vIGdsbS5tYXQ0LnJvdGF0ZVkobWF0NCwgbWF0NCwgTWF0aC5QSSAqIDAuMjUpOyAvLyB2ZXJ0aWNhbCBheGlzIGZpcnN0XG5cbiAgICAvLyAvLyBnbG0ubWF0NC5yb3RhdGVZKG1hdDQsIG1hdDQsIGFuZ2xlWSk7IC8vIHZlcnRpY2FsIGF4aXMgZmlyc3RcbiAgICAvLyAvLyBnbG0ubWF0NC5yb3RhdGVaKG1hdDQsIG1hdDQsIGFuZ2xlWik7XG4gICAgLy8gLy8gZ2xtLm1hdDQucm90YXRlWChtYXQ0LCBtYXQ0LCBhbmdsZVgpO1xuICAgIC8vIC8vIC8vIGdsbS5tYXQ0LnNjYWxlKG1hdDQsIG1hdDQsIFswLjUsMC41LDAuNV0pO1xuXG4gICAgdGhpcy5fc3BoZXJlcy5wdXNoKHtcbiAgICAgIHBvc2l0aW9uOiBbcG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXV0sXG4gICAgICAvLyBvcmllbnRhdGlvbjogW3F1YXRDWzBdLCBxdWF0Q1sxXSwgcXVhdENbMl0sIHF1YXRDWzNdXSxcbiAgICAgIG9yaWVudGF0aW9uOiBbb3JpZW50YXRpb25bMF0sIG9yaWVudGF0aW9uWzFdLCBvcmllbnRhdGlvblsyXSwgb3JpZW50YXRpb25bM11dLFxuICAgICAgLy8gbWF0cml4OiBtYXQ0LFxuICAgICAgcmFkaXVzLFxuICAgICAgY29sb3I6IFtjb2xvclswXSwgY29sb3JbMV0sIGNvbG9yWzJdXSxcbiAgICAgIHJlZmxlY3Rpb25GYWN0b3IsXG4gICAgICByZWZyYWN0aW9uRmFjdG9yLFxuICAgICAgY2hlc3Nib2FyZEVuYWJsZWQsXG4gICAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICAgIHJlY2VpdmVMaWdodEVuYWJsZWRcbiAgICB9KTtcbiAgfVxuXG4gIHB1c2hCb3goe1xuICAgIHBvc2l0aW9uLFxuICAgIG9yaWVudGF0aW9uLFxuICAgIGJveFNpemUsXG4gICAgY29sb3IsXG4gICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICByZWZyYWN0aW9uRmFjdG9yLFxuICAgIGNoZXNzYm9hcmRFbmFibGVkLFxuICAgIGNhc3RTaGFkb3dFbmFibGVkLFxuICAgIHJlY2VpdmVMaWdodEVuYWJsZWRcbiAgfTogSVB1YmxpY0JveCk6IHZvaWQge1xuICAgIGlmIChib3hTaXplWzBdIDw9IDAgfHwgYm94U2l6ZVsxXSA8PSAwIHx8IGJveFNpemVbMl0gPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGJveCBzaXplJyk7XG4gICAgfVxuICAgIGlmIChyZWZsZWN0aW9uRmFjdG9yIDwgMCB8fCByZWZsZWN0aW9uRmFjdG9yID4gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGJveCByZWZsZWN0aW9uJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fYm94ZXMucHVzaCh7XG4gICAgICBwb3NpdGlvbjogW3Bvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl1dLFxuICAgICAgb3JpZW50YXRpb246IFtvcmllbnRhdGlvblswXSwgb3JpZW50YXRpb25bMV0sIG9yaWVudGF0aW9uWzJdLCBvcmllbnRhdGlvblszXV0sXG4gICAgICBib3hTaXplOiBnbG0udmVjMy5jbG9uZShib3hTaXplKSxcbiAgICAgIGNvbG9yOiBnbG0udmVjMy5jbG9uZShjb2xvciksXG4gICAgICByZWZsZWN0aW9uRmFjdG9yLFxuICAgICAgcmVmcmFjdGlvbkZhY3RvcixcbiAgICAgIGNoZXNzYm9hcmRFbmFibGVkLFxuICAgICAgY2FzdFNoYWRvd0VuYWJsZWQsXG4gICAgICByZWNlaXZlTGlnaHRFbmFibGVkXG4gICAgfSk7XG4gIH1cblxuICBwdXNoVHJpYW5nbGUoe1xuICAgIHYwLFxuICAgIHYxLFxuICAgIHYyLFxuICAgIGNvbG9yLFxuICAgIHJlZmxlY3Rpb25GYWN0b3IsXG4gICAgY2FzdFNoYWRvd0VuYWJsZWQsXG4gICAgcmVjZWl2ZUxpZ2h0RW5hYmxlZFxuICB9OiBJUHVibGljVHJpYW5nbGUpIHtcbiAgICBpZiAocmVmbGVjdGlvbkZhY3RvciA8IDAgfHwgcmVmbGVjdGlvbkZhY3RvciA+IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCB0cmlhbmdsZSByZWZsZWN0aW9uJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fdHJpYW5nbGVzLnB1c2goe1xuICAgICAgdjA6IGdsbS52ZWMzLmNsb25lKHYwKSxcbiAgICAgIHYxOiBnbG0udmVjMy5jbG9uZSh2MSksXG4gICAgICB2MjogZ2xtLnZlYzMuY2xvbmUodjIpLFxuICAgICAgY29sb3I6IGdsbS52ZWMzLmNsb25lKGNvbG9yKSxcbiAgICAgIHJlZmxlY3Rpb25GYWN0b3IsXG4gICAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICAgIHJlY2VpdmVMaWdodEVuYWJsZWRcbiAgICB9KTtcbiAgfVxuXG4gIHB1c2hTdW5MaWdodCh7IGRpcmVjdGlvbiwgaW50ZW5zaXR5IH06IElTdW5MaWdodCkge1xuICAgIC8vIGFkZCBzdW4gbGlnaHRcblxuICAgIGlmIChpbnRlbnNpdHkgPD0gMCkgdGhyb3cgbmV3IEVycm9yKCdpbnRlbnNpdHkgY2Fubm90IGJlIDAnKTtcbiAgICBpZiAoZ2xtLnZlYzMubGVuZ3RoKGRpcmVjdGlvbikgPT09IDApXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RpcmVjdGlvbiBjYW5ub3QgYmUgMCcpO1xuXG4gICAgY29uc3QgZGlyID0gZ2xtLnZlYzMubm9ybWFsaXplKGdsbS52ZWMzLmNsb25lKGRpcmVjdGlvbiksIGRpcmVjdGlvbik7XG5cbiAgICB0aGlzLl9zdW5MaWdodHMucHVzaCh7IGRpcmVjdGlvbjogZGlyLCBpbnRlbnNpdHkgfSk7XG4gIH1cblxuICBwdXNoU3BvdExpZ2h0KHsgcG9zaXRpb24sIGludGVuc2l0eSwgcmFkaXVzIH06IElTcG90TGlnaHQpOiB2b2lkIHtcbiAgICAvLyBhZGQgc3BvdCBsaWdodFxuXG4gICAgaWYgKGludGVuc2l0eSA8PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ2ludGVuc2l0eSBjYW5ub3QgYmUgMCcpO1xuICAgIGlmIChyYWRpdXMgPD0gMCkgdGhyb3cgbmV3IEVycm9yKCdyYWRpdXMgY2Fubm90IGJlIDw9IDAnKTtcblxuICAgIHRoaXMuX3Nwb3RMaWdodHMucHVzaCh7XG4gICAgICBwb3NpdGlvbjogZ2xtLnZlYzMuY2xvbmUocG9zaXRpb24pLFxuICAgICAgaW50ZW5zaXR5LFxuICAgICAgcmFkaXVzXG4gICAgfSk7XG4gIH1cblxuICBsb29rQXQoXG4gICAgZXllOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIHRhcmdldDogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICB1cDogZ2xtLlJlYWRvbmx5VmVjM1xuICApIHtcbiAgICBnbG0udmVjMy5jb3B5KHRoaXMuX2NhbWVyYS5wb3NpdGlvbiwgZXllKTtcblxuICAgIC8vXG4gICAgLy9cblxuICAgIGxldCBmb3J3YXJkRGlyID0gZ2xtLnZlYzMuc3ViKGdsbS52ZWMzLmNyZWF0ZSgpLCB0YXJnZXQsIGV5ZSk7XG4gICAgZm9yd2FyZERpciA9IGdsbS52ZWMzLm5vcm1hbGl6ZShmb3J3YXJkRGlyLCBmb3J3YXJkRGlyKTtcbiAgICBmb3J3YXJkRGlyID0gZ2xtLnZlYzMuYWRkKGZvcndhcmREaXIsIGV5ZSwgZm9yd2FyZERpcik7XG4gICAgZ2xtLnZlYzMuY29weSh0aGlzLl9jYW1lcmEudGFyZ2V0LCBmb3J3YXJkRGlyKTtcblxuICAgIC8vXG4gICAgLy9cblxuICAgIGNvbnN0IHVwRGlyID0gZ2xtLnZlYzMubm9ybWFsaXplKGdsbS52ZWMzLmNyZWF0ZSgpLCB1cCk7XG4gICAgZ2xtLnZlYzMuY29weSh0aGlzLl9jYW1lcmEudXAsIHVwRGlyKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICAvLyB0ZXh0dXJlIHBhc3MgZmlyc3RcbiAgICAvLyAtPiB3ZSByZW5kZXIgdGhlIHByZXZpb3VzIGZyYW1lIHRvIGF2b2lkIHBvdGVudGlhbCB3ZWJnbCBxdWV1ZSBibG9ja2luZ1xuICAgIHRoaXMuX3JlbmRlclRleHR1cmVQYXNzKCk7XG4gICAgdGhpcy5fcmVuZGVyUmF5VHJhY2luZ1Bhc3MoKTtcbiAgfVxuXG4gIHJlbmRlckFzY2lpQXJ0KCkge1xuICAgIC8vIHRleHR1cmUgcGFzcyBmaXJzdFxuICAgIC8vIC0+IHdlIHJlbmRlciB0aGUgcHJldmlvdXMgZnJhbWUgdG8gYXZvaWQgcG90ZW50aWFsIHdlYmdsIHF1ZXVlIGJsb2NraW5nXG4gICAgdGhpcy5fcmVuZGVyQXNjaWlBcnRUZXh0dXJlUGFzcygpO1xuICAgIHRoaXMuX3JlbmRlclJheVRyYWNpbmdQYXNzKCk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJUZXh0dXJlUGFzcygpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC52aWV3cG9ydCgwLCAwLCB0aGlzLl9jYW52YXNXaWR0aCwgdGhpcy5fY2FudmFzSGVpZ2h0KTtcbiAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUIC8qfCBnbC5ERVBUSF9CVUZGRVJfQklUKi8pO1xuXG4gICAgY29uc3Qgc2hhZGVyID0gdGhpcy5fdGV4dHVyZVNoYWRlclByb2dyYW07XG5cbiAgICBzaGFkZXIuYmluZCgoYm91bmRTaGFkZXIpID0+IHtcbiAgICAgIGJvdW5kU2hhZGVyLnNldFRleHR1cmVVbmlmb3JtKCd1X3RleHR1cmUnLCB0aGlzLl9maW5hbFRleHR1cmUsIDApO1xuXG4gICAgICAvLyBhbnRpIGFsaWFzaW5nIHNldHVwXG5cbiAgICAgIGlmICh0aGlzLl9hbnRpQWxpYXNpbmcpIHtcbiAgICAgICAgY29uc3Qgc3RlcFggPSAoMSAtIHRoaXMuX3JlbmRlcldpZHRoIC8gdGhpcy5fY2FudmFzV2lkdGgpICogMC4wMDU7XG4gICAgICAgIGNvbnN0IHN0ZXBZID0gKDEgLSB0aGlzLl9yZW5kZXJIZWlnaHQgLyB0aGlzLl9jYW52YXNIZWlnaHQpICogMC4wMDU7XG5cbiAgICAgICAgYm91bmRTaGFkZXIuc2V0RmxvYXQyVW5pZm9ybSgndV9zdGVwJywgc3RlcFgsIHN0ZXBZKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJvdW5kU2hhZGVyLnNldEZsb2F0MlVuaWZvcm0oJ3Vfc3RlcCcsIDAsIDApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zY3JlZW5HZW9tZXRyeS5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckFzY2lpQXJ0VGV4dHVyZVBhc3MoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgdGhpcy5fY2FudmFzV2lkdGgsIHRoaXMuX2NhbnZhc0hlaWdodCk7XG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCAvKnwgZ2wuREVQVEhfQlVGRkVSX0JJVCovKTtcblxuICAgIC8vIGNvbnN0IHNoYWRlciA9IHRoaXMuX3RleHR1cmVTaGFkZXJQcm9ncmFtO1xuICAgIGNvbnN0IHNoYWRlciA9IHRoaXMuX2FzY2lpQXJ0U2hhZGVyUHJvZ3JhbTtcblxuICAgIHNoYWRlci5iaW5kKChib3VuZFNoYWRlcikgPT4ge1xuICAgICAgYm91bmRTaGFkZXIuc2V0VGV4dHVyZVVuaWZvcm0oJ3VfdGV4dHVyZScsIHRoaXMuX2ZpbmFsVGV4dHVyZSwgMCk7XG5cbiAgICAgIC8vIGFudGkgYWxpYXNpbmcgc2V0dXBcblxuICAgICAgLy8gaWYgKHRoaXMuX2FudGlBbGlhc2luZykge1xuICAgICAgLy8gICBjb25zdCBzdGVwWCA9ICgxIC0gdGhpcy5fcmVuZGVyV2lkdGggLyB0aGlzLl9jYW52YXNXaWR0aCkgKiAwLjAwNTtcbiAgICAgIC8vICAgY29uc3Qgc3RlcFkgPSAoMSAtIHRoaXMuX3JlbmRlckhlaWdodCAvIHRoaXMuX2NhbnZhc0hlaWdodCkgKiAwLjAwNTtcblxuICAgICAgLy8gICBib3VuZFNoYWRlci5zZXRGbG9hdDJVbmlmb3JtKCd1X3N0ZXAnLCBzdGVwWCwgc3RlcFkpO1xuICAgICAgLy8gfSBlbHNlIHtcbiAgICAgIC8vICAgYm91bmRTaGFkZXIuc2V0RmxvYXQyVW5pZm9ybSgndV9zdGVwJywgMCwgMCk7XG4gICAgICAvLyB9XG5cbiAgICAgIHRoaXMuX2FzY2lpQXJ0U2NyZWVuR2VvbWV0cnkucmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJSYXlUcmFjaW5nUGFzcygpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBjb25zdCBmYXJDb3JuZXJzID0gdGhpcy5fY29tcHV0ZUNhbWVyYUZhckNvcm5lcnMoKTtcbiAgICB0aGlzLl9yYXlUcmFjZXJHZW9tZXRyeS5hbGxvY2F0ZUJ1ZmZlcigxLCBmYXJDb3JuZXJzLCBmYXJDb3JuZXJzLmxlbmd0aCk7XG5cbiAgICBjb25zdCBzY2FsZWRXaWR0aCA9IE1hdGguZmxvb3IodGhpcy5fcmVuZGVyV2lkdGgpO1xuICAgIGNvbnN0IHNjYWxlZEhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5fcmVuZGVySGVpZ2h0KTtcblxuICAgIHRoaXMuX2J2aC5zeW5jaHJvbml6ZSh0aGlzLl9zcGhlcmVzLCB0aGlzLl9ib3hlcywgdGhpcy5fdHJpYW5nbGVzKTtcblxuICAgIGNvbnN0IGJ2aFBpeGVsc0RhdGEgPSB0aGlzLl9idmguZmlsbERhdGFUZXh0dXJlKCk7XG5cbiAgICAvLyB1X2J2aERhdGFUZXh0dXJlXG4gICAgdGhpcy5fYnZoRGF0YVRleHR1cmUuYmluZCgoYm91bmRUZXh0dXJlKSA9PiB7XG4gICAgICBib3VuZFRleHR1cmUudXBkYXRlKDAsIGJ2aFBpeGVsc0RhdGEpO1xuICAgIH0pXG5cbiAgICB0aGlzLl9mcmFtZUJ1ZmZlci5iaW5kKCgpID0+IHtcbiAgICAgIGdsLnZpZXdwb3J0KDAsIDAsIHNjYWxlZFdpZHRoLCBzY2FsZWRIZWlnaHQpO1xuICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCAvKnwgZ2wuREVQVEhfQlVGRkVSX0JJVCovKTtcblxuICAgICAge1xuICAgICAgICAvLyByYXl0cmFjaW5nIHBhc3NcblxuICAgICAgICBjb25zdCBzaGFkZXIgPSB0aGlzLl9yYXlUcmFjZXJTaGFkZXJQcm9ncmFtO1xuXG4gICAgICAgIHNoYWRlci5iaW5kKChib3VuZFNoYWRlcikgPT4ge1xuICAgICAgICAgIGJvdW5kU2hhZGVyLnNldEZsb2F0M1VuaWZvcm0oXG4gICAgICAgICAgICAndV9jYW1lcmFFeWUnLFxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLnBvc2l0aW9uWzBdLFxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLnBvc2l0aW9uWzFdLFxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhLnBvc2l0aW9uWzJdXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvL1xuXG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gc2NlbmUgZGF0YVxuXG4gICAgICAgICAgICBjb25zdCBzY2VuZURhdGFWYWx1ZXM6IFtudW1iZXIsbnVtYmVyLG51bWJlcixudW1iZXJdW10gPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsc0RhdGFWYWx1ZXM6IFtudW1iZXIsbnVtYmVyLG51bWJlcixudW1iZXJdW10gPSBbXTtcblxuICAgICAgICAgICAgbGV0IG1hdGVyaWFsSW5kZXggPSAwO1xuXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBzcGhlcmVzXG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNwaGVyZSBvZiB0aGlzLl9zcGhlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAvLyBhZGQgc3BoZXJlXG5cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgMSwgLy8gWzBdXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsSW5kZXggKyAwLjUsIC8vIFsxXVxuICAgICAgICAgICAgICAgICAgICBzcGhlcmUucG9zaXRpb25bMF0sIC8vIFsyXVxuICAgICAgICAgICAgICAgICAgICBzcGhlcmUucG9zaXRpb25bMV0sIC8vIFszXVxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMucHVzaChbXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5wb3NpdGlvblsyXSwgLy8gWzRdXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5vcmllbnRhdGlvblswXSwgLy8gWzVdXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5vcmllbnRhdGlvblsxXSwgLy8gWzZdXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5vcmllbnRhdGlvblsyXSwgLy8gWzddXG4gICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLm9yaWVudGF0aW9uWzNdLCAvLyBbOF1cbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLnJhZGl1cywgLy8gWzldXG4gICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxzRGF0YVZhbHVlcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLmNvbG9yWzBdLCAvLyBbMF1cbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLmNvbG9yWzFdLCAvLyBbMV1cbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLmNvbG9yWzJdLCAvLyBbMl1cbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLnJlZmxlY3Rpb25GYWN0b3IsIC8vIFszXVxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICBtYXRlcmlhbHNEYXRhVmFsdWVzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICBzcGhlcmUucmVmcmFjdGlvbkZhY3RvciwgLy8gWzRdXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5jYXN0U2hhZG93RW5hYmxlZCA/IDEgOiAwLCAvLyBbNV1cbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLnJlY2VpdmVMaWdodEVuYWJsZWQgPyAxIDogMCwgLy8gWzZdXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5jaGVzc2JvYXJkRW5hYmxlZCA/IDEgOiAwLCAvLyBbN11cbiAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRleCArPSAxO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIH0gLy8gc3BoZXJlc1xuXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBib3hlc1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBib3ggb2YgdGhpcy5fYm94ZXMpIHtcbiAgICAgICAgICAgICAgICAgIC8vIGFkZCBib3hcblxuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICAyLFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbEluZGV4ICsgMC41LCAvLyBbMTBdXG4gICAgICAgICAgICAgICAgICAgIGJveC5wb3NpdGlvblswXSwgLy8gWzBdXG4gICAgICAgICAgICAgICAgICAgIGJveC5wb3NpdGlvblsxXSwgLy8gWzFdXG4gICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgYm94LnBvc2l0aW9uWzJdLCAvLyBbMl1cbiAgICAgICAgICAgICAgICAgICAgYm94Lm9yaWVudGF0aW9uWzBdLCAvLyBbM11cbiAgICAgICAgICAgICAgICAgICAgYm94Lm9yaWVudGF0aW9uWzFdLCAvLyBbNF1cbiAgICAgICAgICAgICAgICAgICAgYm94Lm9yaWVudGF0aW9uWzJdLCAvLyBbNV1cbiAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICBib3gub3JpZW50YXRpb25bM10sIC8vIFs2XVxuICAgICAgICAgICAgICAgICAgICBib3guYm94U2l6ZVswXSwgLy8gWzddXG4gICAgICAgICAgICAgICAgICAgIGJveC5ib3hTaXplWzFdLCAvLyBbOF1cbiAgICAgICAgICAgICAgICAgICAgYm94LmJveFNpemVbMl0sIC8vIFs5XVxuICAgICAgICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgICAgICAgIG1hdGVyaWFsc0RhdGFWYWx1ZXMucHVzaChbXG4gICAgICAgICAgICAgICAgICAgIGJveC5jb2xvclswXSwgLy8gWzBdXG4gICAgICAgICAgICAgICAgICAgIGJveC5jb2xvclsxXSwgLy8gWzFdXG4gICAgICAgICAgICAgICAgICAgIGJveC5jb2xvclsyXSwgLy8gWzJdXG4gICAgICAgICAgICAgICAgICAgIGJveC5yZWZsZWN0aW9uRmFjdG9yLCAvLyBbM11cbiAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxzRGF0YVZhbHVlcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgYm94LnJlZnJhY3Rpb25GYWN0b3IsIC8vIFs0XVxuICAgICAgICAgICAgICAgICAgICBib3guY2FzdFNoYWRvd0VuYWJsZWQgPyAxIDogMCwgLy8gWzVdXG4gICAgICAgICAgICAgICAgICAgIGJveC5yZWNlaXZlTGlnaHRFbmFibGVkID8gMSA6IDAsIC8vIFs2XVxuICAgICAgICAgICAgICAgICAgICBib3guY2hlc3Nib2FyZEVuYWJsZWQgPyAxIDogMCwgLy8gWzddXG4gICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgIG1hdGVyaWFsSW5kZXggKz0gMTtcblxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIH0gLy8gYm94ZXNcblxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gdHJpYW5nbGVzXG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRyaWFuZ2xlIG9mIHRoaXMuX3RyaWFuZ2xlcykge1xuICAgICAgICAgICAgICAgICAgLy8gYWRkIHRyaWFuZ2xlXG5cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgICAgMyxcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRleCArIDAuNSwgLy8gWzBdXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnYwWzBdLCAvLyBbMV1cbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUudjBbMV0sIC8vIFsyXVxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMucHVzaChbXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnYwWzJdLCAvLyBbM11cbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUudjFbMF0sIC8vIFs0XVxuICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS52MVsxXSwgLy8gWzVdXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnYxWzJdLCAvLyBbNl1cbiAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS52MlswXSwgLy8gWzddXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnYyWzFdLCAvLyBbOF1cbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUudjJbMl0sIC8vIFs5XVxuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgICAgICAgIG1hdGVyaWFsc0RhdGFWYWx1ZXMucHVzaChbXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLmNvbG9yWzBdLCAvLyBbMF1cbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUuY29sb3JbMV0sIC8vIFsxXVxuICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS5jb2xvclsyXSwgLy8gWzJdXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnJlZmxlY3Rpb25GYWN0b3IsIC8vIFszXVxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICBtYXRlcmlhbHNEYXRhVmFsdWVzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgICAvLyB0cmlhbmdsZS5yZWZyYWN0aW9uRmFjdG9yLCAvLyBbNF1cbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUuY2FzdFNoYWRvd0VuYWJsZWQgPyAxIDogMCwgLy8gWzVdXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnJlY2VpdmVMaWdodEVuYWJsZWQgPyAxIDogMCwgLy8gWzZdXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyaWFuZ2xlLmNoZXNzYm9hcmRFbmFibGVkID8gMSA6IDAsIC8vIFs3XVxuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICBtYXRlcmlhbEluZGV4ICs9IDE7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBib3VuZFNoYWRlci5zZXRJbnRlZ2VyMVVuaWZvcm0oXG4gICAgICAgICAgICAgICAgICAndV90b3RhbFNoYXBlcycsXG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICB9IC8vIHRyaWFuZ2xlc1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgMCk7XG4gICAgICAgICAgICB0aGlzLl9zY2VuZURhdGFUZXh0dXJlLnByZUJpbmQoKGJvdW5kRGF0YVRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgYm91bmREYXRhVGV4dHVyZS51cGRhdGUoMCwgc2NlbmVEYXRhVmFsdWVzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBib3VuZFNoYWRlci5zZXRJbnRlZ2VyMVVuaWZvcm0oJ3Vfc2NlbmVUZXh0dXJlRGF0YScsIDApO1xuICAgICAgICAgICAgYm91bmRTaGFkZXIuc2V0SW50ZWdlcjFVbmlmb3JtKFxuICAgICAgICAgICAgICAndV9zY2VuZVRleHR1cmVTaXplJyxcbiAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLmxlbmd0aFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgNyk7XG4gICAgICAgICAgICAgIHRoaXMuX21hdGVyaWFsc0RhdGFUZXh0dXJlLnByZUJpbmQoKGJvdW5kRGF0YVRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgICBib3VuZERhdGFUZXh0dXJlLnVwZGF0ZSgwLCBtYXRlcmlhbHNEYXRhVmFsdWVzKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgYm91bmRTaGFkZXIuc2V0SW50ZWdlcjFVbmlmb3JtKCd1X21hdGVyaWFsc1RleHR1cmVEYXRhJywgNyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IC8vIHNjZW5lIGRhdGFcblxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vIGxpZ2h0cyBkYXRhXG5cbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0c0RhdGFWYWx1ZXM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcblxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyBzdW4gbGlnaHRzXG5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBzdW5MaWdodCBvZiB0aGlzLl9zdW5MaWdodHMpIHtcbiAgICAgICAgICAgICAgICAvLyBhZGQgc3VuIGxpZ2h0XG5cbiAgICAgICAgICAgICAgICBsaWdodHNEYXRhVmFsdWVzLnB1c2goW1xuICAgICAgICAgICAgICAgICAgc3VuTGlnaHQuZGlyZWN0aW9uWzBdLFxuICAgICAgICAgICAgICAgICAgc3VuTGlnaHQuZGlyZWN0aW9uWzFdLFxuICAgICAgICAgICAgICAgICAgc3VuTGlnaHQuZGlyZWN0aW9uWzJdLFxuICAgICAgICAgICAgICAgICAgc3VuTGlnaHQuaW50ZW5zaXR5LFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYm91bmRTaGFkZXIuc2V0SW50ZWdlcjFVbmlmb3JtKFxuICAgICAgICAgICAgICAgICd1X3N1bkxpZ2h0c1N0b3AnLFxuICAgICAgICAgICAgICAgIGxpZ2h0c0RhdGFWYWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IC8vIHN1biBsaWdodHNcblxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyBzcG90IGxpZ2h0c1xuXG4gICAgICAgICAgICAgIGZvciAoY29uc3Qgc3BvdExpZ2h0IG9mIHRoaXMuX3Nwb3RMaWdodHMpIHtcbiAgICAgICAgICAgICAgICAvLyBhZGQgc3BvdCBsaWdodFxuXG4gICAgICAgICAgICAgICAgbGlnaHRzRGF0YVZhbHVlcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgIHNwb3RMaWdodC5wb3NpdGlvblswXSxcbiAgICAgICAgICAgICAgICAgIHNwb3RMaWdodC5wb3NpdGlvblsxXSxcbiAgICAgICAgICAgICAgICAgIHNwb3RMaWdodC5wb3NpdGlvblsyXSxcbiAgICAgICAgICAgICAgICAgIHNwb3RMaWdodC5yYWRpdXMsXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgbGlnaHRzRGF0YVZhbHVlcy5wdXNoKFtcbiAgICAgICAgICAgICAgICAgIHNwb3RMaWdodC5pbnRlbnNpdHksXG4gICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBib3VuZFNoYWRlci5zZXRJbnRlZ2VyMVVuaWZvcm0oXG4gICAgICAgICAgICAgICAgJ3Vfc3BvdExpZ2h0c1N0b3AnLFxuICAgICAgICAgICAgICAgIGxpZ2h0c0RhdGFWYWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IC8vIHNwb3QgbGlnaHRzXG5cbiAgICAgICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyAxKTtcbiAgICAgICAgICAgIHRoaXMuX2xpZ2h0c0RhdGFUZXh0dXJlLnByZUJpbmQoKGJvdW5kRGF0YVRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgYm91bmREYXRhVGV4dHVyZS51cGRhdGUoMCwgbGlnaHRzRGF0YVZhbHVlcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYm91bmRTaGFkZXIuc2V0SW50ZWdlcjFVbmlmb3JtKCd1X2xpZ2h0c1RleHR1cmVEYXRhJywgMSk7XG4gICAgICAgICAgfSAvLyBsaWdodHMgZGF0YVxuXG5cbiAgICAgICAgICB7XG4gICAgICAgICAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwICsgNik7XG4gICAgICAgICAgICB0aGlzLl9idmhEYXRhVGV4dHVyZS5wcmVCaW5kKChib3VuZERhdGFUZXh0dXJlKSA9PiB7XG4gICAgICAgICAgICAgIGJvdW5kRGF0YVRleHR1cmUudXBkYXRlKDAsIGJ2aFBpeGVsc0RhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGJvdW5kU2hhZGVyLnNldEludGVnZXIxVW5pZm9ybSgndV9idmhEYXRhVGV4dHVyZScsIDYpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvL1xuXG4gICAgICAgICAgdGhpcy5fcmF5VHJhY2VyR2VvbWV0cnkucmVuZGVyKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyByYXl0cmFjaW5nIHBhc3NcbiAgICB9KTtcblxuICAgIGdsLnZpZXdwb3J0KDAsIDAsIHRoaXMuX2NhbnZhc1dpZHRoLCB0aGlzLl9jYW52YXNIZWlnaHQpO1xuICB9XG5cbiAgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fc3VuTGlnaHRzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fc3BvdExpZ2h0cy5sZW5ndGggPSAwO1xuXG4gICAgdGhpcy5fc3BoZXJlcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX2JveGVzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fdHJpYW5nbGVzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBidmhSZW5kZXIoXG4gICAgcmVuZGVyZXI6IElTdGFja1JlbmRlcmVyLFxuICApIHtcbiAgICB0aGlzLl9idmgucmVuZGVyKHJlbmRlcmVyKTtcbiAgfVxuXG4gIHNldFJlc29sdXRpb25Db2VmKGluUmVzb2x1dGlvbkNvZWY6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIGluUmVzb2x1dGlvbkNvZWYgPT09IHRoaXMuX3Jlc29sdXRpb25Db2VmIHx8XG4gICAgICBpblJlc29sdXRpb25Db2VmIDw9IDAgfHxcbiAgICAgIGluUmVzb2x1dGlvbkNvZWYgPiAxXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fcmVzb2x1dGlvbkNvZWYgPSBpblJlc29sdXRpb25Db2VmO1xuXG4gICAgdGhpcy5fcmVuZGVyV2lkdGggPSBNYXRoLmZsb29yKHRoaXMuX2NhbnZhc1dpZHRoICogdGhpcy5fcmVzb2x1dGlvbkNvZWYpO1xuICAgIHRoaXMuX3JlbmRlckhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5fY2FudmFzSGVpZ2h0ICogdGhpcy5fcmVzb2x1dGlvbkNvZWYpO1xuXG4gICAgdGhpcy5fZmluYWxUZXh0dXJlLnByZUJpbmQoKGJvdW5kVGV4dHVyZSkgPT4ge1xuICAgICAgYm91bmRUZXh0dXJlLnJlc2l6ZSh0aGlzLl9yZW5kZXJXaWR0aCwgdGhpcy5fcmVuZGVySGVpZ2h0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFJlc29sdXRpb25Db2VmKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3Jlc29sdXRpb25Db2VmO1xuICB9XG5cbiAgc2V0QW50aUFsaWFzaW5nKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9hbnRpQWxpYXNpbmcgPSBlbmFibGVkO1xuICB9XG5cbiAgZ2V0QW50aUFsaWFzaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9hbnRpQWxpYXNpbmc7XG4gIH1cblxuICBnZXRDdXJyZW50U2l6ZSgpOiBnbG0uUmVhZG9ubHlWZWMyIHtcbiAgICByZXR1cm4gW3RoaXMuX3JlbmRlcldpZHRoLCB0aGlzLl9yZW5kZXJIZWlnaHRdO1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tcHV0ZUNhbWVyYUZhckNvcm5lcnMoKTogUmVhZG9ubHlBcnJheTxudW1iZXI+IHtcbiAgICBjb25zdCBmb3J3YXJkRGlyID0gZ2xtLnZlYzMuc3ViKFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICB0aGlzLl9jYW1lcmEudGFyZ2V0LFxuICAgICAgdGhpcy5fY2FtZXJhLnBvc2l0aW9uXG4gICAgKTtcblxuICAgIGNvbnN0IGxlZnREaXIgPSBnbG0udmVjMy5jcm9zcyhcbiAgICAgIGdsbS52ZWMzLmNyZWF0ZSgpLFxuICAgICAgZm9yd2FyZERpcixcbiAgICAgIHRoaXMuX2NhbWVyYS51cFxuICAgICk7XG4gICAgY29uc3QgdXBEaXIgPSBnbG0udmVjMy5jcm9zcyhnbG0udmVjMy5jcmVhdGUoKSwgbGVmdERpciwgZm9yd2FyZERpcik7XG5cbiAgICBjb25zdCByYWRIRm92eSA9IF9kZWdyZWVUb1JhZCh0aGlzLl9jYW1lcmFGb3Z5ICogMC41KTtcbiAgICBjb25zdCB4TGVuZ3RoID0gKE1hdGguY29zKHJhZEhGb3Z5KSAqIDEpIC8gTWF0aC5zaW4ocmFkSEZvdnkpO1xuXG4gICAgY29uc3Qgc2NhbGVkRm9yd2FyZERpciA9IGdsbS52ZWMzLm11bHRpcGx5KFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICBmb3J3YXJkRGlyLFxuICAgICAgZ2xtLnZlYzMuZnJvbVZhbHVlcyh4TGVuZ3RoLCB4TGVuZ3RoLCB4TGVuZ3RoKVxuICAgICk7XG4gICAgY29uc3QgZmFyQ2VudGVyID0gZ2xtLnZlYzMuYWRkKFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICB0aGlzLl9jYW1lcmEucG9zaXRpb24sXG4gICAgICBzY2FsZWRGb3J3YXJkRGlyXG4gICAgKTtcblxuICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gdGhpcy5fY2FudmFzV2lkdGggLyB0aGlzLl9jYW52YXNIZWlnaHQ7XG4gICAgY29uc3QgZmFySGFsZldpZHRoID0gZ2xtLnZlYzMubXVsdGlwbHkoXG4gICAgICBnbG0udmVjMy5jcmVhdGUoKSxcbiAgICAgIGxlZnREaXIsXG4gICAgICBnbG0udmVjMy5mcm9tVmFsdWVzKGFzcGVjdFJhdGlvLCBhc3BlY3RSYXRpbywgYXNwZWN0UmF0aW8pXG4gICAgKTtcblxuICAgIGNvbnN0IGZhclVwID0gZ2xtLnZlYzMuYWRkKGdsbS52ZWMzLmNyZWF0ZSgpLCBmYXJDZW50ZXIsIHVwRGlyKTtcbiAgICBjb25zdCBmYXJCb3R0b20gPSBnbG0udmVjMy5zdWJ0cmFjdChnbG0udmVjMy5jcmVhdGUoKSwgZmFyQ2VudGVyLCB1cERpcik7XG4gICAgY29uc3QgZmFyVG9wTGVmdCA9IGdsbS52ZWMzLnN1YnRyYWN0KFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICBmYXJVcCxcbiAgICAgIGZhckhhbGZXaWR0aFxuICAgICk7XG4gICAgY29uc3QgZmFyQm90dG9tTGVmdCA9IGdsbS52ZWMzLnN1YnRyYWN0KFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICBmYXJCb3R0b20sXG4gICAgICBmYXJIYWxmV2lkdGhcbiAgICApO1xuICAgIGNvbnN0IGZhclRvcFJpZ2h0ID0gZ2xtLnZlYzMuYWRkKGdsbS52ZWMzLmNyZWF0ZSgpLCBmYXJVcCwgZmFySGFsZldpZHRoKTtcbiAgICBjb25zdCBmYXJCb3R0b21SaWdodCA9IGdsbS52ZWMzLmFkZChcbiAgICAgIGdsbS52ZWMzLmNyZWF0ZSgpLFxuICAgICAgZmFyQm90dG9tLFxuICAgICAgZmFySGFsZldpZHRoXG4gICAgKTtcblxuICAgIHJldHVybiBbXG4gICAgICBmYXJUb3BSaWdodFswXSxcbiAgICAgIGZhclRvcFJpZ2h0WzFdLFxuICAgICAgZmFyVG9wUmlnaHRbMl0sXG4gICAgICBmYXJUb3BMZWZ0WzBdLFxuICAgICAgZmFyVG9wTGVmdFsxXSxcbiAgICAgIGZhclRvcExlZnRbMl0sXG4gICAgICBmYXJCb3R0b21SaWdodFswXSxcbiAgICAgIGZhckJvdHRvbVJpZ2h0WzFdLFxuICAgICAgZmFyQm90dG9tUmlnaHRbMl0sXG4gICAgICBmYXJCb3R0b21MZWZ0WzBdLFxuICAgICAgZmFyQm90dG9tTGVmdFsxXSxcbiAgICAgIGZhckJvdHRvbUxlZnRbMl1cbiAgICBdO1xuICB9XG5cbiAgZ2V0IGNhbnZhc1dpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLl9jYW52YXNXaWR0aDtcbiAgfVxuICBnZXQgY2FudmFzSGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLl9jYW52YXNIZWlnaHQ7XG4gIH1cbiAgZ2V0IHJlbmRlcldpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLl9yZW5kZXJXaWR0aDtcbiAgfVxuICBnZXQgcmVuZGVySGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLl9yZW5kZXJIZWlnaHQ7XG4gIH1cblxuICBnZXQgY2FtZXJhKCk6IFJlYWRvbmx5PElDYW1lcmE+IHtcbiAgICByZXR1cm4gdGhpcy5fY2FtZXJhO1xuICB9XG5cbiAgZ2V0IHNwaGVyZXMoKTogUmVhZG9ubHlBcnJheTxJSW50ZXJuYWxTcGhlcmU+IHtcbiAgICByZXR1cm4gdGhpcy5fc3BoZXJlcztcbiAgfVxuICBnZXQgYm94ZXMoKTogUmVhZG9ubHlBcnJheTxJSW50ZXJuYWxCb3g+IHtcbiAgICByZXR1cm4gdGhpcy5fYm94ZXM7XG4gIH1cbiAgZ2V0IHRyaWFuZ2xlcygpOiBSZWFkb25seUFycmF5PElJbnRlcm5hbFRyaWFuZ2xlPiB7XG4gICAgcmV0dXJuIHRoaXMuX3RyaWFuZ2xlcztcbiAgfVxuXG4gIGdldCBzdW5MaWdodHMoKTogUmVhZG9ubHlBcnJheTxJU3VuTGlnaHQ+IHtcbiAgICByZXR1cm4gdGhpcy5fc3VuTGlnaHRzO1xuICB9XG4gIGdldCBzcG90TGlnaHRzKCk6IFJlYWRvbmx5QXJyYXk8SVNwb3RMaWdodD4ge1xuICAgIHJldHVybiB0aGlzLl9zcG90TGlnaHRzO1xuICB9XG59XG5cblxuLy8gI2VuZHJlZ2lvbiBsb2xcbiIsCiAgImltcG9ydCB7IGdyYXBoaWNzIH0gZnJvbSAnQGxvY2FsLWZyYW1ld29yayc7XG5jb25zdCB7IFdlYkdMQ29udGV4dCB9ID0gZ3JhcGhpY3Mud2ViZ2wyO1xuY29uc3QgeyBDYW1lcmEgfSA9IGdyYXBoaWNzLmNhbWVyYTtcbmNvbnN0IHsgVGV4dFJlbmRlcmVyLCBTdGFja1JlbmRlcmVycyB9ID0gZ3JhcGhpY3MucmVuZGVyZXJzO1xuXG5pbXBvcnQge1xuICBSYXlUcmFjZXJSZW5kZXJlcixcbiAgSVB1YmxpY1RyaWFuZ2xlLFxuICBJUHVibGljU3BoZXJlLFxuICBJUmF5VHJhY2VyUmVuZGVyZXIsXG4gIElQdWJsaWNCb3hcbn0gZnJvbSAnLi9yZW5kZXJlcnMnO1xuXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuLy9cblxuY29uc3Qga19mb3Z5ID0gNzA7XG5cbmludGVyZmFjZSBJRGVmaW5pdGlvbiB7XG4gIGNhbnZhc0RvbUVsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50O1xufVxuXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIge1xuICBwcml2YXRlIF9kZWY6IElEZWZpbml0aW9uO1xuXG4gIHByaXZhdGUgX3JheVRyYWNlclJlbmRlcmVyOiBSYXlUcmFjZXJSZW5kZXJlcjtcbiAgcHJpdmF0ZSBfdGV4dFJlbmRlcmVyOiBncmFwaGljcy5yZW5kZXJlcnMuVGV4dFJlbmRlcmVyO1xuICBwcml2YXRlIF9zdGFja1JlbmRlcmVyczogZ3JhcGhpY3MucmVuZGVyZXJzLlN0YWNrUmVuZGVyZXJzO1xuICBwcml2YXRlIF9tdWx0aXBsZUJ1ZmZlcmluZzogZ3JhcGhpY3MucmVuZGVyZXJzLk11bHRpQnVmZmVyc1JlbmRlcmluZztcblxuICBwcml2YXRlIF9kZWJ1Z1NjZW5lQ2FtZXJhID0gbmV3IENhbWVyYSgpO1xuICBwcml2YXRlIF9tYWluSHVkQ2FtZXJhID0gbmV3IENhbWVyYSgpO1xuXG4gIGNvbnN0cnVjdG9yKGRlZjogSURlZmluaXRpb24pIHtcbiAgICB0aGlzLl9kZWYgPSBkZWY7XG5cbiAgICB0aGlzLnJlc2l6ZShcbiAgICAgIHRoaXMuX2RlZi5jYW52YXNEb21FbGVtZW50LndpZHRoLFxuICAgICAgdGhpcy5fZGVmLmNhbnZhc0RvbUVsZW1lbnQuaGVpZ2h0XG4gICAgKTtcblxuICAgIFdlYkdMQ29udGV4dC5pbml0aWFsaXplKHRoaXMuX2RlZi5jYW52YXNEb21FbGVtZW50KTtcblxuICAgIHRoaXMuX3JheVRyYWNlclJlbmRlcmVyID0gbmV3IFJheVRyYWNlclJlbmRlcmVyKHtcbiAgICAgIGNhbnZhc1dpZHRoOiB0aGlzLl9kZWYuY2FudmFzRG9tRWxlbWVudC53aWR0aCxcbiAgICAgIGNhbnZhc0hlaWdodDogdGhpcy5fZGVmLmNhbnZhc0RvbUVsZW1lbnQuaGVpZ2h0LFxuICAgICAgZm92eToga19mb3Z5XG4gICAgfSk7XG4gICAgdGhpcy5fdGV4dFJlbmRlcmVyID0gbmV3IFRleHRSZW5kZXJlcigpO1xuICAgIHRoaXMuX3N0YWNrUmVuZGVyZXJzID0gbmV3IFN0YWNrUmVuZGVyZXJzKCk7XG4gICAgdGhpcy5fbXVsdGlwbGVCdWZmZXJpbmcgPSBuZXcgZ3JhcGhpY3MucmVuZGVyZXJzLk11bHRpQnVmZmVyc1JlbmRlcmluZyhcbiAgICAgIHRoaXMuX2RlZi5jYW52YXNEb21FbGVtZW50LndpZHRoLFxuICAgICAgdGhpcy5fZGVmLmNhbnZhc0RvbUVsZW1lbnQuaGVpZ2h0XG4gICAgKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgLy8gLy8gZm9yIHRoZSBkYXRhIHRleHR1cmUgdG8gZ290IGZyb20gXCJmbG9hdCB0byBmbG9hdFwiXG4gICAgLy8gLy8gPT4gaW5zdGVhZCBvZiBcInZlYzQgdG8gdmVjNFwiXG4gICAgLy8gY29uc3QgYWxpZ25tZW50ID0gMTtcbiAgICAvLyBnbC5waXhlbFN0b3JlaShnbC5VTlBBQ0tfQUxJR05NRU5ULCBhbGlnbm1lbnQpO1xuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vIGluaXRpYWxpemUgV2ViR0xcblxuICAgIGdsLmRpc2FibGUoZ2wuREVQVEhfVEVTVCk7XG4gICAgZ2wuZGlzYWJsZShnbC5CTEVORCk7XG4gICAgZ2wuZGlzYWJsZShnbC5DVUxMX0ZBQ0UpO1xuICAgIGdsLmRlcHRoRnVuYyhnbC5ORVZFUik7XG5cbiAgICBnbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDEuMCk7XG4gICAgZ2wuY2xlYXJEZXB0aCgxLjApO1xuICB9XG5cbiAgcmVzaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5fZGVidWdTY2VuZUNhbWVyYS5zZXRWaWV3cG9ydFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgdGhpcy5fZGVidWdTY2VuZUNhbWVyYS5zZXRBc1BlcnNwZWN0aXZlKHtcbiAgICAgIGZvdnk6IGtfZm92eSxcbiAgICAgIG5lYXI6IDEsXG4gICAgICBmYXI6IDUwMFxuICAgIH0pO1xuXG4gICAgdGhpcy5fbWFpbkh1ZENhbWVyYS5zZXRWaWV3cG9ydFNpemUod2lkdGgsIGhlaWdodCk7XG5cbiAgICBjb25zdCBoV2lkdGggPSB3aWR0aCAqIDAuNTtcbiAgICBjb25zdCBoSGVpZ2h0ID0gaGVpZ2h0ICogMC41O1xuXG4gICAgdGhpcy5fbWFpbkh1ZENhbWVyYS5zZXRBc09ydGhvZ29uYWwoe1xuICAgICAgbGVmdDogLWhXaWR0aCxcbiAgICAgIHJpZ2h0OiAraFdpZHRoLFxuICAgICAgdG9wOiAtaEhlaWdodCxcbiAgICAgIGJvdHRvbTogK2hIZWlnaHQsXG4gICAgICBuZWFyOiAtMjAwLFxuICAgICAgZmFyOiAyMDBcbiAgICB9KTtcbiAgICB0aGlzLl9tYWluSHVkQ2FtZXJhLnNldEV5ZShbaFdpZHRoLCBoSGVpZ2h0LCAxXSk7XG4gICAgdGhpcy5fbWFpbkh1ZENhbWVyYS5zZXRUYXJnZXQoW2hXaWR0aCwgaEhlaWdodCwgMF0pO1xuICAgIHRoaXMuX21haW5IdWRDYW1lcmEuc2V0VXBBeGlzKFswLCAxLCAwXSk7XG4gICAgdGhpcy5fbWFpbkh1ZENhbWVyYS5jb21wdXRlTWF0cmljZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3B1c2hXaXJlRnJhbWVTcGhlcmUoc3BoZXJlOiBJUHVibGljU3BoZXJlKSB7XG4gICAgY29uc3QgWCA9IDAuNTI1NzMxMTEyMTE5MTMzNjA2ICogc3BoZXJlLnJhZGl1cztcbiAgICBjb25zdCBaID0gMC44NTA2NTA4MDgzNTIwMzk5MzIgKiBzcGhlcmUucmFkaXVzO1xuICAgIGNvbnN0IE4gPSAwLjA7XG5cbiAgICBjb25zdCBwb3NpdGlvbnM6IFJlYWRvbmx5QXJyYXk8Z2xtLnZlYzM+ID0gW1xuICAgICAgWy1YLCBOLCBaXSxcbiAgICAgIFtYLCBOLCBaXSxcbiAgICAgIFstWCwgTiwgLVpdLFxuICAgICAgW1gsIE4sIC1aXSxcbiAgICAgIFtOLCBaLCBYXSxcbiAgICAgIFtOLCBaLCAtWF0sXG4gICAgICBbTiwgLVosIFhdLFxuICAgICAgW04sIC1aLCAtWF0sXG4gICAgICBbWiwgWCwgTl0sXG4gICAgICBbLVosIFgsIE5dLFxuICAgICAgW1osIC1YLCBOXSxcbiAgICAgIFstWiwgLVgsIE5dXG4gICAgXTtcblxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBwb3NpdGlvbnMubGVuZ3RoOyArK2lpKSB7XG4gICAgICBwb3NpdGlvbnNbaWldWzBdICs9IHNwaGVyZS5wb3NpdGlvblswXTtcbiAgICAgIHBvc2l0aW9uc1tpaV1bMV0gKz0gc3BoZXJlLnBvc2l0aW9uWzFdO1xuICAgICAgcG9zaXRpb25zW2lpXVsyXSArPSBzcGhlcmUucG9zaXRpb25bMl07XG4gICAgfVxuXG4gICAgY29uc3QgaW5kaWNlczogUmVhZG9ubHlBcnJheTxnbG0uUmVhZG9ubHlWZWMzPiA9IFtcbiAgICAgIFswLCA0LCAxXSxcbiAgICAgIFswLCA5LCA0XSxcbiAgICAgIFs5LCA1LCA0XSxcbiAgICAgIFs0LCA1LCA4XSxcbiAgICAgIFs0LCA4LCAxXSxcbiAgICAgIFs4LCAxMCwgMV0sXG4gICAgICBbOCwgMywgMTBdLFxuICAgICAgWzUsIDMsIDhdLFxuICAgICAgWzUsIDIsIDNdLFxuICAgICAgWzIsIDcsIDNdLFxuICAgICAgWzcsIDEwLCAzXSxcbiAgICAgIFs3LCA2LCAxMF0sXG4gICAgICBbNywgMTEsIDZdLFxuICAgICAgWzExLCAwLCA2XSxcbiAgICAgIFswLCAxLCA2XSxcbiAgICAgIFs2LCAxLCAxMF0sXG4gICAgICBbOSwgMCwgMTFdLFxuICAgICAgWzksIDExLCAyXSxcbiAgICAgIFs5LCAyLCA1XSxcbiAgICAgIFs3LCAyLCAxMV1cbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCBpbmRleCBvZiBpbmRpY2VzKSB7XG4gICAgICBjb25zdCB2MSA9IHBvc2l0aW9uc1tpbmRleFswXV07XG4gICAgICBjb25zdCB2MiA9IHBvc2l0aW9uc1tpbmRleFsxXV07XG4gICAgICBjb25zdCB2MyA9IHBvc2l0aW9uc1tpbmRleFsyXV07XG5cbiAgICAgIHRoaXMuX3N0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKHYxLCB2Miwgc3BoZXJlLmNvbG9yKTtcbiAgICAgIHRoaXMuX3N0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKHYyLCB2Mywgc3BoZXJlLmNvbG9yKTtcbiAgICAgIHRoaXMuX3N0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKHYzLCB2MSwgc3BoZXJlLmNvbG9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9wdXNoV2lyZUZyYW1lQm94KGJveDogSVB1YmxpY0JveCkge1xuICAgIGNvbnN0IHZlcnRpY2VzOiBSZWFkb25seUFycmF5PGdsbS5SZWFkb25seVZlYzM+ID0gW1xuICAgICAgZ2xtLnZlYzMuZnJvbVZhbHVlcygtYm94LmJveFNpemVbMF0sIC1ib3guYm94U2l6ZVsxXSwgLWJveC5ib3hTaXplWzJdKSxcbiAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoK2JveC5ib3hTaXplWzBdLCAtYm94LmJveFNpemVbMV0sIC1ib3guYm94U2l6ZVsyXSksXG4gICAgICBnbG0udmVjMy5mcm9tVmFsdWVzKC1ib3guYm94U2l6ZVswXSwgK2JveC5ib3hTaXplWzFdLCAtYm94LmJveFNpemVbMl0pLFxuICAgICAgZ2xtLnZlYzMuZnJvbVZhbHVlcygrYm94LmJveFNpemVbMF0sICtib3guYm94U2l6ZVsxXSwgLWJveC5ib3hTaXplWzJdKSxcbiAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoLWJveC5ib3hTaXplWzBdLCAtYm94LmJveFNpemVbMV0sICtib3guYm94U2l6ZVsyXSksXG4gICAgICBnbG0udmVjMy5mcm9tVmFsdWVzKCtib3guYm94U2l6ZVswXSwgLWJveC5ib3hTaXplWzFdLCArYm94LmJveFNpemVbMl0pLFxuICAgICAgZ2xtLnZlYzMuZnJvbVZhbHVlcygtYm94LmJveFNpemVbMF0sICtib3guYm94U2l6ZVsxXSwgK2JveC5ib3hTaXplWzJdKSxcbiAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoK2JveC5ib3hTaXplWzBdLCArYm94LmJveFNpemVbMV0sICtib3guYm94U2l6ZVsyXSlcbiAgICBdO1xuXG4gICAgY29uc3QgdmVydGljZXMyOiBnbG0uUmVhZG9ubHlWZWMzW10gPSBbXTtcblxuICAgIHZlcnRpY2VzLmZvckVhY2goKHZlcnRleCkgPT4ge1xuICAgICAgY29uc3QgcG9zID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKTtcblxuICAgICAgY29uc3QgbWF0NCA9IGdsbS5tYXQ0LmlkZW50aXR5KGdsbS5tYXQ0LmNyZWF0ZSgpKTtcbiAgICAgIGdsbS5tYXQ0LnRyYW5zbGF0ZShtYXQ0LCBtYXQ0LCBib3gucG9zaXRpb24pO1xuICAgICAgY29uc3QgbWF0NGIgPSBnbG0ubWF0NC5mcm9tUXVhdChnbG0ubWF0NC5jcmVhdGUoKSwgYm94Lm9yaWVudGF0aW9uKTtcbiAgICAgIGdsbS5tYXQ0Lm11bHRpcGx5KG1hdDQsIG1hdDQsIG1hdDRiKTtcblxuICAgICAgZ2xtLnZlYzMudHJhbnNmb3JtTWF0NChwb3MsIHZlcnRleCwgbWF0NCk7XG4gICAgICB2ZXJ0aWNlczIucHVzaChwb3MpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgaW5kaWNlc0dyb3VwOiBSZWFkb25seUFycmF5PGdsbS5SZWFkb25seVZlYzI+ID0gW1xuICAgICAgWzAsIDFdLFxuICAgICAgWzEsIDNdLFxuICAgICAgWzMsIDJdLFxuICAgICAgWzIsIDBdLFxuICAgICAgWzQsIDVdLFxuICAgICAgWzUsIDddLFxuICAgICAgWzcsIDZdLFxuICAgICAgWzYsIDRdLFxuICAgICAgWzAsIDRdLFxuICAgICAgWzEsIDVdLFxuICAgICAgWzMsIDddLFxuICAgICAgWzIsIDZdXG4gICAgXTtcblxuICAgIGluZGljZXNHcm91cC5mb3JFYWNoKChpbmRleCkgPT4ge1xuICAgICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUoXG4gICAgICAgIHZlcnRpY2VzMltpbmRleFswXV0sXG4gICAgICAgIHZlcnRpY2VzMltpbmRleFsxXV0sXG4gICAgICAgIGJveC5jb2xvclxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3B1c2hXaXJlRnJhbWVUcmlhbmdsZSh0cmlhbmdsZTogSVB1YmxpY1RyaWFuZ2xlKSB7XG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUodHJpYW5nbGUudjAsIHRyaWFuZ2xlLnYxLCB0cmlhbmdsZS5jb2xvcik7XG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUodHJpYW5nbGUudjEsIHRyaWFuZ2xlLnYyLCB0cmlhbmdsZS5jb2xvcik7XG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUodHJpYW5nbGUudjIsIHRyaWFuZ2xlLnYwLCB0cmlhbmdsZS5jb2xvcik7XG4gIH1cblxuICBzYWZlU2NlbmVXaXJlRnJhbWUoaW5DYWxsYmFjazogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMuX2RlYnVnU2NlbmVDYW1lcmEuc2V0RXllKHRoaXMuX3JheVRyYWNlclJlbmRlcmVyLmNhbWVyYS5wb3NpdGlvbik7XG4gICAgdGhpcy5fZGVidWdTY2VuZUNhbWVyYS5zZXRUYXJnZXQodGhpcy5fcmF5VHJhY2VyUmVuZGVyZXIuY2FtZXJhLnRhcmdldCk7XG4gICAgdGhpcy5fZGVidWdTY2VuZUNhbWVyYS5zZXRVcEF4aXModGhpcy5fcmF5VHJhY2VyUmVuZGVyZXIuY2FtZXJhLnVwKTtcbiAgICB0aGlzLl9kZWJ1Z1NjZW5lQ2FtZXJhLmNvbXB1dGVNYXRyaWNlcygpO1xuXG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMuc2FmZVJlbmRlcihcbiAgICAgIHRoaXMuX2RlYnVnU2NlbmVDYW1lcmEuZ2V0Q29tcG9zZWRNYXRyaXgoKSxcbiAgICAgIGluQ2FsbGJhY2tcbiAgICApO1xuICB9XG5cbiAgZmx1c2hIdWRXaXJlRnJhbWUoKSB7XG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMuZmx1c2godGhpcy5fbWFpbkh1ZENhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpKTtcbiAgfVxuXG4gIGZsdXNoSHVkVGV4dCgpIHtcbiAgICB0aGlzLl90ZXh0UmVuZGVyZXIuZmx1c2godGhpcy5fbWFpbkh1ZENhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpKTtcbiAgfVxuXG4gIHNldHVwRGVidWdSZW5kZXJlcigpIHtcblxuICAgIHRoaXMuX3JheVRyYWNlclJlbmRlcmVyLmJ2aFJlbmRlcih0aGlzLl9zdGFja1JlbmRlcmVycyk7XG5cblxuICAgIHRoaXMuX3JheVRyYWNlclJlbmRlcmVyLnNwaGVyZXMuZm9yRWFjaCgoc3BoZXJlKSA9PiB7XG4gICAgICB0aGlzLl9wdXNoV2lyZUZyYW1lU3BoZXJlKHNwaGVyZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fcmF5VHJhY2VyUmVuZGVyZXIuYm94ZXMuZm9yRWFjaCgoYm94KSA9PiB7XG4gICAgICB0aGlzLl9wdXNoV2lyZUZyYW1lQm94KGJveCk7XG4gICAgfSk7XG4gICAgdGhpcy5fcmF5VHJhY2VyUmVuZGVyZXIudHJpYW5nbGVzLmZvckVhY2goKHRyaWFuZ2xlKSA9PiB7XG4gICAgICB0aGlzLl9wdXNoV2lyZUZyYW1lVHJpYW5nbGUodHJpYW5nbGUpO1xuICAgIH0pO1xuXG4gIH1cblxuICBnZXQgcmF5VHJhY2VyUmVuZGVyZXIoKTogSVJheVRyYWNlclJlbmRlcmVyIHtcbiAgICByZXR1cm4gdGhpcy5fcmF5VHJhY2VyUmVuZGVyZXI7XG4gIH1cbiAgZ2V0IHN0YWNrUmVuZGVyZXJzKCk6IGdyYXBoaWNzLnJlbmRlcmVycy5JU3RhY2tSZW5kZXJlcnMge1xuICAgIHJldHVybiB0aGlzLl9zdGFja1JlbmRlcmVycztcbiAgfVxuICBnZXQgdGV4dFJlbmRlcmVyKCk6IGdyYXBoaWNzLnJlbmRlcmVycy5JVGV4dFJlbmRlcmVyIHtcbiAgICByZXR1cm4gdGhpcy5fdGV4dFJlbmRlcmVyO1xuICB9XG4gIGdldCBtdWx0aXBsZUJ1ZmZlcmluZygpOiBncmFwaGljcy5yZW5kZXJlcnMuTXVsdGlCdWZmZXJzUmVuZGVyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fbXVsdGlwbGVCdWZmZXJpbmc7XG4gIH1cblxuICBnZXQgZGVidWdTY2VuZUNhbWVyYSgpOiBncmFwaGljcy5jYW1lcmEuSUNhbWVyYSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlYnVnU2NlbmVDYW1lcmE7XG4gIH1cbiAgZ2V0IG1haW5IdWRDYW1lcmEoKTogZ3JhcGhpY3MuY2FtZXJhLklDYW1lcmEge1xuICAgIHJldHVybiB0aGlzLl9tYWluSHVkQ2FtZXJhO1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gJy4uL2dyYXBoaWNzL1JlbmRlcmVyJztcblxuaW1wb3J0IHsgcGh5c2ljcyB9IGZyb20gJ0ZyYW5rZW5QaHlzJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmxldCBjb250aW51b3VzVGltZTogbnVtYmVyID0gMDtcbmxldCBjb250aW51b3VzQW5nbGU6IG51bWJlciA9IDA7XG5cbmxldCBjdXJyU3RlcCA9IDA7XG5sZXQgbmV4dFN0ZXAgPSAxO1xuY29uc3QgYWxsU3RlcHM6IGdsbS5SZWFkb25seVZlYzNbXSA9IFtcbiAgWy01LCA0LCAwXSxcbiAgWys1LCA0LCAwXSxcbiAgWys1LCAxMCwgMF0sXG4gIFstNSwgMTAsIDBdXG5dO1xuXG5leHBvcnQgY2xhc3MgVGVzdFNjZW5lMiB7XG4gIHJlc2V0KCkge1xuICAgIGNvbnRpbnVvdXNUaW1lID0gMDtcbiAgICBjb250aW51b3VzQW5nbGUgPSAwO1xuICAgIGN1cnJTdGVwID0gMDtcbiAgICBuZXh0U3RlcCA9IDE7XG4gIH1cblxuICBydW4oZWxhcHNlZFRpbWU6IG51bWJlciwgcmVuZGVyZXI6IFJlbmRlcmVyLCBwaHlzaWNXb3JsZDogcGh5c2ljcy5QaHlzaWNXb3JsZCkge1xuICAgIGNvbnRpbnVvdXNBbmdsZSArPSBlbGFwc2VkVGltZSAqIDIuMDtcbiAgICBpZiAoY29udGludW91c0FuZ2xlID49IE1hdGguUEkgKiAyKSB7XG4gICAgICBjb250aW51b3VzQW5nbGUgLT0gTWF0aC5QSSAqIDI7XG4gICAgfVxuXG4gICAgY29udGludW91c1RpbWUgKz0gZWxhcHNlZFRpbWUgKiAwLjc1O1xuICAgIGlmIChjb250aW51b3VzVGltZSA+IDEpIHtcbiAgICAgIGNvbnRpbnVvdXNUaW1lID0gMDtcblxuICAgICAgY3VyclN0ZXAgPSAoY3VyclN0ZXAgKyAxKSAlIGFsbFN0ZXBzLmxlbmd0aDtcbiAgICAgIG5leHRTdGVwID0gKGN1cnJTdGVwICsgMSkgJSBhbGxTdGVwcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgY29uc3QgbGlnaHRQb3M6IGdsbS52ZWMzID0gW1xuICAgICAgYWxsU3RlcHNbY3VyclN0ZXBdWzBdICtcbiAgICAgICAgKGFsbFN0ZXBzW25leHRTdGVwXVswXSAtIGFsbFN0ZXBzW2N1cnJTdGVwXVswXSkgKiBjb250aW51b3VzVGltZSxcbiAgICAgIGFsbFN0ZXBzW2N1cnJTdGVwXVsxXSArXG4gICAgICAgIChhbGxTdGVwc1tuZXh0U3RlcF1bMV0gLSBhbGxTdGVwc1tjdXJyU3RlcF1bMV0pICogY29udGludW91c1RpbWUsXG4gICAgICBhbGxTdGVwc1tjdXJyU3RlcF1bMl0gK1xuICAgICAgICAoYWxsU3RlcHNbbmV4dFN0ZXBdWzJdIC0gYWxsU3RlcHNbY3VyclN0ZXBdWzJdKSAqIGNvbnRpbnVvdXNUaW1lXG4gICAgXTtcblxuICAgIC8vXG4gICAgLy9cblxuICAgIC8vIHJlbmRlcmVyLnJheVRyYWNlclJlbmRlcmVyLnB1c2hTdW5MaWdodCh7XG4gICAgLy8gICBkaXJlY3Rpb246IFsxLjAsIDEuMCwgMS4wXSxcbiAgICAvLyAgIGludGVuc2l0eTogMC41XG4gICAgLy8gfSk7XG5cbiAgICB7XG4gICAgICAvLyBtb3Zpbmcgc3BvdCBsaWdodHNcblxuICAgICAgLy8gYWN0dWFsIHNwb3QgbGlnaHRzXG4gICAgICByZW5kZXJlci5yYXlUcmFjZXJSZW5kZXJlci5wdXNoU3BvdExpZ2h0KHtcbiAgICAgICAgcG9zaXRpb246IFswLCAxMCwgMTBdLFxuICAgICAgICBpbnRlbnNpdHk6IDIsXG4gICAgICAgIHJhZGl1czogMjBcbiAgICAgIH0pO1xuICAgICAgLy8gZ3JhcGhpY2FsIHByZXNlbnRhdGlvbiBvZiB0aGUgc3BvdCBsaWdodHNcbiAgICAgIHJlbmRlcmVyLnJheVRyYWNlclJlbmRlcmVyLnB1c2hTcGhlcmUoe1xuICAgICAgICBwb3NpdGlvbjogWzAsIDEwLCAxMF0sXG4gICAgICAgIG9yaWVudGF0aW9uOiBbMCwwLDEsMF0sXG4gICAgICAgIHJhZGl1czogMC4yNSxcbiAgICAgICAgY29sb3I6IFsxLCAxLCAxXSxcbiAgICAgICAgcmVmbGVjdGlvbkZhY3RvcjogMCxcbiAgICAgICAgcmVmcmFjdGlvbkZhY3RvcjogMC4wLFxuICAgICAgICBjaGVzc2JvYXJkRW5hYmxlZDogZmFsc2UsXG4gICAgICAgIHJlY2VpdmVMaWdodEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBjYXN0U2hhZG93RW5hYmxlZDogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICAvLyBhY3R1YWwgc3BvdCBsaWdodHNcbiAgICAgIHJlbmRlcmVyLnJheVRyYWNlclJlbmRlcmVyLnB1c2hTcG90TGlnaHQoe1xuICAgICAgICBwb3NpdGlvbjogbGlnaHRQb3MsXG4gICAgICAgIGludGVuc2l0eTogMixcbiAgICAgICAgcmFkaXVzOiAxMFxuICAgICAgfSk7XG5cbiAgICAgIC8vIGdyYXBoaWNhbCBwcmVzZW50YXRpb24gb2YgdGhlIHNwb3QgbGlnaHRzXG4gICAgICByZW5kZXJlci5yYXlUcmFjZXJSZW5kZXJlci5wdXNoU3BoZXJlKHtcbiAgICAgICAgcG9zaXRpb246IGxpZ2h0UG9zLFxuICAgICAgICBvcmllbnRhdGlvbjogWzAsMCwxLDBdLFxuICAgICAgICByYWRpdXM6IDAuMjUsXG4gICAgICAgIGNvbG9yOiBbMSwgMSwgMV0sXG4gICAgICAgIHJlZmxlY3Rpb25GYWN0b3I6IDAsXG4gICAgICAgIHJlZnJhY3Rpb25GYWN0b3I6IDAuMCxcbiAgICAgICAgY2hlc3Nib2FyZEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICByZWNlaXZlTGlnaHRFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgY2FzdFNoYWRvd0VuYWJsZWQ6IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgLy8gLy8gc2ltcGxlIHJlZmxlY3RpdmUgc3BoZXJlXG4gICAgICAvLyByZW5kZXJlci5yYXlUcmFjZXJSZW5kZXJlci5wdXNoU3BoZXJlKHtcbiAgICAgIC8vICAgcG9zaXRpb246IFswLCA3LCAxXSxcbiAgICAgIC8vICAgcmFkaXVzOiAxLjAsXG4gICAgICAvLyAgIGNvbG9yOiBbMSwgMSwgMV0sXG4gICAgICAvLyAgIHJlZmxlY3Rpb25GYWN0b3I6IDAuMCxcbiAgICAgIC8vICAgcmVmcmFjdGlvbkZhY3RvcjogMC41LFxuICAgICAgLy8gICBjaGVzc2JvYXJkRW5hYmxlZDogZmFsc2UsXG4gICAgICAvLyAgIHJlY2VpdmVMaWdodEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgLy8gICBjYXN0U2hhZG93RW5hYmxlZDogdHJ1ZVxuICAgICAgLy8gfSk7XG5cbiAgICAgIC8vIC8vIHNpbXBsZSByZWZsZWN0aXZlIGJveFxuICAgICAgLy8gcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucHVzaEJveCh7XG4gICAgICAvLyAgIHBvc2l0aW9uOiBbMCwgNywgMV0sXG4gICAgICAvLyAgIGFuZ2xlWDogY29udGludW91c0FuZ2xlICogMC4wLFxuICAgICAgLy8gICBhbmdsZVk6IGNvbnRpbnVvdXNBbmdsZSAqIDEuMCxcbiAgICAgIC8vICAgYW5nbGVaOiAwLFxuICAgICAgLy8gICBib3hTaXplOiBbMC44LDAuOCwwLjhdLFxuXG4gICAgICAvLyAgIGNvbG9yOiBbMSwgMSwgMV0sXG4gICAgICAvLyAgIHJlZmxlY3Rpb25GYWN0b3I6IDEuMCxcbiAgICAgIC8vICAgY2hlc3Nib2FyZEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgLy8gICByZWNlaXZlTGlnaHRFbmFibGVkOiBmYWxzZSxcbiAgICAgIC8vICAgY2FzdFNoYWRvd0VuYWJsZWQ6IHRydWVcbiAgICAgIC8vIH0pO1xuXG4gICAgICAvLyAvLyBzaW1wbGUgcmVmbGVjdGl2ZSB0cmlhbmdsZVxuICAgICAgLy8gcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucHVzaFRyaWFuZ2xlKHtcbiAgICAgIC8vICAgdjA6IFswLCA3LCAxXSxcbiAgICAgIC8vICAgdjE6IFswLCA4LCAxXSxcbiAgICAgIC8vICAgdjI6IFswLCA4LCAyXSxcblxuICAgICAgLy8gICBjb2xvcjogWzEsIDEsIDFdLFxuICAgICAgLy8gICByZWZsZWN0aW9uRmFjdG9yOiAxLjAsXG4gICAgICAvLyAgIHJlY2VpdmVMaWdodEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgLy8gICBjYXN0U2hhZG93RW5hYmxlZDogdHJ1ZVxuICAgICAgLy8gfSk7XG5cbiAgICAgIGNvbnN0IGFsbEJveGVzOiB7XG4gICAgICAgIHBvczogZ2xtLlJlYWRvbmx5VmVjMztcbiAgICAgICAgc2l6ZTogZ2xtLlJlYWRvbmx5VmVjMztcbiAgICAgICAgY29sb3I/OiBnbG0uUmVhZG9ubHlWZWMzO1xuICAgICAgICByZWZsZWN0aW9uRmFjdG9yPzogbnVtYmVyO1xuICAgICAgfVtdID0gW1xuICAgICAgICAvLyBob2xsb3cgYm94IDFcbiAgICAgICAgeyBwb3M6IFstMiwgNCwgLTFdLCBzaXplOiBbMSwgMS4xMjUsIDAuMTI1XSB9LFxuICAgICAgICB7IHBvczogWy0yLCA0LCArMV0sIHNpemU6IFsxLCAxLjEyNSwgMC4xMjVdIH0sXG4gICAgICAgIHsgcG9zOiBbLTIsIDQgLSAxLCAwXSwgc2l6ZTogWzEsIDAuMTI1LCAxLjEyNV0gfSxcbiAgICAgICAgeyBwb3M6IFstMiwgNCArIDEsIDBdLCBzaXplOiBbMSwgMC4xMjUsIDEuMTI1XSB9LFxuXG4gICAgICAgIC8vIGhvbGxvdyBib3ggMlxuICAgICAgICB7IHBvczogWysyLCA0LCAtMV0sIHNpemU6IFsxLCAxLjEyNSwgMC4xMjVdIH0sXG4gICAgICAgIHsgcG9zOiBbKzIsIDQsICsxXSwgc2l6ZTogWzEsIDEuMTI1LCAwLjEyNV0gfSxcbiAgICAgICAgeyBwb3M6IFsrMiwgNCAtIDEsIDBdLCBzaXplOiBbMSwgMC4xMjUsIDEuMTI1XSB9LFxuICAgICAgICB7IHBvczogWysyLCA0ICsgMSwgMF0sIHNpemU6IFsxLCAwLjEyNSwgMS4xMjVdIH0sXG5cbiAgICAgICAgLy8gYmFja2dyb3VuZFxuICAgICAgICB7IHBvczogWzAsIDgsIC04XSwgc2l6ZTogWzgsIDgsIDAuMTI1XSwgY29sb3I6IFsxLjAsIDAuNSwgMC41XSB9LFxuICAgICAgICB7IHBvczogWy04LCA4LCAwXSwgc2l6ZTogWzAuMTI1LCA4LCA4XSwgY29sb3I6IFswLjUsIDEuMCwgMC41XSB9LFxuICAgICAgICB7IHBvczogWys4LCA4LCAwXSwgc2l6ZTogWzAuMTI1LCA4LCA4XSwgY29sb3I6IFswLjUsIDAuNSwgMS4wXSB9LFxuICAgICAgICB7IHBvczogWzAsIDAsIC0xXSwgc2l6ZTogWzgsIDAuMTI1LCA4XSwgcmVmbGVjdGlvbkZhY3RvcjogMC4zIH1cbiAgICAgIF07XG4gICAgICBhbGxCb3hlcy5mb3JFYWNoKCh7IHBvcywgc2l6ZSwgY29sb3IsIHJlZmxlY3Rpb25GYWN0b3IgfSkgPT4ge1xuICAgICAgICByZW5kZXJlci5yYXlUcmFjZXJSZW5kZXJlci5wdXNoQm94KHtcbiAgICAgICAgICBwb3NpdGlvbjogcG9zLFxuICAgICAgICAgIG9yaWVudGF0aW9uOiBbMCwwLDEsMF0sXG4gICAgICAgICAgLy8gYW5nbGVYOiAwLFxuICAgICAgICAgIC8vIGFuZ2xlWTogMCxcbiAgICAgICAgICAvLyBhbmdsZVo6IDAsXG4gICAgICAgICAgYm94U2l6ZTogc2l6ZSxcbiAgICAgICAgICBjb2xvcjogY29sb3IgPz8gWzEsIDEsIDFdLFxuICAgICAgICAgIHJlZmxlY3Rpb25GYWN0b3I6IHJlZmxlY3Rpb25GYWN0b3IgPz8gMCxcbiAgICAgICAgICByZWZyYWN0aW9uRmFjdG9yOiAwLFxuICAgICAgICAgIGNoZXNzYm9hcmRFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICByZWNlaXZlTGlnaHRFbmFibGVkOiB0cnVlLFxuICAgICAgICAgIGNhc3RTaGFkb3dFbmFibGVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHtcbiAgICAgICAgY29uc3QgYWxsUm90YXRlZEJveGVzOiB7XG4gICAgICAgICAgcG9zOiBnbG0uUmVhZG9ubHlWZWMzO1xuICAgICAgICAgIGFuZ2xlWTogbnVtYmVyO1xuICAgICAgICAgIHNpemU6IGdsbS5SZWFkb25seVZlYzM7XG4gICAgICAgIH1bXSA9IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwb3M6IFtcbiAgICAgICAgICAgICAgNSArIDEgKiBNYXRoLmNvcyhjb250aW51b3VzQW5nbGUpLFxuICAgICAgICAgICAgICA2LFxuICAgICAgICAgICAgICAwICsgMSAqIE1hdGguc2luKGNvbnRpbnVvdXNBbmdsZSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhbmdsZVk6IC1jb250aW51b3VzQW5nbGUsXG4gICAgICAgICAgICBzaXplOiBbMC4xMjUsIDEuMCwgMS4xMjVdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwb3M6IFtcbiAgICAgICAgICAgICAgNSAtIDEgKiBNYXRoLmNvcyhjb250aW51b3VzQW5nbGUpLFxuICAgICAgICAgICAgICA2ICsgMixcbiAgICAgICAgICAgICAgMCAtIDEgKiBNYXRoLnNpbihjb250aW51b3VzQW5nbGUpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYW5nbGVZOiAtY29udGludW91c0FuZ2xlLFxuICAgICAgICAgICAgc2l6ZTogWzAuMTI1LCAxLjAsIDEuMTI1XVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgcG9zOiBbXG4gICAgICAgICAgICAgIDUgKyAxICogTWF0aC5jb3MoY29udGludW91c0FuZ2xlICsgTWF0aC5QSSAqIDAuNSksXG4gICAgICAgICAgICAgIDYgKyAxLFxuICAgICAgICAgICAgICAwICsgMSAqIE1hdGguc2luKGNvbnRpbnVvdXNBbmdsZSArIE1hdGguUEkgKiAwLjUpXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYW5nbGVZOiAtY29udGludW91c0FuZ2xlICsgTWF0aC5QSSAqIDAuNSxcbiAgICAgICAgICAgIHNpemU6IFswLjEyNSwgMi4wLCAxLjBdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwb3M6IFtcbiAgICAgICAgICAgICAgNSArIDEgKiBNYXRoLmNvcyhjb250aW51b3VzQW5nbGUgLSBNYXRoLlBJICogMC41KSxcbiAgICAgICAgICAgICAgNiArIDEsXG4gICAgICAgICAgICAgIDAgKyAxICogTWF0aC5zaW4oY29udGludW91c0FuZ2xlIC0gTWF0aC5QSSAqIDAuNSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhbmdsZVk6IC1jb250aW51b3VzQW5nbGUgLSBNYXRoLlBJICogMC41LFxuICAgICAgICAgICAgc2l6ZTogWzAuMTI1LCAyLjAsIDEuMF1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8geyBwb3M6IFstMiw0LCsxXSwgc2l6ZTogWzEsMSwwLjEyNV0gfSxcbiAgICAgICAgICAvLyB7IHBvczogWy0yLDQtMSwwXSwgc2l6ZTogWzEsMC4xMjUsMV0gfSxcbiAgICAgICAgXTtcbiAgICAgICAgYWxsUm90YXRlZEJveGVzLmZvckVhY2goKHsgcG9zLCBhbmdsZVksIHNpemUgfSkgPT4ge1xuICAgICAgICAgIC8vIGNvbnN0IHBvc0E6IGdsbS5SZWFkb25seVZlYzMgPSBbXG4gICAgICAgICAgLy8gICBNYXRoLnNpbihhbmdsZSkgKiA3LFxuICAgICAgICAgIC8vICAgNCxcbiAgICAgICAgICAvLyAgIE1hdGguY29zKGFuZ2xlKSAqIDdcbiAgICAgICAgICAvLyBdO1xuXG4gICAgICAgICAgcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucHVzaEJveCh7XG4gICAgICAgICAgICBwb3NpdGlvbjogcG9zLFxuICAgICAgICAgICAgLy8gb3JpZW50YXRpb246IFswLDAsMSwwXSxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiBnbG0ucXVhdC5zZXRBeGlzQW5nbGUoZ2xtLnF1YXQuY3JlYXRlKCksIFswLDEsMF0sIGFuZ2xlWSksXG4gICAgICAgICAgICAvLyBhbmdsZVg6IDAsXG4gICAgICAgICAgICAvLyBhbmdsZVk6IGFuZ2xlWSxcbiAgICAgICAgICAgIC8vIGFuZ2xlWjogMCxcbiAgICAgICAgICAgIGJveFNpemU6IHNpemUsXG4gICAgICAgICAgICBjb2xvcjogWzAsIDEsIDBdLFxuICAgICAgICAgICAgcmVmbGVjdGlvbkZhY3RvcjogMCxcbiAgICAgICAgICAgIHJlZnJhY3Rpb25GYWN0b3I6IDAsXG4gICAgICAgICAgICBjaGVzc2JvYXJkRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICByZWNlaXZlTGlnaHRFbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgY2FzdFNoYWRvd0VuYWJsZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSAvLyBtb3Zpbmcgc3BvdCBsaWdodHNcbiAgfVxufVxuIiwKICAiaW1wb3J0IHsgc3lzdGVtLCBncmFwaGljcyB9IGZyb20gJ0Bsb2NhbC1mcmFtZXdvcmsnO1xuY29uc3Qge1xuICBHbG9iYWxNb3VzZU1hbmFnZXIsXG4gIEdsb2JhbEtleWJvYXJkTWFuYWdlcixcbiAgR2xvYmFsVG91Y2hNYW5hZ2VyLFxuICBHbG9iYWxWaXNpYmlsaXR5TWFuYWdlcixcbiAgR2xvYmFsUG9pbnRlckxvY2tNYW5hZ2VyXG59ID0gc3lzdGVtLmJyb3dzZXI7XG5jb25zdCB7IFdlYkdMQ29udGV4dCB9ID0gZ3JhcGhpY3Mud2ViZ2wyO1xuY29uc3QgeyBGcmVlRmx5Q29udHJvbGxlciB9ID0gc3lzdGVtLmNvbnRyb2xsZXJzO1xuXG5pbXBvcnQgeyBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlLCBwaHlzaWNzIH0gZnJvbSAnRnJhbmtlblBoeXMnO1xuXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL3V0aWxpdGllcy9Mb2dnZXInO1xuXG5pbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gJy4vZ3JhcGhpY3MvUmVuZGVyZXInO1xuaW1wb3J0ICogYXMgc2NlbmVzIGZyb20gJy4vc2NlbmVzL2ludGV4JztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmxldCBnX2ZyYW1lc19sZWZ0ID0gMztcblxuY29uc3QgZnJhbWVyYXRlID0gLTE7IC8vIGlmIG5lZ2F0aXZlIC0+IHVzZSB2c3luYyAoZ3B1IGV4cGVuc2l2ZSlcbi8vIGNvbnN0IGZyYW1lcmF0ZSA9IDYwOyAvLyBpZiBuZWdhdGl2ZSAtPiB1c2UgdnN5bmMgKGdwdSBleHBlbnNpdmUpXG5pbnRlcmZhY2UgRXhwZXJpbWVudERlZiB7XG4gIGNhbnZhc0VsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50O1xuICBsb2dnZXI6IExvZ2dlcjtcbiAgcGVyZkF1dG9TY2FsaW5nOiBIVE1MSW5wdXRFbGVtZW50O1xuICByZXNvbHV0aW9uOiBIVE1MSW5wdXRFbGVtZW50O1xuICBhbnRpX2FsaWFzaW5nX2VuYWJsZWQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHBoeXNpY19kZWJ1Z19tb2RlX2VuYWJsZWQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIGJ2aF9kZWJ1Z19tb2RlX2VuYWJsZWQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG59XG5cbmNvbnN0IGtfbWF4RnJhbWVzVW50aWxOZXh0Q2hlY2sgPSAzO1xuXG5leHBvcnQgY2xhc3MgRXhwZXJpbWVudCB7XG4gIHByaXZhdGUgX2NhbnZhc0VsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIF9hbmltYXRpb25GcmFtZUhhbmRsZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfZGVmOiBPbWl0PEV4cGVyaW1lbnREZWYsICdjYW52YXNFbGVtZW50Jz47XG5cbiAgcHJpdmF0ZSBfZnJlZUZseUNvbnRyb2xsZXI6IHN5c3RlbS5jb250cm9sbGVycy5GcmVlRmx5Q29udHJvbGxlcjtcblxuICBwcml2YXRlIF9yZW5kZXJlcjogUmVuZGVyZXI7XG5cbiAgcHJpdmF0ZSBfcGh5c2ljV29ybGQ6IHBoeXNpY3MuUGh5c2ljV29ybGQgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBfcnVubmluZzogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfZXJyb3JHcmFwaGljQ29udGV4dDogYm9vbGVhbjtcblxuICBwcml2YXRlIF9sYXN0RnJhbWVUaW1lOiBudW1iZXIgPSBEYXRlLm5vdygpO1xuICBwcml2YXRlIF9jdXJyRnJhbWVNc2VjVGltZTogbnVtYmVyID0gRGF0ZS5ub3coKTtcbiAgcHJpdmF0ZSBfZnJhbWVQcm9maWxlciA9IG5ldyBzeXN0ZW0ubWV0cmljcy5GcmFtZVByb2ZpbGVyKCk7XG5cbiAgLy8gcHJpdmF0ZSBfY29udGludW91c1NlY1RpbWUgPSAwO1xuXG4gIHByaXZhdGUgX3BlcmZBdXRvU2NhbGluZ0VuYWJsZWQgPSB0cnVlO1xuICBwcml2YXRlIF9mcmFtZXNVbnRpbE5leHRDaGVjayA9IGtfbWF4RnJhbWVzVW50aWxOZXh0Q2hlY2s7XG5cbiAgLy8gcHJpdmF0ZSBfc2NlbmUgPSBuZXcgc2NlbmVzLlRlc3RTY2VuZTEoKTtcbiAgcHJpdmF0ZSBfc2NlbmUgPSBuZXcgc2NlbmVzLlRlc3RTY2VuZTIoKTtcbiAgLy8gcHJpdmF0ZSBfc2NlbmUgPSBuZXcgc2NlbmVzLlRlc3RTY2VuZTMoKTtcblxuICBjb25zdHJ1Y3RvcihpbkRlZjogRXhwZXJpbWVudERlZikge1xuICAgIHRoaXMuX2NhbnZhc0VsZW1lbnQgPSBpbkRlZi5jYW52YXNFbGVtZW50O1xuICAgIHRoaXMuX2RlZiA9IGluRGVmO1xuXG4gICAgdGhpcy5fZnJlZUZseUNvbnRyb2xsZXIgPSBuZXcgRnJlZUZseUNvbnRyb2xsZXIoe1xuICAgICAgY29vcmRpbmF0ZXM6IFsnWicsICdYJywgJ1knXSxcbiAgICAgIHBvc2l0aW9uOiBbLTUsIDUsIDEwXSxcbiAgICAgIHRoZXRhOiBNYXRoLlBJICogMS4wNSxcbiAgICAgIHBoaTogLU1hdGguUEkgKiAwLjI1LFxuICAgICAgbW91c2VTZW5zaWJpbGl0eTogNixcbiAgICAgIGtleWJvYXJkU2Vuc2liaWxpdHk6IE1hdGguUEkgKiAwLjU1LFxuICAgICAgdG91Y2hTZW5zaWJpbGl0eTogOCxcbiAgICAgIG1vdmluZ1NwZWVkOiAxNlxuICAgIH0pO1xuXG4gICAgLy9cbiAgICAvL1xuXG4gICAge1xuICAgICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmFjdGl2YXRlKCk7XG4gICAgICBHbG9iYWxUb3VjaE1hbmFnZXIuYWN0aXZhdGUodGhpcy5fY2FudmFzRWxlbWVudCk7XG5cbiAgICAgIEdsb2JhbFZpc2liaWxpdHlNYW5hZ2VyLmFjdGl2YXRlKCk7XG4gICAgICBHbG9iYWxWaXNpYmlsaXR5TWFuYWdlci5hZGRWaXNpYmlsaXR5Q2hhbmdlKChpc1Zpc2libGUpID0+IHtcbiAgICAgICAgaWYgKGlzVmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLl9kZWYubG9nZ2VyLmxvZygnZG9jdW1lbnQgdmlzaWJpbGl0eSBjaGFuZ2VkOiBoaWRkZW4nKTtcbiAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9kZWYubG9nZ2VyLmxvZygnZG9jdW1lbnQgdmlzaWJpbGl0eSBjaGFuZ2VkOiB2aXNpYmxlJyk7XG4gICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgR2xvYmFsUG9pbnRlckxvY2tNYW5hZ2VyLmFsbG93UG9pbnRlckxvY2tlZE9uQ2xpY2tFdmVudChcbiAgICAgICAgdGhpcy5fY2FudmFzRWxlbWVudFxuICAgICAgKTtcbiAgICAgIEdsb2JhbFBvaW50ZXJMb2NrTWFuYWdlci5hZGRPbkxvY2tDaGFuZ2UoKCkgPT4ge1xuICAgICAgICBjb25zdCBpc0xvY2tlZCA9IEdsb2JhbFBvaW50ZXJMb2NrTWFuYWdlci5pc1BvaW50ZXJMb2NrZWQoXG4gICAgICAgICAgdGhpcy5fY2FudmFzRWxlbWVudFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChpc0xvY2tlZCkge1xuICAgICAgICAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKCdUaGUgcG9pbnRlciBsb2NrIHN0YXR1cyBpcyBub3cgbG9ja2VkJyk7XG5cbiAgICAgICAgICBHbG9iYWxNb3VzZU1hbmFnZXIuYWN0aXZhdGUodGhpcy5fY2FudmFzRWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZGVmLmxvZ2dlci5sb2coJ1RoZSBwb2ludGVyIGxvY2sgc3RhdHVzIGlzIG5vdyB1bmxvY2tlZCcpO1xuXG4gICAgICAgICAgR2xvYmFsTW91c2VNYW5hZ2VyLmRlYWN0aXZhdGUodGhpcy5fY2FudmFzRWxlbWVudCk7XG5cbiAgICAgICAgICBHbG9iYWxQb2ludGVyTG9ja01hbmFnZXIuYWxsb3dQb2ludGVyTG9ja2VkT25DbGlja0V2ZW50KFxuICAgICAgICAgICAgdGhpcy5fY2FudmFzRWxlbWVudFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBHbG9iYWxQb2ludGVyTG9ja01hbmFnZXIuYWRkT25Mb2NrRXJyb3IoKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKFxuICAgICAgICAgIGBUaGUgcG9pbnRlciBsb2NrIHNlbnQgYW4gZXJyb3IsIGV2ZW50OiBcIiR7SlNPTi5zdHJpbmdpZnkoZXZlbnQpfVwiYFxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHsgY2FudmFzRG9tRWxlbWVudDogdGhpcy5fY2FudmFzRWxlbWVudCB9KTtcbiAgICAgIHRoaXMuX3JlbmRlcmVyLmluaXRpYWxpemUoKTtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cblxuICAgIHRoaXMuX3J1bm5pbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9lcnJvckdyYXBoaWNDb250ZXh0ID0gZmFsc2U7XG5cbiAgICAvLyB0aGlzLl9yZW5kZXJlci5zZXRPbkNvbnRleHRMb3N0KCgpID0+IHtcbiAgICAvLyAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKCdvbl9jb250ZXh0X2xvc3QnKTtcblxuICAgIC8vICAgdGhpcy5fZXJyb3JHcmFwaGljQ29udGV4dCA9IHRydWU7XG4gICAgLy8gICB0aGlzLnN0b3AoKTtcbiAgICAvLyB9KTtcblxuICAgIC8vIHRoaXMuX3JlbmRlcmVyLnNldE9uQ29udGV4dFJlc3RvcmVkKCgpID0+IHtcbiAgICAvLyAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKCdvbl9jb250ZXh0X3Jlc3RvcmVkJyk7XG5cbiAgICAvLyAgIHRoaXMuX2Vycm9yR3JhcGhpY0NvbnRleHQgPSBmYWxzZTtcbiAgICAvLyAgIHRoaXMuc3RhcnQoKTtcbiAgICAvLyB9KTtcblxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuXG4gICAgdGhpcy5fZGVmLnJlc29sdXRpb24uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5fZGVmLnJlc29sdXRpb24udmFsdWUgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgICB0aGlzLl9zZXRSZXNvbHV0aW9uKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuX2xvZ1Jlc29sdXRpb24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2RlZi5hbnRpX2FsaWFzaW5nX2VuYWJsZWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuX2RlZi5hbnRpX2FsaWFzaW5nX2VuYWJsZWQuY2hlY2tlZCA9PT0gdHJ1ZTtcblxuICAgICAgdGhpcy5fcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIuc2V0QW50aUFsaWFzaW5nKG5ld1ZhbHVlKTtcblxuICAgICAgdGhpcy5fZGVmLmxvZ2dlci5sb2coXG4gICAgICAgIGBBbnRpIGFsaWFzaW5nIGNoYW5nZTogJHtuZXdWYWx1ZSA9PT0gdHJ1ZSA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9YFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldFJlc29sdXRpb24odGhpcy5fZGVmLnJlc29sdXRpb24udmFsdWUgYXMgdW5rbm93biBhcyBudW1iZXIpO1xuXG4gICAgLy8gcGVyZm9ybWFuY2UgYXV0by1zY2FsaW5nXG4gICAgdGhpcy5fZGVmLnBlcmZBdXRvU2NhbGluZy5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgIHRoaXMuX2ZyYW1lc1VudGlsTmV4dENoZWNrID0ga19tYXhGcmFtZXNVbnRpbE5leHRDaGVjaztcblxuICAgICAgdGhpcy5fcGVyZkF1dG9TY2FsaW5nRW5hYmxlZCA9IHRoaXMuX2RlZi5wZXJmQXV0b1NjYWxpbmcuY2hlY2tlZCA9PT0gdHJ1ZTtcblxuICAgICAgdGhpcy5fZGVmLmxvZ2dlci5sb2coXG4gICAgICAgIGBQZXJmb3JtYW5jZSBhdXRvIHNjYWxlciBjaGFuZ2U6ICR7XG4gICAgICAgICAgdGhpcy5fcGVyZkF1dG9TY2FsaW5nRW5hYmxlZCA9PT0gdHJ1ZSA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCdcbiAgICAgICAgfWBcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBpbml0KCkge1xuICAgIGF3YWl0IHRoaXMuX3JlbmRlcmVyLmluaXRpYWxpemUoKTtcblxuICAgIC8vXG4gICAgLy9cbiAgICAvLyBwaHlzaWMgZW5naW5lIGluaXRpYWxpemVcblxuICAgIC8vIGxvYWQgdGhlIHdhc20gc2lkZVxuICAgIGF3YWl0IEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUubG9hZCh7XG4gICAgICBqc1VybDogXCIuL2Rpc3Qvd2FzbS9GcmFua2VuUGh5cy4wLjAuMS5qc1wiLFxuICAgICAgd2FzbVVybDogXCIuL2Rpc3Qvd2FzbVwiLFxuICAgIH0pO1xuXG4gICAgLy8gc2V0IHRoZSB3YXNtIHNpZGVcbiAgICBwaHlzaWNzLldhc21Nb2R1bGVIb2xkZXIuc2V0KEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUuZ2V0KCkpO1xuXG4gICAgLy8gcmVhZHlcblxuICAgIHRoaXMuX3BoeXNpY1dvcmxkID0gbmV3IHBoeXNpY3MuUGh5c2ljV29ybGQoKTtcbiAgICB0aGlzLl9waHlzaWNXb3JsZC5zZXRHcmF2aXR5KDAsLTEwLDApO1xuXG4gICAgLy8gYWxsICg/KSB0aGUgZGVidWcgcmVuZGVyaW5nIGZlYXR1cmUgZmxhZ1xuICAgIGxldCBkZWJ1Z0RyYXdlckZsYWc6IG51bWJlciA9IDA7XG4gICAgZGVidWdEcmF3ZXJGbGFnIHw9IHBoeXNpY3MuRGVidWdEcmF3RmxhZ3MuREJHX0RyYXdXaXJlZnJhbWU7XG4gICAgZGVidWdEcmF3ZXJGbGFnIHw9IHBoeXNpY3MuRGVidWdEcmF3RmxhZ3MuREJHX0RyYXdBYWJiO1xuICAgIGRlYnVnRHJhd2VyRmxhZyB8PSBwaHlzaWNzLkRlYnVnRHJhd0ZsYWdzLkRCR19EcmF3Q29udGFjdFBvaW50cztcbiAgICBkZWJ1Z0RyYXdlckZsYWcgfD0gcGh5c2ljcy5EZWJ1Z0RyYXdGbGFncy5EQkdfRHJhd0NvbnN0cmFpbnRzO1xuICAgIGRlYnVnRHJhd2VyRmxhZyB8PSBwaHlzaWNzLkRlYnVnRHJhd0ZsYWdzLkRCR19EcmF3Q29uc3RyYWludExpbWl0cztcbiAgICBkZWJ1Z0RyYXdlckZsYWcgfD0gcGh5c2ljcy5EZWJ1Z0RyYXdGbGFncy5EQkdfRHJhd05vcm1hbHM7XG4gICAgZGVidWdEcmF3ZXJGbGFnIHw9IHBoeXNpY3MuRGVidWdEcmF3RmxhZ3MuREJHX0RyYXdGcmFtZXM7XG5cbiAgICB0aGlzLl9waHlzaWNXb3JsZC5zZXREZWJ1Z1dpcmVmcmFtZUZlYXR1cmVzRmxhZyhkZWJ1Z0RyYXdlckZsYWcpO1xuXG4gICAgdGhpcy5fcGh5c2ljV29ybGQuc2V0RGVidWdXaXJlZnJhbWVDYWxsYmFjaygoXG4gICAgICB4MSx5MSx6MSxcbiAgICAgIHgyLHkyLHoyLFxuICAgICAgcixnLGIsXG4gICAgKSA9PiB7XG5cbiAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKFxuICAgICAgICBbeDEseTEsejFdLFxuICAgICAgICBbeDIseTIsejJdLFxuICAgICAgICBbcixnLGJdLFxuICAgICAgKTtcblxuICAgIH0pO1xuXG4gICAgLy8gLy8gZHluYW1pYyBmYWxsaW5nIHNwaGVyZVxuICAgIC8vIGNvbnN0IGZhbGxpbmdTcGhlcmVCb2R5ID0gdGhpcy5fcGh5c2ljV29ybGQuY3JlYXRlUmlnaWRCb2R5KHtcbiAgICAvLyAgIG1hc3M6IDEsIC8vIGR5bmFtaWNcbiAgICAvLyAgIHNoYXBlOiB7IHR5cGU6ICdzcGhlcmUnLCByYWRpdXM6IDEgfSxcbiAgICAvLyB9KTtcbiAgICAvLyBmYWxsaW5nU3BoZXJlQm9keS5zZXRQb3NpdGlvbigwLCAwLCAxMCk7XG4gICAgLy8gZmFsbGluZ1NwaGVyZUJvZHkuc2V0RnJpY3Rpb24oMSk7IC8vIGp1c3QgdG8gc2hvdyBpdCdzIGF2YWlsYWJsZVxuICAgIC8vIGZhbGxpbmdTcGhlcmVCb2R5LmRpc2FibGVEZWFjdGl2YXRpb24oKTsgLy8ganVzdCB0byBzaG93IGl0J3MgYXZhaWxhYmxlXG5cbiAgICAvLyAvLyBncm91bmQgYm94IGJvZHkgdGhhdCB0aGUgZmFsbGluZyBzcGhlcmUgd2lsbCBjb2xsaWRlIHdpdGhcbiAgICAvLyBjb25zdCBncm91bmRCb3hCb2R5ID0gdGhpcy5fcGh5c2ljV29ybGQuY3JlYXRlUmlnaWRCb2R5KHtcbiAgICAvLyAgIG1hc3M6IDAsIC8vIHN0YXRpY1xuICAgIC8vICAgc2hhcGU6IHsgdHlwZTogJ2JveCcsIHNpemU6IFsyLDIsMl0gfSxcbiAgICAvLyB9KTtcbiAgICAvLyBncm91bmRCb3hCb2R5LnNldFBvc2l0aW9uKDAsIDAsIC0xKTtcbiAgICAvLyBncm91bmRCb3hCb2R5LnNldEZyaWN0aW9uKDEpOyAvLyBqdXN0IHRvIHNob3cgaXQncyBhdmFpbGFibGVcblxuICAgIC8vIC8vIHJ1biBmb3IgMTAwIGl0ZXJhdGlvbnNcbiAgICAvLyBmb3IgKGxldCBpaSA9IDA7IGlpIDwgMTAwOyArK2lpKSB7XG5cbiAgICAvLyAgIGNvbnN0IGZyYW1lUmF0ZSA9IDEvNjA7XG4gICAgLy8gICBjb25zdCBzdWJTdGVwcyA9IDA7XG4gICAgLy8gICB0aGlzLl9waHlzaWNXb3JsZC5zdGVwU2ltdWxhdGlvbihmcmFtZVJhdGUsIHN1YlN0ZXBzLCBmcmFtZVJhdGUpO1xuXG4gICAgLy8gICAvLyBwcmludCBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBmYWxsaW5nIHNwaGVyZVxuICAgIC8vICAgY29uc3QgcHJldHR5UG9zID0gWy4uLmZhbGxpbmdTcGhlcmVCb2R5LmdldFBvc2l0aW9uKCldLm1hcCh2YWwgPT4gdmFsLnRvRml4ZWQoMikpO1xuICAgIC8vICAgLy8gY29uc29sZS5sb2cocHJldHR5UG9zLCAndG90YWwgY29sbGlzaW9uOicsIGFsbENvbnRhY3RJZHMuc2l6ZSk7XG4gICAgLy8gICBjb25zb2xlLmxvZyhwcmV0dHlQb3MpO1xuICAgIC8vIH1cblxuICAgIC8vIHBoeXNpYyBlbmdpbmUgaW5pdGlhbGl6ZVxuICAgIC8vXG4gICAgLy9cblxuICB9XG5cbiAgcmVzaXplKGluV2lkdGg6IG51bWJlciwgaW5IZWlnaHQ6IG51bWJlciwgaW5Jc0Z1bGxTY3JlZW46IGJvb2xlYW4pIHtcbiAgICBsZXQgY3VycmVudFdpZHRoID0gaW5XaWR0aDtcbiAgICBsZXQgY3VycmVudEhlaWdodCA9IGluSGVpZ2h0O1xuXG4gICAgaWYgKGluSXNGdWxsU2NyZWVuKSB7XG4gICAgICB0aGlzLl9jYW52YXNFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgIGN1cnJlbnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgY3VycmVudEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2FudmFzRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FudmFzRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gICAgdGhpcy5fY2FudmFzRWxlbWVudC5zdHlsZS50b3AgPSAnMHB4JztcbiAgICB0aGlzLl9jYW52YXNFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7Y3VycmVudFdpZHRofXB4YDtcbiAgICB0aGlzLl9jYW52YXNFbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke2N1cnJlbnRIZWlnaHR9cHhgO1xuICAgIHRoaXMuX2NhbnZhc0VsZW1lbnQud2lkdGggPSBjdXJyZW50V2lkdGg7XG4gICAgdGhpcy5fY2FudmFzRWxlbWVudC5oZWlnaHQgPSBjdXJyZW50SGVpZ2h0O1xuXG4gICAgdGhpcy5fcmVuZGVyZXIucmVzaXplKGN1cnJlbnRXaWR0aCwgY3VycmVudEhlaWdodCk7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3J1bm5pbmcgPSB0cnVlO1xuXG4gICAgdGhpcy5fdGljaygpO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xuXG4gICAgaWYgKGZyYW1lcmF0ZSA8IDApIHtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZUhhbmRsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYW5pbWF0aW9uRnJhbWVIYW5kbGUpO1xuICAgIH1cbiAgfVxuXG4gIGlzUnVubmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5fcnVubmluZyAmJiAhdGhpcy5fZXJyb3JHcmFwaGljQ29udGV4dDtcbiAgfVxuXG4gIC8vXG4gIC8vXG4gIC8vXG5cbiAgcHJpdmF0ZSBfdGljaygpIHtcbiAgICBjb25zdCB0aWNrID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9ydW5uaW5nIHx8IHRoaXMuX2Vycm9yR3JhcGhpY0NvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBwbGFuIHRoZSBuZXh0IGZyYW1lXG5cbiAgICAgIGlmIChnX2ZyYW1lc19sZWZ0LS0gPD0gMCkge1xuICAgICAgICAvLyByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZXJhdGUgPCAwKSB7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSGFuZGxlID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQodGljaywgMTAwMCAvIGZyYW1lcmF0ZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX21haW5Mb29wKCk7XG4gICAgfTtcblxuICAgIHRpY2soKTtcbiAgfVxuXG4gIC8vICNyZWdpb24gbWFpbiBsb29wXG4gIHByaXZhdGUgX21haW5Mb29wKCkge1xuICAgIGNvbnN0IGN1cnJlbnRNc2VjVGltZSA9IERhdGUubm93KCk7XG5cbiAgICBjb25zdCBkZWx0YUZyYW1lTXNlY1RpbWUgPSBjdXJyZW50TXNlY1RpbWUgLSB0aGlzLl9sYXN0RnJhbWVUaW1lO1xuICAgIHRoaXMuX2xhc3RGcmFtZVRpbWUgPSBjdXJyZW50TXNlY1RpbWU7XG5cbiAgICB0aGlzLl9oYW5kbGVQZXJmb3JtYW5jZUF1dG9TY2FsaW5nKGRlbHRhRnJhbWVNc2VjVGltZSk7XG4gICAgdGhpcy5fZnJhbWVQcm9maWxlci5wdXNoRGVsdGEoZGVsdGFGcmFtZU1zZWNUaW1lKTtcblxuICAgIGNvbnN0IGRlbHRhTXNlY1RpbWUgPSBjdXJyZW50TXNlY1RpbWUgLSB0aGlzLl9jdXJyRnJhbWVNc2VjVGltZTtcbiAgICB0aGlzLl9jdXJyRnJhbWVNc2VjVGltZSA9IGN1cnJlbnRNc2VjVGltZTtcblxuICAgIC8vIHRoaXMgbWFrZSBzdXJlIHRoZSB0aW1lIHNlbnNpdGl2ZSBsb2dpYyBpc24ndCBcImp1bXBpbmdcIiBpbiBjYXNlIG9mIHNsb3cgZG93blxuICAgIGNvbnN0IHNhZmVEZWx0YSA9IE1hdGgubWluKGRlbHRhTXNlY1RpbWUsIDEwMCk7XG5cbiAgICBjb25zdCBkZWx0YVNlY1RpbWUgPSBzYWZlRGVsdGEgLyAxMDAwO1xuXG4gICAgLy8gdGhpcy5fY29udGludW91c1NlY1RpbWUgKz0gZGVsdGFTZWNUaW1lO1xuXG4gICAgdGhpcy5fZnJlZUZseUNvbnRyb2xsZXIudXBkYXRlKGRlbHRhU2VjVGltZSk7XG5cbiAgICBHbG9iYWxNb3VzZU1hbmFnZXIucmVzZXREZWx0YXMoKTtcbiAgICBHbG9iYWxUb3VjaE1hbmFnZXIucmVzZXREZWx0YXMoKTtcblxuICAgIC8vXG4gICAgLy9cblxuICAgIC8vIHRoaXMuX2NvbnRpbnVvdXNTZWNUaW1lICs9IGRlbHRhU2VjVGltZTtcblxuICAgIGlmICh0aGlzLl9waHlzaWNXb3JsZCkge1xuICAgICAgdGhpcy5fc2NlbmUucnVuKGRlbHRhU2VjVGltZSwgdGhpcy5fcmVuZGVyZXIsIHRoaXMuX3BoeXNpY1dvcmxkKTtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vXG5cbiAgICB0aGlzLl9yZW5kZXJTY2VuZSgpO1xuICAgIHRoaXMuX3JlbmRlckh1ZCgpO1xuICB9XG4gIC8vICNlbmRyZWdpb24gbWFpbiBsb29wXG5cbiAgLy8gI3JlZ2lvbiBodWRcbiAgcHJpdmF0ZSBfcmVuZGVySHVkKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC52aWV3cG9ydCgwLCAwLCB0aGlzLl9jYW52YXNFbGVtZW50LndpZHRoLCB0aGlzLl9jYW52YXNFbGVtZW50LmhlaWdodCk7XG4gICAgZ2wuY2xlYXIoZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG4gICAgZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO1xuICAgIGdsLmRlcHRoRnVuYyhnbC5MRVNTKTtcblxuICAgIC8vIC8vIHRoZSBtb2Rlcm4gd2ViIGJyb3dzZXJzIGFyZSBhbHJlYWR5IGFwcGx5aW5nIGRvdWJsZSBidWZmZXJpbmdcbiAgICAvLyAvLyAtPiBzbyB3ZSdyZSBpbiBmYWN0IHRyaXBsZSBidWZmZXJpbmcgaGVyZVxuICAgIC8vIC8vIC0+IHdoaWNoIGlzIGdyZWF0IC0+IG1vcmUgdGltZSBmb3IgdGhlIFdlYkdMIHF1ZXVlIHRvIGZpbmlzaCBvbiB0aW1lXG4gICAgLy8gdGhpcy5fcmVuZGVyZXIubXVsdGlwbGVCdWZmZXJpbmcucmVuZGVySHVkKFxuICAgIC8vICAgdGhpcy5fcmVuZGVyZXIubWFpbkh1ZENhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpXG4gICAgLy8gKTtcblxuICAgIHtcbiAgICAgIGNvbnN0IGtleUV2ZW50c1BvczogZ2xtLlJlYWRvbmx5VmVjMiA9IFs3ICsgMjAsIDE2NV07XG4gICAgICBjb25zdCB0b3VjaEV2ZW50c1BvczogZ2xtLlJlYWRvbmx5VmVjMiA9IFs3ICsgMjAsIDI2MF07XG4gICAgICBjb25zdCBib2FyZFBvczogZ2xtLlJlYWRvbmx5VmVjMiA9IFs3LCAzNV07XG5cbiAgICAgIGdyYXBoaWNzLnJlbmRlcmVycy53aWRnZXRzLmFkZEtleVN0cm9rZXNXaWRnZXRzKFxuICAgICAgICBrZXlFdmVudHNQb3MsXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLFxuICAgICAgICB0aGlzLl9yZW5kZXJlci50ZXh0UmVuZGVyZXJcbiAgICAgICk7XG4gICAgICBncmFwaGljcy5yZW5kZXJlcnMud2lkZ2V0cy5hZGRBcnJvd1N0cm9rZXNXaWRnZXRzKFxuICAgICAgICB0b3VjaEV2ZW50c1BvcyxcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuc3RhY2tSZW5kZXJlcnMsXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnRleHRSZW5kZXJlclxuICAgICAgKTtcbiAgICAgIGdyYXBoaWNzLnJlbmRlcmVycy53aWRnZXRzLmFkZEtleXNUb3VjaGVzV2lkZ2V0cyhcbiAgICAgICAgdGhpcy5fY2FudmFzRWxlbWVudCxcbiAgICAgICAgYm9hcmRQb3MsXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLFxuICAgICAgICB0aGlzLl9yZW5kZXJlci50ZXh0UmVuZGVyZXJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZ3JhcGhpY3MucmVuZGVyZXJzLndpZGdldHMucmVuZGVyRnBzTWV0ZXIoXG4gICAgICBbMTAsIHRoaXMuX2NhbnZhc0VsZW1lbnQuaGVpZ2h0IC0gNjAsIDBdLFxuICAgICAgWzEwMCwgNTBdLFxuICAgICAgdGhpcy5fZnJhbWVQcm9maWxlcixcbiAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLFxuICAgICAgdGhpcy5fcmVuZGVyZXIudGV4dFJlbmRlcmVyLFxuICAgICAgdHJ1ZVxuICAgICk7XG5cbiAgICB0aGlzLl9yZW5kZXJlci5mbHVzaEh1ZFdpcmVGcmFtZSgpO1xuICAgIHRoaXMuX3JlbmRlcmVyLmZsdXNoSHVkVGV4dCgpO1xuXG4gICAgdGhpcy5fcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucmVzZXQoKTtcbiAgfVxuICAvLyAjZW5kcmVnaW9uIGh1ZFxuXG4gIC8vICNyZWdpb24gc2NlbmVcbiAgcHJpdmF0ZSBfcmVuZGVyU2NlbmUoKSB7XG4gICAgLy8gdGhpcy5fcmVuZGVyZXIubXVsdGlwbGVCdWZmZXJpbmcuY2FwdHVyZVNjZW5lKCgpID0+IHtcblxuICAgICAge1xuICAgICAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICAgICAgLy8gZ2wuY2xlYXIoZ2wuQ09MT1IgfCBnbC5ERVBUSCk7XG4gICAgICAgIC8vIGdsLmNsZWFyKGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xuICAgICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUIHwgZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgZ2wuZGlzYWJsZShnbC5ERVBUSF9URVNUKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIubG9va0F0KFxuICAgICAgICB0aGlzLl9mcmVlRmx5Q29udHJvbGxlci5nZXRQb3NpdGlvbigpLFxuICAgICAgICB0aGlzLl9mcmVlRmx5Q29udHJvbGxlci5nZXRUYXJnZXQoKSxcbiAgICAgICAgdGhpcy5fZnJlZUZseUNvbnRyb2xsZXIuZ2V0VXBBeGlzKClcbiAgICAgICk7XG5cbiAgICAgIC8vIHRoaXMuX3JlbmRlcmVyLnJheVRyYWNlclJlbmRlcmVyLnJlbmRlcigpO1xuICAgICAgdGhpcy5fcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucmVuZGVyQXNjaWlBcnQoKTtcblxuXG4gICAgICBjb25zdCBzaG93RGVidWcgPSB0aGlzLl9kZWYucGh5c2ljX2RlYnVnX21vZGVfZW5hYmxlZC5jaGVja2VkID09PSB0cnVlO1xuICAgICAgaWYgKHNob3dEZWJ1Zykge1xuICAgICAgICB0aGlzLl9yZW5kZXJlci5zdGFja1JlbmRlcmVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLl9yZW5kZXJlci5zYWZlU2NlbmVXaXJlRnJhbWUoKCkgPT4ge1xuXG4gICAgICAgICAgY29uc3QgYXhpc09yaWdpbjogZ2xtLlJlYWRvbmx5VmVjMyA9IFswLCAwLCAwXTtcbiAgICAgICAgICBjb25zdCBheGlzWDogZ2xtLlJlYWRvbmx5VmVjMyA9IFsxMDAsIDAsIDBdO1xuICAgICAgICAgIGNvbnN0IGF4aXNZOiBnbG0uUmVhZG9ubHlWZWMzID0gWzAsIDEwMCwgMF07XG4gICAgICAgICAgY29uc3QgYXhpc1o6IGdsbS5SZWFkb25seVZlYzMgPSBbMCwgMCwgMTAwXTtcblxuICAgICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKGF4aXNPcmlnaW4sIGF4aXNYLCBbMSwgMCwgMF0pO1xuICAgICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKGF4aXNPcmlnaW4sIGF4aXNZLCBbMCwgMSwgMF0pO1xuICAgICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKGF4aXNPcmlnaW4sIGF4aXNaLCBbMCwgMCwgMV0pO1xuXG4gICAgICAgICAgdGhpcy5fcGh5c2ljV29ybGQhLmRlYnVnRHJhd1dvcmxkKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzaG93QnZoRGVidWcgPSB0aGlzLl9kZWYuYnZoX2RlYnVnX21vZGVfZW5hYmxlZC5jaGVja2VkID09PSB0cnVlO1xuICAgICAgaWYgKHNob3dCdmhEZWJ1Zykge1xuICAgICAgICB0aGlzLl9yZW5kZXJlci5zdGFja1JlbmRlcmVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLl9yZW5kZXJlci5zYWZlU2NlbmVXaXJlRnJhbWUoKCkgPT4ge1xuXG4gICAgICAgICAgY29uc3QgYXhpc09yaWdpbjogZ2xtLlJlYWRvbmx5VmVjMyA9IFswLCAwLCAwXTtcbiAgICAgICAgICBjb25zdCBheGlzWDogZ2xtLlJlYWRvbmx5VmVjMyA9IFsxMDAsIDAsIDBdO1xuICAgICAgICAgIGNvbnN0IGF4aXNZOiBnbG0uUmVhZG9ubHlWZWMzID0gWzAsIDEwMCwgMF07XG4gICAgICAgICAgY29uc3QgYXhpc1o6IGdsbS5SZWFkb25seVZlYzMgPSBbMCwgMCwgMTAwXTtcblxuICAgICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKGF4aXNPcmlnaW4sIGF4aXNYLCBbMSwgMCwgMF0pO1xuICAgICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKGF4aXNPcmlnaW4sIGF4aXNZLCBbMCwgMSwgMF0pO1xuICAgICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLnB1c2hMaW5lKGF4aXNPcmlnaW4sIGF4aXNaLCBbMCwgMCwgMV0pO1xuXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0dXBEZWJ1Z1JlbmRlcmVyKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG5cblxuICAgIC8vIH0pO1xuICB9XG4gIC8vICNlbmRyZWdpb24gc2NlbmVcblxuICBwcml2YXRlIF9zZXRSZXNvbHV0aW9uKGluVmFsdWU6IG51bWJlcikge1xuICAgIGNvbnN0IHNhZmVWYWx1ZSA9IHN5c3RlbS5tYXRoLmNsYW1wKGluVmFsdWUsIDAsIDkpOyAvLyBbMC4uOV1cbiAgICBjb25zdCBuZXdWYWx1ZSA9IDEwIC0gc2FmZVZhbHVlOyAvLyBbMS4uMTBdXG4gICAgY29uc3QgbmV3Q29lZiA9IDEgLyBuZXdWYWx1ZTsgLy8gWzAuLjFdXG4gICAgdGhpcy5fcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIuc2V0UmVzb2x1dGlvbkNvZWYobmV3Q29lZik7XG4gIH1cblxuICBwcml2YXRlIF9sb2dSZXNvbHV0aW9uKCkge1xuICAgIGNvbnN0IHJheVRyYWNlclJlbmRlcmVyID0gdGhpcy5fcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXI7XG5cbiAgICBjb25zdCBuZXdDb2VmID0gcmF5VHJhY2VyUmVuZGVyZXIuZ2V0UmVzb2x1dGlvbkNvZWYoKTtcbiAgICBjb25zdCBuZXdTaXplID0gcmF5VHJhY2VyUmVuZGVyZXIuZ2V0Q3VycmVudFNpemUoKTtcbiAgICBjb25zdCB0b3RhbFBpeGVscyA9IG5ld1NpemVbMF0gKiBuZXdTaXplWzFdO1xuXG4gICAgdGhpcy5fZGVmLmxvZ2dlci5sb2coXG4gICAgICBgcmVzb2x1dGlvbiBjaGFuZ2VkICgxLyR7TWF0aC5jZWlsKDEgLyBuZXdDb2VmKX0pID0+ICR7bmV3U2l6ZVswXX14JHtcbiAgICAgICAgbmV3U2l6ZVsxXVxuICAgICAgfSAoJHt0b3RhbFBpeGVsc31weClgXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVBlcmZvcm1hbmNlQXV0b1NjYWxpbmcoaW5EZWx0YU1zZWNUaW1lOiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5fcGVyZkF1dG9TY2FsaW5nRW5hYmxlZCAhPT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpbkRlbHRhTXNlY1RpbWUgPD0gMjApIHtcbiAgICAgIHRoaXMuX2ZyYW1lc1VudGlsTmV4dENoZWNrID0ga19tYXhGcmFtZXNVbnRpbE5leHRDaGVjaztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAtLXRoaXMuX2ZyYW1lc1VudGlsTmV4dENoZWNrO1xuXG4gICAgaWYgKHRoaXMuX2ZyYW1lc1VudGlsTmV4dENoZWNrID4gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKFxuICAgICAgYHBlcmZvcm1hbmNlIGF1dG8gc2NhbGluZzogc2xvdyBmcmFtZXJhdGUsIHNjYWxpbmcgZG93biByZXNvbHV0aW9uYFxuICAgICk7XG5cbiAgICBjb25zdCBjdXJyVmFsdWUgPSB0aGlzLl9kZWYucmVzb2x1dGlvbi52YWx1ZSBhcyB1bmtub3duIGFzIG51bWJlcjtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IGN1cnJWYWx1ZSAtIDE7XG5cbiAgICBpZiAobmV3VmFsdWUgPj0gMCAmJiBuZXdWYWx1ZSA8PSA5KSB7XG4gICAgICB0aGlzLl9zZXRSZXNvbHV0aW9uKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuX2xvZ1Jlc29sdXRpb24oKTtcblxuICAgICAgdGhpcy5fZGVmLnJlc29sdXRpb24udmFsdWUgPSBuZXdWYWx1ZSBhcyB1bmtub3duIGFzIHN0cmluZztcbiAgICB9XG5cbiAgICB0aGlzLl9mcmFtZXNVbnRpbE5leHRDaGVjayA9IGtfbWF4RnJhbWVzVW50aWxOZXh0Q2hlY2s7XG4gIH1cbn1cbiIsCiAgImltcG9ydCB7IHN5c3RlbSB9IGZyb20gJ0Bsb2NhbC1mcmFtZXdvcmsnO1xuXG5leHBvcnQgY29uc3Qgc2V0dXBPdXRkYXRlZFBhZ2UgPSAoXG4gIG1heER1cmF0aW9uOiBudW1iZXIsXG4gIG9uVGltZW91dDogKCkgPT4gdm9pZFxuKSA9PiB7XG4gIGlmICghc3lzdGVtLmJyb3dzZXIuR2xvYmFsVmlzaWJpbGl0eU1hbmFnZXIuaXNTdXBwb3J0ZWQoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCB0aW1lb3V0SGFuZGxlOiBudW1iZXIgPSAtMTtcblxuICBzeXN0ZW0uYnJvd3Nlci5HbG9iYWxWaXNpYmlsaXR5TWFuYWdlci5hZGRWaXNpYmlsaXR5Q2hhbmdlKChpc1Zpc2libGUpID0+IHtcbiAgICBpZiAoaXNWaXNpYmxlKSB7XG4gICAgICBpZiAodGltZW91dEhhbmRsZSA+PSAwKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgdGltZW91dEhhbmRsZSA9IC0xO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0SGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQob25UaW1lb3V0LCBtYXhEdXJhdGlvbik7XG4gICAgfVxuICB9KTtcbiAgc3lzdGVtLmJyb3dzZXIuR2xvYmFsVmlzaWJpbGl0eU1hbmFnZXIuYWN0aXZhdGUoKTtcbn07XG4iLAogICJpbXBvcnQgeyBzeXN0ZW0gfSBmcm9tICdAbG9jYWwtZnJhbWV3b3JrJztcblxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi9leHBlcmltZW50L3V0aWxpdGllcy9Mb2dnZXInO1xuXG5pbXBvcnQgeyBFeHBlcmltZW50IH0gZnJvbSAnLi9leHBlcmltZW50L0V4cGVyaW1lbnQnO1xuXG5pbXBvcnQgKiBhcyB1dGlsaXRpZXMgZnJvbSAnLi91dGlsaXRpZXMnO1xuXG5sZXQgbG9nZ2VyOiBMb2dnZXIgfCBudWxsID0gbnVsbDtcbmxldCBtYWluRGVtbzogRXhwZXJpbWVudCB8IG51bGwgPSBudWxsO1xuXG4vL1xuLy9cbi8vXG4vL1xuLy9cblxuY29uc3QgX3F1ZXJ5RG9tRWxlbWVudCA9IDxUIGV4dGVuZHMgRWxlbWVudD4oaW5OYW1lOiBzdHJpbmcpOiBUID0+IHtcbiAgY29uc3QgbmV3RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8VD4oaW5OYW1lKTtcbiAgaWYgKCFuZXdFbGVtZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBodG1sIGVsZW1lbnQgXCIke2luTmFtZX1cIiBub3QgZm91bmRgKTtcbiAgfVxuICByZXR1cm4gbmV3RWxlbWVudDtcbn07XG5cbi8vXG4vL1xuLy9cbi8vXG4vL1xuXG5jb25zdCBvblBhZ2VMb2FkID0gYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdsb2dnZXJPdXRwdXQnKTtcbiAgbG9nZ2VyLmxvZygnW1NFVFVQXSBwYWdlIGxvYWRlZCcpO1xuXG4gIC8vXG4gIC8vIEhUTUwgZWxlbWVudHMgY2hlY2tcbiAgLy9cblxuICBjb25zdCBjYW52YXNFbGVtZW50ID1cbiAgICBfcXVlcnlEb21FbGVtZW50PEhUTUxDYW52YXNFbGVtZW50PignI3JlbmRlcmluZy1jYW52YXMnKTtcbiAgY29uc3QgcGVyZkF1dG9TY2FsaW5nID0gX3F1ZXJ5RG9tRWxlbWVudDxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAnI2F1dG8tc2NhbGluZy1lbmFibGVkJ1xuICApO1xuICBjb25zdCByZXNvbHV0aW9uID0gX3F1ZXJ5RG9tRWxlbWVudDxIVE1MSW5wdXRFbGVtZW50PignI3Jlc29sdXRpb24nKTtcbiAgY29uc3QgYW50aV9hbGlhc2luZ19lbmFibGVkID0gX3F1ZXJ5RG9tRWxlbWVudDxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAnI2FudGktYWxpYXNpbmctZW5hYmxlZCdcbiAgKTtcbiAgY29uc3QgcGh5c2ljX2RlYnVnX21vZGVfZW5hYmxlZCA9IF9xdWVyeURvbUVsZW1lbnQ8SFRNTElucHV0RWxlbWVudD4oXG4gICAgJyNkZWJ1Zy1tb2RlLWVuYWJsZWQnXG4gICk7XG4gIGNvbnN0IGJ2aF9kZWJ1Z19tb2RlX2VuYWJsZWQgPSBfcXVlcnlEb21FbGVtZW50PEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICcjYnZoLWRlYnVnLW1vZGUtZW5hYmxlZCdcbiAgKTtcbiAgY29uc3QgZXJyb3JUZXh0ID0gX3F1ZXJ5RG9tRWxlbWVudDxIVE1MUGFyYWdyYXBoRWxlbWVudD4oJyNlcnJvci10ZXh0JykhO1xuXG4gIC8vXG4gIC8vIEVycm9yIEhhbmRsaW5nXG4gIC8vXG5cbiAgY29uc3QgX29uUGFnZUVycm9yID0gKGVycjogV2luZG93RXZlbnRNYXBbJ2Vycm9yJ10pID0+IHtcbiAgICBpZiAoIW1haW5EZW1vKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ29uUGFnZUVycm9yJywgZXJyKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBzdG9wIHRoZSBhcHBcbiAgICAgIG1haW5EZW1vLnN0b3AoKTtcbiAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgbWFpbkRlbW8gPSBudWxsO1xuXG4gICAgLy8gc3RvcCB0aGUgYnJvd3NlciBoZWxwZXJzXG4gICAgc3lzdGVtLmJyb3dzZXIuR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmRlYWN0aXZhdGUoKTtcbiAgICBzeXN0ZW0uYnJvd3Nlci5HbG9iYWxNb3VzZU1hbmFnZXIuZGVhY3RpdmF0ZShjYW52YXNFbGVtZW50KTtcbiAgICBzeXN0ZW0uYnJvd3Nlci5HbG9iYWxUb3VjaE1hbmFnZXIuZGVhY3RpdmF0ZShjYW52YXNFbGVtZW50KTtcbiAgICBzeXN0ZW0uYnJvd3Nlci5HbG9iYWxGdWxsU2NyZWVuTWFuYWdlci5yZW1vdmVBbGxDYWxsYmFja3MoKTtcbiAgICBzeXN0ZW0uYnJvd3Nlci5HbG9iYWxQb2ludGVyTG9ja01hbmFnZXIucmVtb3ZlQWxsQ2FsbGJhY2tzKCk7XG4gICAgc3lzdGVtLmJyb3dzZXIuR2xvYmFsVmlzaWJpbGl0eU1hbmFnZXIucmVtb3ZlQWxsQ2FsbGJhY2tzKCk7XG4gICAgc3lzdGVtLmJyb3dzZXIuR2xvYmFsVmlzaWJpbGl0eU1hbmFnZXIuZGVhY3RpdmF0ZSgpO1xuXG4gICAgLy8gc2V0dXAgdGhlIGVycm9yIG1lc3NhZ2VcbiAgICBlcnJvclRleHQuc3R5bGUud2lkdGggPSAnODAwcHgnO1xuICAgIGVycm9yVGV4dC5zdHlsZS5oZWlnaHQgPSAnNjAwcHgnO1xuICAgIGVycm9yVGV4dC5pbm5lckhUTUwgPSBlcnIubWVzc2FnZTtcblxuICAgIC8vIHN3YXAgdGhlIGNhbnZhcyB3aXRoIHRoZSBlcnJvciBtZXNzYWdlXG4gICAgY2FudmFzRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGVycm9yVGV4dC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgIC8vIGRpc2FibGUgdGhlIHVzZXIgaW50ZXJmYWNlXG4gICAgcGVyZkF1dG9TY2FsaW5nLmRpc2FibGVkID0gdHJ1ZTtcbiAgICByZXNvbHV0aW9uLm1pbiA9IHJlc29sdXRpb24ubWF4ID0gcmVzb2x1dGlvbi52YWx1ZSA9IDAgYXMgdW5rbm93biBhcyBzdHJpbmc7XG4gICAgYW50aV9hbGlhc2luZ19lbmFibGVkLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBwaHlzaWNfZGVidWdfbW9kZV9lbmFibGVkLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBidmhfZGVidWdfbW9kZV9lbmFibGVkLmRpc2FibGVkID0gdHJ1ZTtcblxuICAgIGRvY3VtZW50LnRpdGxlICs9ICcgKEVSUiknO1xuICB9O1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBfb25QYWdlRXJyb3IpO1xuXG4gIC8vXG4gIC8vIGJyb3dzZXIgZmVhdHVyZXMgY2hlY2tcbiAgLy9cblxuICBpZiAoIXN5c3RlbS5icm93c2VyLmlzV2ViR0wyU3VwcG9ydGVkKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ21pc3NpbmcgV2ViR0wyIGZlYXR1cmUgKHVuc3VwcG9ydGVkKScpO1xuICB9XG5cbiAgLy9cbiAgLy8gc2V0dXAgYXBwbGljYXRpb25cbiAgLy9cblxuICBtYWluRGVtbyA9IG5ldyBFeHBlcmltZW50KHtcbiAgICBjYW52YXNFbGVtZW50LFxuICAgIGxvZ2dlcixcbiAgICBwZXJmQXV0b1NjYWxpbmcsXG4gICAgcmVzb2x1dGlvbixcbiAgICBhbnRpX2FsaWFzaW5nX2VuYWJsZWQsXG4gICAgcGh5c2ljX2RlYnVnX21vZGVfZW5hYmxlZCxcbiAgICBidmhfZGVidWdfbW9kZV9lbmFibGVkLFxuICB9KTtcblxuICBsb2dnZXIubG9nKCdbU0VUVVBdIERlbW86IGluaXRpYWxpemluZycpO1xuXG4gIGF3YWl0IG1haW5EZW1vLmluaXQoKTtcblxuICBsb2dnZXIubG9nKCdbU0VUVVBdIERlbW86IGluaXRpYWxpemVkJyk7XG5cbiAgbWFpbkRlbW8uc3RhcnQoKTtcblxuICBsb2dnZXIubG9nKCdbU0VUVVBdIERlbW86IHJ1bm5pbmcnKTtcblxuICAvL1xuICAvL1xuICAvL1xuXG4gIGNvbnN0IHBhZ2VNYXhUaW1lSW52aXNpYmxlID0gNjAgKiAxMDAwOyAvLyA2MHNlY1xuICB1dGlsaXRpZXMuc2V0dXBPdXRkYXRlZFBhZ2UocGFnZU1heFRpbWVJbnZpc2libGUsICgpID0+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnPGJyLz48YnIvPjxici8+VGhlIHBhZ2Ugd2FzIGluYWN0aXZlIGZvciB0b28gbG9uZzxici8+PGJyLz5wbGVhc2UgcmVsb2FkJ1xuICAgICk7XG4gIH0pO1xufTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBvblBhZ2VMb2FkLCBmYWxzZSk7XG4iCiAgXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBTSxtQkFBNkI7QUFBQSxFQUNqQztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGO0FBRUEsSUFBTSxrQkFBNEI7QUFBQSxFQUNoQztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNGO0FBU0E7QUFBQSxNQUFNLGtCQUFrQjtBQUFBLEVBQ2QsK0JBQW1ELENBQUM7QUFBQSxFQUVwRCxpQkFBMEI7QUFBQSxFQUUxQixXQUFXLEdBQUc7QUFDcEIsUUFBSSxLQUFLLGdCQUFnQjtBQUN2QjtBQUFBLElBQ0Y7QUFDQSxTQUFLLGlCQUFpQjtBQUV0QixVQUFNLGVBQWUsTUFBTTtBQUN6QixXQUFLLDZCQUE2QixRQUFRLENBQUMsYUFBYSxTQUFTLENBQUM7QUFBQTtBQUdwRSxlQUFXLGFBQWE7QUFDdEIsZUFBUyxpQkFBaUIsV0FBVyxjQUFjLEtBQUs7QUFBQTtBQUFBLEVBSzVELFlBQVksQ0FBQyxpQkFBOEI7QUFDekMsZUFBVyxhQUFhLGtCQUFrQjtBQUN4QyxVQUFJLGFBQWEsaUJBQWlCO0FBQ2hDLGVBQU87QUFBQSxNQUNUO0FBQUEsSUFDRjtBQUNBLFdBQU87QUFBQTtBQUFBLEVBS1QsWUFBWSxDQUFDLGlCQUE4QjtBQUN6QyxXQUFPLFNBQVMsc0JBQXNCO0FBQUE7QUFBQSxPQUtsQyxrQkFBaUIsQ0FBQyxpQkFBZ0Q7QUFDdEUsUUFBSSxLQUFLLGFBQWEsZUFBZSxHQUFHO0FBQ3RDLGFBQU8sRUFBRSxTQUFTLE9BQU8sU0FBUyxpQ0FBaUM7QUFBQSxJQUNyRTtBQUVBLFNBQUssWUFBWTtBQUVqQixlQUFXLGFBQWEsa0JBQWtCO0FBQ3hDLFVBQUksYUFBYSxpQkFBaUI7QUFDaEMsUUFBQyxnQkFBd0IsV0FBVztBQUVwQyxlQUFPLEVBQUUsU0FBUyxNQUFNLFNBQVMsK0JBQStCO0FBQUEsTUFDbEU7QUFBQSxJQUNGO0FBRUEsV0FBTyxFQUFFLFNBQVMsT0FBTyxTQUFTLHNDQUFzQztBQUFBO0FBQUEsRUFLMUUscUJBQXFCLENBQUMsWUFBOEI7QUFDbEQsU0FBSyw2QkFBNkIsS0FBSyxVQUFVO0FBQUE7QUFBQSxFQUVuRCx3QkFBd0IsQ0FBQyxZQUE4QjtBQUNyRCxVQUFNLFFBQVEsS0FBSyw2QkFBNkIsUUFBUSxVQUFVO0FBQ2xFLFFBQUksUUFBUSxHQUFHO0FBQ2I7QUFBQSxJQUNGO0FBQ0EsU0FBSyw2QkFBNkIsT0FBTyxPQUFPLENBQUM7QUFBQTtBQUFBLEVBRW5ELGtCQUFrQixHQUFHO0FBQ25CLFNBQUssNkJBQTZCLFNBQVM7QUFBQTtBQUUvQztBQUVBLElBQU0sMEJBQTBCLElBQUk7O0FDOUY3QixJQUFNLGNBQWM7QUFBQSxFQUV6QixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFHSCxXQUFXO0FBQUEsRUFDWCxPQUFPO0FBQUEsRUFDUCxPQUFPO0FBQUEsRUFDUCxPQUFPO0FBQUEsRUFDUCxRQUFRO0FBQUEsRUFDUixXQUFXO0FBQUEsRUFDWCxhQUFhO0FBQUEsRUFDYixXQUFXO0FBQUEsRUFDWCxjQUFjO0FBQUEsRUFDZCxPQUFPO0FBQUEsRUFHUCxPQUFPO0FBQUEsRUFDUCxNQUFNO0FBQUEsRUFDTixLQUFLO0FBQUEsRUFDTCxVQUFVO0FBQUEsRUFHVixLQUFLO0FBQUEsRUFDTCxPQUFPO0FBQUEsRUFDUCxPQUFPO0FBQUEsRUFDUCxRQUFRO0FBQUEsRUFDUixPQUFPO0FBQUEsRUFDUCxRQUFRO0FBQUEsRUFDUixVQUFVO0FBQUEsRUFDVixLQUFLO0FBQUEsRUFDTCxNQUFNO0FBQUEsRUFDTixXQUFXO0FBQUEsRUFDWCxTQUFTO0FBQUEsRUFDVCxZ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Q1QsTUFBSSxNQUFNO0FBQ1YsTUFBSSxNQUFNO0FBQ1YsU0FBTztBQUFBO0FBU0YsU0FBUyxLQUFLLENBQUMsR0FBRztBQUN2QixNQUFJLE1BQU0sSUFBYSxXQUFXLEVBQUU7QUFDcEMsTUFBSSxLQUFLLEVBQUU7QUFDWCxNQUFJLEtBQUssRUFBRTtBQUNYLE1BQUksS0FBSyxFQUFFO0FBQ1gsTUFBSSxLQUFLLEVBQUU7QUFDWCxNQUFJLEtBQUssRUFBRTtBQUNYLE1BQUksS0FBSyxFQUFFO0FBQ1gsTUFBSSxLQUFLLEVBQUU7QUFDWCxNQUFJLEtBQUssRUFBRTtBQUNYLE1BQUksS0FBSyxFQUFFO0FBQ1gsTUFBSSxLQUFLLEVBQUU7QUFDWCxNQUFJLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUU7QUFDWixTQUFPO0FBQUE7QUFVRixTQUFTLElBQUksQ0FBQyxLQUFLLEdBQUc7QUFDM0IsTUFBSSxLQUFLLEVBQUU7QUFDWCxNQUFJLEtBQUssRUFBRTtBQUNYLE1BQUksS0FBSyxFQUFFO0FBQ1gsTUFBSSxLQUFLLEVBQUU7QUFDWCxNQUFJLEtBQUssRUFBRTtBQUNYLE1BQUksS0FBSyxFQUFFO0FBQ1gsTUFBSSxLQUFLLEVBQUU7QUFDWCxNQUFJLEtBQUssRUFBRTtBQUNYLE1BQUksS0FBSyxFQUFFO0FBQ1gsTUFBSSxLQUFLLEVBQUU7QUFDWCxNQUFJLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUU7QUFDWixTQUFPO0FBQUE7QUF3QkYsU0FBUyxVQUFVLENBQUMsS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUN6RyxNQUFJLE1BQU0sSUFBYSxXQUFXLEVBQUU7QUFDcEMsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxNQUFNO0FBQ1YsTUFBSSxNQUFNO0FBQ1YsTUFBSSxNQUFNO0FBQ1YsTUFBSSxNQUFNO0FBQ1YsTUFBSSxNQUFNO0FBQ1YsTUFBSSxNQUFNO0FBQ1YsU0FBTztBQUFBO0FBeUJGLFNBQVMsR0FBRyxDQUFDLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSztBQUN2RyxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixTQUFPO0FBQUE7QUFTRixTQUFTLFFBQVEsQ0FBQyxLQUFLO0FBQzVCLE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLFNBQU87QUFBQTtBQVVGLFNBQVMsU0FBUyxDQUFDLEtBQUssR0FBRztBQUVoQyxNQUFJLFFBQVEsR0FBRztBQUNiLFFBQUksTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFO0FBQ1osUUFBSSxNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUU7QUFDWixRQUFJLE1BQU0sRUFBRTtBQUNaLFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLEtBQUssRUFBRTtBQUNYLFFBQUksS0FBSztBQUNULFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLE1BQU0sRUFBRTtBQUNaLFFBQUksTUFBTTtBQUNWLFFBQUksTUFBTTtBQUNWLFFBQUksTUFBTTtBQUFBLEVBQ1osT0FBTztBQUNMLFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLEtBQUssRUFBRTtBQUNYLFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLEtBQUssRUFBRTtBQUNYLFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLEtBQUssRUFBRTtBQUNYLFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxNQUFNLEVBQUU7QUFDWixRQUFJLE1BQU0sRUFBRTtBQUNaLFFBQUksTUFBTSxFQUFFO0FBQ1osUUFBSSxNQUFNLEVBQUU7QUFDWixRQUFJLE1BQU0sRUFBRTtBQUNaLFFBQUksTUFBTSxFQUFFO0FBQUE7QUFHZCxTQUFPO0FBQUE7QUFVRixTQUFTLE1BQU0sQ0FBQyxLQUFLLEdBQUc7QUFDN0IsTUFBSSxNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUU1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBRTVFLE9BQUssS0FBSztBQUNSLFdBQU87QUFBQSxFQUNUO0FBRUEsUUFBTSxJQUFNO0FBQ1osTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLE1BQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxNQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsTUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELE1BQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxNQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsTUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELFNBQU87QUFBQTtBQVVGLFNBQVMsT0FBTyxDQUFDLEtBQUssR0FBRztBQUM5QixNQUFJLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksS0FBSyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsTUFBSSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxNQUFJLEtBQUssT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLE1BQUksT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsTUFBSSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxNQUFJLEtBQUssT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLE1BQUksT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsTUFBSSxLQUFLLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNsRyxNQUFJLEtBQUssT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLE1BQUksT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDcEcsTUFBSSxNQUFNLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNuRyxNQUFJLFFBQVEsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3JHLE1BQUksUUFBUSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDckcsTUFBSSxNQUFNLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNuRyxNQUFJLFFBQVEsT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3JHLE1BQUksTUFBTSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbkcsU0FBTztBQUFBO0FBU0YsU0FBUyxXQUFXLENBQUMsR0FBRztBQUM3QixNQUFJLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBRTVCLFNBQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQUE7QUFXcEUsU0FBUyxRQUFRLENBQUMsS0FBSyxHQUFHLEdBQUc7QUFDbEMsTUFBSSxNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUU7QUFFWixNQUFJLEtBQUssRUFBRSxJQUNQLEtBQUssRUFBRSxJQUNQLEtBQUssRUFBRSxJQUNQLEtBQUssRUFBRTtBQUNYLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE9BQUssRUFBRTtBQUNQLE9BQUssRUFBRTtBQUNQLE9BQUssRUFBRTtBQUNQLE9BQUssRUFBRTtBQUNQLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE9BQUssRUFBRTtBQUNQLE9BQUssRUFBRTtBQUNQLE9BQUssRUFBRTtBQUNQLE9BQUssRUFBRTtBQUNQLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE1BQUksS0FBSyxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQy9DLE1BQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELE1BQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELE9BQUssRUFBRTtBQUNQLE9BQUssRUFBRTtBQUNQLE9BQUssRUFBRTtBQUNQLE9BQUssRUFBRTtBQUNQLE1BQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELE1BQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELE1BQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELE1BQUksTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUssTUFBTSxLQUFLO0FBQ2hELFNBQU87QUFBQTtBQVdGLFNBQVMsU0FBUyxDQUFDLEtBQUssR0FBRyxHQUFHO0FBQ25DLE1BQUksSUFBSSxFQUFFLElBQ04sSUFBSSxFQUFFLElBQ04sSUFBSSxFQUFFO0FBQ1YsTUFBSSxLQUFLLEtBQUssS0FBSztBQUNuQixNQUFJLEtBQUssS0FBSyxLQUFLO0FBQ25CLE1BQUksS0FBSyxLQUFLLEtBQUs7QUFFbkIsTUFBSSxNQUFNLEtBQUs7QUFDYixRQUFJLE1BQU0sRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLElBQUksRUFBRTtBQUM3QyxRQUFJLE1BQU0sRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLElBQUksRUFBRTtBQUM3QyxRQUFJLE1BQU0sRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLElBQUksRUFBRSxNQUFNLElBQUksRUFBRTtBQUM5QyxRQUFJLE1BQU0sRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLElBQUksRUFBRSxNQUFNLElBQUksRUFBRTtBQUFBLEVBQ2hELE9BQU87QUFDTCxVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixVQUFNLEVBQUU7QUFDUixRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLEtBQUs7QUFDVCxRQUFJLE1BQU07QUFDVixRQUFJLE1BQU07QUFDVixRQUFJLE1BQU0sTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRTtBQUMxQyxRQUFJLE1BQU0sTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRTtBQUMxQyxRQUFJLE1BQU0sTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRTtBQUMxQyxRQUFJLE1BQU0sTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksRUFBRTtBQUFBO0FBRzVDLFNBQU87QUFBQTtBQVdGLFNBQVMsS0FBSyxDQUFDLEtBQUssR0FBRyxHQUFHO0FBQy9CLE1BQUksSUFBSSxFQUFFLElBQ04sSUFBSSxFQUFFLElBQ04sSUFBSSxFQUFFO0FBQ1YsTUFBSSxLQUFLLEVBQUUsS0FBSztBQUNoQixNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksS0FBSyxFQUFFLEtBQUs7QUFDaEIsTUFBSSxLQUFLLEVBQUUsS0FBSztBQUNoQixNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksS0FBSyxFQUFFLEtBQUs7QUFDaEIsTUFBSSxLQUFLLEVBQUUsS0FBSztBQUNoQixNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksS0FBSyxFQUFFLEtBQUs7QUFDaEIsTUFBSSxLQUFLLEVBQUUsS0FBSztBQUNoQixNQUFJLE1BQU0sRUFBRSxNQUFNO0FBQ2xCLE1BQUksTUFBTSxFQUFFLE1BQU07QUFDbEIsTUFBSSxNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUU7QUFDWixTQUFPO0FBQUE7QUFZRixTQUFTLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxNQUFNO0FBQ3hDLE1BQUksSUFBSSxLQUFLLElBQ1QsSUFBSSxLQUFLLElBQ1QsSUFBSSxLQUFLO0FBQ2IsTUFBSSxNQUFNLEtBQUssTUFBTSxHQUFHLEdBQUcsQ0FBQztBQUM1QixNQUFJLEdBQUcsR0FBRztBQUNWLE1BQUksS0FBSyxLQUFLLEtBQUs7QUFDbkIsTUFBSSxLQUFLLEtBQUssS0FBSztBQUNuQixNQUFJLEtBQUssS0FBSyxLQUFLO0FBQ25CLE1BQUksS0FBSyxLQUFLO0FBQ2QsTUFBSSxLQUFLLEtBQUs7QUFDZCxNQUFJLEtBQUssS0FBSztBQUVkLE1BQUksTUFBZSxTQUFTO0FBQzFCLFdBQU87QUFBQSxFQUNUO0FBRUEsUUFBTSxJQUFJO0FBQ1YsT0FBSztBQUNMLE9BQUs7QUFDTCxPQUFLO0FBQ0wsTUFBSSxLQUFLLElBQUksR0FBRztBQUNoQixNQUFJLEtBQUssSUFBSSxHQUFHO0FBQ2hCLE1BQUksSUFBSTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUNSLFFBQU0sRUFBRTtBQUVSLFFBQU0sSUFBSSxJQUFJLElBQUk7QUFDbEIsUUFBTSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3RCLFFBQU0sSUFBSSxJQUFJLElBQUksSUFBSTtBQUN0QixRQUFNLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdEIsUUFBTSxJQUFJLElBQUksSUFBSTtBQUNsQixRQUFNLElBQUksSUFBSSxJQUFJLElBQUk7QUFDdEIsUUFBTSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3RCLFFBQU0sSUFBSSxJQUFJLElBQUksSUFBSTtBQUN0QixRQUFNLElBQUksSUFBSSxJQUFJO0FBRWxCLE1BQUksS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsTUFBSSxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxNQUFJLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLE1BQUksS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsTUFBSSxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxNQUFJLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLE1BQUksS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsTUFBSSxLQUFLLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN2QyxNQUFJLEtBQUssTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQ3ZDLE1BQUksS0FBSyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDdkMsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUN4QyxNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBRXhDLE1BQUks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QUFLLEtBQUs7QUFDdEMsTUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLE1BQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUVwQixNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixTQUFPO0FBQUE7QUFjRixTQUFTLGFBQWEsQ0FBQyxLQUFLLEtBQUs7QUFDdEMsTUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLE1BQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUVwQixNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLE1BQU07QUFDVixNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixTQUFPO0FBQUE7QUFjRixTQUFTLGFBQWEsQ0FBQyxLQUFLLEtBQUs7QUFDdEMsTUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBQ3BCLE1BQUksSUFBSSxLQUFLLElBQUksR0FBRztBQUVwQixNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLE1BQU07QUFDVixNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtB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UUFBUSxLQUFLLE1BQU07QUFDdkIsTUFBSSxRQUFRLEtBQUssTUFBTTtBQUN2QixNQUFJLFNBQVMsS0FBSyxLQUFLLE9BQU87QUFDOUIsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxNQUFNO0FBQ1YsTUFBSSxNQUFNO0FBQ1YsTUFBSSxNQUFNLEVBQUUsS0FBSyxNQUFNLE9BQU8sS0FBSyxPQUFPLEtBQUssT0FBTztBQUN0RCxNQUFJLE1BQU0sRUFBRSxLQUFLLE1BQU0sT0FBTyxLQUFLLE9BQU8sS0FBSyxPQUFPO0FBQ3RELE1BQUksTUFBTSxFQUFFLEtBQUssTUFBTSxPQUFPLEtBQUssT0FBTyxLQUFLLFFBQVE7QUFDdkQsTUFBSSxNQUFNO0FBQ1YsU0FBTztBQUFBO0FBV0YsU0FBUyxRQUFRLENBQUMsS0FBSyxHQUFHO0FBQy9CLE1BQUksSUFBSSxFQUFFLElBQ04sSUFBSSxFQUFFLElBQ04sSUFBSSxFQUFFLElBQ04sSUFBSSxFQUFFO0FBQ1YsTUFBSSxLQUFLLElBQUk7QUFDYixNQUFJLEtBQUssSUFBSTtBQUNiLE1BQUksS0FBSyxJQUFJO0FBQ2IsTUFBSSxLQUFLLElBQUk7QUFDYixNQUFJLEtBQUssSUFBSTtBQUNiLE1BQUksS0FBSyxJQUFJO0FBQ2IsTUFBSSxLQUFLLElBQUk7QUFDYixNQUFJLEtBQUssSUFBSTtBQUNiLE1BQUksS0FBSyxJQUFJO0FBQ2IsTUFBSSxLQUFLLElBQUk7QUFDYixNQUFJLEtBQUssSUFBSTtBQUNiLE1BQUksS0FBSyxJQUFJO0FBQ2IsTUFBSSxLQUFLLElBQUksS0FBSztBQUNsQixNQUFJLEtBQUssS0FBSztBQUNkLE1BQUksS0FBSyxLQUFLO0FBQ2QsTUFBSSxLQUFLO0FBQ1QsTUFBSSxLQUFLLEtBQUs7QUFDZCxNQUFJLEtB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QUssT0FBTyxFQUFFLEtBQUssT0FBTyxFQUFFLEtBQUssT0FBTyxFQUFFLEtBQUssT0FBTyxFQUFFLE1BQU0sT0FBTyxFQUFFLE1BQU0sT0FBTyxFQUFFLE1BQU0sT0FBTyxFQUFFLE1BQU0sT0FBTyxFQUFFLE1BQU0sT0FBTyxFQUFFLE1BQU07QUFBQTtBQVMzTyxTQUFTLElBQUksQ0FBQyxHQUFHO0FBQ3RCLFNBQU8sS0FBSyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsR0FBRztBQUFBO0FBV2pILFNBQVMsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHO0FBQzdCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDcEIsTUFBSSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BCLE1BQUksTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDcEIsTUFBSSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BCLE1BQUksTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwQixTQUFPO0FB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QUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLEtBQUssRUFBRSxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEVBQUUsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssS0FBSyxJQUFJLE1BQU0sR0FBRyxLQUFjLFVBQVUsS0FBSyxJQUFJLEdBQUssS0FBSyxJQUFJLEdBQUcsR0FBRyxLQUFLLElBQUksR0FBRyxDQUFDO0FBQUE7QUF6ZXIyQyxJQUFJLGNBQWM7QUEySGxCLElBQUksUUFBUTtBQXFYWixJQUFJLE1BQU07QUFNVixJQUFJLE1BQU07Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUU3QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFFN0MsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BRTdDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsTUFBTSxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM5QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUU3QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFFN0MsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUks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QTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBZy9CYixLQUFLOzs7QUNoL0JQLElBQWU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWdCYixLQUFLOzs7QUNoQlAsSUFBZTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQThFYixLQUFLOzs7QUM5RVAsSUFBZTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBZ0JiLEtBQUs7OztBQ2hCUCxJQUFlO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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QUFrQixPQUFPLGtCQUFrQixPQUFPLGdCQUFnQjtBQUN6RyxZQUFNLE9BQVUsYUFBSyxXQUFXLE9BQU8sa0JBQWtCLE9BQU8sa0JBQWtCLE9BQU8sZ0JBQWdCO0FBRXpHLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBRXpDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBRXpDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FBRyxFQUFFO0FBQ3pDLFdBQUksS0FBSyxLQUFLLElBQUksS0FBSSxJQUFJLFVBQVUsR0FB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QUFBQSxRQUM1QyxFQUFFLEtBQUssRUFBQyxHQUFJLEdBQU8sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLE9BQU8sS0FBSyxFQUFFO0FBQUEsUUFDL0MsRUFBRSxLQUFLLEVBQUMsR0FBSSxHQUFPLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxPQUFPLEtBQUssRUFBRTtBQUFBLFFBRy9DLEVBQUUsS0FBSyxDQUFDLEdBQUksSUFBRyxDQUFFLEdBQUcsTUFBTSxDQUFDLEdBQUcsT0FBTyxLQUFLLEVBQUU7QUFBQSxRQUM1QyxFQUFFLEtBQUssQ0FBQyxHQUFJLEdBQUcsQ0FBRSxHQUFHLE1BQU0sQ0FBQyxHQUFHLE9BQU8sS0FBSyxFQUFFO0FBQUEsUUFDNUMsRUFBRSxLQUFLLENBQUMsR0FBSSxHQUFPLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxPQUFPLEtBQUssRUFBRTtBQUFBLFFBQy9DLEVBQUUsS0FBSyxDQUFDLEdBQUksR0FBTyxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsT0FBTyxLQUFLLEVBQUU7QUFBQSxRQUcvQyxFQUFFLEtBQUssQ0FBQyxHQUFHLElBQUcsQ0FBRSxHQUFHLE1BQU0sQ0FBQyxHQUFHLEdBQUcsS0FBSyxHQUFHLE9BQU8sQ0FBQyxHQUFLLEtBQUssR0FBRyxFQUFFO0FBQUEsUUFDL0QsRUFBRSxLQUFLLEVBQUMsR0FBSSxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsT0FBTyxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUMsS0FBSyxHQUFLLEdBQUcsRUFBRTtBQUFBLFFBQy9ELEVBQUUsS0FBSyxDQUFDLEdBQUksR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLE9BQU8sR0FBRyxDQUFDLEdBQUcsT0FBTyxDQUFDLEtBQUssS0FBSyxDQUFHLEVBQUU7QUFBQSxRQUMvRCxFQUFFLEtBQUssQ0FBQyxHQUFHLElBQUcsQ0FBRSxHQUFHLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixJQUFJO0FBQUEsTUFDaEU7QUFDQSxlQUFTLFFBQVEsR0FBRyxLQUFLLE1B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ZSxDQUFDLFFBQWlDO0FBQ3JELFNBQUssVUFBVTtBQUNiO0FBQUEsSUFDRjtBQUVBLFlBQVEsSUFBSSxlQUFlLEdBQUc7QUFFOUIsUUFBSTtBQUVGLGVBQVMsS0FBSztBQUFBLGFBQ1AsTUFBUDtBQUFBO0FBQ0YsZUFBVztBQUdYLG1CQUFPLFFBQVEsc0JBQXNCLFdBQVc7QUFDaEQsbUJBQU8sUUFBUSxtQkFBbUIsV0FBVyxhQUFhO0FBQzFELG1CQUFPLFFBQVEsbUJBQW1CLFdBQVcsYUFBYTtBQUMxRCxtQkFBTyxRQUFRLHdCQUF3QixtQkFBbUI7QUFDMUQsbUJBQU8sUUFBUSx5QkFBeUIsbUJBQW1CO0FBQzNELG1CQUFPLFFBQVEsd0JBQXdCLG1CQUFtQjtBQUMxRCxtQkFBTyxRQUFRLHdCQUF3QixXQUFXO0FBR2xELGNBQVUsTUFBTSxRQUFRO0FBQ3hCLGNBQVUsTUFBTSxTQUFTO0FBQ3pCLGNBQVUsWUFBWSxJQUFJO0FBRzFCLGtCQUFjLE1BQU0sVUFBVTtBQUM5QixjQUFVLE1BQU0sVUFBVTtBQUcxQixvQkFBZ0IsV0FBVztBQUMzQixlQUFXLE1BQU0sV0FBVyxNQUFNLFdBQVcsUUFBUTtBQUNyRCwwQkFBc0IsV0FBVztBQUNqQyw4QkFBMEIsV0FBVztBQUNyQywyQkFBdUIsV0FBVztBQUVsQyxhQUFTLFNBQVM7QUFBQTtBQUVwQixTQUFPLGlCQUFpQixTQUFTLFlBQVk7QUFNN0MsT0FBSyxlQUFPLFFBQVEsa0JBQWtCLEdBQUc7QUFDdkMsVUFBTSxJQUFJLE1BQU0sc0NBQXNDO0FBQUEsRUFDeEQ7QUFNQSxhQUFXLElBQUksV0FBVztBQUFBLElBQ3hCO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDRixDQUFDO0FBRUQsU0FBTyxJQUFJLDRCQUE0QjtBQUV2QyxRQUFNLFNBQVMsS0FBSztBQUVwQixTQUFPLElBQUksMkJBQTJCO0FBRXRDLFdBQVMsTUFBTTtBQUVmLFNBQU8sSUFBSSx1QkFBdUI7QUFNbEMsUUFBTSx1QkFBdUI7QUFDN0IsRUFBVSxrQkFBa0Isc0JBQXNCLE1BQU07QUFDdEQsVUFBTSxJQUFJLE1BQ1IsMEVBQ0Y7QUFBQSxHQUNEO0FBQUE7QUFHSCxPQUFPLGlCQUFpQixRQUFRLFlBQVksS0FBSzsiLAogICJkZWJ1Z0lkIjogIkYwRDQyM0VCOEY4NkM2Q0I2NDc1NmUyMTY0NzU2ZTIxIiwKICAibmFtZXMiOiBbXQp9
