var __defProp = Object.defineProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, {
      get: all[name],
      enumerable: true,
      configurable: true,
      set: (newValue) => all[name] = () => newValue
    });
};

// src/local-framework/system/index.ts
var exports_system = {};
__export(exports_system, {
  utilities: () => {
    {
      return exports_utilities;
    }
  },
  rng: () => {
    {
      return exports_rng;
    }
  },
  metrics: () => {
    {
      return exports_metrics;
    }
  },
  math: () => {
    {
      return exports_math;
    }
  },
  controllers: () => {
    {
      return exports_controllers;
    }
  },
  browser: () => {
    {
      return exports_browser;
    }
  }
});

// src/local-framework/system/browser/index.ts
var exports_browser = {};
__export(exports_browser, {
  isWebWorkerSupported: () => {
    {
      return isWebWorkerSupported;
    }
  },
  isWebGL2Supported: () => {
    {
      return isWebGL2Supported;
    }
  },
  isNumber: () => {
    {
      return isNumber;
    }
  },
  isLetter: () => {
    {
      return isLetter;
    }
  },
  isAlphanumeric: () => {
    {
      return isAlphanumeric;
    }
  },
  GlobalVisibilityManager: () => {
    {
      return GlobalVisibilityManager;
    }
  },
  GlobalTouchManager: () => {
    {
      return GlobalTouchManager;
    }
  },
  GlobalPointerLockManager: () => {
    {
      return GlobalPointerLockManager;
    }
  },
  GlobalMouseManager: () => {
    {
      return GlobalMouseManager;
    }
  },
  GlobalKeyboardManager: () => {
    {
      return GlobalKeyboardManager;
    }
  },
  GlobalFullScreenManager: () => {
    {
      return GlobalFullScreenManager;
    }
  },
  AllKeyCodes: () => {
    {
      return AllKeyCodes;
    }
  }
});

// src/local-framework/system/browser/FullScreenManager.ts
var allRequestEvents = [
  "requestFullscreen",
  "webkitRequestFullscreen",
  "mozRequestFullScreen",
  "msRequestFullscreen"
];
var allChangeEvents = [
  "fullscreenchange",
  "webkitfullscreenchange",
  "mozfullscreenchange",
  "msfullscreenchange"
];

class FullScreenManager {
  _onFullScreenChangeCallbacks = [];
  _isInitialized = false;
  _initialize() {
    if (this._isInitialized) {
      return;
    }
    this._isInitialized = true;
    const onLockChange = () => {
      this._onFullScreenChangeCallbacks.forEach((callback) => callback());
    };
    for (const currEvent of allChangeEvents)
      document.addEventListener(currEvent, onLockChange, false);
  }
  isCompatible(inTargetElement) {
    for (const currEvent of allRequestEvents) {
      if (currEvent in inTargetElement) {
        return true;
      }
    }
    return false;
  }
  isFullScreen(inTargetElement) {
    return document.fullscreenElement === inTargetElement;
  }
  async requestFullScreen(inTargetElement) {
    if (this.isFullScreen(inTargetElement)) {
      return { success: false, message: "element already in full screen" };
    }
    this._initialize();
    for (const currEvent of allRequestEvents) {
      if (currEvent in inTargetElement) {
        inTargetElement[currEvent]();
        return { success: true, message: "request for full screen done" };
      }
    }
    return { success: false, message: "unsupported request for full screen" };
  }
  addOnFullScreenChange(inCallback) {
    this._onFullScreenChangeCallbacks.push(inCallback);
  }
  removeOnFullScreenChange(inCallback) {
    const index = this._onFullScreenChangeCallbacks.indexOf(inCallback);
    if (index < 0) {
      return;
    }
    this._onFullScreenChangeCallbacks.splice(index, 1);
  }
  removeAllCallbacks() {
    this._onFullScreenChangeCallbacks.length = 0;
  }
}
var GlobalFullScreenManager = new FullScreenManager;
// src/local-framework/system/browser/KeyCodes.ts
var AllKeyCodes = {
  Num0: 48,
  Num1: 49,
  Num2: 50,
  Num3: 51,
  Num4: 52,
  Num5: 53,
  Num6: 54,
  Num7: 55,
  Num8: 56,
  Num9: 57,
  A: 65,
  B: 66,
  C: 67,
  D: 68,
  E: 69,
  F: 70,
  G: 71,
  H: 72,
  I: 73,
  J: 74,
  K: 75,
  L: 76,
  M: 77,
  N: 78,
  O: 79,
  P: 80,
  Q: 81,
  R: 82,
  S: 83,
  T: 84,
  U: 85,
  V: 86,
  W: 87,
  X: 88,
  Y: 89,
  Z: 90,
  Semicolon: 186,
  Equal: 187,
  Comma: 188,
  Minus: 189,
  Period: 190,
  BackQuote: 192,
  BracketLeft: 219,
  Backslash: 220,
  BracketRight: 221,
  Quote: 222,
  Shift: 16,
  Ctrl: 17,
  Alt: 18,
  CapsLock: 20,
  Tab: 9,
  Enter: 13,
  Pause: 19,
  Escape: 27,
  Space: 32,
  PageUp: 33,
  PageDown: 34,
  End: 35,
  Home: 36,
  ArrowLeft: 37,
  ArrowUp: 38,
  ArrowRight: 39,
  ArrowDown: 40,
  PrintScreen: 44,
  Insert: 45,
  Delete: 46,
  ContextMenu: 93,
  ScrollLock: 145,
  F1: 112,
  F2: 113,
  F3: 114,
  F4: 115,
  F5: 116,
  F6: 117,
  F7: 118,
  F8: 119,
  F9: 120,
  F10: 121,
  F11: 122,
  F12: 123,
  F13: 124,
  F14: 125,
  F15: 126,
  F16: 127,
  F17: 128,
  F18: 129,
  F19: 130,
  F20: 131,
  F21: 132,
  F22: 133,
  F23: 134,
  F24: 135,
  NumPad0: 96,
  NumPad1: 97,
  NumPad2: 98,
  NumPad3: 99,
  NumPad4: 100,
  NumPad5: 101,
  NumPad6: 102,
  NumPad7: 103,
  NumPad8: 104,
  NumPad9: 105,
  NumPadMultiply: 106,
  NumPadAdd: 107,
  NumPadSubtract: 109,
  NumPadDecimal: 110,
  NumPadDivide: 111,
  NumLock: 144,
  NumPadComma: 194,
  NumPadEqual: 12
};
var isLetter = (key) => {
  return key >= AllKeyCodes.A && key <= AllKeyCodes.Z;
};
var isNumber = (key) => {
  return key >= AllKeyCodes.Num0 && key <= AllKeyCodes.Num9 || key >= AllKeyCodes.NumPad0 && key <= AllKeyCodes.NumPad9;
};
var isAlphanumeric = (key) => {
  return isNumber(key) || isLetter(key);
};

// src/local-framework/system/browser/KeyboardManager.ts
class KeyboardManager {
  _pressedKeysSet = new Set;
  _preventDefaultKeysSet = new Set;
  _activated = false;
  _handleKeyDown;
  _handleKeyUp;
  _onEvent;
  constructor() {
    const handleKeyDown = (event) => {
      const { keyCode } = event;
      if (this._onEvent) {
        this._onEvent();
      }
      if (this._preventDefaultKeysSet.has(keyCode)) {
        event.preventDefault();
      }
      this._pressedKeysSet.add(keyCode);
    };
    const handleKeyUp = (event) => {
      const { keyCode } = event;
      if (this._onEvent) {
        this._onEvent();
      }
      if (this._preventDefaultKeysSet.has(keyCode)) {
        event.preventDefault();
      }
      this._pressedKeysSet.delete(keyCode);
    };
    this._activated = false;
    this._handleKeyDown = handleKeyDown.bind(this);
    this._handleKeyUp = handleKeyUp.bind(this);
  }
  isPressed(...inKeys) {
    for (const key of inKeys) {
      if (this._pressedKeysSet.has(AllKeyCodes[key])) {
        return true;
      }
    }
    return false;
  }
  preventDefault(inKey) {
    this._preventDefaultKeysSet.add(AllKeyCodes[inKey]);
  }
  enableDefault(inKey) {
    this._preventDefaultKeysSet.delete(AllKeyCodes[inKey]);
  }
  activate() {
    if (this._activated) {
      return;
    }
    this._pressedKeysSet.clear();
    document.addEventListener("keydown", this._handleKeyDown);
    document.addEventListener("keyup", this._handleKeyUp);
    this._activated = true;
  }
  deactivate() {
    if (!this._activated) {
      return;
    }
    this._pressedKeysSet.clear();
    document.removeEventListener("keydown", this._handleKeyDown);
    document.removeEventListener("keyup", this._handleKeyUp);
    this._activated = false;
  }
  onEvent(callback) {
    this._onEvent = callback;
  }
}
var GlobalKeyboardManager = new KeyboardManager;
// src/local-framework/system/browser/MouseManager.ts
var AllMouseButtons = {
  Left: 0,
  Middle: 1,
  Right: 2
};

class MouseManager {
  _pressedButtonsSet = new Set;
  _activated = false;
  _handleMouseDown;
  _handleMouseUp;
  _handleMouseMove;
  _handleMouseWheel;
  _positionX = 0;
  _positionY = 0;
  _deltaX = 0;
  _deltaY = 0;
  _wheelDeltaY = 0;
  _onEvent;
  constructor() {
    const handleMouseDown = (event) => {
      if (this._onEvent) {
        this._onEvent();
      }
      this._positionX = event.pageX;
      this._positionY = event.pageY;
      this._pressedButtonsSet.add(event.button);
    };
    const handleMouseUp = (event) => {
      if (this._onEvent) {
        this._onEvent();
      }
      this._positionX = event.pageX;
      this._positionY = event.pageY;
      this._pressedButtonsSet.delete(event.button);
    };
    const handleMouseMove = (event) => {
      if (this._onEvent) {
        this._onEvent();
      }
      this._positionX = event.pageX;
      this._positionY = event.pageY;
      this._deltaX += event.movementX || event.mozMovementX || event.webkitMovementX || 0;
      this._deltaY += event.movementY || event.mozMovementY || event.webkitMovementY || 0;
    };
    const handleWheelEvent = (event) => {
      if (this._onEvent) {
        this._onEvent();
      }
      this._wheelDeltaY += event.deltaY || 0;
    };
    this._activated = false;
    this._handleMouseDown = handleMouseDown.bind(this);
    this._handleMouseUp = handleMouseUp.bind(this);
    this._handleMouseMove = handleMouseMove.bind(this);
    this._handleMouseWheel = handleWheelEvent.bind(this);
  }
  activate(domElement) {
    if (this._activated) {
      return;
    }
    this._pressedButtonsSet.clear();
    domElement.addEventListener("mousedown", this._handleMouseDown);
    domElement.addEventListener("mouseup", this._handleMouseUp);
    domElement.addEventListener("mousemove", this._handleMouseMove);
    domElement.addEventListener("wheel", this._handleMouseWheel);
    this._activated = true;
  }
  deactivate(domElement) {
    if (!this._activated) {
      return;
    }
    this._pressedButtonsSet.clear();
    domElement.removeEventListener("mousedown", this._handleMouseDown);
    domElement.removeEventListener("mouseup", this._handleMouseUp);
    domElement.removeEventListener("mousemove", this._handleMouseMove);
    domElement.removeEventListener("wheel", this._handleMouseWheel);
    this._activated = false;
  }
  isButtonPressed(inKey) {
    return this._pressedButtonsSet.has(AllMouseButtons[inKey]);
  }
  get positionX() {
    return this._positionX;
  }
  get positionY() {
    return this._positionY;
  }
  deltaX() {
    return this._deltaX;
  }
  deltaY() {
    return this._deltaY;
  }
  wheelDeltaY() {
    return this._wheelDeltaY;
  }
  resetDeltas() {
    this._deltaX = 0;
    this._deltaY = 0;
    this._wheelDeltaY = 0;
  }
  onEvent(callback) {
    this._onEvent = callback;
  }
}
var GlobalMouseManager = new MouseManager;
// src/local-framework/system/browser/PointerLockManager.ts
var allRequestEvents2 = [
  "requestPointerLock",
  "mozRequestPointerLock",
  "webkitRequestPointerLock"
];
var allExitEvents = [
  "exitPointerLock",
  "mozExitPointerLock",
  "webkitExitPointerLock"
];
var allStateEvents = [
  "pointerLockElement",
  "mozPointerLockElement",
  "webkitPointerLockElement"
];
var allChangeEvents2 = [
  { methodName: "onpointerlockchange", propertyName: "pointerlockchange" },
  {
    methodName: "onmozpointerlockchange",
    propertyName: "mozpointerlockchange"
  },
  {
    methodName: "onwebkitpointerlockchange",
    propertyName: "webkitpointerlockchange"
  }
];
var allErrorEvents = [
  { methodName: "onpointerlockerror", propertyName: "pointerlockerror" },
  { methodName: "onmozpointerlockerror", propertyName: "mozpointerlockerror" },
  {
    methodName: "onwebkitpointerlockerror",
    propertyName: "webkitpointerlockerror"
  }
];

class PointerLockManager {
  _onLockChangeCallbacks = [];
  _onLockErrorCallbacks = [];
  _timeSinceLastLockChange = 0;
  _latestRequestHtmlElement;
  _isInitialized = false;
  _initialize() {
    if (this._isInitialized) {
      return;
    }
    this._isInitialized = true;
    const onLockChange = () => {
      this._timeSinceLastLockChange = Date.now();
      this._onLockChangeCallbacks.forEach((callback) => callback());
    };
    const onLockError = (event) => {
      this._timeSinceLastLockChange = Date.now();
      this._onLockErrorCallbacks.forEach((callback) => callback(event));
    };
    for (const currEvent of allChangeEvents2) {
      if (currEvent.methodName in document) {
        document.addEventListener(currEvent.propertyName, onLockChange, false);
        break;
      }
    }
    for (const currEvent of allErrorEvents) {
      if (currEvent.methodName in document) {
        document.addEventListener(currEvent.propertyName, onLockError, false);
        break;
      }
    }
  }
  canBePointerLocked(inTargetElement) {
    for (const currEvent of allRequestEvents2) {
      if (currEvent in inTargetElement) {
        return true;
      }
    }
    return false;
  }
  isPointerLocked(inTargetElement) {
    for (const currEvent of allStateEvents) {
      if (currEvent in document) {
        return document[currEvent] === inTargetElement;
      }
    }
    return false;
  }
  async requestPointerLock(inTargetElement) {
    if (this.isPointerLocked(inTargetElement)) {
      return { success: false, message: "element already locked" };
    }
    this._initialize();
    if (this._timeSinceLastLockChange > 0) {
      const elapsedSecTime = (Date.now() - this._timeSinceLastLockChange) / 1000;
      if (elapsedSecTime < 1.1) {
        return {
          success: false,
          message: `request for lock was too early, time to wait: ${elapsedSecTime.toFixed(2)}sec`
        };
      }
    }
    this._timeSinceLastLockChange = Date.now();
    for (const currEvent of allRequestEvents2) {
      if (currEvent in inTargetElement) {
        const options = {
          unadjustedMovement: false
        };
        try {
          await inTargetElement[currEvent](options);
        } catch (err) {
          const elapsedSecTime = (Date.now() - this._timeSinceLastLockChange) / 1000;
          return {
            success: false,
            message: `request for lock was too early, time to wait: ${elapsedSecTime.toFixed(2)}sec`
          };
        }
        this._timeSinceLastLockChange = Date.now();
        return { success: true, message: "request for lock done" };
      }
    }
    return { success: false, message: "unsupported request for lock" };
  }
  allowPointerLockedOnClickEvent(inTargetElement) {
    if (inTargetElement === this._latestRequestHtmlElement) {
      return;
    }
    this._latestRequestHtmlElement = inTargetElement;
    const onClick = async () => {
      inTargetElement.removeEventListener("click", onClick);
      const result = await this.requestPointerLock(inTargetElement);
      this._latestRequestHtmlElement = undefined;
      if (!result.success) {
        this.allowPointerLockedOnClickEvent(inTargetElement);
      }
    };
    inTargetElement.addEventListener("click", onClick);
  }
  exitPointerLock() {
    for (const currEvent of allExitEvents) {
      if (currEvent in document) {
        document[currEvent]();
        break;
      }
    }
  }
  addOnLockChange(inCallback) {
    this._onLockChangeCallbacks.push(inCallback);
  }
  removeOnLockChange(inCallback) {
    const index = this._onLockChangeCallbacks.indexOf(inCallback);
    if (index < 0) {
      return;
    }
    this._onLockChangeCallbacks.splice(index, 1);
  }
  addOnLockError(inCallback) {
    this._onLockErrorCallbacks.push(inCallback);
  }
  removeOnLockError(inCallback) {
    const index = this._onLockErrorCallbacks.indexOf(inCallback);
    if (index < 0) {
      return;
    }
    this._onLockErrorCallbacks.splice(index, 1);
  }
  removeAllCallbacks() {
    this._onLockChangeCallbacks.length = 0;
    this._onLockErrorCallbacks.length = 0;
  }
}
var GlobalPointerLockManager = new PointerLockManager;
// src/local-framework/system/browser/TouchManager.ts
class TouchData {
  id;
  createdAt = Date.now();
  positionX;
  positionY;
  deltaX = 0;
  deltaY = 0;
  constructor(id, positionX, positionY) {
    this.id = id;
    this.positionX = positionX;
    this.positionY = positionY;
  }
  resetDelta() {
    this.deltaX = 0;
    this.deltaY = 0;
  }
}

class TouchManager {
  _activated = false;
  _allTouchDataMap = new Map;
  _allCachedTouchDataArray = [];
  _handleTouchStart;
  _handleTouchEnd;
  _handleTouchMove;
  _onEvent;
  constructor() {
    const handleTouchStart = (event) => {
      event.preventDefault();
      if (this._onEvent) {
        this._onEvent();
      }
      for (let ii = 0;ii < event.changedTouches.length; ++ii) {
        const { identifier, pageX, pageY } = event.changedTouches[ii];
        const newData = new TouchData(identifier, pageX, pageY);
        this._allTouchDataMap.set(`${identifier}`, newData);
        this._allCachedTouchDataArray.length = 0;
      }
    };
    const handleTouchEnd = (event) => {
      event.preventDefault();
      if (this._onEvent) {
        this._onEvent();
      }
      for (let ii = 0;ii < event.changedTouches.length; ++ii) {
        const { identifier } = event.changedTouches[ii];
        this._allTouchDataMap.delete(`${identifier}`);
        this._allCachedTouchDataArray.length = 0;
      }
    };
    const handleTouchMove = (event) => {
      event.preventDefault();
      if (this._onEvent) {
        this._onEvent();
      }
      for (let ii = 0;ii < event.changedTouches.length; ++ii) {
        const { identifier, pageX, pageY } = event.changedTouches[ii];
        const currData = this._allTouchDataMap.get(`${identifier}`);
        if (!currData) {
          continue;
        }
        const deltaX = pageX - currData.positionX;
        const deltaY = pageY - currData.positionY;
        currData.deltaX += deltaX;
        currData.deltaY += deltaY;
        currData.positionX = pageX;
        currData.positionY = pageY;
      }
    };
    this._activated = false;
    this._handleTouchStart = handleTouchStart.bind(this);
    this._handleTouchEnd = handleTouchEnd.bind(this);
    this._handleTouchMove = handleTouchMove.bind(this);
  }
  isSupported(inTargetElement) {
    return "ontouchstart" in inTargetElement;
  }
  activate(inTargetElement) {
    if (!this.isSupported(inTargetElement)) {
      return;
    }
    if (this._activated) {
      return;
    }
    this._allTouchDataMap.clear();
    this._allCachedTouchDataArray.length = 0;
    inTargetElement.addEventListener("touchstart", this._handleTouchStart);
    inTargetElement.addEventListener("touchend", this._handleTouchEnd);
    inTargetElement.addEventListener("touchcancel", this._handleTouchEnd);
    inTargetElement.addEventListener("touchmove", this._handleTouchMove, {
      passive: false
    });
    this._activated = true;
  }
  deactivate(inTargetElement) {
    if (!this._activated) {
      return;
    }
    this._allTouchDataMap.clear();
    this._allCachedTouchDataArray.length = 0;
    inTargetElement.removeEventListener("touchstart", this._handleTouchStart);
    inTargetElement.removeEventListener("touchend", this._handleTouchEnd);
    inTargetElement.removeEventListener("touchcancel", this._handleTouchEnd);
    inTargetElement.removeEventListener("touchmove", this._handleTouchMove);
    this._activated = false;
  }
  _refreshCache() {
    if (this._allCachedTouchDataArray.length === 0) {
      this._allCachedTouchDataArray = [...this._allTouchDataMap.values()];
    }
  }
  getTouchData() {
    this._refreshCache();
    return this._allCachedTouchDataArray;
  }
  resetDeltas() {
    this._refreshCache();
    this._allCachedTouchDataArray.forEach((item) => item.resetDelta());
  }
  onEvent(callback) {
    this._onEvent = callback;
  }
}
var GlobalTouchManager = new TouchManager;
// src/local-framework/system/browser/VisibilityManager.ts
class VisibilityManager {
  _activated = false;
  _onVisibilityChangeCallbacks = [];
  _handleVisibilityChange;
  constructor() {
    const handleVisibilityChange = () => {
      const isVisible = this.isVisible();
      this._onVisibilityChangeCallbacks.forEach((callback) => callback(isVisible));
    };
    this._handleVisibilityChange = handleVisibilityChange.bind(this);
  }
  activate() {
    if (!this.isSupported()) {
      return;
    }
    if (this._activated) {
      return;
    }
    document.addEventListener("visibilitychange", this._handleVisibilityChange, false);
    this._activated = true;
  }
  deactivate() {
    if (!this._activated) {
      return;
    }
    document.removeEventListener("visibilitychange", this._handleVisibilityChange, false);
    this._activated = false;
  }
  isSupported() {
    return "onvisibilitychange" in document;
  }
  isVisible() {
    return document.visibilityState === "visible";
  }
  addVisibilityChange(inCallback) {
    this._onVisibilityChangeCallbacks.push(inCallback);
  }
  removeVisibilityChange(inCallback) {
    const index = this._onVisibilityChangeCallbacks.indexOf(inCallback);
    if (index < 0) {
      return;
    }
    this._onVisibilityChangeCallbacks.splice(index, 1);
  }
  removeAllCallbacks() {
    this._onVisibilityChangeCallbacks.length = 0;
  }
}
var GlobalVisibilityManager = new VisibilityManager;
// src/local-framework/system/browser/isWebWorkerSupported.ts
var isWebWorkerSupported = () => {
  return !!window.Worker;
};
// src/local-framework/system/browser/isWebGL2Supported.ts
var isWebGL2Supported = () => {
  return !!window.WebGL2RenderingContext;
};
// src/local-framework/system/controllers/index.ts
var exports_controllers = {};
__export(exports_controllers, {
  FreeFlyController: () => {
    {
      return FreeFlyController;
    }
  }
});

// node_modules/gl-matrix/esm/common.js
var EPSILON = 0.000001;
var ARRAY_TYPE = typeof Float32Array !== "undefined" ? Float32Array : Array;
var RANDOM = Math.random;
var degree = Math.PI / 180;
if (!Math.hypot)
  Math.hypot = function() {
    var y = 0, i = arguments.length;
    while (i--) {
      y += arguments[i] * arguments[i];
    }
    return Math.sqrt(y);
  };

// node_modules/gl-matrix/esm/mat3.js
function create() {
  var out = new ARRAY_TYPE(9);
  if (ARRAY_TYPE != Float32Array) {
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
  }
  out[0] = 1;
  out[4] = 1;
  out[8] = 1;
  return out;
}

// node_modules/gl-matrix/esm/mat4.js
var exports_mat4 = {};
__export(exports_mat4, {
  transpose: () => {
    {
      return transpose;
    }
  },
  translate: () => {
    {
      return translate;
    }
  },
  targetTo: () => {
    {
      return targetTo;
    }
  },
  subtract: () => {
    {
      return subtract;
    }
  },
  sub: () => {
    {
      return sub;
    }
  },
  str: () => {
    {
      return str;
    }
  },
  set: () => {
    {
      return set;
    }
  },
  scale: () => {
    {
      return scale;
    }
  },
  rotateZ: () => {
    {
      return rotateZ;
    }
  },
  rotateY: () => {
    {
      return rotateY;
    }
  },
  rotateX: () => {
    {
      return rotateX;
    }
  },
  rotate: () => {
    {
      return rotate;
    }
  },
  perspectiveZO: () => {
    {
      return perspectiveZO;
    }
  },
  perspectiveNO: () => {
    {
      return perspectiveNO;
    }
  },
  perspectiveFromFieldOfView: () => {
    {
      return perspectiveFromFieldOfView;
    }
  },
  perspective: () => {
    {
      return perspective;
    }
  },
  orthoZO: () => {
    {
      return orthoZO;
    }
  },
  orthoNO: () => {
    {
      return orthoNO;
    }
  },
  ortho: () => {
    {
      return ortho;
    }
  },
  multiplyScalarAndAdd: () => {
    {
      return multiplyScalarAndAdd;
    }
  },
  multiplyScalar: () => {
    {
      return multiplyScalar;
    }
  },
  multiply: () => {
    {
      return multiply;
    }
  },
  mul: () => {
    {
      return mul;
    }
  },
  lookAt: () => {
    {
      return lookAt;
    }
  },
  invert: () => {
    {
      return invert;
    }
  },
  identity: () => {
    {
      return identity;
    }
  },
  getTranslation: () => {
    {
      return getTranslation;
    }
  },
  getScaling: () => {
    {
      return getScaling;
    }
  },
  getRotation: () => {
    {
      return getRotation;
    }
  },
  frustum: () => {
    {
      return frustum;
    }
  },
  fromZRotation: () => {
    {
      return fromZRotation;
    }
  },
  fromYRotation: () => {
    {
      return fromYRotation;
    }
  },
  fromXRotation: () => {
    {
      return fromXRotation;
    }
  },
  fromValues: () => {
    {
      return fromValues;
    }
  },
  fromTranslation: () => {
    {
      return fromTranslation;
    }
  },
  fromScaling: () => {
    {
      return fromScaling;
    }
  },
  fromRotationTranslationScaleOrigin: () => {
    {
      return fromRotationTranslationScaleOrigin;
    }
  },
  fromRotationTranslationScale: () => {
    {
      return fromRotationTranslationScale;
    }
  },
  fromRotationTranslation: () => {
    {
      return fromRotationTranslation;
    }
  },
  fromRotation: () => {
    {
      return fromRotation;
    }
  },
  fromQuat2: () => {
    {
      return fromQuat2;
    }
  },
  fromQuat: () => {
    {
      return fromQuat;
    }
  },
  frob: () => {
    {
      return frob;
    }
  },
  exactEquals: () => {
    {
      return exactEquals;
    }
  },
  equals: () => {
    {
      return equals;
    }
  },
  determinant: () => {
    {
      return determinant;
    }
  },
  create: () => {
    {
      return create2;
    }
  },
  copy: () => {
    {
      return copy;
    }
  },
  clone: () => {
    {
      return clone;
    }
  },
  adjoint: () => {
    {
      return adjoint;
    }
  },
  add: () => {
    {
      return add;
    }
  }
});
function create2() {
  var out = new ARRAY_TYPE(16);
  if (ARRAY_TYPE != Float32Array) {
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[4] = 0;
    out[6] = 0;
    out[7] = 0;
    out[8] = 0;
    out[9] = 0;
    out[11] = 0;
    out[12] = 0;
    out[13] = 0;
    out[14] = 0;
  }
  out[0] = 1;
  out[5] = 1;
  out[10] = 1;
  out[15] = 1;
  return out;
}
function clone(a) {
  var out = new ARRAY_TYPE(16);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  out[4] = a[4];
  out[5] = a[5];
  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  out[9] = a[9];
  out[10] = a[10];
  out[11] = a[11];
  out[12] = a[12];
  out[13] = a[13];
  out[14] = a[14];
  out[15] = a[15];
  return out;
}
function copy(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  out[4] = a[4];
  out[5] = a[5];
  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  out[9] = a[9];
  out[10] = a[10];
  out[11] = a[11];
  out[12] = a[12];
  out[13] = a[13];
  out[14] = a[14];
  out[15] = a[15];
  return out;
}
function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
  var out = new ARRAY_TYPE(16);
  out[0] = m00;
  out[1] = m01;
  out[2] = m02;
  out[3] = m03;
  out[4] = m10;
  out[5] = m11;
  out[6] = m12;
  out[7] = m13;
  out[8] = m20;
  out[9] = m21;
  out[10] = m22;
  out[11] = m23;
  out[12] = m30;
  out[13] = m31;
  out[14] = m32;
  out[15] = m33;
  return out;
}
function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
  out[0] = m00;
  out[1] = m01;
  out[2] = m02;
  out[3] = m03;
  out[4] = m10;
  out[5] = m11;
  out[6] = m12;
  out[7] = m13;
  out[8] = m20;
  out[9] = m21;
  out[10] = m22;
  out[11] = m23;
  out[12] = m30;
  out[13] = m31;
  out[14] = m32;
  out[15] = m33;
  return out;
}
function identity(out) {
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = 1;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 1;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function transpose(out, a) {
  if (out === a) {
    var a01 = a[1], a02 = a[2], a03 = a[3];
    var a12 = a[6], a13 = a[7];
    var a23 = a[11];
    out[1] = a[4];
    out[2] = a[8];
    out[3] = a[12];
    out[4] = a01;
    out[6] = a[9];
    out[7] = a[13];
    out[8] = a02;
    out[9] = a12;
    out[11] = a[14];
    out[12] = a03;
    out[13] = a13;
    out[14] = a23;
  } else {
    out[0] = a[0];
    out[1] = a[4];
    out[2] = a[8];
    out[3] = a[12];
    out[4] = a[1];
    out[5] = a[5];
    out[6] = a[9];
    out[7] = a[13];
    out[8] = a[2];
    out[9] = a[6];
    out[10] = a[10];
    out[11] = a[14];
    out[12] = a[3];
    out[13] = a[7];
    out[14] = a[11];
    out[15] = a[15];
  }
  return out;
}
function invert(out, a) {
  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
  var b00 = a00 * a11 - a01 * a10;
  var b01 = a00 * a12 - a02 * a10;
  var b02 = a00 * a13 - a03 * a10;
  var b03 = a01 * a12 - a02 * a11;
  var b04 = a01 * a13 - a03 * a11;
  var b05 = a02 * a13 - a03 * a12;
  var b06 = a20 * a31 - a21 * a30;
  var b07 = a20 * a32 - a22 * a30;
  var b08 = a20 * a33 - a23 * a30;
  var b09 = a21 * a32 - a22 * a31;
  var b10 = a21 * a33 - a23 * a31;
  var b11 = a22 * a33 - a23 * a32;
  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
  if (!det) {
    return null;
  }
  det = 1 / det;
  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;
  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;
  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;
  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;
  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;
  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;
  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;
  return out;
}
function adjoint(out, a) {
  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);
  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));
  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);
  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));
  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));
  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);
  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));
  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);
  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);
  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));
  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);
  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));
  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));
  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);
  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));
  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);
  return out;
}
function determinant(a) {
  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
  var b00 = a00 * a11 - a01 * a10;
  var b01 = a00 * a12 - a02 * a10;
  var b02 = a00 * a13 - a03 * a10;
  var b03 = a01 * a12 - a02 * a11;
  var b04 = a01 * a13 - a03 * a11;
  var b05 = a02 * a13 - a03 * a12;
  var b06 = a20 * a31 - a21 * a30;
  var b07 = a20 * a32 - a22 * a30;
  var b08 = a20 * a33 - a23 * a30;
  var b09 = a21 * a32 - a22 * a31;
  var b10 = a21 * a33 - a23 * a31;
  var b11 = a22 * a33 - a23 * a32;
  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
}
function multiply(out, a, b) {
  var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];
  var a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];
  var a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];
  var a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];
  var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
  b0 = b[4];
  b1 = b[5];
  b2 = b[6];
  b3 = b[7];
  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
  b0 = b[8];
  b1 = b[9];
  b2 = b[10];
  b3 = b[11];
  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
  b0 = b[12];
  b1 = b[13];
  b2 = b[14];
  b3 = b[15];
  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;
  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;
  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;
  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;
  return out;
}
function translate(out, a, v) {
  var x = v[0], y = v[1], z = v[2];
  var a00, a01, a02, a03;
  var a10, a11, a12, a13;
  var a20, a21, a22, a23;
  if (a === out) {
    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];
    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];
    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];
    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];
  } else {
    a00 = a[0];
    a01 = a[1];
    a02 = a[2];
    a03 = a[3];
    a10 = a[4];
    a11 = a[5];
    a12 = a[6];
    a13 = a[7];
    a20 = a[8];
    a21 = a[9];
    a22 = a[10];
    a23 = a[11];
    out[0] = a00;
    out[1] = a01;
    out[2] = a02;
    out[3] = a03;
    out[4] = a10;
    out[5] = a11;
    out[6] = a12;
    out[7] = a13;
    out[8] = a20;
    out[9] = a21;
    out[10] = a22;
    out[11] = a23;
    out[12] = a00 * x + a10 * y + a20 * z + a[12];
    out[13] = a01 * x + a11 * y + a21 * z + a[13];
    out[14] = a02 * x + a12 * y + a22 * z + a[14];
    out[15] = a03 * x + a13 * y + a23 * z + a[15];
  }
  return out;
}
function scale(out, a, v) {
  var x = v[0], y = v[1], z = v[2];
  out[0] = a[0] * x;
  out[1] = a[1] * x;
  out[2] = a[2] * x;
  out[3] = a[3] * x;
  out[4] = a[4] * y;
  out[5] = a[5] * y;
  out[6] = a[6] * y;
  out[7] = a[7] * y;
  out[8] = a[8] * z;
  out[9] = a[9] * z;
  out[10] = a[10] * z;
  out[11] = a[11] * z;
  out[12] = a[12];
  out[13] = a[13];
  out[14] = a[14];
  out[15] = a[15];
  return out;
}
function rotate(out, a, rad, axis) {
  var x = axis[0], y = axis[1], z = axis[2];
  var len = Math.hypot(x, y, z);
  var s, c, t;
  var a00, a01, a02, a03;
  var a10, a11, a12, a13;
  var a20, a21, a22, a23;
  var b00, b01, b02;
  var b10, b11, b12;
  var b20, b21, b22;
  if (len < EPSILON) {
    return null;
  }
  len = 1 / len;
  x *= len;
  y *= len;
  z *= len;
  s = Math.sin(rad);
  c = Math.cos(rad);
  t = 1 - c;
  a00 = a[0];
  a01 = a[1];
  a02 = a[2];
  a03 = a[3];
  a10 = a[4];
  a11 = a[5];
  a12 = a[6];
  a13 = a[7];
  a20 = a[8];
  a21 = a[9];
  a22 = a[10];
  a23 = a[11];
  b00 = x * x * t + c;
  b01 = y * x * t + z * s;
  b02 = z * x * t - y * s;
  b10 = x * y * t - z * s;
  b11 = y * y * t + c;
  b12 = z * y * t + x * s;
  b20 = x * z * t + y * s;
  b21 = y * z * t - x * s;
  b22 = z * z * t + c;
  out[0] = a00 * b00 + a10 * b01 + a20 * b02;
  out[1] = a01 * b00 + a11 * b01 + a21 * b02;
  out[2] = a02 * b00 + a12 * b01 + a22 * b02;
  out[3] = a03 * b00 + a13 * b01 + a23 * b02;
  out[4] = a00 * b10 + a10 * b11 + a20 * b12;
  out[5] = a01 * b10 + a11 * b11 + a21 * b12;
  out[6] = a02 * b10 + a12 * b11 + a22 * b12;
  out[7] = a03 * b10 + a13 * b11 + a23 * b12;
  out[8] = a00 * b20 + a10 * b21 + a20 * b22;
  out[9] = a01 * b20 + a11 * b21 + a21 * b22;
  out[10] = a02 * b20 + a12 * b21 + a22 * b22;
  out[11] = a03 * b20 + a13 * b21 + a23 * b22;
  if (a !== out) {
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
  }
  return out;
}
function rotateX(out, a, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  var a10 = a[4];
  var a11 = a[5];
  var a12 = a[6];
  var a13 = a[7];
  var a20 = a[8];
  var a21 = a[9];
  var a22 = a[10];
  var a23 = a[11];
  if (a !== out) {
    out[0] = a[0];
    out[1] = a[1];
    out[2] = a[2];
    out[3] = a[3];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
  }
  out[4] = a10 * c + a20 * s;
  out[5] = a11 * c + a21 * s;
  out[6] = a12 * c + a22 * s;
  out[7] = a13 * c + a23 * s;
  out[8] = a20 * c - a10 * s;
  out[9] = a21 * c - a11 * s;
  out[10] = a22 * c - a12 * s;
  out[11] = a23 * c - a13 * s;
  return out;
}
function rotateY(out, a, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  var a00 = a[0];
  var a01 = a[1];
  var a02 = a[2];
  var a03 = a[3];
  var a20 = a[8];
  var a21 = a[9];
  var a22 = a[10];
  var a23 = a[11];
  if (a !== out) {
    out[4] = a[4];
    out[5] = a[5];
    out[6] = a[6];
    out[7] = a[7];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
  }
  out[0] = a00 * c - a20 * s;
  out[1] = a01 * c - a21 * s;
  out[2] = a02 * c - a22 * s;
  out[3] = a03 * c - a23 * s;
  out[8] = a00 * s + a20 * c;
  out[9] = a01 * s + a21 * c;
  out[10] = a02 * s + a22 * c;
  out[11] = a03 * s + a23 * c;
  return out;
}
function rotateZ(out, a, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  var a00 = a[0];
  var a01 = a[1];
  var a02 = a[2];
  var a03 = a[3];
  var a10 = a[4];
  var a11 = a[5];
  var a12 = a[6];
  var a13 = a[7];
  if (a !== out) {
    out[8] = a[8];
    out[9] = a[9];
    out[10] = a[10];
    out[11] = a[11];
    out[12] = a[12];
    out[13] = a[13];
    out[14] = a[14];
    out[15] = a[15];
  }
  out[0] = a00 * c + a10 * s;
  out[1] = a01 * c + a11 * s;
  out[2] = a02 * c + a12 * s;
  out[3] = a03 * c + a13 * s;
  out[4] = a10 * c - a00 * s;
  out[5] = a11 * c - a01 * s;
  out[6] = a12 * c - a02 * s;
  out[7] = a13 * c - a03 * s;
  return out;
}
function fromTranslation(out, v) {
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = 1;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 1;
  out[11] = 0;
  out[12] = v[0];
  out[13] = v[1];
  out[14] = v[2];
  out[15] = 1;
  return out;
}
function fromScaling(out, v) {
  out[0] = v[0];
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = v[1];
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = v[2];
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromRotation(out, rad, axis) {
  var x = axis[0], y = axis[1], z = axis[2];
  var len = Math.hypot(x, y, z);
  var s, c, t;
  if (len < EPSILON) {
    return null;
  }
  len = 1 / len;
  x *= len;
  y *= len;
  z *= len;
  s = Math.sin(rad);
  c = Math.cos(rad);
  t = 1 - c;
  out[0] = x * x * t + c;
  out[1] = y * x * t + z * s;
  out[2] = z * x * t - y * s;
  out[3] = 0;
  out[4] = x * y * t - z * s;
  out[5] = y * y * t + c;
  out[6] = z * y * t + x * s;
  out[7] = 0;
  out[8] = x * z * t + y * s;
  out[9] = y * z * t - x * s;
  out[10] = z * z * t + c;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromXRotation(out, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = c;
  out[6] = s;
  out[7] = 0;
  out[8] = 0;
  out[9] = -s;
  out[10] = c;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromYRotation(out, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  out[0] = c;
  out[1] = 0;
  out[2] = -s;
  out[3] = 0;
  out[4] = 0;
  out[5] = 1;
  out[6] = 0;
  out[7] = 0;
  out[8] = s;
  out[9] = 0;
  out[10] = c;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromZRotation(out, rad) {
  var s = Math.sin(rad);
  var c = Math.cos(rad);
  out[0] = c;
  out[1] = s;
  out[2] = 0;
  out[3] = 0;
  out[4] = -s;
  out[5] = c;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 1;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function fromRotationTranslation(out, q, v) {
  var x = q[0], y = q[1], z = q[2], w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;
  var xx = x * x2;
  var xy = x * y2;
  var xz = x * z2;
  var yy = y * y2;
  var yz = y * z2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;
  out[0] = 1 - (yy + zz);
  out[1] = xy + wz;
  out[2] = xz - wy;
  out[3] = 0;
  out[4] = xy - wz;
  out[5] = 1 - (xx + zz);
  out[6] = yz + wx;
  out[7] = 0;
  out[8] = xz + wy;
  out[9] = yz - wx;
  out[10] = 1 - (xx + yy);
  out[11] = 0;
  out[12] = v[0];
  out[13] = v[1];
  out[14] = v[2];
  out[15] = 1;
  return out;
}
function fromQuat2(out, a) {
  var translation = new ARRAY_TYPE(3);
  var bx = -a[0], by = -a[1], bz = -a[2], bw = a[3], ax = a[4], ay = a[5], az = a[6], aw = a[7];
  var magnitude = bx * bx + by * by + bz * bz + bw * bw;
  if (magnitude > 0) {
    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;
    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;
    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;
  } else {
    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
  }
  fromRotationTranslation(out, a, translation);
  return out;
}
function getTranslation(out, mat) {
  out[0] = mat[12];
  out[1] = mat[13];
  out[2] = mat[14];
  return out;
}
function getScaling(out, mat) {
  var m11 = mat[0];
  var m12 = mat[1];
  var m13 = mat[2];
  var m21 = mat[4];
  var m22 = mat[5];
  var m23 = mat[6];
  var m31 = mat[8];
  var m32 = mat[9];
  var m33 = mat[10];
  out[0] = Math.hypot(m11, m12, m13);
  out[1] = Math.hypot(m21, m22, m23);
  out[2] = Math.hypot(m31, m32, m33);
  return out;
}
function getRotation(out, mat) {
  var scaling = new ARRAY_TYPE(3);
  getScaling(scaling, mat);
  var is1 = 1 / scaling[0];
  var is2 = 1 / scaling[1];
  var is3 = 1 / scaling[2];
  var sm11 = mat[0] * is1;
  var sm12 = mat[1] * is2;
  var sm13 = mat[2] * is3;
  var sm21 = mat[4] * is1;
  var sm22 = mat[5] * is2;
  var sm23 = mat[6] * is3;
  var sm31 = mat[8] * is1;
  var sm32 = mat[9] * is2;
  var sm33 = mat[10] * is3;
  var trace = sm11 + sm22 + sm33;
  var S = 0;
  if (trace > 0) {
    S = Math.sqrt(trace + 1) * 2;
    out[3] = 0.25 * S;
    out[0] = (sm23 - sm32) / S;
    out[1] = (sm31 - sm13) / S;
    out[2] = (sm12 - sm21) / S;
  } else if (sm11 > sm22 && sm11 > sm33) {
    S = Math.sqrt(1 + sm11 - sm22 - sm33) * 2;
    out[3] = (sm23 - sm32) / S;
    out[0] = 0.25 * S;
    out[1] = (sm12 + sm21) / S;
    out[2] = (sm31 + sm13) / S;
  } else if (sm22 > sm33) {
    S = Math.sqrt(1 + sm22 - sm11 - sm33) * 2;
    out[3] = (sm31 - sm13) / S;
    out[0] = (sm12 + sm21) / S;
    out[1] = 0.25 * S;
    out[2] = (sm23 + sm32) / S;
  } else {
    S = Math.sqrt(1 + sm33 - sm11 - sm22) * 2;
    out[3] = (sm12 - sm21) / S;
    out[0] = (sm31 + sm13) / S;
    out[1] = (sm23 + sm32) / S;
    out[2] = 0.25 * S;
  }
  return out;
}
function fromRotationTranslationScale(out, q, v, s) {
  var x = q[0], y = q[1], z = q[2], w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;
  var xx = x * x2;
  var xy = x * y2;
  var xz = x * z2;
  var yy = y * y2;
  var yz = y * z2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;
  var sx = s[0];
  var sy = s[1];
  var sz = s[2];
  out[0] = (1 - (yy + zz)) * sx;
  out[1] = (xy + wz) * sx;
  out[2] = (xz - wy) * sx;
  out[3] = 0;
  out[4] = (xy - wz) * sy;
  out[5] = (1 - (xx + zz)) * sy;
  out[6] = (yz + wx) * sy;
  out[7] = 0;
  out[8] = (xz + wy) * sz;
  out[9] = (yz - wx) * sz;
  out[10] = (1 - (xx + yy)) * sz;
  out[11] = 0;
  out[12] = v[0];
  out[13] = v[1];
  out[14] = v[2];
  out[15] = 1;
  return out;
}
function fromRotationTranslationScaleOrigin(out, q, v, s, o) {
  var x = q[0], y = q[1], z = q[2], w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;
  var xx = x * x2;
  var xy = x * y2;
  var xz = x * z2;
  var yy = y * y2;
  var yz = y * z2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;
  var sx = s[0];
  var sy = s[1];
  var sz = s[2];
  var ox = o[0];
  var oy = o[1];
  var oz = o[2];
  var out0 = (1 - (yy + zz)) * sx;
  var out1 = (xy + wz) * sx;
  var out2 = (xz - wy) * sx;
  var out4 = (xy - wz) * sy;
  var out5 = (1 - (xx + zz)) * sy;
  var out6 = (yz + wx) * sy;
  var out8 = (xz + wy) * sz;
  var out9 = (yz - wx) * sz;
  var out10 = (1 - (xx + yy)) * sz;
  out[0] = out0;
  out[1] = out1;
  out[2] = out2;
  out[3] = 0;
  out[4] = out4;
  out[5] = out5;
  out[6] = out6;
  out[7] = 0;
  out[8] = out8;
  out[9] = out9;
  out[10] = out10;
  out[11] = 0;
  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);
  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);
  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);
  out[15] = 1;
  return out;
}
function fromQuat(out, q) {
  var x = q[0], y = q[1], z = q[2], w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;
  var xx = x * x2;
  var yx = y * x2;
  var yy = y * y2;
  var zx = z * x2;
  var zy = z * y2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;
  out[0] = 1 - yy - zz;
  out[1] = yx + wz;
  out[2] = zx - wy;
  out[3] = 0;
  out[4] = yx - wz;
  out[5] = 1 - xx - zz;
  out[6] = zy + wx;
  out[7] = 0;
  out[8] = zx + wy;
  out[9] = zy - wx;
  out[10] = 1 - xx - yy;
  out[11] = 0;
  out[12] = 0;
  out[13] = 0;
  out[14] = 0;
  out[15] = 1;
  return out;
}
function frustum(out, left, right, bottom, top, near, far) {
  var rl = 1 / (right - left);
  var tb = 1 / (top - bottom);
  var nf = 1 / (near - far);
  out[0] = near * 2 * rl;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = near * 2 * tb;
  out[6] = 0;
  out[7] = 0;
  out[8] = (right + left) * rl;
  out[9] = (top + bottom) * tb;
  out[10] = (far + near) * nf;
  out[11] = -1;
  out[12] = 0;
  out[13] = 0;
  out[14] = far * near * 2 * nf;
  out[15] = 0;
  return out;
}
function perspectiveNO(out, fovy, aspect, near, far) {
  var f = 1 / Math.tan(fovy / 2), nf;
  out[0] = f / aspect;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = f;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[11] = -1;
  out[12] = 0;
  out[13] = 0;
  out[15] = 0;
  if (far != null && far !== Infinity) {
    nf = 1 / (near - far);
    out[10] = (far + near) * nf;
    out[14] = 2 * far * near * nf;
  } else {
    out[10] = -1;
    out[14] = -2 * near;
  }
  return out;
}
function perspectiveZO(out, fovy, aspect, near, far) {
  var f = 1 / Math.tan(fovy / 2), nf;
  out[0] = f / aspect;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = f;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[11] = -1;
  out[12] = 0;
  out[13] = 0;
  out[15] = 0;
  if (far != null && far !== Infinity) {
    nf = 1 / (near - far);
    out[10] = far * nf;
    out[14] = far * near * nf;
  } else {
    out[10] = -1;
    out[14] = -near;
  }
  return out;
}
function perspectiveFromFieldOfView(out, fov, near, far) {
  var upTan = Math.tan(fov.upDegrees * Math.PI / 180);
  var downTan = Math.tan(fov.downDegrees * Math.PI / 180);
  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180);
  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180);
  var xScale = 2 / (leftTan + rightTan);
  var yScale = 2 / (upTan + downTan);
  out[0] = xScale;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = yScale;
  out[6] = 0;
  out[7] = 0;
  out[8] = -((leftTan - rightTan) * xScale * 0.5);
  out[9] = (upTan - downTan) * yScale * 0.5;
  out[10] = far / (near - far);
  out[11] = -1;
  out[12] = 0;
  out[13] = 0;
  out[14] = far * near / (near - far);
  out[15] = 0;
  return out;
}
function orthoNO(out, left, right, bottom, top, near, far) {
  var lr = 1 / (left - right);
  var bt = 1 / (bottom - top);
  var nf = 1 / (near - far);
  out[0] = -2 * lr;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = -2 * bt;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = 2 * nf;
  out[11] = 0;
  out[12] = (left + right) * lr;
  out[13] = (top + bottom) * bt;
  out[14] = (far + near) * nf;
  out[15] = 1;
  return out;
}
function orthoZO(out, left, right, bottom, top, near, far) {
  var lr = 1 / (left - right);
  var bt = 1 / (bottom - top);
  var nf = 1 / (near - far);
  out[0] = -2 * lr;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 0;
  out[5] = -2 * bt;
  out[6] = 0;
  out[7] = 0;
  out[8] = 0;
  out[9] = 0;
  out[10] = nf;
  out[11] = 0;
  out[12] = (left + right) * lr;
  out[13] = (top + bottom) * bt;
  out[14] = near * nf;
  out[15] = 1;
  return out;
}
function lookAt(out, eye, center, up) {
  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;
  var eyex = eye[0];
  var eyey = eye[1];
  var eyez = eye[2];
  var upx = up[0];
  var upy = up[1];
  var upz = up[2];
  var centerx = center[0];
  var centery = center[1];
  var centerz = center[2];
  if (Math.abs(eyex - centerx) < EPSILON && Math.abs(eyey - centery) < EPSILON && Math.abs(eyez - centerz) < EPSILON) {
    return identity(out);
  }
  z0 = eyex - centerx;
  z1 = eyey - centery;
  z2 = eyez - centerz;
  len = 1 / Math.hypot(z0, z1, z2);
  z0 *= len;
  z1 *= len;
  z2 *= len;
  x0 = upy * z2 - upz * z1;
  x1 = upz * z0 - upx * z2;
  x2 = upx * z1 - upy * z0;
  len = Math.hypot(x0, x1, x2);
  if (!len) {
    x0 = 0;
    x1 = 0;
    x2 = 0;
  } else {
    len = 1 / len;
    x0 *= len;
    x1 *= len;
    x2 *= len;
  }
  y0 = z1 * x2 - z2 * x1;
  y1 = z2 * x0 - z0 * x2;
  y2 = z0 * x1 - z1 * x0;
  len = Math.hypot(y0, y1, y2);
  if (!len) {
    y0 = 0;
    y1 = 0;
    y2 = 0;
  } else {
    len = 1 / len;
    y0 *= len;
    y1 *= len;
    y2 *= len;
  }
  out[0] = x0;
  out[1] = y0;
  out[2] = z0;
  out[3] = 0;
  out[4] = x1;
  out[5] = y1;
  out[6] = z1;
  out[7] = 0;
  out[8] = x2;
  out[9] = y2;
  out[10] = z2;
  out[11] = 0;
  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);
  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
  out[15] = 1;
  return out;
}
function targetTo(out, eye, target, up) {
  var eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2];
  var z0 = eyex - target[0], z1 = eyey - target[1], z2 = eyez - target[2];
  var len = z0 * z0 + z1 * z1 + z2 * z2;
  if (len > 0) {
    len = 1 / Math.sqrt(len);
    z0 *= len;
    z1 *= len;
    z2 *= len;
  }
  var x0 = upy * z2 - upz * z1, x1 = upz * z0 - upx * z2, x2 = upx * z1 - upy * z0;
  len = x0 * x0 + x1 * x1 + x2 * x2;
  if (len > 0) {
    len = 1 / Math.sqrt(len);
    x0 *= len;
    x1 *= len;
    x2 *= len;
  }
  out[0] = x0;
  out[1] = x1;
  out[2] = x2;
  out[3] = 0;
  out[4] = z1 * x2 - z2 * x1;
  out[5] = z2 * x0 - z0 * x2;
  out[6] = z0 * x1 - z1 * x0;
  out[7] = 0;
  out[8] = z0;
  out[9] = z1;
  out[10] = z2;
  out[11] = 0;
  out[12] = eyex;
  out[13] = eyey;
  out[14] = eyez;
  out[15] = 1;
  return out;
}
function str(a) {
  return "mat4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + ")";
}
function frob(a) {
  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);
}
function add(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  out[3] = a[3] + b[3];
  out[4] = a[4] + b[4];
  out[5] = a[5] + b[5];
  out[6] = a[6] + b[6];
  out[7] = a[7] + b[7];
  out[8] = a[8] + b[8];
  out[9] = a[9] + b[9];
  out[10] = a[10] + b[10];
  out[11] = a[11] + b[11];
  out[12] = a[12] + b[12];
  out[13] = a[13] + b[13];
  out[14] = a[14] + b[14];
  out[15] = a[15] + b[15];
  return out;
}
function subtract(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  out[3] = a[3] - b[3];
  out[4] = a[4] - b[4];
  out[5] = a[5] - b[5];
  out[6] = a[6] - b[6];
  out[7] = a[7] - b[7];
  out[8] = a[8] - b[8];
  out[9] = a[9] - b[9];
  out[10] = a[10] - b[10];
  out[11] = a[11] - b[11];
  out[12] = a[12] - b[12];
  out[13] = a[13] - b[13];
  out[14] = a[14] - b[14];
  out[15] = a[15] - b[15];
  return out;
}
function multiplyScalar(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  out[3] = a[3] * b;
  out[4] = a[4] * b;
  out[5] = a[5] * b;
  out[6] = a[6] * b;
  out[7] = a[7] * b;
  out[8] = a[8] * b;
  out[9] = a[9] * b;
  out[10] = a[10] * b;
  out[11] = a[11] * b;
  out[12] = a[12] * b;
  out[13] = a[13] * b;
  out[14] = a[14] * b;
  out[15] = a[15] * b;
  return out;
}
function multiplyScalarAndAdd(out, a, b, scale2) {
  out[0] = a[0] + b[0] * scale2;
  out[1] = a[1] + b[1] * scale2;
  out[2] = a[2] + b[2] * scale2;
  out[3] = a[3] + b[3] * scale2;
  out[4] = a[4] + b[4] * scale2;
  out[5] = a[5] + b[5] * scale2;
  out[6] = a[6] + b[6] * scale2;
  out[7] = a[7] + b[7] * scale2;
  out[8] = a[8] + b[8] * scale2;
  out[9] = a[9] + b[9] * scale2;
  out[10] = a[10] + b[10] * scale2;
  out[11] = a[11] + b[11] * scale2;
  out[12] = a[12] + b[12] * scale2;
  out[13] = a[13] + b[13] * scale2;
  out[14] = a[14] + b[14] * scale2;
  out[15] = a[15] + b[15] * scale2;
  return out;
}
function exactEquals(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];
}
function equals(a, b) {
  var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
  var a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7];
  var a8 = a[8], a9 = a[9], a10 = a[10], a11 = a[11];
  var a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];
  var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
  var b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7];
  var b8 = b[8], b9 = b[9], b10 = b[10], b11 = b[11];
  var b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= EPSILON * Math.max(1, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= EPSILON * Math.max(1, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= EPSILON * Math.max(1, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= EPSILON * Math.max(1, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= EPSILON * Math.max(1, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= EPSILON * Math.max(1, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= EPSILON * Math.max(1, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= EPSILON * Math.max(1, Math.abs(a15), Math.abs(b15));
}
var perspective = perspectiveNO;
var ortho = orthoNO;
var mul = multiply;
var sub = subtract;

// node_modules/gl-matrix/esm/quat.js
var exports_quat = {};
__export(exports_quat, {
  str: () => {
    {
      return str4;
    }
  },
  squaredLength: () => {
    {
      return squaredLength3;
    }
  },
  sqrLen: () => {
    {
      return sqrLen3;
    }
  },
  sqlerp: () => {
    {
      return sqlerp;
    }
  },
  slerp: () => {
    {
      return slerp;
    }
  },
  setAxisAngle: () => {
    {
      return setAxisAngle;
    }
  },
  setAxes: () => {
    {
      return setAxes;
    }
  },
  set: () => {
    {
      return set4;
    }
  },
  scale: () => {
    {
      return scale4;
    }
  },
  rotationTo: () => {
    {
      return rotationTo;
    }
  },
  rotateZ: () => {
    {
      return rotateZ3;
    }
  },
  rotateY: () => {
    {
      return rotateY3;
    }
  },
  rotateX: () => {
    {
      return rotateX3;
    }
  },
  random: () => {
    {
      return random3;
    }
  },
  pow: () => {
    {
      return pow;
    }
  },
  normalize: () => {
    {
      return normalize3;
    }
  },
  multiply: () => {
    {
      return multiply4;
    }
  },
  mul: () => {
    {
      return mul4;
    }
  },
  ln: () => {
    {
      return ln;
    }
  },
  lerp: () => {
    {
      return lerp3;
    }
  },
  length: () => {
    {
      return length3;
    }
  },
  len: () => {
    {
      return len3;
    }
  },
  invert: () => {
    {
      return invert2;
    }
  },
  identity: () => {
    {
      return identity2;
    }
  },
  getAxisAngle: () => {
    {
      return getAxisAngle;
    }
  },
  getAngle: () => {
    {
      return getAngle;
    }
  },
  fromValues: () => {
    {
      return fromValues4;
    }
  },
  fromMat3: () => {
    {
      return fromMat3;
    }
  },
  fromEuler: () => {
    {
      return fromEuler;
    }
  },
  exp: () => {
    {
      return exp;
    }
  },
  exactEquals: () => {
    {
      return exactEquals4;
    }
  },
  equals: () => {
    {
      return equals4;
    }
  },
  dot: () => {
    {
      return dot3;
    }
  },
  create: () => {
    {
      return create5;
    }
  },
  copy: () => {
    {
      return copy4;
    }
  },
  conjugate: () => {
    {
      return conjugate;
    }
  },
  clone: () => {
    {
      return clone4;
    }
  },
  calculateW: () => {
    {
      return calculateW;
    }
  },
  add: () => {
    {
      return add4;
    }
  }
});

// node_modules/gl-matrix/esm/vec3.js
var exports_vec3 = {};
__export(exports_vec3, {
  zero: () => {
    {
      return zero;
    }
  },
  transformQuat: () => {
    {
      return transformQuat;
    }
  },
  transformMat4: () => {
    {
      return transformMat4;
    }
  },
  transformMat3: () => {
    {
      return transformMat3;
    }
  },
  subtract: () => {
    {
      return subtract2;
    }
  },
  sub: () => {
    {
      return sub2;
    }
  },
  str: () => {
    {
      return str2;
    }
  },
  squaredLength: () => {
    {
      return squaredLength;
    }
  },
  squaredDistance: () => {
    {
      return squaredDistance;
    }
  },
  sqrLen: () => {
    {
      return sqrLen;
    }
  },
  sqrDist: () => {
    {
      return sqrDist;
    }
  },
  set: () => {
    {
      return set2;
    }
  },
  scaleAndAdd: () => {
    {
      return scaleAndAdd;
    }
  },
  scale: () => {
    {
      return scale2;
    }
  },
  round: () => {
    {
      return round;
    }
  },
  rotateZ: () => {
    {
      return rotateZ2;
    }
  },
  rotateY: () => {
    {
      return rotateY2;
    }
  },
  rotateX: () => {
    {
      return rotateX2;
    }
  },
  random: () => {
    {
      return random;
    }
  },
  normalize: () => {
    {
      return normalize;
    }
  },
  negate: () => {
    {
      return negate;
    }
  },
  multiply: () => {
    {
      return multiply2;
    }
  },
  mul: () => {
    {
      return mul2;
    }
  },
  min: () => {
    {
      return min;
    }
  },
  max: () => {
    {
      return max;
    }
  },
  lerp: () => {
    {
      return lerp;
    }
  },
  length: () => {
    {
      return length;
    }
  },
  len: () => {
    {
      return len;
    }
  },
  inverse: () => {
    {
      return inverse;
    }
  },
  hermite: () => {
    {
      return hermite;
    }
  },
  fromValues: () => {
    {
      return fromValues2;
    }
  },
  forEach: () => {
    {
      return forEach;
    }
  },
  floor: () => {
    {
      return floor;
    }
  },
  exactEquals: () => {
    {
      return exactEquals2;
    }
  },
  equals: () => {
    {
      return equals2;
    }
  },
  dot: () => {
    {
      return dot;
    }
  },
  divide: () => {
    {
      return divide;
    }
  },
  div: () => {
    {
      return div;
    }
  },
  distance: () => {
    {
      return distance;
    }
  },
  dist: () => {
    {
      return dist;
    }
  },
  cross: () => {
    {
      return cross;
    }
  },
  create: () => {
    {
      return create3;
    }
  },
  copy: () => {
    {
      return copy2;
    }
  },
  clone: () => {
    {
      return clone2;
    }
  },
  ceil: () => {
    {
      return ceil;
    }
  },
  bezier: () => {
    {
      return bezier;
    }
  },
  angle: () => {
    {
      return angle;
    }
  },
  add: () => {
    {
      return add2;
    }
  }
});
function create3() {
  var out = new ARRAY_TYPE(3);
  if (ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }
  return out;
}
function clone2(a) {
  var out = new ARRAY_TYPE(3);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  return out;
}
function length(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return Math.hypot(x, y, z);
}
function fromValues2(x, y, z) {
  var out = new ARRAY_TYPE(3);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
}
function copy2(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  return out;
}
function set2(out, x, y, z) {
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
}
function add2(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  return out;
}
function subtract2(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  return out;
}
function multiply2(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  out[2] = a[2] * b[2];
  return out;
}
function divide(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  out[2] = a[2] / b[2];
  return out;
}
function ceil(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  out[2] = Math.ceil(a[2]);
  return out;
}
function floor(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  out[2] = Math.floor(a[2]);
  return out;
}
function min(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  out[2] = Math.min(a[2], b[2]);
  return out;
}
function max(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  out[2] = Math.max(a[2], b[2]);
  return out;
}
function round(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  out[2] = Math.round(a[2]);
  return out;
}
function scale2(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  return out;
}
function scaleAndAdd(out, a, b, scale3) {
  out[0] = a[0] + b[0] * scale3;
  out[1] = a[1] + b[1] * scale3;
  out[2] = a[2] + b[2] * scale3;
  return out;
}
function distance(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  return Math.hypot(x, y, z);
}
function squaredDistance(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  return x * x + y * y + z * z;
}
function squaredLength(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return x * x + y * y + z * z;
}
function negate(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  out[2] = -a[2];
  return out;
}
function inverse(out, a) {
  out[0] = 1 / a[0];
  out[1] = 1 / a[1];
  out[2] = 1 / a[2];
  return out;
}
function normalize(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var len = x * x + y * y + z * z;
  if (len > 0) {
    len = 1 / Math.sqrt(len);
  }
  out[0] = a[0] * len;
  out[1] = a[1] * len;
  out[2] = a[2] * len;
  return out;
}
function dot(a, b) {
  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
}
function cross(out, a, b) {
  var ax = a[0], ay = a[1], az = a[2];
  var bx = b[0], by = b[1], bz = b[2];
  out[0] = ay * bz - az * by;
  out[1] = az * bx - ax * bz;
  out[2] = ax * by - ay * bx;
  return out;
}
function lerp(out, a, b, t) {
  var ax = a[0];
  var ay = a[1];
  var az = a[2];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  out[2] = az + t * (b[2] - az);
  return out;
}
function hermite(out, a, b, c, d, t) {
  var factorTimes2 = t * t;
  var factor1 = factorTimes2 * (2 * t - 3) + 1;
  var factor2 = factorTimes2 * (t - 2) + t;
  var factor3 = factorTimes2 * (t - 1);
  var factor4 = factorTimes2 * (3 - 2 * t);
  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
  return out;
}
function bezier(out, a, b, c, d, t) {
  var inverseFactor = 1 - t;
  var inverseFactorTimesTwo = inverseFactor * inverseFactor;
  var factorTimes2 = t * t;
  var factor1 = inverseFactorTimesTwo * inverseFactor;
  var factor2 = 3 * t * inverseFactorTimesTwo;
  var factor3 = 3 * factorTimes2 * inverseFactor;
  var factor4 = factorTimes2 * t;
  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
  return out;
}
function random(out, scale3) {
  scale3 = scale3 || 1;
  var r = RANDOM() * 2 * Math.PI;
  var z = RANDOM() * 2 - 1;
  var zScale = Math.sqrt(1 - z * z) * scale3;
  out[0] = Math.cos(r) * zScale;
  out[1] = Math.sin(r) * zScale;
  out[2] = z * scale3;
  return out;
}
function transformMat4(out, a, m) {
  var x = a[0], y = a[1], z = a[2];
  var w = m[3] * x + m[7] * y + m[11] * z + m[15];
  w = w || 1;
  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;
  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;
  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;
  return out;
}
function transformMat3(out, a, m) {
  var x = a[0], y = a[1], z = a[2];
  out[0] = x * m[0] + y * m[3] + z * m[6];
  out[1] = x * m[1] + y * m[4] + z * m[7];
  out[2] = x * m[2] + y * m[5] + z * m[8];
  return out;
}
function transformQuat(out, a, q) {
  var qx = q[0], qy = q[1], qz = q[2], qw = q[3];
  var x = a[0], y = a[1], z = a[2];
  var uvx = qy * z - qz * y, uvy = qz * x - qx * z, uvz = qx * y - qy * x;
  var uuvx = qy * uvz - qz * uvy, uuvy = qz * uvx - qx * uvz, uuvz = qx * uvy - qy * uvx;
  var w2 = qw * 2;
  uvx *= w2;
  uvy *= w2;
  uvz *= w2;
  uuvx *= 2;
  uuvy *= 2;
  uuvz *= 2;
  out[0] = x + uvx + uuvx;
  out[1] = y + uvy + uuvy;
  out[2] = z + uvz + uuvz;
  return out;
}
function rotateX2(out, a, b, rad) {
  var p = [], r = [];
  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2];
  r[0] = p[0];
  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);
  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);
  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];
  return out;
}
function rotateY2(out, a, b, rad) {
  var p = [], r = [];
  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2];
  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);
  r[1] = p[1];
  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);
  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];
  return out;
}
function rotateZ2(out, a, b, rad) {
  var p = [], r = [];
  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2];
  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);
  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);
  r[2] = p[2];
  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];
  return out;
}
function angle(a, b) {
  var ax = a[0], ay = a[1], az = a[2], bx = b[0], by = b[1], bz = b[2], mag1 = Math.sqrt(ax * ax + ay * ay + az * az), mag2 = Math.sqrt(bx * bx + by * by + bz * bz), mag = mag1 * mag2, cosine = mag && dot(a, b) / mag;
  return Math.acos(Math.min(Math.max(cosine, -1), 1));
}
function zero(out) {
  out[0] = 0;
  out[1] = 0;
  out[2] = 0;
  return out;
}
function str2(a) {
  return "vec3(" + a[0] + ", " + a[1] + ", " + a[2] + ")";
}
function exactEquals2(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];
}
function equals2(a, b) {
  var a0 = a[0], a1 = a[1], a2 = a[2];
  var b0 = b[0], b1 = b[1], b2 = b[2];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2));
}
var sub2 = subtract2;
var mul2 = multiply2;
var div = divide;
var dist = distance;
var sqrDist = squaredDistance;
var len = length;
var sqrLen = squaredLength;
var forEach = function() {
  var vec = create3();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 3;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      vec[2] = a[i + 2];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
      a[i + 2] = vec[2];
    }
    return a;
  };
}();

// node_modules/gl-matrix/esm/vec4.js
var exports_vec4 = {};
__export(exports_vec4, {
  zero: () => {
    {
      return zero2;
    }
  },
  transformQuat: () => {
    {
      return transformQuat2;
    }
  },
  transformMat4: () => {
    {
      return transformMat42;
    }
  },
  subtract: () => {
    {
      return subtract3;
    }
  },
  sub: () => {
    {
      return sub3;
    }
  },
  str: () => {
    {
      return str3;
    }
  },
  squaredLength: () => {
    {
      return squaredLength2;
    }
  },
  squaredDistance: () => {
    {
      return squaredDistance2;
    }
  },
  sqrLen: () => {
    {
      return sqrLen2;
    }
  },
  sqrDist: () => {
    {
      return sqrDist2;
    }
  },
  set: () => {
    {
      return set3;
    }
  },
  scaleAndAdd: () => {
    {
      return scaleAndAdd2;
    }
  },
  scale: () => {
    {
      return scale3;
    }
  },
  round: () => {
    {
      return round2;
    }
  },
  random: () => {
    {
      return random2;
    }
  },
  normalize: () => {
    {
      return normalize2;
    }
  },
  negate: () => {
    {
      return negate2;
    }
  },
  multiply: () => {
    {
      return multiply3;
    }
  },
  mul: () => {
    {
      return mul3;
    }
  },
  min: () => {
    {
      return min2;
    }
  },
  max: () => {
    {
      return max2;
    }
  },
  lerp: () => {
    {
      return lerp2;
    }
  },
  length: () => {
    {
      return length2;
    }
  },
  len: () => {
    {
      return len2;
    }
  },
  inverse: () => {
    {
      return inverse2;
    }
  },
  fromValues: () => {
    {
      return fromValues3;
    }
  },
  forEach: () => {
    {
      return forEach2;
    }
  },
  floor: () => {
    {
      return floor2;
    }
  },
  exactEquals: () => {
    {
      return exactEquals3;
    }
  },
  equals: () => {
    {
      return equals3;
    }
  },
  dot: () => {
    {
      return dot2;
    }
  },
  divide: () => {
    {
      return divide2;
    }
  },
  div: () => {
    {
      return div2;
    }
  },
  distance: () => {
    {
      return distance2;
    }
  },
  dist: () => {
    {
      return dist2;
    }
  },
  cross: () => {
    {
      return cross2;
    }
  },
  create: () => {
    {
      return create4;
    }
  },
  copy: () => {
    {
      return copy3;
    }
  },
  clone: () => {
    {
      return clone3;
    }
  },
  ceil: () => {
    {
      return ceil2;
    }
  },
  add: () => {
    {
      return add3;
    }
  }
});
function create4() {
  var out = new ARRAY_TYPE(4);
  if (ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
  }
  return out;
}
function clone3(a) {
  var out = new ARRAY_TYPE(4);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  return out;
}
function fromValues3(x, y, z, w) {
  var out = new ARRAY_TYPE(4);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  out[3] = w;
  return out;
}
function copy3(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  return out;
}
function set3(out, x, y, z, w) {
  out[0] = x;
  out[1] = y;
  out[2] = z;
  out[3] = w;
  return out;
}
function add3(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  out[3] = a[3] + b[3];
  return out;
}
function subtract3(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  out[3] = a[3] - b[3];
  return out;
}
function multiply3(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  out[2] = a[2] * b[2];
  out[3] = a[3] * b[3];
  return out;
}
function divide2(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  out[2] = a[2] / b[2];
  out[3] = a[3] / b[3];
  return out;
}
function ceil2(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  out[2] = Math.ceil(a[2]);
  out[3] = Math.ceil(a[3]);
  return out;
}
function floor2(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  out[2] = Math.floor(a[2]);
  out[3] = Math.floor(a[3]);
  return out;
}
function min2(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  out[2] = Math.min(a[2], b[2]);
  out[3] = Math.min(a[3], b[3]);
  return out;
}
function max2(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  out[2] = Math.max(a[2], b[2]);
  out[3] = Math.max(a[3], b[3]);
  return out;
}
function round2(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  out[2] = Math.round(a[2]);
  out[3] = Math.round(a[3]);
  return out;
}
function scale3(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  out[3] = a[3] * b;
  return out;
}
function scaleAndAdd2(out, a, b, scale4) {
  out[0] = a[0] + b[0] * scale4;
  out[1] = a[1] + b[1] * scale4;
  out[2] = a[2] + b[2] * scale4;
  out[3] = a[3] + b[3] * scale4;
  return out;
}
function distance2(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  var w = b[3] - a[3];
  return Math.hypot(x, y, z, w);
}
function squaredDistance2(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  var w = b[3] - a[3];
  return x * x + y * y + z * z + w * w;
}
function length2(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var w = a[3];
  return Math.hypot(x, y, z, w);
}
function squaredLength2(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var w = a[3];
  return x * x + y * y + z * z + w * w;
}
function negate2(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  out[2] = -a[2];
  out[3] = -a[3];
  return out;
}
function inverse2(out, a) {
  out[0] = 1 / a[0];
  out[1] = 1 / a[1];
  out[2] = 1 / a[2];
  out[3] = 1 / a[3];
  return out;
}
function normalize2(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var w = a[3];
  var len2 = x * x + y * y + z * z + w * w;
  if (len2 > 0) {
    len2 = 1 / Math.sqrt(len2);
  }
  out[0] = x * len2;
  out[1] = y * len2;
  out[2] = z * len2;
  out[3] = w * len2;
  return out;
}
function dot2(a, b) {
  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];
}
function cross2(out, u, v, w) {
  var A = v[0] * w[1] - v[1] * w[0], B = v[0] * w[2] - v[2] * w[0], C = v[0] * w[3] - v[3] * w[0], D = v[1] * w[2] - v[2] * w[1], E = v[1] * w[3] - v[3] * w[1], F = v[2] * w[3] - v[3] * w[2];
  var G = u[0];
  var H = u[1];
  var I = u[2];
  var J = u[3];
  out[0] = H * F - I * E + J * D;
  out[1] = -(G * F) + I * C - J * B;
  out[2] = G * E - H * C + J * A;
  out[3] = -(G * D) + H * B - I * A;
  return out;
}
function lerp2(out, a, b, t) {
  var ax = a[0];
  var ay = a[1];
  var az = a[2];
  var aw = a[3];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  out[2] = az + t * (b[2] - az);
  out[3] = aw + t * (b[3] - aw);
  return out;
}
function random2(out, scale4) {
  scale4 = scale4 || 1;
  var v1, v2, v3, v4;
  var s1, s2;
  do {
    v1 = RANDOM() * 2 - 1;
    v2 = RANDOM() * 2 - 1;
    s1 = v1 * v1 + v2 * v2;
  } while (s1 >= 1);
  do {
    v3 = RANDOM() * 2 - 1;
    v4 = RANDOM() * 2 - 1;
    s2 = v3 * v3 + v4 * v4;
  } while (s2 >= 1);
  var d = Math.sqrt((1 - s1) / s2);
  out[0] = scale4 * v1;
  out[1] = scale4 * v2;
  out[2] = scale4 * v3 * d;
  out[3] = scale4 * v4 * d;
  return out;
}
function transformMat42(out, a, m) {
  var x = a[0], y = a[1], z = a[2], w = a[3];
  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;
  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;
  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;
  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;
  return out;
}
function transformQuat2(out, a, q) {
  var x = a[0], y = a[1], z = a[2];
  var qx = q[0], qy = q[1], qz = q[2], qw = q[3];
  var ix = qw * x + qy * z - qz * y;
  var iy = qw * y + qz * x - qx * z;
  var iz = qw * z + qx * y - qy * x;
  var iw = -qx * x - qy * y - qz * z;
  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;
  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;
  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;
  out[3] = a[3];
  return out;
}
function zero2(out) {
  out[0] = 0;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  return out;
}
function str3(a) {
  return "vec4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")";
}
function exactEquals3(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];
}
function equals3(a, b) {
  var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
  var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= EPSILON * Math.max(1, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= EPSILON * Math.max(1, Math.abs(a3), Math.abs(b3));
}
var sub3 = subtract3;
var mul3 = multiply3;
var div2 = divide2;
var dist2 = distance2;
var sqrDist2 = squaredDistance2;
var len2 = length2;
var sqrLen2 = squaredLength2;
var forEach2 = function() {
  var vec = create4();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 4;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      vec[2] = a[i + 2];
      vec[3] = a[i + 3];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
      a[i + 2] = vec[2];
      a[i + 3] = vec[3];
    }
    return a;
  };
}();

// node_modules/gl-matrix/esm/quat.js
function create5() {
  var out = new ARRAY_TYPE(4);
  if (ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }
  out[3] = 1;
  return out;
}
function identity2(out) {
  out[0] = 0;
  out[1] = 0;
  out[2] = 0;
  out[3] = 1;
  return out;
}
function setAxisAngle(out, axis, rad) {
  rad = rad * 0.5;
  var s = Math.sin(rad);
  out[0] = s * axis[0];
  out[1] = s * axis[1];
  out[2] = s * axis[2];
  out[3] = Math.cos(rad);
  return out;
}
function getAxisAngle(out_axis, q) {
  var rad = Math.acos(q[3]) * 2;
  var s = Math.sin(rad / 2);
  if (s > EPSILON) {
    out_axis[0] = q[0] / s;
    out_axis[1] = q[1] / s;
    out_axis[2] = q[2] / s;
  } else {
    out_axis[0] = 1;
    out_axis[1] = 0;
    out_axis[2] = 0;
  }
  return rad;
}
function getAngle(a, b) {
  var dotproduct = dot3(a, b);
  return Math.acos(2 * dotproduct * dotproduct - 1);
}
function multiply4(out, a, b) {
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bx = b[0], by = b[1], bz = b[2], bw = b[3];
  out[0] = ax * bw + aw * bx + ay * bz - az * by;
  out[1] = ay * bw + aw * by + az * bx - ax * bz;
  out[2] = az * bw + aw * bz + ax * by - ay * bx;
  out[3] = aw * bw - ax * bx - ay * by - az * bz;
  return out;
}
function rotateX3(out, a, rad) {
  rad *= 0.5;
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bx = Math.sin(rad), bw = Math.cos(rad);
  out[0] = ax * bw + aw * bx;
  out[1] = ay * bw + az * bx;
  out[2] = az * bw - ay * bx;
  out[3] = aw * bw - ax * bx;
  return out;
}
function rotateY3(out, a, rad) {
  rad *= 0.5;
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var by = Math.sin(rad), bw = Math.cos(rad);
  out[0] = ax * bw - az * by;
  out[1] = ay * bw + aw * by;
  out[2] = az * bw + ax * by;
  out[3] = aw * bw - ay * by;
  return out;
}
function rotateZ3(out, a, rad) {
  rad *= 0.5;
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bz = Math.sin(rad), bw = Math.cos(rad);
  out[0] = ax * bw + ay * bz;
  out[1] = ay * bw - ax * bz;
  out[2] = az * bw + aw * bz;
  out[3] = aw * bw - az * bz;
  return out;
}
function calculateW(out, a) {
  var x = a[0], y = a[1], z = a[2];
  out[0] = x;
  out[1] = y;
  out[2] = z;
  out[3] = Math.sqrt(Math.abs(1 - x * x - y * y - z * z));
  return out;
}
function exp(out, a) {
  var x = a[0], y = a[1], z = a[2], w = a[3];
  var r = Math.sqrt(x * x + y * y + z * z);
  var et = Math.exp(w);
  var s = r > 0 ? et * Math.sin(r) / r : 0;
  out[0] = x * s;
  out[1] = y * s;
  out[2] = z * s;
  out[3] = et * Math.cos(r);
  return out;
}
function ln(out, a) {
  var x = a[0], y = a[1], z = a[2], w = a[3];
  var r = Math.sqrt(x * x + y * y + z * z);
  var t = r > 0 ? Math.atan2(r, w) / r : 0;
  out[0] = x * t;
  out[1] = y * t;
  out[2] = z * t;
  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);
  return out;
}
function pow(out, a, b) {
  ln(out, a);
  scale4(out, out, b);
  exp(out, out);
  return out;
}
function slerp(out, a, b, t) {
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bx = b[0], by = b[1], bz = b[2], bw = b[3];
  var omega, cosom, sinom, scale0, scale1;
  cosom = ax * bx + ay * by + az * bz + aw * bw;
  if (cosom < 0) {
    cosom = -cosom;
    bx = -bx;
    by = -by;
    bz = -bz;
    bw = -bw;
  }
  if (1 - cosom > EPSILON) {
    omega = Math.acos(cosom);
    sinom = Math.sin(omega);
    scale0 = Math.sin((1 - t) * omega) / sinom;
    scale1 = Math.sin(t * omega) / sinom;
  } else {
    scale0 = 1 - t;
    scale1 = t;
  }
  out[0] = scale0 * ax + scale1 * bx;
  out[1] = scale0 * ay + scale1 * by;
  out[2] = scale0 * az + scale1 * bz;
  out[3] = scale0 * aw + scale1 * bw;
  return out;
}
function random3(out) {
  var u1 = RANDOM();
  var u2 = RANDOM();
  var u3 = RANDOM();
  var sqrt1MinusU1 = Math.sqrt(1 - u1);
  var sqrtU1 = Math.sqrt(u1);
  out[0] = sqrt1MinusU1 * Math.sin(2 * Math.PI * u2);
  out[1] = sqrt1MinusU1 * Math.cos(2 * Math.PI * u2);
  out[2] = sqrtU1 * Math.sin(2 * Math.PI * u3);
  out[3] = sqrtU1 * Math.cos(2 * Math.PI * u3);
  return out;
}
function invert2(out, a) {
  var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];
  var dot3 = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;
  var invDot = dot3 ? 1 / dot3 : 0;
  out[0] = -a0 * invDot;
  out[1] = -a1 * invDot;
  out[2] = -a2 * invDot;
  out[3] = a3 * invDot;
  return out;
}
function conjugate(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  out[2] = -a[2];
  out[3] = a[3];
  return out;
}
function fromMat3(out, m) {
  var fTrace = m[0] + m[4] + m[8];
  var fRoot;
  if (fTrace > 0) {
    fRoot = Math.sqrt(fTrace + 1);
    out[3] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out[0] = (m[5] - m[7]) * fRoot;
    out[1] = (m[6] - m[2]) * fRoot;
    out[2] = (m[1] - m[3]) * fRoot;
  } else {
    var i = 0;
    if (m[4] > m[0])
      i = 1;
    if (m[8] > m[i * 3 + i])
      i = 2;
    var j = (i + 1) % 3;
    var k = (i + 2) % 3;
    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1);
    out[i] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;
    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;
    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;
  }
  return out;
}
function fromEuler(out, x, y, z) {
  var halfToRad = 0.5 * Math.PI / 180;
  x *= halfToRad;
  y *= halfToRad;
  z *= halfToRad;
  var sx = Math.sin(x);
  var cx = Math.cos(x);
  var sy = Math.sin(y);
  var cy = Math.cos(y);
  var sz = Math.sin(z);
  var cz = Math.cos(z);
  out[0] = sx * cy * cz - cx * sy * sz;
  out[1] = cx * sy * cz + sx * cy * sz;
  out[2] = cx * cy * sz - sx * sy * cz;
  out[3] = cx * cy * cz + sx * sy * sz;
  return out;
}
function str4(a) {
  return "quat(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ")";
}
var clone4 = clone3;
var fromValues4 = fromValues3;
var copy4 = copy3;
var set4 = set3;
var add4 = add3;
var mul4 = multiply4;
var scale4 = scale3;
var dot3 = dot2;
var lerp3 = lerp2;
var length3 = length2;
var len3 = length3;
var squaredLength3 = squaredLength2;
var sqrLen3 = squaredLength3;
var normalize3 = normalize2;
var exactEquals4 = exactEquals3;
var equals4 = equals3;
var rotationTo = function() {
  var tmpvec3 = create3();
  var xUnitVec3 = fromValues2(1, 0, 0);
  var yUnitVec3 = fromValues2(0, 1, 0);
  return function(out, a, b) {
    var dot4 = dot(a, b);
    if (dot4 < -0.999999) {
      cross(tmpvec3, xUnitVec3, a);
      if (len(tmpvec3) < 0.000001)
        cross(tmpvec3, yUnitVec3, a);
      normalize(tmpvec3, tmpvec3);
      setAxisAngle(out, tmpvec3, Math.PI);
      return out;
    } else if (dot4 > 0.999999) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
      out[3] = 1;
      return out;
    } else {
      cross(tmpvec3, a, b);
      out[0] = tmpvec3[0];
      out[1] = tmpvec3[1];
      out[2] = tmpvec3[2];
      out[3] = 1 + dot4;
      return normalize3(out, out);
    }
  };
}();
var sqlerp = function() {
  var temp1 = create5();
  var temp2 = create5();
  return function(out, a, b, c, d, t) {
    slerp(temp1, a, d, t);
    slerp(temp2, b, c, t);
    slerp(out, temp1, temp2, 2 * t * (1 - t));
    return out;
  };
}();
var setAxes = function() {
  var matr = create();
  return function(out, view, right, up) {
    matr[0] = right[0];
    matr[3] = right[1];
    matr[6] = right[2];
    matr[1] = up[0];
    matr[4] = up[1];
    matr[7] = up[2];
    matr[2] = -view[0];
    matr[5] = -view[1];
    matr[8] = -view[2];
    return normalize3(out, fromMat3(out, matr));
  };
}();

// node_modules/gl-matrix/esm/vec2.js
var exports_vec2 = {};
__export(exports_vec2, {
  zero: () => {
    {
      return zero3;
    }
  },
  transformMat4: () => {
    {
      return transformMat43;
    }
  },
  transformMat3: () => {
    {
      return transformMat32;
    }
  },
  transformMat2d: () => {
    {
      return transformMat2d;
    }
  },
  transformMat2: () => {
    {
      return transformMat2;
    }
  },
  subtract: () => {
    {
      return subtract4;
    }
  },
  sub: () => {
    {
      return sub4;
    }
  },
  str: () => {
    {
      return str5;
    }
  },
  squaredLength: () => {
    {
      return squaredLength4;
    }
  },
  squaredDistance: () => {
    {
      return squaredDistance3;
    }
  },
  sqrLen: () => {
    {
      return sqrLen4;
    }
  },
  sqrDist: () => {
    {
      return sqrDist3;
    }
  },
  set: () => {
    {
      return set5;
    }
  },
  scaleAndAdd: () => {
    {
      return scaleAndAdd3;
    }
  },
  scale: () => {
    {
      return scale5;
    }
  },
  round: () => {
    {
      return round3;
    }
  },
  rotate: () => {
    {
      return rotate2;
    }
  },
  random: () => {
    {
      return random4;
    }
  },
  normalize: () => {
    {
      return normalize4;
    }
  },
  negate: () => {
    {
      return negate3;
    }
  },
  multiply: () => {
    {
      return multiply5;
    }
  },
  mul: () => {
    {
      return mul5;
    }
  },
  min: () => {
    {
      return min3;
    }
  },
  max: () => {
    {
      return max3;
    }
  },
  lerp: () => {
    {
      return lerp4;
    }
  },
  length: () => {
    {
      return length4;
    }
  },
  len: () => {
    {
      return len4;
    }
  },
  inverse: () => {
    {
      return inverse3;
    }
  },
  fromValues: () => {
    {
      return fromValues5;
    }
  },
  forEach: () => {
    {
      return forEach3;
    }
  },
  floor: () => {
    {
      return floor3;
    }
  },
  exactEquals: () => {
    {
      return exactEquals5;
    }
  },
  equals: () => {
    {
      return equals5;
    }
  },
  dot: () => {
    {
      return dot4;
    }
  },
  divide: () => {
    {
      return divide3;
    }
  },
  div: () => {
    {
      return div3;
    }
  },
  distance: () => {
    {
      return distance3;
    }
  },
  dist: () => {
    {
      return dist3;
    }
  },
  cross: () => {
    {
      return cross3;
    }
  },
  create: () => {
    {
      return create6;
    }
  },
  copy: () => {
    {
      return copy5;
    }
  },
  clone: () => {
    {
      return clone5;
    }
  },
  ceil: () => {
    {
      return ceil3;
    }
  },
  angle: () => {
    {
      return angle2;
    }
  },
  add: () => {
    {
      return add5;
    }
  }
});
function create6() {
  var out = new ARRAY_TYPE(2);
  if (ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
  }
  return out;
}
function clone5(a) {
  var out = new ARRAY_TYPE(2);
  out[0] = a[0];
  out[1] = a[1];
  return out;
}
function fromValues5(x, y) {
  var out = new ARRAY_TYPE(2);
  out[0] = x;
  out[1] = y;
  return out;
}
function copy5(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  return out;
}
function set5(out, x, y) {
  out[0] = x;
  out[1] = y;
  return out;
}
function add5(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  return out;
}
function subtract4(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  return out;
}
function multiply5(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  return out;
}
function divide3(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  return out;
}
function ceil3(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  return out;
}
function floor3(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  return out;
}
function min3(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  return out;
}
function max3(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  return out;
}
function round3(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  return out;
}
function scale5(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  return out;
}
function scaleAndAdd3(out, a, b, scale6) {
  out[0] = a[0] + b[0] * scale6;
  out[1] = a[1] + b[1] * scale6;
  return out;
}
function distance3(a, b) {
  var x = b[0] - a[0], y = b[1] - a[1];
  return Math.hypot(x, y);
}
function squaredDistance3(a, b) {
  var x = b[0] - a[0], y = b[1] - a[1];
  return x * x + y * y;
}
function length4(a) {
  var x = a[0], y = a[1];
  return Math.hypot(x, y);
}
function squaredLength4(a) {
  var x = a[0], y = a[1];
  return x * x + y * y;
}
function negate3(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  return out;
}
function inverse3(out, a) {
  out[0] = 1 / a[0];
  out[1] = 1 / a[1];
  return out;
}
function normalize4(out, a) {
  var x = a[0], y = a[1];
  var len4 = x * x + y * y;
  if (len4 > 0) {
    len4 = 1 / Math.sqrt(len4);
  }
  out[0] = a[0] * len4;
  out[1] = a[1] * len4;
  return out;
}
function dot4(a, b) {
  return a[0] * b[0] + a[1] * b[1];
}
function cross3(out, a, b) {
  var z = a[0] * b[1] - a[1] * b[0];
  out[0] = out[1] = 0;
  out[2] = z;
  return out;
}
function lerp4(out, a, b, t) {
  var ax = a[0], ay = a[1];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  return out;
}
function random4(out, scale6) {
  scale6 = scale6 || 1;
  var r = RANDOM() * 2 * Math.PI;
  out[0] = Math.cos(r) * scale6;
  out[1] = Math.sin(r) * scale6;
  return out;
}
function transformMat2(out, a, m) {
  var x = a[0], y = a[1];
  out[0] = m[0] * x + m[2] * y;
  out[1] = m[1] * x + m[3] * y;
  return out;
}
function transformMat2d(out, a, m) {
  var x = a[0], y = a[1];
  out[0] = m[0] * x + m[2] * y + m[4];
  out[1] = m[1] * x + m[3] * y + m[5];
  return out;
}
function transformMat32(out, a, m) {
  var x = a[0], y = a[1];
  out[0] = m[0] * x + m[3] * y + m[6];
  out[1] = m[1] * x + m[4] * y + m[7];
  return out;
}
function transformMat43(out, a, m) {
  var x = a[0];
  var y = a[1];
  out[0] = m[0] * x + m[4] * y + m[12];
  out[1] = m[1] * x + m[5] * y + m[13];
  return out;
}
function rotate2(out, a, b, rad) {
  var p0 = a[0] - b[0], p1 = a[1] - b[1], sinC = Math.sin(rad), cosC = Math.cos(rad);
  out[0] = p0 * cosC - p1 * sinC + b[0];
  out[1] = p0 * sinC + p1 * cosC + b[1];
  return out;
}
function angle2(a, b) {
  var x1 = a[0], y1 = a[1], x2 = b[0], y2 = b[1], mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2), cosine = mag && (x1 * x2 + y1 * y2) / mag;
  return Math.acos(Math.min(Math.max(cosine, -1), 1));
}
function zero3(out) {
  out[0] = 0;
  out[1] = 0;
  return out;
}
function str5(a) {
  return "vec2(" + a[0] + ", " + a[1] + ")";
}
function exactEquals5(a, b) {
  return a[0] === b[0] && a[1] === b[1];
}
function equals5(a, b) {
  var a0 = a[0], a1 = a[1];
  var b0 = b[0], b1 = b[1];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1));
}
var len4 = length4;
var sub4 = subtract4;
var mul5 = multiply5;
var div3 = divide3;
var dist3 = distance3;
var sqrDist3 = squaredDistance3;
var sqrLen4 = squaredLength4;
var forEach3 = function() {
  var vec = create6();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 2;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
    }
    return a;
  };
}();

// src/local-framework/system/math/angles.ts
var rad2Deg = (rad) => rad / Math.PI * 180;
var deg2Rad = (deg) => deg * Math.PI / 180;
var getEuler = (vector3) => {
  const theta = Math.atan2(vector3[1], vector3[0]);
  const magnitude = exports_vec2.length([vector3[0], vector3[1]]);
  const phi = Math.atan2(vector3[2], magnitude);
  return [theta, phi];
};

// src/local-framework/system/controllers/FreeFlyController.ts
var AllAxises = {
  X: 0,
  Y: 1,
  Z: 2
};

class FreeFlyController {
  _isActivated = false;
  _theta = 0;
  _phi = 0;
  _mouseSensibility;
  _keyboardSensibility;
  _touchSensibility;
  _movingSpeed;
  _touchWasActive = false;
  _touchStartTime = 0;
  _touchMoveForward = false;
  _axisIndices;
  _position = exports_vec3.fromValues(0, 0, 0);
  _target = exports_vec3.fromValues(0, 0, 0);
  _forwardAxis = exports_vec3.fromValues(1, 0, 0);
  _leftAxis = exports_vec3.fromValues(0, 0, 1);
  _upAxis = exports_vec3.fromValues(0, 1, 0);
  _move_forwardAxis = exports_vec3.fromValues(1, 0, 0);
  _move_leftAxis = exports_vec3.fromValues(0, 0, 1);
  _move_upAxis = exports_vec3.fromValues(0, 1, 0);
  constructor(def) {
    this._mouseSensibility = def.mouseSensibility;
    this._keyboardSensibility = def.keyboardSensibility;
    this._touchSensibility = def.touchSensibility;
    this._movingSpeed = def.movingSpeed;
    exports_vec3.copy(this._position, def.position);
    this._axisIndices = [
      def.coordinates ? AllAxises[def.coordinates[0]] : AllAxises.X,
      def.coordinates ? AllAxises[def.coordinates[1]] : AllAxises.Y,
      def.coordinates ? AllAxises[def.coordinates[2]] : AllAxises.Z
    ];
    this._theta = def.theta;
    this._phi = def.phi;
  }
  isActivated() {
    return this._isActivated;
  }
  activate() {
    this._isActivated = true;
    GlobalKeyboardManager.preventDefault("Z");
    GlobalKeyboardManager.preventDefault("W");
    GlobalKeyboardManager.preventDefault("S");
    GlobalKeyboardManager.preventDefault("A");
    GlobalKeyboardManager.preventDefault("Q");
    GlobalKeyboardManager.preventDefault("D");
    GlobalKeyboardManager.preventDefault("Shift");
    GlobalKeyboardManager.preventDefault("C");
    GlobalKeyboardManager.preventDefault("Space");
    GlobalKeyboardManager.preventDefault("ArrowUp");
    GlobalKeyboardManager.preventDefault("ArrowDown");
    GlobalKeyboardManager.preventDefault("ArrowLeft");
    GlobalKeyboardManager.preventDefault("ArrowRight");
  }
  deactivate() {
    this._isActivated = false;
    GlobalKeyboardManager.enableDefault("Z");
    GlobalKeyboardManager.enableDefault("W");
    GlobalKeyboardManager.enableDefault("S");
    GlobalKeyboardManager.enableDefault("A");
    GlobalKeyboardManager.enableDefault("Q");
    GlobalKeyboardManager.enableDefault("D");
    GlobalKeyboardManager.enableDefault("Shift");
    GlobalKeyboardManager.enableDefault("C");
    GlobalKeyboardManager.enableDefault("Space");
    GlobalKeyboardManager.enableDefault("ArrowUp");
    GlobalKeyboardManager.enableDefault("ArrowDown");
    GlobalKeyboardManager.enableDefault("ArrowLeft");
    GlobalKeyboardManager.enableDefault("ArrowRight");
  }
  isInteractedWith() {
    return GlobalKeyboardManager.isPressed("Z", "W", "S", "A", "Q", "D") || GlobalKeyboardManager.isPressed("Shift", "C", "Space") || GlobalKeyboardManager.isPressed("ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight");
  }
  update(deltaMsTime, fpsControls = false) {
    let moveForward = false;
    let moveBackward = false;
    let strafeLeft = false;
    let strafeRight = false;
    let isRunning = false;
    let isDiving = false;
    let isRising = false;
    let lookDeltaX = 0;
    let lookDeltaY = 0;
    {
      const deltaX = GlobalMouseManager.deltaX() * this._mouseSensibility;
      const deltaY = GlobalMouseManager.deltaY() * this._mouseSensibility;
      lookDeltaX -= deg2Rad(deltaX) * deltaMsTime;
      lookDeltaY -= deg2Rad(deltaY) * deltaMsTime;
    }
    const isTouched = GlobalTouchManager.getTouchData().length > 0;
    if (isTouched) {
      if (!this._touchWasActive) {
        const currTime = Date.now();
        const elapsed = (currTime - this._touchStartTime) / 1000;
        if (elapsed < 0.25) {
          this._touchMoveForward = true;
        } else {
          this._touchStartTime = currTime;
        }
      }
      const firstTouch = GlobalTouchManager.getTouchData()[0];
      const deltaX = firstTouch.deltaX * this._touchSensibility;
      const deltaY = firstTouch.deltaY * this._touchSensibility;
      lookDeltaX -= deg2Rad(deltaX) * deltaMsTime;
      lookDeltaY -= deg2Rad(deltaY) * deltaMsTime;
    } else {
      this._touchMoveForward = false;
    }
    this._touchWasActive = isTouched;
    if (this._touchMoveForward) {
      moveForward = true;
    }
    if (GlobalKeyboardManager.isPressed("Z", "W")) {
      moveForward = true;
    }
    if (GlobalKeyboardManager.isPressed("S")) {
      moveBackward = true;
    }
    if (GlobalKeyboardManager.isPressed("A", "Q")) {
      strafeLeft = true;
    }
    if (GlobalKeyboardManager.isPressed("D")) {
      strafeRight = true;
    }
    if (GlobalKeyboardManager.isPressed("Shift")) {
      isRunning = true;
    }
    if (!fpsControls) {
      if (GlobalKeyboardManager.isPressed("C")) {
        isDiving = true;
      }
      if (GlobalKeyboardManager.isPressed("Space")) {
        isRising = true;
      }
    }
    const currentLinearSpeed = this._movingSpeed * (isRunning ? 4 : 1) * deltaMsTime;
    const currentAngularSpeed = this._keyboardSensibility * deltaMsTime;
    if (GlobalKeyboardManager.isPressed("ArrowUp")) {
      lookDeltaY += currentAngularSpeed;
    } else if (GlobalKeyboardManager.isPressed("ArrowDown")) {
      lookDeltaY -= currentAngularSpeed;
    }
    if (GlobalKeyboardManager.isPressed("ArrowLeft")) {
      lookDeltaX += currentAngularSpeed;
    } else if (GlobalKeyboardManager.isPressed("ArrowRight")) {
      lookDeltaX -= currentAngularSpeed;
    }
    this._theta += lookDeltaX;
    this._phi += lookDeltaY;
    const hPi = Math.PI * 0.5;
    const verticalLimit = hPi * 0.95;
    this._phi = Math.min(Math.max(this._phi, -verticalLimit), +verticalLimit);
    const cosTheta = Math.cos(this._theta);
    const sinTheta = Math.sin(this._theta);
    const [axisX, axisY, axisZ] = this._axisIndices;
    const upRadius = Math.cos(this._phi + hPi);
    this._upAxis[axisX] = upRadius * cosTheta;
    this._upAxis[axisY] = upRadius * sinTheta;
    this._upAxis[axisZ] = Math.sin(this._phi + hPi);
    const forwardRadius = Math.cos(this._phi);
    this._forwardAxis[axisX] = forwardRadius * cosTheta;
    this._forwardAxis[axisY] = forwardRadius * sinTheta;
    this._forwardAxis[axisZ] = Math.sin(this._phi);
    exports_vec3.cross(this._leftAxis, this._upAxis, this._forwardAxis);
    if (fpsControls) {
      this._move_forwardAxis[axisX] = cosTheta;
      this._move_forwardAxis[axisY] = sinTheta;
      this._move_forwardAxis[axisZ] = 0;
      this._move_leftAxis[axisX] = -sinTheta;
      this._move_leftAxis[axisY] = cosTheta;
      this._move_leftAxis[axisZ] = 0;
      this._move_upAxis[axisX] = 0;
      this._move_upAxis[axisY] = 0;
      this._move_upAxis[axisZ] = 1;
    } else {
      exports_vec3.copy(this._move_forwardAxis, this._forwardAxis);
      exports_vec3.copy(this._move_leftAxis, this._leftAxis);
      exports_vec3.copy(this._move_upAxis, this._upAxis);
    }
    const scaledForward = exports_vec3.fromValues(0, 0, 0);
    exports_vec3.scale(scaledForward, this._move_forwardAxis, currentLinearSpeed);
    const scaledLeft = exports_vec3.fromValues(0, 0, 0);
    exports_vec3.scale(scaledLeft, this._move_leftAxis, currentLinearSpeed);
    const scaledUp = exports_vec3.fromValues(0, 0, 0);
    exports_vec3.scale(scaledUp, this._move_upAxis, currentLinearSpeed);
    if (moveForward) {
      exports_vec3.add(this._position, this._position, scaledForward);
    } else if (moveBackward) {
      exports_vec3.sub(this._position, this._position, scaledForward);
    }
    if (strafeLeft) {
      exports_vec3.add(this._position, this._position, scaledLeft);
    } else if (strafeRight) {
      exports_vec3.sub(this._position, this._position, scaledLeft);
    }
    if (isRising) {
      exports_vec3.add(this._position, this._position, scaledUp);
    } else if (isDiving) {
      exports_vec3.sub(this._position, this._position, scaledUp);
    }
    exports_vec3.add(this._target, this._position, this._forwardAxis);
  }
  getPosition() {
    return this._position;
  }
  setPosition(inPos) {
    exports_vec3.copy(this._position, inPos);
    exports_vec3.add(this._target, this._position, this._forwardAxis);
  }
  getTarget() {
    return this._target;
  }
  getUpAxis() {
    return this._upAxis;
  }
  getTheta() {
    return this._theta;
  }
  getPhi() {
    return this._phi;
  }
  getTouchMoveForward() {
    return this._touchMoveForward;
  }
}
// src/local-framework/system/math/index.ts
var exports_math = {};
__export(exports_math, {
  rayCaster: () => {
    {
      return exports_rayCaster;
    }
  },
  rad2Deg: () => {
    {
      return rad2Deg;
    }
  },
  polarCoords: () => {
    {
      return exports_polarCoords;
    }
  },
  lerp: () => {
    {
      return lerp5;
    }
  },
  getEuler: () => {
    {
      return getEuler;
    }
  },
  easing: () => {
    {
      return exports_easing;
    }
  },
  deg2Rad: () => {
    {
      return deg2Rad;
    }
  },
  collisions: () => {
    {
      return exports_collisions;
    }
  },
  clamp: () => {
    {
      return clamp;
    }
  }
});

// src/local-framework/system/math/clamp.ts
var clamp = (currVal, minVal, maxVal) => Math.min(Math.max(currVal, minVal), maxVal);
// src/local-framework/system/math/collisions.ts
var exports_collisions = {};
__export(exports_collisions, {
  intersectSegment: () => {
    {
      return intersectSegment;
    }
  },
  collisionLinesStrip: () => {
    {
      return collisionLinesStrip;
    }
  }
});
var intersectSegment = (A, B, I, P) => {
  const D = exports_vec2.fromValues(0, 0);
  const E = exports_vec2.fromValues(0, 0);
  D[0] = B[0] - A[0];
  D[1] = B[1] - A[1];
  E[0] = P[0] - I[0];
  E[1] = P[1] - I[1];
  const denom = D[0] * E[1] - D[1] * E[0];
  if (denom == 0) {
    return -1;
  }
  const t = -(A[0] * E[1] - I[0] * E[1] - E[0] * A[1] + E[0] * I[1]) / denom;
  if (t < 0 || t >= 1) {
    return 0;
  }
  const u = -(-D[0] * A[1] + D[0] * I[1] + D[1] * A[0] - D[1] * I[0]) / denom;
  if (u < 0 || u >= 1) {
    return 0;
  }
  return 1;
};
var collisionLinesStrip = (tab, P) => {
  const I = exports_vec2.fromValues(0, 0);
  I[0] = 1e4 + Math.random() * 100;
  I[1] = 1e4 + Math.random() * 100;
  let nbIntersections = 0;
  for (let ii = 0;ii < tab.length; ++ii) {
    let jj = (ii + 1) % tab.length;
    const result = intersectSegment(tab[ii], tab[jj], I, P);
    if (result == -1) {
      return collisionLinesStrip(tab, P);
    }
    nbIntersections += result;
  }
  if (nbIntersections % 2 == 1) {
    return true;
  }
  return false;
};
// src/local-framework/system/math/easing.ts
var exports_easing = {};
__export(exports_easing, {
  easePinPong: () => {
    {
      return easePinPong;
    }
  },
  easeOutSine: () => {
    {
      return easeOutSine;
    }
  },
  easeOutQuint: () => {
    {
      return easeOutQuint;
    }
  },
  easeOutQuart: () => {
    {
      return easeOutQuart;
    }
  },
  easeOutQuad: () => {
    {
      return easeOutQuad;
    }
  },
  easeOutExpo: () => {
    {
      return easeOutExpo;
    }
  },
  easeOutElastic: () => {
    {
      return easeOutElastic;
    }
  },
  easeOutCubic: () => {
    {
      return easeOutCubic;
    }
  },
  easeOutCirc: () => {
    {
      return easeOutCirc;
    }
  },
  easeOutBounce: () => {
    {
      return easeOutBounce;
    }
  },
  easeOutBack: () => {
    {
      return easeOutBack;
    }
  },
  easeInSine: () => {
    {
      return easeInSine;
    }
  },
  easeInQuint: () => {
    {
      return easeInQuint;
    }
  },
  easeInQuart: () => {
    {
      return easeInQuart;
    }
  },
  easeInQuad: () => {
    {
      return easeInQuad;
    }
  },
  easeInOutSine: () => {
    {
      return easeInOutSine;
    }
  },
  easeInOutQuint: () => {
    {
      return easeInOutQuint;
    }
  },
  easeInOutQuart: () => {
    {
      return easeInOutQuart;
    }
  },
  easeInOutQuad: () => {
    {
      return easeInOutQuad;
    }
  },
  easeInOutExpo: () => {
    {
      return easeInOutExpo;
    }
  },
  easeInOutElastic: () => {
    {
      return easeInOutElastic;
    }
  },
  easeInOutCubic: () => {
    {
      return easeInOutCubic;
    }
  },
  easeInOutCirc: () => {
    {
      return easeInOutCirc;
    }
  },
  easeInOutBounce: () => {
    {
      return easeInOutBounce;
    }
  },
  easeInOutBack: () => {
    {
      return easeInOutBack;
    }
  },
  easeInExpo: () => {
    {
      return easeInExpo;
    }
  },
  easeInElastic: () => {
    {
      return easeInElastic;
    }
  },
  easeInCubic: () => {
    {
      return easeInCubic;
    }
  },
  easeInCirc: () => {
    {
      return easeInCirc;
    }
  },
  easeInBounce: () => {
    {
      return easeInBounce;
    }
  },
  easeInBack: () => {
    {
      return easeInBack;
    }
  },
  easeClamp: () => {
    {
      return easeClamp;
    }
  }
});
var easeClamp = (t) => {
  if (t > 1) {
    return t - Math.floor(t);
  }
  return t;
};
var easePinPong = (t) => {
  t *= 2;
  if (t < 1)
    return t;
  t -= 1;
  return 1 - t;
};
var easeInSine = (t) => {
  return Math.sin(1.5707963 * t);
};
var easeOutSine = (t) => {
  return 1 + Math.sin(1.5707963 * (t - 1));
};
var easeInOutSine = (t) => {
  return 0.5 * (1 + Math.sin(3.1415926 * (t - 0.5)));
};
var easeInQuad = (t) => {
  return t * t;
};
var easeOutQuad = (t) => {
  return t * (2 - t);
};
var easeInOutQuad = (t) => {
  return t < 0.5 ? 2 * t * t : t * (4 - 2 * t) - 1;
};
var easeInCubic = (t) => {
  return t * t * t;
};
var easeOutCubic = (t) => {
  const t2 = t - 1;
  return 1 + t2 * t2 * t2;
};
var easeInOutCubic = (t) => {
  const t2 = t - 1;
  const t3 = t2 - 1;
  return t < 0.5 ? 4 * t * t * t : 1 + t2 * (2 * t3) * (2 * t3);
};
var easeInQuart = (t) => {
  t *= t;
  return t * t;
};
var easeOutQuart = (t) => {
  const t2 = t - 1;
  t = t2 * t2;
  return 1 - t * t;
};
var easeInOutQuart = (t) => {
  if (t < 0.5) {
    t *= t;
    return 8 * t * t;
  }
  const t2 = t - 1;
  t = t2 * t2;
  return 1 - 8 * t * t;
};
var easeInQuint = (t) => {
  const t2 = t * t;
  return t * t2 * t2;
};
var easeOutQuint = (t) => {
  const tx = t - 1;
  const t2 = tx * tx;
  return 1 + tx * t2 * t2;
};
var easeInOutQuint = (t) => {
  let t2;
  if (t < 0.5) {
    t2 = t * t;
    return 16 * t * t2 * t2;
  }
  const tx = t - 1;
  t2 = tx * tx;
  return 1 + 16 * tx * t2 * t2;
};
var easeInExpo = (t) => {
  return (Math.pow(2, 8 * t) - 1) / 255;
};
var easeOutExpo = (t) => {
  return 1 - Math.pow(2, -8 * t);
};
var easeInOutExpo = (t) => {
  if (t < 0.5)
    return (Math.pow(2, 16 * t) - 1) / 510;
  return 1 - 0.5 * Math.pow(2, -16 * (t - 0.5));
};
var easeInCirc = (t) => {
  return 1 - Math.sqrt(1 - t);
};
var easeOutCirc = (t) => {
  return Math.sqrt(t);
};
var easeInOutCirc = (t) => {
  if (t < 0.5)
    return (1 - Math.sqrt(1 - 2 * t)) * 0.5;
  return (1 + Math.sqrt(2 * t - 1)) * 0.5;
};
var easeInBack = (t) => {
  return t * t * (2.70158 * t - 1.70158);
};
var easeOutBack = (t) => {
  const tx = t - 1;
  return 1 + tx * tx * (2.70158 * tx + 1.70158);
};
var easeInOutBack = (t) => {
  if (t < 0.5)
    return t * t * (7 * t - 2.5) * 2;
  const tx = t - 1;
  return 1 + tx * tx * 2 * (7 * tx + 2.5);
};
var easeInElastic = (t) => {
  const t2 = t * t;
  return t2 * t2 * Math.sin(t * Math.PI * 4.5);
};
var easeOutElastic = (t) => {
  const t2 = (t - 1) * (t - 1);
  return 1 - t2 * t2 * Math.cos(t * Math.PI * 4.5);
};
var easeInOutElastic = (t) => {
  let t2;
  if (t < 0.45) {
    t2 = t * t;
    return 8 * t2 * t2 * Math.sin(t * Math.PI * 9);
  }
  if (t < 0.55)
    return 0.5 + 0.75 * Math.sin(t * Math.PI * 4);
  t2 = (t - 1) * (t - 1);
  return 1 - 8 * t2 * t2 * Math.sin(t * Math.PI * 9);
};
var easeInBounce = (t) => {
  return Math.pow(2, 6 * (t - 1)) * Math.abs(Math.sin(t * Math.PI * 3.5));
};
var easeOutBounce = (t) => {
  return 1 - Math.pow(2, -6 * t) * Math.abs(Math.cos(t * Math.PI * 3.5));
};
var easeInOutBounce = (t) => {
  if (t < 0.5)
    return 8 * Math.pow(2, 8 * (t - 1)) * Math.abs(Math.sin(t * Math.PI * 7));
  return 1 - 8 * Math.pow(2, -8 * t) * Math.abs(Math.sin(t * Math.PI * 7));
};
// src/local-framework/system/math/lerp.ts
var lerp5 = (ratio, minVal, maxVal) => minVal + (maxVal - minVal) * ratio;
// src/local-framework/system/math/polarCoords.ts
var exports_polarCoords = {};
__export(exports_polarCoords, {
  polar2Cartesian: () => {
    {
      return polar2Cartesian;
    }
  },
  cartesian2Polar: () => {
    {
      return cartesian2Polar;
    }
  }
});
var polar2Cartesian = (lat, lng, relAltitude = 0, globRadius = 100) => {
  const phi = (90 - lat) * Math.PI / 180;
  const theta = (90 - lng) * Math.PI / 180;
  const r = globRadius * (1 + relAltitude);
  return [
    r * Math.sin(phi) * Math.cos(theta),
    r * Math.cos(phi),
    r * Math.sin(phi) * Math.sin(theta)
  ];
};
var cartesian2Polar = (x, y, z, globRadius = 100) => {
  const r = Math.sqrt(x * x + y * y + z * z);
  const phi = Math.acos(y / r);
  const theta = Math.atan2(z, x);
  return {
    lat: 90 - phi * 180 / Math.PI,
    lng: 90 - theta * 180 / Math.PI - (theta < -Math.PI / 2 ? 360 : 0),
    altitude: r / globRadius - 1
  };
};
// src/local-framework/system/math/rayCaster.ts
var exports_rayCaster = {};
__export(exports_rayCaster, {
  intersectRaySphere: () => {
    {
      return intersectRaySphere;
    }
  }
});
var intersectRaySphere = (pos, dir, center, radius) => {
  const m = exports_vec3.sub(exports_vec3.create(), pos, center);
  const b = exports_vec3.dot(m, dir);
  const c = exports_vec3.dot(m, m) - radius * radius;
  if (c > 0 && b > 0) {
    return null;
  }
  const discr = b * b - c;
  if (discr < 0) {
    return null;
  }
  let t = -b - Math.sqrt(discr);
  if (t < 0) {
    t = 0;
  }
  return exports_vec3.fromValues(pos[0] + t * dir[0], pos[1] + t * dir[1], pos[2] + t * dir[2]);
};
// src/local-framework/system/metrics/index.ts
var exports_metrics = {};
__export(exports_metrics, {
  FrameProfiler: () => {
    {
      return FrameProfiler;
    }
  }
});

// src/local-framework/system/metrics/FrameProfiler.ts
class FrameProfiler {
  _framesDelta = [];
  _averageDelta = 0;
  _minDelta = 0;
  _maxDelta = 0;
  pushDelta(inDelta) {
    if (this._framesDelta.length >= 100) {
      this._framesDelta.shift();
    }
    this._framesDelta.push(inDelta);
    this._minDelta = 999999999;
    this._maxDelta = -999999999;
    this._averageDelta = 0;
    for (const currDelta of this._framesDelta) {
      this._minDelta = Math.min(this._minDelta, currDelta);
      this._maxDelta = Math.max(this._maxDelta, currDelta);
      this._averageDelta += currDelta;
    }
    this._averageDelta /= this._framesDelta.length;
  }
  get framesDelta() {
    return this._framesDelta;
  }
  get averageDelta() {
    return this._averageDelta;
  }
  get minDelta() {
    return this._minDelta;
  }
  get maxDelta() {
    return this._maxDelta;
  }
}
// src/local-framework/system/utilities/index.ts
var exports_utilities = {};
__export(exports_utilities, {
  FetchHelpers: () => {
    {
      return exports_FetchHelpers;
    }
  },
  AsyncHelpers: () => {
    {
      return exports_AsyncHelpers;
    }
  }
});

// src/local-framework/system/utilities/FetchHelpers.ts
var exports_FetchHelpers = {};
__export(exports_FetchHelpers, {
  progressFetch: () => {
    {
      return progressFetch;
    }
  }
});
var progressFetch = async (url, onProgress) => {
  const response = await fetch(url);
  const reader = response.body.getReader();
  let totalProgress = 0;
  const stream = new ReadableStream({
    start(controller) {
      return pump();
      function pump() {
        return reader.read().then(({ done, value }) => {
          if (done) {
            controller.close();
            return;
          }
          if (onProgress) {
            totalProgress += value.length;
            onProgress(totalProgress);
          }
          controller.enqueue(value);
          return pump();
        });
      }
    }
  });
  await stream;
  return new Response(stream);
};
// src/local-framework/system/utilities/AsyncHelpers.ts
var exports_AsyncHelpers = {};
__export(exports_AsyncHelpers, {
  sleep: () => {
    {
      return sleep;
    }
  },
  cancellableSleep: () => {
    {
      return cancellableSleep;
    }
  }
});
var sleep = async (delay) => {
  await new Promise((resolve) => setTimeout(resolve, delay));
};
var cancellableSleep = (delay) => {
  let timeoutHandle = -1;
  let resolveCallback = undefined;
  const promise = new Promise((resolve) => {
    resolveCallback = resolve;
    timeoutHandle = window.setTimeout(resolve, delay);
  });
  return {
    promise,
    cancel: () => {
      if (timeoutHandle >= 0) {
        window.clearTimeout(timeoutHandle);
      }
      if (resolveCallback) {
        resolveCallback();
      }
    }
  };
};
// src/local-framework/system/rng/index.ts
var exports_rng = {};
__export(exports_rng, {
  DeterministicRng: () => {
    {
      return DeterministicRng;
    }
  }
});

// src/local-framework/system/rng/DeterministicRng.ts
var RAND_MAX = 2147483648 | 0;

class DeterministicRng {
  _seed = 1 | 0;
  random() {
    if (this._seed == 0) {
      this._seed = 123459876 | 0;
    }
    const hi = this._seed / 127773 | 0;
    const lo = this._seed % 127773 | 0;
    let x = 16807 * lo - 2836 * hi | 0;
    if (x < 0) {
      x += 2147483647 | 0;
    }
    this._seed = x;
    return x % (RAND_MAX + 1) / -RAND_MAX;
  }
  setSeed(inSeed) {
    this._seed = inSeed | 0;
  }
}
// src/local-framework/graphics/index.ts
var exports_graphics = {};
__export(exports_graphics, {
  webgl2: () => {
    {
      return exports_webgl2;
    }
  },
  renderers: () => {
    {
      return exports_renderers;
    }
  },
  images: () => {
    {
      return exports_images;
    }
  },
  geometries: () => {
    {
      return exports_geometries;
    }
  },
  camera: () => {
    {
      return exports_camera;
    }
  }
});

// src/local-framework/graphics/camera/index.ts
var exports_camera = {};
__export(exports_camera, {
  screenToSceneCoordinatesFromInvComposed: () => {
    {
      return screenToSceneCoordinatesFromInvComposed;
    }
  },
  screenToSceneCoordinatesFromComposed: () => {
    {
      return screenToSceneCoordinatesFromComposed;
    }
  },
  screenToSceneCoordinates: () => {
    {
      return screenToSceneCoordinates;
    }
  },
  sceneToScreenCoordsFromComposed: () => {
    {
      return sceneToScreenCoordsFromComposed;
    }
  },
  sceneToScreenCoordinates: () => {
    {
      return sceneToScreenCoordinates;
    }
  },
  FrustumCulling: () => {
    {
      return FrustumCulling;
    }
  },
  Camera: () => {
    {
      return Camera;
    }
  }
});

// src/local-framework/graphics/camera/Camera.ts
var ProjectionType;
(function(ProjectionType2) {
  ProjectionType2[ProjectionType2["perspective"] = 0] = "perspective";
  ProjectionType2[ProjectionType2["orthogonal"] = 1] = "orthogonal";
})(ProjectionType || (ProjectionType = {}));

class Camera {
  _projectionType = ProjectionType.perspective;
  _perspectiveData;
  _orthogonalData;
  _viewportPos = exports_vec2.fromValues(0, 0);
  _viewportSize = exports_vec2.fromValues(0, 0);
  _projectionMatrix = exports_mat4.create();
  _viewMatrix = exports_mat4.create();
  _composedMatrix = exports_mat4.create();
  _eye = exports_vec3.fromValues(0, 0, 0);
  _target = exports_vec3.fromValues(0, 0, 0);
  _upAxis = exports_vec3.fromValues(0, 0, 0);
  setAsPerspective(inData) {
    this._projectionType = ProjectionType.perspective;
    let aspectRatio = inData.aspectRatio;
    if (aspectRatio === undefined) {
      aspectRatio = this._viewportSize[0] / this._viewportSize[1];
    }
    this._perspectiveData = {
      fovy: inData.fovy,
      aspectRatio,
      near: inData.near,
      far: inData.far
    };
  }
  setAsOrthogonal(inData) {
    this._projectionType = ProjectionType.orthogonal;
    this._orthogonalData = { ...inData };
  }
  setViewportPos(width, height) {
    this._viewportPos[0] = width;
    this._viewportPos[1] = height;
  }
  getViewportPos() {
    return this._viewportPos;
  }
  setViewportSize(width, height) {
    this._viewportSize[0] = width;
    this._viewportSize[1] = height;
    if (this._projectionType !== ProjectionType.perspective && this._perspectiveData) {
      this._perspectiveData.aspectRatio = this._viewportSize[0] / this._viewportSize[1];
    }
  }
  getViewportSize() {
    return this._viewportSize;
  }
  lookAt(inEye, inTarget, inUpAxis) {
    this.setEye(inEye);
    this.setTarget(inTarget);
    this.setUpAxis(inUpAxis);
  }
  setEye(inEye) {
    exports_vec3.copy(this._eye, inEye);
  }
  setTarget(inTarget) {
    exports_vec3.copy(this._target, inTarget);
  }
  setUpAxis(inUpAxis) {
    exports_vec3.copy(this._upAxis, inUpAxis);
  }
  getEye() {
    return this._eye;
  }
  getTarget() {
    return this._target;
  }
  getUpAxis() {
    return this._upAxis;
  }
  computeMatrices() {
    if (this._projectionType === ProjectionType.perspective) {
      const { fovy, aspectRatio, near, far } = this._perspectiveData;
      exports_mat4.perspective(this._projectionMatrix, deg2Rad(fovy), aspectRatio, near, far);
    } else if (this._projectionType === ProjectionType.orthogonal) {
      const { left, right, top, bottom, near, far } = this._orthogonalData;
      exports_mat4.ortho(this._projectionMatrix, left, right, top, bottom, near, far);
    }
    exports_mat4.lookAt(this._viewMatrix, this._eye, this._target, this._upAxis);
    this.computeComposedMatrix();
  }
  computeComposedMatrix() {
    exports_mat4.multiply(this._composedMatrix, this._projectionMatrix, this._viewMatrix);
  }
  setProjectionMatrix(inMat4) {
    exports_mat4.copy(this._projectionMatrix, inMat4);
  }
  setViewMatrix(inMat4) {
    exports_mat4.copy(this._viewMatrix, inMat4);
  }
  setComposedMatrix(inMat4) {
    exports_mat4.copy(this._composedMatrix, inMat4);
  }
  getProjectionMatrix() {
    return this._projectionMatrix;
  }
  getViewMatrix() {
    return this._viewMatrix;
  }
  getComposedMatrix() {
    return this._composedMatrix;
  }
  getPerspectiveData() {
    if (this._projectionType !== ProjectionType.perspective) {
      throw new Error("not a perspective projection");
    }
    return this._perspectiveData;
  }
  getOrthogonalData() {
    if (this._projectionType !== ProjectionType.orthogonal) {
      throw new Error("not an orthogonal projection");
    }
    return this._orthogonalData;
  }
}
// src/local-framework/graphics/camera/FrustumCulling.ts
var FrustumSide;
(function(FrustumSide2) {
  FrustumSide2[FrustumSide2["Right"] = 0] = "Right";
  FrustumSide2[FrustumSide2["Left"] = 1] = "Left";
  FrustumSide2[FrustumSide2["Bottom"] = 2] = "Bottom";
  FrustumSide2[FrustumSide2["Top"] = 3] = "Top";
  FrustumSide2[FrustumSide2["Back"] = 4] = "Back";
  FrustumSide2[FrustumSide2["Front"] = 5] = "Front";
})(FrustumSide || (FrustumSide = {}));

class FrustumCulling {
  _frustum = new Float32Array(24);
  _setPlane(side, left, right, coef) {
    const index = side * 4;
    this._frustum[index + 0] = left[0] + right[0] * coef;
    this._frustum[index + 1] = left[1] + right[1] * coef;
    this._frustum[index + 2] = left[2] + right[2] * coef;
    this._frustum[index + 3] = left[3] + right[3] * coef;
    const magnitude = Math.sqrt(this._frustum[index + 0] * this._frustum[index + 0] + this._frustum[index + 1] * this._frustum[index + 1] + this._frustum[index + 2] * this._frustum[index + 2]);
    if (magnitude === 0)
      return;
    this._frustum[index + 0] /= magnitude;
    this._frustum[index + 1] /= magnitude;
    this._frustum[index + 2] /= magnitude;
    this._frustum[index + 3] /= magnitude;
  }
  calculateFrustum(proj, view) {
    const clip = exports_mat4.multiply(exports_mat4.create(), proj, view);
    const row0 = exports_vec4.fromValues(clip[0], clip[4], clip[8], clip[12]);
    const row1 = exports_vec4.fromValues(clip[1], clip[5], clip[9], clip[13]);
    const row2 = exports_vec4.fromValues(clip[2], clip[6], clip[10], clip[14]);
    const row3 = exports_vec4.fromValues(clip[3], clip[7], clip[11], clip[15]);
    this._setPlane(FrustumSide.Right, row3, row0, -1);
    this._setPlane(FrustumSide.Left, row3, row0, 1);
    this._setPlane(FrustumSide.Bottom, row3, row1, 1);
    this._setPlane(FrustumSide.Top, row3, row1, -1);
    this._setPlane(FrustumSide.Back, row3, row2, -1);
    this._setPlane(FrustumSide.Front, row3, row2, 1);
  }
  sphereInFrustum(x, y, z, radius) {
    for (let ii = 0;ii < 6; ++ii) {
      const index = ii * 4;
      if (this._frustum[index + 0] * x + this._frustum[index + 1] * y + this._frustum[index + 2] * z + this._frustum[index + 3] <= -radius) {
        return false;
      }
    }
    return true;
  }
  pointInFrustum(x, y, z) {
    return this.sphereInFrustum(x, y, z, 0);
  }
  cubeInFrustumVec3(center, inSize) {
    return this.cubeInFrustum(center[0], center[1], center[2], inSize);
  }
  cubeInFrustum(inX, inY, inZ, inSize) {
    const hSize = inSize * 0.5;
    const minX = inX - hSize;
    const minY = inY - hSize;
    const minZ = inZ - hSize;
    const maxX = inX + hSize;
    const maxY = inY + hSize;
    const maxZ = inZ + hSize;
    for (let ii = 0;ii < 6; ++ii) {
      const index = ii * 4;
      const planA = this._frustum[index + 0];
      const planB = this._frustum[index + 1];
      const planC = this._frustum[index + 2];
      const planD = this._frustum[index + 3];
      if (planA * minX + planB * minY + planC * minZ + planD > 0 || planA * maxX + planB * minY + planC * minZ + planD > 0 || planA * minX + planB * maxY + planC * minZ + planD > 0 || planA * maxX + planB * maxY + planC * minZ + planD > 0 || planA * minX + planB * minY + planC * maxZ + planD > 0 || planA * maxX + planB * minY + planC * maxZ + planD > 0 || planA * minX + planB * maxY + planC * maxZ + planD > 0 || planA * maxX + planB * maxY + planC * maxZ + planD > 0) {
        continue;
      }
      return false;
    }
    return true;
  }
}
// src/local-framework/graphics/camera/sceneToScreenCoordinates.ts
var sceneToScreenCoordinates = (scenePos, modelView, projection, viewport) => {
  const composedMatrix = exports_mat4.create();
  exports_mat4.multiply(composedMatrix, projection, modelView);
  return sceneToScreenCoordsFromComposed(scenePos, composedMatrix, viewport);
};
var sceneToScreenCoordsFromComposed = (allScenePos, composedMatrix, viewport) => {
  const inputVec4 = exports_vec4.create();
  const multipliedVec4 = exports_vec4.create();
  const results = [];
  allScenePos.forEach((scenePos) => {
    inputVec4[0] = scenePos[0];
    inputVec4[1] = scenePos[1];
    inputVec4[2] = scenePos[2];
    inputVec4[3] = 1;
    exports_vec4.transformMat4(multipliedVec4, inputVec4, composedMatrix);
    if (multipliedVec4[3] === 0) {
      return null;
    }
    multipliedVec4[3] = 1 / multipliedVec4[3];
    multipliedVec4[0] *= multipliedVec4[3];
    multipliedVec4[1] *= multipliedVec4[3];
    multipliedVec4[2] *= multipliedVec4[3];
    multipliedVec4[0] = (multipliedVec4[0] * 0.5 + 0.5) * viewport[2] + viewport[0], multipliedVec4[1] = (multipliedVec4[1] * 0.5 + 0.5) * viewport[3] + viewport[1];
    results.push(exports_vec3.copy(exports_vec3.create(), multipliedVec4));
  });
  return results;
};
// src/local-framework/graphics/camera/screenToSceneCoordinates.ts
var screenToSceneCoordinates = (allScreenPos, modelView, projection, viewport) => {
  const composedMatrix = exports_mat4.multiply(exports_mat4.create(), projection, modelView);
  return screenToSceneCoordinatesFromComposed(allScreenPos, composedMatrix, viewport);
};
var screenToSceneCoordinatesFromComposed = (allScreenPos, composedMatrix, viewport) => {
  const invertedComposedMatrix = exports_mat4.invert(exports_mat4.create(), composedMatrix);
  return screenToSceneCoordinatesFromInvComposed(allScreenPos, invertedComposedMatrix, viewport);
};
var screenToSceneCoordinatesFromInvComposed = (allScreenPos, invertedComposedMatrix, viewport) => {
  const results = [];
  const multipliedVec4 = exports_vec4.create();
  allScreenPos.forEach((screenPos) => {
    multipliedVec4[0] = (screenPos[0] - viewport[0]) / viewport[2] * 2 - 1;
    multipliedVec4[1] = (screenPos[1] - viewport[1]) / viewport[3] * 2 - 1;
    multipliedVec4[2] = 2 * screenPos[2] - 1;
    multipliedVec4[3] = 1;
    exports_vec4.transformMat4(multipliedVec4, multipliedVec4, invertedComposedMatrix);
    if (multipliedVec4[3] === 0) {
      return;
    }
    multipliedVec4[3] = 1 / multipliedVec4[3];
    multipliedVec4[0] *= multipliedVec4[3];
    multipliedVec4[1] *= multipliedVec4[3];
    multipliedVec4[2] *= multipliedVec4[3];
    results.push(exports_vec3.copy(exports_vec3.create(), multipliedVec4));
  });
  return results;
};
// src/local-framework/graphics/renderers/index.ts
var exports_renderers = {};
__export(exports_renderers, {
  widgets: () => {
    {
      return exports_widgets;
    }
  },
  TextRenderer: () => {
    {
      return TextRenderer;
    }
  },
  StackRenderers: () => {
    {
      return StackRenderers;
    }
  },
  MultiBuffersRendering: () => {
    {
      return MultiBuffersRendering;
    }
  },
  GeometryRendererFlat: () => {
    {
      return GeometryRendererFlat;
    }
  },
  GeometryRenderer: () => {
    {
      return GeometryRenderer;
    }
  }
});

// src/local-framework/graphics/webgl2/index.ts
var exports_webgl2 = {};
__export(exports_webgl2, {
  getCubeMapType: () => {
    {
      return getCubeMapType;
    }
  },
  checkError: () => {
    {
      return checkError;
    }
  },
  WebGLContext: () => {
    {
      return WebGLContext;
    }
  },
  TextureRepeat: () => {
    {
      return TextureRepeat;
    }
  },
  TextureFilter: () => {
    {
      return TextureFilter;
    }
  },
  TextureArray: () => {
    {
      return TextureArray;
    }
  },
  Texture: () => {
    {
      return Texture;
    }
  },
  ShaderProgram: () => {
    {
      return ShaderProgram;
    }
  },
  RenderBuffer: () => {
    {
      return RenderBuffer;
    }
  },
  GeometryWrapper: () => {
    {
      return exports_GeometryWrapper;
    }
  },
  FrameBuffer: () => {
    {
      return FrameBuffer;
    }
  },
  FenceSync: () => {
    {
      return FenceSync;
    }
  },
  DataTextureVec4: () => {
    {
      return DataTextureVec4;
    }
  },
  DataTexture: () => {
    {
      return DataTexture;
    }
  },
  CubeMapType: () => {
    {
      return CubeMapType;
    }
  },
  CubeMap: () => {
    {
      return CubeMap;
    }
  }
});

// src/local-framework/graphics/webgl2/WebGLContext.ts
class WebGLContext {
  static _gl = null;
  static _extensionLoseContext = null;
  static initialize(canvas) {
    const renderingContextAttribs = {
      alpha: false,
      antialias: false,
      depth: true,
      failIfMajorPerformanceCaveat: false,
      powerPreference: "high-performance",
      premultipliedAlpha: true,
      preserveDrawingBuffer: true,
      stencil: false
    };
    WebGLContext._gl = canvas.getContext("webgl2", renderingContextAttribs);
    if (!WebGLContext._gl)
      throw new Error("could not create webgl context");
    WebGLContext._extensionLoseContext = WebGLContext._gl.getExtension("WEBGL_lose_context");
    WebGLContext._gl.getExtension("EXT_color_buffer_float");
    WebGLContext._gl.getExtension("EXT_float_blend");
  }
  static getContext() {
    if (!WebGLContext._gl) {
      throw new Error("webgl context not initialized");
    }
    return WebGLContext._gl;
  }
  static getExtensionLoseContext() {
    return WebGLContext._extensionLoseContext;
  }
  static getExtensionLoseContextStrict() {
    if (!WebGLContext._extensionLoseContext) {
      throw new Error("lose context extension not available");
    }
    return WebGLContext._extensionLoseContext;
  }
}

// src/local-framework/graphics/webgl2/CubeMap.ts
var CubeMapType;
(function(CubeMapType2) {
  CubeMapType2[CubeMapType2["positiveX"] = 0] = "positiveX";
  CubeMapType2[CubeMapType2["negativeX"] = 1] = "negativeX";
  CubeMapType2[CubeMapType2["positiveY"] = 2] = "positiveY";
  CubeMapType2[CubeMapType2["negativeY"] = 3] = "negativeY";
  CubeMapType2[CubeMapType2["positiveZ"] = 4] = "positiveZ";
  CubeMapType2[CubeMapType2["negativeZ"] = 5] = "negativeZ";
})(CubeMapType || (CubeMapType = {}));
var getCubeMapType = (inType) => {
  const gl = WebGLContext.getContext();
  switch (inType) {
    case CubeMapType.positiveX:
      return gl.TEXTURE_CUBE_MAP_POSITIVE_X;
    case CubeMapType.negativeX:
      return gl.TEXTURE_CUBE_MAP_NEGATIVE_X;
    case CubeMapType.positiveY:
      return gl.TEXTURE_CUBE_MAP_POSITIVE_Y;
    case CubeMapType.negativeY:
      return gl.TEXTURE_CUBE_MAP_NEGATIVE_Y;
    case CubeMapType.positiveZ:
      return gl.TEXTURE_CUBE_MAP_POSITIVE_Z;
    case CubeMapType.negativeZ:
      return gl.TEXTURE_CUBE_MAP_NEGATIVE_Z;
  }
};

class CubeMap {
  _width = 0;
  _height = 0;
  _minBufferSize = 0;
  _texture = null;
  initialize(width, height) {
    if (width < 1)
      throw new Error(`cube map: width is < 1, input: ${width}`);
    if (height < 1)
      throw new Error(`cube map: height is < 1, input: ${height}`);
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
    this._width = width;
    this._height = height;
    this._minBufferSize = this._width * this._height * 4;
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteTexture(this._texture);
  }
  rawBind() {
    if (!this._texture)
      throw new Error("cube map: not initialized");
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_CUBE_MAP, this._texture);
  }
  bind(inCallback) {
    this.rawBind();
    inCallback(this);
    CubeMap.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);
  }
  loadFromMemory(inType, inPixels) {
    if (!this._texture)
      throw new Error("cube map: not initialized");
    if (inPixels.length < this._minBufferSize)
      throw new Error(`cube map: miss-matching pixels buffer size, input: ${inPixels.length}`);
    const gl = WebGLContext.getContext();
    const level = 0;
    const internalFormat = gl.RGBA;
    const border = 0;
    const srcFormat = gl.RGBA;
    const srcType = gl.UNSIGNED_BYTE;
    gl.texImage2D(getCubeMapType(inType), level, internalFormat, this._width, this._height, border, srcFormat, srcType, inPixels);
  }
  allocate() {
    const gl = WebGLContext.getContext();
    const level = 0;
    const internalFormat = gl.RGBA;
    const border = 0;
    const srcFormat = gl.RGBA;
    const srcType = gl.UNSIGNED_BYTE;
    const pixels = new Uint8Array(this._width * this._height * 4);
    [
      CubeMapType.negativeX,
      CubeMapType.negativeY,
      CubeMapType.negativeZ,
      CubeMapType.positiveX,
      CubeMapType.positiveY,
      CubeMapType.positiveZ
    ].forEach((type) => {
      gl.texImage2D(getCubeMapType(type), level, internalFormat, this._width, this._height, border, srcFormat, srcType, pixels);
    });
  }
  complete() {
    const gl = WebGLContext.getContext();
    gl.generateMipmap(gl.TEXTURE_CUBE_MAP);
    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
  }
  getWidth() {
    if (!this._texture)
      throw new Error("cube map: not initialized");
    return this._width;
  }
  getHeight() {
    if (!this._texture)
      throw new Error("cube map: not initialized");
    return this._height;
  }
  getRawObject() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._texture;
  }
}
// src/local-framework/graphics/webgl2/DataTexture.ts
class DataTexture {
  _texture = null;
  _buffer;
  initialize(data) {
    if (this._texture) {
      throw new Error("data texture already initialized");
    }
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
    if (!this._texture) {
      throw new Error("data texture failed to be created");
    }
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    this.allocate(data);
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteTexture(this._texture);
  }
  allocate(data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    const dataSize = Array.isArray(data) ? data.length : data;
    if (dataSize <= 0) {
      throw new Error("texture: width must be positive");
    }
    if (dataSize > 2048) {
      throw new Error(`data texture max size is 2048 (input was ${dataSize})`);
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    if (Array.isArray(data)) {
      this._buffer = new Float32Array(data);
    } else {
      this._buffer = new Float32Array(data);
    }
    const level = 0;
    const internalFormat = gl.R32F;
    const width = dataSize;
    const height = 1;
    const border = 0;
    const format = gl.RED;
    const type = gl.FLOAT;
    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, format, type, this._buffer);
  }
  update(start, data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    if (!this._buffer) {
      throw new Error("data texture update but not previously allocated");
    }
    if (start + data.length > this._buffer.length) {
      throw new Error(`data texture update but size is larger (start: ${start}, length: ${data.length}, max: ${this._buffer.length})`);
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    for (let ii = 0;ii < data.length; ++ii) {
      this._buffer[ii] = data[ii];
    }
    const level = 0;
    const width = data.length;
    const height = 1;
    const format = gl.RED;
    const type = gl.FLOAT;
    const xoffset = start;
    const yoffset = 0;
    const srcOffset = 0;
    gl.texSubImage2D(gl.TEXTURE_2D, level, xoffset, yoffset, width, height, format, type, this._buffer, srcOffset);
  }
  rawBind() {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    DataTexture.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, null);
  }
}
// src/local-framework/graphics/webgl2/DataTextureVec4.ts
class DataTextureVec4 {
  _texture = null;
  _buffer;
  initialize(data = []) {
    if (this._texture) {
      throw new Error("data texture already initialized");
    }
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
    if (!this._texture) {
      throw new Error("data texture failed to be created");
    }
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    this.allocate(data);
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteTexture(this._texture);
  }
  allocate(data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    if (data.length <= 0) {
      throw new Error("texture: width must be positive");
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    this._buffer = new Uint8Array(data.flat());
    const level = 0;
    const internalFormat = gl.RGBA;
    const width = data.length;
    const height = 1;
    const border = 0;
    const format = gl.RGBA;
    const type = gl.UNSIGNED_BYTE;
    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, format, type, this._buffer);
  }
  update(start, data) {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    if (!this._buffer) {
      throw new Error("data texture update but not previously allocated");
    }
    if (start + data.length > this._buffer.length) {
      throw new Error(`data texture update but size is larger (start: ${start}, length: ${data.length}, max: ${this._buffer.length})`);
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
    for (let ii = 0;ii < data.length; ++ii) {
      this._buffer[ii * 4 + 0] = data[ii][0];
      this._buffer[ii * 4 + 1] = data[ii][1];
      this._buffer[ii * 4 + 2] = data[ii][2];
      this._buffer[ii * 4 + 3] = data[ii][3];
    }
    const level = 0;
    const width = data.length;
    const height = 1;
    const format = gl.RGBA;
    const type = gl.UNSIGNED_BYTE;
    const xoffset = start;
    const yoffset = 0;
    const srcOffset = 0;
    gl.texSubImage2D(gl.TEXTURE_2D, level, xoffset, yoffset, width, height, format, type, this._buffer, srcOffset);
  }
  rawBind() {
    if (!this._texture) {
      throw new Error("data texture not initialized");
    }
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    DataTextureVec4.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, null);
  }
}
// src/local-framework/graphics/webgl2/Error.ts
var checkError = () => {
  const gl = WebGLContext.getContext();
  const errorId = gl.getError();
  switch (errorId) {
    case gl.INVALID_ENUM:
      throw new Error("gl.INVALID_ENUM\nAn unacceptable value is specified for an enumerated argument. The offending command is ignored and has no other side effect than to set the error flag.");
    case gl.INVALID_VALUE:
      throw new Error("gl.INVALID_VALUE\nA numeric argument is out of range. The offending command is ignored and has no other side effect than to set the error flag.");
    case gl.INVALID_OPERATION:
      throw new Error("gl.INVALID_OPERATION\nThe specified operation is not allowed in the current state. The offending command is ignored and has no other side effect than to set the error flag.");
    case gl.INVALID_FRAMEBUFFER_OPERATION:
      throw new Error("gl.INVALID_FRAMEBUFFER_OPERATION\nThe framebuffer object is not complete. The offending command is ignored and has no other side effect than to set the error flag.");
    case gl.OUT_OF_MEMORY:
      throw new Error("gl.OUT_OF_MEMORY\nThere is not enough memory left to execute the command. The state of the GL is undefined, except for the state of the error flags, after this error is recorded.");
    case gl.CONTEXT_LOST_WEBGL:
      throw new Error("gl.CONTEXT_LOST_WEBGL\n If the WebGL context is lost, this error is returned on the first call to getError. Afterwards and until the context has been restored, it returns gl.NO_ERROR.");
  }
};
// src/local-framework/graphics/webgl2/Fence.ts
class FenceSync {
  _sync;
  constructor() {
  }
  dispose() {
    if (!this._sync) {
      return;
    }
    const gl = WebGLContext.getContext();
    gl.deleteSync(this._sync);
    this._sync = undefined;
  }
  isStarted() {
    return this._sync !== undefined;
  }
  start() {
    if (this._sync) {
      this.dispose();
    }
    const gl = WebGLContext.getContext();
    const tmpSync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0);
    if (tmpSync === null) {
      throw new Error("could not create a webgl fence");
    }
    this._sync = tmpSync;
    gl.flush();
    gl.finish();
  }
  isSignaled() {
    if (!this._sync) {
      throw new Error("fence not started");
    }
    const gl = WebGLContext.getContext();
    const signaled = gl.getSyncParameter(this._sync, gl.SYNC_STATUS);
    return signaled === gl.SIGNALED;
  }
  wait(timeoutNanoSec) {
    if (!this._sync) {
      throw new Error("fence not started");
    }
    const gl = WebGLContext.getContext();
    const bitflags = 0;
    const status = gl.clientWaitSync(this._sync, bitflags, timeoutNanoSec);
    switch (status) {
      case gl.TIMEOUT_EXPIRED:
        return "timed-out";
      case gl.WAIT_FAILED:
        console.warn("fence.wait -> should never get here");
        this.dispose();
        return "done";
      case gl.ALREADY_SIGNALED:
      case gl.CONDITION_SATISFIED:
      default:
        this.dispose();
        return "done";
    }
  }
}
// src/local-framework/graphics/webgl2/FrameBuffer.ts
class FrameBuffer {
  _frameBuffer;
  constructor() {
    const gl = WebGLContext.getContext();
    const tmpFbo = gl.createFramebuffer();
    if (tmpFbo === null)
      throw new Error("null frame buffer object");
    this._frameBuffer = tmpFbo;
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteFramebuffer(this._frameBuffer);
  }
  rawBind() {
    const gl = WebGLContext.getContext();
    gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);
  }
  bind(inCallback) {
    this.rawBind();
    inCallback(this);
    FrameBuffer.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindFramebuffer(gl.FRAMEBUFFER, null);
  }
  attachTexture(texture) {
    const gl = WebGLContext.getContext();
    const mipmapLevel = 0;
    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture.getRawObject(), mipmapLevel);
  }
  attachDepthTexture(texture) {
    const gl = WebGLContext.getContext();
    const mipmapLevel = 0;
    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, texture.getRawObject(), mipmapLevel);
  }
  attachRenderBuffer(texture) {
    const gl = WebGLContext.getContext();
    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, texture.getRawObject());
  }
  attachCubeMap(texture, type) {
    const gl = WebGLContext.getContext();
    const mipmapLevel = 0;
    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, getCubeMapType(type), texture.getRawObject(), mipmapLevel);
  }
  getPixels(x, y, width, height, outDst) {
    const gl = WebGLContext.getContext();
    gl.readPixels(x, y, width, height, gl.RGBA, gl.UNSIGNED_BYTE, outDst);
  }
}
// src/local-framework/graphics/webgl2/GeometryWrapper.ts
var exports_GeometryWrapper = {};
__export(exports_GeometryWrapper, {
  PrimitiveType: () => {
    {
      return PrimitiveType;
    }
  },
  GeometryBuilder: () => {
    {
      return GeometryBuilder;
    }
  },
  Geometry: () => {
    {
      return Geometry;
    }
  },
  BytesPerPixel: () => {
    {
      return BytesPerPixel;
    }
  },
  AttributeType: () => {
    {
      return AttributeType;
    }
  }
});
var BytesPerPixel = 4;
var AttributeType;
(function(AttributeType2) {
  AttributeType2[AttributeType2["float"] = 0] = "float";
  AttributeType2[AttributeType2["vec2f"] = 1] = "vec2f";
  AttributeType2[AttributeType2["vec3f"] = 2] = "vec3f";
  AttributeType2[AttributeType2["vec4f"] = 3] = "vec4f";
  AttributeType2[AttributeType2["mat3f"] = 4] = "mat3f";
  AttributeType2[AttributeType2["mat4f"] = 5] = "mat4f";
})(AttributeType || (AttributeType = {}));
var getAttrTypeSize = (inType) => {
  switch (inType) {
    case AttributeType.float:
      return 1;
    case AttributeType.vec2f:
      return 2;
    case AttributeType.vec3f:
      return 3;
    case AttributeType.vec4f:
      return 4;
    case AttributeType.mat3f:
      return 9;
    case AttributeType.mat4f:
      return 16;
  }
};
var PrimitiveType;
(function(PrimitiveType2) {
  PrimitiveType2[PrimitiveType2["lines"] = 0] = "lines";
  PrimitiveType2[PrimitiveType2["lineStrip"] = 1] = "lineStrip";
  PrimitiveType2[PrimitiveType2["lineLoop"] = 2] = "lineLoop";
  PrimitiveType2[PrimitiveType2["triangles"] = 3] = "triangles";
  PrimitiveType2[PrimitiveType2["triangleStrip"] = 4] = "triangleStrip";
  PrimitiveType2[PrimitiveType2["triangleFan"] = 5] = "triangleFan";
})(PrimitiveType || (PrimitiveType = {}));
var _ensureFloatBuffer = (vertices) => {
  if (vertices instanceof Float32Array) {
    return vertices;
  }
  return new Float32Array(vertices);
};
var _getBufferUsage = (inMode) => {
  const gl = WebGLContext.getContext();
  if (inMode === "dynamic") {
    return gl.DYNAMIC_DRAW;
  }
  if (inMode === "streaming") {
    return gl.STREAM_DRAW;
  }
  return gl.STATIC_DRAW;
};

class Geometry {
  _def;
  _vao;
  _vbos;
  _primitiveType;
  _primitiveStart = 0;
  _primitiveCount = 0;
  _instanceCount = 0;
  _isInstanced = false;
  constructor(shader, def) {
    const gl = WebGLContext.getContext();
    if (def.vbos.length === 0) {
      throw new Error("empty vbo definition");
    }
    for (const vbo of def.vbos) {
      if (vbo.attrs.length === 0) {
        throw new Error("empty vbo attribute definition");
      }
      for (const attr of vbo.attrs) {
        if (!shader.hasAttribute(attr.name)) {
          throw new Error(`attribute not found, name="${attr.name}"`);
        }
      }
    }
    this._def = def;
    switch (def.primitiveType) {
      case PrimitiveType.lines:
        this._primitiveType = gl.LINES;
        break;
      case PrimitiveType.lineStrip:
        this._primitiveType = gl.LINE_STRIP;
        break;
      case PrimitiveType.lineLoop:
        this._primitiveType = gl.LINE_LOOP;
        break;
      case PrimitiveType.triangles:
        this._primitiveType = gl.TRIANGLES;
        break;
      case PrimitiveType.triangleStrip:
        this._primitiveType = gl.TRIANGLE_STRIP;
        break;
      case PrimitiveType.triangleFan:
        this._primitiveType = gl.TRIANGLE_FAN;
        break;
      default:
        throw new Error("primitive type not found");
    }
    const newVao = gl.createVertexArray();
    if (!newVao) {
      throw new Error("fail o create a vao unit");
    }
    this._vao = newVao;
    gl.bindVertexArray(this._vao);
    this._vbos = [];
    for (const vboDef of this._def.vbos) {
      const newVbo = gl.createBuffer();
      if (!newVbo) {
        throw new Error("fail o create a vbo unit");
      }
      this._vbos.push({
        object: newVbo,
        maxSize: 0,
        mode: vboDef.mode || "static"
      });
      gl.bindBuffer(gl.ARRAY_BUFFER, newVbo);
      let stride = vboDef.stride || 0;
      if (!stride) {
        for (const attr of vboDef.attrs) {
          switch (attr.type) {
            case AttributeType.float:
              stride += 1;
              break;
            case AttributeType.vec2f:
              stride += 2;
              break;
            case AttributeType.vec3f:
              stride += 3;
              break;
            case AttributeType.vec4f:
              stride += 4;
              break;
            case AttributeType.mat3f:
              stride += 9;
              break;
            case AttributeType.mat4f:
              stride += 16;
              break;
          }
        }
        stride *= BytesPerPixel;
      }
      for (const attr of vboDef.attrs) {
        let rowSize = 1;
        let totalRows = 1;
        switch (attr.type) {
          case AttributeType.float:
            rowSize = 1;
            totalRows = 1;
            break;
          case AttributeType.vec2f:
            rowSize = 2;
            totalRows = 1;
            break;
          case AttributeType.vec3f:
            rowSize = 3;
            totalRows = 1;
            break;
          case AttributeType.vec4f:
            rowSize = 4;
            totalRows = 1;
            break;
          case AttributeType.mat3f:
            rowSize = 3;
            totalRows = 3;
            break;
          case AttributeType.mat4f:
            rowSize = 4;
            totalRows = 4;
            break;
        }
        const attrLocation = shader.getAttribute(attr.name);
        for (let ii = 0;ii < totalRows; ++ii) {
          const attrId = attrLocation + ii;
          const rowIndex = (attr.index + ii * rowSize) * BytesPerPixel;
          gl.enableVertexAttribArray(attrId);
          gl.vertexAttribPointer(attrId, rowSize, gl.FLOAT, false, stride, rowIndex);
          if (vboDef.instanced === true) {
            gl.vertexAttribDivisor(attrId, 1);
            this._isInstanced = true;
          }
        }
      }
    }
    gl.bindVertexArray(null);
  }
  dispose() {
    const gl = WebGLContext.getContext();
    for (const vbo of this._vbos) {
      gl.deleteBuffer(vbo.object);
    }
    this._vbos.length = 0;
    gl.deleteVertexArray(this._vao);
  }
  setBufferSize(inIndex, inSize) {
    if (inIndex < 0 || inIndex >= this._vbos.length) {
      throw new Error(`no vbo available to that index (input: ${inIndex})`);
    }
    if (inSize <= 0) {
      throw new Error(`vbo must be > 0 (input: ${inSize})`);
    }
    const currVbo = this._vbos[inIndex];
    if (inSize < currVbo.maxSize) {
      return;
    }
    currVbo.maxSize = inSize;
    const gl = WebGLContext.getContext();
    gl.bindBuffer(gl.ARRAY_BUFFER, currVbo.object);
    gl.bufferData(gl.ARRAY_BUFFER, inSize, _getBufferUsage(currVbo.mode));
    gl.bindBuffer(gl.ARRAY_BUFFER, null);
  }
  setFloatBufferSize(index, inSize) {
    this.setBufferSize(index, inSize * 4);
  }
  allocateBuffer(inIndex, inVertices, inSize) {
    if (inIndex < 0 || inIndex >= this._vbos.length) {
      throw new Error(`no vbo available to that index (input: ${inIndex}, total vbos: ${this._vbos.length})`);
    }
    if (inSize <= 0) {
      throw new Error(`size must be > 0 (input: ${inSize})`);
    }
    const currVbo = this._vbos[inIndex];
    if (inSize <= 0) {
      throw new Error(`vbo must be > 0 (input: ${inSize})`);
    }
    currVbo.maxSize = inSize;
    const buffer = _ensureFloatBuffer(inVertices);
    const gl = WebGLContext.getContext();
    gl.bindBuffer(gl.ARRAY_BUFFER, currVbo.object);
    gl.bufferData(gl.ARRAY_BUFFER, buffer, _getBufferUsage(currVbo.mode), 0, inSize);
    gl.bindBuffer(gl.ARRAY_BUFFER, null);
  }
  updateBuffer(inIndex, inVertices, inSize, inStartOffset) {
    if (inIndex < 0 || inIndex >= this._vbos.length) {
      throw new Error(`no vbo available to that index (input: ${inIndex}, total vbos: ${this._vbos.length})`);
    }
    if (inSize <= 0) {
      throw new Error(`size must be > 0 (input: ${inSize})`);
    }
    const currVbo = this._vbos[inIndex];
    if (inStartOffset !== undefined) {
      if (inStartOffset < 0) {
        throw new Error(`offset must be >= 0 (input: ${inStartOffset})`);
      }
      const endIndex = inStartOffset + inSize;
      if (endIndex > currVbo.maxSize) {
        throw new Error(`offset + size > to vbo max size (input: ${endIndex}, max size: ${currVbo.maxSize})`);
      }
    } else if (inSize > currVbo.maxSize) {
      throw new Error(`size must be < to vbo max size (input: ${inSize}, max size: ${currVbo.maxSize})`);
    }
    const buffer = _ensureFloatBuffer(inVertices);
    const gl = WebGLContext.getContext();
    gl.bindBuffer(gl.ARRAY_BUFFER, currVbo.object);
    gl.bufferSubData(gl.ARRAY_BUFFER, inStartOffset ?? 0, buffer.slice(0, inSize), 0, inSize);
    gl.bindBuffer(gl.ARRAY_BUFFER, null);
  }
  render() {
    if (this._primitiveCount == 0) {
      return;
    }
    if (this._isInstanced && this._instanceCount == 0) {
      return;
    }
    const gl = WebGLContext.getContext();
    gl.bindVertexArray(this._vao);
    if (this._isInstanced === true) {
      gl.drawArraysInstanced(this._primitiveType, this._primitiveStart, this._primitiveCount, this._instanceCount);
    } else {
      gl.drawArrays(this._primitiveType, this._primitiveStart, this._primitiveCount);
    }
    gl.bindVertexArray(null);
  }
  setPrimitiveStart(start) {
    this._primitiveStart = start;
  }
  setPrimitiveCount(count) {
    this._primitiveCount = count;
  }
  setInstancedCount(count) {
    this._instanceCount = count;
  }
}

class GeometryBuilder {
  _def = {
    vbos: [],
    primitiveType: PrimitiveType.lines
  };
  reset() {
    this._def = {
      vbos: [],
      primitiveType: PrimitiveType.lines
    };
    return this;
  }
  getDef() {
    return this._def;
  }
  setPrimitiveType(inPrimitive) {
    this._def.primitiveType = PrimitiveType[inPrimitive];
    return this;
  }
  addVbo() {
    this._def.vbos.push({
      attrs: [],
      instanced: false
    });
    return this;
  }
  setVboAsInstanced() {
    this._getLastVbo().instanced = true;
    return this;
  }
  setVboAsDynamic() {
    this._getLastVbo().mode = "dynamic";
    return this;
  }
  setVboAsStreaming() {
    this._getLastVbo().mode = "streaming";
    return this;
  }
  setStride(inStride) {
    this._getLastVbo().stride = inStride;
    return this;
  }
  addVboAttribute(inName, inType) {
    const currVbo = this._getLastVbo();
    const lastAttr = currVbo.attrs.length > 0 ? currVbo.attrs[currVbo.attrs.length - 1] : null;
    currVbo.attrs.push({
      name: inName,
      type: AttributeType[inType],
      index: lastAttr ? lastAttr.index + getAttrTypeSize(lastAttr.type) : 0
    });
    return this;
  }
  _getLastVbo() {
    if (this._def.vbos.length === 0) {
      throw new Error("no VBO setup");
    }
    return this._def.vbos[this._def.vbos.length - 1];
  }
}
// src/local-framework/graphics/webgl2/RenderBuffer.ts
class RenderBuffer {
  _buffer;
  constructor() {
    const gl = WebGLContext.getContext();
    const tmpBuf = gl.createRenderbuffer();
    if (tmpBuf === null) {
      throw new Error("null render buffer object");
    }
    this._buffer = tmpBuf;
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteRenderbuffer(this._buffer);
  }
  rawBind() {
    const gl = WebGLContext.getContext();
    gl.bindRenderbuffer(gl.RENDERBUFFER, this._buffer);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    RenderBuffer.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindRenderbuffer(gl.RENDERBUFFER, null);
  }
  setSize(type, width, height) {
    const gl = WebGLContext.getContext();
    let internalFormat = gl.DEPTH_COMPONENT32F;
    switch (type) {
      case "depth16": {
        internalFormat = gl.DEPTH_COMPONENT16;
        break;
      }
      case "depth24": {
        internalFormat = gl.DEPTH_COMPONENT16;
        break;
      }
    }
    gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, width, height);
  }
  getRawObject() {
    return this._buffer;
  }
}
// src/local-framework/graphics/webgl2/ShaderProgram.ts
class ShaderProgram {
  static _isBound = null;
  _name;
  _program;
  _attributes = new Map;
  _uniforms = new Map;
  constructor(inName, opt) {
    this._name = inName;
    const gl = WebGLContext.getContext();
    const vertexShader = this._getShader(opt.vertexSrc, gl.VERTEX_SHADER);
    const fragmentShader = this._getShader(opt.fragmentSrc, gl.FRAGMENT_SHADER);
    const program = gl.createProgram();
    if (!program) {
      throw new Error("could not create a shader program");
    }
    gl.attachShader(program, vertexShader);
    gl.attachShader(program, fragmentShader);
    gl.linkProgram(program);
    gl.deleteShader(vertexShader);
    gl.deleteShader(fragmentShader);
    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
      const lastError = gl.getProgramInfoLog(program);
      throw new Error("Failed to initialized shaders, Error linking:" + lastError);
    }
    this._program = program;
    this.bind(() => {
      this._getAttributes(opt.attributes);
      this._getUniforms(opt.uniforms);
    });
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteProgram(this._program);
  }
  bind(inCallback) {
    if (ShaderProgram._isBound !== null) {
      throw new Error(`Double shader binding (bound: ${ShaderProgram._isBound._name}, binding: ${this._name})`);
    }
    ShaderProgram._isBound = this;
    const gl = WebGLContext.getContext();
    gl.useProgram(this._program);
    inCallback(this);
    ShaderProgram.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.useProgram(null);
    ShaderProgram._isBound = null;
  }
  isBound() {
    return ShaderProgram._isBound === this;
  }
  hasAttribute(name) {
    return this._attributes.has(name);
  }
  getAttribute(name) {
    const attribute = this._attributes.get(name);
    if (attribute === undefined) {
      throw new Error(`attribute not found: ${name}`);
    }
    return attribute;
  }
  getUniform(name) {
    const uniform = this._uniforms.get(name);
    if (uniform === undefined) {
      throw new Error(`uniform not found: ${name}`);
    }
    return uniform;
  }
  setTextureUniform(inName, inTexture, inIndex) {
    const gl = WebGLContext.getContext();
    gl.activeTexture(gl.TEXTURE0 + inIndex);
    gl.uniform1i(this.getUniform(inName), inIndex);
    inTexture.rawBind();
  }
  setInteger1Uniform(inName, inValue) {
    const gl = WebGLContext.getContext();
    gl.uniform1i(this.getUniform(inName), inValue);
  }
  setInteger2Uniform(inName, inValueX, inValueY) {
    const gl = WebGLContext.getContext();
    gl.uniform2i(this.getUniform(inName), inValueX, inValueY);
  }
  setInteger3Uniform(inName, inValueX, inValueY, inValueZ) {
    const gl = WebGLContext.getContext();
    gl.uniform3i(this.getUniform(inName), inValueX, inValueY, inValueZ);
  }
  setFloat1Uniform(inName, inValue) {
    const gl = WebGLContext.getContext();
    gl.uniform1f(this.getUniform(inName), inValue);
  }
  setFloat2Uniform(inName, inValueX, inValueY) {
    const gl = WebGLContext.getContext();
    gl.uniform2f(this.getUniform(inName), inValueX, inValueY);
  }
  setFloat3Uniform(inName, inValueX, inValueY, inValueZ) {
    const gl = WebGLContext.getContext();
    gl.uniform3f(this.getUniform(inName), inValueX, inValueY, inValueZ);
  }
  setMatrix3Uniform(inName, inMatrix) {
    const gl = WebGLContext.getContext();
    gl.uniformMatrix3fv(this.getUniform(inName), false, inMatrix);
  }
  setMatrix4Uniform(inName, inMatrix) {
    const gl = WebGLContext.getContext();
    gl.uniformMatrix4fv(this.getUniform(inName), false, inMatrix);
  }
  _getAttributes(attributes) {
    const gl = WebGLContext.getContext();
    for (let ii = 0;ii < attributes.length; ++ii) {
      const value = gl.getAttribLocation(this._program, attributes[ii]);
      if (value < 0) {
        throw new Error(`attribute not found => ${attributes[ii]}`);
      }
      this._attributes.set(attributes[ii], value);
    }
  }
  _getUniforms(uniforms) {
    const gl = WebGLContext.getContext();
    for (let ii = 0;ii < uniforms.length; ++ii) {
      const value = gl.getUniformLocation(this._program, uniforms[ii]);
      if (value === null) {
        throw new Error(`uniform not found => ${uniforms[ii]}`);
      }
      this._uniforms.set(uniforms[ii], value);
    }
  }
  _getShader(src, type) {
    const gl = WebGLContext.getContext();
    const shader = gl.createShader(type);
    if (!shader) {
      throw new Error("could not create a shader");
    }
    gl.shaderSource(shader, src);
    gl.compileShader(shader);
    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
      let error_str = gl.getShaderInfoLog(shader);
      if (!error_str)
        error_str = "failed to compile a shader";
      throw new Error(error_str);
    }
    return shader;
  }
}
// src/local-framework/graphics/webgl2/Texture.ts
var TextureFilter;
(function(TextureFilter2) {
  TextureFilter2[TextureFilter2["pixelated"] = 0] = "pixelated";
  TextureFilter2[TextureFilter2["linear"] = 1] = "linear";
  TextureFilter2[TextureFilter2["mipmap"] = 2] = "mipmap";
})(TextureFilter || (TextureFilter = {}));
var TextureRepeat;
(function(TextureRepeat2) {
  TextureRepeat2[TextureRepeat2["noRepeat"] = 0] = "noRepeat";
  TextureRepeat2[TextureRepeat2["repeat"] = 1] = "repeat";
})(TextureRepeat || (TextureRepeat = {}));

class Texture {
  _width = 0;
  _height = 0;
  _texture = null;
  initialize() {
    if (this._texture)
      throw new Error("texture: already initialized");
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
  }
  rawBind() {
    if (!this._texture)
      throw new Error("texture: not initialized");
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, this._texture);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    Texture.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D, null);
  }
  loadFromImage(inImage, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inImage.width, inImage.height, inImage, mode, repeat);
  }
  loadFromMemory(inWidth, inHeight, inPixels, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, inPixels, mode, repeat);
  }
  allocate(inWidth, inHeight, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, null, mode, repeat);
  }
  allocateDepth(inWidth, inHeight, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, null, mode, repeat, true);
  }
  resize(inWidth, inHeight, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, null, mode, repeat);
  }
  _allocate(inWidth, inHeight, inPixels = null, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat, isDepthTexture = false) {
    if (!this._texture) {
      throw new Error("texture: not initialized");
    }
    if (inWidth <= 0) {
      throw new Error("texture: width must be positive");
    }
    if (inHeight <= 0) {
      throw new Error("texture: height must be positive");
    }
    const gl = WebGLContext.getContext();
    this._width = inWidth;
    this._height = inHeight;
    const level = 0;
    const internalFormat = isDepthTexture ? gl.DEPTH_COMPONENT32F : gl.RGBA;
    const border = 0;
    const srcFormat = isDepthTexture ? gl.DEPTH_COMPONENT : gl.RGBA;
    const srcType = isDepthTexture ? gl.FLOAT : gl.UNSIGNED_BYTE;
    if (inPixels instanceof HTMLImageElement) {
      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, srcFormat, srcType, inPixels);
    } else {
      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, inWidth, inHeight, border, srcFormat, srcType, inPixels);
    }
    if (repeat === TextureRepeat.noRepeat) {
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    } else if (repeat === TextureRepeat.repeat) {
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
    }
    if (mode === TextureFilter.pixelated) {
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    } else if (mode === TextureFilter.linear) {
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
    } else if (mode === TextureFilter.mipmap) {
      gl.generateMipmap(gl.TEXTURE_2D);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
    }
  }
  getWidth() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._width;
  }
  getHeight() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._height;
  }
  getRawObject() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._texture;
  }
}
// src/local-framework/graphics/webgl2/TextureArray.ts
class TextureArray {
  _width = 0;
  _height = 0;
  _texture = null;
  initialize() {
    if (this._texture)
      throw new Error("texture: already initialized");
    const gl = WebGLContext.getContext();
    this._texture = gl.createTexture();
  }
  dispose() {
    const gl = WebGLContext.getContext();
    gl.deleteTexture(this._texture);
  }
  rawBind() {
    if (!this._texture)
      throw new Error("texture: not initialized");
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D_ARRAY, this._texture);
  }
  preBind(inCallback) {
    this.rawBind();
    inCallback(this);
  }
  bind(inCallback) {
    this.preBind(inCallback);
    TextureArray.unbind();
  }
  static unbind() {
    const gl = WebGLContext.getContext();
    gl.bindTexture(gl.TEXTURE_2D_ARRAY, null);
  }
  loadFromImage(inWidth, inHeight, inTotalLayers, inImage, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, inTotalLayers, inImage, mode, repeat);
  }
  loadFromMemory(inWidth, inHeight, inTotalLayers, inPixels, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    this._allocate(inWidth, inHeight, inTotalLayers, inPixels, mode, repeat);
  }
  _allocate(inWidth, inHeight, inTotalLayers, inPixels = null, mode = TextureFilter.pixelated, repeat = TextureRepeat.noRepeat) {
    if (!this._texture) {
      throw new Error("texture: not initialized");
    }
    if (inWidth <= 0) {
      throw new Error("texture: width must be positive");
    }
    if (inHeight <= 0) {
      throw new Error("texture: height must be positive");
    }
    const gl = WebGLContext.getContext();
    this._width = inWidth;
    this._height = inHeight;
    const level = 0;
    const internalFormat = gl.RGBA;
    const border = 0;
    const srcFormat = gl.RGBA;
    const srcType = gl.UNSIGNED_BYTE;
    if (inPixels instanceof HTMLImageElement) {
      gl.texImage3D(gl.TEXTURE_2D_ARRAY, level, internalFormat, inWidth, inHeight, inTotalLayers, border, srcFormat, srcType, inPixels);
    } else {
      gl.texImage3D(gl.TEXTURE_2D_ARRAY, level, internalFormat, inWidth, inHeight, inTotalLayers, border, srcFormat, srcType, inPixels);
    }
    if (repeat === TextureRepeat.noRepeat) {
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
    } else if (repeat === TextureRepeat.repeat) {
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_S, gl.REPEAT);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_WRAP_T, gl.REPEAT);
    }
    if (mode === TextureFilter.pixelated) {
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    } else if (mode === TextureFilter.linear) {
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
    } else if (mode === TextureFilter.mipmap) {
      gl.generateMipmap(gl.TEXTURE_2D_ARRAY);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
      gl.texParameteri(gl.TEXTURE_2D_ARRAY, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
    }
  }
  getWidth() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._width;
  }
  getHeight() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._height;
  }
  getRawObject() {
    if (!this._texture)
      throw new Error("texture not initialized");
    return this._texture;
  }
}
// src/local-framework/graphics/renderers/geometry-renderer/shaders/geometry-renderer.glsl.vert
var geometry_renderer_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec3 a_vertex_position;
in vec3 a_vertex_normal;

in vec3 a_offset_center;
in vec4 a_offset_orientation;
in vec3 a_offset_color;
in vec3 a_offset_scale;

flat out vec4 v_color;
out vec3 v_worldSpacePosition;
out vec3 v_worldSpaceNormal;


vec3 apply_quat_to_vec3(vec3 position, vec4 q)
{
  vec3 v = position.xyz;
  return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
}

void main(void)
{
	vec3 worldSpacePosition = a_offset_center + apply_quat_to_vec3(a_vertex_position * a_offset_scale, a_offset_orientation);
	vec3 worldSpaceNormal = apply_quat_to_vec3(a_vertex_normal, a_offset_orientation);

  gl_Position = u_composedMatrix * vec4(worldSpacePosition, 1.0);

  v_color = vec4(a_offset_color, 1.0);
  v_worldSpacePosition = worldSpacePosition;
  v_worldSpaceNormal = worldSpaceNormal;
}
`.trim();

// src/local-framework/graphics/renderers/geometry-renderer/shaders/geometry-renderer.glsl.frag
var geometry_renderer_glsl_default2 = `
#version 300 es

precision lowp float;

uniform vec3 u_lightPos;

flat in vec4 v_color;
in vec3 v_worldSpacePosition;
in vec3 v_worldSpaceNormal;

out vec4 o_color;

//
//
//

const float k_ambiantCoef = 0.1;

const vec3 k_specColor = vec3(1.0, 1.0, 1.0);

vec3 _getLightColor(vec4 currentColor)
{
  vec3 normal = normalize(v_worldSpaceNormal);
  vec3 lightDir = normalize(u_lightPos - v_worldSpacePosition);

  float diffuseCoef = max(dot(lightDir, v_worldSpaceNormal.xyz), 0.0);
  float specularCoef = 0.0;

  // if (diffuseCoef > 0.0 && v_skipSpecular < 0.5)
  // {
  //   // specular

  //   vec3 reflectDir = reflect(-lightDir, normal);
  //   vec3 viewDir = normalize(u_lightPos - v_worldSpacePosition);

  //   float specAngle = max(dot(reflectDir, viewDir), 0.0);
  //   specularCoef = pow(specAngle, 32.0);
  // }

  vec3 diffuseColor = currentColor.rgb * (k_ambiantCoef + diffuseCoef);
  vec3 specularColor = k_specColor * specularCoef * currentColor.a;

  return diffuseColor + specularColor;
}

//
//
//

void main(void)
{
  o_color = vec4(_getLightColor(v_color), 1.0);
}
`.trim();

// src/local-framework/graphics/renderers/geometry-renderer/GeometryRenderer.ts
var k_bufferSize = 14336;

class GeometryRenderer {
  _shader;
  _geometry;
  _buffer = new Float32Array(k_bufferSize);
  _currentSize = 0;
  constructor() {
    this._shader = new ShaderProgram("GeometryRenderer", {
      vertexSrc: geometry_renderer_glsl_default,
      fragmentSrc: geometry_renderer_glsl_default2,
      attributes: [
        "a_vertex_position",
        "a_vertex_normal",
        "a_offset_center",
        "a_offset_orientation",
        "a_offset_color",
        "a_offset_scale"
      ],
      uniforms: ["u_composedMatrix", "u_lightPos"]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangles").addVbo().addVboAttribute("a_vertex_position", "vec3f").addVboAttribute("a_vertex_normal", "vec3f").addVbo().setVboAsStreaming().setVboAsInstanced().addVboAttribute("a_offset_center", "vec3f").addVboAttribute("a_offset_orientation", "vec4f").addVboAttribute("a_offset_color", "vec3f").addVboAttribute("a_offset_scale", "vec3f");
    this._geometry = new exports_GeometryWrapper.Geometry(this._shader, geoBuilder.getDef());
    this._geometry.setFloatBufferSize(1, k_bufferSize);
  }
  setGeometryVertices(vertices) {
    const buf = new Float32Array([
      ...vertices.map((val) => [...val.pos, ...val.normal]).flat()
    ]);
    this._geometry.allocateBuffer(0, buf, buf.length);
    this._geometry.setPrimitiveCount(buf.length / 6);
  }
  push(inPointA, inQuat, inColor, inScale) {
    if (this._currentSize + 13 >= this._buffer.length) {
      if (this._shader.isBound()) {
        this._flush();
      } else {
        return;
      }
    }
    this._buffer[this._currentSize++] = inPointA[0];
    this._buffer[this._currentSize++] = inPointA[1];
    this._buffer[this._currentSize++] = inPointA[2];
    this._buffer[this._currentSize++] = inQuat[0];
    this._buffer[this._currentSize++] = inQuat[1];
    this._buffer[this._currentSize++] = inQuat[2];
    this._buffer[this._currentSize++] = inQuat[3];
    this._buffer[this._currentSize++] = inColor[0];
    this._buffer[this._currentSize++] = inColor[1];
    this._buffer[this._currentSize++] = inColor[2];
    this._buffer[this._currentSize++] = inScale[0];
    this._buffer[this._currentSize++] = inScale[1];
    this._buffer[this._currentSize++] = inScale[2];
  }
  flush(inCamera) {
    if (!this.canRender()) {
      return;
    }
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inCamera.getComposedMatrix());
      const eyePos = inCamera.getEye();
      bound.setFloat3Uniform("u_lightPos", eyePos[0], eyePos[1], eyePos[2]);
      this._flush();
    });
  }
  safeRender(inCamera, inCallback) {
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inCamera.getComposedMatrix());
      const eyePos = inCamera.getEye();
      bound.setFloat3Uniform("u_lightPos", eyePos[0], eyePos[1], eyePos[2]);
      inCallback();
      this._flush();
    });
  }
  _flush() {
    this._geometry.updateBuffer(1, this._buffer, this._currentSize, 0);
    this._geometry.setInstancedCount(this._currentSize / 13);
    this._geometry.render();
    this.clear();
  }
  canRender() {
    return this._currentSize > 0;
  }
  clear() {
    this._currentSize = 0;
  }
}
// src/local-framework/graphics/renderers/geometry-renderer-flat/shaders/geometry-renderer-flat.glsl.vert
var geometry_renderer_flat_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec3 a_vertex_position;

in vec3 a_offset_center;
in vec4 a_offset_orientation;
in vec3 a_offset_color;
in vec3 a_offset_scale;

flat out vec4 v_color;

vec3 apply_quat_to_vec3(vec3 position, vec4 q)
{
  vec3 v = position.xyz;
  return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
}

void main(void)
{
	vec3 worldSpacePosition = a_offset_center + apply_quat_to_vec3(a_vertex_position * a_offset_scale, a_offset_orientation);

  gl_Position = u_composedMatrix * vec4(worldSpacePosition, 1.0);

  v_color = vec4(a_offset_color, 1.0);
}
`.trim();

// src/local-framework/graphics/renderers/geometry-renderer-flat/shaders/geometry-renderer-flat.glsl.frag
var geometry_renderer_flat_glsl_default2 = `
#version 300 es

precision lowp float;

flat in vec4 v_color;

out vec4 o_color;

void main(void)
{
  o_color = vec4(v_color.rbg, 1.0);
}
`.trim();

// src/local-framework/graphics/renderers/geometry-renderer-flat/GeometryRendererFlat.ts
var k_bufferSize2 = 14336;

class GeometryRendererFlat {
  _shader;
  _geometry;
  _buffer = new Float32Array(k_bufferSize2);
  _currentSize = 0;
  constructor() {
    this._shader = new ShaderProgram("GeometryRendererFlat", {
      vertexSrc: geometry_renderer_flat_glsl_default,
      fragmentSrc: geometry_renderer_flat_glsl_default2,
      attributes: [
        "a_vertex_position",
        "a_offset_center",
        "a_offset_orientation",
        "a_offset_color",
        "a_offset_scale"
      ],
      uniforms: [
        "u_composedMatrix"
      ]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangles").addVbo().addVboAttribute("a_vertex_position", "vec3f").addVbo().setVboAsStreaming().setVboAsInstanced().addVboAttribute("a_offset_center", "vec3f").addVboAttribute("a_offset_orientation", "vec4f").addVboAttribute("a_offset_color", "vec3f").addVboAttribute("a_offset_scale", "vec3f");
    this._geometry = new exports_GeometryWrapper.Geometry(this._shader, geoBuilder.getDef());
    this._geometry.setFloatBufferSize(1, k_bufferSize2);
  }
  setGeometryVertices(vertices) {
    const buf = new Float32Array([
      ...vertices.map((val) => [...val.pos]).flat()
    ]);
    this._geometry.allocateBuffer(0, buf, buf.length);
    this._geometry.setPrimitiveCount(buf.length / 3);
  }
  push(inPointA, inQuat, inColor, inScale) {
    if (this._currentSize + 13 >= this._buffer.length) {
      if (this._shader.isBound()) {
        this._flush();
      } else {
        return;
      }
    }
    this._buffer[this._currentSize++] = inPointA[0];
    this._buffer[this._currentSize++] = inPointA[1];
    this._buffer[this._currentSize++] = inPointA[2];
    this._buffer[this._currentSize++] = inQuat[0];
    this._buffer[this._currentSize++] = inQuat[1];
    this._buffer[this._currentSize++] = inQuat[2];
    this._buffer[this._currentSize++] = inQuat[3];
    this._buffer[this._currentSize++] = inColor[0];
    this._buffer[this._currentSize++] = inColor[1];
    this._buffer[this._currentSize++] = inColor[2];
    this._buffer[this._currentSize++] = inScale[0];
    this._buffer[this._currentSize++] = inScale[1];
    this._buffer[this._currentSize++] = inScale[2];
  }
  flush(inCamera) {
    if (!this.canRender()) {
      return;
    }
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inCamera.getComposedMatrix());
      this._flush();
    });
  }
  safeRender(inCamera, inCallback) {
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inCamera.getComposedMatrix());
      inCallback();
      this._flush();
    });
  }
  _flush() {
    this._geometry.updateBuffer(1, this._buffer, this._currentSize, 0);
    this._geometry.setInstancedCount(this._currentSize / 13);
    this._geometry.render();
    this.clear();
  }
  canRender() {
    return this._currentSize > 0;
  }
  clear() {
    this._currentSize = 0;
  }
}
// src/local-framework/graphics/renderers/multi-buffers-rendering/internals/SceneCapturer.ts
class SceneCapturer {
  _width = 0;
  _height = 0;
  _frameBuffer = new FrameBuffer;
  _renderBuffer = new RenderBuffer;
  _colorTextures = [];
  _currentIndex = 0;
  constructor(width, height) {
    this._colorTextures.push(new Texture);
    this._colorTextures.push(new Texture);
    this._colorTextures.forEach((texture) => texture.initialize());
    this.resize(width, height);
  }
  resize(width, height) {
    this._width = width;
    this._height = height;
    this._renderBuffer.bind((boundBuffer) => {
      boundBuffer.setSize("depth32f", this._width, this._height);
    });
    this._colorTextures.forEach((texture) => {
      texture.bind((boundTexture) => {
        boundTexture.allocate(this._width, this._height);
      });
    });
    this._frameBuffer.bind((boundFrameBuffer) => {
      this._renderBuffer.bind((boundBuffer) => {
        boundFrameBuffer.attachRenderBuffer(boundBuffer);
      });
    });
  }
  captureScene(renderCallback) {
    this._frameBuffer.bind((boundFrameBuffer) => {
      this._colorTextures[this._currentIndex].bind((boundTexture) => {
        boundFrameBuffer.attachTexture(boundTexture);
      });
      const gl = WebGLContext.getContext();
      gl.viewport(0, 0, this._width, this._height);
      gl.clearColor(0, 0, 0, 0);
      renderCallback();
    });
    this._currentIndex = (this._currentIndex + 1) % this._colorTextures.length;
  }
  get colorTexture() {
    return this._colorTextures[this._currentIndex];
  }
}

// src/local-framework/graphics/renderers/multi-buffers-rendering/internals/shaders/hud-texture-renderer.glsl.vert
var hud_texture_renderer_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec3  a_vertex_position;
in vec2  a_vertex_texCoord;

out vec2 v_texCoord;

void main(void)
{
  v_texCoord = a_vertex_texCoord;
  gl_Position = u_composedMatrix * vec4(a_vertex_position, 1.0);
}

`.trim();

// src/local-framework/graphics/renderers/multi-buffers-rendering/internals/shaders/hud-texture-renderer.glsl.frag
var hud_texture_renderer_glsl_default2 = `
#version 300 es

precision highp float;

uniform sampler2D u_texture;

in vec2 v_texCoord;

out vec4 o_color;

void main(void)
{
  o_color = texture(u_texture, v_texCoord);
}
`.trim();

// src/local-framework/graphics/renderers/multi-buffers-rendering/internals/RenderHudTexture.ts
class RenderHudTexture {
  _width = 0;
  _height = 0;
  _shader;
  _geometry;
  constructor(width, height) {
    this._shader = new ShaderProgram("RenderHudTexture", {
      vertexSrc: hud_texture_renderer_glsl_default,
      fragmentSrc: hud_texture_renderer_glsl_default2,
      attributes: ["a_vertex_position", "a_vertex_texCoord"],
      uniforms: ["u_composedMatrix", "u_texture"]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangleStrip").addVbo().addVboAttribute("a_vertex_position", "vec3f").addVboAttribute("a_vertex_texCoord", "vec2f");
    this._geometry = new exports_GeometryWrapper.Geometry(this._shader, geoBuilder.getDef());
    this.resize(width, height);
  }
  resize(width, height) {
    this._width = width;
    this._height = height;
    const tmpVertices = [
      { pos: [this._width * 0, this._height * 0, -1], tex: [0, 0] },
      { pos: [this._width * 1, this._height * 0, -1], tex: [1, 0] },
      { pos: [this._width * 0, this._height * 1, -1], tex: [0, 1] },
      { pos: [this._width * 1, this._height * 1, -1], tex: [1, 1] }
    ];
    const vertArr = tmpVertices.map((vertex) => {
      return [
        vertex.pos[0],
        vertex.pos[1],
        vertex.pos[2],
        vertex.tex[0],
        vertex.tex[1]
      ];
    }).flat();
    this._geometry.allocateBuffer(0, vertArr, vertArr.length);
    this._geometry.setPrimitiveCount(vertArr.length / 5);
  }
  flush(composedMatrix, cubeMap) {
    this._shader.bind((boundShader) => {
      boundShader.setMatrix4Uniform("u_composedMatrix", composedMatrix);
      boundShader.setTextureUniform("u_texture", cubeMap, 0);
      this._geometry.render();
    });
  }
}

// src/local-framework/graphics/renderers/multi-buffers-rendering/MultiBuffersRendering.ts
class MultiBuffersRendering {
  _sceneCapturer;
  _renderHudTexture;
  constructor(width, height) {
    this._sceneCapturer = new SceneCapturer(width, height);
    this._renderHudTexture = new RenderHudTexture(width, height);
  }
  resize(width, height) {
    this._sceneCapturer.resize(width, height);
    this._renderHudTexture.resize(width, height);
  }
  captureScene(renderCallback) {
    this._sceneCapturer.captureScene(renderCallback);
  }
  renderHud(composedMat4) {
    this._renderHudTexture.flush(composedMat4, this._sceneCapturer.colorTexture);
  }
}
// src/local-framework/graphics/renderers/stack-renderers/shaders/stack-renderer.glsl.vert
var stack_renderer_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec3 a_vertex_position;
in vec4 a_vertex_color;

flat out vec4 v_color;

void main(void)
{
  gl_Position = u_composedMatrix * vec4(a_vertex_position, 1.0);

  v_color = a_vertex_color;
}
`.trim();

// src/local-framework/graphics/renderers/stack-renderers/shaders/stack-renderer.glsl.frag
var stack_renderer_glsl_default2 = `
#version 300 es

precision lowp float;

flat in vec4 v_color;

out vec4 o_color;

void main(void)
{
  o_color = v_color;
}
`.trim();

// src/local-framework/graphics/renderers/stack-renderers/internals/WireFramesStackRenderer.ts
var k_bufferSize3 = 14336;

class WireFramesStackRenderer {
  _shader;
  _geometry;
  _buffer = new Float32Array(k_bufferSize3);
  _currentSize = 0;
  constructor(inShader, inGeometryDef) {
    this._shader = inShader;
    const geometryDef = {
      ...inGeometryDef,
      primitiveType: exports_GeometryWrapper.PrimitiveType.lines
    };
    this._geometry = new exports_GeometryWrapper.Geometry(inShader, geometryDef);
  }
  pushLine(inPointA, inPointB, inColor) {
    if (this._currentSize + 14 >= this._buffer.length) {
      if (this._shader.isBound()) {
        this.flush();
      } else {
        return;
      }
    }
    const alphaValue = inColor[3] ?? 1;
    this._buffer[this._currentSize + 0] = inPointA[0];
    this._buffer[this._currentSize + 1] = inPointA[1];
    this._buffer[this._currentSize + 2] = inPointA[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
    this._buffer[this._currentSize + 0] = inPointB[0];
    this._buffer[this._currentSize + 1] = inPointB[1];
    this._buffer[this._currentSize + 2] = inPointB[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
  }
  canRender() {
    return this._currentSize > 0;
  }
  flush() {
    if (!this.canRender())
      return;
    this._geometry.allocateBuffer(0, this._buffer, this._currentSize);
    this._geometry.setPrimitiveCount(this._currentSize / 7);
    this._geometry.render();
    this.clear();
  }
  clear() {
    this._currentSize = 0;
  }
}

// src/local-framework/graphics/renderers/stack-renderers/internals/TrianglesStackRenderer.ts
var k_bufferSize4 = 7168;

class TrianglesStackRenderer {
  _shader;
  _geometry;
  _buffer = new Float32Array(k_bufferSize4);
  _currentSize = 0;
  constructor(inShader, inGeometryDef) {
    this._shader = inShader;
    const geometryDef = {
      ...inGeometryDef,
      primitiveType: exports_GeometryWrapper.PrimitiveType.triangles
    };
    this._geometry = new exports_GeometryWrapper.Geometry(inShader, geometryDef);
  }
  pushTriangle(inPointA, inPointB, inPointC, inColor) {
    if (this._currentSize + 42 >= this._buffer.length) {
      if (this._shader.isBound()) {
        this.flush();
      } else {
        return;
      }
    }
    const alphaValue = inColor[3] ?? 1;
    this._buffer[this._currentSize + 0] = inPointA[0];
    this._buffer[this._currentSize + 1] = inPointA[1];
    this._buffer[this._currentSize + 2] = inPointA[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
    this._buffer[this._currentSize + 0] = inPointB[0];
    this._buffer[this._currentSize + 1] = inPointB[1];
    this._buffer[this._currentSize + 2] = inPointB[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
    this._buffer[this._currentSize + 0] = inPointC[0];
    this._buffer[this._currentSize + 1] = inPointC[1];
    this._buffer[this._currentSize + 2] = inPointC[2];
    this._buffer[this._currentSize + 3] = inColor[0];
    this._buffer[this._currentSize + 4] = inColor[1];
    this._buffer[this._currentSize + 5] = inColor[2];
    this._buffer[this._currentSize + 6] = alphaValue;
    this._currentSize += 7;
  }
  pushLine(inPointA, inPointB, thickness, inColor) {
    if (this._currentSize + 42 >= this._buffer.length) {
      return;
    }
    const diffX = inPointB[0] - inPointA[0];
    const diffY = inPointB[1] - inPointA[1];
    const angle3 = Math.atan2(diffY, diffX) + Math.PI * 0.5;
    const stepX = Math.cos(angle3) * thickness * 0.5;
    const stepY = Math.sin(angle3) * thickness * 0.5;
    this.pushTriangle([inPointA[0] - stepX, inPointA[1] - stepY, inPointA[2]], [inPointB[0] - stepX, inPointB[1] - stepY, inPointB[2]], [inPointB[0] + stepX, inPointB[1] + stepY, inPointB[2]], inColor);
    this.pushTriangle([inPointA[0] - stepX, inPointA[1] - stepY, inPointA[2]], [inPointB[0] + stepX, inPointB[1] + stepY, inPointB[2]], [inPointA[0] + stepX, inPointA[1] + stepY, inPointA[2]], inColor);
  }
  pushRotatedLine(center, angle3, length5, thickness, color) {
    this.pushLine([
      center[0] - length5 * Math.cos(angle3),
      center[1] - length5 * Math.sin(angle3),
      center[2]
    ], [
      center[0] + length5 * Math.cos(angle3),
      center[1] + length5 * Math.sin(angle3),
      center[2]
    ], thickness, color);
  }
  pushOriginBoundRectangle(inOrigin, inSize, inColor) {
    if (this._currentSize + 42 >= this._buffer.length) {
      return;
    }
    const maxCoord = [
      inOrigin[0] + inSize[0],
      inOrigin[1] + inSize[1]
    ];
    this.pushTriangle([inOrigin[0], inOrigin[1], inOrigin[2]], [maxCoord[0], maxCoord[1], inOrigin[2]], [inOrigin[0], maxCoord[1], inOrigin[2]], inColor);
    this.pushTriangle([inOrigin[0], inOrigin[1], inOrigin[2]], [maxCoord[0], inOrigin[1], inOrigin[2]], [maxCoord[0], maxCoord[1], inOrigin[2]], inColor);
  }
  pushCenteredRectangle(inCenter, inSize, inColor) {
    const origin = [
      inCenter[0] - inSize[0] * 0.5,
      inCenter[1] - inSize[1] * 0.5,
      inCenter[2]
    ];
    this.pushOriginBoundRectangle(origin, inSize, inColor);
  }
  canRender() {
    return this._currentSize > 0;
  }
  flush() {
    if (!this.canRender()) {
      return;
    }
    this._geometry.allocateBuffer(0, this._buffer, this._currentSize);
    this._geometry.setPrimitiveCount(this._currentSize / 7);
    this._geometry.render();
    this.clear();
  }
  clear() {
    this._currentSize = 0;
  }
}

// src/local-framework/graphics/renderers/stack-renderers/StackRenderers.ts
class StackRenderers {
  _shader;
  _wireFramesStackRenderer;
  _trianglesStackRenderer;
  constructor() {
    this._shader = new ShaderProgram("StackRenderers", {
      vertexSrc: stack_renderer_glsl_default,
      fragmentSrc: stack_renderer_glsl_default2,
      attributes: ["a_vertex_position", "a_vertex_color"],
      uniforms: ["u_composedMatrix"]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("lines").addVbo().setVboAsDynamic().addVboAttribute("a_vertex_position", "vec3f").addVboAttribute("a_vertex_color", "vec4f");
    this._wireFramesStackRenderer = new WireFramesStackRenderer(this._shader, geoBuilder.getDef());
    this._trianglesStackRenderer = new TrianglesStackRenderer(this._shader, geoBuilder.getDef());
  }
  pushLine(inPointA, inPointB, inColor) {
    this._wireFramesStackRenderer.pushLine(inPointA, inPointB, inColor);
  }
  pushCross(inCenter, inSize, inColor) {
    const crossVertices = [
      [inCenter[0] - inSize, inCenter[1], inCenter[2]],
      [inCenter[0] + inSize, inCenter[1], inCenter[2]],
      [inCenter[0], inCenter[1] - inSize, inCenter[2]],
      [inCenter[0], inCenter[1] + inSize, inCenter[2]],
      [inCenter[0], inCenter[1], inCenter[2] - inSize],
      [inCenter[0], inCenter[1], inCenter[2] + inSize]
    ];
    const crossIndices = [0, 1, 2, 3, 4, 5];
    for (let ii = 0;ii < crossIndices.length; ii += 2) {
      const vertexA = crossVertices[ii + 0];
      const vertexB = crossVertices[ii + 1];
      this._wireFramesStackRenderer.pushLine(vertexA, vertexB, inColor);
    }
  }
  pushThickLine(inPointA, inPointB, thickness, inColor) {
    this._trianglesStackRenderer.pushLine(inPointA, inPointB, thickness, inColor);
  }
  pushRotatedLine(center, angle3, length5, thickness, color) {
    this._trianglesStackRenderer.pushRotatedLine(center, angle3, length5, thickness, color);
  }
  pushOriginBoundRectangle(inOrigin, inSize, inColor) {
    this._trianglesStackRenderer.pushOriginBoundRectangle(inOrigin, inSize, inColor);
  }
  pushCenteredRectangle(inCenter, inSize, inColor) {
    this._trianglesStackRenderer.pushCenteredRectangle(inCenter, inSize, inColor);
  }
  pushTriangle(inPosA, inPosB, inPosC, inColor) {
    this._trianglesStackRenderer.pushTriangle(inPosA, inPosB, inPosC, inColor);
  }
  pushQuad(inPos, inSize, inColor) {
    this.pushTriangle([inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 0, inPos[2]], [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 1, inPos[2]], [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 0, inPos[2]], inColor);
    this.pushTriangle([inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 0, inPos[2]], [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 1, inPos[2]], [inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 1, inPos[2]], inColor);
  }
  flush(inComposedMatrix) {
    if (!this._wireFramesStackRenderer.canRender() && !this._trianglesStackRenderer.canRender()) {
      return;
    }
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inComposedMatrix);
      this._wireFramesStackRenderer.flush();
      this._trianglesStackRenderer.flush();
    });
  }
  safeRender(inComposedMatrix, inCallback) {
    this._shader.bind((bound) => {
      bound.setMatrix4Uniform("u_composedMatrix", inComposedMatrix);
      inCallback();
      this._wireFramesStackRenderer.flush();
      this._trianglesStackRenderer.flush();
    });
  }
  clear() {
    this._wireFramesStackRenderer.clear();
    this._trianglesStackRenderer.clear();
  }
}
// src/local-framework/graphics/renderers/text-renderer/shaders/text-renderer.glsl.vert
var text_renderer_glsl_default = `
#version 300 es

precision highp float;

uniform mat4 u_composedMatrix;

in vec2 a_vertex_position;
in vec2 a_vertex_texCoord;
in vec3 a_offset_position;
in vec2 a_offset_texCoord;
in vec3 a_offset_color;
in float a_offset_scale;

out vec2 v_texCoord;
flat out vec3 v_color;

void main(void)
{
  vec3 position = vec3(a_vertex_position, 0.0) * a_offset_scale + a_offset_position;

  gl_Position = u_composedMatrix * vec4(position, 1.0);

  v_texCoord = a_vertex_texCoord + a_offset_texCoord;
  v_color = a_offset_color;
}
`.trim();

// src/local-framework/graphics/renderers/text-renderer/shaders/text-renderer.glsl.frag
var text_renderer_glsl_default2 = `
#version 300 es

precision mediump float;

uniform sampler2D u_texture;

in vec2 v_texCoord;
flat in vec3 v_color;

out vec4 o_color;

void main(void)
{
  vec4 textureColor = texture(u_texture, v_texCoord);
  if (textureColor.a < 0.5)
  {
    discard;
  }
  else
  {
    o_color = vec4(v_color, textureColor.a);
  }
}
`.trim();

// src/local-framework/graphics/renderers/text-renderer/internals/asciiTextureHex.ts
var asciiTextureHex = "7e7e28fd03fd07fe04fe0aff02ff7e4dfd0cfd03fd07fe04fe0aff02ff1afc0dfd10fc08fc0ffe55ff15fb0bfd03fd07fe04fe08f707fd04ff07fe02fe0cfd0ffd0cfd0aff03fe03ff0afe44fe15fb0bfd03fd04f204f607fd03fe07fe02fe0cfd0efd0efd0aff02fe02ff0bfe43fd15fb0cfe03fe05f204fe01ff02ff0afd02fd07fe02fe0bfd0efd10fd0afa0cfe42fd16fb1bfe04fe07fe01ff02ff0efd09fc1cfd12fd09fa0cfe41fd17fb1bfe04fe07f70bfd0afc04ff17fd12fd06f405f616f61cfd19fd1cfe04fe08f709fd0bfb02fe17fd12fd06f405f616f61bfd1afd1cfe04fe0aff02ff01fe08fd0bfe02fa17fd12fd09fa0cfe3efd37f207ff02ff01fe07fd02fd07fe03fc19fd10fd0afa0cfe3dfd38f204f607fe03fd07fe03fd1bfd0efd0aff02fe02ff0bfe0cfd1dfd0dfd1dfd1cfe04fe07f708ff04fd07fe02fb1bfd0cfd0aff03fe03ff0afe0cfd1dfd0cfd1efd1cfe04fe0aff02ff1afb02fe1bfc08fc0ffe1cfd1dfd0bfd1ffd1cfe04fe0aff02ff7afd7e7e7e7e7e7e0efd17fd10fc0af80bfe0bf909f90dfd08f609fb08f506f808f82cfd19fd0df807fd04fd0afe0afd03fd07fd03fd0bfc08fd0ffd0bfd05fd05fd04fd06fd04fd2afd1bfd0bfc02fc06fd03fc09fd0afd04fd06fd04fd09fb08fd0efd0cfd05fd05fd04fd06fd04fd09fd0cfd0efd1dfd0afe05fd06fd02fb06fa11fd0dfd08fe01fd08fd0dfd0dfd05fd05fd04fd06fd04fd09fd0cfd0dfd0af409fd10fd06fd02fb06fa10fd0dfd08fe02fd08fd0dfd15fd05fb02fd06fd04fd09fd0cfd0cfd0bf40afd0efd07fd01fe01fd09fd0ffd0bfb08fe03fd08f808f70efd08fa08f626fd23fd0cfd08fd01fe01fd09fd0efd0cfb08f606f707f60cfd09fa09f726fd23fd0bfd09fb02fd09fd0dfd10fd07f60cfc06fd04fd0bfd08fd02fb0dfd09fd0cfd0cfd0bf40afd0cfd09fb02fd09fd0cfd12fd0bfd0ffd06fd04fd0afd09fd04fd0dfd09fd0cfd0dfd0af409fd19fc03fd09fd0bfd03fd06fd04fd0bfd08fd04fd06fd04fd09fd0afd04fd0cfd0afd0cfd0efd1dfd1afd04fd09fd0afd04fd06fd03fd0cfd08fd03fd07fd04fd09fd0afd04fd0bfd19fd10fd1bfd0ffd0af807f707f607f90bf907f909f80afd0bf809fb2efd19fd10fd7e51fd17fd11fd7e7e7e7e13f87e78fd05fd08fc09f709f907f808f606f608f907fd03fd07f90df905fc03fd06fb0bfd05fd05fd05fd08fb08fd05fd07fa09fd03fd07fd03fd07fd02fd08fd04fe07fd04fe07fd03fd06fd03fd09fd11fd08fd03fd07fd0cfc03fc05fd05fd07fd01fd07fd05fd06fd02fd08fd03fd06fd04fd07fd03fd07fd05ff07fd05ff06fd04fd06fd03fd09fd11fd08fd02fd08fd0cfb01fb05fc04fd06fd03fd06fd05fd05fd04fd07fd03fd06fd0efd03fd07fd0dfd0cfd04fd06fd03fd09fd11fd08fd01fd09fd0cf505fb03fd05fd05fd05fd02fa05fd04fd07fd03fd06fd0efd03fd07fd03fe08fd03fe07fd0dfd03fd09fd11fd08fa0afd0cf505fa02fd05fd05fd05fd02fa05fd04fd07f807fd0efd03fd07f808f807fd0df709fd11fd08fb0bfd0cfd01fd01fd05fd01fd01fd05fd05fd05fd02fa05fd04fd07f807fd0efd03fd07f808f807fd0df709fd11fd08fb0bfd0cfd02ff02fd05fd02fa05fd05fd05fd02fa05f607fd03fd06fd0efd03fd07fd03fe08fd03fe07fd02fb06fd03fd09fd0bfd03fd08fa0afd0cfd05fd05fd03fb05fd05fd05fd0dfd04fd07fd03fd06fd0efd03fd07fd0dfd0cfd04fd06fd03fd09fd0bfd03fd08fd01fd09fd05ff06fd05fd05fd04fc05fd05fd05fd0dfd04fd07fd03fd06fd04fd07fd03fd07fd05ff07fd0cfd04fd06fd03fd09fd0bfd03fd08fd02fd08fd04fe06fd05fd05fd05fd06fd03fd06fd0dfd04fd07fd03fd07fd03fd07fd02fd08fd04fe07fd0dfd03fd06fd03fd09fd0bfd03fd08fd03fd07fd03fd06fd05fd05fd05fd07fd01fd07fd0dfd04fd06f709f907f808f606fb0df806fd03fd07f90af908fc03fd06f606fd05fd05fd05fd08fb0af87e7e7e7e7e7e7e68fe1af70afb08f708f807f505fd03fd07fd03fd07fd05fd05fd03fd07fd03fd07f608f907ff11f90afc1afd03fd07fc01fc07fd03fd06fd04fd06fe02fd02fe05fd03fd07fd03fd07fd05fd05fd03fd07fd03fd07fd04fd08fd0bfe14fd09fa19fd03fd07fd03fd07fd03fd06fd04fd06ff03fd03ff05fd03fd07fd03fd07fd05fd05fd03fd07fd03fd07fe05fd08fd0bfd13fd08fd02fd18fd03fd06fd05fd06fd03fd06fd04fd0afd09fd03fd07fd03fd07fd05fd06fd01fd08fd03fd07ff05fd09fd0cfd12fd07fd04fd17fd03fd06fd05fd06fd03fd06fd11fd09fd03fd07fd03fd07fd05fd07fb09fd03fd0cfd0afd0dfd11fd28f807fd05fd06f808f90cfd09fd03fd07fd03fd07fd02ff02fd08fd0bfd01fd0cfd0bfd0efd10fd28f807fd05fd06f809f90bfd09fd03fd07fd03fd07fd02ff02fd08fd0cfb0cfd0cfd0ffd0ffd28fd0cfd03fb06fd02fd0efd0afd09fd03fd07fd03fd07fd02ff02fd07fb0cfd0cfd0dfd10fd0efd28fd0cfd02fa06fd03fd06fd04fd0afd09fd03fd07fd03fd08f707fd01fd0bfd0bfd05ff08fd11fd0dfd28fd0df707fd03fd06fd04fd0afd09fd03fd08fd01fd09fc01fc06fd03fd0afd0afd05fe08fd12fd0cfd28fd0df707fd03fd06fd04fd0afd09fd03fd09fb0bfd01fd07fd03fd0afd0afd04fd08fd13fd0bfd27fb12fd06fc03fd07f809f908f90bfd0cfd01fd07fd03fd08f908f608f910fd06f93cfa7e54f07e72f07e7e7e7e0bfd1dfc21fb19fb18fc10fd0ffd07fc0dfa39fd1efd22fd19fd01fd18fd10fd0ffd08fd10fd3bfd1cfd22fd19fd01fd18fd10fd0ffd08fd10fd3bfd1cfd22fd19fd1cfd2dfd10fd4af909f808f909f808f90afd0cfb02fe07fd01fc08fa0cfa08fd03fd0afd09f606f809f91efd08fd03fd06fd03fd07fd03fd07fd03fd07f808fd03fd08fc02fd0afd0ffd08fd02fd0bfd09fd02ff02fd05fd03fd07fd03fd1dfd08fd03fd06fd03fd07fd03fd07fd03fd07f808fd03fd08fc02fd0afd0ffd08fd01fd0cfd09fd02ff02fd05fd03fd07fd03fd18f808fd03fd06fd0dfd03fd07f709fd0bfd03fd08fd03fd0afd0ffd08fa0dfd09fd02ff02fd05fd03fd07fd03fd17fd03fd08fd03fd06fd0dfd03fd07fd0ffd0bfd03fd08fd03fd0afd0ffd08fd01fd0cfd09fd02ff02fd05fd03fd07fd03fd17fd03fd08fd03fd06fd03fd07fd03fd07fd03fd09fd0cf808fd03fd0afd0ffd08fd02fd0bfd09fd02ff02fd05fd03fd07fd03fd17fd03fd08fd03fd06fd03fd07fd03fd07fd03fd09fd0df908fd03fd0afd0ffd08fd03fd0afd09fd02ff02fd05fd03fd07fd03fd18fb02fe06fe02fb08f909fb02fe07f908f90ffd07fc03fd07f706fd03fd07fc03fd07f706fd05fd05fd03fd08f978fd03fd27fd03fd7e4af92afa7e7e7e7e7e7e18fa09fc09fa1efe4eff6efd0dfc0dfd1cfc4cfe6efd0dfc0dfd1bfa4afd6efd0dfc0dfd1afd02fd07fe02fb07fb02fe07fc02fd08f908f707fd03fd07fd03fd07fd05fd05fd02fd09fd03fd06f80afd0efc0efd08fb03fd05fd04fd07fd03fd05fd03fd09f706fd04fe09fd0bfd03fd07fd03fd07fd05fd05fd02fd09fd03fd06fe03fd08fd24fd05fd01fd02fd05fe06fe07fd03fd05fd03fd09fc02fd06fd04fe09fd0bfd03fd07fd03fd07fd05fd06fa0afd03fd06ff03fd09fd24fd05fd02fd01fd05fe06fe07fd03fd05fd03fd09fd0dfb0cfd0bfd03fd07fd03fd07fd02ff02fd07fc0bfd03fd09fd0cfd0efc0efd07fd03fb06fe06fe07fd03fd05fd03fd09fd0ffb0afd0bfd03fd07fd03fd07fd02ff02fd07fc0bfd03fd08fd0efd0dfc0dfd19fe06fe07fd03fd05fd03fd09fd0cfe04fd09fd01fd07fd03fd08fd01fd09fc01fc07fa0bf908fd03ff0bfd0dfc0dfd19fe06fe07f807f809fd0cfe04fd09fd01fd07fd03fd09fb0bfd01fd07fd02fd0bfb08fd03fe0bfd0dfc0dfd19f607fd11fd08fb0cf90bfb09fb02fe09fd0cfd01fd07fd02fd0dfd08f80cfa09fc09fa1af607fd11fd7cfd69fb0ffb77fa";

// src/local-framework/graphics/renderers/text-renderer/TextRenderer.ts
var k_gridSize = [16, 6];
var k_texCoord = [1 / k_gridSize[0], 1 / k_gridSize[1]];
var k_bufferSize5 = 36864;

class TextRenderer {
  _shader;
  _geometry;
  _texture = new Texture;
  _texCoordMap;
  _buffer = new Float32Array(k_bufferSize5);
  _currentSize = 0;
  _textScale = 14;
  _textColor = [1, 1, 1];
  _horizontalTextAlign = "left";
  _verticalTextAlign = "top";
  constructor() {
    this._shader = new ShaderProgram("TextRenderer", {
      vertexSrc: text_renderer_glsl_default,
      fragmentSrc: text_renderer_glsl_default2,
      attributes: [
        "a_vertex_position",
        "a_vertex_texCoord",
        "a_offset_position",
        "a_offset_texCoord",
        "a_offset_color",
        "a_offset_scale"
      ],
      uniforms: ["u_composedMatrix", "u_texture"]
    });
    const geoBuilder = new exports_GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangles").addVbo().addVboAttribute("a_vertex_position", "vec2f").addVboAttribute("a_vertex_texCoord", "vec2f").setStride(16).addVbo().setVboAsDynamic().setVboAsInstanced().addVboAttribute("a_offset_position", "vec3f").addVboAttribute("a_offset_texCoord", "vec2f").addVboAttribute("a_offset_color", "vec3f").addVboAttribute("a_offset_scale", "float").setStride(36);
    this._geometry = new exports_GeometryWrapper.Geometry(this._shader, geoBuilder.getDef());
    const vertices = [
      {
        position: [0.5, -0.5],
        texCoord: [k_texCoord[0] * 1, k_texCoord[1] * 1]
      },
      {
        position: [-0.5, -0.5],
        texCoord: [k_texCoord[0] * 0, k_texCoord[1] * 1]
      },
      {
        position: [0.5, 0.5],
        texCoord: [k_texCoord[0] * 1, k_texCoord[1] * 0]
      },
      {
        position: [-0.5, 0.5],
        texCoord: [k_texCoord[0] * 0, k_texCoord[1] * 0]
      }
    ];
    const indices = [1, 0, 2, 1, 2, 3];
    const letterVertices = [];
    for (const index of indices) {
      const vertex = vertices[index];
      letterVertices.push(vertex.position[0], vertex.position[1], vertex.texCoord[0], vertex.texCoord[1]);
    }
    this._geometry.allocateBuffer(0, letterVertices, letterVertices.length);
    this._geometry.setPrimitiveCount(letterVertices.length / 4);
    this._texCoordMap = new Map([
      [" ", [0 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["!", [1 * k_texCoord[0], 0 * k_texCoord[1]]],
      ['"', [2 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["#", [3 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["$", [4 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["%", [5 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["&", [6 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["'", [7 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["(", [8 * k_texCoord[0], 0 * k_texCoord[1]]],
      [")", [9 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["*", [10 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["+", [11 * k_texCoord[0], 0 * k_texCoord[1]]],
      [",", [12 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["-", [13 * k_texCoord[0], 0 * k_texCoord[1]]],
      [".", [14 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["/", [15 * k_texCoord[0], 0 * k_texCoord[1]]],
      ["0", [0 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["1", [1 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["2", [2 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["3", [3 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["4", [4 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["5", [5 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["6", [6 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["7", [7 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["8", [8 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["9", [9 * k_texCoord[0], 1 * k_texCoord[1]]],
      [":", [10 * k_texCoord[0], 1 * k_texCoord[1]]],
      [";", [11 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["<", [12 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["=", [13 * k_texCoord[0], 1 * k_texCoord[1]]],
      [">", [14 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["?", [15 * k_texCoord[0], 1 * k_texCoord[1]]],
      ["@", [0 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["A", [1 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["B", [2 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["C", [3 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["D", [4 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["E", [5 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["F", [6 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["G", [7 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["H", [8 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["I", [9 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["J", [10 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["K", [11 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["L", [12 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["M", [13 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["N", [14 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["O", [15 * k_texCoord[0], 2 * k_texCoord[1]]],
      ["P", [0 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["Q", [1 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["R", [2 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["S", [3 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["T", [4 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["U", [5 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["V", [6 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["W", [7 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["X", [8 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["Y", [9 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["Z", [10 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["[", [11 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["\\", [12 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["]", [13 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["^", [14 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["_", [15 * k_texCoord[0], 3 * k_texCoord[1]]],
      ["`", [0 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["a", [1 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["b", [2 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["c", [3 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["d", [4 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["e", [5 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["f", [6 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["g", [7 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["h", [8 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["i", [9 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["j", [10 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["k", [11 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["l", [12 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["m", [13 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["n", [14 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["o", [15 * k_texCoord[0], 4 * k_texCoord[1]]],
      ["p", [0 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["q", [1 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["r", [2 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["s", [3 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["t", [4 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["u", [5 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["v", [6 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["w", [7 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["x", [8 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["y", [9 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["z", [10 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["{", [11 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["|", [12 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["}", [13 * k_texCoord[0], 5 * k_texCoord[1]]],
      ["~", [14 * k_texCoord[0], 5 * k_texCoord[1]]]
    ]);
    const width = 256;
    const height = 96;
    const imagePixels = new Uint8Array(width * height * 4);
    {
      let index = 0;
      for (let ii = 0;ii < asciiTextureHex.length; ii += 2) {
        let currSize = parseInt(`${asciiTextureHex.substring(ii, ii + 2)}000000`, 16) >> 24;
        let currVal = 0;
        if (currSize < 0) {
          currSize = -currSize;
          currVal = 255;
        }
        for (let ii2 = 0;ii2 < currSize; ++ii2) {
          imagePixels[index * 4 + 0] = currVal;
          imagePixels[index * 4 + 1] = currVal;
          imagePixels[index * 4 + 2] = currVal;
          imagePixels[index * 4 + 3] = currVal;
          ++index;
        }
      }
    }
    this._texture.initialize();
    this._texture.bind((boundTexture) => {
      boundTexture.loadFromMemory(width, height, imagePixels);
    });
  }
  setTextAlign(inHorizontalTextAlign, inVerticalTextAlign) {
    this._horizontalTextAlign = inHorizontalTextAlign;
    this._verticalTextAlign = inVerticalTextAlign;
    return this;
  }
  setTextScale(inScale) {
    this._textScale = inScale;
    return this;
  }
  setTextColor(inRed, inGreen, inBlue) {
    this._textColor[0] = inRed;
    this._textColor[1] = inGreen;
    this._textColor[2] = inBlue;
    return this;
  }
  pushText(inMessage, inPosition) {
    if (inMessage.length === 0) {
      return this;
    }
    if (this._textScale <= 0) {
      return this;
    }
    const allLineWidth = [0];
    for (let ii = 0;ii < inMessage.length; ++ii) {
      if (inMessage[ii] == "\n") {
        allLineWidth.push(0);
      } else {
        allLineWidth[allLineWidth.length - 1] += 1;
      }
    }
    if (allLineWidth.length === 0) {
      return this;
    }
    let lineIndex = 0;
    const currPos = [0, 0];
    const hScale = this._textScale * 0.5;
    switch (this._horizontalTextAlign) {
      case "left":
        currPos[0] = inPosition[0];
        break;
      case "centered":
        currPos[0] = inPosition[0] - allLineWidth[lineIndex] * hScale + hScale;
        break;
      case "right":
        currPos[0] = inPosition[0] - allLineWidth[lineIndex] * this._textScale + this._textScale;
        break;
    }
    switch (this._verticalTextAlign) {
      case "top":
        currPos[1] = inPosition[1];
        break;
      case "centered":
        currPos[1] = inPosition[1] + allLineWidth.length * hScale - hScale;
        break;
      case "bottom":
        currPos[1] = inPosition[1] - (allLineWidth.length - 1) * this._textScale;
        break;
    }
    for (let ii = 0;ii < inMessage.length; ++ii) {
      const letter = inMessage[ii];
      if (letter == "\n") {
        lineIndex += 1;
        switch (this._horizontalTextAlign) {
          case "left":
            currPos[0] = inPosition[0];
            break;
          case "centered":
            currPos[0] = inPosition[0] - allLineWidth[lineIndex] * hScale + hScale;
            break;
          case "right":
            currPos[0] = inPosition[0] - allLineWidth[lineIndex] * this._textScale + this._textScale;
            break;
        }
        currPos[1] -= this._textScale;
      } else {
        this._pushLetter(letter, currPos);
        currPos[0] += this._textScale;
      }
    }
    return this;
  }
  _pushLetter(inCharacter, inPosition) {
    if (this._currentSize + 90 >= this._buffer.length) {
      return;
    }
    const texCoord = this._texCoordMap.get(inCharacter);
    if (!texCoord)
      throw new Error(`fail to find a letter, letter=${inCharacter}`);
    for (let yy = -1;yy <= 1; ++yy) {
      for (let xx = -1;xx <= 1; ++xx) {
        this._buffer[this._currentSize++] = inPosition[0] + 2 * xx;
        this._buffer[this._currentSize++] = inPosition[1] + 2 * yy;
        this._buffer[this._currentSize++] = -0.1;
        this._buffer[this._currentSize++] = texCoord[0];
        this._buffer[this._currentSize++] = texCoord[1];
        this._buffer[this._currentSize++] = 0;
        this._buffer[this._currentSize++] = 0;
        this._buffer[this._currentSize++] = 0;
        this._buffer[this._currentSize++] = this._textScale;
      }
    }
    this._buffer[this._currentSize++] = inPosition[0];
    this._buffer[this._currentSize++] = inPosition[1];
    this._buffer[this._currentSize++] = 0;
    this._buffer[this._currentSize++] = texCoord[0];
    this._buffer[this._currentSize++] = texCoord[1];
    this._buffer[this._currentSize++] = this._textColor[0];
    this._buffer[this._currentSize++] = this._textColor[1];
    this._buffer[this._currentSize++] = this._textColor[2];
    this._buffer[this._currentSize++] = this._textScale;
  }
  flush(composedMatrix) {
    if (this._currentSize === 0) {
      return this;
    }
    this._shader.bind((boundShader) => {
      boundShader.setMatrix4Uniform("u_composedMatrix", composedMatrix);
      boundShader.setTextureUniform("u_texture", this._texture, 0);
      this._geometry.allocateBuffer(1, this._buffer, this._currentSize);
      this._geometry.setInstancedCount(this._currentSize / 9);
      this._geometry.render();
    });
    Texture.unbind();
    this.clear();
    return this;
  }
  clear() {
    this._currentSize = 0;
    return this;
  }
}
// src/local-framework/graphics/renderers/widgets/index.ts
var exports_widgets = {};
__export(exports_widgets, {
  renderFpsMeter: () => {
    {
      return renderFpsMeter;
    }
  },
  addKeysTouchesWidgets: () => {
    {
      return addKeysTouchesWidgets;
    }
  },
  addKeyStrokesWidgets: () => {
    {
      return addKeyStrokesWidgets;
    }
  },
  addArrowStrokesWidgets: () => {
    {
      return addArrowStrokesWidgets;
    }
  }
});

// src/local-framework/graphics/renderers/widgets/renderControls.ts
var defaultColor = [0.2, 0.2, 0.2];
var activatedColor = [0.2, 0.6, 0.2];
var _renderIndicator = (currIndicator, stackRenderers, textRenderer) => {
  const { center } = currIndicator;
  stackRenderers.pushCenteredRectangle(exports_vec3.fromValues(center[0], center[1], -0.3), currIndicator.size, [0, 0, 0]);
  stackRenderers.pushCenteredRectangle(exports_vec3.fromValues(center[0], center[1], -0.2), [currIndicator.size[0] - 2, currIndicator.size[1] - 2], currIndicator.color);
  if (currIndicator.text) {
    textRenderer.setTextScale(16).setTextAlign("centered", "centered").pushText(currIndicator.text, center).setTextAlign("left", "top");
  }
  if (currIndicator.lines) {
    currIndicator.lines.forEach((currLine) => {
      stackRenderers.pushThickLine([center[0] + currLine.a[0], center[1] + currLine.a[1], 0], [center[0] + currLine.b[0], center[1] + currLine.b[1], 0], currLine.thickness, currLine.color);
    });
  }
};
var addKeyStrokesWidgets = (inPos, stackRenderers, textRenderer) => {
  _renderIndicator({
    center: [inPos[0], inPos[1]],
    size: [40, 40],
    text: "A\nQ",
    color: GlobalKeyboardManager.isPressed("A", "Q") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 45, inPos[1]],
    size: [40, 40],
    text: "S",
    color: GlobalKeyboardManager.isPressed("S") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 45, inPos[1] + 45],
    size: [40, 40],
    text: "W\nZ",
    color: GlobalKeyboardManager.isPressed("W", "Z") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 90, inPos[1]],
    size: [40, 40],
    text: "D",
    color: GlobalKeyboardManager.isPressed("D") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
};
var addArrowStrokesWidgets = (inPos, stackRenderers, textRenderer) => {
  _renderIndicator({
    center: [inPos[0], inPos[1]],
    size: [40, 40],
    lines: [
      { a: [15, 0], b: [-8, 0], thickness: 6, color: [1, 1, 1] },
      { a: [0, 10], b: [-12, -2], thickness: 6, color: [1, 1, 1] },
      { a: [0, -10], b: [-12, 2], thickness: 6, color: [1, 1, 1] }
    ],
    color: GlobalKeyboardManager.isPressed("ArrowLeft") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 45, inPos[1]],
    size: [40, 40],
    lines: [
      { a: [0, 15], b: [0, -8], thickness: 6, color: [1, 1, 1] },
      { a: [10, 0], b: [-2, -12], thickness: 6, color: [1, 1, 1] },
      { a: [-10, 0], b: [2, -12], thickness: 6, color: [1, 1, 1] }
    ],
    color: GlobalKeyboardManager.isPressed("ArrowDown") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 45, inPos[1] + 45],
    size: [40, 40],
    lines: [
      { a: [0, -15], b: [0, 8], thickness: 6, color: [1, 1, 1] },
      { a: [10, 0], b: [-2, 12], thickness: 6, color: [1, 1, 1] },
      { a: [-10, 0], b: [2, 12], thickness: 6, color: [1, 1, 1] }
    ],
    color: GlobalKeyboardManager.isPressed("ArrowUp") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
  _renderIndicator({
    center: [inPos[0] + 90, inPos[1]],
    size: [40, 40],
    lines: [
      { a: [-15, 0], b: [8, 0], thickness: 6, color: [1, 1, 1] },
      { a: [0, 10], b: [12, -2], thickness: 6, color: [1, 1, 1] },
      { a: [0, -10], b: [12, 2], thickness: 6, color: [1, 1, 1] }
    ],
    color: GlobalKeyboardManager.isPressed("ArrowRight") ? activatedColor : defaultColor
  }, stackRenderers, textRenderer);
};
var addKeysTouchesWidgets = (inCanvasElement, inPos, stackRenderers, textRenderer) => {
  if (GlobalTouchManager.isSupported(inCanvasElement)) {
    _renderIndicator({
      center: [inPos[0] + 115, inPos[1]],
      size: [230, 60],
      text: "Touch Events\nSupported\n(double tap)",
      color: [0, 0.5, 0]
    }, stackRenderers, textRenderer);
  } else {
    _renderIndicator({
      center: [inPos[0] + 115, inPos[1]],
      size: [230, 60],
      text: "Touch Events\nNot Supported",
      color: [0.5, 0, 0]
    }, stackRenderers, textRenderer);
  }
  if (GlobalPointerLockManager.canBePointerLocked(inCanvasElement)) {
    _renderIndicator({
      center: [inPos[0] + 105, inPos[1] + 70],
      size: [210, 60],
      text: "Mouse\nSupported",
      color: [0, 0.5, 0]
    }, stackRenderers, textRenderer);
  } else {
    _renderIndicator({
      center: [inPos[0] + 105, inPos[1] + 70],
      size: [210, 60],
      text: "Mouse Events\nNot Supported",
      color: [0.5, 0, 0]
    }, stackRenderers, textRenderer);
  }
};
// src/local-framework/graphics/renderers/widgets/renderFpsMeter.ts
var renderFpsMeter = (inPos, inSize, inFrameProfiler, inStackRenderers, inTextRenderer, inShowFps = false) => {
  const k_divider = 5;
  const k_verticalSize = Math.ceil(inFrameProfiler.maxDelta / k_divider) * k_divider;
  {
    inStackRenderers.pushOriginBoundRectangle(inPos, inSize, [0, 0, 0, 0.5]);
    const allVertices = [
      [inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 0, 0],
      [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 0, 0],
      [inPos[0] + inSize[0] * 1, inPos[1] + inSize[1] * 1, 0],
      [inPos[0] + inSize[0] * 0, inPos[1] + inSize[1] * 1, 0]
    ];
    inStackRenderers.pushLine(allVertices[0], allVertices[1], [1, 1, 1]);
    inStackRenderers.pushLine(allVertices[1], allVertices[2], [1, 1, 1]);
    inStackRenderers.pushLine(allVertices[2], allVertices[3], [1, 1, 1]);
    inStackRenderers.pushLine(allVertices[3], allVertices[0], [1, 1, 1]);
  }
  {
    for (let currDivider = k_divider;currDivider < k_verticalSize; currDivider += k_divider) {
      const ratio = currDivider / k_verticalSize;
      const pointA = [
        inPos[0] + 0,
        inPos[1] + inSize[1] * ratio,
        0
      ];
      const pointB = [
        inPos[0] + inSize[0],
        inPos[1] + inSize[1] * ratio,
        0
      ];
      inStackRenderers.pushLine(pointA, pointB, [0.5, 0.5, 0.5]);
    }
  }
  {
    if (inFrameProfiler.framesDelta.length >= 2) {
      const widthStep = inSize[0] / inFrameProfiler.framesDelta.length;
      let prevDelta = inFrameProfiler.framesDelta[0];
      let prevCoordX = 0;
      let prevCoordY = inSize[1] * prevDelta / k_verticalSize;
      for (let ii = 1;ii < inFrameProfiler.framesDelta.length; ++ii) {
        const currDelta = inFrameProfiler.framesDelta[ii];
        const currCoordX = ii * widthStep;
        const currCoordY = inSize[1] * currDelta / k_verticalSize;
        const pointA = [
          inPos[0] + prevCoordX,
          inPos[1] + prevCoordY,
          0
        ];
        const pointB = [
          inPos[0] + currCoordX,
          inPos[1] + currCoordY,
          0
        ];
        inStackRenderers.pushLine(pointA, pointB, [1, 1, 1]);
        prevDelta = currDelta;
        prevCoordX = currCoordX;
        prevCoordY = currCoordY;
      }
    }
  }
  {
    const k_textScale = 14;
    const k_textHScale = k_textScale * 0.5;
    const averageValue = inFrameProfiler.averageDelta;
    const maxValue = inFrameProfiler.maxDelta;
    const minValue = inFrameProfiler.minDelta;
    let averageStr = `~${averageValue.toFixed(0)}ms`;
    let maxStr = `<${maxValue}ms`;
    let minStr = `>${minValue}ms`;
    if (inShowFps === true) {
      const _getFpsStr = (inVal) => inVal < 999 ? inVal.toFixed(0) : "???";
      averageStr += `\n~${_getFpsStr(1000 / averageValue)}fps`;
      maxStr += `\n<${_getFpsStr(1000 / maxValue)}fps`;
      minStr += `\n>${_getFpsStr(1000 / minValue)}fps`;
    }
    inTextRenderer.setTextScale(k_textScale).setTextAlign("left", "top").setTextColor(1, 1, 0.75).pushText(averageStr, [inPos[0] + 7, inPos[1] - 8]).setTextAlign("left", "centered").setTextColor(1, 0.75, 0.75).pushText(maxStr, [
      inPos[0] + inSize[0] + k_textHScale,
      inPos[1] + inSize[1] - k_textHScale * 1
    ]).setTextColor(0.75, 1, 0.75).pushText(minStr, [
      inPos[0] + inSize[0] + k_textHScale,
      inPos[1] + k_textHScale * 1
    ]).setTextColor(1, 1, 1);
  }
};
// src/local-framework/graphics/images/index.ts
var exports_images = {};
__export(exports_images, {
  getImageFromUrl: () => {
    {
      return getImageFromUrl;
    }
  },
  getImageFromBuffer: () => {
    {
      return getImageFromBuffer;
    }
  },
  fetchImageBuffer: () => {
    {
      return fetchImageBuffer;
    }
  }
});

// src/local-framework/graphics/images/getImageFromUrl.ts
var getImageFromUrl = (url) => {
  return new Promise((resolve, reject) => {
    const image = new Image;
    image.onerror = reject;
    image.onload = () => {
      resolve(image);
    };
    image.src = url;
  });
};
var fetchImageBuffer = async (url, onProgress) => {
  const response = await fetch(url);
  const reader = response.body.getReader();
  const contentLength = +response.headers.get("Content-Length");
  const contentType = response.headers.get("Content-Type");
  let lastPercent = 0;
  let receivedLength = 0;
  let chunks = [];
  while (true) {
    const { done, value } = await reader.read();
    if (done) {
      break;
    }
    chunks.push(value);
    receivedLength += value.length;
    if (onProgress) {
      onProgress(receivedLength, contentLength);
    }
  }
  const chunksAll = new Uint8Array(receivedLength);
  let position = 0;
  for (let chunk of chunks) {
    chunksAll.set(chunk, position);
    position += chunk.length;
  }
  return {
    buffer: chunksAll,
    type: contentType
  };
};
var getImageFromBuffer = async (buffer, type) => {
  return new Promise((resolve, reject) => {
    const image = new Image;
    image.onerror = reject;
    image.onload = () => {
      resolve(image);
    };
    image.src = URL.createObjectURL(new Blob([buffer], { type }));
  });
};
// src/local-framework/graphics/geometries/index.ts
var exports_geometries = {};
__export(exports_geometries, {
  makeSphere: () => {
    {
      return makeSphere;
    }
  },
  makeBox: () => {
    {
      return makeBox;
    }
  }
});

// src/local-framework/graphics/geometries/makeBox.ts
var makeBox = (inSize) => {
  const hSizeX = inSize[0] * 0.5;
  const hSizeY = inSize[1] * 0.5;
  const hSizeZ = inSize[2] * 0.5;
  const allNormals = [];
  allNormals.push([-1, 0, 0]);
  allNormals.push([1, 0, 0]);
  allNormals.push([0, -1, 0]);
  allNormals.push([0, 1, 0]);
  allNormals.push([0, 0, -1]);
  allNormals.push([0, 0, 1]);
  const allVertices = [];
  allVertices.push([-hSizeX, -hSizeY, -hSizeZ]);
  allVertices.push([+hSizeX, -hSizeY, -hSizeZ]);
  allVertices.push([-hSizeX, +hSizeY, -hSizeZ]);
  allVertices.push([+hSizeX, +hSizeY, -hSizeZ]);
  allVertices.push([-hSizeX, -hSizeY, +hSizeZ]);
  allVertices.push([+hSizeX, -hSizeY, +hSizeZ]);
  allVertices.push([-hSizeX, +hSizeY, +hSizeZ]);
  allVertices.push([+hSizeX, +hSizeY, +hSizeZ]);
  const allIndices = [];
  allIndices.push([0, 2, 1, 4]);
  allIndices.push([2, 3, 1, 4]);
  allIndices.push([4, 5, 6, 5]);
  allIndices.push([6, 5, 7, 5]);
  allIndices.push([1, 3, 5, 1]);
  allIndices.push([5, 3, 7, 1]);
  allIndices.push([0, 4, 2, 0]);
  allIndices.push([4, 6, 2, 0]);
  allIndices.push([2, 6, 3, 3]);
  allIndices.push([6, 7, 3, 3]);
  allIndices.push([0, 1, 4, 2]);
  allIndices.push([4, 1, 5, 2]);
  const vertices = [];
  for (const index of allIndices) {
    vertices.push({
      pos: exports_vec3.copy([0, 0, 0], allVertices[index[0]]),
      normal: exports_vec3.copy([0, 0, 0], allNormals[index[3]])
    });
    vertices.push({
      pos: exports_vec3.copy([0, 0, 0], allVertices[index[1]]),
      normal: exports_vec3.copy([0, 0, 0], allNormals[index[3]])
    });
    vertices.push({
      pos: exports_vec3.copy([0, 0, 0], allVertices[index[2]]),
      normal: exports_vec3.copy([0, 0, 0], allNormals[index[3]])
    });
  }
  return vertices;
};
// src/local-framework/graphics/geometries/makeSphere.ts
var _drawSpherePatch = (vertices, quality, radius, v01, v02, v03) => {
  if (quality <= 0) {
    vertices.push({
      pos: exports_vec3.scale(exports_vec3.create(), v01, radius),
      normal: exports_vec3.copy(exports_vec3.create(), v01)
    });
    vertices.push({
      pos: exports_vec3.scale(exports_vec3.create(), v03, radius),
      normal: exports_vec3.copy(exports_vec3.create(), v03)
    });
    vertices.push({
      pos: exports_vec3.scale(exports_vec3.create(), v02, radius),
      normal: exports_vec3.copy(exports_vec3.create(), v02)
    });
  } else {
    const v12 = exports_vec3.normalize(exports_vec3.create(), exports_vec3.lerp(exports_vec3.create(), v01, v02, 0.5));
    const v23 = exports_vec3.normalize(exports_vec3.create(), exports_vec3.lerp(exports_vec3.create(), v02, v03, 0.5));
    const v31 = exports_vec3.normalize(exports_vec3.create(), exports_vec3.lerp(exports_vec3.create(), v03, v01, 0.5));
    quality -= 1;
    _drawSpherePatch(vertices, quality, radius, v01, v12, v31);
    _drawSpherePatch(vertices, quality, radius, v12, v02, v23);
    _drawSpherePatch(vertices, quality, radius, v31, v23, v03);
    _drawSpherePatch(vertices, quality, radius, v12, v23, v31);
  }
};
var makeSphere = (quality, radius) => {
  const k_icx = 0.5257311121191336;
  const k_icz = 0.8506508083520399;
  const tmpVertices = [
    [-k_icx, 0, +k_icz],
    [+k_icx, 0, +k_icz],
    [-k_icx, 0, -k_icz],
    [+k_icx, 0, -k_icz],
    [0, +k_icz, +k_icx],
    [0, +k_icz, -k_icx],
    [0, -k_icz, +k_icx],
    [0, -k_icz, -k_icx],
    [+k_icz, +k_icx, 0],
    [-k_icz, +k_icx, 0],
    [+k_icz, -k_icx, 0],
    [-k_icz, -k_icx, 0]
  ];
  const tmpIndices = [
    [0, 4, 1],
    [0, 9, 4],
    [9, 5, 4],
    [4, 5, 8],
    [4, 8, 1],
    [8, 10, 1],
    [8, 3, 10],
    [5, 3, 8],
    [5, 2, 3],
    [2, 7, 3],
    [7, 10, 3],
    [7, 6, 10],
    [7, 11, 6],
    [11, 0, 6],
    [0, 1, 6],
    [6, 1, 10],
    [9, 0, 11],
    [9, 11, 2],
    [9, 2, 5],
    [7, 2, 11]
  ];
  const vertices = [];
  for (const index of tmpIndices) {
    _drawSpherePatch(vertices, quality, radius, tmpVertices[index[0]], tmpVertices[index[1]], tmpVertices[index[2]]);
  }
  return vertices;
};
// src/webgl-ray-tracer/src/experiment/utilities/Logger.ts
class Logger {
  _textAreaElement;
  _lines = [];
  _maxLines = 30;
  constructor(textAreaElementId) {
    this._textAreaElement = document.getElementById(textAreaElementId);
    if (!this._textAreaElement)
      throw new Error(`DOM elements not found, id=${textAreaElementId}`);
    this._textAreaElement.value = "";
  }
  log(...args) {
    if (args.length === 0)
      return;
    const text = Array.prototype.slice.call(args).join(" ");
    console.log(text);
    this._pushText(text);
  }
  error(...args) {
    if (args.length === 0)
      return;
    const text = Array.prototype.slice.call(args).join(" ");
    console.error(text);
    this._pushText(`[ERR] - ${text}`);
  }
  _pushText(text) {
    this._lines.push(text);
    if (this._lines.length > this._maxLines)
      this._lines.splice(0, this._lines.length - this._maxLines);
    this._textAreaElement.value = `${this._lines.join("\n")}\n`;
    this._textAreaElement.scrollTop = this._textAreaElement.scrollHeight;
  }
  peekLast() {
    if (this._lines.length > 0)
      return this._lines[this._lines.length - 1];
    return;
  }
  popLast() {
    if (this._lines.length > 0)
      this._lines.splice(this._lines.length - 1, 1);
  }
}

// node_modules/FrankenPhys/dist/bundle.js
var __awaiter = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var create$4 = function() {
  var out = new ARRAY_TYPE2(9);
  if (ARRAY_TYPE2 != Float32Array) {
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
  }
  out[0] = 1;
  out[4] = 1;
  out[8] = 1;
  return out;
};
var create$3 = function() {
  var out = new ARRAY_TYPE2(3);
  if (ARRAY_TYPE2 != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }
  return out;
};
var length5 = function(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return Math.hypot(x, y, z);
};
var fromValues$1 = function(x, y, z) {
  var out = new ARRAY_TYPE2(3);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
};
var normalize$2 = function(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var len5 = x * x + y * y + z * z;
  if (len5 > 0) {
    len5 = 1 / Math.sqrt(len5);
  }
  out[0] = a[0] * len5;
  out[1] = a[1] * len5;
  out[2] = a[2] * len5;
  return out;
};
var dot5 = function(a, b) {
  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
};
var cross4 = function(out, a, b) {
  var ax = a[0], ay = a[1], az = a[2];
  var bx = b[0], by = b[1], bz = b[2];
  out[0] = ay * bz - az * by;
  out[1] = az * bx - ax * bz;
  out[2] = ax * by - ay * bx;
  return out;
};
var create$2 = function() {
  var out = new ARRAY_TYPE2(4);
  if (ARRAY_TYPE2 != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
  }
  return out;
};
var fromValues6 = function(x, y, z, w) {
  var out = new ARRAY_TYPE2(4);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  out[3] = w;
  return out;
};
var normalize$1 = function(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var w = a[3];
  var len5 = x * x + y * y + z * z + w * w;
  if (len5 > 0) {
    len5 = 1 / Math.sqrt(len5);
  }
  out[0] = x * len5;
  out[1] = y * len5;
  out[2] = z * len5;
  out[3] = w * len5;
  return out;
};
var create$1 = function() {
  var out = new ARRAY_TYPE2(4);
  if (ARRAY_TYPE2 != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }
  out[3] = 1;
  return out;
};
var setAxisAngle2 = function(out, axis, rad) {
  rad = rad * 0.5;
  var s = Math.sin(rad);
  out[0] = s * axis[0];
  out[1] = s * axis[1];
  out[2] = s * axis[2];
  out[3] = Math.cos(rad);
  return out;
};
var slerp2 = function(out, a, b, t) {
  var ax = a[0], ay = a[1], az = a[2], aw = a[3];
  var bx = b[0], by = b[1], bz = b[2], bw = b[3];
  var omega, cosom, sinom, scale0, scale1;
  cosom = ax * bx + ay * by + az * bz + aw * bw;
  if (cosom < 0) {
    cosom = -cosom;
    bx = -bx;
    by = -by;
    bz = -bz;
    bw = -bw;
  }
  if (1 - cosom > EPSILON2) {
    omega = Math.acos(cosom);
    sinom = Math.sin(omega);
    scale0 = Math.sin((1 - t) * omega) / sinom;
    scale1 = Math.sin(t * omega) / sinom;
  } else {
    scale0 = 1 - t;
    scale1 = t;
  }
  out[0] = scale0 * ax + scale1 * bx;
  out[1] = scale0 * ay + scale1 * by;
  out[2] = scale0 * az + scale1 * bz;
  out[3] = scale0 * aw + scale1 * bw;
  return out;
};
var fromMat32 = function(out, m) {
  var fTrace = m[0] + m[4] + m[8];
  var fRoot;
  if (fTrace > 0) {
    fRoot = Math.sqrt(fTrace + 1);
    out[3] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out[0] = (m[5] - m[7]) * fRoot;
    out[1] = (m[6] - m[2]) * fRoot;
    out[2] = (m[1] - m[3]) * fRoot;
  } else {
    var i = 0;
    if (m[4] > m[0])
      i = 1;
    if (m[8] > m[i * 3 + i])
      i = 2;
    var j = (i + 1) % 3;
    var k = (i + 2) % 3;
    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1);
    out[i] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;
    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;
    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;
  }
  return out;
};
var create7 = function() {
  var out = new ARRAY_TYPE2(2);
  if (ARRAY_TYPE2 != Float32Array) {
    out[0] = 0;
    out[1] = 0;
  }
  return out;
};
var scriptLoadingUtility = (inSrc) => {
  return new Promise((resolve, reject) => {
    const scriptElement = document.createElement("script");
    scriptElement.src = inSrc;
    scriptElement.addEventListener("load", resolve);
    scriptElement.addEventListener("error", reject);
    document.head.appendChild(scriptElement);
  });
};

class BrowserFrankenPhysWasmModule {
  static load(opts) {
    return __awaiter(this, undefined, undefined, function* () {
      yield BrowserFrankenPhysWasmModule.loadJsPart(opts.jsUrl);
      yield BrowserFrankenPhysWasmModule.loadWasmPart(opts.wasmUrl);
    });
  }
  static loadJsPart(url) {
    return __awaiter(this, undefined, undefined, function* () {
      yield scriptLoadingUtility(url);
    });
  }
  static loadWasmPart(urlPrefix) {
    return __awaiter(this, undefined, undefined, function* () {
      BrowserFrankenPhysWasmModule._wasmModule = yield FrankenPhysLoader({
        locateFile: (url) => {
          return `${urlPrefix}/${url}`;
        }
      });
    });
  }
  static get() {
    if (!this._wasmModule) {
      throw new Error("FrankenPhys wasm module not loaded");
    }
    return this._wasmModule;
  }
}

class ContactEventHandler {
  constructor() {
    this._listenersMap = new Map;
  }
  isEventListenedTo(type) {
    const listeners = this._listenersMap.get(type);
    return !!listeners && listeners.length > 0;
  }
  addEventListener(type, listener) {
    let listeners = this._listenersMap.get(type);
    if (!listeners) {
      listeners = [];
      this._listenersMap.set(type, listeners);
    }
    if (listeners.indexOf(listener) !== -1) {
      throw new Error(`duplicated event listener, type=${type}`);
    }
    listeners.push(listener);
  }
  on(type, listener) {
    this.addEventListener(type, listener);
  }
  hasEventListener(type, listener) {
    const listeners = this._listenersMap.get(type);
    return listeners !== undefined && listeners.indexOf(listener) !== -1;
  }
  removeEventListener(type, listener) {
    const listeners = this._listenersMap.get(type);
    if (listeners === undefined)
      return;
    const index = listeners.indexOf(listener);
    if (index === -1) {
      throw new Error(`unknown event listener, type=${type}`);
    }
    listeners.splice(index, 1);
  }
  dispatchEvent(event) {
    const listeners = this._listenersMap.get(event.type);
    if (listeners === undefined) {
      return;
    }
    const listenersCopy = listeners.slice(0);
    for (let ii = 0;ii < listenersCopy.length; ++ii) {
      listenersCopy[ii].call(this, event);
    }
  }
}

class WasmModuleHolder {
  static set(wasmModule) {
    return __awaiter(this, undefined, undefined, function* () {
      WasmModuleHolder._wasmModule = wasmModule;
    });
  }
  static get() {
    if (!this._wasmModule) {
      throw new Error("FrankenPhys wasm module not loaded");
    }
    return this._wasmModule;
  }
}
var EPSILON2 = 0.000001;
var ARRAY_TYPE2 = typeof Float32Array !== "undefined" ? Float32Array : Array;
if (!Math.hypot)
  Math.hypot = function() {
    var y = 0, i = arguments.length;
    while (i--) {
      y += arguments[i] * arguments[i];
    }
    return Math.sqrt(y);
  };
var len5 = length5;
(function() {
  var vec = create$3();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 3;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      vec[2] = a[i + 2];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
      a[i + 2] = vec[2];
    }
    return a;
  };
})();
(function() {
  var vec = create$2();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 4;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      vec[2] = a[i + 2];
      vec[3] = a[i + 3];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
      a[i + 2] = vec[2];
      a[i + 3] = vec[3];
    }
    return a;
  };
})();
var normalize5 = normalize$1;
(function() {
  var tmpvec3 = create$3();
  var xUnitVec3 = fromValues$1(1, 0, 0);
  var yUnitVec3 = fromValues$1(0, 1, 0);
  return function(out, a, b) {
    var dot$1 = dot5(a, b);
    if (dot$1 < -0.999999) {
      cross4(tmpvec3, xUnitVec3, a);
      if (len5(tmpvec3) < 0.000001)
        cross4(tmpvec3, yUnitVec3, a);
      normalize$2(tmpvec3, tmpvec3);
      setAxisAngle2(out, tmpvec3, Math.PI);
      return out;
    } else if (dot$1 > 0.999999) {
      out[0] = 0;
      out[1] = 0;
      out[2] = 0;
      out[3] = 1;
      return out;
    } else {
      cross4(tmpvec3, a, b);
      out[0] = tmpvec3[0];
      out[1] = tmpvec3[1];
      out[2] = tmpvec3[2];
      out[3] = 1 + dot$1;
      return normalize5(out, out);
    }
  };
})();
(function() {
  var temp1 = create$1();
  var temp2 = create$1();
  return function(out, a, b, c, d, t) {
    slerp2(temp1, a, d, t);
    slerp2(temp2, b, c, t);
    slerp2(out, temp1, temp2, 2 * t * (1 - t));
    return out;
  };
})();
(function() {
  var matr = create$4();
  return function(out, view, right, up) {
    matr[0] = right[0];
    matr[3] = right[1];
    matr[6] = right[2];
    matr[1] = up[0];
    matr[4] = up[1];
    matr[7] = up[2];
    matr[2] = -view[0];
    matr[5] = -view[1];
    matr[8] = -view[2];
    return normalize5(out, fromMat32(out, matr));
  };
})();
(function() {
  var vec = create7();
  return function(a, stride, offset, count, fn, arg) {
    var i, l;
    if (!stride) {
      stride = 2;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }
    for (i = offset;i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
    }
    return a;
  };
})();
var convexSweep = (rawDynamicsWorld, def) => {
  const bullet = WasmModuleHolder.get();
  const fromVec3 = new bullet.btVector3(def.from[0], def.from[1], def.from[2]);
  const toVec3 = new bullet.btVector3(def.to[0], def.to[1], def.to[2]);
  const fromTrsf = new bullet.btTransform;
  fromTrsf.setIdentity();
  fromTrsf.setOrigin(fromVec3);
  const toTrsf = new bullet.btTransform;
  toTrsf.setIdentity();
  toTrsf.setOrigin(toVec3);
  const result = new bullet.ClosestConvexResultCallback(fromVec3, toVec3);
  result.set_m_collisionFilterGroup(def.collisionFilterGroup);
  result.set_m_collisionFilterMask(def.collisionFilterMask);
  const shape = new bullet.btSphereShape(def.radius);
  rawDynamicsWorld.convexSweepTest(shape, fromTrsf, toTrsf, result, 0);
  if (!result.hasHit()) {
    bullet.destroy(fromVec3);
    bullet.destroy(toVec3);
    bullet.destroy(result);
    bullet.destroy(shape);
    bullet.destroy(fromTrsf);
    bullet.destroy(toTrsf);
    return;
  }
  const rawPosition = result.get_m_hitPointWorld();
  const rawNormal = result.get_m_hitNormalWorld();
  const fraction = result.get_m_closestHitFraction();
  const impact = fromValues$1(rawPosition.x(), rawPosition.y(), rawPosition.z());
  const normal = fromValues$1(rawNormal.x(), rawNormal.y(), rawNormal.z());
  bullet.destroy(rawNormal);
  bullet.destroy(rawPosition);
  bullet.destroy(fromVec3);
  bullet.destroy(toVec3);
  bullet.destroy(result);
  bullet.destroy(shape);
  bullet.destroy(fromTrsf);
  bullet.destroy(toTrsf);
  return { fraction, impact, normal };
};
var DISABLE_DEACTIVATION = 4;

class ConcretePhysicBody extends ContactEventHandler {
  constructor(def, rawShape) {
    super();
    this._isAlive = true;
    const bullet = WasmModuleHolder.get();
    this._customShape = rawShape;
    const tmpVec3 = new bullet.btVector3;
    this._customShape.shape.calculateLocalInertia(def.mass, tmpVec3);
    const motionState = null;
    const rbInfo = new bullet.btRigidBodyConstructionInfo(def.mass, motionState, this._customShape.shape, tmpVec3);
    this._rawRigidBody = new bullet.btRigidBody(rbInfo);
    this.setPositionAndRotation(def.position, def.orientation);
    bullet.destroy(tmpVec3);
    bullet.destroy(rbInfo);
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    bullet.destroy(this._rawRigidBody);
    this._customShape.cleanup();
    this._rawRigidBody = null;
    this._isAlive = false;
  }
  isAlive() {
    return this._isAlive;
  }
  setPositionAndRotation(position, rotation) {
    const bullet = WasmModuleHolder.get();
    const newPosition = new bullet.btVector3(position[0], position[1], position[2]);
    const newRotation = new bullet.btQuaternion(rotation[0], rotation[1], rotation[2], rotation[3]);
    const newTransform = new bullet.btTransform(newRotation, newPosition);
    this._rawRigidBody.setWorldTransform(newTransform);
    bullet.destroy(newTransform);
    bullet.destroy(newPosition);
    bullet.destroy(newRotation);
  }
  setPosition(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const rotation = this.getRotation();
    const newPosition = new bullet.btVector3(x, y, z);
    const newRotation = new bullet.btQuaternion(rotation[0], rotation[1], rotation[2], rotation[3]);
    const newTransform = new bullet.btTransform(newRotation, newPosition);
    this._rawRigidBody.setWorldTransform(newTransform);
    bullet.destroy(newTransform);
    bullet.destroy(newPosition);
    bullet.destroy(newRotation);
  }
  setRotation(x, y, z, w) {
    const bullet = WasmModuleHolder.get();
    const origin = this.getPosition();
    const newPosition = new bullet.btVector3(origin[0], origin[1], origin[2]);
    const newRotation = new bullet.btQuaternion(x, y, z, w);
    const newTransform = new bullet.btTransform(newRotation, newPosition);
    this._rawRigidBody.setWorldTransform(newTransform);
    bullet.destroy(newTransform);
    bullet.destroy(newPosition);
    bullet.destroy(newRotation);
  }
  getPositionAndRotation(position, rotation) {
    const bullet = WasmModuleHolder.get();
    const rawTransform = this._rawRigidBody.getWorldTransform();
    const rawOrigin = rawTransform.getOrigin();
    const rawRotation = rawTransform.getRotation();
    position[0] = rawOrigin.x();
    position[1] = rawOrigin.y();
    position[2] = rawOrigin.z();
    rotation[0] = rawRotation.x();
    rotation[1] = rawRotation.y();
    rotation[2] = rawRotation.z();
    rotation[3] = rawRotation.w();
    bullet.destroy(rawRotation);
    bullet.destroy(rawOrigin);
    bullet.destroy(rawTransform);
  }
  getPosition() {
    const bullet = WasmModuleHolder.get();
    const rawTransform = this._rawRigidBody.getWorldTransform();
    const rawOrigin = rawTransform.getOrigin();
    const origin = fromValues$1(rawOrigin.x(), rawOrigin.y(), rawOrigin.z());
    bullet.destroy(rawOrigin);
    bullet.destroy(rawTransform);
    return origin;
  }
  getRotation() {
    const bullet = WasmModuleHolder.get();
    const rawTransform = this._rawRigidBody.getWorldTransform();
    const rawRotation = rawTransform.getRotation();
    const rotation = fromValues6(rawRotation.x(), rawRotation.y(), rawRotation.z(), rawRotation.w());
    bullet.destroy(rawRotation);
    bullet.destroy(rawTransform);
    return rotation;
  }
  getLinearVelocity() {
    const bullet = WasmModuleHolder.get();
    const vel = this._rawRigidBody.getLinearVelocity();
    const value = fromValues$1(vel.x(), vel.y(), vel.z());
    bullet.destroy(vel);
    return value;
  }
  getAngularVelocity() {
    const bullet = WasmModuleHolder.get();
    const vel = this._rawRigidBody.getAngularVelocity();
    const value = fromValues$1(vel.x(), vel.y(), vel.z());
    bullet.destroy(vel);
    return value;
  }
  setLinearVelocity(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setLinearVelocity(newVel);
    bullet.destroy(newVel);
  }
  setAngularVelocity(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setAngularVelocity(newVel);
    bullet.destroy(newVel);
  }
  setLinearFactor(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setLinearFactor(newVel);
    bullet.destroy(newVel);
  }
  setAngularFactor(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setAngularFactor(newVel);
    bullet.destroy(newVel);
  }
  applyCentralForce(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.applyCentralForce(newVel);
    bullet.destroy(newVel);
  }
  applyCentralImpulse(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.applyCentralImpulse(newVel);
    bullet.destroy(newVel);
  }
  setDamping(linear, angular = 0) {
    this._rawRigidBody.setDamping(linear, angular);
  }
  setCcdMotionThreshold(ccdMotionThreshold) {
    this._rawRigidBody.setCcdMotionThreshold(ccdMotionThreshold);
  }
  setCcdSweptSphereRadius(radius) {
    this._rawRigidBody.setCcdSweptSphereRadius(radius);
  }
  setRestitution(restitution) {
    this._rawRigidBody.setRestitution(restitution);
  }
  setFriction(friction) {
    this._rawRigidBody.setFriction(friction);
  }
  setRollingFriction(friction) {
    this._rawRigidBody.setRollingFriction(friction);
  }
  setGravity(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawRigidBody.setGravity(newVel);
    bullet.destroy(newVel);
  }
  isStaticObject() {
    return this._rawRigidBody.isStaticObject();
  }
  isKinematicObject() {
    return this._rawRigidBody.isKinematicObject();
  }
  isStaticOrKinematicObject() {
    return this._rawRigidBody.isStaticOrKinematicObject();
  }
  isActive() {
    return this.isStaticOrKinematicObject() || this._rawRigidBody.isActive();
  }
  enableDeactivation() {
    this._rawRigidBody.activate(true);
  }
  disableDeactivation() {
    this._rawRigidBody.setActivationState(DISABLE_DEACTIVATION);
  }
  cannotDeactivate() {
    return this.isStaticOrKinematicObject() || this._rawRigidBody.getActivationState() == DISABLE_DEACTIVATION;
  }
  canDeactivate() {
    return !this.cannotDeactivate();
  }
}

class ConcretePhysicVehicle {
  constructor(rawDynamicsWorld, chassisBody, def) {
    const bullet = WasmModuleHolder.get();
    this._chassisBody = chassisBody;
    this._vehicleTuning = new bullet.btVehicleTuning;
    this._defaultVehicleRaycaster = new bullet.btDefaultVehicleRaycaster(rawDynamicsWorld);
    this._rawVehicle = new bullet.btRaycastVehicle(this._vehicleTuning, chassisBody._rawRigidBody, this._defaultVehicleRaycaster);
    this._rawVehicle.setCoordinateSystem(def.coordinateSystem[0], def.coordinateSystem[1], def.coordinateSystem[2]);
    const groundDirection = new bullet.btVector3(def.groundDirection[0], def.groundDirection[1], def.groundDirection[2]);
    const rotationAxis = new bullet.btVector3(def.rotationAxis[0], def.rotationAxis[1], def.rotationAxis[2]);
    const connectionPoint = new bullet.btVector3;
    for (let ii = 0;ii < def.wheels.length; ++ii) {
      const current = def.wheels[ii];
      connectionPoint.setValue(current.connectionPoint[0], current.connectionPoint[1], current.connectionPoint[2]);
      const wheelInfo = this._rawVehicle.addWheel(connectionPoint, groundDirection, rotationAxis, def.suspensionRestLength, def.wheelRadius, this._vehicleTuning, current.isFrontWheel);
      wheelInfo.set_m_suspensionStiffness(def.suspensionStiffness);
      wheelInfo.set_m_wheelsDampingRelaxation(def.wheelsDampingRelaxation);
      wheelInfo.set_m_wheelsDampingCompression(def.wheelsDampingCompression);
      wheelInfo.set_m_frictionSlip(def.wheelFriction);
      wheelInfo.set_m_rollInfluence(def.rollInfluence);
    }
    bullet.destroy(connectionPoint);
    bullet.destroy(groundDirection);
    bullet.destroy(rotationAxis);
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    bullet.destroy(this._rawVehicle);
    bullet.destroy(this._defaultVehicleRaycaster);
    bullet.destroy(this._vehicleTuning);
  }
  getChassisBody() {
    return this._chassisBody;
  }
  setSteeringValue(index, angle3) {
    this._rawVehicle.setSteeringValue(angle3, index);
  }
  applyEngineForce(index, force) {
    this._rawVehicle.applyEngineForce(force, index);
  }
  setBrake(index, force) {
    this._rawVehicle.setBrake(force, index);
  }
  getWheeTransforms() {
    const bullet = WasmModuleHolder.get();
    const allTransforms = [];
    const interpolatedTransform = true;
    const numWheels = this._rawVehicle.getNumWheels();
    for (let ii = 0;ii < numWheels; ++ii) {
      this._rawVehicle.updateWheelTransform(ii, interpolatedTransform);
      const rawTransform = this._rawVehicle.getWheelTransformWS(ii);
      const rawOrigin = rawTransform.getOrigin();
      const rawRotation = rawTransform.getRotation();
      allTransforms.push({
        position: fromValues$1(rawOrigin.x(), rawOrigin.y(), rawOrigin.z()),
        rotation: fromValues6(rawRotation.x(), rawRotation.y(), rawRotation.z(), rawRotation.w())
      });
      bullet.destroy(rawRotation);
      bullet.destroy(rawOrigin);
      bullet.destroy(rawTransform);
    }
    return allTransforms;
  }
}

class ConcreteGeneric6DofConstraint {
  constructor(def) {
    this._bodyA = def.bodyA;
    this._bodyB = def.bodyB;
    const bullet = WasmModuleHolder.get();
    const rawRigidBodyA = def.bodyA._rawRigidBody;
    const rawRigidBodyB = def.bodyB._rawRigidBody;
    const newRotation = new bullet.btQuaternion(0, 0, 1, 0);
    const newPositionA = new bullet.btVector3(def.frameA[0], def.frameA[1], def.frameA[2]);
    const newTransformA = new bullet.btTransform(newRotation, newPositionA);
    const newPositionB = new bullet.btVector3(def.frameB[0], def.frameB[1], def.frameB[2]);
    const newTransformB = new bullet.btTransform(newRotation, newPositionB);
    this._rawConstraint = new bullet.btGeneric6DofSpringConstraint(rawRigidBodyA, rawRigidBodyB, newTransformA, newTransformB, def.useReferenceFrameA);
    this._rawConstraint.enableSpring(0, false);
    this._rawConstraint.enableSpring(1, false);
    this._rawConstraint.enableSpring(2, false);
    this._rawConstraint.setStiffness(0, 1);
    this._rawConstraint.setStiffness(1, 1);
    this._rawConstraint.setStiffness(2, 1);
    this._rawConstraint.setDamping(0, 1);
    this._rawConstraint.setDamping(1, 1);
    this._rawConstraint.setDamping(2, 1);
    bullet.destroy(newTransformA);
    bullet.destroy(newTransformB);
    bullet.destroy(newPositionA);
    bullet.destroy(newPositionB);
    bullet.destroy(newRotation);
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    bullet.destroy(this._rawConstraint);
  }
  setLinearLowerLimit(val) {
    const bullet = WasmModuleHolder.get();
    const newVal = new bullet.btVector3(val[0], val[1], val[2]);
    this._rawConstraint.setLinearLowerLimit(newVal);
    bullet.destroy(newVal);
  }
  setLinearUpperLimit(val) {
    const bullet = WasmModuleHolder.get();
    const newVal = new bullet.btVector3(val[0], val[1], val[2]);
    this._rawConstraint.setLinearUpperLimit(newVal);
    bullet.destroy(newVal);
  }
  setAngularLowerLimit(val) {
    const bullet = WasmModuleHolder.get();
    const newVal = new bullet.btVector3(val[0], val[1], val[2]);
    this._rawConstraint.setAngularLowerLimit(newVal);
    bullet.destroy(newVal);
  }
  setAngularUpperLimit(val) {
    const bullet = WasmModuleHolder.get();
    const newVal = new bullet.btVector3(val[0], val[1], val[2]);
    this._rawConstraint.setAngularUpperLimit(newVal);
    bullet.destroy(newVal);
  }
}

class ConcreteHingeConstraint {
  constructor(def) {
    this._bodyA = def.bodyA;
    this._bodyB = def.bodyB;
    const bullet = WasmModuleHolder.get();
    const rawRigidBodyA = def.bodyA._rawRigidBody;
    const rawRigidBodyB = def.bodyB._rawRigidBody;
    const pivotInA = new bullet.btVector3(def.pivotInA[0], def.pivotInA[1], def.pivotInA[2]);
    const pivotInB = new bullet.btVector3(def.pivotInB[0], def.pivotInB[1], def.pivotInB[2]);
    const axisInA = new bullet.btVector3(def.axisInA[0], def.axisInA[1], def.axisInA[2]);
    const axisInB = new bullet.btVector3(def.axisInB[0], def.axisInB[1], def.axisInB[2]);
    this._rawConstraint = new bullet.btHingeConstraint(rawRigidBodyA, rawRigidBodyB, pivotInA, pivotInB, axisInA, axisInB, def.useReferenceFrameA);
    bullet.destroy(pivotInA);
    bullet.destroy(pivotInB);
    bullet.destroy(axisInA);
    bullet.destroy(axisInB);
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    bullet.destroy(this._rawConstraint);
  }
  setLimit(low, high, softness, biasFactor, relaxationFactor) {
    this._rawConstraint.setLimit(low, high, softness, biasFactor, relaxationFactor);
  }
  enableAngularMotor(enableMotor, targetVelocity, maxMotorImpulse) {
    this._rawConstraint.enableAngularMotor(enableMotor, targetVelocity, maxMotorImpulse);
  }
  enableMotor(enableMotor) {
    this._rawConstraint.enableMotor(enableMotor);
  }
  setMaxMotorImpulse(maxMotorImpulse) {
    this._rawConstraint.setMaxMotorImpulse(maxMotorImpulse);
  }
  setMotorTarget(targetAngle, dt) {
    this._rawConstraint.setMotorTarget(targetAngle, dt);
  }
}
var rayCast = (rawDynamicsWorld, bodyMap, def) => {
  const bullet = WasmModuleHolder.get();
  const fromVec3 = new bullet.btVector3(def.from[0], def.from[1], def.from[2]);
  const toVec3 = new bullet.btVector3(def.to[0], def.to[1], def.to[2]);
  const result = new bullet.ClosestRayResultCallback(fromVec3, toVec3);
  result.set_m_collisionFilterGroup(def.collisionFilterGroup);
  result.set_m_collisionFilterMask(def.collisionFilterMask);
  rawDynamicsWorld.rayTest(fromVec3, toVec3, result);
  if (!result.hasHit()) {
    bullet.destroy(fromVec3);
    bullet.destroy(toVec3);
    bullet.destroy(result);
    return;
  }
  const object = bodyMap.get(result.get_m_collisionObject().ptr);
  if (!object) {
    bullet.destroy(fromVec3);
    bullet.destroy(toVec3);
    bullet.destroy(result);
    return;
  }
  const rawNormal = result.get_m_hitNormalWorld();
  const rawPosition = result.get_m_hitPointWorld();
  const impact = fromValues$1(rawPosition.x(), rawPosition.y(), rawPosition.z());
  const normal = fromValues$1(rawNormal.x(), rawNormal.y(), rawNormal.z());
  bullet.destroy(rawNormal);
  bullet.destroy(rawPosition);
  bullet.destroy(fromVec3);
  bullet.destroy(toVec3);
  bullet.destroy(result);
  return {
    object,
    fraction: result.get_m_closestHitFraction(),
    impact,
    normal
  };
};

class PhysicWorld extends ContactEventHandler {
  constructor() {
    super();
    this._bodyMap = new Map;
    this._vehicleMap = new Map;
    this._constraintMap = new Map;
    this._allConstraints = [];
    this._constraintMap2 = new Map;
    this._allConstraints2 = [];
    const bullet = WasmModuleHolder.get();
    this._collisionConf = new bullet.btDefaultCollisionConfiguration;
    this._dispatcher = new bullet.btCollisionDispatcher(this._collisionConf);
    this._broadPhase = new bullet.btDbvtBroadphase;
    this._solver = new bullet.btSequentialImpulseConstraintSolver;
    this._rawDynamicsWorld = new bullet.btjsDynamicsWorld(this._dispatcher, this._broadPhase, this._solver, this._collisionConf);
    this._rawDynamicsWorld.setGravity(new bullet.btVector3(0, 0, -10));
    this._initCollisionEvents();
  }
  dispose() {
    const bullet = WasmModuleHolder.get();
    this._allConstraints.forEach((currConstraint) => currConstraint.dispose());
    this._allConstraints.length = 0;
    this._constraintMap.clear();
    this._allConstraints2.forEach((currConstraint) => currConstraint.dispose());
    this._allConstraints2.length = 0;
    this._constraintMap2.clear();
    [...this._vehicleMap.values()].forEach((currVehicle) => currVehicle.dispose());
    this._vehicleMap.clear();
    [...this._bodyMap.values()].forEach((currBody) => currBody.dispose());
    this._bodyMap.clear();
    bullet.destroy(this._rawDynamicsWorld);
    bullet.destroy(this._solver);
    bullet.destroy(this._broadPhase);
    bullet.destroy(this._dispatcher);
    bullet.destroy(this._collisionConf);
  }
  createRigidBody(def) {
    const newShape = this._getShape(def.shape, def.mass > 0);
    const newBody = new ConcretePhysicBody(def, newShape);
    this._rawDynamicsWorld.addRigidBody(newBody._rawRigidBody, -1, -1);
    this._bodyMap.set(newBody._rawRigidBody.ptr, newBody);
    return newBody;
  }
  _getShape(def, isDynamic) {
    const bullet = WasmModuleHolder.get();
    switch (def.type) {
      case "box": {
        const boxHalfExtent = new bullet.btVector3;
        boxHalfExtent.setValue(def.size[0] * 0.5, def.size[1] * 0.5, def.size[2] * 0.5);
        const rawShape = new bullet.btBoxShape(boxHalfExtent);
        bullet.destroy(boxHalfExtent);
        return {
          shape: rawShape,
          cleanup: () => bullet.destroy(rawShape)
        };
      }
      case "sphere": {
        const rawShape = new bullet.btSphereShape(def.radius);
        return {
          shape: rawShape,
          cleanup: () => bullet.destroy(rawShape)
        };
      }
      case "cylinder": {
        const bVec = new bullet.btVector3(def.radius, def.radius, def.length);
        const rawShape = new bullet.btCylinderShape(bVec);
        return {
          shape: rawShape,
          cleanup: () => {
            bullet.destroy(rawShape);
            bullet.destroy(bVec);
          }
        };
      }
      case "capsule": {
        const rawShape = new bullet.btCapsuleShape(def.radius, def.length);
        return {
          shape: rawShape,
          cleanup: () => bullet.destroy(rawShape)
        };
      }
      case "mesh": {
        const triangleMesh = new bullet.btTriangleMesh;
        const bVec1 = new bullet.btVector3;
        const bVec2 = new bullet.btVector3;
        const bVec3 = new bullet.btVector3;
        def.triangles.forEach(([vec1, vec2, vec3]) => {
          bVec1.setValue(vec1[0], vec1[1], vec1[2]);
          bVec2.setValue(vec2[0], vec2[1], vec2[2]);
          bVec3.setValue(vec3[0], vec3[1], vec3[2]);
          triangleMesh.addTriangle(bVec1, bVec2, bVec3);
        });
        bullet.destroy(bVec1);
        bullet.destroy(bVec2);
        bullet.destroy(bVec3);
        if (isDynamic) {
          const meshShape = new bullet.btGImpactMeshShape(triangleMesh);
          const rawShape2 = this._rawDynamicsWorld.createCompoundFromGimpactShape(meshShape, 0);
          return {
            shape: rawShape2,
            cleanup: () => {
              bullet.destroy(rawShape2);
              bullet.destroy(meshShape);
              bullet.destroy(triangleMesh);
            }
          };
        }
        const rawShape = new bullet.btBvhTriangleMeshShape(triangleMesh, true);
        return {
          shape: rawShape,
          cleanup: () => {
            bullet.destroy(rawShape);
            bullet.destroy(triangleMesh);
          }
        };
      }
      case "compound": {
        const rawCompound = new bullet.btCompoundShape;
        const allRawShapes = [];
        const localVec3 = new bullet.btVector3;
        const localQuat = new bullet.btQuaternion(0, 0, 1, 0);
        const localTransform = new bullet.btTransform;
        for (const { shape, position, orientation } of def.shapes) {
          const rawValues = this._getShape(shape, isDynamic);
          allRawShapes.push(rawValues);
          localVec3.setValue(position[0], position[1], position[2]);
          localQuat.setValue(orientation[0], orientation[1], orientation[2], orientation[3]);
          localTransform.setOrigin(localVec3);
          localTransform.setRotation(localQuat);
          rawCompound.addChildShape(localTransform, rawValues.shape);
        }
        bullet.destroy(localVec3);
        bullet.destroy(localQuat);
        bullet.destroy(localTransform);
        return {
          shape: rawCompound,
          cleanup: () => {
            bullet.destroy(rawCompound);
            for (const currRawShape of allRawShapes) {
              bullet.destroy(currRawShape);
            }
          }
        };
      }
    }
  }
  destroyRigidBody(rigidBody) {
    const rawRigidBody = rigidBody._rawRigidBody;
    const bodyPtr = rawRigidBody.ptr;
    this._rawDynamicsWorld.removeRigidBody(rawRigidBody);
    this._bodyMap.delete(bodyPtr);
    rigidBody.dispose();
    const bodyListOfConstraints = this._constraintMap.get(bodyPtr);
    if (bodyListOfConstraints) {
      for (const currConstraint of bodyListOfConstraints) {
        this.destroyGeneric6DofConstraint(currConstraint);
      }
    }
    const bodyListOfConstraints2 = this._constraintMap2.get(bodyPtr);
    if (bodyListOfConstraints2) {
      for (const currConstraint of bodyListOfConstraints2) {
        this.destroyHingeConstraint(currConstraint);
      }
    }
  }
  createVehicle(def) {
    const newBody = this.createRigidBody(def.chassisDef);
    const rawRigidBody = newBody;
    const vehicle = new ConcretePhysicVehicle(this._rawDynamicsWorld, rawRigidBody, def);
    this._rawDynamicsWorld.addAction(vehicle._rawVehicle);
    this._vehicleMap.set(vehicle.ptr, vehicle);
    return vehicle;
  }
  destroyVehicle(vehicle) {
    this.destroyRigidBody(vehicle._chassisBody);
    this._rawDynamicsWorld.removeAction(vehicle._rawVehicle);
    this._vehicleMap.delete(vehicle.ptr);
    vehicle.dispose();
  }
  createGeneric6DofConstraint(def) {
    const constraint = new ConcreteGeneric6DofConstraint(def);
    const ptrA = def.bodyA._rawRigidBody.ptr;
    let bodyListA = this._constraintMap.get(ptrA);
    if (!bodyListA) {
      bodyListA = [];
      this._constraintMap.set(ptrA, bodyListA);
    }
    bodyListA.push(constraint);
    const ptrB = def.bodyB._rawRigidBody.ptr;
    let bodyListB = this._constraintMap.get(ptrB);
    if (!bodyListB) {
      bodyListB = [];
      this._constraintMap.set(ptrA, bodyListB);
    }
    bodyListB.push(constraint);
    this._allConstraints.push(constraint);
    this._rawDynamicsWorld.addConstraint(constraint._rawConstraint, true);
    return constraint;
  }
  destroyGeneric6DofConstraint(constraint) {
    const concrete = constraint;
    this._rawDynamicsWorld.removeConstraint(concrete._rawConstraint);
    const bodyListA = this._constraintMap.get(concrete._bodyA._rawRigidBody.ptr);
    if (bodyListA) {
      const index2 = bodyListA.indexOf(concrete);
      if (index2 >= 0) {
        bodyListA.splice(index2, 0);
      }
    }
    const bodyListB = this._constraintMap.get(concrete._bodyB._rawRigidBody.ptr);
    if (bodyListB) {
      const index2 = bodyListB.indexOf(concrete);
      if (index2 >= 0) {
        bodyListB.splice(index2, 0);
      }
    }
    const index = this._allConstraints.indexOf(concrete);
    if (index >= 0) {
      this._allConstraints.splice(index, 0);
    }
    concrete.dispose();
  }
  createHingeConstraint(def) {
    const constraint = new ConcreteHingeConstraint(def);
    const ptrA = def.bodyA._rawRigidBody.ptr;
    let bodyListA = this._constraintMap2.get(ptrA);
    if (!bodyListA) {
      bodyListA = [];
      this._constraintMap2.set(ptrA, bodyListA);
    }
    bodyListA.push(constraint);
    const ptrB = def.bodyB._rawRigidBody.ptr;
    let bodyListB = this._constraintMap2.get(ptrB);
    if (!bodyListB) {
      bodyListB = [];
      this._constraintMap2.set(ptrA, bodyListB);
    }
    bodyListB.push(constraint);
    this._allConstraints2.push(constraint);
    this._rawDynamicsWorld.addConstraint(constraint._rawConstraint, true);
    return constraint;
  }
  destroyHingeConstraint(constraint) {
    const concrete = constraint;
    this._rawDynamicsWorld.removeConstraint(concrete._rawConstraint);
    const bodyListA = this._constraintMap2.get(concrete._bodyA._rawRigidBody.ptr);
    if (bodyListA) {
      const index2 = bodyListA.indexOf(concrete);
      if (index2 >= 0) {
        bodyListA.splice(index2, 0);
      }
    }
    const bodyListB = this._constraintMap2.get(concrete._bodyB._rawRigidBody.ptr);
    if (bodyListB) {
      const index2 = bodyListB.indexOf(concrete);
      if (index2 >= 0) {
        bodyListB.splice(index2, 0);
      }
    }
    const index = this._allConstraints2.indexOf(concrete);
    if (index >= 0) {
      this._allConstraints2.splice(index, 0);
    }
    concrete.dispose();
  }
  rayCast(from, to) {
    return rayCast(this._rawDynamicsWorld, this._bodyMap, {
      from,
      to,
      collisionFilterGroup: -1,
      collisionFilterMask: -1
    });
  }
  convexSweep(from, to, radius) {
    return convexSweep(this._rawDynamicsWorld, {
      from,
      to,
      collisionFilterGroup: -1,
      collisionFilterMask: -1,
      radius
    });
  }
  _initCollisionEvents() {
    const eventFlags = {
      world: 1 << 0,
      bodyA: 1 << 1,
      bodyB: 1 << 2
    };
    const _onContactChange = (event) => {
      const bodyA = event.data.getBodyA();
      const bodyB = event.data.getBodyB();
      const rigidBodyA = this._bodyMap.get(bodyA.ptr);
      const rigidBodyB = this._bodyMap.get(bodyB.ptr);
      if (!rigidBodyA || !rigidBodyB) {
        return;
      }
      const type = event.type;
      const collisionFlag = (this.isEventListenedTo(type) ? eventFlags.world : 0) | (rigidBodyA.isEventListenedTo(type) ? eventFlags.bodyA : 0) | (rigidBodyB.isEventListenedTo(type) ? eventFlags.bodyB : 0);
      if (collisionFlag == 0) {
        return;
      }
      const contactId = event.data.getId();
      const bulletPos = event.data.getPosition();
      const bulletNormalB = event.data.getNormalB();
      const position = {
        x: bulletPos.x(),
        y: bulletPos.y(),
        z: bulletPos.z()
      };
      const normalB = {
        x: bulletNormalB.x(),
        y: bulletNormalB.y(),
        z: bulletNormalB.z()
      };
      if (collisionFlag & eventFlags.world) {
        this.dispatchEvent({
          type,
          data: {
            contactId,
            rigidBodyA,
            rigidBodyB,
            position: fromValues$1(position.x, position.y, position.z),
            normalB: fromValues$1(normalB.x, normalB.y, normalB.z)
          }
        });
      }
      if (collisionFlag & eventFlags.bodyA) {
        rigidBodyA.dispatchEvent({
          type,
          data: {
            contactId,
            other: rigidBodyB,
            position: fromValues$1(position.x, position.y, position.z),
            normalB: fromValues$1(-normalB.x, -normalB.y, -normalB.z)
          }
        });
      }
      if (collisionFlag & eventFlags.bodyB) {
        rigidBodyB.dispatchEvent({
          type,
          data: {
            contactId,
            other: rigidBodyA,
            position: fromValues$1(position.x, position.y, position.z),
            normalB: fromValues$1(normalB.x, normalB.y, normalB.z)
          }
        });
      }
    };
    const bullet = WasmModuleHolder.get();
    bullet.on("beginContact", _onContactChange);
    bullet.on("updateContact", _onContactChange);
    bullet.on("endContact", _onContactChange);
    bullet.on("ccdContact", _onContactChange);
    bullet.listenToContactCallbacks();
  }
  stepSimulation(deltaTimeSec, maxSubSteps = 3, fixedStep = 1 / 60) {
    this._rawDynamicsWorld.stepSimulation(deltaTimeSec, maxSubSteps, fixedStep);
  }
  setGravity(x, y, z) {
    const bullet = WasmModuleHolder.get();
    const newVel = new bullet.btVector3(x, y, z);
    this._rawDynamicsWorld.setGravity(newVel);
    bullet.destroy(newVel);
  }
  setDebugWireframeCallback(callback) {
    const bullet = WasmModuleHolder.get();
    const contactPtr = bullet.addFunction(callback, "vfffffffff");
    this._rawDynamicsWorld.setDebugWireframeCallback(contactPtr);
  }
  setDebugWireframeFeaturesFlag(flag) {
    this._rawDynamicsWorld.setDebugWireframeFeaturesFlag(flag);
  }
  debugDrawWorld() {
    this._rawDynamicsWorld.debugDrawWorld();
  }
}
var DebugDrawFlags;
(function(DebugDrawFlags2) {
  DebugDrawFlags2[DebugDrawFlags2["DBG_NoDebug"] = 0] = "DBG_NoDebug";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawWireframe"] = 1] = "DBG_DrawWireframe";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawAabb"] = 2] = "DBG_DrawAabb";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawFeaturesText"] = 4] = "DBG_DrawFeaturesText";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawContactPoints"] = 8] = "DBG_DrawContactPoints";
  DebugDrawFlags2[DebugDrawFlags2["DBG_NoDeactivation"] = 16] = "DBG_NoDeactivation";
  DebugDrawFlags2[DebugDrawFlags2["DBG_NoHelpText"] = 32] = "DBG_NoHelpText";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawText"] = 64] = "DBG_DrawText";
  DebugDrawFlags2[DebugDrawFlags2["DBG_ProfileTimings"] = 128] = "DBG_ProfileTimings";
  DebugDrawFlags2[DebugDrawFlags2["DBG_EnableSatComparison"] = 256] = "DBG_EnableSatComparison";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DisableBulletLCP"] = 512] = "DBG_DisableBulletLCP";
  DebugDrawFlags2[DebugDrawFlags2["DBG_EnableCCD"] = 1024] = "DBG_EnableCCD";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawConstraints"] = 2048] = "DBG_DrawConstraints";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawConstraintLimits"] = 4096] = "DBG_DrawConstraintLimits";
  DebugDrawFlags2[DebugDrawFlags2["DBG_FastWireframe"] = 8192] = "DBG_FastWireframe";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawNormals"] = 16384] = "DBG_DrawNormals";
  DebugDrawFlags2[DebugDrawFlags2["DBG_DrawFrames"] = 32768] = "DBG_DrawFrames";
})(DebugDrawFlags || (DebugDrawFlags = {}));
var index = Object.freeze({
  __proto__: null,
  ConcretePhysicBody,
  ConcretePhysicVehicle,
  ContactEventHandler,
  get DebugDrawFlags() {
    return DebugDrawFlags;
  },
  PhysicWorld,
  WasmModuleHolder,
  convexSweep,
  rayCast
});
var $BrowserFrankenPhysWasmModule = BrowserFrankenPhysWasmModule;
var $physics = index;

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/ray-tracer.glsl.vert
var ray_tracer_glsl_default = `
#version 300 es

precision highp float;

in vec2 a_vertexPosition;
in vec3 a_plotPosition;

out vec3 v_position;

void main(void)
{
  gl_Position = vec4(a_vertexPosition, 1.0, 1.0);

  v_position = a_plotPosition;
}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/ray-tracer.glsl.frag
var ray_tracer_glsl_default2 = `
#version 300 es

precision highp float;

//
//
//


// Indices of refractionFactor
const float Air = 1.0;
const float Glass = 1.51714;

// Air to glass ratio of the indices of refractionFactor (Eta)
const float Eta = Air / Glass;

// see http://en.wikipedia.org/wiki/Refractive_index Reflectivity
const float R0 = ((Air - Glass) * (Air - Glass)) / ((Air + Glass) * (Air + Glass));

//
//
//

uniform vec3        u_cameraEye;

//

uniform sampler2D   u_sceneTextureData;
uniform int         u_sceneTextureSize;

uniform int       u_spheresStart;
uniform int       u_spheresStop;

uniform int       u_boxesStart;
uniform int       u_boxesStop;

uniform int       u_trianglesStart;
uniform int       u_trianglesStop;

//

uniform sampler2D   u_lightsTextureData;

uniform int       u_sunLightsStart;
uniform int       u_sunLightsStop;

uniform int       u_spotLightsStart;
uniform int       u_spotLightsStop;

//
//
//

in vec3  v_position;

out vec4 o_color;

//

const float     g_ambiantLight = 0.15;

const vec3      g_backgroundColor = vec3(0.1);

//

struct RayValues
{
  vec3 origin;
  vec3 direction;
};

struct RayResult
{
  bool hasHit;
  float distance;
  vec3 position;
  vec3 normal;
  vec4 color;
  float reflectionFactor;
  float refractionFactor;
  bool lightEnabled;
};


struct StackData
{
  // int parentIndex;
  bool used;
  RayValues ray;
  RayResult result;
  int reflectionIndex;
  int refractionIndex;
};

//
//
//
//
//

float getSceneDataByIndex(int index)
{
  return texelFetch(u_sceneTextureData, ivec2(index, 0), 0).x;
}

vec3 getSceneVec3ByIndex(int index)
{
  return vec3(
    texelFetch(u_sceneTextureData, ivec2(index + 0, 0), 0).x,
    texelFetch(u_sceneTextureData, ivec2(index + 1, 0), 0).x,
    texelFetch(u_sceneTextureData, ivec2(index + 2, 0), 0).x
  );
}

float getLightsDataByIndex(int index)
{
  return texelFetch(u_lightsTextureData, ivec2(index, 0), 0).x;
}

vec3 getLightsVec3ByIndex(int index)
{
  return vec3(
    texelFetch(u_lightsTextureData, ivec2(index + 0, 0), 0).x,
    texelFetch(u_lightsTextureData, ivec2(index + 1, 0), 0).x,
    texelFetch(u_lightsTextureData, ivec2(index + 2, 0), 0).x
  );
}

vec3 apply_quat_to_vec3(vec3 position, vec4 q)
{
  vec3 v = position.xyz;
  return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
}
mat3 quat_to_mat3(vec4 q)
{

  // multiply by sqrt(2) to get rid of all the 2.0 factors in the matrix
  q *= 1.414214;

  float xx = q.x * q.x;
  float xy = q.x * q.y;
  float xz = q.x * q.z;
  float xw = q.x * q.w;

  float yy = q.y * q.y;
  float yz = q.y * q.z;
  float yw = q.y * q.w;

  float zz = q.z * q.z;
  float zw = q.z * q.w;

  return mat3(
    1.0 - yy - zz,
    xy + zw,
    xz - yw,

    xy - zw,
    1.0 - xx - zz,
    yz + xw,

    xz + yw,
    yz - xw,
    1.0 - xx - yy
  );
}
//
//
//
//
//

bool intersectSphere(RayValues ray, float radius, out float outDistance, out vec3 normal)
{
  float nearValue = 0.001; // TODO: hardcoded
  float farValue = 100.0; // TODO: hardcoded

  float b = dot(ray.origin, ray.direction);
  float c = dot(ray.origin, ray.origin) - radius * radius;
  float h = b * b - c;
  if (h < 0.0) {
    return false;
  }

  h = sqrt(h);

  float d1 = -b - h;
  if (d1 >= nearValue && d1 <= farValue)
  {
    normal = normalize(ray.origin + ray.direction * d1);
    outDistance = d1;
    return true;
  }

  float d2 = -b + h;
  if (d2 >= nearValue && d2 <= farValue)
  {
    normal = normalize(ray.origin + ray.direction * d2);
    outDistance = d2;
    return true;
  }

  return false;
}

bool intersectBox(RayValues ray, vec3 boxSize, out float outDistance, out vec3 normal)
{
  float nearValue = 0.001; // TODO: hardcoded
  float farValue = 100.0; // TODO: hardcoded

  //
  //
  // sad hack: fix a shadow related bug

  // if (ray.origin.x == 0.0) ray.origin.x = -1e-8;
  // if (ray.origin.y == 0.0) ray.origin.y = -1e-8;
  // if (ray.origin.z == 0.0) ray.origin.z = -1e-8;

  if (ray.direction.x == 0.0) ray.direction.x = -1e-8;
  if (ray.direction.y == 0.0) ray.direction.y = -1e-8;
  if (ray.direction.z == 0.0) ray.direction.z = -1e-8;

  // sad hack: fix a shadow related bug
  //
  //

  vec3 m = sign(ray.direction) / max(abs(ray.direction), 1e-8);
  vec3 n = m * ray.origin;
  vec3 k = abs(m) * boxSize;

  vec3 t1 = -n - k;
  vec3 t2 = -n + k;

  float tN = max(max(t1.x, t1.y), t1.z);
  float tF = min(min(t2.x, t2.y), t2.z);

  if (tN > tF || tF <= 0.0) {
    return false;
  }

  if (tN >= nearValue && tN <= farValue)
  {
    normal = normalize(-sign(ray.direction) * step(t1.yzx, t1.xyz) * step(t1.zxy, t1.xyz));
    outDistance = tN;
    return true;
  }

  if (tF >= nearValue && tF <= farValue)
  {
    normal = normalize(-sign(ray.direction) * step(t1.yzx, t1.xyz) * step(t1.zxy, t1.xyz));
    outDistance = tF;
    return true;
  }

  return false;
}

bool intersectTriangle(RayValues ray, vec3 v0, vec3 v1, vec3 v2, out float outDistance, out vec3 normal)
{
  float nearValue = 0.001; // TODO: hardcoded
  float farValue = 100.0; // TODO: hardcoded

  vec3 v1v0 = v1 - v0;
  vec3 v2v0 = v2 - v0;
  vec3 rov0 = ray.origin - v0;

  vec3 n = cross(v1v0, v2v0);
  vec3 q = cross(rov0, ray.direction);
  float d = 1.0 / dot(ray.direction, n);
  float u = d * dot(-q, v2v0);
  float v = d * dot(q, v1v0);
  float t = d * dot(-n, rov0);

  if (u < 0.0 || v < 0.0 || (u + v) > 1.0 || t < nearValue || t > farValue) {
    return false;
  }

  normal = normalize(-n);
  outDistance = t;
  return true;
}

// float intersectPlane(RayValues ray, vec3 normal, float offset)
// {
//     return -(dot(ray.origin, normal) + offset) / dot(ray.direction, normal);
// }

// float intersectPlane2(RayValues ray, vec3 normal, float offset)
// {
//     float nearValue = 0.001; // TODO: hardcoded
//     float farValue = 1000.0; // TODO: hardcoded

//     float a = dot(ray.direction, normal);
//     float d = -(dot(ray.origin, normal) + offset) / a;

//     if (a > 0.0 || d < nearValue || d > farValue)
//         return -1.0;

//     return d;
// }

// float diskIntersect(RayValues ray, vec3 center, vec3 normal, float radius)
// {
//     vec3  o = ray.origin - center;
//     float t = -dot(normal, o) / dot(ray.direction, normal);
//     vec3  q = o + ray.direction * t;
//     return (dot(q, q) < radius * radius) ? t : -1.0;
// }

//
//
//
//
//

bool intersectScene(RayValues ray, out RayResult outBestResult, bool shadowMode)
{
  float bestDistance = -1.0;

  outBestResult.hasHit = false;
  outBestResult.distance = -1.0;

  if (u_sceneTextureSize <= 0) {
    return false;
  }

  RayValues tmpRay;
  vec3 normal;

  for (int index = u_spheresStart; index < u_spheresStop; index += 16)
  {
    bool castShadow = (getSceneDataByIndex(index + 13) != 0.0);

    if (shadowMode && !castShadow) {
      continue; // this sphere does not cast a shadow
    }

    float refractionFactor = getSceneDataByIndex(index + 12);
    if (refractionFactor > 0.0)
    {

      // refraction logic

      vec3 center = getSceneVec3ByIndex(index + 0);

      float radius = getSceneDataByIndex(index + 7);

      tmpRay.origin = ray.origin - center;
      tmpRay.direction = ray.direction;

      float currDistance1 = 0.0;
      if (
        !intersectSphere(tmpRay, radius, currDistance1, normal) ||
        (outBestResult.distance > 0.0 && currDistance1 > outBestResult.distance)
      ) {
        continue;
      }

      // now collide with the inside of the sphere

      vec3 newOrigin = ray.origin + (currDistance1 * 1.01) * ray.direction;

      tmpRay.origin = (newOrigin - center);
      tmpRay.direction = ray.direction;

      tmpRay.direction = refract(tmpRay.direction, -normal, Eta);

      float currDistance2 = 0.0;
      if (
        !intersectSphere(tmpRay, radius, currDistance2, normal) ||
        (outBestResult.distance > 0.0 && currDistance2 > outBestResult.distance)
      ) {
        continue;
      }

      float reflectionFactor = getSceneDataByIndex(index + 11);

      outBestResult.hasHit = true;
      outBestResult.distance = currDistance1 + currDistance2;
      outBestResult.position = newOrigin + (currDistance2 * 1.01) * ray.direction;
      outBestResult.normal = normal;
      outBestResult.reflectionFactor = reflectionFactor;
      outBestResult.refractionFactor = refractionFactor;

      bool lightEnabled = (getSceneDataByIndex(index + 14) != 0.0);
      outBestResult.lightEnabled = lightEnabled;

      vec3 color = getSceneVec3ByIndex(index + 8);

      outBestResult.color = vec4(color, 0.5);

      continue; // bypass non refractive logic
    }


    vec3 center = getSceneVec3ByIndex(index + 0);
    vec4 orientation = vec4(
      getSceneDataByIndex(index + 3),
      getSceneDataByIndex(index + 4),
      getSceneDataByIndex(index + 5),
      getSceneDataByIndex(index + 6)
    );
    mat3 normalMatrix = quat_to_mat3(orientation);
    mat3 inverseNormalMatrix = inverse(normalMatrix);

    float radius = getSceneDataByIndex(index + 7);

    // convert ray from world space to box space
    tmpRay.origin = (inverseNormalMatrix * (ray.origin - center));
    tmpRay.direction = (inverseNormalMatrix * ray.direction);

    float currDistance = 0.0;
    if (
      !intersectSphere(tmpRay, radius, currDistance, normal) ||
      (outBestResult.distance > 0.0 && currDistance > outBestResult.distance)
    ) {
      continue;
    }

    // convert normal from box space to world space
    normal = normalMatrix * normal;

    outBestResult.hasHit = true;
    outBestResult.distance = currDistance;
    outBestResult.position = ray.origin + currDistance * ray.direction;
    outBestResult.normal = normal;
    outBestResult.refractionFactor = 0.0;

    bool chessboardMaterialEnabled = (getSceneDataByIndex(index + 15) != 0.0);

    if (chessboardMaterialEnabled)
    {
      vec3 localPos = ray.origin + currDistance * ray.direction;
      vec3 txPos = inverseNormalMatrix * (localPos - center);

      // chessboard color effect
      if (fract(txPos.x * 0.9) > 0.5 == fract(txPos.y * 0.9) > 0.5 == fract(txPos.z * 0.9) > 0.5)
      {

        if (shadowMode)
        {
          outBestResult.hasHit = false; // no shadow -> allow light to go through
        }
        else
        {
          outBestResult.color = vec4(1.0);
          outBestResult.reflectionFactor = 0.0; // override reflection -> plain color
          outBestResult.refractionFactor = 0.0;
        }

        continue;
      }
      else
      {
        outBestResult.hasHit = true;
        outBestResult.distance = currDistance;
        outBestResult.position = ray.origin + currDistance * ray.direction;
        outBestResult.normal = normal;
        // outBestResult.refractionFactor = 0.0;


        // blue/green, mat
        outBestResult.color = vec4(0.0, 0.4, 0.45, 1.0);
        outBestResult.reflectionFactor = 0.0;
        outBestResult.refractionFactor = 0.0;
      }
    }
    else
    {

      outBestResult.hasHit = true;
      outBestResult.distance = currDistance;
      outBestResult.position = ray.origin + currDistance * ray.direction;
      outBestResult.normal = normal;
      // outBestResult.refractionFactor = 0.0;

      vec3 color = getSceneVec3ByIndex(index + 8);

      float reflectionFactor = getSceneDataByIndex(index + 11);

      outBestResult.color = vec4(color, 0.5);
      outBestResult.reflectionFactor = reflectionFactor;
      outBestResult.refractionFactor = refractionFactor;
    }

    bool lightEnabled = (getSceneDataByIndex(index + 14) != 0.0);
    outBestResult.lightEnabled = lightEnabled;
  }

  for (int index = u_boxesStart; index < u_boxesStop; index += 18)
  {
    bool castShadow = (getSceneDataByIndex(index + 15) != 0.0);

    if (shadowMode && !castShadow) {
      continue;
    }

    tmpRay.origin = ray.origin;
    tmpRay.direction = ray.direction;

    vec3 center = getSceneVec3ByIndex(index + 0);
    vec4 orientation = vec4(
      getSceneDataByIndex(index + 3),
      getSceneDataByIndex(index + 4),
      getSceneDataByIndex(index + 5),
      getSceneDataByIndex(index + 6)
    );

    vec3 boxSize = getSceneVec3ByIndex(index + 7);

    float refractionFactor = getSceneDataByIndex(index + 14);
    if (refractionFactor > 0.0)
    {

      // refraction logic

      // convert ray from world space to sphere space
      mat3 normalMatrix = quat_to_mat3(orientation);
      mat3 inverseNormalMatrix = inverse(normalMatrix);

      tmpRay.origin = (inverseNormalMatrix * (ray.origin - center));
      tmpRay.direction = (inverseNormalMatrix * ray.direction);

      float currDistance1 = 0.0;
      if (
        !intersectBox(tmpRay, boxSize, currDistance1, normal) ||
        (outBestResult.distance > 0.0 && currDistance1 > outBestResult.distance)
      ) {
        continue;
      }

      // now collide with the inside of the box

      vec3 newOrigin = ray.origin + (currDistance1 * 1.000) * ray.direction;

      tmpRay.origin = inverseNormalMatrix * (newOrigin - center);
      tmpRay.direction = refract(tmpRay.direction, normal, Eta);

      float currDistance2 = 0.0;
      if (
        !intersectBox(tmpRay, boxSize, currDistance2, normal) ||
        (outBestResult.distance > 0.0 && currDistance2 > outBestResult.distance)
      ) {
        continue;
      }

      // convert normal from box space to world space
      normal = normalMatrix * normal;

      float reflectionFactor = getSceneDataByIndex(index + 13);

      outBestResult.hasHit = true;
      outBestResult.distance = currDistance1 + currDistance2;
      outBestResult.position = newOrigin + (currDistance2 * 1.000) * ray.direction;
      outBestResult.normal = normal;
      outBestResult.reflectionFactor = reflectionFactor;
      outBestResult.refractionFactor = refractionFactor;

      bool lightEnabled = (getSceneDataByIndex(index + 16) != 0.0);
      outBestResult.lightEnabled = lightEnabled;

      vec3 color = getSceneVec3ByIndex(index + 10);

      outBestResult.color = vec4(color, 0.5);

      continue; // bypass non refractive logic
    }

    // convert ray from world space to sphere space
    mat3 normalMatrix = quat_to_mat3(orientation);
    mat3 inverseNormalMatrix = inverse(normalMatrix);
    tmpRay.origin = (inverseNormalMatrix * (ray.origin - center));
    tmpRay.direction = (inverseNormalMatrix * tmpRay.direction);

    float currDistance = 0.0;
    if (
      !intersectBox(tmpRay, boxSize, currDistance, normal) ||
      (outBestResult.distance > 0.0 && currDistance > outBestResult.distance)
    ) {
      continue;
    }

    // convert normal from box space to world space
    normal = normalMatrix * normal;

    outBestResult.hasHit = true;
    outBestResult.distance = currDistance;
    outBestResult.position = ray.origin + currDistance * ray.direction;
    outBestResult.normal = normal;

    bool chessboardMaterialEnabled = (getSceneDataByIndex(index + 17) != 0.0);

    if (chessboardMaterialEnabled)
    {
      outBestResult.reflectionFactor = 0.5;
      outBestResult.refractionFactor = 0.0; // TODO

      // the multiplication by 0.999 will remove graphic artifact
      vec3 txPos = (inverseNormalMatrix * 0.999) * (center - outBestResult.position);

      // chessboard color effect
      // if (fract(txPos.x * 0.2) > 0.5 == fract(txPos.z * 0.2) > 0.5 == fract(txPos.y * 0.2) > 0.5)
      if (fract(txPos.x * 0.9) > 0.5 == fract(txPos.y * 0.9) > 0.5 == fract(txPos.z * 0.9) > 0.5)
      {
        outBestResult.color = vec4(1.0);
      }
      else
      {
        outBestResult.color = vec4(0.0, 0.4, 0.45, 1.0);
      }
    }
    else
    {
      vec3 color = getSceneVec3ByIndex(index + 10);

      float reflectionFactor = getSceneDataByIndex(index + 13);

      outBestResult.color = vec4(color, 1.0);
      outBestResult.reflectionFactor = reflectionFactor;
      outBestResult.refractionFactor = refractionFactor;
    }

    bool lightEnabled = (getSceneDataByIndex(index + 16) != 0.0);
    outBestResult.lightEnabled = lightEnabled;
  }

  for (int index = u_trianglesStart; index < u_trianglesStop; index += 15)
  {
    bool castShadow = (getSceneDataByIndex(index + 13) != 0.0);

    if (shadowMode && !castShadow) {
      continue;
    }

    tmpRay.origin = ray.origin;
    tmpRay.direction = ray.direction;

    vec3 v0 = getSceneVec3ByIndex(index + 0);
    vec3 v1 = getSceneVec3ByIndex(index + 3);
    vec3 v2 = getSceneVec3ByIndex(index + 6);

    float currDistance = 0.0;
    if (
      !intersectTriangle(tmpRay, v0, v1, v2, currDistance, normal) ||
      (outBestResult.distance > 0.0 && currDistance > outBestResult.distance)
    ) {
      continue;
    }

    outBestResult.hasHit = true;
    outBestResult.distance = currDistance;
    outBestResult.position = ray.origin + currDistance * ray.direction;
    outBestResult.normal = normal;

    outBestResult.refractionFactor = 0.0; // TODO

    vec3 color = getSceneVec3ByIndex(index + 9);

    float reflectionFactor = getSceneDataByIndex(index + 12);

    outBestResult.color = vec4(color, 1.0);
    outBestResult.reflectionFactor = reflectionFactor;

    bool lightEnabled = (getSceneDataByIndex(index + 14) != 0.0);
    outBestResult.lightEnabled = lightEnabled;

    // if (shadowMode)
    //     return true;
  }

  { // plane test

    // vec3 planeNormal = normalize(vec3(0.0, 0.0, 1.0));
    // float val = intersectPlane(tmpRay, planeNormal, 35.0/4.0*3.0);

    // vec3 planeNormal = normalize(vec3(0.0, 0.0, 1.0));
    // float val = intersectPlane(tmpRay, planeNormal, 0.0);

    // vec3 planeNormal = normalize(vec3(0.0, 0.0, 1.0));
    // float val = intersectPlane(tmpRay, planeNormal, 10.0);

    // if (val > 0.0 && (bestDistance <= 0.0 || val < bestDistance))
    // {
    //     outBestResult.hasHit = true;
    //     outBestResult.distance = val;
    //     outBestResult.position = ray.origin + val * ray.direction;
    //     outBestResult.normal = vec3(planeNormal);
    //     outBestResult.color = vec4(1.0, 1.0, 1.0, 1.0);
    //     outBestResult.reflectionFactor = 0.0;
    //     outBestResult.lightEnabled = true;
    // }

  } // plane test

  return outBestResult.hasHit;
}

float lightAt(vec3 impactPosition, vec3 impactNormal, vec3 viewer)
{
  float bestIntensity = 0.0;

  for (int index = u_sunLightsStart; index < u_sunLightsStop; index += 4)
  {
    vec3 lightDir = getLightsVec3ByIndex(index + 0);
    float localIntensity = getLightsDataByIndex(index + 3);

    float coef = localIntensity;
    lightDir = normalize(lightDir);

    // is the sun light blocked by an object?
    RayResult result;
    if (intersectScene(RayValues(impactPosition, lightDir), result, true)) {
      // light ray is blocked, skip this light
      continue;
    }

    //
    //
    //

    float intensity = 0.0;
    vec3 reflectionFactor = reflect(-lightDir, impactNormal);
    intensity += 0.6 * pow(max(dot(reflectionFactor, viewer), 0.0), 30.0);
    intensity += 1.0 * dot(lightDir, impactNormal);

    intensity *= coef;

    if (bestIntensity < intensity) {
      bestIntensity = intensity;
    }
  }

  for (int index = u_spotLightsStart; index < u_spotLightsStop; index += 5)
  {
    vec3 lightDir = vec3(1.0);
    float coef = 1.0;

    // spot light

    vec3 lightPos = getLightsVec3ByIndex(index + 0);
    float lightRadius = getLightsDataByIndex(index + 3);

    vec3 lightToImpactVec3 = lightPos - impactPosition;

    // is it out of the spot light effect radius?
    float lightToImpactDistance = length(lightToImpactVec3);
    if (lightToImpactDistance > lightRadius) {
      // out of range, do not apply this light
      continue;
    }

    lightDir.x = lightToImpactVec3.x / lightToImpactDistance; // normalize
    lightDir.y = lightToImpactVec3.y / lightToImpactDistance; // normalize
    lightDir.z = lightToImpactVec3.z / lightToImpactDistance; // normalize

    float localIntensity = getLightsDataByIndex(index + 4);

    coef = localIntensity * (1.0 - lightToImpactDistance / lightRadius);

    RayResult result;
    if (
      // is the spot light blocked by an object?
      intersectScene(RayValues(impactPosition, lightDir), result, true) &&
      // is the blocking object in range of the spot light effect radius?
      result.distance < lightToImpactDistance
    ) {
      // light ray is blocked, skip this light
      continue;
    }

    //
    //
    //

    float intensity = 0.0;
    vec3 reflectionFactor = reflect(-lightDir, impactNormal);
    intensity += 0.6 * pow(max(dot(reflectionFactor, viewer), 0.0), 30.0);
    intensity += 1.0 * dot(lightDir, impactNormal);

    intensity *= coef;

    if (bestIntensity < intensity) {
      bestIntensity = intensity;
    }
  }

  return max(g_ambiantLight, bestIntensity);
}

void main()
{
  //
  //
  // initial ray

  vec3 rayDir = normalize(v_position - u_cameraEye); // camera direction
  vec3 finalPixelColor = g_backgroundColor;

  const int maxStack = 4;
  StackData _stack[maxStack];

  // initialize stack
  for (int ii = 0; ii < maxStack; ++ii)
  {
    _stack[ii].used = false;
    _stack[ii].result.reflectionFactor = 0.0;
    _stack[ii].result.refractionFactor = 0.0;
    _stack[ii].result.lightEnabled = false;
    _stack[ii].reflectionIndex = -1;
    _stack[ii].refractionIndex = -1;
  }

  // initialize first stack element
  _stack[0].used = true;
  _stack[0].ray = RayValues(u_cameraEye, rayDir);
  _stack[0].result.position = u_cameraEye;
  _stack[0].result.reflectionFactor = 1.0;
  _stack[0].result.refractionFactor = 1.0;
  _stack[0].result.lightEnabled = true;
  _stack[0].reflectionIndex = -1;
  _stack[0].refractionIndex = -1;

  int stackIndex = 0;

  for (int ii = 0; ii < maxStack; ++ii)
  {
    // intersect object
    // if reflection/refraction push to stack & set index
    // repeat

    if (!_stack[ii].used) {
      break;
    }

    _stack[ii].result.hasHit = intersectScene(
      _stack[ii].ray,
      _stack[ii].result,
      false
    );

    if (!_stack[ii].result.hasHit)
    {
      continue;
    }

    float lightIntensity = 1.0;

    if (_stack[ii].result.lightEnabled)
    {
      lightIntensity = lightAt(
        _stack[ii].result.position,
        _stack[ii].result.normal,
        -_stack[ii].ray.direction
      );
    }

    _stack[ii].result.color.xyz *= lightIntensity;

    if (_stack[ii].result.lightEnabled && lightIntensity <= 0.0)
    {
      // not lit
      continue;
    }

    // reflection/refraction here

    if (stackIndex + 1 >= maxStack)
    {
      // no more stack space left
      continue;
    }

    if (_stack[ii].result.refractionFactor > 0.0)
    {
      // push refraction to the stack
      stackIndex += 1;

      _stack[stackIndex].used = true;
      _stack[stackIndex].ray.origin = _stack[ii].result.position;
      _stack[stackIndex].ray.direction = refract(_stack[ii].ray.direction, _stack[ii].result.normal, Eta);

      _stack[ii].refractionIndex = stackIndex;
    }

    if (_stack[ii].result.reflectionFactor > 0.0)
    {
      // push reflection to the stack
      stackIndex += 1;

      _stack[stackIndex].used = true;
      _stack[stackIndex].ray.origin = _stack[ii].result.position;
      _stack[stackIndex].ray.direction = reflect(_stack[ii].ray.direction, _stack[ii].result.normal);

      _stack[ii].reflectionIndex = stackIndex;
    }

  }

  // combine all colors, from last to first
  for (int ii = maxStack - 1; ii >= 0; --ii)
  {


    if (!_stack[ii].used || !_stack[ii].result.hasHit) {
      _stack[ii].result.color.xyz = g_backgroundColor;
      continue;
    }

    if (_stack[ii].reflectionIndex != -1)
    {
      _stack[ii].result.color.xyz =
        _stack[ii].result.color.xyz * (1.0 - _stack[ii].result.reflectionFactor) +
        _stack[_stack[ii].reflectionIndex].result.color.xyz * _stack[ii].result.reflectionFactor;
    }

    if (_stack[ii].refractionIndex != -1)
    {
      _stack[ii].result.color.xyz =
        _stack[ii].result.color.xyz * (1.0 - _stack[ii].result.refractionFactor) +
        _stack[_stack[ii].refractionIndex].result.color.xyz * _stack[ii].result.refractionFactor;
    }
  }

  if (_stack[0].result.hasHit) {
    finalPixelColor = _stack[0].result.color.xyz;
  }

  o_color = vec4(finalPixelColor, 1.0);

}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/texture.glsl.vert
var texture_glsl_default = `
#version 300 es

precision highp float;

in vec2 a_vertexPosition;
in vec2 a_vertexTextureCoord;

out vec2 v_textureCoord;

void main(void)
{
  v_textureCoord = a_vertexTextureCoord;

  gl_Position = vec4(a_vertexPosition, 1.0, 1.0);
}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/shaders/texture.glsl.frag
var texture_glsl_default2 = `
#version 300 es

precision highp float;

uniform sampler2D u_texture;
uniform vec2 u_step;

in vec2 v_textureCoord;

out vec4 o_color;

void main(void)
{
  // gl_FragColor = texture(u_texture, v_textureCoord);

  float total = 0.0;
  vec4 accumulated = vec4(0.0);

  //

  if (v_textureCoord.x - u_step.x > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x - u_step.x, v_textureCoord.y));
    total += 1.0;
  }

  if (v_textureCoord.x + u_step.x > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x + u_step.x, v_textureCoord.y));
    total += 1.0;
  }

  if (v_textureCoord.y - u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x, v_textureCoord.y - u_step.y));
    total += 1.0;
  }

  if (v_textureCoord.y + u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x, v_textureCoord.y + u_step.y));
    total += 1.0;
  }

  //

  if (v_textureCoord.x - u_step.x > 0.0 && v_textureCoord.y - u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x - u_step.x, v_textureCoord.y - u_step.y));
    total += 1.0;
  }

  if (v_textureCoord.x + u_step.x > 0.0 && v_textureCoord.y - u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x + u_step.x, v_textureCoord.y - u_step.y));
    total += 1.0;
  }

  if (v_textureCoord.x - u_step.x > 0.0 && v_textureCoord.y + u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x - u_step.x, v_textureCoord.y + u_step.y));
    total += 1.0;
  }

  if (v_textureCoord.x + u_step.x > 0.0 && v_textureCoord.y + u_step.y > 0.0)
  {
    accumulated += texture(u_texture, vec2(v_textureCoord.x + u_step.x, v_textureCoord.y + u_step.y));
    total += 1.0;
  }

  //

  if (total > 0.0)
    o_color = accumulated / total;
  else
    o_color = vec4(1.0, 0.0, 0.0, 1.0); // warning
}
`.trim();

// src/webgl-ray-tracer/src/experiment/graphics/renderers/ray-tracer-renderer/RayTracerRenderer.ts
var {
  WebGLContext: WebGLContext14,
  DataTexture: DataTexture3,
  Texture: Texture4,
  FrameBuffer: FrameBuffer3,
  ShaderProgram: ShaderProgram3,
  GeometryWrapper
} = exports_graphics.webgl2;
var _degreeToRad = (angle3) => angle3 * Math.PI / 180;

class RayTracerRenderer {
  _cameraFovy;
  _canvasWidth;
  _canvasHeight;
  _renderWidth;
  _renderHeight;
  _resolutionCoef = 1;
  _antiAliasing = false;
  _rayTracerShaderProgram;
  _textureShaderProgram;
  _rayTracerGeometry;
  _screenGeometry;
  _finalTexture;
  _frameBuffer;
  _sceneDataTexture;
  _spheres = [];
  _boxes = [];
  _triangles = [];
  _lightsDataTexture;
  _sunLights = [];
  _spotLights = [];
  _camera;
  constructor(inDef) {
    this._cameraFovy = inDef.fovy;
    this._renderWidth = this._canvasWidth = inDef.canvasWidth;
    this._renderHeight = this._canvasHeight = inDef.canvasHeight;
    this._rayTracerShaderProgram = new ShaderProgram3("RayTracerRenderer-1", {
      vertexSrc: ray_tracer_glsl_default,
      fragmentSrc: ray_tracer_glsl_default2,
      attributes: ["a_vertexPosition", "a_plotPosition"],
      uniforms: [
        "u_cameraEye",
        "u_sceneTextureData",
        "u_sceneTextureSize",
        "u_spheresStart",
        "u_spheresStop",
        "u_boxesStart",
        "u_boxesStop",
        "u_trianglesStart",
        "u_trianglesStop",
        "u_lightsTextureData",
        "u_sunLightsStart",
        "u_sunLightsStop",
        "u_spotLightsStart",
        "u_spotLightsStop"
      ]
    });
    this._textureShaderProgram = new ShaderProgram3("RayTracerRenderer-1", {
      vertexSrc: texture_glsl_default,
      fragmentSrc: texture_glsl_default2,
      attributes: ["a_vertexPosition", "a_vertexTextureCoord"],
      uniforms: ["u_texture", "u_step"]
    });
    this._finalTexture = new Texture4;
    this._frameBuffer = new FrameBuffer3;
    this._finalTexture.initialize();
    this._finalTexture.preBind((boundTexture) => {
      boundTexture.allocate(this._renderWidth, this._renderHeight);
      this._frameBuffer.bind((boundFrameBuffer) => {
        boundFrameBuffer.attachTexture(boundTexture);
      });
    });
    const geoBuilder = new GeometryWrapper.GeometryBuilder;
    geoBuilder.reset().setPrimitiveType("triangleStrip").addVbo().addVboAttribute("a_vertexPosition", "vec2f").addVbo().setVboAsDynamic().addVboAttribute("a_plotPosition", "vec3f");
    this._rayTracerGeometry = new GeometryWrapper.Geometry(this._rayTracerShaderProgram, geoBuilder.getDef());
    const rayTracerVertices = [];
    rayTracerVertices.push(1, 1);
    rayTracerVertices.push(-1, 1);
    rayTracerVertices.push(1, -1);
    rayTracerVertices.push(-1, -1);
    this._rayTracerGeometry.allocateBuffer(0, rayTracerVertices, rayTracerVertices.length);
    this._rayTracerGeometry.setPrimitiveStart(0);
    this._rayTracerGeometry.setPrimitiveCount(4);
    geoBuilder.reset().setPrimitiveType("triangleStrip").addVbo().addVboAttribute("a_vertexPosition", "vec2f").addVboAttribute("a_vertexTextureCoord", "vec2f");
    this._screenGeometry = new GeometryWrapper.Geometry(this._textureShaderProgram, geoBuilder.getDef());
    const screenVertices = [];
    screenVertices.push(1, 1, 1, 1);
    screenVertices.push(-1, 1, 0, 1);
    screenVertices.push(1, -1, 1, 0);
    screenVertices.push(-1, -1, 0, 0);
    this._screenGeometry.allocateBuffer(0, screenVertices, screenVertices.length);
    this._screenGeometry.setPrimitiveStart(0);
    this._screenGeometry.setPrimitiveCount(4);
    this._sceneDataTexture = new DataTexture3;
    this._sceneDataTexture.initialize(2048);
    this._lightsDataTexture = new DataTexture3;
    this._lightsDataTexture.initialize(2048);
    this._camera = {
      position: exports_vec3.fromValues(0, 0, 0),
      target: exports_vec3.fromValues(1.5, 1.5, 1.5),
      up: exports_vec3.fromValues(0, 1, 0)
    };
  }
  pushSphere({
    position,
    orientation,
    radius,
    color,
    reflectionFactor,
    refractionFactor,
    chessboardEnabled,
    castShadowEnabled,
    receiveLightEnabled
  }) {
    if (radius <= 0) {
      throw new Error("invalid sphere radius");
    }
    if (reflectionFactor < 0 || reflectionFactor > 1) {
      throw new Error("invalid sphere reflection");
    }
    if (refractionFactor < 0 || refractionFactor > 1) {
      throw new Error("invalid sphere refractionFactor");
    }
    this._spheres.push({
      position: [position[0], position[1], position[2]],
      orientation: [orientation[0], orientation[1], orientation[2], orientation[3]],
      radius,
      color: [color[0], color[1], color[2]],
      reflectionFactor,
      refractionFactor,
      chessboardEnabled,
      castShadowEnabled,
      receiveLightEnabled
    });
  }
  pushBox({
    position,
    orientation,
    boxSize,
    color,
    reflectionFactor,
    refractionFactor,
    chessboardEnabled,
    castShadowEnabled,
    receiveLightEnabled
  }) {
    if (boxSize[0] <= 0 || boxSize[1] <= 0 || boxSize[2] <= 0) {
      throw new Error("invalid box size");
    }
    if (reflectionFactor < 0 || reflectionFactor > 1) {
      throw new Error("invalid box reflection");
    }
    this._boxes.push({
      position: [position[0], position[1], position[2]],
      orientation: [orientation[0], orientation[1], orientation[2], orientation[3]],
      boxSize: exports_vec3.clone(boxSize),
      color: exports_vec3.clone(color),
      reflectionFactor,
      refractionFactor,
      chessboardEnabled,
      castShadowEnabled,
      receiveLightEnabled
    });
  }
  pushTriangle({
    v0,
    v1,
    v2,
    color,
    reflectionFactor,
    castShadowEnabled,
    receiveLightEnabled
  }) {
    if (reflectionFactor < 0 || reflectionFactor > 1) {
      throw new Error("invalid triangle reflection");
    }
    this._triangles.push({
      v0: exports_vec3.clone(v0),
      v1: exports_vec3.clone(v1),
      v2: exports_vec3.clone(v2),
      color: exports_vec3.clone(color),
      reflectionFactor,
      castShadowEnabled,
      receiveLightEnabled
    });
  }
  pushSunLight({ direction, intensity }) {
    if (intensity <= 0)
      throw new Error("intensity cannot be 0");
    if (exports_vec3.length(direction) === 0)
      throw new Error("direction cannot be 0");
    const dir = exports_vec3.normalize(exports_vec3.clone(direction), direction);
    this._sunLights.push({ direction: dir, intensity });
  }
  pushSpotLight({ position, intensity, radius }) {
    if (intensity <= 0)
      throw new Error("intensity cannot be 0");
    if (radius <= 0)
      throw new Error("radius cannot be <= 0");
    this._spotLights.push({
      position: exports_vec3.clone(position),
      intensity,
      radius
    });
  }
  lookAt(eye, target, up) {
    exports_vec3.copy(this._camera.position, eye);
    let forwardDir = exports_vec3.sub(exports_vec3.create(), target, eye);
    forwardDir = exports_vec3.normalize(forwardDir, forwardDir);
    forwardDir = exports_vec3.add(forwardDir, eye, forwardDir);
    exports_vec3.copy(this._camera.target, forwardDir);
    const upDir = exports_vec3.normalize(exports_vec3.create(), up);
    exports_vec3.copy(this._camera.up, upDir);
  }
  render() {
    this._renderTexturePass();
    this._renderRayTracingPass();
  }
  _renderTexturePass() {
    const gl = WebGLContext14.getContext();
    gl.viewport(0, 0, this._canvasWidth, this._canvasHeight);
    gl.clear(gl.COLOR_BUFFER_BIT);
    const shader = this._textureShaderProgram;
    shader.bind((boundShader) => {
      boundShader.setTextureUniform("u_texture", this._finalTexture, 0);
      if (this._antiAliasing) {
        const stepX = (1 - this._renderWidth / this._canvasWidth) * 0.005;
        const stepY = (1 - this._renderHeight / this._canvasHeight) * 0.005;
        boundShader.setFloat2Uniform("u_step", stepX, stepY);
      } else {
        boundShader.setFloat2Uniform("u_step", 0, 0);
      }
      this._screenGeometry.render();
    });
  }
  _renderRayTracingPass() {
    const gl = WebGLContext14.getContext();
    const farCorners = this._computeCameraFarCorners();
    this._rayTracerGeometry.allocateBuffer(1, farCorners, farCorners.length);
    const scaledWidth = Math.floor(this._renderWidth);
    const scaledHeight = Math.floor(this._renderHeight);
    this._frameBuffer.bind(() => {
      gl.viewport(0, 0, scaledWidth, scaledHeight);
      gl.clear(gl.COLOR_BUFFER_BIT);
      {
        const shader = this._rayTracerShaderProgram;
        shader.bind((boundShader) => {
          boundShader.setFloat3Uniform("u_cameraEye", this._camera.position[0], this._camera.position[1], this._camera.position[2]);
          {
            const sceneDataValues = [];
            {
              {
                boundShader.setInteger1Uniform("u_spheresStart", 0);
                for (const sphere of this._spheres) {
                  sceneDataValues.push(sphere.position[0], sphere.position[1], sphere.position[2]);
                  sceneDataValues.push(sphere.orientation[0], sphere.orientation[1], sphere.orientation[2], sphere.orientation[3]);
                  sceneDataValues.push(sphere.radius);
                  sceneDataValues.push(sphere.color[0], sphere.color[1], sphere.color[2]);
                  sceneDataValues.push(sphere.reflectionFactor);
                  sceneDataValues.push(sphere.refractionFactor);
                  sceneDataValues.push(sphere.castShadowEnabled ? 1 : 0);
                  sceneDataValues.push(sphere.receiveLightEnabled ? 1 : 0);
                  sceneDataValues.push(sphere.chessboardEnabled ? 1 : 0);
                }
                boundShader.setInteger1Uniform("u_spheresStop", sceneDataValues.length);
              }
              {
                boundShader.setInteger1Uniform("u_boxesStart", sceneDataValues.length);
                for (const box of this._boxes) {
                  sceneDataValues.push(box.position[0], box.position[1], box.position[2]);
                  sceneDataValues.push(box.orientation[0], box.orientation[1], box.orientation[2], box.orientation[3]);
                  sceneDataValues.push(box.boxSize[0], box.boxSize[1], box.boxSize[2]);
                  sceneDataValues.push(box.color[0], box.color[1], box.color[2]);
                  sceneDataValues.push(box.reflectionFactor);
                  sceneDataValues.push(box.refractionFactor);
                  sceneDataValues.push(box.castShadowEnabled ? 1 : 0);
                  sceneDataValues.push(box.receiveLightEnabled ? 1 : 0);
                  sceneDataValues.push(box.chessboardEnabled ? 1 : 0);
                }
                boundShader.setInteger1Uniform("u_boxesStop", sceneDataValues.length);
              }
              {
                boundShader.setInteger1Uniform("u_trianglesStart", sceneDataValues.length);
                for (const triangle of this._triangles) {
                  sceneDataValues.push(triangle.v0[0], triangle.v0[1], triangle.v0[2]);
                  sceneDataValues.push(triangle.v1[0], triangle.v1[1], triangle.v1[2]);
                  sceneDataValues.push(triangle.v2[0], triangle.v2[1], triangle.v2[2]);
                  sceneDataValues.push(triangle.color[0], triangle.color[1], triangle.color[2]);
                  sceneDataValues.push(triangle.reflectionFactor);
                  sceneDataValues.push(triangle.castShadowEnabled ? 1 : 0);
                  sceneDataValues.push(triangle.receiveLightEnabled ? 1 : 0);
                }
                boundShader.setInteger1Uniform("u_trianglesStop", sceneDataValues.length);
              }
            }
            gl.activeTexture(gl.TEXTURE0 + 0);
            this._sceneDataTexture.preBind((boundDataTexture) => {
              boundDataTexture.update(0, sceneDataValues);
            });
            boundShader.setInteger1Uniform("u_sceneTextureData", 0);
            boundShader.setInteger1Uniform("u_sceneTextureSize", sceneDataValues.length);
          }
          {
            const lightsDataValues = [];
            {
              boundShader.setInteger1Uniform("u_sunLightsStart", 0);
              for (const sunLight of this._sunLights) {
                lightsDataValues.push(sunLight.direction[0], sunLight.direction[1], sunLight.direction[2]);
                lightsDataValues.push(sunLight.intensity);
              }
              boundShader.setInteger1Uniform("u_sunLightsStop", lightsDataValues.length);
            }
            {
              boundShader.setInteger1Uniform("u_spotLightsStart", lightsDataValues.length);
              for (const spotLight of this._spotLights) {
                lightsDataValues.push(spotLight.position[0], spotLight.position[1], spotLight.position[2]);
                lightsDataValues.push(spotLight.radius);
                lightsDataValues.push(spotLight.intensity);
              }
              boundShader.setInteger1Uniform("u_spotLightsStop", lightsDataValues.length);
            }
            gl.activeTexture(gl.TEXTURE0 + 1);
            this._lightsDataTexture.preBind((boundDataTexture) => {
              boundDataTexture.update(0, lightsDataValues);
            });
            boundShader.setInteger1Uniform("u_lightsTextureData", 1);
          }
          this._rayTracerGeometry.render();
        });
      }
    });
    gl.viewport(0, 0, this._canvasWidth, this._canvasHeight);
  }
  reset() {
    this._sunLights.length = 0;
    this._spotLights.length = 0;
    this._spheres.length = 0;
    this._boxes.length = 0;
    this._triangles.length = 0;
  }
  setResolutionCoef(inResolutionCoef) {
    if (inResolutionCoef === this._resolutionCoef || inResolutionCoef <= 0 || inResolutionCoef > 1) {
      return;
    }
    this._resolutionCoef = inResolutionCoef;
    this._renderWidth = Math.floor(this._canvasWidth * this._resolutionCoef);
    this._renderHeight = Math.floor(this._canvasHeight * this._resolutionCoef);
    this._finalTexture.preBind((boundTexture) => {
      boundTexture.resize(this._renderWidth, this._renderHeight);
    });
  }
  getResolutionCoef() {
    return this._resolutionCoef;
  }
  setAntiAliasing(enabled) {
    this._antiAliasing = enabled;
  }
  getAntiAliasing() {
    return this._antiAliasing;
  }
  getCurrentSize() {
    return [this._renderWidth, this._renderHeight];
  }
  _computeCameraFarCorners() {
    const forwardDir = exports_vec3.sub(exports_vec3.create(), this._camera.target, this._camera.position);
    const leftDir = exports_vec3.cross(exports_vec3.create(), forwardDir, this._camera.up);
    const upDir = exports_vec3.cross(exports_vec3.create(), leftDir, forwardDir);
    const radHFovy = _degreeToRad(this._cameraFovy * 0.5);
    const xLength = Math.cos(radHFovy) * 1 / Math.sin(radHFovy);
    const scaledForwardDir = exports_vec3.multiply(exports_vec3.create(), forwardDir, exports_vec3.fromValues(xLength, xLength, xLength));
    const farCenter = exports_vec3.add(exports_vec3.create(), this._camera.position, scaledForwardDir);
    const aspectRatio = this._canvasWidth / this._canvasHeight;
    const farHalfWidth = exports_vec3.multiply(exports_vec3.create(), leftDir, exports_vec3.fromValues(aspectRatio, aspectRatio, aspectRatio));
    const farUp = exports_vec3.add(exports_vec3.create(), farCenter, upDir);
    const farBottom = exports_vec3.subtract(exports_vec3.create(), farCenter, upDir);
    const farTopLeft = exports_vec3.subtract(exports_vec3.create(), farUp, farHalfWidth);
    const farBottomLeft = exports_vec3.subtract(exports_vec3.create(), farBottom, farHalfWidth);
    const farTopRight = exports_vec3.add(exports_vec3.create(), farUp, farHalfWidth);
    const farBottomRight = exports_vec3.add(exports_vec3.create(), farBottom, farHalfWidth);
    return [
      farTopRight[0],
      farTopRight[1],
      farTopRight[2],
      farTopLeft[0],
      farTopLeft[1],
      farTopLeft[2],
      farBottomRight[0],
      farBottomRight[1],
      farBottomRight[2],
      farBottomLeft[0],
      farBottomLeft[1],
      farBottomLeft[2]
    ];
  }
  get canvasWidth() {
    return this._canvasWidth;
  }
  get canvasHeight() {
    return this._canvasHeight;
  }
  get renderWidth() {
    return this._renderWidth;
  }
  get renderHeight() {
    return this._renderHeight;
  }
  get camera() {
    return this._camera;
  }
  get spheres() {
    return this._spheres;
  }
  get boxes() {
    return this._boxes;
  }
  get triangles() {
    return this._triangles;
  }
  get sunLights() {
    return this._sunLights;
  }
  get spotLights() {
    return this._spotLights;
  }
}
// src/webgl-ray-tracer/src/experiment/graphics/Renderer.ts
var { WebGLContext: WebGLContext15 } = exports_graphics.webgl2;
var { Camera: Camera3 } = exports_graphics.camera;
var { TextRenderer: TextRenderer3, StackRenderers: StackRenderers3 } = exports_graphics.renderers;
var k_fovy = 70;

class Renderer {
  _def;
  _rayTracerRenderer;
  _textRenderer;
  _stackRenderers;
  _multipleBuffering;
  _debugSceneCamera = new Camera3;
  _mainHudCamera = new Camera3;
  constructor(def) {
    this._def = def;
    this.resize(this._def.canvasDomElement.width, this._def.canvasDomElement.height);
    WebGLContext15.initialize(this._def.canvasDomElement);
    this._rayTracerRenderer = new RayTracerRenderer({
      canvasWidth: this._def.canvasDomElement.width,
      canvasHeight: this._def.canvasDomElement.height,
      fovy: k_fovy
    });
    this._textRenderer = new TextRenderer3;
    this._stackRenderers = new StackRenderers3;
    this._multipleBuffering = new exports_graphics.renderers.MultiBuffersRendering(this._def.canvasDomElement.width, this._def.canvasDomElement.height);
  }
  initialize() {
    const gl = WebGLContext15.getContext();
    const alignment = 1;
    gl.pixelStorei(gl.UNPACK_ALIGNMENT, alignment);
    gl.disable(gl.DEPTH_TEST);
    gl.disable(gl.BLEND);
    gl.disable(gl.CULL_FACE);
    gl.depthFunc(gl.NEVER);
    gl.clearColor(0, 0, 0, 1);
    gl.clearDepth(1);
  }
  resize(width, height) {
    this._debugSceneCamera.setViewportSize(width, height);
    this._debugSceneCamera.setAsPerspective({
      fovy: k_fovy,
      near: 1,
      far: 500
    });
    this._mainHudCamera.setViewportSize(width, height);
    const hWidth = width * 0.5;
    const hHeight = height * 0.5;
    this._mainHudCamera.setAsOrthogonal({
      left: -hWidth,
      right: +hWidth,
      top: -hHeight,
      bottom: +hHeight,
      near: -200,
      far: 200
    });
    this._mainHudCamera.setEye([hWidth, hHeight, 1]);
    this._mainHudCamera.setTarget([hWidth, hHeight, 0]);
    this._mainHudCamera.setUpAxis([0, 1, 0]);
    this._mainHudCamera.computeMatrices();
  }
  _pushWireFrameSphere(sphere) {
    const X = 0.5257311121191336 * sphere.radius;
    const Z = 0.8506508083520399 * sphere.radius;
    const N = 0;
    const positions = [
      [-X, N, Z],
      [X, N, Z],
      [-X, N, -Z],
      [X, N, -Z],
      [N, Z, X],
      [N, Z, -X],
      [N, -Z, X],
      [N, -Z, -X],
      [Z, X, N],
      [-Z, X, N],
      [Z, -X, N],
      [-Z, -X, N]
    ];
    for (let ii = 0;ii < positions.length; ++ii) {
      positions[ii][0] += sphere.position[0];
      positions[ii][1] += sphere.position[1];
      positions[ii][2] += sphere.position[2];
    }
    const indices = [
      [0, 4, 1],
      [0, 9, 4],
      [9, 5, 4],
      [4, 5, 8],
      [4, 8, 1],
      [8, 10, 1],
      [8, 3, 10],
      [5, 3, 8],
      [5, 2, 3],
      [2, 7, 3],
      [7, 10, 3],
      [7, 6, 10],
      [7, 11, 6],
      [11, 0, 6],
      [0, 1, 6],
      [6, 1, 10],
      [9, 0, 11],
      [9, 11, 2],
      [9, 2, 5],
      [7, 2, 11]
    ];
    for (const index2 of indices) {
      const v1 = positions[index2[0]];
      const v2 = positions[index2[1]];
      const v3 = positions[index2[2]];
      this._stackRenderers.pushLine(v1, v2, sphere.color);
      this._stackRenderers.pushLine(v2, v3, sphere.color);
      this._stackRenderers.pushLine(v3, v1, sphere.color);
    }
  }
  _pushWireFrameBox(box) {
    const vertices = [
      exports_vec3.fromValues(-box.boxSize[0], -box.boxSize[1], -box.boxSize[2]),
      exports_vec3.fromValues(+box.boxSize[0], -box.boxSize[1], -box.boxSize[2]),
      exports_vec3.fromValues(-box.boxSize[0], +box.boxSize[1], -box.boxSize[2]),
      exports_vec3.fromValues(+box.boxSize[0], +box.boxSize[1], -box.boxSize[2]),
      exports_vec3.fromValues(-box.boxSize[0], -box.boxSize[1], +box.boxSize[2]),
      exports_vec3.fromValues(+box.boxSize[0], -box.boxSize[1], +box.boxSize[2]),
      exports_vec3.fromValues(-box.boxSize[0], +box.boxSize[1], +box.boxSize[2]),
      exports_vec3.fromValues(+box.boxSize[0], +box.boxSize[1], +box.boxSize[2])
    ];
    const vertices2 = [];
    vertices.forEach((vertex) => {
      const pos = exports_vec3.fromValues(0, 0, 0);
      const mat4 = exports_mat4.identity(exports_mat4.create());
      exports_mat4.translate(mat4, mat4, box.position);
      const mat4b = exports_mat4.fromQuat(exports_mat4.create(), box.orientation);
      exports_mat4.multiply(mat4, mat4, mat4b);
      exports_vec3.transformMat4(pos, vertex, mat4);
      vertices2.push(pos);
    });
    const indicesGroup = [
      [0, 1],
      [1, 3],
      [3, 2],
      [2, 0],
      [4, 5],
      [5, 7],
      [7, 6],
      [6, 4],
      [0, 4],
      [1, 5],
      [3, 7],
      [2, 6]
    ];
    indicesGroup.forEach((index2) => {
      this._stackRenderers.pushLine(vertices2[index2[0]], vertices2[index2[1]], box.color);
    });
  }
  _pushWireFrameTriangle(triangle) {
    this._stackRenderers.pushLine(triangle.v0, triangle.v1, triangle.color);
    this._stackRenderers.pushLine(triangle.v1, triangle.v2, triangle.color);
    this._stackRenderers.pushLine(triangle.v2, triangle.v0, triangle.color);
  }
  safeSceneWireFrame(inCallback) {
    this._debugSceneCamera.setEye(this._rayTracerRenderer.camera.position);
    this._debugSceneCamera.setTarget(this._rayTracerRenderer.camera.target);
    this._debugSceneCamera.setUpAxis(this._rayTracerRenderer.camera.up);
    this._debugSceneCamera.computeMatrices();
    this._stackRenderers.safeRender(this._debugSceneCamera.getComposedMatrix(), inCallback);
  }
  flushHudWireFrame() {
    this._stackRenderers.flush(this._mainHudCamera.getComposedMatrix());
  }
  flushHudText() {
    this._textRenderer.flush(this._mainHudCamera.getComposedMatrix());
  }
  setupDebugRenderer() {
    this._rayTracerRenderer.spheres.forEach((sphere) => this._pushWireFrameSphere(sphere));
    this._rayTracerRenderer.boxes.forEach((box) => this._pushWireFrameBox(box));
    this._rayTracerRenderer.triangles.forEach((triangle) => this._pushWireFrameTriangle(triangle));
  }
  get rayTracerRenderer() {
    return this._rayTracerRenderer;
  }
  get stackRenderers() {
    return this._stackRenderers;
  }
  get textRenderer() {
    return this._textRenderer;
  }
  get multipleBuffering() {
    return this._multipleBuffering;
  }
  get debugSceneCamera() {
    return this._debugSceneCamera;
  }
  get mainHudCamera() {
    return this._mainHudCamera;
  }
}

// src/webgl-ray-tracer/src/experiment/scenes/TestScene3.ts
var continuousTime = 0;
var allBoxes = [];
var allSpheres = [];
var g_lightPos = [0, 0, 20];
var g_refractivePos = [0, 0, 20];
var _createBox = (physicWorld, position, orientation, boxSize, color, reflectionFactor, refractionFactor = 0, chessboardMaterial = false, receiveLightEnabled = true, castShadowEnabled = true) => {
  const physicBody = physicWorld.createRigidBody({
    mass: 0,
    shape: { type: "box", size: [boxSize[0] * 1.95, boxSize[1] * 1.95, boxSize[2] * 1.95] },
    position,
    orientation
  });
  physicBody.setRestitution(0.7);
  physicBody.setFriction(1);
  allBoxes.push({ boxSize, color, reflectionFactor, physicBody, refractionFactor, chessboardMaterial, receiveLightEnabled, castShadowEnabled });
};
var _createBox2 = (physicWorld, position, orientation, boxSize, color, reflectionFactor, refractionFactor, chessboardMaterial = false, receiveLightEnabled = true, castShadowEnabled = true, mass = 1) => {
  const physicBody = physicWorld.createRigidBody({
    mass,
    shape: { type: "box", size: [boxSize[0] * 2, boxSize[1] * 2, boxSize[2] * 2] },
    position,
    orientation
  });
  physicBody.setRestitution(0.5);
  physicBody.setFriction(0);
  allBoxes.push({ boxSize, color, reflectionFactor, physicBody, refractionFactor, chessboardMaterial, receiveLightEnabled, castShadowEnabled });
};
var _createSphere = (physicWorld, position, radius, bouncing) => {
  const physicBody = physicWorld.createRigidBody({
    mass: 1,
    shape: { type: "sphere", radius },
    position,
    orientation: exports_quat.identity(exports_quat.create())
  });
  physicBody.setFriction(1);
  physicBody.setRestitution(bouncing);
  physicBody.disableDeactivation();
  allSpheres.push({ radius, physicBody });
};

class TestScene3 {
  ensureSceneData(physicWorld) {
    if (allBoxes.length > 0) {
      return;
    }
    _createBox(physicWorld, [-1, -4, 0], exports_quat.setAxisAngle(exports_quat.create(), [0, 0, 1], Math.PI * 1 / 32), [4, 1, 2], [1, 1, 1], 0.5, 0, true);
    _createBox(physicWorld, [-7, -5, 0], exports_quat.setAxisAngle(exports_quat.create(), [1, 0, 0], Math.PI * 1 / 32), [2, 1, 2], [1, 1, 1], 0.5, 0, true);
    _createBox(physicWorld, [-10, -3, 2], exports_quat.setAxisAngle(exports_quat.create(), [1, 0, 0], Math.PI * 1 / 32), [0.25, 0.25, 4], [0.5, 1, 0.5], 0);
    _createBox(physicWorld, [-12, -2, 2], exports_quat.setAxisAngle(exports_quat.create(), [0, 1, 0], Math.PI * -1 / 16), [0.5, 4, 4], [0.5, 1, 0.5], 0);
    _createBox(physicWorld, [-3, -6, 4], exports_quat.setAxisAngle(exports_quat.create(), [0, 0, 1], Math.PI * -1 / 32), [6, 1, 2], [1, 1, 1], 0.5, 0, true);
    _createBox(physicWorld, [-7.8, -3, 5.5], exports_quat.setAxisAngle(exports_quat.create(), [0, 1, 0], Math.PI * -0.125), [1.5, 0.25, 0.25], [0.5, 1, 0.5], 0);
    _createBox(physicWorld, [-3.8, -3.5, 6.5], exports_quat.setAxisAngle(exports_quat.create(), [0, 0, 1], Math.PI * -1 / 32), [2.5, 0.25, 0.25], [0.5, 1, 0.5], 0);
    _createBox2(physicWorld, [-6, -3.5, 7], exports_quat.setAxisAngle(exports_quat.create(), [1, 0, 0], Math.PI * 0), [0.25, 4, 0.25], [0.5, 1, 0.5], 0, 0, false, true, true, 0);
    _createBox2(physicWorld, [-4.5, -3.5, 7], exports_quat.setAxisAngle(exports_quat.create(), [1, 0, 0], Math.PI * 0), [0.25, 4, 0.25], [0.5, 1, 0.5], 0, 0, false, true, true, 0);
    _createBox2(physicWorld, [-3, -3.5, 7], exports_quat.setAxisAngle(exports_quat.create(), [1, 0, 0], Math.PI * 0), [0.25, 4, 0.25], [0.5, 1, 0.5], 0, 0, false, true, true, 0);
    _createBox(physicWorld, [-4, -6.5, 9.5], exports_quat.setAxisAngle(exports_quat.create(), [1, 0, 0], Math.PI * 0), [5, 0.25, 4], [0.5, 1, 0.5], 0);
    _createSphere(physicWorld, [0, 10, 0], 1, 0.7);
    _createSphere(physicWorld, [-2, 10, 0], 1.5, 0);
    _createBox2(physicWorld, [-4, 10, 0], exports_quat.setAxisAngle(exports_quat.create(), [1, 1, 1], Math.PI * 0.25), [1, 1, 1], [1, 0, 0], 0.5, 0, false, true, true);
  }
  run(deltaTime, renderer, physicWorld) {
    this.ensureSceneData(physicWorld);
    physicWorld.stepSimulation(deltaTime, 0, deltaTime);
    continuousTime += deltaTime;
    {
      {
        const angle3 = exports_system.math.easing.easeClamp(continuousTime * 0.25) * Math.PI * 2;
        g_lightPos[0] = -4 + Math.cos(angle3) * 2;
        g_lightPos[1] = 2 - Math.sin(angle3) * 1;
        g_lightPos[2] = 2 + Math.sin(angle3) * 2;
        g_refractivePos[0] = -4 + Math.cos(angle3 + Math.PI) * 2;
        g_refractivePos[1] = 2 - Math.sin(angle3 + Math.PI) * 1;
        g_refractivePos[2] = 2 + Math.sin(angle3 + Math.PI) * 2;
      }
      allBoxes.forEach((box, index2) => {
        const pos = box.physicBody.getPosition();
        if (pos[1] < -12) {
          box.physicBody.setLinearVelocity(0, 0, 0);
          box.physicBody.setAngularVelocity(0, 0, 0);
          box.physicBody.setPosition(0, 10, 0);
        }
      });
      allSpheres.forEach((sphere, index2) => {
        const pos = sphere.physicBody.getPosition();
        if (pos[1] < -12) {
          sphere.physicBody.setLinearVelocity(0, 0, 0);
          sphere.physicBody.setAngularVelocity(0, 0, 0);
          sphere.physicBody.setPosition(0, 10, 0);
        }
      });
      {
        renderer.rayTracerRenderer.pushSphere({
          position: g_lightPos,
          orientation: exports_quat.identity(exports_quat.create()),
          radius: 0.125,
          color: [1, 1, 0],
          reflectionFactor: 0,
          refractionFactor: 0,
          chessboardEnabled: false,
          receiveLightEnabled: false,
          castShadowEnabled: false
        });
        renderer.rayTracerRenderer.pushSpotLight({
          position: g_lightPos,
          intensity: 1,
          radius: 15
        });
      }
      {
      }
    }
    {
      allBoxes.forEach((currBox) => {
        const position = currBox.physicBody.getPosition();
        const rotation = currBox.physicBody.getRotation();
        renderer.rayTracerRenderer.pushBox({
          position,
          orientation: rotation,
          boxSize: currBox.boxSize,
          color: currBox.color,
          refractionFactor: currBox.refractionFactor,
          reflectionFactor: currBox.reflectionFactor,
          chessboardEnabled: currBox.chessboardMaterial,
          receiveLightEnabled: currBox.receiveLightEnabled,
          castShadowEnabled: currBox.castShadowEnabled
        });
      });
      allSpheres.forEach((currSphere, index2) => {
        const position = currSphere.physicBody.getPosition();
        const rotation = currSphere.physicBody.getRotation();
        if (index2 % 2 === 0) {
          renderer.rayTracerRenderer.pushSphere({
            position,
            orientation: rotation,
            radius: 1,
            color: [1, 1, 1],
            reflectionFactor: 0,
            refractionFactor: 0,
            chessboardEnabled: true,
            receiveLightEnabled: false,
            castShadowEnabled: true
          });
          renderer.rayTracerRenderer.pushSpotLight({
            position,
            intensity: 0.1 + 4.9 * exports_system.math.easing.easePinPong(exports_system.math.easing.easeClamp(continuousTime * 0.5)),
            radius: 10
          });
        } else {
          renderer.rayTracerRenderer.pushSphere({
            position,
            orientation: rotation,
            radius: 1.5,
            color: [1, 1, 1],
            reflectionFactor: 0.3,
            refractionFactor: 0.5,
            chessboardEnabled: true,
            receiveLightEnabled: false,
            castShadowEnabled: true
          });
        }
      });
      renderer.rayTracerRenderer.pushSphere({
        position: [-5, 0, -7],
        orientation: exports_quat.identity(exports_quat.create()),
        radius: 5,
        color: [0, 0, 1],
        reflectionFactor: 0.8,
        refractionFactor: 0,
        chessboardEnabled: false,
        receiveLightEnabled: true,
        castShadowEnabled: true
      });
    }
  }
}
// src/webgl-ray-tracer/src/experiment/Experiment.ts
var {
  GlobalMouseManager: GlobalMouseManager2,
  GlobalKeyboardManager: GlobalKeyboardManager2,
  GlobalTouchManager: GlobalTouchManager2,
  GlobalVisibilityManager: GlobalVisibilityManager2,
  GlobalPointerLockManager: GlobalPointerLockManager2
} = exports_system.browser;
var { WebGLContext: WebGLContext16 } = exports_graphics.webgl2;
var { FreeFlyController: FreeFlyController3 } = exports_system.controllers;
var framerate = 60;
var _clamp = (inValue, inMin, inMax) => Math.min(Math.max(inValue, inMin), inMax);
var k_maxFramesUntilNextCheck = 3;

class Experiment {
  _canvasElement;
  _animationFrameHandle = 0;
  _def;
  _freeFlyController;
  _renderer;
  _physicWorld;
  _running;
  _errorGraphicContext;
  _lastFrameTime = Date.now();
  _currFrameMsecTime = Date.now();
  _frameProfiler = new exports_system.metrics.FrameProfiler;
  _perfAutoScalingEnabled = true;
  _framesUntilNextCheck = k_maxFramesUntilNextCheck;
  _scene = new TestScene3;
  constructor(inDef) {
    this._canvasElement = inDef.canvasElement;
    this._def = inDef;
    this._freeFlyController = new FreeFlyController3({
      coordinates: ["Z", "X", "Y"],
      position: [-5, 5, 10],
      theta: Math.PI * 1.05,
      phi: -Math.PI * 0.25,
      mouseSensibility: 6,
      keyboardSensibility: Math.PI * 0.55,
      touchSensibility: 8,
      movingSpeed: 16
    });
    {
      GlobalKeyboardManager2.activate();
      GlobalTouchManager2.activate(this._canvasElement);
      GlobalVisibilityManager2.activate();
      GlobalVisibilityManager2.addVisibilityChange((isVisible) => {
        if (isVisible === false) {
          this._def.logger.log("document visibility changed: hidden");
          this.stop();
        } else {
          this._def.logger.log("document visibility changed: visible");
          this.start();
        }
      });
      GlobalPointerLockManager2.allowPointerLockedOnClickEvent(this._canvasElement);
      GlobalPointerLockManager2.addOnLockChange(() => {
        const isLocked = GlobalPointerLockManager2.isPointerLocked(this._canvasElement);
        if (isLocked) {
          this._def.logger.log("The pointer lock status is now locked");
          GlobalMouseManager2.activate(this._canvasElement);
        } else {
          this._def.logger.log("The pointer lock status is now unlocked");
          GlobalMouseManager2.deactivate(this._canvasElement);
          GlobalPointerLockManager2.allowPointerLockedOnClickEvent(this._canvasElement);
        }
      });
      GlobalPointerLockManager2.addOnLockError((event) => {
        this._def.logger.log(`The pointer lock sent an error, event: "${JSON.stringify(event)}"`);
      });
      this._renderer = new Renderer({ canvasDomElement: this._canvasElement });
      this._renderer.initialize();
    }
    this._running = false;
    this._errorGraphicContext = false;
    this._def.resolution.addEventListener("input", (event) => {
      const newValue = this._def.resolution.value;
      this._setResolution(newValue);
      this._logResolution();
    });
    this._def.anti_aliasing_enabled.addEventListener("click", () => {
      const newValue = this._def.anti_aliasing_enabled.checked === true;
      this._renderer.rayTracerRenderer.setAntiAliasing(newValue);
      this._def.logger.log(`Anti aliasing change: ${newValue === true ? "enabled" : "disabled"}`);
    });
    this._setResolution(this._def.resolution.value);
    this._def.perfAutoScaling.addEventListener("input", () => {
      this._framesUntilNextCheck = k_maxFramesUntilNextCheck;
      this._perfAutoScalingEnabled = this._def.perfAutoScaling.checked === true;
      this._def.logger.log(`Performance auto scaler change: ${this._perfAutoScalingEnabled === true ? "enabled" : "disabled"}`);
    });
  }
  async init() {
    await this._renderer.initialize();
    await $BrowserFrankenPhysWasmModule.load({
      jsUrl: "./dist/wasm/FrankenPhys.0.0.1.js",
      wasmUrl: "./dist/wasm"
    });
    $physics.WasmModuleHolder.set($BrowserFrankenPhysWasmModule.get());
    this._physicWorld = new $physics.PhysicWorld;
    this._physicWorld.setGravity(0, -10, 0);
  }
  resize(inWidth, inHeight, inIsFullScreen) {
    let currentWidth = inWidth;
    let currentHeight = inHeight;
    if (inIsFullScreen) {
      this._canvasElement.style.position = "absolute";
      currentWidth = window.innerWidth;
      currentHeight = window.innerHeight;
    } else {
      this._canvasElement.style.position = "relative";
    }
    this._canvasElement.style.left = "0px";
    this._canvasElement.style.top = "0px";
    this._canvasElement.style.width = `${currentWidth}px`;
    this._canvasElement.style.height = `${currentHeight}px`;
    this._canvasElement.width = currentWidth;
    this._canvasElement.height = currentHeight;
    this._renderer.resize(currentWidth, currentHeight);
  }
  start() {
    if (this.isRunning()) {
      return;
    }
    this._running = true;
    this._tick();
  }
  stop() {
    if (!this.isRunning()) {
      return;
    }
    this._running = false;
    if (framerate < 0) {
      window.cancelAnimationFrame(this._animationFrameHandle);
    } else {
      window.clearTimeout(this._animationFrameHandle);
    }
  }
  isRunning() {
    return this._running && !this._errorGraphicContext;
  }
  _tick() {
    const tick = () => {
      if (!this._running || this._errorGraphicContext) {
        return;
      }
      if (framerate < 0) {
        this._animationFrameHandle = window.requestAnimationFrame(tick);
      } else {
        this._animationFrameHandle = window.setTimeout(tick, 1000 / framerate);
      }
      this._mainLoop();
    };
    tick();
  }
  _mainLoop() {
    const currentMsecTime = Date.now();
    const deltaFrameMsecTime = currentMsecTime - this._lastFrameTime;
    this._lastFrameTime = currentMsecTime;
    this._handlePerformanceAutoScaling(deltaFrameMsecTime);
    this._frameProfiler.pushDelta(deltaFrameMsecTime);
    const deltaMsecTime = currentMsecTime - this._currFrameMsecTime;
    this._currFrameMsecTime = currentMsecTime;
    const safeDelta = Math.min(deltaMsecTime, 100);
    const deltaSecTime = safeDelta / 1000;
    this._freeFlyController.update(deltaSecTime);
    GlobalMouseManager2.resetDeltas();
    GlobalTouchManager2.resetDeltas();
    if (this._physicWorld) {
      this._scene.run(deltaSecTime, this._renderer, this._physicWorld);
    }
    this._renderScene();
    this._renderHud();
  }
  _renderHud() {
    const gl = WebGLContext16.getContext();
    gl.viewport(0, 0, this._canvasElement.width, this._canvasElement.height);
    gl.clear(gl.DEPTH_BUFFER_BIT);
    gl.enable(gl.DEPTH_TEST);
    gl.depthFunc(gl.LESS);
    {
      const keyEventsPos = [27, 165];
      const touchEventsPos = [27, 260];
      const boardPos = [7, 35];
      exports_graphics.renderers.widgets.addKeyStrokesWidgets(keyEventsPos, this._renderer.stackRenderers, this._renderer.textRenderer);
      exports_graphics.renderers.widgets.addArrowStrokesWidgets(touchEventsPos, this._renderer.stackRenderers, this._renderer.textRenderer);
      exports_graphics.renderers.widgets.addKeysTouchesWidgets(this._canvasElement, boardPos, this._renderer.stackRenderers, this._renderer.textRenderer);
    }
    exports_graphics.renderers.widgets.renderFpsMeter([10, this._canvasElement.height - 60, 0], [100, 50], this._frameProfiler, this._renderer.stackRenderers, this._renderer.textRenderer, true);
    this._renderer.flushHudWireFrame();
    this._renderer.flushHudText();
    this._renderer.rayTracerRenderer.reset();
  }
  _renderScene() {
    {
      const gl = WebGLContext16.getContext();
      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
      gl.disable(gl.DEPTH_TEST);
    }
    this._renderer.rayTracerRenderer.lookAt(this._freeFlyController.getPosition(), this._freeFlyController.getTarget(), this._freeFlyController.getUpAxis());
    this._renderer.rayTracerRenderer.render();
    const showDebug = this._def.debug_mode_enabled.checked === true;
    if (showDebug) {
      this._renderer.stackRenderers.clear();
      this._renderer.safeSceneWireFrame(() => {
        this._renderer.setupDebugRenderer();
        const axisOrigin = [0, 0, 0];
        const axisX = [100, 0, 0];
        const axisY = [0, 100, 0];
        const axisZ = [0, 0, 100];
        this._renderer.stackRenderers.pushLine(axisOrigin, axisX, [1, 0, 0]);
        this._renderer.stackRenderers.pushLine(axisOrigin, axisY, [0, 1, 0]);
        this._renderer.stackRenderers.pushLine(axisOrigin, axisZ, [0, 0, 1]);
      });
    }
  }
  _setResolution(inValue) {
    const safeValue = _clamp(inValue, 0, 9);
    const newValue = 10 - safeValue;
    const newCoef = 1 / newValue;
    this._renderer.rayTracerRenderer.setResolutionCoef(newCoef);
  }
  _logResolution() {
    const rayTracerRenderer = this._renderer.rayTracerRenderer;
    const newCoef = rayTracerRenderer.getResolutionCoef();
    const newSize = rayTracerRenderer.getCurrentSize();
    const totalPixels = newSize[0] * newSize[1];
    this._def.logger.log(`resolution changed (1/${Math.ceil(1 / newCoef)}) => ${newSize[0]}x${newSize[1]} (${totalPixels}px)`);
  }
  _handlePerformanceAutoScaling(inDeltaMsecTime) {
    if (this._perfAutoScalingEnabled !== true) {
      return;
    }
    if (inDeltaMsecTime <= 20) {
      this._framesUntilNextCheck = k_maxFramesUntilNextCheck;
      return;
    }
    --this._framesUntilNextCheck;
    if (this._framesUntilNextCheck > 0) {
      return;
    }
    this._def.logger.log(`performance auto scaling: slow framerate, scaling down resolution`);
    const currValue = this._def.resolution.value;
    const newValue = currValue - 1;
    if (newValue >= 0 && newValue <= 9) {
      this._setResolution(newValue);
      this._logResolution();
      this._def.resolution.value = newValue;
    }
    this._framesUntilNextCheck = k_maxFramesUntilNextCheck;
  }
}

// src/webgl-ray-tracer/src/utilities/setupOutdatedPage.ts
var setupOutdatedPage = (maxDuration, onTimeout) => {
  if (!exports_system.browser.GlobalVisibilityManager.isSupported()) {
    return;
  }
  let timeoutHandle = -1;
  exports_system.browser.GlobalVisibilityManager.addVisibilityChange((isVisible) => {
    if (isVisible) {
      if (timeoutHandle >= 0) {
        clearTimeout(timeoutHandle);
        timeoutHandle = -1;
      }
    } else {
      timeoutHandle = window.setTimeout(onTimeout, maxDuration);
    }
  });
  exports_system.browser.GlobalVisibilityManager.activate();
};
// src/webgl-ray-tracer/src/main.ts
var logger = null;
var mainDemo = null;
var _queryDomElement = (inName) => {
  const newElement = document.querySelector(inName);
  if (!newElement) {
    throw new Error(`html element "${inName}" not found`);
  }
  return newElement;
};
var onPageLoad = async () => {
  logger = new Logger("loggerOutput");
  logger.log("[SETUP] page loaded");
  const canvasElement = _queryDomElement("#rendering-canvas");
  const perfAutoScaling = _queryDomElement("#auto-scaling-enabled");
  const resolution = _queryDomElement("#resolution");
  const anti_aliasing_enabled = _queryDomElement("#anti-aliasing-enabled");
  const debug_mode_enabled = _queryDomElement("#debug-mode-enabled");
  const errorText = _queryDomElement("#error-text");
  const _onPageError = (err) => {
    if (!mainDemo) {
      return;
    }
    console.log("onPageError", err);
    try {
      mainDemo.stop();
    } catch (err2) {
    }
    mainDemo = null;
    exports_system.browser.GlobalKeyboardManager.deactivate();
    exports_system.browser.GlobalMouseManager.deactivate(canvasElement);
    exports_system.browser.GlobalTouchManager.deactivate(canvasElement);
    exports_system.browser.GlobalFullScreenManager.removeAllCallbacks();
    exports_system.browser.GlobalPointerLockManager.removeAllCallbacks();
    exports_system.browser.GlobalVisibilityManager.removeAllCallbacks();
    exports_system.browser.GlobalVisibilityManager.deactivate();
    errorText.style.width = "800px";
    errorText.style.height = "600px";
    errorText.innerHTML = err.message;
    canvasElement.style.display = "none";
    errorText.style.display = "block";
    perfAutoScaling.disabled = true;
    resolution.min = resolution.max = resolution.value = 0;
    anti_aliasing_enabled.disabled = true;
    debug_mode_enabled.disabled = true;
    document.title += " (ERR)";
  };
  window.addEventListener("error", _onPageError);
  if (!exports_system.browser.isWebGL2Supported()) {
    throw new Error("missing WebGL2 feature (unsupported)");
  }
  mainDemo = new Experiment({
    canvasElement,
    logger,
    perfAutoScaling,
    resolution,
    anti_aliasing_enabled,
    debug_mode_enabled
  });
  logger.log("[SETUP] Demo: initializing");
  await mainDemo.init();
  logger.log("[SETUP] Demo: initialized");
  mainDemo.start();
  logger.log("[SETUP] Demo: running");
  const pageMaxTimeInvisible = 60000;
  setupOutdatedPage(pageMaxTimeInvisible, () => {
    throw new Error("<br/><br/><br/>The page was inactive for too long<br/><br/>please reload");
  });
};
window.addEventListener("load", onPageLoad, false);

//# debugId=2D067DC2849D035C64756e2164756e21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2xvY2FsLWZyYW1ld29yay9zeXN0ZW0vYnJvd3Nlci9GdWxsU2NyZWVuTWFuYWdlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9icm93c2VyL0tleUNvZGVzLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvS2V5Ym9hcmRNYW5hZ2VyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvTW91c2VNYW5hZ2VyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvUG9pbnRlckxvY2tNYW5hZ2VyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvVG91Y2hNYW5hZ2VyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL2Jyb3dzZXIvVmlzaWJpbGl0eU1hbmFnZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9zeXN0ZW0vYnJvd3Nlci9pc1dlYldvcmtlclN1cHBvcnRlZC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9icm93c2VyL2lzV2ViR0wyU3VwcG9ydGVkLnRzIiwgIm5vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL2NvbW1vbi5qcyIsICJub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS9tYXQzLmpzIiwgIm5vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL21hdDQuanMiLCAibm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vdmVjMy5qcyIsICJub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS92ZWM0LmpzIiwgIm5vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL3F1YXQuanMiLCAibm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vdmVjMi5qcyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL2FuZ2xlcy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9jb250cm9sbGVycy9GcmVlRmx5Q29udHJvbGxlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL2NsYW1wLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL21hdGgvY29sbGlzaW9ucy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL2Vhc2luZy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL2xlcnAudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9zeXN0ZW0vbWF0aC9wb2xhckNvb3Jkcy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tYXRoL3JheUNhc3Rlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS9tZXRyaWNzL0ZyYW1lUHJvZmlsZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9zeXN0ZW0vdXRpbGl0aWVzL0ZldGNoSGVscGVycy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL3N5c3RlbS91dGlsaXRpZXMvQXN5bmNIZWxwZXJzLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvc3lzdGVtL3JuZy9EZXRlcm1pbmlzdGljUm5nLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvY2FtZXJhL0NhbWVyYS50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL2NhbWVyYS9GcnVzdHVtQ3VsbGluZy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL2NhbWVyYS9zY2VuZVRvU2NyZWVuQ29vcmRpbmF0ZXMudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9jYW1lcmEvc2NyZWVuVG9TY2VuZUNvb3JkaW5hdGVzLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3Mvd2ViZ2wyL1dlYkdMQ29udGV4dC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9DdWJlTWFwLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3Mvd2ViZ2wyL0RhdGFUZXh0dXJlLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3Mvd2ViZ2wyL0RhdGFUZXh0dXJlVmVjNC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9FcnJvci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9GZW5jZS50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9GcmFtZUJ1ZmZlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9HZW9tZXRyeVdyYXBwZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy93ZWJnbDIvUmVuZGVyQnVmZmVyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3Mvd2ViZ2wyL1NoYWRlclByb2dyYW0udHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy93ZWJnbDIvVGV4dHVyZS50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3dlYmdsMi9UZXh0dXJlQXJyYXkudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvZ2VvbWV0cnktcmVuZGVyZXIvc2hhZGVycy9nZW9tZXRyeS1yZW5kZXJlci5nbHNsLnZlcnQiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvZ2VvbWV0cnktcmVuZGVyZXIvc2hhZGVycy9nZW9tZXRyeS1yZW5kZXJlci5nbHNsLmZyYWciLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvZ2VvbWV0cnktcmVuZGVyZXIvR2VvbWV0cnlSZW5kZXJlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9nZW9tZXRyeS1yZW5kZXJlci1mbGF0L3NoYWRlcnMvZ2VvbWV0cnktcmVuZGVyZXItZmxhdC5nbHNsLnZlcnQiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvZ2VvbWV0cnktcmVuZGVyZXItZmxhdC9zaGFkZXJzL2dlb21ldHJ5LXJlbmRlcmVyLWZsYXQuZ2xzbC5mcmFnIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL2dlb21ldHJ5LXJlbmRlcmVyLWZsYXQvR2VvbWV0cnlSZW5kZXJlckZsYXQudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvbXVsdGktYnVmZmVycy1yZW5kZXJpbmcvaW50ZXJuYWxzL1NjZW5lQ2FwdHVyZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvbXVsdGktYnVmZmVycy1yZW5kZXJpbmcvaW50ZXJuYWxzL3NoYWRlcnMvaHVkLXRleHR1cmUtcmVuZGVyZXIuZ2xzbC52ZXJ0IiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL211bHRpLWJ1ZmZlcnMtcmVuZGVyaW5nL2ludGVybmFscy9zaGFkZXJzL2h1ZC10ZXh0dXJlLXJlbmRlcmVyLmdsc2wuZnJhZyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9tdWx0aS1idWZmZXJzLXJlbmRlcmluZy9pbnRlcm5hbHMvUmVuZGVySHVkVGV4dHVyZS50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9tdWx0aS1idWZmZXJzLXJlbmRlcmluZy9NdWx0aUJ1ZmZlcnNSZW5kZXJpbmcudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvc3RhY2stcmVuZGVyZXJzL3NoYWRlcnMvc3RhY2stcmVuZGVyZXIuZ2xzbC52ZXJ0IiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL3N0YWNrLXJlbmRlcmVycy9zaGFkZXJzL3N0YWNrLXJlbmRlcmVyLmdsc2wuZnJhZyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9zdGFjay1yZW5kZXJlcnMvaW50ZXJuYWxzL1dpcmVGcmFtZXNTdGFja1JlbmRlcmVyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL3N0YWNrLXJlbmRlcmVycy9pbnRlcm5hbHMvVHJpYW5nbGVzU3RhY2tSZW5kZXJlci50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy9zdGFjay1yZW5kZXJlcnMvU3RhY2tSZW5kZXJlcnMudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvdGV4dC1yZW5kZXJlci9zaGFkZXJzL3RleHQtcmVuZGVyZXIuZ2xzbC52ZXJ0IiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvcmVuZGVyZXJzL3RleHQtcmVuZGVyZXIvc2hhZGVycy90ZXh0LXJlbmRlcmVyLmdsc2wuZnJhZyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy90ZXh0LXJlbmRlcmVyL2ludGVybmFscy9hc2NpaVRleHR1cmVIZXgudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvdGV4dC1yZW5kZXJlci9UZXh0UmVuZGVyZXIudHMiLCAic3JjL2xvY2FsLWZyYW1ld29yay9ncmFwaGljcy9yZW5kZXJlcnMvd2lkZ2V0cy9yZW5kZXJDb250cm9scy50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL3JlbmRlcmVycy93aWRnZXRzL3JlbmRlckZwc01ldGVyLnRzIiwgInNyYy9sb2NhbC1mcmFtZXdvcmsvZ3JhcGhpY3MvaW1hZ2VzL2dldEltYWdlRnJvbVVybC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL2dlb21ldHJpZXMvbWFrZUJveC50cyIsICJzcmMvbG9jYWwtZnJhbWV3b3JrL2dyYXBoaWNzL2dlb21ldHJpZXMvbWFrZVNwaGVyZS50cyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC91dGlsaXRpZXMvTG9nZ2VyLnRzIiwgIm5vZGVfbW9kdWxlcy9GcmFua2VuUGh5cy9kaXN0L2J1bmRsZS5qcyIsICJub2RlX21vZHVsZXMvRnJhbmtlblBoeXMvZGlzdC9idW5kbGUuanMiLCAic3JjL3dlYmdsLXJheS10cmFjZXIvc3JjL2V4cGVyaW1lbnQvZ3JhcGhpY3MvcmVuZGVyZXJzL3JheS10cmFjZXItcmVuZGVyZXIvc2hhZGVycy9yYXktdHJhY2VyLmdsc2wudmVydCIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9ncmFwaGljcy9yZW5kZXJlcnMvcmF5LXRyYWNlci1yZW5kZXJlci9zaGFkZXJzL3JheS10cmFjZXIuZ2xzbC5mcmFnIiwgInNyYy93ZWJnbC1yYXktdHJhY2VyL3NyYy9leHBlcmltZW50L2dyYXBoaWNzL3JlbmRlcmVycy9yYXktdHJhY2VyLXJlbmRlcmVyL3NoYWRlcnMvdGV4dHVyZS5nbHNsLnZlcnQiLCAic3JjL3dlYmdsLXJheS10cmFjZXIvc3JjL2V4cGVyaW1lbnQvZ3JhcGhpY3MvcmVuZGVyZXJzL3JheS10cmFjZXItcmVuZGVyZXIvc2hhZGVycy90ZXh0dXJlLmdsc2wuZnJhZyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9ncmFwaGljcy9yZW5kZXJlcnMvcmF5LXRyYWNlci1yZW5kZXJlci9SYXlUcmFjZXJSZW5kZXJlci50cyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9ncmFwaGljcy9SZW5kZXJlci50cyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9zY2VuZXMvVGVzdFNjZW5lMy50cyIsICJzcmMvd2ViZ2wtcmF5LXRyYWNlci9zcmMvZXhwZXJpbWVudC9FeHBlcmltZW50LnRzIiwgInNyYy93ZWJnbC1yYXktdHJhY2VyL3NyYy91dGlsaXRpZXMvc2V0dXBPdXRkYXRlZFBhZ2UudHMiLCAic3JjL3dlYmdsLXJheS10cmFjZXIvc3JjL21haW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiY29uc3QgYWxsUmVxdWVzdEV2ZW50czogc3RyaW5nW10gPSBbXG4gICdyZXF1ZXN0RnVsbHNjcmVlbicsXG4gICd3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbicsXG4gICdtb3pSZXF1ZXN0RnVsbFNjcmVlbicsXG4gICdtc1JlcXVlc3RGdWxsc2NyZWVuJ1xuXTtcblxuY29uc3QgYWxsQ2hhbmdlRXZlbnRzOiBzdHJpbmdbXSA9IFtcbiAgJ2Z1bGxzY3JlZW5jaGFuZ2UnLFxuICAnd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsXG4gICdtb3pmdWxsc2NyZWVuY2hhbmdlJyxcbiAgJ21zZnVsbHNjcmVlbmNoYW5nZSdcbl07XG5cbnR5cGUgT25DaGFuZ2VDYWxsYmFjayA9ICgpID0+IHZvaWQ7XG5cbmludGVyZmFjZSBJUmVzdWx0IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgbWVzc2FnZTogc3RyaW5nO1xufVxuXG5jbGFzcyBGdWxsU2NyZWVuTWFuYWdlciB7XG4gIHByaXZhdGUgX29uRnVsbFNjcmVlbkNoYW5nZUNhbGxiYWNrczogT25DaGFuZ2VDYWxsYmFja1tdID0gW107XG5cbiAgcHJpdmF0ZSBfaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX2luaXRpYWxpemUoKSB7XG4gICAgaWYgKHRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICBjb25zdCBvbkxvY2tDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9vbkZ1bGxTY3JlZW5DaGFuZ2VDYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKCkpO1xuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IGN1cnJFdmVudCBvZiBhbGxDaGFuZ2VFdmVudHMpXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGN1cnJFdmVudCwgb25Mb2NrQ2hhbmdlLCBmYWxzZSk7XG4gIH1cblxuICAvL1xuXG4gIGlzQ29tcGF0aWJsZShpblRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgZm9yIChjb25zdCBjdXJyRXZlbnQgb2YgYWxsUmVxdWVzdEV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudCBpbiBpblRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vXG5cbiAgaXNGdWxsU2NyZWVuKGluVGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgPT09IGluVGFyZ2V0RWxlbWVudDtcbiAgfVxuXG4gIC8vXG5cbiAgYXN5bmMgcmVxdWVzdEZ1bGxTY3JlZW4oaW5UYXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8SVJlc3VsdD4ge1xuICAgIGlmICh0aGlzLmlzRnVsbFNjcmVlbihpblRhcmdldEVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ2VsZW1lbnQgYWxyZWFkeSBpbiBmdWxsIHNjcmVlbicgfTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG5cbiAgICBmb3IgKGNvbnN0IGN1cnJFdmVudCBvZiBhbGxSZXF1ZXN0RXZlbnRzKSB7XG4gICAgICBpZiAoY3VyckV2ZW50IGluIGluVGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAoaW5UYXJnZXRFbGVtZW50IGFzIGFueSlbY3VyckV2ZW50XSgpO1xuXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdyZXF1ZXN0IGZvciBmdWxsIHNjcmVlbiBkb25lJyB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAndW5zdXBwb3J0ZWQgcmVxdWVzdCBmb3IgZnVsbCBzY3JlZW4nIH07XG4gIH1cblxuICAvL1xuXG4gIGFkZE9uRnVsbFNjcmVlbkNoYW5nZShpbkNhbGxiYWNrOiBPbkNoYW5nZUNhbGxiYWNrKSB7XG4gICAgdGhpcy5fb25GdWxsU2NyZWVuQ2hhbmdlQ2FsbGJhY2tzLnB1c2goaW5DYWxsYmFjayk7XG4gIH1cbiAgcmVtb3ZlT25GdWxsU2NyZWVuQ2hhbmdlKGluQ2FsbGJhY2s6IE9uQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX29uRnVsbFNjcmVlbkNoYW5nZUNhbGxiYWNrcy5pbmRleE9mKGluQ2FsbGJhY2spO1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fb25GdWxsU2NyZWVuQ2hhbmdlQ2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbiAgcmVtb3ZlQWxsQ2FsbGJhY2tzKCkge1xuICAgIHRoaXMuX29uRnVsbFNjcmVlbkNoYW5nZUNhbGxiYWNrcy5sZW5ndGggPSAwO1xuICB9XG59XG5cbmNvbnN0IEdsb2JhbEZ1bGxTY3JlZW5NYW5hZ2VyID0gbmV3IEZ1bGxTY3JlZW5NYW5hZ2VyKCk7XG5cbmV4cG9ydCB7IEdsb2JhbEZ1bGxTY3JlZW5NYW5hZ2VyIH07XG4iLAogICJleHBvcnQgY29uc3QgQWxsS2V5Q29kZXMgPSB7XG4gIC8vIE51bWJlcnMgYW5kIGxldHRlcnNcbiAgTnVtMDogNDgsXG4gIE51bTE6IDQ5LFxuICBOdW0yOiA1MCxcbiAgTnVtMzogNTEsXG4gIE51bTQ6IDUyLFxuICBOdW01OiA1MyxcbiAgTnVtNjogNTQsXG4gIE51bTc6IDU1LFxuICBOdW04OiA1NixcbiAgTnVtOTogNTcsXG4gIEE6IDY1LFxuICBCOiA2NixcbiAgQzogNjcsXG4gIEQ6IDY4LFxuICBFOiA2OSxcbiAgRjogNzAsXG4gIEc6IDcxLFxuICBIOiA3MixcbiAgSTogNzMsXG4gIEo6IDc0LFxuICBLOiA3NSxcbiAgTDogNzYsXG4gIE06IDc3LFxuICBOOiA3OCxcbiAgTzogNzksXG4gIFA6IDgwLFxuICBROiA4MSxcbiAgUjogODIsXG4gIFM6IDgzLFxuICBUOiA4NCxcbiAgVTogODUsXG4gIFY6IDg2LFxuICBXOiA4NyxcbiAgWDogODgsXG4gIFk6IDg5LFxuICBaOiA5MCxcblxuICAvLyBQdW5jdHVhdGlvbnMga2V5cyBpbiBVUyBsYXlvdXRcbiAgU2VtaWNvbG9uOiAxODYsXG4gIEVxdWFsOiAxODcsXG4gIENvbW1hOiAxODgsXG4gIE1pbnVzOiAxODksXG4gIFBlcmlvZDogMTkwLFxuICBCYWNrUXVvdGU6IDE5MixcbiAgQnJhY2tldExlZnQ6IDIxOSxcbiAgQmFja3NsYXNoOiAyMjAsXG4gIEJyYWNrZXRSaWdodDogMjIxLFxuICBRdW90ZTogMjIyLFxuXG4gIC8vIE1vZGlmaWVyIGtleXNcbiAgU2hpZnQ6IDE2LFxuICBDdHJsOiAxNyxcbiAgQWx0OiAxOCxcbiAgQ2Fwc0xvY2s6IDIwLFxuXG4gIC8vIENvbnRyb2wga2V5c1xuICBUYWI6IDksXG4gIEVudGVyOiAxMyxcbiAgUGF1c2U6IDE5LFxuICBFc2NhcGU6IDI3LFxuICBTcGFjZTogMzIsXG4gIFBhZ2VVcDogMzMsXG4gIFBhZ2VEb3duOiAzNCxcbiAgRW5kOiAzNSxcbiAgSG9tZTogMzYsXG4gIEFycm93TGVmdDogMzcsXG4gIEFycm93VXA6IDM4LFxuICBBcnJvd1JpZ2h0OiAzOSxcbiAgQXJyb3dEb3duOiA0MCxcbiAgUHJpbnRTY3JlZW46IDQ0LFxuICBJbnNlcnQ6IDQ1LFxuICBEZWxldGU6IDQ2LFxuICBDb250ZXh0TWVudTogOTMsXG4gIFNjcm9sbExvY2s6IDE0NSxcblxuICAvLyBGdW5jdGlvbiBrZXlzXG4gIEYxOiAxMTIsXG4gIEYyOiAxMTMsXG4gIEYzOiAxMTQsXG4gIEY0OiAxMTUsXG4gIEY1OiAxMTYsXG4gIEY2OiAxMTcsXG4gIEY3OiAxMTgsXG4gIEY4OiAxMTksXG4gIEY5OiAxMjAsXG4gIEYxMDogMTIxLFxuICBGMTE6IDEyMixcbiAgRjEyOiAxMjMsXG4gIEYxMzogMTI0LFxuICBGMTQ6IDEyNSxcbiAgRjE1OiAxMjYsXG4gIEYxNjogMTI3LFxuICBGMTc6IDEyOCxcbiAgRjE4OiAxMjksXG4gIEYxOTogMTMwLFxuICBGMjA6IDEzMSxcbiAgRjIxOiAxMzIsXG4gIEYyMjogMTMzLFxuICBGMjM6IDEzNCxcbiAgRjI0OiAxMzUsXG5cbiAgLy8gTnVtcGFkIGtleXNcbiAgTnVtUGFkMDogOTYsXG4gIE51bVBhZDE6IDk3LFxuICBOdW1QYWQyOiA5OCxcbiAgTnVtUGFkMzogOTksXG4gIE51bVBhZDQ6IDEwMCxcbiAgTnVtUGFkNTogMTAxLFxuICBOdW1QYWQ2OiAxMDIsXG4gIE51bVBhZDc6IDEwMyxcbiAgTnVtUGFkODogMTA0LFxuICBOdW1QYWQ5OiAxMDUsXG4gIE51bVBhZE11bHRpcGx5OiAxMDYsXG4gIE51bVBhZEFkZDogMTA3LFxuICBOdW1QYWRTdWJ0cmFjdDogMTA5LFxuICBOdW1QYWREZWNpbWFsOiAxMTAsXG4gIE51bVBhZERpdmlkZTogMTExLFxuICBOdW1Mb2NrOiAxNDQsXG4gIE51bVBhZENvbW1hOiAxOTQsXG4gIE51bVBhZEVxdWFsOiAxMlxufTtcblxuZXhwb3J0IGNvbnN0IGlzTGV0dGVyID0gKGtleTogbnVtYmVyKSA9PiB7XG4gIHJldHVybiBrZXkgPj0gQWxsS2V5Q29kZXMuQSAmJiBrZXkgPD0gQWxsS2V5Q29kZXMuWjtcbn07XG5cbmV4cG9ydCBjb25zdCBpc051bWJlciA9IChrZXk6IG51bWJlcikgPT4ge1xuICByZXR1cm4gKFxuICAgIChrZXkgPj0gQWxsS2V5Q29kZXMuTnVtMCAmJiBrZXkgPD0gQWxsS2V5Q29kZXMuTnVtOSkgfHxcbiAgICAoa2V5ID49IEFsbEtleUNvZGVzLk51bVBhZDAgJiYga2V5IDw9IEFsbEtleUNvZGVzLk51bVBhZDkpXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNBbHBoYW51bWVyaWMgPSAoa2V5OiBudW1iZXIpID0+IHtcbiAgcmV0dXJuIGlzTnVtYmVyKGtleSkgfHwgaXNMZXR0ZXIoa2V5KTtcbn07XG4iLAogICJpbXBvcnQgeyBBbGxLZXlDb2RlcyB9IGZyb20gJy4vS2V5Q29kZXMnO1xuXG5jbGFzcyBLZXlib2FyZE1hbmFnZXIge1xuICBwcml2YXRlIF9wcmVzc2VkS2V5c1NldCA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICBwcml2YXRlIF9wcmV2ZW50RGVmYXVsdEtleXNTZXQgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgcHJpdmF0ZSBfYWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2hhbmRsZUtleURvd246IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfaGFuZGxlS2V5VXA6IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZDtcblxuICBwcml2YXRlIF9vbkV2ZW50OiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBrZXlDb2RlIH0gPSBldmVudDtcblxuICAgICAgaWYgKHRoaXMuX29uRXZlbnQpIHtcbiAgICAgICAgdGhpcy5fb25FdmVudCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcHJldmVudERlZmF1bHRLZXlzU2V0LmhhcyhrZXlDb2RlKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wcmVzc2VkS2V5c1NldC5hZGQoa2V5Q29kZSk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVLZXlVcCA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBrZXlDb2RlIH0gPSBldmVudDtcblxuICAgICAgaWYgKHRoaXMuX29uRXZlbnQpIHtcbiAgICAgICAgdGhpcy5fb25FdmVudCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcHJldmVudERlZmF1bHRLZXlzU2V0LmhhcyhrZXlDb2RlKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wcmVzc2VkS2V5c1NldC5kZWxldGUoa2V5Q29kZSk7XG4gICAgfTtcblxuICAgIHRoaXMuX2FjdGl2YXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2hhbmRsZUtleURvd24gPSBoYW5kbGVLZXlEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlS2V5VXAgPSBoYW5kbGVLZXlVcC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgaXNQcmVzc2VkKC4uLmluS2V5czogKGtleW9mIHR5cGVvZiBBbGxLZXlDb2RlcylbXSkge1xuICAgIGZvciAoY29uc3Qga2V5IG9mIGluS2V5cykge1xuICAgICAgaWYgKHRoaXMuX3ByZXNzZWRLZXlzU2V0LmhhcyhBbGxLZXlDb2Rlc1trZXldKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJldmVudERlZmF1bHQoaW5LZXk6IGtleW9mIHR5cGVvZiBBbGxLZXlDb2Rlcykge1xuICAgIHRoaXMuX3ByZXZlbnREZWZhdWx0S2V5c1NldC5hZGQoQWxsS2V5Q29kZXNbaW5LZXldKTtcbiAgfVxuXG4gIGVuYWJsZURlZmF1bHQoaW5LZXk6IGtleW9mIHR5cGVvZiBBbGxLZXlDb2Rlcykge1xuICAgIHRoaXMuX3ByZXZlbnREZWZhdWx0S2V5c1NldC5kZWxldGUoQWxsS2V5Q29kZXNbaW5LZXldKTtcbiAgfVxuXG4gIGFjdGl2YXRlKCkge1xuICAgIGlmICh0aGlzLl9hY3RpdmF0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wcmVzc2VkS2V5c1NldC5jbGVhcigpO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUtleURvd24pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlS2V5VXApO1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgaWYgKCF0aGlzLl9hY3RpdmF0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wcmVzc2VkS2V5c1NldC5jbGVhcigpO1xuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUtleURvd24pO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlS2V5VXApO1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gZmFsc2U7XG4gIH1cblxuICBvbkV2ZW50KGNhbGxiYWNrOiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLl9vbkV2ZW50ID0gY2FsbGJhY2s7XG4gIH1cbn1cblxuLy9cbi8vXG4vL1xuXG5jb25zdCBHbG9iYWxLZXlib2FyZE1hbmFnZXIgPSBuZXcgS2V5Ym9hcmRNYW5hZ2VyKCk7XG5cbmV4cG9ydCB7IEdsb2JhbEtleWJvYXJkTWFuYWdlciB9O1xuIiwKICAiaW1wb3J0IHsgQWxsS2V5Q29kZXMgfSBmcm9tICcuL0tleUNvZGVzJztcblxuY29uc3QgQWxsTW91c2VCdXR0b25zID0ge1xuICBMZWZ0OiAwLFxuICBNaWRkbGU6IDEsXG4gIFJpZ2h0OiAyXG59O1xuXG5jbGFzcyBNb3VzZU1hbmFnZXIge1xuICBwcml2YXRlIF9wcmVzc2VkQnV0dG9uc1NldCA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICBwcml2YXRlIF9hY3RpdmF0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfaGFuZGxlTW91c2VEb3duOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQ7XG4gIHByaXZhdGUgX2hhbmRsZU1vdXNlVXA6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfaGFuZGxlTW91c2VNb3ZlOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQ7XG4gIHByaXZhdGUgX2hhbmRsZU1vdXNlV2hlZWw6IChldmVudDogV2hlZWxFdmVudCkgPT4gdm9pZDtcblxuICBwcml2YXRlIF9wb3NpdGlvblggPSAwO1xuICBwcml2YXRlIF9wb3NpdGlvblkgPSAwO1xuICBwcml2YXRlIF9kZWx0YVggPSAwO1xuICBwcml2YXRlIF9kZWx0YVkgPSAwO1xuICBwcml2YXRlIF93aGVlbERlbHRhWSA9IDA7XG5cbiAgcHJpdmF0ZSBfb25FdmVudDogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX29uRXZlbnQpIHtcbiAgICAgICAgdGhpcy5fb25FdmVudCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wb3NpdGlvblggPSBldmVudC5wYWdlWDtcbiAgICAgIHRoaXMuX3Bvc2l0aW9uWSA9IGV2ZW50LnBhZ2VZO1xuXG4gICAgICB0aGlzLl9wcmVzc2VkQnV0dG9uc1NldC5hZGQoZXZlbnQuYnV0dG9uKTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZU1vdXNlVXAgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLl9vbkV2ZW50KSB7XG4gICAgICAgIHRoaXMuX29uRXZlbnQoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcG9zaXRpb25YID0gZXZlbnQucGFnZVg7XG4gICAgICB0aGlzLl9wb3NpdGlvblkgPSBldmVudC5wYWdlWTtcblxuICAgICAgdGhpcy5fcHJlc3NlZEJ1dHRvbnNTZXQuZGVsZXRlKGV2ZW50LmJ1dHRvbik7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLl9vbkV2ZW50KSB7XG4gICAgICAgIHRoaXMuX29uRXZlbnQoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcG9zaXRpb25YID0gZXZlbnQucGFnZVg7XG4gICAgICB0aGlzLl9wb3NpdGlvblkgPSBldmVudC5wYWdlWTtcblxuICAgICAgdGhpcy5fZGVsdGFYICs9XG4gICAgICAgIGV2ZW50Lm1vdmVtZW50WCB8fFxuICAgICAgICAoZXZlbnQgYXMgYW55KS5tb3pNb3ZlbWVudFggfHxcbiAgICAgICAgKGV2ZW50IGFzIGFueSkud2Via2l0TW92ZW1lbnRYIHx8XG4gICAgICAgIDA7XG5cbiAgICAgIHRoaXMuX2RlbHRhWSArPVxuICAgICAgICBldmVudC5tb3ZlbWVudFkgfHxcbiAgICAgICAgKGV2ZW50IGFzIGFueSkubW96TW92ZW1lbnRZIHx8XG4gICAgICAgIChldmVudCBhcyBhbnkpLndlYmtpdE1vdmVtZW50WSB8fFxuICAgICAgICAwO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlV2hlZWxFdmVudCA9IChldmVudDogV2hlZWxFdmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX29uRXZlbnQpIHtcbiAgICAgICAgdGhpcy5fb25FdmVudCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl93aGVlbERlbHRhWSArPSBldmVudC5kZWx0YVkgfHwgMDtcbiAgICB9O1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgdGhpcy5faGFuZGxlTW91c2VEb3duID0gaGFuZGxlTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlTW91c2VVcCA9IGhhbmRsZU1vdXNlVXAuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVNb3VzZU1vdmUgPSBoYW5kbGVNb3VzZU1vdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVNb3VzZVdoZWVsID0gaGFuZGxlV2hlZWxFdmVudC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgYWN0aXZhdGUoZG9tRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5fYWN0aXZhdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fcHJlc3NlZEJ1dHRvbnNTZXQuY2xlYXIoKTtcblxuICAgIGRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlTW91c2VEb3duKTtcbiAgICBkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVNb3VzZVVwKTtcbiAgICBkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZU1vdXNlTW92ZSk7XG4gICAgZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMuX2hhbmRsZU1vdXNlV2hlZWwpO1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGRlYWN0aXZhdGUoZG9tRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuX2FjdGl2YXRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3ByZXNzZWRCdXR0b25zU2V0LmNsZWFyKCk7XG5cbiAgICBkb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZU1vdXNlRG93bik7XG4gICAgZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlTW91c2VVcCk7XG4gICAgZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9oYW5kbGVNb3VzZU1vdmUpO1xuICAgIGRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLl9oYW5kbGVNb3VzZVdoZWVsKTtcblxuICAgIHRoaXMuX2FjdGl2YXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgaXNCdXR0b25QcmVzc2VkKGluS2V5OiBrZXlvZiB0eXBlb2YgQWxsTW91c2VCdXR0b25zKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ByZXNzZWRCdXR0b25zU2V0LmhhcyhBbGxNb3VzZUJ1dHRvbnNbaW5LZXldKTtcbiAgfVxuXG4gIGdldCBwb3NpdGlvblgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb25YO1xuICB9XG4gIGdldCBwb3NpdGlvblkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb25ZO1xuICB9XG4gIGRlbHRhWCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kZWx0YVg7XG4gIH1cbiAgZGVsdGFZKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RlbHRhWTtcbiAgfVxuICB3aGVlbERlbHRhWSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl93aGVlbERlbHRhWTtcbiAgfVxuICByZXNldERlbHRhcygpIHtcbiAgICB0aGlzLl9kZWx0YVggPSAwO1xuICAgIHRoaXMuX2RlbHRhWSA9IDA7XG4gICAgdGhpcy5fd2hlZWxEZWx0YVkgPSAwO1xuICB9XG5cbiAgb25FdmVudChjYWxsYmFjazogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fb25FdmVudCA9IGNhbGxiYWNrO1xuICB9XG59XG5cbi8vXG4vL1xuLy9cblxuY29uc3QgR2xvYmFsTW91c2VNYW5hZ2VyID0gbmV3IE1vdXNlTWFuYWdlcigpO1xuXG5leHBvcnQgeyBHbG9iYWxNb3VzZU1hbmFnZXIgfTtcbiIsCiAgImNvbnN0IGFsbFJlcXVlc3RFdmVudHM6IHN0cmluZ1tdID0gW1xuICAncmVxdWVzdFBvaW50ZXJMb2NrJyxcbiAgJ21velJlcXVlc3RQb2ludGVyTG9jaycsXG4gICd3ZWJraXRSZXF1ZXN0UG9pbnRlckxvY2snXG5dO1xuXG5jb25zdCBhbGxFeGl0RXZlbnRzOiBzdHJpbmdbXSA9IFtcbiAgJ2V4aXRQb2ludGVyTG9jaycsXG4gICdtb3pFeGl0UG9pbnRlckxvY2snLFxuICAnd2Via2l0RXhpdFBvaW50ZXJMb2NrJ1xuXTtcblxuY29uc3QgYWxsU3RhdGVFdmVudHM6IHN0cmluZ1tdID0gW1xuICAncG9pbnRlckxvY2tFbGVtZW50JyxcbiAgJ21velBvaW50ZXJMb2NrRWxlbWVudCcsXG4gICd3ZWJraXRQb2ludGVyTG9ja0VsZW1lbnQnXG5dO1xuXG5jb25zdCBhbGxDaGFuZ2VFdmVudHM6IHsgbWV0aG9kTmFtZTogc3RyaW5nOyBwcm9wZXJ0eU5hbWU6IHN0cmluZyB9W10gPSBbXG4gIHsgbWV0aG9kTmFtZTogJ29ucG9pbnRlcmxvY2tjaGFuZ2UnLCBwcm9wZXJ0eU5hbWU6ICdwb2ludGVybG9ja2NoYW5nZScgfSxcbiAge1xuICAgIG1ldGhvZE5hbWU6ICdvbm1venBvaW50ZXJsb2NrY2hhbmdlJyxcbiAgICBwcm9wZXJ0eU5hbWU6ICdtb3pwb2ludGVybG9ja2NoYW5nZSdcbiAgfSxcbiAge1xuICAgIG1ldGhvZE5hbWU6ICdvbndlYmtpdHBvaW50ZXJsb2NrY2hhbmdlJyxcbiAgICBwcm9wZXJ0eU5hbWU6ICd3ZWJraXRwb2ludGVybG9ja2NoYW5nZSdcbiAgfVxuXTtcblxuY29uc3QgYWxsRXJyb3JFdmVudHM6IHsgbWV0aG9kTmFtZTogc3RyaW5nOyBwcm9wZXJ0eU5hbWU6IHN0cmluZyB9W10gPSBbXG4gIHsgbWV0aG9kTmFtZTogJ29ucG9pbnRlcmxvY2tlcnJvcicsIHByb3BlcnR5TmFtZTogJ3BvaW50ZXJsb2NrZXJyb3InIH0sXG4gIHsgbWV0aG9kTmFtZTogJ29ubW96cG9pbnRlcmxvY2tlcnJvcicsIHByb3BlcnR5TmFtZTogJ21venBvaW50ZXJsb2NrZXJyb3InIH0sXG4gIHtcbiAgICBtZXRob2ROYW1lOiAnb253ZWJraXRwb2ludGVybG9ja2Vycm9yJyxcbiAgICBwcm9wZXJ0eU5hbWU6ICd3ZWJraXRwb2ludGVybG9ja2Vycm9yJ1xuICB9XG5dO1xuXG50eXBlIE9uQ2hhbmdlQ2FsbGJhY2sgPSAoKSA9PiB2b2lkO1xudHlwZSBPbkVycm9yQ2FsbGJhY2sgPSAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkO1xuXG5pbnRlcmZhY2UgSVJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZztcbn1cblxuY2xhc3MgUG9pbnRlckxvY2tNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfb25Mb2NrQ2hhbmdlQ2FsbGJhY2tzOiBPbkNoYW5nZUNhbGxiYWNrW10gPSBbXTtcbiAgcHJpdmF0ZSBfb25Mb2NrRXJyb3JDYWxsYmFja3M6IE9uRXJyb3JDYWxsYmFja1tdID0gW107XG4gIHByaXZhdGUgX3RpbWVTaW5jZUxhc3RMb2NrQ2hhbmdlID0gMDtcblxuICBwcml2YXRlIF9sYXRlc3RSZXF1ZXN0SHRtbEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX2lzSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvLyBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcHJpdmF0ZSBfaW5pdGlhbGl6ZSgpIHtcbiAgICBpZiAodGhpcy5faXNJbml0aWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZTtcblxuICAgIGNvbnN0IG9uTG9ja0NoYW5nZSA9ICgpID0+IHtcbiAgICAgIHRoaXMuX3RpbWVTaW5jZUxhc3RMb2NrQ2hhbmdlID0gRGF0ZS5ub3coKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwidGltZXIgcmVzZXRcIik7XG5cbiAgICAgIHRoaXMuX29uTG9ja0NoYW5nZUNhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT4gY2FsbGJhY2soKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uTG9ja0Vycm9yID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgdGhpcy5fdGltZVNpbmNlTGFzdExvY2tDaGFuZ2UgPSBEYXRlLm5vdygpO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJ0aW1lciByZXNldFwiKTtcblxuICAgICAgdGhpcy5fb25Mb2NrRXJyb3JDYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKGV2ZW50KSk7XG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgY3VyckV2ZW50IG9mIGFsbENoYW5nZUV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudC5tZXRob2ROYW1lIGluIGRvY3VtZW50KSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoY3VyckV2ZW50LnByb3BlcnR5TmFtZSwgb25Mb2NrQ2hhbmdlLCBmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgY3VyckV2ZW50IG9mIGFsbEVycm9yRXZlbnRzKSB7XG4gICAgICBpZiAoY3VyckV2ZW50Lm1ldGhvZE5hbWUgaW4gZG9jdW1lbnQpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihjdXJyRXZlbnQucHJvcGVydHlOYW1lLCBvbkxvY2tFcnJvciwgZmFsc2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvL1xuXG4gIGNhbkJlUG9pbnRlckxvY2tlZChpblRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgZm9yIChjb25zdCBjdXJyRXZlbnQgb2YgYWxsUmVxdWVzdEV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudCBpbiBpblRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vXG5cbiAgaXNQb2ludGVyTG9ja2VkKGluVGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBmb3IgKGNvbnN0IGN1cnJFdmVudCBvZiBhbGxTdGF0ZUV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudCBpbiBkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gKGRvY3VtZW50IGFzIGFueSlbY3VyckV2ZW50XSA9PT0gaW5UYXJnZXRFbGVtZW50O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvL1xuXG4gIGFzeW5jIHJlcXVlc3RQb2ludGVyTG9jayhpblRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KTogUHJvbWlzZTxJUmVzdWx0PiB7XG4gICAgaWYgKHRoaXMuaXNQb2ludGVyTG9ja2VkKGluVGFyZ2V0RWxlbWVudCkpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiAnZWxlbWVudCBhbHJlYWR5IGxvY2tlZCcgfTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG5cbiAgICBpZiAodGhpcy5fdGltZVNpbmNlTGFzdExvY2tDaGFuZ2UgPiAwKSB7XG4gICAgICBjb25zdCBlbGFwc2VkU2VjVGltZSA9XG4gICAgICAgIChEYXRlLm5vdygpIC0gdGhpcy5fdGltZVNpbmNlTGFzdExvY2tDaGFuZ2UpIC8gMTAwMDtcblxuICAgICAgLy8gY29uc29sZS5sb2coXCJlbGFwc2VkU2VjVGltZSAxXCIsIGVsYXBzZWRTZWNUaW1lKTtcblxuICAgICAgaWYgKGVsYXBzZWRTZWNUaW1lIDwgMS4xKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogYHJlcXVlc3QgZm9yIGxvY2sgd2FzIHRvbyBlYXJseSwgdGltZSB0byB3YWl0OiAke2VsYXBzZWRTZWNUaW1lLnRvRml4ZWQoXG4gICAgICAgICAgICAyXG4gICAgICAgICAgKX1zZWNgXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3RpbWVTaW5jZUxhc3RMb2NrQ2hhbmdlID0gRGF0ZS5ub3coKTtcblxuICAgIGZvciAoY29uc3QgY3VyckV2ZW50IG9mIGFsbFJlcXVlc3RFdmVudHMpIHtcbiAgICAgIGlmIChjdXJyRXZlbnQgaW4gaW5UYXJnZXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgLy8gbW9yZSBhY2N1cmF0ZSBieSBkaXNhYmxpbmcgT1MtbGV2ZWwgYWRqdXN0ZWQgbW91c2UgbW92ZW1lbnRzXG4gICAgICAgICAgdW5hZGp1c3RlZE1vdmVtZW50OiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJhY3R1YWwgcmVxdWVzdFwiKTtcblxuICAgICAgICAgIGF3YWl0IChpblRhcmdldEVsZW1lbnQgYXMgYW55KVtjdXJyRXZlbnRdKG9wdGlvbnMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkVSUlwiLCBlcnIpO1xuXG4gICAgICAgICAgY29uc3QgZWxhcHNlZFNlY1RpbWUgPVxuICAgICAgICAgICAgKERhdGUubm93KCkgLSB0aGlzLl90aW1lU2luY2VMYXN0TG9ja0NoYW5nZSkgLyAxMDAwO1xuXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJlbGFwc2VkU2VjVGltZSAyXCIsIGVsYXBzZWRTZWNUaW1lKTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGByZXF1ZXN0IGZvciBsb2NrIHdhcyB0b28gZWFybHksIHRpbWUgdG8gd2FpdDogJHtlbGFwc2VkU2VjVGltZS50b0ZpeGVkKFxuICAgICAgICAgICAgICAyXG4gICAgICAgICAgICApfXNlY2BcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdGltZVNpbmNlTGFzdExvY2tDaGFuZ2UgPSBEYXRlLm5vdygpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRpbWVyIHJlc2V0XCIpO1xuXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdyZXF1ZXN0IGZvciBsb2NrIGRvbmUnIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICd1bnN1cHBvcnRlZCByZXF1ZXN0IGZvciBsb2NrJyB9O1xuICB9XG5cbiAgLy9cblxuICBhbGxvd1BvaW50ZXJMb2NrZWRPbkNsaWNrRXZlbnQoaW5UYXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGlmIChpblRhcmdldEVsZW1lbnQgPT09IHRoaXMuX2xhdGVzdFJlcXVlc3RIdG1sRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2xhdGVzdFJlcXVlc3RIdG1sRWxlbWVudCA9IGluVGFyZ2V0RWxlbWVudDtcblxuICAgIGNvbnN0IG9uQ2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICBpblRhcmdldEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZXF1ZXN0UG9pbnRlckxvY2soaW5UYXJnZXRFbGVtZW50KTtcblxuICAgICAgdGhpcy5fbGF0ZXN0UmVxdWVzdEh0bWxFbGVtZW50ID0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRoaXMuYWxsb3dQb2ludGVyTG9ja2VkT25DbGlja0V2ZW50KGluVGFyZ2V0RWxlbWVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGluVGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xuICB9XG5cbiAgLy9cblxuICBleGl0UG9pbnRlckxvY2soKSB7XG4gICAgZm9yIChjb25zdCBjdXJyRXZlbnQgb2YgYWxsRXhpdEV2ZW50cykge1xuICAgICAgaWYgKGN1cnJFdmVudCBpbiBkb2N1bWVudCkge1xuICAgICAgICAoZG9jdW1lbnQgYXMgYW55KVtjdXJyRXZlbnRdKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vXG5cbiAgYWRkT25Mb2NrQ2hhbmdlKGluQ2FsbGJhY2s6IE9uQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICB0aGlzLl9vbkxvY2tDaGFuZ2VDYWxsYmFja3MucHVzaChpbkNhbGxiYWNrKTtcbiAgfVxuICByZW1vdmVPbkxvY2tDaGFuZ2UoaW5DYWxsYmFjazogT25DaGFuZ2VDYWxsYmFjaykge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fb25Mb2NrQ2hhbmdlQ2FsbGJhY2tzLmluZGV4T2YoaW5DYWxsYmFjayk7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9vbkxvY2tDaGFuZ2VDYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIC8vXG5cbiAgYWRkT25Mb2NrRXJyb3IoaW5DYWxsYmFjazogT25FcnJvckNhbGxiYWNrKSB7XG4gICAgdGhpcy5fb25Mb2NrRXJyb3JDYWxsYmFja3MucHVzaChpbkNhbGxiYWNrKTtcbiAgfVxuICByZW1vdmVPbkxvY2tFcnJvcihpbkNhbGxiYWNrOiBPbkVycm9yQ2FsbGJhY2spIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX29uTG9ja0Vycm9yQ2FsbGJhY2tzLmluZGV4T2YoaW5DYWxsYmFjayk7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9vbkxvY2tFcnJvckNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG5cbiAgLy9cblxuICByZW1vdmVBbGxDYWxsYmFja3MoKSB7XG4gICAgdGhpcy5fb25Mb2NrQ2hhbmdlQ2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fb25Mb2NrRXJyb3JDYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgfVxufVxuXG5jb25zdCBHbG9iYWxQb2ludGVyTG9ja01hbmFnZXIgPSBuZXcgUG9pbnRlckxvY2tNYW5hZ2VyKCk7XG5cbmV4cG9ydCB7IEdsb2JhbFBvaW50ZXJMb2NrTWFuYWdlciB9O1xuIiwKICAiY2xhc3MgVG91Y2hEYXRhIHtcbiAgcHVibGljIGlkOiBudW1iZXI7XG4gIHB1YmxpYyBjcmVhdGVkQXQgPSBEYXRlLm5vdygpO1xuICBwdWJsaWMgcG9zaXRpb25YOiBudW1iZXI7XG4gIHB1YmxpYyBwb3NpdGlvblk6IG51bWJlcjtcbiAgcHVibGljIGRlbHRhWDogbnVtYmVyID0gMDtcbiAgcHVibGljIGRlbHRhWTogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwb3NpdGlvblg6IG51bWJlciwgcG9zaXRpb25ZOiBudW1iZXIpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5wb3NpdGlvblggPSBwb3NpdGlvblg7XG4gICAgdGhpcy5wb3NpdGlvblkgPSBwb3NpdGlvblk7XG4gIH1cblxuICByZXNldERlbHRhKCkge1xuICAgIHRoaXMuZGVsdGFYID0gMDtcbiAgICB0aGlzLmRlbHRhWSA9IDA7XG4gIH1cbn1cblxuY2xhc3MgVG91Y2hNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfYWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2FsbFRvdWNoRGF0YU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBUb3VjaERhdGE+KCk7XG4gIHByaXZhdGUgX2FsbENhY2hlZFRvdWNoRGF0YUFycmF5OiBUb3VjaERhdGFbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2hhbmRsZVRvdWNoU3RhcnQ6IChldmVudDogVG91Y2hFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfaGFuZGxlVG91Y2hFbmQ6IChldmVudDogVG91Y2hFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfaGFuZGxlVG91Y2hNb3ZlOiAoZXZlbnQ6IFRvdWNoRXZlbnQpID0+IHZvaWQ7XG5cbiAgcHJpdmF0ZSBfb25FdmVudDogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGhhbmRsZVRvdWNoU3RhcnQgPSAoZXZlbnQ6IFRvdWNoRXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGlmICh0aGlzLl9vbkV2ZW50KSB7XG4gICAgICAgIHRoaXMuX29uRXZlbnQoKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgKytpaSkge1xuICAgICAgICBjb25zdCB7IGlkZW50aWZpZXIsIHBhZ2VYLCBwYWdlWSB9ID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaWldO1xuICAgICAgICBjb25zdCBuZXdEYXRhID0gbmV3IFRvdWNoRGF0YShpZGVudGlmaWVyLCBwYWdlWCwgcGFnZVkpO1xuXG4gICAgICAgIHRoaXMuX2FsbFRvdWNoRGF0YU1hcC5zZXQoYCR7aWRlbnRpZmllcn1gLCBuZXdEYXRhKTtcbiAgICAgICAgdGhpcy5fYWxsQ2FjaGVkVG91Y2hEYXRhQXJyYXkubGVuZ3RoID0gMDtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZVRvdWNoRW5kID0gKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAodGhpcy5fb25FdmVudCkge1xuICAgICAgICB0aGlzLl9vbkV2ZW50KCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgY29uc3QgeyBpZGVudGlmaWVyIH0gPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpaV07XG5cbiAgICAgICAgdGhpcy5fYWxsVG91Y2hEYXRhTWFwLmRlbGV0ZShgJHtpZGVudGlmaWVyfWApO1xuICAgICAgICB0aGlzLl9hbGxDYWNoZWRUb3VjaERhdGFBcnJheS5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaGFuZGxlVG91Y2hNb3ZlID0gKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAodGhpcy5fb25FdmVudCkge1xuICAgICAgICB0aGlzLl9vbkV2ZW50KCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgY29uc3QgeyBpZGVudGlmaWVyLCBwYWdlWCwgcGFnZVkgfSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2lpXTtcblxuICAgICAgICBjb25zdCBjdXJyRGF0YSA9IHRoaXMuX2FsbFRvdWNoRGF0YU1hcC5nZXQoYCR7aWRlbnRpZmllcn1gKTtcbiAgICAgICAgaWYgKCFjdXJyRGF0YSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVsdGFYID0gcGFnZVggLSBjdXJyRGF0YS5wb3NpdGlvblg7XG4gICAgICAgIGNvbnN0IGRlbHRhWSA9IHBhZ2VZIC0gY3VyckRhdGEucG9zaXRpb25ZO1xuXG4gICAgICAgIGN1cnJEYXRhLmRlbHRhWCArPSBkZWx0YVg7XG4gICAgICAgIGN1cnJEYXRhLmRlbHRhWSArPSBkZWx0YVk7XG4gICAgICAgIGN1cnJEYXRhLnBvc2l0aW9uWCA9IHBhZ2VYO1xuICAgICAgICBjdXJyRGF0YS5wb3NpdGlvblkgPSBwYWdlWTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgdGhpcy5faGFuZGxlVG91Y2hTdGFydCA9IGhhbmRsZVRvdWNoU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVUb3VjaEVuZCA9IGhhbmRsZVRvdWNoRW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlVG91Y2hNb3ZlID0gaGFuZGxlVG91Y2hNb3ZlLmJpbmQodGhpcyk7XG4gIH1cblxuICBpc1N1cHBvcnRlZChpblRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgcmV0dXJuICdvbnRvdWNoc3RhcnQnIGluIGluVGFyZ2V0RWxlbWVudDtcbiAgfVxuXG4gIGFjdGl2YXRlKGluVGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuaXNTdXBwb3J0ZWQoaW5UYXJnZXRFbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYWN0aXZhdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYWxsVG91Y2hEYXRhTWFwLmNsZWFyKCk7XG4gICAgdGhpcy5fYWxsQ2FjaGVkVG91Y2hEYXRhQXJyYXkubGVuZ3RoID0gMDtcblxuICAgIGluVGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlVG91Y2hTdGFydCk7XG4gICAgaW5UYXJnZXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlVG91Y2hFbmQpO1xuICAgIGluVGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMuX2hhbmRsZVRvdWNoRW5kKTtcbiAgICBpblRhcmdldEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlVG91Y2hNb3ZlLCB7XG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgdGhpcy5fYWN0aXZhdGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGRlYWN0aXZhdGUoaW5UYXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGlmICghdGhpcy5fYWN0aXZhdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYWxsVG91Y2hEYXRhTWFwLmNsZWFyKCk7XG4gICAgdGhpcy5fYWxsQ2FjaGVkVG91Y2hEYXRhQXJyYXkubGVuZ3RoID0gMDtcblxuICAgIGluVGFyZ2V0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlVG91Y2hTdGFydCk7XG4gICAgaW5UYXJnZXRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlVG91Y2hFbmQpO1xuICAgIGluVGFyZ2V0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMuX2hhbmRsZVRvdWNoRW5kKTtcbiAgICBpblRhcmdldEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlVG91Y2hNb3ZlKTtcblxuICAgIHRoaXMuX2FjdGl2YXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaENhY2hlKCkge1xuICAgIGlmICh0aGlzLl9hbGxDYWNoZWRUb3VjaERhdGFBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2FsbENhY2hlZFRvdWNoRGF0YUFycmF5ID0gWy4uLnRoaXMuX2FsbFRvdWNoRGF0YU1hcC52YWx1ZXMoKV07XG4gICAgfVxuICB9XG5cbiAgZ2V0VG91Y2hEYXRhKCk6IFJlYWRvbmx5QXJyYXk8VG91Y2hEYXRhPiB7XG4gICAgdGhpcy5fcmVmcmVzaENhY2hlKCk7XG4gICAgcmV0dXJuIHRoaXMuX2FsbENhY2hlZFRvdWNoRGF0YUFycmF5O1xuICB9XG5cbiAgcmVzZXREZWx0YXMoKSB7XG4gICAgdGhpcy5fcmVmcmVzaENhY2hlKCk7XG4gICAgdGhpcy5fYWxsQ2FjaGVkVG91Y2hEYXRhQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS5yZXNldERlbHRhKCkpO1xuICB9XG5cbiAgb25FdmVudChjYWxsYmFjazogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fb25FdmVudCA9IGNhbGxiYWNrO1xuICB9XG59XG5cbi8vXG4vL1xuLy9cblxuY29uc3QgR2xvYmFsVG91Y2hNYW5hZ2VyID0gbmV3IFRvdWNoTWFuYWdlcigpO1xuXG5leHBvcnQgeyBHbG9iYWxUb3VjaE1hbmFnZXIgfTtcbiIsCiAgInR5cGUgT25DaGFuZ2VDYWxsYmFjayA9IChpc1Zpc2libGU6IGJvb2xlYW4pID0+IHZvaWQ7XG5cbmNsYXNzIFZpc2liaWxpdHlNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBfYWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX29uVmlzaWJpbGl0eUNoYW5nZUNhbGxiYWNrczogT25DaGFuZ2VDYWxsYmFja1tdID0gW107XG5cbiAgcHJpdmF0ZSBfaGFuZGxlVmlzaWJpbGl0eUNoYW5nZTogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zdCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlID0gKCkgPT4ge1xuICAgICAgY29uc3QgaXNWaXNpYmxlID0gdGhpcy5pc1Zpc2libGUoKTtcbiAgICAgIHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZUNhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT5cbiAgICAgICAgY2FsbGJhY2soaXNWaXNpYmxlKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgdGhpcy5faGFuZGxlVmlzaWJpbGl0eUNoYW5nZSA9IGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGFjdGl2YXRlKCkge1xuICAgIGlmICghdGhpcy5pc1N1cHBvcnRlZCgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9hY3RpdmF0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ3Zpc2liaWxpdHljaGFuZ2UnLFxuICAgICAgdGhpcy5faGFuZGxlVmlzaWJpbGl0eUNoYW5nZSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIHRoaXMuX2FjdGl2YXRlZCA9IHRydWU7XG4gIH1cblxuICBkZWFjdGl2YXRlKCkge1xuICAgIGlmICghdGhpcy5fYWN0aXZhdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICd2aXNpYmlsaXR5Y2hhbmdlJyxcbiAgICAgIHRoaXMuX2hhbmRsZVZpc2liaWxpdHlDaGFuZ2UsXG4gICAgICBmYWxzZVxuICAgICk7XG5cbiAgICB0aGlzLl9hY3RpdmF0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8vXG5cbiAgaXNTdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuICdvbnZpc2liaWxpdHljaGFuZ2UnIGluIGRvY3VtZW50O1xuICB9XG5cbiAgLy9cblxuICBpc1Zpc2libGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnO1xuICB9XG5cbiAgLy9cblxuICBhZGRWaXNpYmlsaXR5Q2hhbmdlKGluQ2FsbGJhY2s6IE9uQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICB0aGlzLl9vblZpc2liaWxpdHlDaGFuZ2VDYWxsYmFja3MucHVzaChpbkNhbGxiYWNrKTtcbiAgfVxuICByZW1vdmVWaXNpYmlsaXR5Q2hhbmdlKGluQ2FsbGJhY2s6IE9uQ2hhbmdlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZUNhbGxiYWNrcy5pbmRleE9mKGluQ2FsbGJhY2spO1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fb25WaXNpYmlsaXR5Q2hhbmdlQ2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICAvL1xuXG4gIHJlbW92ZUFsbENhbGxiYWNrcygpIHtcbiAgICB0aGlzLl9vblZpc2liaWxpdHlDaGFuZ2VDYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgfVxufVxuXG5jb25zdCBHbG9iYWxWaXNpYmlsaXR5TWFuYWdlciA9IG5ldyBWaXNpYmlsaXR5TWFuYWdlcigpO1xuXG5leHBvcnQgeyBHbG9iYWxWaXNpYmlsaXR5TWFuYWdlciB9O1xuIiwKICAiZXhwb3J0IGNvbnN0IGlzV2ViV29ya2VyU3VwcG9ydGVkID0gKCk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gISF3aW5kb3cuV29ya2VyO1xufTtcbiIsCiAgImV4cG9ydCBjb25zdCBpc1dlYkdMMlN1cHBvcnRlZCA9ICgpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuICEhd2luZG93LldlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XG59O1xuIiwKICAiLyoqXG4gKiBDb21tb24gdXRpbGl0aWVzXG4gKiBAbW9kdWxlIGdsTWF0cml4XG4gKi9cbi8vIENvbmZpZ3VyYXRpb24gQ29uc3RhbnRzXG5leHBvcnQgdmFyIEVQU0lMT04gPSAwLjAwMDAwMTtcbmV4cG9ydCB2YXIgQVJSQVlfVFlQRSA9IHR5cGVvZiBGbG9hdDMyQXJyYXkgIT09ICd1bmRlZmluZWQnID8gRmxvYXQzMkFycmF5IDogQXJyYXk7XG5leHBvcnQgdmFyIFJBTkRPTSA9IE1hdGgucmFuZG9tO1xuLyoqXG4gKiBTZXRzIHRoZSB0eXBlIG9mIGFycmF5IHVzZWQgd2hlbiBjcmVhdGluZyBuZXcgdmVjdG9ycyBhbmQgbWF0cmljZXNcbiAqXG4gKiBAcGFyYW0ge0Zsb2F0MzJBcnJheUNvbnN0cnVjdG9yIHwgQXJyYXlDb25zdHJ1Y3Rvcn0gdHlwZSBBcnJheSB0eXBlLCBzdWNoIGFzIEZsb2F0MzJBcnJheSBvciBBcnJheVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRNYXRyaXhBcnJheVR5cGUodHlwZSkge1xuICBBUlJBWV9UWVBFID0gdHlwZTtcbn1cbnZhciBkZWdyZWUgPSBNYXRoLlBJIC8gMTgwO1xuLyoqXG4gKiBDb252ZXJ0IERlZ3JlZSBUbyBSYWRpYW5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gYSBBbmdsZSBpbiBEZWdyZWVzXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFuKGEpIHtcbiAgcmV0dXJuIGEgKiBkZWdyZWU7XG59XG4vKipcbiAqIFRlc3RzIHdoZXRoZXIgb3Igbm90IHRoZSBhcmd1bWVudHMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIHZhbHVlLCB3aXRoaW4gYW4gYWJzb2x1dGVcbiAqIG9yIHJlbGF0aXZlIHRvbGVyYW5jZSBvZiBnbE1hdHJpeC5FUFNJTE9OIChhbiBhYnNvbHV0ZSB0b2xlcmFuY2UgaXMgdXNlZCBmb3IgdmFsdWVzIGxlc3NcbiAqIHRoYW4gb3IgZXF1YWwgdG8gMS4wLCBhbmQgYSByZWxhdGl2ZSB0b2xlcmFuY2UgaXMgdXNlZCBmb3IgbGFyZ2VyIHZhbHVlcylcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gYSBUaGUgZmlyc3QgbnVtYmVyIHRvIHRlc3QuXG4gKiBAcGFyYW0ge051bWJlcn0gYiBUaGUgc2Vjb25kIG51bWJlciB0byB0ZXN0LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG51bWJlcnMgYXJlIGFwcHJveGltYXRlbHkgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIE1hdGguYWJzKGEgLSBiKSA8PSBFUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhKSwgTWF0aC5hYnMoYikpO1xufVxuaWYgKCFNYXRoLmh5cG90KSBNYXRoLmh5cG90ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgeSA9IDAsXG4gICAgICBpID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgeSArPSBhcmd1bWVudHNbaV0gKiBhcmd1bWVudHNbaV07XG4gIH1cblxuICByZXR1cm4gTWF0aC5zcXJ0KHkpO1xufTsiLAogICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogM3gzIE1hdHJpeFxuICogQG1vZHVsZSBtYXQzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDNcbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gYSBuZXcgM3gzIG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg5KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNV0gPSAwO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgfVxuXG4gIG91dFswXSA9IDE7XG4gIG91dFs0XSA9IDE7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcGllcyB0aGUgdXBwZXItbGVmdCAzeDMgdmFsdWVzIGludG8gdGhlIGdpdmVuIG1hdDMuXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyAzeDMgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSAgIHRoZSBzb3VyY2UgNHg0IG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTWF0NChvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVs0XTtcbiAgb3V0WzRdID0gYVs1XTtcbiAgb3V0WzVdID0gYVs2XTtcbiAgb3V0WzZdID0gYVs4XTtcbiAgb3V0WzddID0gYVs5XTtcbiAgb3V0WzhdID0gYVsxMF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWF0MyBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIG1hdHJpeCB0byBjbG9uZVxuICogQHJldHVybnMge21hdDN9IGEgbmV3IDN4MyBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOSk7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIG91dFs0XSA9IGFbNF07XG4gIG91dFs1XSA9IGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSBtYXQzIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IG1hdDMgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMCBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMSBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMCBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAwIHBvc2l0aW9uIChpbmRleCAzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA0KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMiBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA1KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMCBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA2KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMSBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA3KVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMiBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA4KVxuICogQHJldHVybnMge21hdDN9IEEgbmV3IG1hdDNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyhtMDAsIG0wMSwgbTAyLCBtMTAsIG0xMSwgbTEyLCBtMjAsIG0yMSwgbTIyKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg5KTtcbiAgb3V0WzBdID0gbTAwO1xuICBvdXRbMV0gPSBtMDE7XG4gIG91dFsyXSA9IG0wMjtcbiAgb3V0WzNdID0gbTEwO1xuICBvdXRbNF0gPSBtMTE7XG4gIG91dFs1XSA9IG0xMjtcbiAgb3V0WzZdID0gbTIwO1xuICBvdXRbN10gPSBtMjE7XG4gIG91dFs4XSA9IG0yMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgbWF0MyB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDAgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDEgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDIgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTAgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTEgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTIgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggNSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjAgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggNilcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjEgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNylcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjIgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggOClcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgbTAwLCBtMDEsIG0wMiwgbTEwLCBtMTEsIG0xMiwgbTIwLCBtMjEsIG0yMikge1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMTA7XG4gIG91dFs0XSA9IG0xMTtcbiAgb3V0WzVdID0gbTEyO1xuICBvdXRbNl0gPSBtMjA7XG4gIG91dFs3XSA9IG0yMTtcbiAgb3V0WzhdID0gbTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgYSBtYXQzIHRvIHRoZSBpZGVudGl0eSBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMTtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNwb3NlIHRoZSB2YWx1ZXMgb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zcG9zZShvdXQsIGEpIHtcbiAgLy8gSWYgd2UgYXJlIHRyYW5zcG9zaW5nIG91cnNlbHZlcyB3ZSBjYW4gc2tpcCBhIGZldyBzdGVwcyBidXQgaGF2ZSB0byBjYWNoZSBzb21lIHZhbHVlc1xuICBpZiAob3V0ID09PSBhKSB7XG4gICAgdmFyIGEwMSA9IGFbMV0sXG4gICAgICAgIGEwMiA9IGFbMl0sXG4gICAgICAgIGExMiA9IGFbNV07XG4gICAgb3V0WzFdID0gYVszXTtcbiAgICBvdXRbMl0gPSBhWzZdO1xuICAgIG91dFszXSA9IGEwMTtcbiAgICBvdXRbNV0gPSBhWzddO1xuICAgIG91dFs2XSA9IGEwMjtcbiAgICBvdXRbN10gPSBhMTI7XG4gIH0gZWxzZSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzNdO1xuICAgIG91dFsyXSA9IGFbNl07XG4gICAgb3V0WzNdID0gYVsxXTtcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbN107XG4gICAgb3V0WzZdID0gYVsyXTtcbiAgICBvdXRbN10gPSBhWzVdO1xuICAgIG91dFs4XSA9IGFbOF07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBJbnZlcnRzIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHZhciBiMDEgPSBhMjIgKiBhMTEgLSBhMTIgKiBhMjE7XG4gIHZhciBiMTEgPSAtYTIyICogYTEwICsgYTEyICogYTIwO1xuICB2YXIgYjIxID0gYTIxICogYTEwIC0gYTExICogYTIwOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGEwMCAqIGIwMSArIGEwMSAqIGIxMSArIGEwMiAqIGIyMTtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSBiMDEgKiBkZXQ7XG4gIG91dFsxXSA9ICgtYTIyICogYTAxICsgYTAyICogYTIxKSAqIGRldDtcbiAgb3V0WzJdID0gKGExMiAqIGEwMSAtIGEwMiAqIGExMSkgKiBkZXQ7XG4gIG91dFszXSA9IGIxMSAqIGRldDtcbiAgb3V0WzRdID0gKGEyMiAqIGEwMCAtIGEwMiAqIGEyMCkgKiBkZXQ7XG4gIG91dFs1XSA9ICgtYTEyICogYTAwICsgYTAyICogYTEwKSAqIGRldDtcbiAgb3V0WzZdID0gYjIxICogZGV0O1xuICBvdXRbN10gPSAoLWEyMSAqIGEwMCArIGEwMSAqIGEyMCkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMTEgKiBhMDAgLSBhMDEgKiBhMTApICogZGV0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhZGp1Z2F0ZSBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRqb2ludChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgb3V0WzBdID0gYTExICogYTIyIC0gYTEyICogYTIxO1xuICBvdXRbMV0gPSBhMDIgKiBhMjEgLSBhMDEgKiBhMjI7XG4gIG91dFsyXSA9IGEwMSAqIGExMiAtIGEwMiAqIGExMTtcbiAgb3V0WzNdID0gYTEyICogYTIwIC0gYTEwICogYTIyO1xuICBvdXRbNF0gPSBhMDAgKiBhMjIgLSBhMDIgKiBhMjA7XG4gIG91dFs1XSA9IGEwMiAqIGExMCAtIGEwMCAqIGExMjtcbiAgb3V0WzZdID0gYTEwICogYTIxIC0gYTExICogYTIwO1xuICBvdXRbN10gPSBhMDEgKiBhMjAgLSBhMDAgKiBhMjE7XG4gIG91dFs4XSA9IGEwMCAqIGExMSAtIGEwMSAqIGExMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRldGVybWluYW50IG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5hbnQoYSkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdO1xuICB2YXIgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdO1xuICB2YXIgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdO1xuICByZXR1cm4gYTAwICogKGEyMiAqIGExMSAtIGExMiAqIGEyMSkgKyBhMDEgKiAoLWEyMiAqIGExMCArIGExMiAqIGEyMCkgKyBhMDIgKiAoYTIxICogYTEwIC0gYTExICogYTIwKTtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gbWF0MydzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHZhciBiMDAgPSBiWzBdLFxuICAgICAgYjAxID0gYlsxXSxcbiAgICAgIGIwMiA9IGJbMl07XG4gIHZhciBiMTAgPSBiWzNdLFxuICAgICAgYjExID0gYls0XSxcbiAgICAgIGIxMiA9IGJbNV07XG4gIHZhciBiMjAgPSBiWzZdLFxuICAgICAgYjIxID0gYls3XSxcbiAgICAgIGIyMiA9IGJbOF07XG4gIG91dFswXSA9IGIwMCAqIGEwMCArIGIwMSAqIGExMCArIGIwMiAqIGEyMDtcbiAgb3V0WzFdID0gYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxO1xuICBvdXRbMl0gPSBiMDAgKiBhMDIgKyBiMDEgKiBhMTIgKyBiMDIgKiBhMjI7XG4gIG91dFszXSA9IGIxMCAqIGEwMCArIGIxMSAqIGExMCArIGIxMiAqIGEyMDtcbiAgb3V0WzRdID0gYjEwICogYTAxICsgYjExICogYTExICsgYjEyICogYTIxO1xuICBvdXRbNV0gPSBiMTAgKiBhMDIgKyBiMTEgKiBhMTIgKyBiMTIgKiBhMjI7XG4gIG91dFs2XSA9IGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMDtcbiAgb3V0WzddID0gYjIwICogYTAxICsgYjIxICogYTExICsgYjIyICogYTIxO1xuICBvdXRbOF0gPSBiMjAgKiBhMDIgKyBiMjEgKiBhMTIgKyBiMjIgKiBhMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zbGF0ZSBhIG1hdDMgYnkgdGhlIGdpdmVuIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV0sXG4gICAgICBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF0sXG4gICAgICB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdO1xuICBvdXRbMF0gPSBhMDA7XG4gIG91dFsxXSA9IGEwMTtcbiAgb3V0WzJdID0gYTAyO1xuICBvdXRbM10gPSBhMTA7XG4gIG91dFs0XSA9IGExMTtcbiAgb3V0WzVdID0gYTEyO1xuICBvdXRbNl0gPSB4ICogYTAwICsgeSAqIGExMCArIGEyMDtcbiAgb3V0WzddID0geCAqIGEwMSArIHkgKiBhMTEgKyBhMjE7XG4gIG91dFs4XSA9IHggKiBhMDIgKyB5ICogYTEyICsgYTIyO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0MyBieSB0aGUgZ2l2ZW4gYW5nbGVcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShvdXQsIGEsIHJhZCkge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTEwID0gYVszXSxcbiAgICAgIGExMSA9IGFbNF0sXG4gICAgICBhMTIgPSBhWzVdLFxuICAgICAgYTIwID0gYVs2XSxcbiAgICAgIGEyMSA9IGFbN10sXG4gICAgICBhMjIgPSBhWzhdLFxuICAgICAgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICBjID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYyAqIGEwMCArIHMgKiBhMTA7XG4gIG91dFsxXSA9IGMgKiBhMDEgKyBzICogYTExO1xuICBvdXRbMl0gPSBjICogYTAyICsgcyAqIGExMjtcbiAgb3V0WzNdID0gYyAqIGExMCAtIHMgKiBhMDA7XG4gIG91dFs0XSA9IGMgKiBhMTEgLSBzICogYTAxO1xuICBvdXRbNV0gPSBjICogYTEyIC0gcyAqIGEwMjtcbiAgb3V0WzZdID0gYTIwO1xuICBvdXRbN10gPSBhMjE7XG4gIG91dFs4XSA9IGEyMjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2NhbGVzIHRoZSBtYXQzIGJ5IHRoZSBkaW1lbnNpb25zIGluIHRoZSBnaXZlbiB2ZWMyXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gdiB0aGUgdmVjMiB0byBzY2FsZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIHYpIHtcbiAgdmFyIHggPSB2WzBdLFxuICAgICAgeSA9IHZbMV07XG4gIG91dFswXSA9IHggKiBhWzBdO1xuICBvdXRbMV0gPSB4ICogYVsxXTtcbiAgb3V0WzJdID0geCAqIGFbMl07XG4gIG91dFszXSA9IHkgKiBhWzNdO1xuICBvdXRbNF0gPSB5ICogYVs0XTtcbiAgb3V0WzVdID0geSAqIGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHZlY3RvciB0cmFuc2xhdGlvblxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0My50cmFuc2xhdGUoZGVzdCwgZGVzdCwgdmVjKTtcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVRyYW5zbGF0aW9uKG91dCwgdikge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAxO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSB2WzBdO1xuICBvdXRbN10gPSB2WzFdO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBnaXZlbiBhbmdsZVxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0My5yb3RhdGUoZGVzdCwgZGVzdCwgcmFkKTtcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGM7XG4gIG91dFsxXSA9IHM7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IC1zO1xuICBvdXRbNF0gPSBjO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3Igc2NhbGluZ1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0My5zY2FsZShkZXN0LCBkZXN0LCB2ZWMpO1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IFNjYWxpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21TY2FsaW5nKG91dCwgdikge1xuICBvdXRbMF0gPSB2WzBdO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB2WzFdO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDb3BpZXMgdGhlIHZhbHVlcyBmcm9tIGEgbWF0MmQgaW50byBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDJkfSBhIHRoZSBtYXRyaXggdG8gY29weVxuICogQHJldHVybnMge21hdDN9IG91dFxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDJkKG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSBhWzJdO1xuICBvdXRbNF0gPSBhWzNdO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSBhWzRdO1xuICBvdXRbN10gPSBhWzVdO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGEgM3gzIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgUXVhdGVybmlvbiB0byBjcmVhdGUgbWF0cml4IGZyb21cbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdWF0KG91dCwgcSkge1xuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHl4ID0geSAqIHgyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB6eCA9IHogKiB4MjtcbiAgdmFyIHp5ID0geiAqIHkyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIG91dFswXSA9IDEgLSB5eSAtIHp6O1xuICBvdXRbM10gPSB5eCAtIHd6O1xuICBvdXRbNl0gPSB6eCArIHd5O1xuICBvdXRbMV0gPSB5eCArIHd6O1xuICBvdXRbNF0gPSAxIC0geHggLSB6ejtcbiAgb3V0WzddID0genkgLSB3eDtcbiAgb3V0WzJdID0genggLSB3eTtcbiAgb3V0WzVdID0genkgKyB3eDtcbiAgb3V0WzhdID0gMSAtIHh4IC0geXk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgYSAzeDMgbm9ybWFsIG1hdHJpeCAodHJhbnNwb3NlIGludmVyc2UpIGZyb20gdGhlIDR4NCBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBNYXQ0IHRvIGRlcml2ZSB0aGUgbm9ybWFsIG1hdHJpeCBmcm9tXG4gKlxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxGcm9tTWF0NChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICB2YXIgZGV0ID0gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xuXG4gIGlmICghZGV0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBkZXQgPSAxLjAgLyBkZXQ7XG4gIG91dFswXSA9IChhMTEgKiBiMTEgLSBhMTIgKiBiMTAgKyBhMTMgKiBiMDkpICogZGV0O1xuICBvdXRbMV0gPSAoYTEyICogYjA4IC0gYTEwICogYjExIC0gYTEzICogYjA3KSAqIGRldDtcbiAgb3V0WzJdID0gKGExMCAqIGIxMCAtIGExMSAqIGIwOCArIGExMyAqIGIwNikgKiBkZXQ7XG4gIG91dFszXSA9IChhMDIgKiBiMTAgLSBhMDEgKiBiMTEgLSBhMDMgKiBiMDkpICogZGV0O1xuICBvdXRbNF0gPSAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldDtcbiAgb3V0WzVdID0gKGEwMSAqIGIwOCAtIGEwMCAqIGIxMCAtIGEwMyAqIGIwNikgKiBkZXQ7XG4gIG91dFs2XSA9IChhMzEgKiBiMDUgLSBhMzIgKiBiMDQgKyBhMzMgKiBiMDMpICogZGV0O1xuICBvdXRbN10gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcbiAgb3V0WzhdID0gKGEzMCAqIGIwNCAtIGEzMSAqIGIwMiArIGEzMyAqIGIwMCkgKiBkZXQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIDJEIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kc1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB5b3VyIGdsIGNvbnRleHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIGdsIGNvbnRleHRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdGlvbihvdXQsIHdpZHRoLCBoZWlnaHQpIHtcbiAgb3V0WzBdID0gMiAvIHdpZHRoO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAtMiAvIGhlaWdodDtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gLTE7XG4gIG91dFs3XSA9IDE7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgbWF0cml4IHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtYXRyaXhcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwibWF0MyhcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIiwgXCIgKyBhWzRdICsgXCIsIFwiICsgYVs1XSArIFwiLCBcIiArIGFbNl0gKyBcIiwgXCIgKyBhWzddICsgXCIsIFwiICsgYVs4XSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIEZyb2Jlbml1cyBub3JtIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gY2FsY3VsYXRlIEZyb2Jlbml1cyBub3JtIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBGcm9iZW5pdXMgbm9ybVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9iKGEpIHtcbiAgcmV0dXJuIE1hdGguaHlwb3QoYVswXSwgYVsxXSwgYVsyXSwgYVszXSwgYVs0XSwgYVs1XSwgYVs2XSwgYVs3XSwgYVs4XSk7XG59XG4vKipcbiAqIEFkZHMgdHdvIG1hdDMnc1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgb3V0WzNdID0gYVszXSArIGJbM107XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdO1xuICBvdXRbNV0gPSBhWzVdICsgYls1XTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl07XG4gIG91dFs3XSA9IGFbN10gKyBiWzddO1xuICBvdXRbOF0gPSBhWzhdICsgYls4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIG1hdHJpeCBiIGZyb20gbWF0cml4IGFcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIG91dFs0XSA9IGFbNF0gLSBiWzRdO1xuICBvdXRbNV0gPSBhWzVdIC0gYls1XTtcbiAgb3V0WzZdID0gYVs2XSAtIGJbNl07XG4gIG91dFs3XSA9IGFbN10gLSBiWzddO1xuICBvdXRbOF0gPSBhWzhdIC0gYls4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTXVsdGlwbHkgZWFjaCBlbGVtZW50IG9mIHRoZSBtYXRyaXggYnkgYSBzY2FsYXIuXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgbWF0cml4J3MgZWxlbWVudHMgYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXIob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiO1xuICBvdXRbMV0gPSBhWzFdICogYjtcbiAgb3V0WzJdID0gYVsyXSAqIGI7XG4gIG91dFszXSA9IGFbM10gKiBiO1xuICBvdXRbNF0gPSBhWzRdICogYjtcbiAgb3V0WzVdID0gYVs1XSAqIGI7XG4gIG91dFs2XSA9IGFbNl0gKiBiO1xuICBvdXRbN10gPSBhWzddICogYjtcbiAgb3V0WzhdID0gYVs4XSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIG1hdDMncyBhZnRlciBtdWx0aXBseWluZyBlYWNoIGVsZW1lbnQgb2YgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiJ3MgZWxlbWVudHMgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhckFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIG91dFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdICogc2NhbGU7XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdICogc2NhbGU7XG4gIG91dFs2XSA9IGFbNl0gKyBiWzZdICogc2NhbGU7XG4gIG91dFs3XSA9IGFbN10gKyBiWzddICogc2NhbGU7XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBUaGUgZmlyc3QgbWF0cml4LlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgVGhlIHNlY29uZCBtYXRyaXguXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWF0cmljZXMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4YWN0RXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdICYmIGFbM10gPT09IGJbM10gJiYgYVs0XSA9PT0gYls0XSAmJiBhWzVdID09PSBiWzVdICYmIGFbNl0gPT09IGJbNl0gJiYgYVs3XSA9PT0gYls3XSAmJiBhWzhdID09PSBiWzhdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBtYXRyaWNlcyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgVGhlIGZpcnN0IG1hdHJpeC5cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIFRoZSBzZWNvbmQgbWF0cml4LlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG1hdHJpY2VzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdLFxuICAgICAgYTQgPSBhWzRdLFxuICAgICAgYTUgPSBhWzVdLFxuICAgICAgYTYgPSBhWzZdLFxuICAgICAgYTcgPSBhWzddLFxuICAgICAgYTggPSBhWzhdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdLFxuICAgICAgYjQgPSBiWzRdLFxuICAgICAgYjUgPSBiWzVdLFxuICAgICAgYjYgPSBiWzZdLFxuICAgICAgYjcgPSBiWzddLFxuICAgICAgYjggPSBiWzhdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSkgJiYgTWF0aC5hYnMoYTMgLSBiMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTMpLCBNYXRoLmFicyhiMykpICYmIE1hdGguYWJzKGE0IC0gYjQpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE0KSwgTWF0aC5hYnMoYjQpKSAmJiBNYXRoLmFicyhhNSAtIGI1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNSksIE1hdGguYWJzKGI1KSkgJiYgTWF0aC5hYnMoYTYgLSBiNikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTYpLCBNYXRoLmFicyhiNikpICYmIE1hdGguYWJzKGE3IC0gYjcpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE3KSwgTWF0aC5hYnMoYjcpKSAmJiBNYXRoLmFicyhhOCAtIGI4KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhOCksIE1hdGguYWJzKGI4KSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0My5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0My5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7IiwKICAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcbiAqIDR4NCBNYXRyaXg8YnI+Rm9ybWF0OiBjb2x1bW4tbWFqb3IsIHdoZW4gdHlwZWQgb3V0IGl0IGxvb2tzIGxpa2Ugcm93LW1ham9yPGJyPlRoZSBtYXRyaWNlcyBhcmUgYmVpbmcgcG9zdCBtdWx0aXBsaWVkLlxuICogQG1vZHVsZSBtYXQ0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDRcbiAqXG4gKiBAcmV0dXJucyB7bWF0NH0gYSBuZXcgNHg0IG1hdHJpeFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgxNik7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMDtcbiAgICBvdXRbOV0gPSAwO1xuICAgIG91dFsxMV0gPSAwO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAwO1xuICB9XG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSBtYXRyaXggdG8gY2xvbmVcbiAqIEByZXR1cm5zIHttYXQ0fSBhIG5ldyA0eDQgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDE2KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgb3V0WzldID0gYVs5XTtcbiAgb3V0WzEwXSA9IGFbMTBdO1xuICBvdXRbMTFdID0gYVsxMV07XG4gIG91dFsxMl0gPSBhWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdO1xuICBvdXRbMTRdID0gYVsxNF07XG4gIG91dFsxNV0gPSBhWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIG1hdDQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICBvdXRbOV0gPSBhWzldO1xuICBvdXRbMTBdID0gYVsxMF07XG4gIG91dFsxMV0gPSBhWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdO1xuICBvdXRbMTNdID0gYVsxM107XG4gIG91dFsxNF0gPSBhWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgbWF0NCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEzIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDMgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDEwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMyBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMxIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDEgcG9zaXRpb24gKGluZGV4IDEzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMiBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXG4gKiBAcmV0dXJucyB7bWF0NH0gQSBuZXcgbWF0NFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVmFsdWVzKG0wMCwgbTAxLCBtMDIsIG0wMywgbTEwLCBtMTEsIG0xMiwgbTEzLCBtMjAsIG0yMSwgbTIyLCBtMjMsIG0zMCwgbTMxLCBtMzIsIG0zMykge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMTYpO1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMDM7XG4gIG91dFs0XSA9IG0xMDtcbiAgb3V0WzVdID0gbTExO1xuICBvdXRbNl0gPSBtMTI7XG4gIG91dFs3XSA9IG0xMztcbiAgb3V0WzhdID0gbTIwO1xuICBvdXRbOV0gPSBtMjE7XG4gIG91dFsxMF0gPSBtMjI7XG4gIG91dFsxMV0gPSBtMjM7XG4gIG91dFsxMl0gPSBtMzA7XG4gIG91dFsxM10gPSBtMzE7XG4gIG91dFsxNF0gPSBtMzI7XG4gIG91dFsxNV0gPSBtMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIG1hdDQgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXG4gKiBAcGFyYW0ge051bWJlcn0gbTAxIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDEgcG9zaXRpb24gKGluZGV4IDEpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDQpXG4gKiBAcGFyYW0ge051bWJlcn0gbTExIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDEgcG9zaXRpb24gKGluZGV4IDUpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXG4gKiBAcGFyYW0ge051bWJlcn0gbTEzIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDMgcG9zaXRpb24gKGluZGV4IDcpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDgpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDEwKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMyBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAzIHBvc2l0aW9uIChpbmRleCAxMSlcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXG4gKiBAcGFyYW0ge051bWJlcn0gbTMxIENvbXBvbmVudCBpbiBjb2x1bW4gMywgcm93IDEgcG9zaXRpb24gKGluZGV4IDEzKVxuICogQHBhcmFtIHtOdW1iZXJ9IG0zMiBDb21wb25lbnQgaW4gY29sdW1uIDMsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAxNClcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIG0wMCwgbTAxLCBtMDIsIG0wMywgbTEwLCBtMTEsIG0xMiwgbTEzLCBtMjAsIG0yMSwgbTIyLCBtMjMsIG0zMCwgbTMxLCBtMzIsIG0zMykge1xuICBvdXRbMF0gPSBtMDA7XG4gIG91dFsxXSA9IG0wMTtcbiAgb3V0WzJdID0gbTAyO1xuICBvdXRbM10gPSBtMDM7XG4gIG91dFs0XSA9IG0xMDtcbiAgb3V0WzVdID0gbTExO1xuICBvdXRbNl0gPSBtMTI7XG4gIG91dFs3XSA9IG0xMztcbiAgb3V0WzhdID0gbTIwO1xuICBvdXRbOV0gPSBtMjE7XG4gIG91dFsxMF0gPSBtMjI7XG4gIG91dFsxMV0gPSBtMjM7XG4gIG91dFsxMl0gPSBtMzA7XG4gIG91dFsxM10gPSBtMzE7XG4gIG91dFsxNF0gPSBtMzI7XG4gIG91dFsxNV0gPSBtMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFNldCBhIG1hdDQgdG8gdGhlIGlkZW50aXR5IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAxO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc3Bvc2UgdGhlIHZhbHVlcyBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNwb3NlKG91dCwgYSkge1xuICAvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gIGlmIChvdXQgPT09IGEpIHtcbiAgICB2YXIgYTAxID0gYVsxXSxcbiAgICAgICAgYTAyID0gYVsyXSxcbiAgICAgICAgYTAzID0gYVszXTtcbiAgICB2YXIgYTEyID0gYVs2XSxcbiAgICAgICAgYTEzID0gYVs3XTtcbiAgICB2YXIgYTIzID0gYVsxMV07XG4gICAgb3V0WzFdID0gYVs0XTtcbiAgICBvdXRbMl0gPSBhWzhdO1xuICAgIG91dFszXSA9IGFbMTJdO1xuICAgIG91dFs0XSA9IGEwMTtcbiAgICBvdXRbNl0gPSBhWzldO1xuICAgIG91dFs3XSA9IGFbMTNdO1xuICAgIG91dFs4XSA9IGEwMjtcbiAgICBvdXRbOV0gPSBhMTI7XG4gICAgb3V0WzExXSA9IGFbMTRdO1xuICAgIG91dFsxMl0gPSBhMDM7XG4gICAgb3V0WzEzXSA9IGExMztcbiAgICBvdXRbMTRdID0gYTIzO1xuICB9IGVsc2Uge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVs0XTtcbiAgICBvdXRbMl0gPSBhWzhdO1xuICAgIG91dFszXSA9IGFbMTJdO1xuICAgIG91dFs0XSA9IGFbMV07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICBvdXRbNl0gPSBhWzldO1xuICAgIG91dFs3XSA9IGFbMTNdO1xuICAgIG91dFs4XSA9IGFbMl07XG4gICAgb3V0WzldID0gYVs2XTtcbiAgICBvdXRbMTBdID0gYVsxMF07XG4gICAgb3V0WzExXSA9IGFbMTRdO1xuICAgIG91dFsxMl0gPSBhWzNdO1xuICAgIG91dFsxM10gPSBhWzddO1xuICAgIG91dFsxNF0gPSBhWzExXTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBJbnZlcnRzIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICB2YXIgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwO1xuICB2YXIgYjAxID0gYTAwICogYTEyIC0gYTAyICogYTEwO1xuICB2YXIgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwO1xuICB2YXIgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExO1xuICB2YXIgYjA0ID0gYTAxICogYTEzIC0gYTAzICogYTExO1xuICB2YXIgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyO1xuICB2YXIgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwO1xuICB2YXIgYjA3ID0gYTIwICogYTMyIC0gYTIyICogYTMwO1xuICB2YXIgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwO1xuICB2YXIgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxO1xuICB2YXIgYjEwID0gYTIxICogYTMzIC0gYTIzICogYTMxO1xuICB2YXIgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcbiAgb3V0WzFdID0gKGEwMiAqIGIxMCAtIGEwMSAqIGIxMSAtIGEwMyAqIGIwOSkgKiBkZXQ7XG4gIG91dFsyXSA9IChhMzEgKiBiMDUgLSBhMzIgKiBiMDQgKyBhMzMgKiBiMDMpICogZGV0O1xuICBvdXRbM10gPSAoYTIyICogYjA0IC0gYTIxICogYjA1IC0gYTIzICogYjAzKSAqIGRldDtcbiAgb3V0WzRdID0gKGExMiAqIGIwOCAtIGExMCAqIGIxMSAtIGExMyAqIGIwNykgKiBkZXQ7XG4gIG91dFs1XSA9IChhMDAgKiBiMTEgLSBhMDIgKiBiMDggKyBhMDMgKiBiMDcpICogZGV0O1xuICBvdXRbNl0gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcbiAgb3V0WzddID0gKGEyMCAqIGIwNSAtIGEyMiAqIGIwMiArIGEyMyAqIGIwMSkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMTAgKiBiMTAgLSBhMTEgKiBiMDggKyBhMTMgKiBiMDYpICogZGV0O1xuICBvdXRbOV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcbiAgb3V0WzEwXSA9IChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0O1xuICBvdXRbMTFdID0gKGEyMSAqIGIwMiAtIGEyMCAqIGIwNCAtIGEyMyAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxMl0gPSAoYTExICogYjA3IC0gYTEwICogYjA5IC0gYTEyICogYjA2KSAqIGRldDtcbiAgb3V0WzEzXSA9IChhMDAgKiBiMDkgLSBhMDEgKiBiMDcgKyBhMDIgKiBiMDYpICogZGV0O1xuICBvdXRbMTRdID0gKGEzMSAqIGIwMSAtIGEzMCAqIGIwMyAtIGEzMiAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxNV0gPSAoYTIwICogYjAzIC0gYTIxICogYjAxICsgYTIyICogYjAwKSAqIGRldDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgYWRqdWdhdGUgb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkam9pbnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICBvdXRbMF0gPSBhMTEgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMSAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpICsgYTMxICogKGExMiAqIGEyMyAtIGExMyAqIGEyMik7XG4gIG91dFsxXSA9IC0oYTAxICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjEgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMSAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpKTtcbiAgb3V0WzJdID0gYTAxICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgLSBhMTEgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMSAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpO1xuICBvdXRbM10gPSAtKGEwMSAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpIC0gYTExICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikgKyBhMjEgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gIG91dFs0XSA9IC0oYTEwICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjAgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSArIGEzMCAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpKTtcbiAgb3V0WzVdID0gYTAwICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjAgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMCAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpO1xuICBvdXRbNl0gPSAtKGEwMCAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpIC0gYTEwICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzAgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gIG91dFs3XSA9IGEwMCAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpIC0gYTEwICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikgKyBhMjAgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKTtcbiAgb3V0WzhdID0gYTEwICogKGEyMSAqIGEzMyAtIGEyMyAqIGEzMSkgLSBhMjAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSArIGEzMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpO1xuICBvdXRbOV0gPSAtKGEwMCAqIChhMjEgKiBhMzMgLSBhMjMgKiBhMzEpIC0gYTIwICogKGEwMSAqIGEzMyAtIGEwMyAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTIzIC0gYTAzICogYTIxKSk7XG4gIG91dFsxMF0gPSBhMDAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSAtIGExMCAqIChhMDEgKiBhMzMgLSBhMDMgKiBhMzEpICsgYTMwICogKGEwMSAqIGExMyAtIGEwMyAqIGExMSk7XG4gIG91dFsxMV0gPSAtKGEwMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpIC0gYTEwICogKGEwMSAqIGEyMyAtIGEwMyAqIGEyMSkgKyBhMjAgKiAoYTAxICogYTEzIC0gYTAzICogYTExKSk7XG4gIG91dFsxMl0gPSAtKGExMCAqIChhMjEgKiBhMzIgLSBhMjIgKiBhMzEpIC0gYTIwICogKGExMSAqIGEzMiAtIGExMiAqIGEzMSkgKyBhMzAgKiAoYTExICogYTIyIC0gYTEyICogYTIxKSk7XG4gIG91dFsxM10gPSBhMDAgKiAoYTIxICogYTMyIC0gYTIyICogYTMxKSAtIGEyMCAqIChhMDEgKiBhMzIgLSBhMDIgKiBhMzEpICsgYTMwICogKGEwMSAqIGEyMiAtIGEwMiAqIGEyMSk7XG4gIG91dFsxNF0gPSAtKGEwMCAqIChhMTEgKiBhMzIgLSBhMTIgKiBhMzEpIC0gYTEwICogKGEwMSAqIGEzMiAtIGEwMiAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTEyIC0gYTAyICogYTExKSk7XG4gIG91dFsxNV0gPSBhMDAgKiAoYTExICogYTIyIC0gYTEyICogYTIxKSAtIGExMCAqIChhMDEgKiBhMjIgLSBhMDIgKiBhMjEpICsgYTIwICogKGEwMSAqIGExMiAtIGEwMiAqIGExMSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRldGVybWluYW50IG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkZXRlcm1pbmFudCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICByZXR1cm4gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBtYXQ0c1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYTAwID0gYVswXSxcbiAgICAgIGEwMSA9IGFbMV0sXG4gICAgICBhMDIgPSBhWzJdLFxuICAgICAgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF0sXG4gICAgICBhMTEgPSBhWzVdLFxuICAgICAgYTEyID0gYVs2XSxcbiAgICAgIGExMyA9IGFbN107XG4gIHZhciBhMjAgPSBhWzhdLFxuICAgICAgYTIxID0gYVs5XSxcbiAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgYTIzID0gYVsxMV07XG4gIHZhciBhMzAgPSBhWzEyXSxcbiAgICAgIGEzMSA9IGFbMTNdLFxuICAgICAgYTMyID0gYVsxNF0sXG4gICAgICBhMzMgPSBhWzE1XTsgLy8gQ2FjaGUgb25seSB0aGUgY3VycmVudCBsaW5lIG9mIHRoZSBzZWNvbmQgbWF0cml4XG5cbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgb3V0WzBdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFsxXSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbMl0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzNdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYls0XTtcbiAgYjEgPSBiWzVdO1xuICBiMiA9IGJbNl07XG4gIGIzID0gYls3XTtcbiAgb3V0WzRdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFs1XSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbNl0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzddID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYls4XTtcbiAgYjEgPSBiWzldO1xuICBiMiA9IGJbMTBdO1xuICBiMyA9IGJbMTFdO1xuICBvdXRbOF0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzldID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gIG91dFsxMF0gPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjtcbiAgb3V0WzExXSA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzO1xuICBiMCA9IGJbMTJdO1xuICBiMSA9IGJbMTNdO1xuICBiMiA9IGJbMTRdO1xuICBiMyA9IGJbMTVdO1xuICBvdXRbMTJdID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7XG4gIG91dFsxM10gPSBiMCAqIGEwMSArIGIxICogYTExICsgYjIgKiBhMjEgKyBiMyAqIGEzMTtcbiAgb3V0WzE0XSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbMTVdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zbGF0ZSBhIG1hdDQgYnkgdGhlIGdpdmVuIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdLFxuICAgICAgeiA9IHZbMl07XG4gIHZhciBhMDAsIGEwMSwgYTAyLCBhMDM7XG4gIHZhciBhMTAsIGExMSwgYTEyLCBhMTM7XG4gIHZhciBhMjAsIGEyMSwgYTIyLCBhMjM7XG5cbiAgaWYgKGEgPT09IG91dCkge1xuICAgIG91dFsxMl0gPSBhWzBdICogeCArIGFbNF0gKiB5ICsgYVs4XSAqIHogKyBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxXSAqIHggKyBhWzVdICogeSArIGFbOV0gKiB6ICsgYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMl0gKiB4ICsgYVs2XSAqIHkgKyBhWzEwXSAqIHogKyBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVszXSAqIHggKyBhWzddICogeSArIGFbMTFdICogeiArIGFbMTVdO1xuICB9IGVsc2Uge1xuICAgIGEwMCA9IGFbMF07XG4gICAgYTAxID0gYVsxXTtcbiAgICBhMDIgPSBhWzJdO1xuICAgIGEwMyA9IGFbM107XG4gICAgYTEwID0gYVs0XTtcbiAgICBhMTEgPSBhWzVdO1xuICAgIGExMiA9IGFbNl07XG4gICAgYTEzID0gYVs3XTtcbiAgICBhMjAgPSBhWzhdO1xuICAgIGEyMSA9IGFbOV07XG4gICAgYTIyID0gYVsxMF07XG4gICAgYTIzID0gYVsxMV07XG4gICAgb3V0WzBdID0gYTAwO1xuICAgIG91dFsxXSA9IGEwMTtcbiAgICBvdXRbMl0gPSBhMDI7XG4gICAgb3V0WzNdID0gYTAzO1xuICAgIG91dFs0XSA9IGExMDtcbiAgICBvdXRbNV0gPSBhMTE7XG4gICAgb3V0WzZdID0gYTEyO1xuICAgIG91dFs3XSA9IGExMztcbiAgICBvdXRbOF0gPSBhMjA7XG4gICAgb3V0WzldID0gYTIxO1xuICAgIG91dFsxMF0gPSBhMjI7XG4gICAgb3V0WzExXSA9IGEyMztcbiAgICBvdXRbMTJdID0gYTAwICogeCArIGExMCAqIHkgKyBhMjAgKiB6ICsgYVsxMl07XG4gICAgb3V0WzEzXSA9IGEwMSAqIHggKyBhMTEgKiB5ICsgYTIxICogeiArIGFbMTNdO1xuICAgIG91dFsxNF0gPSBhMDIgKiB4ICsgYTEyICogeSArIGEyMiAqIHogKyBhWzE0XTtcbiAgICBvdXRbMTVdID0gYTAzICogeCArIGExMyAqIHkgKyBhMjMgKiB6ICsgYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgdGhlIG1hdDQgYnkgdGhlIGRpbWVuc2lvbnMgaW4gdGhlIGdpdmVuIHZlYzMgbm90IHVzaW5nIHZlY3Rvcml6YXRpb25cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdGhlIHZlYzMgdG8gc2NhbGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdLFxuICAgICAgeiA9IHZbMl07XG4gIG91dFswXSA9IGFbMF0gKiB4O1xuICBvdXRbMV0gPSBhWzFdICogeDtcbiAgb3V0WzJdID0gYVsyXSAqIHg7XG4gIG91dFszXSA9IGFbM10gKiB4O1xuICBvdXRbNF0gPSBhWzRdICogeTtcbiAgb3V0WzVdID0gYVs1XSAqIHk7XG4gIG91dFs2XSA9IGFbNl0gKiB5O1xuICBvdXRbN10gPSBhWzddICogeTtcbiAgb3V0WzhdID0gYVs4XSAqIHo7XG4gIG91dFs5XSA9IGFbOV0gKiB6O1xuICBvdXRbMTBdID0gYVsxMF0gKiB6O1xuICBvdXRbMTFdID0gYVsxMV0gKiB6O1xuICBvdXRbMTJdID0gYVsxMl07XG4gIG91dFsxM10gPSBhWzEzXTtcbiAgb3V0WzE0XSA9IGFbMTRdO1xuICBvdXRbMTVdID0gYVsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXQ0IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIGdpdmVuIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShvdXQsIGEsIHJhZCwgYXhpcykge1xuICB2YXIgeCA9IGF4aXNbMF0sXG4gICAgICB5ID0gYXhpc1sxXSxcbiAgICAgIHogPSBheGlzWzJdO1xuICB2YXIgbGVuID0gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbiAgdmFyIHMsIGMsIHQ7XG4gIHZhciBhMDAsIGEwMSwgYTAyLCBhMDM7XG4gIHZhciBhMTAsIGExMSwgYTEyLCBhMTM7XG4gIHZhciBhMjAsIGEyMSwgYTIyLCBhMjM7XG4gIHZhciBiMDAsIGIwMSwgYjAyO1xuICB2YXIgYjEwLCBiMTEsIGIxMjtcbiAgdmFyIGIyMCwgYjIxLCBiMjI7XG5cbiAgaWYgKGxlbiA8IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxlbiA9IDEgLyBsZW47XG4gIHggKj0gbGVuO1xuICB5ICo9IGxlbjtcbiAgeiAqPSBsZW47XG4gIHMgPSBNYXRoLnNpbihyYWQpO1xuICBjID0gTWF0aC5jb3MocmFkKTtcbiAgdCA9IDEgLSBjO1xuICBhMDAgPSBhWzBdO1xuICBhMDEgPSBhWzFdO1xuICBhMDIgPSBhWzJdO1xuICBhMDMgPSBhWzNdO1xuICBhMTAgPSBhWzRdO1xuICBhMTEgPSBhWzVdO1xuICBhMTIgPSBhWzZdO1xuICBhMTMgPSBhWzddO1xuICBhMjAgPSBhWzhdO1xuICBhMjEgPSBhWzldO1xuICBhMjIgPSBhWzEwXTtcbiAgYTIzID0gYVsxMV07IC8vIENvbnN0cnVjdCB0aGUgZWxlbWVudHMgb2YgdGhlIHJvdGF0aW9uIG1hdHJpeFxuXG4gIGIwMCA9IHggKiB4ICogdCArIGM7XG4gIGIwMSA9IHkgKiB4ICogdCArIHogKiBzO1xuICBiMDIgPSB6ICogeCAqIHQgLSB5ICogcztcbiAgYjEwID0geCAqIHkgKiB0IC0geiAqIHM7XG4gIGIxMSA9IHkgKiB5ICogdCArIGM7XG4gIGIxMiA9IHogKiB5ICogdCArIHggKiBzO1xuICBiMjAgPSB4ICogeiAqIHQgKyB5ICogcztcbiAgYjIxID0geSAqIHogKiB0IC0geCAqIHM7XG4gIGIyMiA9IHogKiB6ICogdCArIGM7IC8vIFBlcmZvcm0gcm90YXRpb24tc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gYTAwICogYjAwICsgYTEwICogYjAxICsgYTIwICogYjAyO1xuICBvdXRbMV0gPSBhMDEgKiBiMDAgKyBhMTEgKiBiMDEgKyBhMjEgKiBiMDI7XG4gIG91dFsyXSA9IGEwMiAqIGIwMCArIGExMiAqIGIwMSArIGEyMiAqIGIwMjtcbiAgb3V0WzNdID0gYTAzICogYjAwICsgYTEzICogYjAxICsgYTIzICogYjAyO1xuICBvdXRbNF0gPSBhMDAgKiBiMTAgKyBhMTAgKiBiMTEgKyBhMjAgKiBiMTI7XG4gIG91dFs1XSA9IGEwMSAqIGIxMCArIGExMSAqIGIxMSArIGEyMSAqIGIxMjtcbiAgb3V0WzZdID0gYTAyICogYjEwICsgYTEyICogYjExICsgYTIyICogYjEyO1xuICBvdXRbN10gPSBhMDMgKiBiMTAgKyBhMTMgKiBiMTEgKyBhMjMgKiBiMTI7XG4gIG91dFs4XSA9IGEwMCAqIGIyMCArIGExMCAqIGIyMSArIGEyMCAqIGIyMjtcbiAgb3V0WzldID0gYTAxICogYjIwICsgYTExICogYjIxICsgYTIxICogYjIyO1xuICBvdXRbMTBdID0gYTAyICogYjIwICsgYTEyICogYjIxICsgYTIyICogYjIyO1xuICBvdXRbMTFdID0gYTAzICogYjIwICsgYTEzICogYjIxICsgYTIzICogYjIyO1xuXG4gIGlmIChhICE9PSBvdXQpIHtcbiAgICAvLyBJZiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbiBkaWZmZXIsIGNvcHkgdGhlIHVuY2hhbmdlZCBsYXN0IHJvd1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYTEwID0gYVs0XTtcbiAgdmFyIGExMSA9IGFbNV07XG4gIHZhciBhMTIgPSBhWzZdO1xuICB2YXIgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF07XG4gIHZhciBhMjEgPSBhWzldO1xuICB2YXIgYTIyID0gYVsxMF07XG4gIHZhciBhMjMgPSBhWzExXTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgcm93c1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuXG4gIG91dFs0XSA9IGExMCAqIGMgKyBhMjAgKiBzO1xuICBvdXRbNV0gPSBhMTEgKiBjICsgYTIxICogcztcbiAgb3V0WzZdID0gYTEyICogYyArIGEyMiAqIHM7XG4gIG91dFs3XSA9IGExMyAqIGMgKyBhMjMgKiBzO1xuICBvdXRbOF0gPSBhMjAgKiBjIC0gYTEwICogcztcbiAgb3V0WzldID0gYTIxICogYyAtIGExMSAqIHM7XG4gIG91dFsxMF0gPSBhMjIgKiBjIC0gYTEyICogcztcbiAgb3V0WzExXSA9IGEyMyAqIGMgLSBhMTMgKiBzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0cml4IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFkgYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTtcbiAgdmFyIGEwMCA9IGFbMF07XG4gIHZhciBhMDEgPSBhWzFdO1xuICB2YXIgYTAyID0gYVsyXTtcbiAgdmFyIGEwMyA9IGFbM107XG4gIHZhciBhMjAgPSBhWzhdO1xuICB2YXIgYTIxID0gYVs5XTtcbiAgdmFyIGEyMiA9IGFbMTBdO1xuICB2YXIgYTIzID0gYVsxMV07XG5cbiAgaWYgKGEgIT09IG91dCkge1xuICAgIC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIHJvd3NcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbNV07XG4gICAgb3V0WzZdID0gYVs2XTtcbiAgICBvdXRbN10gPSBhWzddO1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfSAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cblxuICBvdXRbMF0gPSBhMDAgKiBjIC0gYTIwICogcztcbiAgb3V0WzFdID0gYTAxICogYyAtIGEyMSAqIHM7XG4gIG91dFsyXSA9IGEwMiAqIGMgLSBhMjIgKiBzO1xuICBvdXRbM10gPSBhMDMgKiBjIC0gYTIzICogcztcbiAgb3V0WzhdID0gYTAwICogcyArIGEyMCAqIGM7XG4gIG91dFs5XSA9IGEwMSAqIHMgKyBhMjEgKiBjO1xuICBvdXRbMTBdID0gYTAyICogcyArIGEyMiAqIGM7XG4gIG91dFsxMV0gPSBhMDMgKiBzICsgYTIzICogYztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIG1hdHJpeCBieSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBaIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7XG4gIHZhciBhMDAgPSBhWzBdO1xuICB2YXIgYTAxID0gYVsxXTtcbiAgdmFyIGEwMiA9IGFbMl07XG4gIHZhciBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XTtcbiAgdmFyIGExMSA9IGFbNV07XG4gIHZhciBhMTIgPSBhWzZdO1xuICB2YXIgYTEzID0gYVs3XTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgbGFzdCByb3dcbiAgICBvdXRbOF0gPSBhWzhdO1xuICAgIG91dFs5XSA9IGFbOV07XG4gICAgb3V0WzEwXSA9IGFbMTBdO1xuICAgIG91dFsxMV0gPSBhWzExXTtcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH0gLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG5cbiAgb3V0WzBdID0gYTAwICogYyArIGExMCAqIHM7XG4gIG91dFsxXSA9IGEwMSAqIGMgKyBhMTEgKiBzO1xuICBvdXRbMl0gPSBhMDIgKiBjICsgYTEyICogcztcbiAgb3V0WzNdID0gYTAzICogYyArIGExMyAqIHM7XG4gIG91dFs0XSA9IGExMCAqIGMgLSBhMDAgKiBzO1xuICBvdXRbNV0gPSBhMTEgKiBjIC0gYTAxICogcztcbiAgb3V0WzZdID0gYTEyICogYyAtIGEwMiAqIHM7XG4gIG91dFs3XSA9IGExMyAqIGMgLSBhMDMgKiBzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIGRlc3QsIHZlYyk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21UcmFuc2xhdGlvbihvdXQsIHYpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXTtcbiAgb3V0WzEzXSA9IHZbMV07XG4gIG91dFsxNF0gPSB2WzJdO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgdmVjdG9yIHNjYWxpbmdcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgZGVzdCwgdmVjKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBTY2FsaW5nIHZlY3RvclxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tU2NhbGluZyhvdXQsIHYpIHtcbiAgb3V0WzBdID0gdlswXTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gdlsxXTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IHZbMl07XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgZ2l2ZW4gYW5nbGUgYXJvdW5kIGEgZ2l2ZW4gYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGUoZGVzdCwgZGVzdCwgcmFkLCBheGlzKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGF4aXMgdGhlIGF4aXMgdG8gcm90YXRlIGFyb3VuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb24ob3V0LCByYWQsIGF4aXMpIHtcbiAgdmFyIHggPSBheGlzWzBdLFxuICAgICAgeSA9IGF4aXNbMV0sXG4gICAgICB6ID0gYXhpc1syXTtcbiAgdmFyIGxlbiA9IE1hdGguaHlwb3QoeCwgeSwgeik7XG4gIHZhciBzLCBjLCB0O1xuXG4gIGlmIChsZW4gPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZW4gPSAxIC8gbGVuO1xuICB4ICo9IGxlbjtcbiAgeSAqPSBsZW47XG4gIHogKj0gbGVuO1xuICBzID0gTWF0aC5zaW4ocmFkKTtcbiAgYyA9IE1hdGguY29zKHJhZCk7XG4gIHQgPSAxIC0gYzsgLy8gUGVyZm9ybSByb3RhdGlvbi1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSB4ICogeCAqIHQgKyBjO1xuICBvdXRbMV0gPSB5ICogeCAqIHQgKyB6ICogcztcbiAgb3V0WzJdID0geiAqIHggKiB0IC0geSAqIHM7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHggKiB5ICogdCAtIHogKiBzO1xuICBvdXRbNV0gPSB5ICogeSAqIHQgKyBjO1xuICBvdXRbNl0gPSB6ICogeSAqIHQgKyB4ICogcztcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0geCAqIHogKiB0ICsgeSAqIHM7XG4gIG91dFs5XSA9IHkgKiB6ICogdCAtIHggKiBzO1xuICBvdXRbMTBdID0geiAqIHogKiB0ICsgYztcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnJvdGF0ZVgoZGVzdCwgZGVzdCwgcmFkKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tWFJvdGF0aW9uKG91dCwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpOyAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gYztcbiAgb3V0WzZdID0gcztcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gLXM7XG4gIG91dFsxMF0gPSBjO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBZIGF4aXNcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQucm90YXRlWShkZXN0LCBkZXN0LCByYWQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21ZUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSBjO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAtcztcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gcztcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IGM7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFogYXhpc1xuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC5yb3RhdGVaKGRlc3QsIGRlc3QsIHJhZCk7XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVpSb3RhdGlvbihvdXQsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTsgLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IGM7XG4gIG91dFsxXSA9IHM7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IC1zO1xuICBvdXRbNV0gPSBjO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uIGFuZCB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7cXVhdDR9IHEgUm90YXRpb24gcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG91dCwgcSwgdikge1xuICAvLyBRdWF0ZXJuaW9uIG1hdGhcbiAgdmFyIHggPSBxWzBdLFxuICAgICAgeSA9IHFbMV0sXG4gICAgICB6ID0gcVsyXSxcbiAgICAgIHcgPSBxWzNdO1xuICB2YXIgeDIgPSB4ICsgeDtcbiAgdmFyIHkyID0geSArIHk7XG4gIHZhciB6MiA9IHogKyB6O1xuICB2YXIgeHggPSB4ICogeDI7XG4gIHZhciB4eSA9IHggKiB5MjtcbiAgdmFyIHh6ID0geCAqIHoyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB5eiA9IHkgKiB6MjtcbiAgdmFyIHp6ID0geiAqIHoyO1xuICB2YXIgd3ggPSB3ICogeDI7XG4gIHZhciB3eSA9IHcgKiB5MjtcbiAgdmFyIHd6ID0gdyAqIHoyO1xuICBvdXRbMF0gPSAxIC0gKHl5ICsgenopO1xuICBvdXRbMV0gPSB4eSArIHd6O1xuICBvdXRbMl0gPSB4eiAtIHd5O1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB4eSAtIHd6O1xuICBvdXRbNV0gPSAxIC0gKHh4ICsgenopO1xuICBvdXRbNl0gPSB5eiArIHd4O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB4eiArIHd5O1xuICBvdXRbOV0gPSB5eiAtIHd4O1xuICBvdXRbMTBdID0gMSAtICh4eCArIHl5KTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSB2WzBdO1xuICBvdXRbMTNdID0gdlsxXTtcbiAgb3V0WzE0XSA9IHZbMl07XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgZnJvbSBhIGR1YWwgcXVhdC5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBNYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHttYXQ0fSBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21RdWF0MihvdXQsIGEpIHtcbiAgdmFyIHRyYW5zbGF0aW9uID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIHZhciBieCA9IC1hWzBdLFxuICAgICAgYnkgPSAtYVsxXSxcbiAgICAgIGJ6ID0gLWFbMl0sXG4gICAgICBidyA9IGFbM10sXG4gICAgICBheCA9IGFbNF0sXG4gICAgICBheSA9IGFbNV0sXG4gICAgICBheiA9IGFbNl0sXG4gICAgICBhdyA9IGFbN107XG4gIHZhciBtYWduaXR1ZGUgPSBieCAqIGJ4ICsgYnkgKiBieSArIGJ6ICogYnogKyBidyAqIGJ3OyAvL09ubHkgc2NhbGUgaWYgaXQgbWFrZXMgc2Vuc2VcblxuICBpZiAobWFnbml0dWRlID4gMCkge1xuICAgIHRyYW5zbGF0aW9uWzBdID0gKGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnkpICogMiAvIG1hZ25pdHVkZTtcbiAgICB0cmFuc2xhdGlvblsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDIgLyBtYWduaXR1ZGU7XG4gICAgdHJhbnNsYXRpb25bMl0gPSAoYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCkgKiAyIC8gbWFnbml0dWRlO1xuICB9IGVsc2Uge1xuICAgIHRyYW5zbGF0aW9uWzBdID0gKGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnkpICogMjtcbiAgICB0cmFuc2xhdGlvblsxXSA9IChheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6KSAqIDI7XG4gICAgdHJhbnNsYXRpb25bMl0gPSAoYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCkgKiAyO1xuICB9XG5cbiAgZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24ob3V0LCBhLCB0cmFuc2xhdGlvbik7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHRyYW5zbGF0aW9uIHZlY3RvciBjb21wb25lbnQgb2YgYSB0cmFuc2Zvcm1hdGlvblxuICogIG1hdHJpeC4gSWYgYSBtYXRyaXggaXMgYnVpbHQgd2l0aCBmcm9tUm90YXRpb25UcmFuc2xhdGlvbixcbiAqICB0aGUgcmV0dXJuZWQgdmVjdG9yIHdpbGwgYmUgdGhlIHNhbWUgYXMgdGhlIHRyYW5zbGF0aW9uIHZlY3RvclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXQgVmVjdG9yIHRvIHJlY2VpdmUgdHJhbnNsYXRpb24gY29tcG9uZW50XG4gKiBAcGFyYW0gIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24ob3V0LCBtYXQpIHtcbiAgb3V0WzBdID0gbWF0WzEyXTtcbiAgb3V0WzFdID0gbWF0WzEzXTtcbiAgb3V0WzJdID0gbWF0WzE0XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgc2NhbGluZyBmYWN0b3IgY29tcG9uZW50IG9mIGEgdHJhbnNmb3JtYXRpb25cbiAqICBtYXRyaXguIElmIGEgbWF0cml4IGlzIGJ1aWx0IHdpdGggZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25TY2FsZVxuICogIHdpdGggYSBub3JtYWxpemVkIFF1YXRlcm5pb24gcGFyYW10ZXIsIHRoZSByZXR1cm5lZCB2ZWN0b3Igd2lsbCBiZVxuICogIHRoZSBzYW1lIGFzIHRoZSBzY2FsaW5nIHZlY3RvclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXQgVmVjdG9yIHRvIHJlY2VpdmUgc2NhbGluZyBmYWN0b3IgY29tcG9uZW50XG4gKiBAcGFyYW0gIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2NhbGluZyhvdXQsIG1hdCkge1xuICB2YXIgbTExID0gbWF0WzBdO1xuICB2YXIgbTEyID0gbWF0WzFdO1xuICB2YXIgbTEzID0gbWF0WzJdO1xuICB2YXIgbTIxID0gbWF0WzRdO1xuICB2YXIgbTIyID0gbWF0WzVdO1xuICB2YXIgbTIzID0gbWF0WzZdO1xuICB2YXIgbTMxID0gbWF0WzhdO1xuICB2YXIgbTMyID0gbWF0WzldO1xuICB2YXIgbTMzID0gbWF0WzEwXTtcbiAgb3V0WzBdID0gTWF0aC5oeXBvdChtMTEsIG0xMiwgbTEzKTtcbiAgb3V0WzFdID0gTWF0aC5oeXBvdChtMjEsIG0yMiwgbTIzKTtcbiAgb3V0WzJdID0gTWF0aC5oeXBvdChtMzEsIG0zMiwgbTMzKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHF1YXRlcm5pb24gcmVwcmVzZW50aW5nIHRoZSByb3RhdGlvbmFsIGNvbXBvbmVudFxuICogIG9mIGEgdHJhbnNmb3JtYXRpb24gbWF0cml4LiBJZiBhIG1hdHJpeCBpcyBidWlsdCB3aXRoXG4gKiAgZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24sIHRoZSByZXR1cm5lZCBxdWF0ZXJuaW9uIHdpbGwgYmUgdGhlXG4gKiAgc2FtZSBhcyB0aGUgcXVhdGVybmlvbiBvcmlnaW5hbGx5IHN1cHBsaWVkLlxuICogQHBhcmFtIHtxdWF0fSBvdXQgUXVhdGVybmlvbiB0byByZWNlaXZlIHRoZSByb3RhdGlvbiBjb21wb25lbnRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBtYXQgTWF0cml4IHRvIGJlIGRlY29tcG9zZWQgKGlucHV0KVxuICogQHJldHVybiB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJvdGF0aW9uKG91dCwgbWF0KSB7XG4gIHZhciBzY2FsaW5nID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIGdldFNjYWxpbmcoc2NhbGluZywgbWF0KTtcbiAgdmFyIGlzMSA9IDEgLyBzY2FsaW5nWzBdO1xuICB2YXIgaXMyID0gMSAvIHNjYWxpbmdbMV07XG4gIHZhciBpczMgPSAxIC8gc2NhbGluZ1syXTtcbiAgdmFyIHNtMTEgPSBtYXRbMF0gKiBpczE7XG4gIHZhciBzbTEyID0gbWF0WzFdICogaXMyO1xuICB2YXIgc20xMyA9IG1hdFsyXSAqIGlzMztcbiAgdmFyIHNtMjEgPSBtYXRbNF0gKiBpczE7XG4gIHZhciBzbTIyID0gbWF0WzVdICogaXMyO1xuICB2YXIgc20yMyA9IG1hdFs2XSAqIGlzMztcbiAgdmFyIHNtMzEgPSBtYXRbOF0gKiBpczE7XG4gIHZhciBzbTMyID0gbWF0WzldICogaXMyO1xuICB2YXIgc20zMyA9IG1hdFsxMF0gKiBpczM7XG4gIHZhciB0cmFjZSA9IHNtMTEgKyBzbTIyICsgc20zMztcbiAgdmFyIFMgPSAwO1xuXG4gIGlmICh0cmFjZSA+IDApIHtcbiAgICBTID0gTWF0aC5zcXJ0KHRyYWNlICsgMS4wKSAqIDI7XG4gICAgb3V0WzNdID0gMC4yNSAqIFM7XG4gICAgb3V0WzBdID0gKHNtMjMgLSBzbTMyKSAvIFM7XG4gICAgb3V0WzFdID0gKHNtMzEgLSBzbTEzKSAvIFM7XG4gICAgb3V0WzJdID0gKHNtMTIgLSBzbTIxKSAvIFM7XG4gIH0gZWxzZSBpZiAoc20xMSA+IHNtMjIgJiYgc20xMSA+IHNtMzMpIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMTEgLSBzbTIyIC0gc20zMykgKiAyO1xuICAgIG91dFszXSA9IChzbTIzIC0gc20zMikgLyBTO1xuICAgIG91dFswXSA9IDAuMjUgKiBTO1xuICAgIG91dFsxXSA9IChzbTEyICsgc20yMSkgLyBTO1xuICAgIG91dFsyXSA9IChzbTMxICsgc20xMykgLyBTO1xuICB9IGVsc2UgaWYgKHNtMjIgPiBzbTMzKSB7XG4gICAgUyA9IE1hdGguc3FydCgxLjAgKyBzbTIyIC0gc20xMSAtIHNtMzMpICogMjtcbiAgICBvdXRbM10gPSAoc20zMSAtIHNtMTMpIC8gUztcbiAgICBvdXRbMF0gPSAoc20xMiArIHNtMjEpIC8gUztcbiAgICBvdXRbMV0gPSAwLjI1ICogUztcbiAgICBvdXRbMl0gPSAoc20yMyArIHNtMzIpIC8gUztcbiAgfSBlbHNlIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMzMgLSBzbTExIC0gc20yMikgKiAyO1xuICAgIG91dFszXSA9IChzbTEyIC0gc20yMSkgLyBTO1xuICAgIG91dFswXSA9IChzbTMxICsgc20xMykgLyBTO1xuICAgIG91dFsxXSA9IChzbTIzICsgc20zMikgLyBTO1xuICAgIG91dFsyXSA9IDAuMjUgKiBTO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvbiByb3RhdGlvbiwgdmVjdG9yIHRyYW5zbGF0aW9uIGFuZCB2ZWN0b3Igc2NhbGVcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgc2NhbGUpXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtxdWF0NH0gcSBSb3RhdGlvbiBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBzIFNjYWxpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGUob3V0LCBxLCB2LCBzKSB7XG4gIC8vIFF1YXRlcm5pb24gbWF0aFxuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHh5ID0geCAqIHkyO1xuICB2YXIgeHogPSB4ICogejI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHl6ID0geSAqIHoyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIHZhciBzeCA9IHNbMF07XG4gIHZhciBzeSA9IHNbMV07XG4gIHZhciBzeiA9IHNbMl07XG4gIG91dFswXSA9ICgxIC0gKHl5ICsgenopKSAqIHN4O1xuICBvdXRbMV0gPSAoeHkgKyB3eikgKiBzeDtcbiAgb3V0WzJdID0gKHh6IC0gd3kpICogc3g7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9ICh4eSAtIHd6KSAqIHN5O1xuICBvdXRbNV0gPSAoMSAtICh4eCArIHp6KSkgKiBzeTtcbiAgb3V0WzZdID0gKHl6ICsgd3gpICogc3k7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9ICh4eiArIHd5KSAqIHN6O1xuICBvdXRbOV0gPSAoeXogLSB3eCkgKiBzejtcbiAgb3V0WzEwXSA9ICgxIC0gKHh4ICsgeXkpKSAqIHN6O1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IHZbMF07XG4gIG91dFsxM10gPSB2WzFdO1xuICBvdXRbMTRdID0gdlsyXTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHF1YXRlcm5pb24gcm90YXRpb24sIHZlY3RvciB0cmFuc2xhdGlvbiBhbmQgdmVjdG9yIHNjYWxlLCByb3RhdGluZyBhbmQgc2NhbGluZyBhcm91bmQgdGhlIGdpdmVuIG9yaWdpblxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XG4gKlxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgdmVjKTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCBvcmlnaW4pO1xuICogICAgIGxldCBxdWF0TWF0ID0gbWF0NC5jcmVhdGUoKTtcbiAqICAgICBxdWF0NC50b01hdDQocXVhdCwgcXVhdE1hdCk7XG4gKiAgICAgbWF0NC5tdWx0aXBseShkZXN0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0LnNjYWxlKGRlc3QsIHNjYWxlKVxuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIG5lZ2F0aXZlT3JpZ2luKTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge3F1YXQ0fSBxIFJvdGF0aW9uIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHMgU2NhbGluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBvIFRoZSBvcmlnaW4gdmVjdG9yIGFyb3VuZCB3aGljaCB0byBzY2FsZSBhbmQgcm90YXRlXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGVPcmlnaW4ob3V0LCBxLCB2LCBzLCBvKSB7XG4gIC8vIFF1YXRlcm5pb24gbWF0aFxuICB2YXIgeCA9IHFbMF0sXG4gICAgICB5ID0gcVsxXSxcbiAgICAgIHogPSBxWzJdLFxuICAgICAgdyA9IHFbM107XG4gIHZhciB4MiA9IHggKyB4O1xuICB2YXIgeTIgPSB5ICsgeTtcbiAgdmFyIHoyID0geiArIHo7XG4gIHZhciB4eCA9IHggKiB4MjtcbiAgdmFyIHh5ID0geCAqIHkyO1xuICB2YXIgeHogPSB4ICogejI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHl6ID0geSAqIHoyO1xuICB2YXIgenogPSB6ICogejI7XG4gIHZhciB3eCA9IHcgKiB4MjtcbiAgdmFyIHd5ID0gdyAqIHkyO1xuICB2YXIgd3ogPSB3ICogejI7XG4gIHZhciBzeCA9IHNbMF07XG4gIHZhciBzeSA9IHNbMV07XG4gIHZhciBzeiA9IHNbMl07XG4gIHZhciBveCA9IG9bMF07XG4gIHZhciBveSA9IG9bMV07XG4gIHZhciBveiA9IG9bMl07XG4gIHZhciBvdXQwID0gKDEgLSAoeXkgKyB6eikpICogc3g7XG4gIHZhciBvdXQxID0gKHh5ICsgd3opICogc3g7XG4gIHZhciBvdXQyID0gKHh6IC0gd3kpICogc3g7XG4gIHZhciBvdXQ0ID0gKHh5IC0gd3opICogc3k7XG4gIHZhciBvdXQ1ID0gKDEgLSAoeHggKyB6eikpICogc3k7XG4gIHZhciBvdXQ2ID0gKHl6ICsgd3gpICogc3k7XG4gIHZhciBvdXQ4ID0gKHh6ICsgd3kpICogc3o7XG4gIHZhciBvdXQ5ID0gKHl6IC0gd3gpICogc3o7XG4gIHZhciBvdXQxMCA9ICgxIC0gKHh4ICsgeXkpKSAqIHN6O1xuICBvdXRbMF0gPSBvdXQwO1xuICBvdXRbMV0gPSBvdXQxO1xuICBvdXRbMl0gPSBvdXQyO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSBvdXQ0O1xuICBvdXRbNV0gPSBvdXQ1O1xuICBvdXRbNl0gPSBvdXQ2O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSBvdXQ4O1xuICBvdXRbOV0gPSBvdXQ5O1xuICBvdXRbMTBdID0gb3V0MTA7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXSArIG94IC0gKG91dDAgKiBveCArIG91dDQgKiBveSArIG91dDggKiBveik7XG4gIG91dFsxM10gPSB2WzFdICsgb3kgLSAob3V0MSAqIG94ICsgb3V0NSAqIG95ICsgb3V0OSAqIG96KTtcbiAgb3V0WzE0XSA9IHZbMl0gKyBveiAtIChvdXQyICogb3ggKyBvdXQ2ICogb3kgKyBvdXQxMCAqIG96KTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgYSA0eDQgbWF0cml4IGZyb20gdGhlIGdpdmVuIHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBRdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICpcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVF1YXQob3V0LCBxKSB7XG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeXggPSB5ICogeDI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHp4ID0geiAqIHgyO1xuICB2YXIgenkgPSB6ICogeTI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gIG91dFsxXSA9IHl4ICsgd3o7XG4gIG91dFsyXSA9IHp4IC0gd3k7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHl4IC0gd3o7XG4gIG91dFs1XSA9IDEgLSB4eCAtIHp6O1xuICBvdXRbNl0gPSB6eSArIHd4O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB6eCArIHd5O1xuICBvdXRbOV0gPSB6eSAtIHd4O1xuICBvdXRbMTBdID0gMSAtIHh4IC0geXk7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgZnJ1c3R1bSBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtOdW1iZXJ9IGxlZnQgTGVmdCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IHJpZ2h0IFJpZ2h0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gYm90dG9tIEJvdHRvbSBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IHRvcCBUb3AgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZydXN0dW0ob3V0LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICB2YXIgcmwgPSAxIC8gKHJpZ2h0IC0gbGVmdCk7XG4gIHZhciB0YiA9IDEgLyAodG9wIC0gYm90dG9tKTtcbiAgdmFyIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzBdID0gbmVhciAqIDIgKiBybDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gbmVhciAqIDIgKiB0YjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gKHJpZ2h0ICsgbGVmdCkgKiBybDtcbiAgb3V0WzldID0gKHRvcCArIGJvdHRvbSkgKiB0YjtcbiAgb3V0WzEwXSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICBvdXRbMTFdID0gLTE7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IGZhciAqIG5lYXIgKiAyICogbmY7XG4gIG91dFsxNV0gPSAwO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHMuXG4gKiBUaGUgbmVhci9mYXIgY2xpcCBwbGFuZXMgY29ycmVzcG9uZCB0byBhIG5vcm1hbGl6ZWQgZGV2aWNlIGNvb3JkaW5hdGUgWiByYW5nZSBvZiBbLTEsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHTC9PcGVuR0wncyBjbGlwIHZvbHVtZS5cbiAqIFBhc3NpbmcgbnVsbC91bmRlZmluZWQvbm8gdmFsdWUgZm9yIGZhciB3aWxsIGdlbmVyYXRlIGluZmluaXRlIHByb2plY3Rpb24gbWF0cml4LlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBBc3BlY3QgcmF0aW8uIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aC9oZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtLCBjYW4gYmUgbnVsbCBvciBJbmZpbml0eVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzcGVjdGl2ZU5PKG91dCwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgdmFyIGYgPSAxLjAgLyBNYXRoLnRhbihmb3Z5IC8gMiksXG4gICAgICBuZjtcbiAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gZjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNV0gPSAwO1xuXG4gIGlmIChmYXIgIT0gbnVsbCAmJiBmYXIgIT09IEluZmluaXR5KSB7XG4gICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIG91dFsxMF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgICBvdXRbMTRdID0gMiAqIGZhciAqIG5lYXIgKiBuZjtcbiAgfSBlbHNlIHtcbiAgICBvdXRbMTBdID0gLTE7XG4gICAgb3V0WzE0XSA9IC0yICogbmVhcjtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5wZXJzcGVjdGl2ZU5PfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBwZXJzcGVjdGl2ZSA9IHBlcnNwZWN0aXZlTk87XG4vKipcbiAqIEdlbmVyYXRlcyBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4IHN1aXRhYmxlIGZvciBXZWJHUFUgd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWzAsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHUFUvVnVsa2FuL0RpcmVjdFgvTWV0YWwncyBjbGlwIHZvbHVtZS5cbiAqIFBhc3NpbmcgbnVsbC91bmRlZmluZWQvbm8gdmFsdWUgZm9yIGZhciB3aWxsIGdlbmVyYXRlIGluZmluaXRlIHByb2plY3Rpb24gbWF0cml4LlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBBc3BlY3QgcmF0aW8uIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aC9oZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtLCBjYW4gYmUgbnVsbCBvciBJbmZpbml0eVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJzcGVjdGl2ZVpPKG91dCwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgdmFyIGYgPSAxLjAgLyBNYXRoLnRhbihmb3Z5IC8gMiksXG4gICAgICBuZjtcbiAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gZjtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNV0gPSAwO1xuXG4gIGlmIChmYXIgIT0gbnVsbCAmJiBmYXIgIT09IEluZmluaXR5KSB7XG4gICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIG91dFsxMF0gPSBmYXIgKiBuZjtcbiAgICBvdXRbMTRdID0gZmFyICogbmVhciAqIG5mO1xuICB9IGVsc2Uge1xuICAgIG91dFsxMF0gPSAtMTtcbiAgICBvdXRbMTRdID0gLW5lYXI7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBmaWVsZCBvZiB2aWV3LlxuICogVGhpcyBpcyBwcmltYXJpbHkgdXNlZnVsIGZvciBnZW5lcmF0aW5nIHByb2plY3Rpb24gbWF0cmljZXMgdG8gYmUgdXNlZFxuICogd2l0aCB0aGUgc3RpbGwgZXhwZXJpZW1lbnRhbCBXZWJWUiBBUEkuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtPYmplY3R9IGZvdiBPYmplY3QgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIHZhbHVlczogdXBEZWdyZWVzLCBkb3duRGVncmVlcywgbGVmdERlZ3JlZXMsIHJpZ2h0RGVncmVlc1xuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGVyc3BlY3RpdmVGcm9tRmllbGRPZlZpZXcob3V0LCBmb3YsIG5lYXIsIGZhcikge1xuICB2YXIgdXBUYW4gPSBNYXRoLnRhbihmb3YudXBEZWdyZWVzICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgdmFyIGRvd25UYW4gPSBNYXRoLnRhbihmb3YuZG93bkRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgbGVmdFRhbiA9IE1hdGgudGFuKGZvdi5sZWZ0RGVncmVlcyAqIE1hdGguUEkgLyAxODAuMCk7XG4gIHZhciByaWdodFRhbiA9IE1hdGgudGFuKGZvdi5yaWdodERlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgeFNjYWxlID0gMi4wIC8gKGxlZnRUYW4gKyByaWdodFRhbik7XG4gIHZhciB5U2NhbGUgPSAyLjAgLyAodXBUYW4gKyBkb3duVGFuKTtcbiAgb3V0WzBdID0geFNjYWxlO1xuICBvdXRbMV0gPSAwLjA7XG4gIG91dFsyXSA9IDAuMDtcbiAgb3V0WzNdID0gMC4wO1xuICBvdXRbNF0gPSAwLjA7XG4gIG91dFs1XSA9IHlTY2FsZTtcbiAgb3V0WzZdID0gMC4wO1xuICBvdXRbN10gPSAwLjA7XG4gIG91dFs4XSA9IC0oKGxlZnRUYW4gLSByaWdodFRhbikgKiB4U2NhbGUgKiAwLjUpO1xuICBvdXRbOV0gPSAodXBUYW4gLSBkb3duVGFuKSAqIHlTY2FsZSAqIDAuNTtcbiAgb3V0WzEwXSA9IGZhciAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzExXSA9IC0xLjA7XG4gIG91dFsxMl0gPSAwLjA7XG4gIG91dFsxM10gPSAwLjA7XG4gIG91dFsxNF0gPSBmYXIgKiBuZWFyIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMTVdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBvcnRob2dvbmFsIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kcy5cbiAqIFRoZSBuZWFyL2ZhciBjbGlwIHBsYW5lcyBjb3JyZXNwb25kIHRvIGEgbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZSBaIHJhbmdlIG9mIFstMSwgMV0sXG4gKiB3aGljaCBtYXRjaGVzIFdlYkdML09wZW5HTCdzIGNsaXAgdm9sdW1lLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IExlZnQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSByaWdodCBSaWdodCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSBCb3R0b20gYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgVG9wIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBvcnRob05PKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgdmFyIGxyID0gMSAvIChsZWZ0IC0gcmlnaHQpO1xuICB2YXIgYnQgPSAxIC8gKGJvdHRvbSAtIHRvcCk7XG4gIHZhciBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gIG91dFswXSA9IC0yICogbHI7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IC0yICogYnQ7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSAyICogbmY7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcbiAgb3V0WzEzXSA9ICh0b3AgKyBib3R0b20pICogYnQ7XG4gIG91dFsxNF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5vcnRob05PfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBvcnRobyA9IG9ydGhvTk87XG4vKipcbiAqIEdlbmVyYXRlcyBhIG9ydGhvZ29uYWwgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzLlxuICogVGhlIG5lYXIvZmFyIGNsaXAgcGxhbmVzIGNvcnJlc3BvbmQgdG8gYSBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlIFogcmFuZ2Ugb2YgWzAsIDFdLFxuICogd2hpY2ggbWF0Y2hlcyBXZWJHUFUvVnVsa2FuL0RpcmVjdFgvTWV0YWwncyBjbGlwIHZvbHVtZS5cbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge251bWJlcn0gbGVmdCBMZWZ0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gcmlnaHQgUmlnaHQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b20gQm90dG9tIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gdG9wIFRvcCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gb3J0aG9aTyhvdXQsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gIHZhciBsciA9IDEgLyAobGVmdCAtIHJpZ2h0KTtcbiAgdmFyIGJ0ID0gMSAvIChib3R0b20gLSB0b3ApO1xuICB2YXIgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMF0gPSAtMiAqIGxyO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSAtMiAqIGJ0O1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gbmY7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcbiAgb3V0WzEzXSA9ICh0b3AgKyBib3R0b20pICogYnQ7XG4gIG91dFsxNF0gPSBuZWFyICogbmY7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBsb29rLWF0IG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBleWUgcG9zaXRpb24sIGZvY2FsIHBvaW50LCBhbmQgdXAgYXhpcy5cbiAqIElmIHlvdSB3YW50IGEgbWF0cml4IHRoYXQgYWN0dWFsbHkgbWFrZXMgYW4gb2JqZWN0IGxvb2sgYXQgYW5vdGhlciBvYmplY3QsIHlvdSBzaG91bGQgdXNlIHRhcmdldFRvIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGV5ZSBQb3NpdGlvbiBvZiB0aGUgdmlld2VyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gY2VudGVyIFBvaW50IHRoZSB2aWV3ZXIgaXMgbG9va2luZyBhdFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHVwIHZlYzMgcG9pbnRpbmcgdXBcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbG9va0F0KG91dCwgZXllLCBjZW50ZXIsIHVwKSB7XG4gIHZhciB4MCwgeDEsIHgyLCB5MCwgeTEsIHkyLCB6MCwgejEsIHoyLCBsZW47XG4gIHZhciBleWV4ID0gZXllWzBdO1xuICB2YXIgZXlleSA9IGV5ZVsxXTtcbiAgdmFyIGV5ZXogPSBleWVbMl07XG4gIHZhciB1cHggPSB1cFswXTtcbiAgdmFyIHVweSA9IHVwWzFdO1xuICB2YXIgdXB6ID0gdXBbMl07XG4gIHZhciBjZW50ZXJ4ID0gY2VudGVyWzBdO1xuICB2YXIgY2VudGVyeSA9IGNlbnRlclsxXTtcbiAgdmFyIGNlbnRlcnogPSBjZW50ZXJbMl07XG5cbiAgaWYgKE1hdGguYWJzKGV5ZXggLSBjZW50ZXJ4KSA8IGdsTWF0cml4LkVQU0lMT04gJiYgTWF0aC5hYnMoZXlleSAtIGNlbnRlcnkpIDwgZ2xNYXRyaXguRVBTSUxPTiAmJiBNYXRoLmFicyhleWV6IC0gY2VudGVyeikgPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5KG91dCk7XG4gIH1cblxuICB6MCA9IGV5ZXggLSBjZW50ZXJ4O1xuICB6MSA9IGV5ZXkgLSBjZW50ZXJ5O1xuICB6MiA9IGV5ZXogLSBjZW50ZXJ6O1xuICBsZW4gPSAxIC8gTWF0aC5oeXBvdCh6MCwgejEsIHoyKTtcbiAgejAgKj0gbGVuO1xuICB6MSAqPSBsZW47XG4gIHoyICo9IGxlbjtcbiAgeDAgPSB1cHkgKiB6MiAtIHVweiAqIHoxO1xuICB4MSA9IHVweiAqIHowIC0gdXB4ICogejI7XG4gIHgyID0gdXB4ICogejEgLSB1cHkgKiB6MDtcbiAgbGVuID0gTWF0aC5oeXBvdCh4MCwgeDEsIHgyKTtcblxuICBpZiAoIWxlbikge1xuICAgIHgwID0gMDtcbiAgICB4MSA9IDA7XG4gICAgeDIgPSAwO1xuICB9IGVsc2Uge1xuICAgIGxlbiA9IDEgLyBsZW47XG4gICAgeDAgKj0gbGVuO1xuICAgIHgxICo9IGxlbjtcbiAgICB4MiAqPSBsZW47XG4gIH1cblxuICB5MCA9IHoxICogeDIgLSB6MiAqIHgxO1xuICB5MSA9IHoyICogeDAgLSB6MCAqIHgyO1xuICB5MiA9IHowICogeDEgLSB6MSAqIHgwO1xuICBsZW4gPSBNYXRoLmh5cG90KHkwLCB5MSwgeTIpO1xuXG4gIGlmICghbGVuKSB7XG4gICAgeTAgPSAwO1xuICAgIHkxID0gMDtcbiAgICB5MiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgbGVuID0gMSAvIGxlbjtcbiAgICB5MCAqPSBsZW47XG4gICAgeTEgKj0gbGVuO1xuICAgIHkyICo9IGxlbjtcbiAgfVxuXG4gIG91dFswXSA9IHgwO1xuICBvdXRbMV0gPSB5MDtcbiAgb3V0WzJdID0gejA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHgxO1xuICBvdXRbNV0gPSB5MTtcbiAgb3V0WzZdID0gejE7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHgyO1xuICBvdXRbOV0gPSB5MjtcbiAgb3V0WzEwXSA9IHoyO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IC0oeDAgKiBleWV4ICsgeDEgKiBleWV5ICsgeDIgKiBleWV6KTtcbiAgb3V0WzEzXSA9IC0oeTAgKiBleWV4ICsgeTEgKiBleWV5ICsgeTIgKiBleWV6KTtcbiAgb3V0WzE0XSA9IC0oejAgKiBleWV4ICsgejEgKiBleWV5ICsgejIgKiBleWV6KTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIG1hdHJpeCB0aGF0IG1ha2VzIHNvbWV0aGluZyBsb29rIGF0IHNvbWV0aGluZyBlbHNlLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBleWUgUG9zaXRpb24gb2YgdGhlIHZpZXdlclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGNlbnRlciBQb2ludCB0aGUgdmlld2VyIGlzIGxvb2tpbmcgYXRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB1cCB2ZWMzIHBvaW50aW5nIHVwXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRhcmdldFRvKG91dCwgZXllLCB0YXJnZXQsIHVwKSB7XG4gIHZhciBleWV4ID0gZXllWzBdLFxuICAgICAgZXlleSA9IGV5ZVsxXSxcbiAgICAgIGV5ZXogPSBleWVbMl0sXG4gICAgICB1cHggPSB1cFswXSxcbiAgICAgIHVweSA9IHVwWzFdLFxuICAgICAgdXB6ID0gdXBbMl07XG4gIHZhciB6MCA9IGV5ZXggLSB0YXJnZXRbMF0sXG4gICAgICB6MSA9IGV5ZXkgLSB0YXJnZXRbMV0sXG4gICAgICB6MiA9IGV5ZXogLSB0YXJnZXRbMl07XG4gIHZhciBsZW4gPSB6MCAqIHowICsgejEgKiB6MSArIHoyICogejI7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgejAgKj0gbGVuO1xuICAgIHoxICo9IGxlbjtcbiAgICB6MiAqPSBsZW47XG4gIH1cblxuICB2YXIgeDAgPSB1cHkgKiB6MiAtIHVweiAqIHoxLFxuICAgICAgeDEgPSB1cHogKiB6MCAtIHVweCAqIHoyLFxuICAgICAgeDIgPSB1cHggKiB6MSAtIHVweSAqIHowO1xuICBsZW4gPSB4MCAqIHgwICsgeDEgKiB4MSArIHgyICogeDI7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgeDAgKj0gbGVuO1xuICAgIHgxICo9IGxlbjtcbiAgICB4MiAqPSBsZW47XG4gIH1cblxuICBvdXRbMF0gPSB4MDtcbiAgb3V0WzFdID0geDE7XG4gIG91dFsyXSA9IHgyO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB6MSAqIHgyIC0gejIgKiB4MTtcbiAgb3V0WzVdID0gejIgKiB4MCAtIHowICogeDI7XG4gIG91dFs2XSA9IHowICogeDEgLSB6MSAqIHgwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB6MDtcbiAgb3V0WzldID0gejE7XG4gIG91dFsxMF0gPSB6MjtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSBleWV4O1xuICBvdXRbMTNdID0gZXlleTtcbiAgb3V0WzE0XSA9IGV5ZXo7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIG1hdHJpeCB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcIm1hdDQoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIsIFwiICsgYVs0XSArIFwiLCBcIiArIGFbNV0gKyBcIiwgXCIgKyBhWzZdICsgXCIsIFwiICsgYVs3XSArIFwiLCBcIiArIGFbOF0gKyBcIiwgXCIgKyBhWzldICsgXCIsIFwiICsgYVsxMF0gKyBcIiwgXCIgKyBhWzExXSArIFwiLCBcIiArIGFbMTJdICsgXCIsIFwiICsgYVsxM10gKyBcIiwgXCIgKyBhWzE0XSArIFwiLCBcIiArIGFbMTVdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgRnJvYmVuaXVzIG5vcm0gb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb2IoYSkge1xuICByZXR1cm4gTWF0aC5oeXBvdChhWzBdLCBhWzFdLCBhWzJdLCBhWzNdLCBhWzRdLCBhWzVdLCBhWzZdLCBhWzddLCBhWzhdLCBhWzldLCBhWzEwXSwgYVsxMV0sIGFbMTJdLCBhWzEzXSwgYVsxNF0sIGFbMTVdKTtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0NCdzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XTtcbiAgb3V0WzddID0gYVs3XSArIGJbN107XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdO1xuICBvdXRbOV0gPSBhWzldICsgYls5XTtcbiAgb3V0WzEwXSA9IGFbMTBdICsgYlsxMF07XG4gIG91dFsxMV0gPSBhWzExXSArIGJbMTFdO1xuICBvdXRbMTJdID0gYVsxMl0gKyBiWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdICsgYlsxM107XG4gIG91dFsxNF0gPSBhWzE0XSArIGJbMTRdO1xuICBvdXRbMTVdID0gYVsxNV0gKyBiWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIG1hdHJpeCBiIGZyb20gbWF0cml4IGFcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIG91dFs0XSA9IGFbNF0gLSBiWzRdO1xuICBvdXRbNV0gPSBhWzVdIC0gYls1XTtcbiAgb3V0WzZdID0gYVs2XSAtIGJbNl07XG4gIG91dFs3XSA9IGFbN10gLSBiWzddO1xuICBvdXRbOF0gPSBhWzhdIC0gYls4XTtcbiAgb3V0WzldID0gYVs5XSAtIGJbOV07XG4gIG91dFsxMF0gPSBhWzEwXSAtIGJbMTBdO1xuICBvdXRbMTFdID0gYVsxMV0gLSBiWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdIC0gYlsxMl07XG4gIG91dFsxM10gPSBhWzEzXSAtIGJbMTNdO1xuICBvdXRbMTRdID0gYVsxNF0gLSBiWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdIC0gYlsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGx5IGVhY2ggZWxlbWVudCBvZiB0aGUgbWF0cml4IGJ5IGEgc2NhbGFyLlxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIG1hdHJpeCdzIGVsZW1lbnRzIGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICBvdXRbM10gPSBhWzNdICogYjtcbiAgb3V0WzRdID0gYVs0XSAqIGI7XG4gIG91dFs1XSA9IGFbNV0gKiBiO1xuICBvdXRbNl0gPSBhWzZdICogYjtcbiAgb3V0WzddID0gYVs3XSAqIGI7XG4gIG91dFs4XSA9IGFbOF0gKiBiO1xuICBvdXRbOV0gPSBhWzldICogYjtcbiAgb3V0WzEwXSA9IGFbMTBdICogYjtcbiAgb3V0WzExXSA9IGFbMTFdICogYjtcbiAgb3V0WzEyXSA9IGFbMTJdICogYjtcbiAgb3V0WzEzXSA9IGFbMTNdICogYjtcbiAgb3V0WzE0XSA9IGFbMTRdICogYjtcbiAgb3V0WzE1XSA9IGFbMTVdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gbWF0NCdzIGFmdGVyIG11bHRpcGx5aW5nIGVhY2ggZWxlbWVudCBvZiB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWUuXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIncyBlbGVtZW50cyBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgb3V0WzNdID0gYVszXSArIGJbM10gKiBzY2FsZTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF0gKiBzY2FsZTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV0gKiBzY2FsZTtcbiAgb3V0WzZdID0gYVs2XSArIGJbNl0gKiBzY2FsZTtcbiAgb3V0WzddID0gYVs3XSArIGJbN10gKiBzY2FsZTtcbiAgb3V0WzhdID0gYVs4XSArIGJbOF0gKiBzY2FsZTtcbiAgb3V0WzldID0gYVs5XSArIGJbOV0gKiBzY2FsZTtcbiAgb3V0WzEwXSA9IGFbMTBdICsgYlsxMF0gKiBzY2FsZTtcbiAgb3V0WzExXSA9IGFbMTFdICsgYlsxMV0gKiBzY2FsZTtcbiAgb3V0WzEyXSA9IGFbMTJdICsgYlsxMl0gKiBzY2FsZTtcbiAgb3V0WzEzXSA9IGFbMTNdICsgYlsxM10gKiBzY2FsZTtcbiAgb3V0WzE0XSA9IGFbMTRdICsgYlsxNF0gKiBzY2FsZTtcbiAgb3V0WzE1XSA9IGFbMTVdICsgYlsxNV0gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXSAmJiBhWzRdID09PSBiWzRdICYmIGFbNV0gPT09IGJbNV0gJiYgYVs2XSA9PT0gYls2XSAmJiBhWzddID09PSBiWzddICYmIGFbOF0gPT09IGJbOF0gJiYgYVs5XSA9PT0gYls5XSAmJiBhWzEwXSA9PT0gYlsxMF0gJiYgYVsxMV0gPT09IGJbMTFdICYmIGFbMTJdID09PSBiWzEyXSAmJiBhWzEzXSA9PT0gYlsxM10gJiYgYVsxNF0gPT09IGJbMTRdICYmIGFbMTVdID09PSBiWzE1XTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGE0ID0gYVs0XSxcbiAgICAgIGE1ID0gYVs1XSxcbiAgICAgIGE2ID0gYVs2XSxcbiAgICAgIGE3ID0gYVs3XTtcbiAgdmFyIGE4ID0gYVs4XSxcbiAgICAgIGE5ID0gYVs5XSxcbiAgICAgIGExMCA9IGFbMTBdLFxuICAgICAgYTExID0gYVsxMV07XG4gIHZhciBhMTIgPSBhWzEyXSxcbiAgICAgIGExMyA9IGFbMTNdLFxuICAgICAgYTE0ID0gYVsxNF0sXG4gICAgICBhMTUgPSBhWzE1XTtcbiAgdmFyIGIwID0gYlswXSxcbiAgICAgIGIxID0gYlsxXSxcbiAgICAgIGIyID0gYlsyXSxcbiAgICAgIGIzID0gYlszXTtcbiAgdmFyIGI0ID0gYls0XSxcbiAgICAgIGI1ID0gYls1XSxcbiAgICAgIGI2ID0gYls2XSxcbiAgICAgIGI3ID0gYls3XTtcbiAgdmFyIGI4ID0gYls4XSxcbiAgICAgIGI5ID0gYls5XSxcbiAgICAgIGIxMCA9IGJbMTBdLFxuICAgICAgYjExID0gYlsxMV07XG4gIHZhciBiMTIgPSBiWzEyXSxcbiAgICAgIGIxMyA9IGJbMTNdLFxuICAgICAgYjE0ID0gYlsxNF0sXG4gICAgICBiMTUgPSBiWzE1XTtcbiAgcmV0dXJuIE1hdGguYWJzKGEwIC0gYjApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEwKSwgTWF0aC5hYnMoYjApKSAmJiBNYXRoLmFicyhhMSAtIGIxKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMSksIE1hdGguYWJzKGIxKSkgJiYgTWF0aC5hYnMoYTIgLSBiMikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTIpLCBNYXRoLmFicyhiMikpICYmIE1hdGguYWJzKGEzIC0gYjMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEzKSwgTWF0aC5hYnMoYjMpKSAmJiBNYXRoLmFicyhhNCAtIGI0KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNCksIE1hdGguYWJzKGI0KSkgJiYgTWF0aC5hYnMoYTUgLSBiNSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTUpLCBNYXRoLmFicyhiNSkpICYmIE1hdGguYWJzKGE2IC0gYjYpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE2KSwgTWF0aC5hYnMoYjYpKSAmJiBNYXRoLmFicyhhNyAtIGI3KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNyksIE1hdGguYWJzKGI3KSkgJiYgTWF0aC5hYnMoYTggLSBiOCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTgpLCBNYXRoLmFicyhiOCkpICYmIE1hdGguYWJzKGE5IC0gYjkpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE5KSwgTWF0aC5hYnMoYjkpKSAmJiBNYXRoLmFicyhhMTAgLSBiMTApIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMCksIE1hdGguYWJzKGIxMCkpICYmIE1hdGguYWJzKGExMSAtIGIxMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTExKSwgTWF0aC5hYnMoYjExKSkgJiYgTWF0aC5hYnMoYTEyIC0gYjEyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTIpLCBNYXRoLmFicyhiMTIpKSAmJiBNYXRoLmFicyhhMTMgLSBiMTMpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMyksIE1hdGguYWJzKGIxMykpICYmIE1hdGguYWJzKGExNCAtIGIxNCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTE0KSwgTWF0aC5hYnMoYjE0KSkgJiYgTWF0aC5hYnMoYTE1IC0gYjE1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTUpLCBNYXRoLmFicyhiMTUpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0LnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzdWIgPSBzdWJ0cmFjdDsiLAogICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogMyBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjM1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjM1xuICpcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzMgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2xvbmVcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeik7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjMyBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSwgeikge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSB2ZWMzIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMyB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgeCwgeSwgeikge1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFN1YnRyYWN0cyB2ZWN0b3IgYiBmcm9tIHZlY3RvciBhXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3VidHJhY3Qob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLSBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC0gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAtIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKiBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBEaXZpZGVzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXZpZGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gLyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdIC8gYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAvIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGguY2VpbCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNlaWxcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2VpbChvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5jZWlsKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmNlaWwoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGguY2VpbChhWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5mbG9vciB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGZsb29yXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZsb29yKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmZsb29yKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmZsb29yKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLmZsb29yKGFbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaW5pbXVtIG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtaW4ob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1pbihhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5taW4oYVsyXSwgYlsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1heGltdW0gb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1heChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gIG91dFsxXSA9IE1hdGgubWF4KGFbMV0sIGJbMV0pO1xuICBvdXRbMl0gPSBNYXRoLm1heChhWzJdLCBiWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5yb3VuZCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIHJvdW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLnJvdW5kKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLnJvdW5kKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLnJvdW5kKGFbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgYSB2ZWMzIGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjMydzIGFmdGVyIHNjYWxpbmcgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdO1xuICB2YXIgeSA9IGJbMV0gLSBhWzFdO1xuICB2YXIgeiA9IGJbMl0gLSBhWzJdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogejtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBzcXVhcmVkIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkTGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogejtcbn1cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBuZWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgb3V0WzJdID0gLWFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGludmVyc2Ugb2YgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBpbnZlcnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJzZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gMS4wIC8gYVswXTtcbiAgb3V0WzFdID0gMS4wIC8gYVsxXTtcbiAgb3V0WzJdID0gMS4wIC8gYVsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZShvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogejtcblxuICBpZiAobGVuID4gMCkge1xuICAgIC8vVE9ETzogZXZhbHVhdGUgdXNlIG9mIGdsbV9pbnZzcXJ0IGhlcmU/XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICB9XG5cbiAgb3V0WzBdID0gYVswXSAqIGxlbjtcbiAgb3V0WzFdID0gYVsxXSAqIGxlbjtcbiAgb3V0WzJdID0gYVsyXSAqIGxlbjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsxXSAqIGJbMV0gKyBhWzJdICogYlsyXTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyb3NzKG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdO1xuICBvdXRbMF0gPSBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXogKiBieCAtIGF4ICogYno7XG4gIG91dFsyXSA9IGF4ICogYnkgLSBheSAqIGJ4O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBheCA9IGFbMF07XG4gIHZhciBheSA9IGFbMV07XG4gIHZhciBheiA9IGFbMl07XG4gIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgb3V0WzJdID0gYXogKyB0ICogKGJbMl0gLSBheik7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgaGVybWl0ZSBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaGVybWl0ZShvdXQsIGEsIGIsIGMsIGQsIHQpIHtcbiAgdmFyIGZhY3RvclRpbWVzMiA9IHQgKiB0O1xuICB2YXIgZmFjdG9yMSA9IGZhY3RvclRpbWVzMiAqICgyICogdCAtIDMpICsgMTtcbiAgdmFyIGZhY3RvcjIgPSBmYWN0b3JUaW1lczIgKiAodCAtIDIpICsgdDtcbiAgdmFyIGZhY3RvcjMgPSBmYWN0b3JUaW1lczIgKiAodCAtIDEpO1xuICB2YXIgZmFjdG9yNCA9IGZhY3RvclRpbWVzMiAqICgzIC0gMiAqIHQpO1xuICBvdXRbMF0gPSBhWzBdICogZmFjdG9yMSArIGJbMF0gKiBmYWN0b3IyICsgY1swXSAqIGZhY3RvcjMgKyBkWzBdICogZmFjdG9yNDtcbiAgb3V0WzFdID0gYVsxXSAqIGZhY3RvcjEgKyBiWzFdICogZmFjdG9yMiArIGNbMV0gKiBmYWN0b3IzICsgZFsxXSAqIGZhY3RvcjQ7XG4gIG91dFsyXSA9IGFbMl0gKiBmYWN0b3IxICsgYlsyXSAqIGZhY3RvcjIgKyBjWzJdICogZmFjdG9yMyArIGRbMl0gKiBmYWN0b3I0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGJlemllciBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYmV6aWVyKG91dCwgYSwgYiwgYywgZCwgdCkge1xuICB2YXIgaW52ZXJzZUZhY3RvciA9IDEgLSB0O1xuICB2YXIgaW52ZXJzZUZhY3RvclRpbWVzVHdvID0gaW52ZXJzZUZhY3RvciAqIGludmVyc2VGYWN0b3I7XG4gIHZhciBmYWN0b3JUaW1lczIgPSB0ICogdDtcbiAgdmFyIGZhY3RvcjEgPSBpbnZlcnNlRmFjdG9yVGltZXNUd28gKiBpbnZlcnNlRmFjdG9yO1xuICB2YXIgZmFjdG9yMiA9IDMgKiB0ICogaW52ZXJzZUZhY3RvclRpbWVzVHdvO1xuICB2YXIgZmFjdG9yMyA9IDMgKiBmYWN0b3JUaW1lczIgKiBpbnZlcnNlRmFjdG9yO1xuICB2YXIgZmFjdG9yNCA9IGZhY3RvclRpbWVzMiAqIHQ7XG4gIG91dFswXSA9IGFbMF0gKiBmYWN0b3IxICsgYlswXSAqIGZhY3RvcjIgKyBjWzBdICogZmFjdG9yMyArIGRbMF0gKiBmYWN0b3I0O1xuICBvdXRbMV0gPSBhWzFdICogZmFjdG9yMSArIGJbMV0gKiBmYWN0b3IyICsgY1sxXSAqIGZhY3RvcjMgKyBkWzFdICogZmFjdG9yNDtcbiAgb3V0WzJdID0gYVsyXSAqIGZhY3RvcjEgKyBiWzJdICogZmFjdG9yMiArIGNbMl0gKiBmYWN0b3IzICsgZFsyXSAqIGZhY3RvcjQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gc2NhbGVcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IFtzY2FsZV0gTGVuZ3RoIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yLiBJZiBvbW1pdHRlZCwgYSB1bml0IHZlY3RvciB3aWxsIGJlIHJldHVybmVkXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbShvdXQsIHNjYWxlKSB7XG4gIHNjYWxlID0gc2NhbGUgfHwgMS4wO1xuICB2YXIgciA9IGdsTWF0cml4LlJBTkRPTSgpICogMi4wICogTWF0aC5QSTtcbiAgdmFyIHogPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIuMCAtIDEuMDtcbiAgdmFyIHpTY2FsZSA9IE1hdGguc3FydCgxLjAgLSB6ICogeikgKiBzY2FsZTtcbiAgb3V0WzBdID0gTWF0aC5jb3MocikgKiB6U2NhbGU7XG4gIG91dFsxXSA9IE1hdGguc2luKHIpICogelNjYWxlO1xuICBvdXRbMl0gPSB6ICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIG1hdDQuXG4gKiA0dGggdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcxJ1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDQob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07XG4gIHZhciB3ID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdO1xuICB3ID0gdyB8fCAxLjA7XG4gIG91dFswXSA9IChtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSkgLyB3O1xuICBvdXRbMV0gPSAobVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10pIC8gdztcbiAgb3V0WzJdID0gKG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSkgLyB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMzIHdpdGggYSBtYXQzLlxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gdGhlIDN4MyBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWF0MyhvdXQsIGEsIG0pIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgb3V0WzBdID0geCAqIG1bMF0gKyB5ICogbVszXSArIHogKiBtWzZdO1xuICBvdXRbMV0gPSB4ICogbVsxXSArIHkgKiBtWzRdICsgeiAqIG1bN107XG4gIG91dFsyXSA9IHggKiBtWzJdICsgeSAqIG1bNV0gKyB6ICogbVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMyB3aXRoIGEgcXVhdFxuICogQ2FuIGFsc28gYmUgdXNlZCBmb3IgZHVhbCBxdWF0ZXJuaW9ucy4gKE11bHRpcGx5IGl0IHdpdGggdGhlIHJlYWwgcGFydClcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBxIHF1YXRlcm5pb24gdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtUXVhdChvdXQsIGEsIHEpIHtcbiAgLy8gYmVuY2htYXJrczogaHR0cHM6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tdHJhbnNmb3JtLXZlYzMtaW1wbGVtZW50YXRpb25zLWZpeGVkXG4gIHZhciBxeCA9IHFbMF0sXG4gICAgICBxeSA9IHFbMV0sXG4gICAgICBxeiA9IHFbMl0sXG4gICAgICBxdyA9IHFbM107XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07IC8vIHZhciBxdmVjID0gW3F4LCBxeSwgcXpdO1xuICAvLyB2YXIgdXYgPSB2ZWMzLmNyb3NzKFtdLCBxdmVjLCBhKTtcblxuICB2YXIgdXZ4ID0gcXkgKiB6IC0gcXogKiB5LFxuICAgICAgdXZ5ID0gcXogKiB4IC0gcXggKiB6LFxuICAgICAgdXZ6ID0gcXggKiB5IC0gcXkgKiB4OyAvLyB2YXIgdXV2ID0gdmVjMy5jcm9zcyhbXSwgcXZlYywgdXYpO1xuXG4gIHZhciB1dXZ4ID0gcXkgKiB1dnogLSBxeiAqIHV2eSxcbiAgICAgIHV1dnkgPSBxeiAqIHV2eCAtIHF4ICogdXZ6LFxuICAgICAgdXV2eiA9IHF4ICogdXZ5IC0gcXkgKiB1dng7IC8vIHZlYzMuc2NhbGUodXYsIHV2LCAyICogdyk7XG5cbiAgdmFyIHcyID0gcXcgKiAyO1xuICB1dnggKj0gdzI7XG4gIHV2eSAqPSB3MjtcbiAgdXZ6ICo9IHcyOyAvLyB2ZWMzLnNjYWxlKHV1diwgdXV2LCAyKTtcblxuICB1dXZ4ICo9IDI7XG4gIHV1dnkgKj0gMjtcbiAgdXV2eiAqPSAyOyAvLyByZXR1cm4gdmVjMy5hZGQob3V0LCBhLCB2ZWMzLmFkZChvdXQsIHV2LCB1dXYpKTtcblxuICBvdXRbMF0gPSB4ICsgdXZ4ICsgdXV2eDtcbiAgb3V0WzFdID0geSArIHV2eSArIHV1dnk7XG4gIG91dFsyXSA9IHogKyB1dnogKyB1dXZ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGUgYSAzRCB2ZWN0b3IgYXJvdW5kIHRoZSB4LWF4aXNcbiAqIEBwYXJhbSB7dmVjM30gb3V0IFRoZSByZWNlaXZpbmcgdmVjM1xuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIHZlYzMgcG9pbnQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgb3JpZ2luIG9mIHRoZSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCBUaGUgYW5nbGUgb2Ygcm90YXRpb24gaW4gcmFkaWFuc1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgYiwgcmFkKSB7XG4gIHZhciBwID0gW10sXG4gICAgICByID0gW107IC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cblxuICBwWzBdID0gYVswXSAtIGJbMF07XG4gIHBbMV0gPSBhWzFdIC0gYlsxXTtcbiAgcFsyXSA9IGFbMl0gLSBiWzJdOyAvL3BlcmZvcm0gcm90YXRpb25cblxuICByWzBdID0gcFswXTtcbiAgclsxXSA9IHBbMV0gKiBNYXRoLmNvcyhyYWQpIC0gcFsyXSAqIE1hdGguc2luKHJhZCk7XG4gIHJbMl0gPSBwWzFdICogTWF0aC5zaW4ocmFkKSArIHBbMl0gKiBNYXRoLmNvcyhyYWQpOyAvL3RyYW5zbGF0ZSB0byBjb3JyZWN0IHBvc2l0aW9uXG5cbiAgb3V0WzBdID0gclswXSArIGJbMF07XG4gIG91dFsxXSA9IHJbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSByWzJdICsgYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlIGEgM0QgdmVjdG9yIGFyb3VuZCB0aGUgeS1heGlzXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSB2ZWMzIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIG9yaWdpbiBvZiB0aGUgcm90YXRpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIGIsIHJhZCkge1xuICB2YXIgcCA9IFtdLFxuICAgICAgciA9IFtdOyAvL1RyYW5zbGF0ZSBwb2ludCB0byB0aGUgb3JpZ2luXG5cbiAgcFswXSA9IGFbMF0gLSBiWzBdO1xuICBwWzFdID0gYVsxXSAtIGJbMV07XG4gIHBbMl0gPSBhWzJdIC0gYlsyXTsgLy9wZXJmb3JtIHJvdGF0aW9uXG5cbiAgclswXSA9IHBbMl0gKiBNYXRoLnNpbihyYWQpICsgcFswXSAqIE1hdGguY29zKHJhZCk7XG4gIHJbMV0gPSBwWzFdO1xuICByWzJdID0gcFsyXSAqIE1hdGguY29zKHJhZCkgLSBwWzBdICogTWF0aC5zaW4ocmFkKTsgLy90cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuXG4gIG91dFswXSA9IHJbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSByWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gclsyXSArIGJbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZSBhIDNEIHZlY3RvciBhcm91bmQgdGhlIHotYXhpc1xuICogQHBhcmFtIHt2ZWMzfSBvdXQgVGhlIHJlY2VpdmluZyB2ZWMzXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgdmVjMyBwb2ludCB0byByb3RhdGVcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIFRoZSBhbmdsZSBvZiByb3RhdGlvbiBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCBiLCByYWQpIHtcbiAgdmFyIHAgPSBbXSxcbiAgICAgIHIgPSBbXTsgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuXG4gIHBbMF0gPSBhWzBdIC0gYlswXTtcbiAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICBwWzJdID0gYVsyXSAtIGJbMl07IC8vcGVyZm9ybSByb3RhdGlvblxuXG4gIHJbMF0gPSBwWzBdICogTWF0aC5jb3MocmFkKSAtIHBbMV0gKiBNYXRoLnNpbihyYWQpO1xuICByWzFdID0gcFswXSAqIE1hdGguc2luKHJhZCkgKyBwWzFdICogTWF0aC5jb3MocmFkKTtcbiAgclsyXSA9IHBbMl07IC8vdHJhbnNsYXRlIHRvIGNvcnJlY3QgcG9zaXRpb25cblxuICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZXQgdGhlIGFuZ2xlIGJldHdlZW4gdHdvIDNEIHZlY3RvcnNcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFuZ2xlKGEsIGIpIHtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXSxcbiAgICAgIG1hZzEgPSBNYXRoLnNxcnQoYXggKiBheCArIGF5ICogYXkgKyBheiAqIGF6KSxcbiAgICAgIG1hZzIgPSBNYXRoLnNxcnQoYnggKiBieCArIGJ5ICogYnkgKyBieiAqIGJ6KSxcbiAgICAgIG1hZyA9IG1hZzEgKiBtYWcyLFxuICAgICAgY29zaW5lID0gbWFnICYmIGRvdChhLCBiKSAvIG1hZztcbiAgcmV0dXJuIE1hdGguYWNvcyhNYXRoLm1pbihNYXRoLm1heChjb3NpbmUsIC0xKSwgMSkpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzIHRvIHplcm9cbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB6ZXJvKG91dCkge1xuICBvdXRbMF0gPSAwLjA7XG4gIG91dFsxXSA9IDAuMDtcbiAgb3V0WzJdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwidmVjMyhcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl07XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5kaXZpZGV9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRpdiA9IGRpdmlkZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmRpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXN0ID0gZGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zcXVhcmVkRGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckRpc3QgPSBzcXVhcmVkRGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWMzcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWMzLiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjM3MgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmb3JFYWNoID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gMztcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIHZlY1syXSA9IGFbaSArIDJdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgICBhW2kgKyAyXSA9IHZlY1syXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbiAgfTtcbn0oKTsiLAogICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogNCBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjNFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjNFxuICpcbiAqIEByZXR1cm5zIHt2ZWM0fSBhIG5ldyA0RCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjNCBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjbG9uZVxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg0KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSwgeiwgdykge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIG91dFszXSA9IHc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSB2ZWM0IHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNCB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChvdXQsIHgsIHksIHosIHcpIHtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHZlY3RvciBiIGZyb20gdmVjdG9yIGFcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKiBiWzJdO1xuICBvdXRbM10gPSBhWzNdICogYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogRGl2aWRlcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGl2aWRlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC8gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAvIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLyBiWzJdO1xuICBvdXRbM10gPSBhWzNdIC8gYlszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5jZWlsIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2VpbFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjZWlsKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmNlaWwoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguY2VpbChhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5jZWlsKGFbMl0pO1xuICBvdXRbM10gPSBNYXRoLmNlaWwoYVszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE1hdGguZmxvb3IgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBmbG9vclxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmbG9vcihvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5mbG9vcihhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5mbG9vcihhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5mbG9vcihhWzJdKTtcbiAgb3V0WzNdID0gTWF0aC5mbG9vcihhWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbWluaW11bSBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWluKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICBvdXRbM10gPSBNYXRoLm1pbihhWzNdLCBiWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbWF4aW11bSBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWF4KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1heChhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWF4KGFbMl0sIGJbMl0pO1xuICBvdXRbM10gPSBNYXRoLm1heChhWzNdLCBiWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5yb3VuZCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIHJvdW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLnJvdW5kKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLnJvdW5kKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLnJvdW5kKGFbMl0pO1xuICBvdXRbM10gPSBNYXRoLnJvdW5kKGFbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgYSB2ZWM0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgb3V0WzNdID0gYVszXSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlYzQncyBhZnRlciBzY2FsaW5nIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGVBbmRBZGQob3V0LCBhLCBiLCBzY2FsZSkge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXSAqIHNjYWxlO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICBvdXRbM10gPSBhWzNdICsgYlszXSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgdmFyIHcgPSBiWzNdIC0gYVszXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeiwgdyk7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZShhLCBiKSB7XG4gIHZhciB4ID0gYlswXSAtIGFbMF07XG4gIHZhciB5ID0gYlsxXSAtIGFbMV07XG4gIHZhciB6ID0gYlsyXSAtIGFbMl07XG4gIHZhciB3ID0gYlszXSAtIGFbM107XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHksIHosIHcpO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRMZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcbn1cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBuZWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgb3V0WzJdID0gLWFbMl07XG4gIG91dFszXSA9IC1hWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gaW52ZXJ0XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVyc2Uob3V0LCBhKSB7XG4gIG91dFswXSA9IDEuMCAvIGFbMF07XG4gIG91dFsxXSA9IDEuMCAvIGFbMV07XG4gIG91dFsyXSA9IDEuMCAvIGFbMl07XG4gIG91dFszXSA9IDEuMCAvIGFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciB3ID0gYVszXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3O1xuXG4gIGlmIChsZW4gPiAwKSB7XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICB9XG5cbiAgb3V0WzBdID0geCAqIGxlbjtcbiAgb3V0WzFdID0geSAqIGxlbjtcbiAgb3V0WzJdID0geiAqIGxlbjtcbiAgb3V0WzNdID0gdyAqIGxlbjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsxXSAqIGJbMV0gKyBhWzJdICogYlsyXSArIGFbM10gKiBiWzNdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjcm9zcy1wcm9kdWN0IG9mIHRocmVlIHZlY3RvcnMgaW4gYSA0LWRpbWVuc2lvbmFsIHNwYWNlXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IHJlc3VsdCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IFUgdGhlIGZpcnN0IHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IFYgdGhlIHNlY29uZCB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBXIHRoZSB0aGlyZCB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWM0fSByZXN1bHRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3Jvc3Mob3V0LCB1LCB2LCB3KSB7XG4gIHZhciBBID0gdlswXSAqIHdbMV0gLSB2WzFdICogd1swXSxcbiAgICAgIEIgPSB2WzBdICogd1syXSAtIHZbMl0gKiB3WzBdLFxuICAgICAgQyA9IHZbMF0gKiB3WzNdIC0gdlszXSAqIHdbMF0sXG4gICAgICBEID0gdlsxXSAqIHdbMl0gLSB2WzJdICogd1sxXSxcbiAgICAgIEUgPSB2WzFdICogd1szXSAtIHZbM10gKiB3WzFdLFxuICAgICAgRiA9IHZbMl0gKiB3WzNdIC0gdlszXSAqIHdbMl07XG4gIHZhciBHID0gdVswXTtcbiAgdmFyIEggPSB1WzFdO1xuICB2YXIgSSA9IHVbMl07XG4gIHZhciBKID0gdVszXTtcbiAgb3V0WzBdID0gSCAqIEYgLSBJICogRSArIEogKiBEO1xuICBvdXRbMV0gPSAtKEcgKiBGKSArIEkgKiBDIC0gSiAqIEI7XG4gIG91dFsyXSA9IEcgKiBFIC0gSCAqIEMgKyBKICogQTtcbiAgb3V0WzNdID0gLShHICogRCkgKyBIICogQiAtIEkgKiBBO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBheCA9IGFbMF07XG4gIHZhciBheSA9IGFbMV07XG4gIHZhciBheiA9IGFbMl07XG4gIHZhciBhdyA9IGFbM107XG4gIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgb3V0WzJdID0gYXogKyB0ICogKGJbMl0gLSBheik7XG4gIG91dFszXSA9IGF3ICsgdCAqIChiWzNdIC0gYXcpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdmVjdG9yIHdpdGggdGhlIGdpdmVuIHNjYWxlXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2NhbGVdIExlbmd0aCBvZiB0aGUgcmVzdWx0aW5nIHZlY3Rvci4gSWYgb21taXR0ZWQsIGEgdW5pdCB2ZWN0b3Igd2lsbCBiZSByZXR1cm5lZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb20ob3V0LCBzY2FsZSkge1xuICBzY2FsZSA9IHNjYWxlIHx8IDEuMDsgLy8gTWFyc2FnbGlhLCBHZW9yZ2UuIENob29zaW5nIGEgUG9pbnQgZnJvbSB0aGUgU3VyZmFjZSBvZiBhXG4gIC8vIFNwaGVyZS4gQW5uLiBNYXRoLiBTdGF0aXN0LiA0MyAoMTk3MiksIG5vLiAyLCA2NDUtLTY0Ni5cbiAgLy8gaHR0cDovL3Byb2plY3RldWNsaWQub3JnL2V1Y2xpZC5hb21zLzExNzc2OTI2NDQ7XG5cbiAgdmFyIHYxLCB2MiwgdjMsIHY0O1xuICB2YXIgczEsIHMyO1xuXG4gIGRvIHtcbiAgICB2MSA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgdjIgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHMxID0gdjEgKiB2MSArIHYyICogdjI7XG4gIH0gd2hpbGUgKHMxID49IDEpO1xuXG4gIGRvIHtcbiAgICB2MyA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgdjQgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHMyID0gdjMgKiB2MyArIHY0ICogdjQ7XG4gIH0gd2hpbGUgKHMyID49IDEpO1xuXG4gIHZhciBkID0gTWF0aC5zcXJ0KCgxIC0gczEpIC8gczIpO1xuICBvdXRbMF0gPSBzY2FsZSAqIHYxO1xuICBvdXRbMV0gPSBzY2FsZSAqIHYyO1xuICBvdXRbMl0gPSBzY2FsZSAqIHYzICogZDtcbiAgb3V0WzNdID0gc2NhbGUgKiB2NCAqIGQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzQgd2l0aCBhIG1hdDQuXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWF0NChvdXQsIGEsIG0pIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICBvdXRbMF0gPSBtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSAqIHc7XG4gIG91dFsxXSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdICogdztcbiAgb3V0WzJdID0gbVsyXSAqIHggKyBtWzZdICogeSArIG1bMTBdICogeiArIG1bMTRdICogdztcbiAgb3V0WzNdID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdICogdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjNCB3aXRoIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgcXVhdGVybmlvbiB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1RdWF0KG91dCwgYSwgcSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdO1xuICB2YXIgcXggPSBxWzBdLFxuICAgICAgcXkgPSBxWzFdLFxuICAgICAgcXogPSBxWzJdLFxuICAgICAgcXcgPSBxWzNdOyAvLyBjYWxjdWxhdGUgcXVhdCAqIHZlY1xuXG4gIHZhciBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTtcbiAgdmFyIGl5ID0gcXcgKiB5ICsgcXogKiB4IC0gcXggKiB6O1xuICB2YXIgaXogPSBxdyAqIHogKyBxeCAqIHkgLSBxeSAqIHg7XG4gIHZhciBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7IC8vIGNhbGN1bGF0ZSByZXN1bHQgKiBpbnZlcnNlIHF1YXRcblxuICBvdXRbMF0gPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5O1xuICBvdXRbMV0gPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6O1xuICBvdXRbMl0gPSBpeiAqIHF3ICsgaXcgKiAtcXogKyBpeCAqIC1xeSAtIGl5ICogLXF4O1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0IHRvIHplcm9cbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB6ZXJvKG91dCkge1xuICBvdXRbMF0gPSAwLjA7XG4gIG91dFsxXSA9IDAuMDtcbiAgb3V0WzJdID0gMC4wO1xuICBvdXRbM10gPSAwLjA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJ2ZWM0KFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiKVwiO1xufVxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgdmVjdG9ycyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgVGhlIGZpcnN0IHZlY3Rvci5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIFRoZSBzZWNvbmQgdmVjdG9yLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl0sXG4gICAgICBhMyA9IGFbM107XG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl0sXG4gICAgICBiMyA9IGJbM107XG4gIHJldHVybiBNYXRoLmFicyhhMCAtIGIwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMCksIE1hdGguYWJzKGIwKSkgJiYgTWF0aC5hYnMoYTEgLSBiMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEpLCBNYXRoLmFicyhiMSkpICYmIE1hdGguYWJzKGEyIC0gYjIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEyKSwgTWF0aC5hYnMoYjIpKSAmJiBNYXRoLmFicyhhMyAtIGIzKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMyksIE1hdGguYWJzKGIzKSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5kaXZpZGV9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRpdiA9IGRpdmlkZTtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LmRpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXN0ID0gZGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5zcXVhcmVkRGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckRpc3QgPSBzcXVhcmVkRGlzdGFuY2U7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWM0cy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWM0LiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjNHMgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmb3JFYWNoID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gNDtcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIHZlY1syXSA9IGFbaSArIDJdO1xuICAgICAgdmVjWzNdID0gYVtpICsgM107XG4gICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgIGFbaV0gPSB2ZWNbMF07XG4gICAgICBhW2kgKyAxXSA9IHZlY1sxXTtcbiAgICAgIGFbaSArIDJdID0gdmVjWzJdO1xuICAgICAgYVtpICsgM10gPSB2ZWNbM107XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KCk7IiwKICAiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG5pbXBvcnQgKiBhcyBtYXQzIGZyb20gXCIuL21hdDMuanNcIjtcbmltcG9ydCAqIGFzIHZlYzMgZnJvbSBcIi4vdmVjMy5qc1wiO1xuaW1wb3J0ICogYXMgdmVjNCBmcm9tIFwiLi92ZWM0LmpzXCI7XG4vKipcbiAqIFF1YXRlcm5pb25cbiAqIEBtb2R1bGUgcXVhdFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBxdWF0XG4gKlxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXQgYSBxdWF0IHRvIHRoZSBpZGVudGl0eSBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KG91dCkge1xuICBvdXRbMF0gPSAwO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXRzIGEgcXVhdCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhbmQgcm90YXRpb24gYXhpcyxcbiAqIHRoZW4gcmV0dXJucyBpdC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBheGlzIHRoZSBheGlzIGFyb3VuZCB3aGljaCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEF4aXNBbmdsZShvdXQsIGF4aXMsIHJhZCkge1xuICByYWQgPSByYWQgKiAwLjU7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgb3V0WzBdID0gcyAqIGF4aXNbMF07XG4gIG91dFsxXSA9IHMgKiBheGlzWzFdO1xuICBvdXRbMl0gPSBzICogYXhpc1syXTtcbiAgb3V0WzNdID0gTWF0aC5jb3MocmFkKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2V0cyB0aGUgcm90YXRpb24gYXhpcyBhbmQgYW5nbGUgZm9yIGEgZ2l2ZW5cbiAqICBxdWF0ZXJuaW9uLiBJZiBhIHF1YXRlcm5pb24gaXMgY3JlYXRlZCB3aXRoXG4gKiAgc2V0QXhpc0FuZ2xlLCB0aGlzIG1ldGhvZCB3aWxsIHJldHVybiB0aGUgc2FtZVxuICogIHZhbHVlcyBhcyBwcm92aWRpZWQgaW4gdGhlIG9yaWdpbmFsIHBhcmFtZXRlciBsaXN0XG4gKiAgT1IgZnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdmFsdWVzLlxuICogRXhhbXBsZTogVGhlIHF1YXRlcm5pb24gZm9ybWVkIGJ5IGF4aXMgWzAsIDAsIDFdIGFuZFxuICogIGFuZ2xlIC05MCBpcyB0aGUgc2FtZSBhcyB0aGUgcXVhdGVybmlvbiBmb3JtZWQgYnlcbiAqICBbMCwgMCwgMV0gYW5kIDI3MC4gVGhpcyBtZXRob2QgZmF2b3JzIHRoZSBsYXR0ZXIuXG4gKiBAcGFyYW0gIHt2ZWMzfSBvdXRfYXhpcyAgVmVjdG9yIHJlY2VpdmluZyB0aGUgYXhpcyBvZiByb3RhdGlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBxICAgICBRdWF0ZXJuaW9uIHRvIGJlIGRlY29tcG9zZWRcbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBvZiB0aGUgcm90YXRpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXhpc0FuZ2xlKG91dF9heGlzLCBxKSB7XG4gIHZhciByYWQgPSBNYXRoLmFjb3MocVszXSkgKiAyLjA7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkIC8gMi4wKTtcblxuICBpZiAocyA+IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICBvdXRfYXhpc1swXSA9IHFbMF0gLyBzO1xuICAgIG91dF9heGlzWzFdID0gcVsxXSAvIHM7XG4gICAgb3V0X2F4aXNbMl0gPSBxWzJdIC8gcztcbiAgfSBlbHNlIHtcbiAgICAvLyBJZiBzIGlzIHplcm8sIHJldHVybiBhbnkgYXhpcyAobm8gcm90YXRpb24gLSBheGlzIGRvZXMgbm90IG1hdHRlcilcbiAgICBvdXRfYXhpc1swXSA9IDE7XG4gICAgb3V0X2F4aXNbMV0gPSAwO1xuICAgIG91dF9heGlzWzJdID0gMDtcbiAgfVxuXG4gIHJldHVybiByYWQ7XG59XG4vKipcbiAqIEdldHMgdGhlIGFuZ3VsYXIgZGlzdGFuY2UgYmV0d2VlbiB0d28gdW5pdCBxdWF0ZXJuaW9uc1xuICpcbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdH0gYSAgICAgT3JpZ2luIHVuaXQgcXVhdGVybmlvblxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBiICAgICBEZXN0aW5hdGlvbiB1bml0IHF1YXRlcm5pb25cbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBiZXR3ZWVuIHRoZSB0d28gcXVhdGVybmlvbnNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW5nbGUoYSwgYikge1xuICB2YXIgZG90cHJvZHVjdCA9IGRvdChhLCBiKTtcbiAgcmV0dXJuIE1hdGguYWNvcygyICogZG90cHJvZHVjdCAqIGRvdHByb2R1Y3QgLSAxKTtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdLFxuICAgICAgYncgPSBiWzNdO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICBvdXRbMV0gPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6O1xuICBvdXRbMl0gPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFggYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHF1YXQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGFuZ2xlIChpbiByYWRpYW5zKSB0byByb3RhdGVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWChvdXQsIGEsIHJhZCkge1xuICByYWQgKj0gMC41O1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYncgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieDtcbiAgb3V0WzFdID0gYXkgKiBidyArIGF6ICogYng7XG4gIG91dFsyXSA9IGF6ICogYncgLSBheSAqIGJ4O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlcyBhIHF1YXRlcm5pb24gYnkgdGhlIGdpdmVuIGFuZ2xlIGFib3V0IHRoZSBZIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBhbmdsZSAoaW4gcmFkaWFucykgdG8gcm90YXRlXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCByYWQpIHtcbiAgcmFkICo9IDAuNTtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ5ID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGJ3ID0gTWF0aC5jb3MocmFkKTtcbiAgb3V0WzBdID0gYXggKiBidyAtIGF6ICogYnk7XG4gIG91dFsxXSA9IGF5ICogYncgKyBhdyAqIGJ5O1xuICBvdXRbMl0gPSBheiAqIGJ3ICsgYXggKiBieTtcbiAgb3V0WzNdID0gYXcgKiBidyAtIGF5ICogYnk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJvdGF0ZXMgYSBxdWF0ZXJuaW9uIGJ5IHRoZSBnaXZlbiBhbmdsZSBhYm91dCB0aGUgWiBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgcXVhdCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVaKG91dCwgYSwgcmFkKSB7XG4gIHJhZCAqPSAwLjU7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieiA9IE1hdGguc2luKHJhZCksXG4gICAgICBidyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGF4ICogYncgKyBheSAqIGJ6O1xuICBvdXRbMV0gPSBheSAqIGJ3IC0gYXggKiBiejtcbiAgb3V0WzJdID0gYXogKiBidyArIGF3ICogYno7XG4gIG91dFszXSA9IGF3ICogYncgLSBheiAqIGJ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBXIGNvbXBvbmVudCBvZiBhIHF1YXQgZnJvbSB0aGUgWCwgWSwgYW5kIFogY29tcG9uZW50cy5cbiAqIEFzc3VtZXMgdGhhdCBxdWF0ZXJuaW9uIGlzIDEgdW5pdCBpbiBsZW5ndGguXG4gKiBBbnkgZXhpc3RpbmcgVyBjb21wb25lbnQgd2lsbCBiZSBpZ25vcmVkLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgVyBjb21wb25lbnQgb2ZcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVyhvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gTWF0aC5zcXJ0KE1hdGguYWJzKDEuMCAtIHggKiB4IC0geSAqIHkgLSB6ICogeikpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mIGEgdW5pdCBxdWF0ZXJuaW9uLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cChvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICB2YXIgciA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB2YXIgZXQgPSBNYXRoLmV4cCh3KTtcbiAgdmFyIHMgPSByID4gMCA/IGV0ICogTWF0aC5zaW4ocikgLyByIDogMDtcbiAgb3V0WzBdID0geCAqIHM7XG4gIG91dFsxXSA9IHkgKiBzO1xuICBvdXRbMl0gPSB6ICogcztcbiAgb3V0WzNdID0gZXQgKiBNYXRoLmNvcyhyKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBuYXR1cmFsIGxvZ2FyaXRobSBvZiBhIHVuaXQgcXVhdGVybmlvbi5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsbihvdXQsIGEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXSxcbiAgICAgIHcgPSBhWzNdO1xuICB2YXIgciA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICB2YXIgdCA9IHIgPiAwID8gTWF0aC5hdGFuMihyLCB3KSAvIHIgOiAwO1xuICBvdXRbMF0gPSB4ICogdDtcbiAgb3V0WzFdID0geSAqIHQ7XG4gIG91dFsyXSA9IHogKiB0O1xuICBvdXRbM10gPSAwLjUgKiBNYXRoLmxvZyh4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdyk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgc2NhbGFyIHBvd2VyIG9mIGEgdW5pdCBxdWF0ZXJuaW9uLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgdGhlIGV4cG9uZW50aWFsIG9mXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHF1YXRlcm5pb24gYnlcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcG93KG91dCwgYSwgYikge1xuICBsbihvdXQsIGEpO1xuICBzY2FsZShvdXQsIG91dCwgYik7XG4gIGV4cChvdXQsIG91dCk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2xlcnAob3V0LCBhLCBiLCB0KSB7XG4gIC8vIGJlbmNobWFya3M6XG4gIC8vICAgIGh0dHA6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tc2xlcnAtaW1wbGVtZW50YXRpb25zXG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl0sXG4gICAgICBidyA9IGJbM107XG4gIHZhciBvbWVnYSwgY29zb20sIHNpbm9tLCBzY2FsZTAsIHNjYWxlMTsgLy8gY2FsYyBjb3NpbmVcblxuICBjb3NvbSA9IGF4ICogYnggKyBheSAqIGJ5ICsgYXogKiBieiArIGF3ICogYnc7IC8vIGFkanVzdCBzaWducyAoaWYgbmVjZXNzYXJ5KVxuXG4gIGlmIChjb3NvbSA8IDAuMCkge1xuICAgIGNvc29tID0gLWNvc29tO1xuICAgIGJ4ID0gLWJ4O1xuICAgIGJ5ID0gLWJ5O1xuICAgIGJ6ID0gLWJ6O1xuICAgIGJ3ID0gLWJ3O1xuICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHNcblxuXG4gIGlmICgxLjAgLSBjb3NvbSA+IGdsTWF0cml4LkVQU0lMT04pIHtcbiAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICBvbWVnYSA9IE1hdGguYWNvcyhjb3NvbSk7XG4gICAgc2lub20gPSBNYXRoLnNpbihvbWVnYSk7XG4gICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbm9tO1xuICB9IGVsc2Uge1xuICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAvLyAgLi4uIHNvIHdlIGNhbiBkbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uXG4gICAgc2NhbGUwID0gMS4wIC0gdDtcbiAgICBzY2FsZTEgPSB0O1xuICB9IC8vIGNhbGN1bGF0ZSBmaW5hbCB2YWx1ZXNcblxuXG4gIG91dFswXSA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gIG91dFsxXSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7XG4gIG91dFsyXSA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7XG4gIG91dFszXSA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB1bml0IHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCkge1xuICAvLyBJbXBsZW1lbnRhdGlvbiBvZiBodHRwOi8vcGxhbm5pbmcuY3MudWl1Yy5lZHUvbm9kZTE5OC5odG1sXG4gIC8vIFRPRE86IENhbGxpbmcgcmFuZG9tIDMgdGltZXMgaXMgcHJvYmFibHkgbm90IHRoZSBmYXN0ZXN0IHNvbHV0aW9uXG4gIHZhciB1MSA9IGdsTWF0cml4LlJBTkRPTSgpO1xuICB2YXIgdTIgPSBnbE1hdHJpeC5SQU5ET00oKTtcbiAgdmFyIHUzID0gZ2xNYXRyaXguUkFORE9NKCk7XG4gIHZhciBzcXJ0MU1pbnVzVTEgPSBNYXRoLnNxcnQoMSAtIHUxKTtcbiAgdmFyIHNxcnRVMSA9IE1hdGguc3FydCh1MSk7XG4gIG91dFswXSA9IHNxcnQxTWludXNVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsxXSA9IHNxcnQxTWludXNVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsyXSA9IHNxcnRVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIG91dFszXSA9IHNxcnRVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGludmVyc2Ugb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBpbnZlcnNlIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGRvdCA9IGEwICogYTAgKyBhMSAqIGExICsgYTIgKiBhMiArIGEzICogYTM7XG4gIHZhciBpbnZEb3QgPSBkb3QgPyAxLjAgLyBkb3QgOiAwOyAvLyBUT0RPOiBXb3VsZCBiZSBmYXN0ZXIgdG8gcmV0dXJuIFswLDAsMCwwXSBpbW1lZGlhdGVseSBpZiBkb3QgPT0gMFxuXG4gIG91dFswXSA9IC1hMCAqIGludkRvdDtcbiAgb3V0WzFdID0gLWExICogaW52RG90O1xuICBvdXRbMl0gPSAtYTIgKiBpbnZEb3Q7XG4gIG91dFszXSA9IGEzICogaW52RG90O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjb25qdWdhdGUgb2YgYSBxdWF0XG4gKiBJZiB0aGUgcXVhdGVybmlvbiBpcyBub3JtYWxpemVkLCB0aGlzIGZ1bmN0aW9uIGlzIGZhc3RlciB0aGFuIHF1YXQuaW52ZXJzZSBhbmQgcHJvZHVjZXMgdGhlIHNhbWUgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgY29uanVnYXRlIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmp1Z2F0ZShvdXQsIGEpIHtcbiAgb3V0WzBdID0gLWFbMF07XG4gIG91dFsxXSA9IC1hWzFdO1xuICBvdXRbMl0gPSAtYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHF1YXRlcm5pb24gZnJvbSB0aGUgZ2l2ZW4gM3gzIHJvdGF0aW9uIG1hdHJpeC5cbiAqXG4gKiBOT1RFOiBUaGUgcmVzdWx0YW50IHF1YXRlcm5pb24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIHlvdSBzaG91bGQgYmUgc3VyZVxuICogdG8gcmVub3JtYWxpemUgdGhlIHF1YXRlcm5pb24geW91cnNlbGYgd2hlcmUgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gcm90YXRpb24gbWF0cml4XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDMob3V0LCBtKSB7XG4gIC8vIEFsZ29yaXRobSBpbiBLZW4gU2hvZW1ha2UncyBhcnRpY2xlIGluIDE5ODcgU0lHR1JBUEggY291cnNlIG5vdGVzXG4gIC8vIGFydGljbGUgXCJRdWF0ZXJuaW9uIENhbGN1bHVzIGFuZCBGYXN0IEFuaW1hdGlvblwiLlxuICB2YXIgZlRyYWNlID0gbVswXSArIG1bNF0gKyBtWzhdO1xuICB2YXIgZlJvb3Q7XG5cbiAgaWYgKGZUcmFjZSA+IDAuMCkge1xuICAgIC8vIHx3fCA+IDEvMiwgbWF5IGFzIHdlbGwgY2hvb3NlIHcgPiAxLzJcbiAgICBmUm9vdCA9IE1hdGguc3FydChmVHJhY2UgKyAxLjApOyAvLyAyd1xuXG4gICAgb3V0WzNdID0gMC41ICogZlJvb3Q7XG4gICAgZlJvb3QgPSAwLjUgLyBmUm9vdDsgLy8gMS8oNHcpXG5cbiAgICBvdXRbMF0gPSAobVs1XSAtIG1bN10pICogZlJvb3Q7XG4gICAgb3V0WzFdID0gKG1bNl0gLSBtWzJdKSAqIGZSb290O1xuICAgIG91dFsyXSA9IChtWzFdIC0gbVszXSkgKiBmUm9vdDtcbiAgfSBlbHNlIHtcbiAgICAvLyB8d3wgPD0gMS8yXG4gICAgdmFyIGkgPSAwO1xuICAgIGlmIChtWzRdID4gbVswXSkgaSA9IDE7XG4gICAgaWYgKG1bOF0gPiBtW2kgKiAzICsgaV0pIGkgPSAyO1xuICAgIHZhciBqID0gKGkgKyAxKSAlIDM7XG4gICAgdmFyIGsgPSAoaSArIDIpICUgMztcbiAgICBmUm9vdCA9IE1hdGguc3FydChtW2kgKiAzICsgaV0gLSBtW2ogKiAzICsgal0gLSBtW2sgKiAzICsga10gKyAxLjApO1xuICAgIG91dFtpXSA9IDAuNSAqIGZSb290O1xuICAgIGZSb290ID0gMC41IC8gZlJvb3Q7XG4gICAgb3V0WzNdID0gKG1baiAqIDMgKyBrXSAtIG1bayAqIDMgKyBqXSkgKiBmUm9vdDtcbiAgICBvdXRbal0gPSAobVtqICogMyArIGldICsgbVtpICogMyArIGpdKSAqIGZSb290O1xuICAgIG91dFtrXSA9IChtW2sgKiAzICsgaV0gKyBtW2kgKiAzICsga10pICogZlJvb3Q7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcXVhdGVybmlvbiBmcm9tIHRoZSBnaXZlbiBldWxlciBhbmdsZSB4LCB5LCB6LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHt4fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFggYXhpcyBpbiBkZWdyZWVzLlxuICogQHBhcmFtIHt5fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFkgYXhpcyBpbiBkZWdyZWVzLlxuICogQHBhcmFtIHt6fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFogYXhpcyBpbiBkZWdyZWVzLlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FdWxlcihvdXQsIHgsIHksIHopIHtcbiAgdmFyIGhhbGZUb1JhZCA9IDAuNSAqIE1hdGguUEkgLyAxODAuMDtcbiAgeCAqPSBoYWxmVG9SYWQ7XG4gIHkgKj0gaGFsZlRvUmFkO1xuICB6ICo9IGhhbGZUb1JhZDtcbiAgdmFyIHN4ID0gTWF0aC5zaW4oeCk7XG4gIHZhciBjeCA9IE1hdGguY29zKHgpO1xuICB2YXIgc3kgPSBNYXRoLnNpbih5KTtcbiAgdmFyIGN5ID0gTWF0aC5jb3MoeSk7XG4gIHZhciBzeiA9IE1hdGguc2luKHopO1xuICB2YXIgY3ogPSBNYXRoLmNvcyh6KTtcbiAgb3V0WzBdID0gc3ggKiBjeSAqIGN6IC0gY3ggKiBzeSAqIHN6O1xuICBvdXRbMV0gPSBjeCAqIHN5ICogY3ogKyBzeCAqIGN5ICogc3o7XG4gIG91dFsyXSA9IGN4ICogY3kgKiBzeiAtIHN4ICogc3kgKiBjejtcbiAgb3V0WzNdID0gY3ggKiBjeSAqIGN6ICsgc3ggKiBzeSAqIHN6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgcXVhdGVuaW9uXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwicXVhdChcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiLCBcIiArIGFbM10gKyBcIilcIjtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXRlcm5pb24gdG8gY2xvbmVcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGNsb25lID0gdmVjNC5jbG9uZTtcbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBmcm9tVmFsdWVzID0gdmVjNC5mcm9tVmFsdWVzO1xuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgcXVhdCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgc291cmNlIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgY29weSA9IHZlYzQuY29weTtcbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgcXVhdCB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzZXQgPSB2ZWM0LnNldDtcbi8qKlxuICogQWRkcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGFkZCA9IHZlYzQuYWRkO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBTY2FsZXMgYSBxdWF0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzY2FsZSA9IHZlYzQuc2NhbGU7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGRvdCA9IHZlYzQuZG90O1xuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBsZXJwID0gdmVjNC5sZXJwO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cblxuZXhwb3J0IHZhciBsZW5ndGggPSB2ZWM0Lmxlbmd0aDtcbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Lmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHNxdWFyZWRMZW5ndGggPSB2ZWM0LnNxdWFyZWRMZW5ndGg7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdC5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJMZW4gPSBzcXVhcmVkTGVuZ3RoO1xuLyoqXG4gKiBOb3JtYWxpemUgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0ZXJuaW9uIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBub3JtYWxpemUgPSB2ZWM0Lm5vcm1hbGl6ZTtcbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcXVhdGVybmlvbnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIFRoZSBmaXJzdCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cblxuZXhwb3J0IHZhciBleGFjdEVxdWFscyA9IHZlYzQuZXhhY3RFcXVhbHM7XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHF1YXRlcm5pb25zIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuXG5leHBvcnQgdmFyIGVxdWFscyA9IHZlYzQuZXF1YWxzO1xuLyoqXG4gKiBTZXRzIGEgcXVhdGVybmlvbiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gb25lXG4gKiB2ZWN0b3IgdG8gYW5vdGhlci5cbiAqXG4gKiBCb3RoIHZlY3RvcnMgYXJlIGFzc3VtZWQgdG8gYmUgdW5pdCBsZW5ndGguXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGluaXRpYWwgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgZGVzdGluYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZXhwb3J0IHZhciByb3RhdGlvblRvID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdG1wdmVjMyA9IHZlYzMuY3JlYXRlKCk7XG4gIHZhciB4VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMSwgMCwgMCk7XG4gIHZhciB5VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgdmFyIGRvdCA9IHZlYzMuZG90KGEsIGIpO1xuXG4gICAgaWYgKGRvdCA8IC0wLjk5OTk5OSkge1xuICAgICAgdmVjMy5jcm9zcyh0bXB2ZWMzLCB4VW5pdFZlYzMsIGEpO1xuICAgICAgaWYgKHZlYzMubGVuKHRtcHZlYzMpIDwgMC4wMDAwMDEpIHZlYzMuY3Jvc3ModG1wdmVjMywgeVVuaXRWZWMzLCBhKTtcbiAgICAgIHZlYzMubm9ybWFsaXplKHRtcHZlYzMsIHRtcHZlYzMpO1xuICAgICAgc2V0QXhpc0FuZ2xlKG91dCwgdG1wdmVjMywgTWF0aC5QSSk7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSBpZiAoZG90ID4gMC45OTk5OTkpIHtcbiAgICAgIG91dFswXSA9IDA7XG4gICAgICBvdXRbMV0gPSAwO1xuICAgICAgb3V0WzJdID0gMDtcbiAgICAgIG91dFszXSA9IDE7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSB7XG4gICAgICB2ZWMzLmNyb3NzKHRtcHZlYzMsIGEsIGIpO1xuICAgICAgb3V0WzBdID0gdG1wdmVjM1swXTtcbiAgICAgIG91dFsxXSA9IHRtcHZlYzNbMV07XG4gICAgICBvdXRbMl0gPSB0bXB2ZWMzWzJdO1xuICAgICAgb3V0WzNdID0gMSArIGRvdDtcbiAgICAgIHJldHVybiBub3JtYWxpemUob3V0LCBvdXQpO1xuICAgIH1cbiAgfTtcbn0oKTtcbi8qKlxuICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gd2l0aCB0d28gY29udHJvbCBwb2ludHNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgdmFyIHNxbGVycCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRlbXAxID0gY3JlYXRlKCk7XG4gIHZhciB0ZW1wMiA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgYSwgYiwgYywgZCwgdCkge1xuICAgIHNsZXJwKHRlbXAxLCBhLCBkLCB0KTtcbiAgICBzbGVycCh0ZW1wMiwgYiwgYywgdCk7XG4gICAgc2xlcnAob3V0LCB0ZW1wMSwgdGVtcDIsIDIgKiB0ICogKDEgLSB0KSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfTtcbn0oKTtcbi8qKlxuICogU2V0cyB0aGUgc3BlY2lmaWVkIHF1YXRlcm5pb24gd2l0aCB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW5cbiAqIGF4ZXMuIEVhY2ggYXhpcyBpcyBhIHZlYzMgYW5kIGlzIGV4cGVjdGVkIHRvIGJlIHVuaXQgbGVuZ3RoIGFuZFxuICogcGVycGVuZGljdWxhciB0byBhbGwgb3RoZXIgc3BlY2lmaWVkIGF4ZXMuXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHZpZXcgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSB2aWV3aW5nIGRpcmVjdGlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHJpZ2h0IHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInJpZ2h0XCIgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdXAgICAgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGxvY2FsIFwidXBcIiBkaXJlY3Rpb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG5leHBvcnQgdmFyIHNldEF4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBtYXRyID0gbWF0My5jcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIHZpZXcsIHJpZ2h0LCB1cCkge1xuICAgIG1hdHJbMF0gPSByaWdodFswXTtcbiAgICBtYXRyWzNdID0gcmlnaHRbMV07XG4gICAgbWF0cls2XSA9IHJpZ2h0WzJdO1xuICAgIG1hdHJbMV0gPSB1cFswXTtcbiAgICBtYXRyWzRdID0gdXBbMV07XG4gICAgbWF0cls3XSA9IHVwWzJdO1xuICAgIG1hdHJbMl0gPSAtdmlld1swXTtcbiAgICBtYXRyWzVdID0gLXZpZXdbMV07XG4gICAgbWF0cls4XSA9IC12aWV3WzJdO1xuICAgIHJldHVybiBub3JtYWxpemUob3V0LCBmcm9tTWF0MyhvdXQsIG1hdHIpKTtcbiAgfTtcbn0oKTsiLAogICJpbXBvcnQgKiBhcyBnbE1hdHJpeCBmcm9tIFwiLi9jb21tb24uanNcIjtcbi8qKlxuICogMiBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjMlxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjMlxuICpcbiAqIEByZXR1cm5zIHt2ZWMyfSBhIG5ldyAyRCB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMik7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWMyIGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7dmVjMn0gYSBuZXcgMkQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDIpO1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzIgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjMn0gYSBuZXcgMkQgdmVjdG9yXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMik7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSB2ZWMyIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29weShvdXQsIGEpIHtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMiB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCB4LCB5KSB7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIERpdmlkZXMgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpdmlkZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAvIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLyBiWzFdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmNlaWwgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMyXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHZlY3RvciB0byBjZWlsXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNlaWwob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguY2VpbChhWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5jZWlsKGFbMV0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBNYXRoLmZsb29yIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMlxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB2ZWN0b3IgdG8gZmxvb3JcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZmxvb3Iob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguZmxvb3IoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguZmxvb3IoYVsxXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1pbmltdW0gb2YgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1pbihvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gTWF0aC5taW4oYVswXSwgYlswXSk7XG4gIG91dFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXgob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTWF0aC5yb3VuZCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIHJvdW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLnJvdW5kKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLnJvdW5kKGFbMV0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTY2FsZXMgYSB2ZWMyIGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWMyJ3MgYWZ0ZXIgc2NhbGluZyB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIHRoZSBhbW91bnQgdG8gc2NhbGUgYiBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlQW5kQWRkKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF0gKiBzY2FsZTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZShhLCBiKSB7XG4gIHZhciB4ID0gYlswXSAtIGFbMF0sXG4gICAgICB5ID0gYlsxXSAtIGFbMV07XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHkpO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdLFxuICAgICAgeSA9IGJbMV0gLSBhWzFdO1xuICByZXR1cm4geCAqIHggKyB5ICogeTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjMlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSk7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgdmVjMlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZExlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdO1xuICByZXR1cm4geCAqIHggKyB5ICogeTtcbn1cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBuZWdhdGUob3V0LCBhKSB7XG4gIG91dFswXSA9IC1hWzBdO1xuICBvdXRbMV0gPSAtYVsxXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgaW52ZXJzZSBvZiB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIGludmVydFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnNlKG91dCwgYSkge1xuICBvdXRbMF0gPSAxLjAgLyBhWzBdO1xuICBvdXRbMV0gPSAxLjAgLyBhWzFdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBOb3JtYWxpemUgYSB2ZWMyXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHZlY3RvciB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHk7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICAvL1RPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlP1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IGFbMF0gKiBsZW47XG4gIG91dFsxXSA9IGFbMV0gKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRvdChhLCBiKSB7XG4gIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0d28gdmVjMidzXG4gKiBOb3RlIHRoYXQgdGhlIGNyb3NzIHByb2R1Y3QgbXVzdCBieSBkZWZpbml0aW9uIHByb2R1Y2UgYSAzRCB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcm9zcyhvdXQsIGEsIGIpIHtcbiAgdmFyIHogPSBhWzBdICogYlsxXSAtIGFbMV0gKiBiWzBdO1xuICBvdXRbMF0gPSBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSB6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV07XG4gIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgcmFuZG9tIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBzY2FsZVxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0gW3NjYWxlXSBMZW5ndGggb2YgdGhlIHJlc3VsdGluZyB2ZWN0b3IuIElmIG9tbWl0dGVkLCBhIHVuaXQgdmVjdG9yIHdpbGwgYmUgcmV0dXJuZWRcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCwgc2NhbGUpIHtcbiAgc2NhbGUgPSBzY2FsZSB8fCAxLjA7XG4gIHZhciByID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyLjAgKiBNYXRoLlBJO1xuICBvdXRbMF0gPSBNYXRoLmNvcyhyKSAqIHNjYWxlO1xuICBvdXRbMV0gPSBNYXRoLnNpbihyKSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMyIHdpdGggYSBtYXQyXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0Mn0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtTWF0MihvdXQsIGEsIG0pIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV07XG4gIG91dFswXSA9IG1bMF0gKiB4ICsgbVsyXSAqIHk7XG4gIG91dFsxXSA9IG1bMV0gKiB4ICsgbVszXSAqIHk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzIgd2l0aCBhIG1hdDJkXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0MmR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDJkKG91dCwgYSwgbSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXTtcbiAgb3V0WzBdID0gbVswXSAqIHggKyBtWzJdICogeSArIG1bNF07XG4gIG91dFsxXSA9IG1bMV0gKiB4ICsgbVszXSAqIHkgKyBtWzVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMyIHdpdGggYSBtYXQzXG4gKiAzcmQgdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcxJ1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDMob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdO1xuICBvdXRbMF0gPSBtWzBdICogeCArIG1bM10gKiB5ICsgbVs2XTtcbiAgb3V0WzFdID0gbVsxXSAqIHggKyBtWzRdICogeSArIG1bN107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzIgd2l0aCBhIG1hdDRcbiAqIDNyZCB2ZWN0b3IgY29tcG9uZW50IGlzIGltcGxpY2l0bHkgJzAnXG4gKiA0dGggdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcxJ1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDQob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICBvdXRbMF0gPSBtWzBdICogeCArIG1bNF0gKiB5ICsgbVsxMl07XG4gIG91dFsxXSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzEzXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUm90YXRlIGEgMkQgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIFRoZSB2ZWMyIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGIgVGhlIG9yaWdpbiBvZiB0aGUgcm90YXRpb25cbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKG91dCwgYSwgYiwgcmFkKSB7XG4gIC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cbiAgdmFyIHAwID0gYVswXSAtIGJbMF0sXG4gICAgICBwMSA9IGFbMV0gLSBiWzFdLFxuICAgICAgc2luQyA9IE1hdGguc2luKHJhZCksXG4gICAgICBjb3NDID0gTWF0aC5jb3MocmFkKTsgLy9wZXJmb3JtIHJvdGF0aW9uIGFuZCB0cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuXG4gIG91dFswXSA9IHAwICogY29zQyAtIHAxICogc2luQyArIGJbMF07XG4gIG91dFsxXSA9IHAwICogc2luQyArIHAxICogY29zQyArIGJbMV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEdldCB0aGUgYW5nbGUgYmV0d2VlbiB0d28gMkQgdmVjdG9yc1xuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgVGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBiIFRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gVGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYW5nbGUoYSwgYikge1xuICB2YXIgeDEgPSBhWzBdLFxuICAgICAgeTEgPSBhWzFdLFxuICAgICAgeDIgPSBiWzBdLFxuICAgICAgeTIgPSBiWzFdLFxuICAgICAgLy8gbWFnIGlzIHRoZSBwcm9kdWN0IG9mIHRoZSBtYWduaXR1ZGVzIG9mIGEgYW5kIGJcbiAgbWFnID0gTWF0aC5zcXJ0KHgxICogeDEgKyB5MSAqIHkxKSAqIE1hdGguc3FydCh4MiAqIHgyICsgeTIgKiB5MiksXG4gICAgICAvLyBtYWcgJiYuLiBzaG9ydCBjaXJjdWl0cyBpZiBtYWcgPT0gMFxuICBjb3NpbmUgPSBtYWcgJiYgKHgxICogeDIgKyB5MSAqIHkyKSAvIG1hZzsgLy8gTWF0aC5taW4oTWF0aC5tYXgoY29zaW5lLCAtMSksIDEpIGNsYW1wcyB0aGUgY29zaW5lIGJldHdlZW4gLTEgYW5kIDFcblxuICByZXR1cm4gTWF0aC5hY29zKE1hdGgubWluKE1hdGgubWF4KGNvc2luZSwgLTEpLCAxKSk7XG59XG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzIgdG8gemVyb1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHplcm8ob3V0KSB7XG4gIG91dFswXSA9IDAuMDtcbiAgb3V0WzFdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdmVjdG9yXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IGEgdmVjdG9yIHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwidmVjMihcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIpXCI7XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgZXhhY3RseSBoYXZlIHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleGFjdEVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV07XG59XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSBhIFRoZSBmaXJzdCB2ZWN0b3IuXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjMn0gYiBUaGUgc2Vjb25kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKTtcbn1cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMyLmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIuc3VidHJhY3R9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIHN1YiA9IHN1YnRyYWN0O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIuZGl2aWRlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBkaXYgPSBkaXZpZGU7XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMi5kaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgZGlzdCA9IGRpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIuc3F1YXJlZERpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cblxuZXhwb3J0IHZhciBzcXJEaXN0ID0gc3F1YXJlZERpc3RhbmNlO1xuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5cbmV4cG9ydCB2YXIgc3FyTGVuID0gc3F1YXJlZExlbmd0aDtcbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzJzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzIuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWMycyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG5leHBvcnQgdmFyIGZvckVhY2ggPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB2ZWMgPSBjcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSAyO1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KCk7IiwKICAiaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBjb25zdCByYWQyRGVnID0gKHJhZDogbnVtYmVyKSA9PiAocmFkIC8gTWF0aC5QSSkgKiAxODA7XG5leHBvcnQgY29uc3QgZGVnMlJhZCA9IChkZWc6IG51bWJlcikgPT4gKGRlZyAqIE1hdGguUEkpIC8gMTgwO1xuXG5leHBvcnQgY29uc3QgZ2V0RXVsZXIgPSAodmVjdG9yMzogZ2xtLlJlYWRvbmx5VmVjMyk6IFtudW1iZXIsIG51bWJlcl0gPT4ge1xuICBjb25zdCB0aGV0YSA9IE1hdGguYXRhbjIodmVjdG9yM1sxXSwgdmVjdG9yM1swXSk7XG4gIGNvbnN0IG1hZ25pdHVkZSA9IGdsbS52ZWMyLmxlbmd0aChbdmVjdG9yM1swXSwgdmVjdG9yM1sxXV0pO1xuICBjb25zdCBwaGkgPSBNYXRoLmF0YW4yKHZlY3RvcjNbMl0sIG1hZ25pdHVkZSk7XG4gIHJldHVybiBbdGhldGEsIHBoaV07XG59O1xuIiwKICAiaW1wb3J0IHtcbiAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLFxuICBHbG9iYWxNb3VzZU1hbmFnZXIsXG4gIEdsb2JhbFRvdWNoTWFuYWdlclxufSBmcm9tICcuLi9icm93c2VyJztcblxuaW1wb3J0IHsgZGVnMlJhZCB9IGZyb20gJy4uL21hdGgvYW5nbGVzJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmNvbnN0IEFsbEF4aXNlcyA9IHtcbiAgWDogMCxcbiAgWTogMSxcbiAgWjogMlxufTtcbnR5cGUgQXhpc1R5cGUgPSBrZXlvZiB0eXBlb2YgQWxsQXhpc2VzO1xudHlwZSBDb29yZGluYXRlcyA9IFtBeGlzVHlwZSwgQXhpc1R5cGUsIEF4aXNUeXBlXTtcblxuaW50ZXJmYWNlIElGcmVlRmx5Q29udHJvbGxlckRlZiB7XG4gIHBvc2l0aW9uOiBnbG0udmVjMztcbiAgY29vcmRpbmF0ZXM/OiBDb29yZGluYXRlcztcbiAgdGhldGE6IG51bWJlcjtcbiAgcGhpOiBudW1iZXI7XG4gIG1vdXNlU2Vuc2liaWxpdHk6IG51bWJlcjtcbiAga2V5Ym9hcmRTZW5zaWJpbGl0eTogbnVtYmVyO1xuICB0b3VjaFNlbnNpYmlsaXR5OiBudW1iZXI7XG4gIG1vdmluZ1NwZWVkOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBGcmVlRmx5Q29udHJvbGxlciB7XG4gIHByaXZhdGUgX2lzQWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX3RoZXRhOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9waGk6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBfbW91c2VTZW5zaWJpbGl0eTogbnVtYmVyO1xuICBwcml2YXRlIF9rZXlib2FyZFNlbnNpYmlsaXR5OiBudW1iZXI7XG4gIHByaXZhdGUgX3RvdWNoU2Vuc2liaWxpdHk6IG51bWJlcjtcbiAgcHJpdmF0ZSBfbW92aW5nU3BlZWQ6IG51bWJlcjtcblxuICBwcml2YXRlIF90b3VjaFdhc0FjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF90b3VjaFN0YXJ0VGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfdG91Y2hNb3ZlRm9yd2FyZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX2F4aXNJbmRpY2VzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG5cbiAgcHJpdmF0ZSBfcG9zaXRpb24gPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICBwcml2YXRlIF90YXJnZXQgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICBwcml2YXRlIF9mb3J3YXJkQXhpcyA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoMSwgMCwgMCk7XG4gIHByaXZhdGUgX2xlZnRBeGlzID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygwLCAwLCAxKTtcbiAgcHJpdmF0ZSBfdXBBeGlzID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygwLCAxLCAwKTtcblxuICBwcml2YXRlIF9tb3ZlX2ZvcndhcmRBeGlzID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygxLCAwLCAwKTtcbiAgcHJpdmF0ZSBfbW92ZV9sZWZ0QXhpcyA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoMCwgMCwgMSk7XG4gIHByaXZhdGUgX21vdmVfdXBBeGlzID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygwLCAxLCAwKTtcblxuICBjb25zdHJ1Y3RvcihkZWY6IElGcmVlRmx5Q29udHJvbGxlckRlZikge1xuICAgIHRoaXMuX21vdXNlU2Vuc2liaWxpdHkgPSBkZWYubW91c2VTZW5zaWJpbGl0eTtcbiAgICB0aGlzLl9rZXlib2FyZFNlbnNpYmlsaXR5ID0gZGVmLmtleWJvYXJkU2Vuc2liaWxpdHk7XG4gICAgdGhpcy5fdG91Y2hTZW5zaWJpbGl0eSA9IGRlZi50b3VjaFNlbnNpYmlsaXR5O1xuICAgIHRoaXMuX21vdmluZ1NwZWVkID0gZGVmLm1vdmluZ1NwZWVkO1xuICAgIGdsbS52ZWMzLmNvcHkodGhpcy5fcG9zaXRpb24sIGRlZi5wb3NpdGlvbik7XG5cbiAgICB0aGlzLl9heGlzSW5kaWNlcyA9IFtcbiAgICAgIGRlZi5jb29yZGluYXRlcyA/IEFsbEF4aXNlc1tkZWYuY29vcmRpbmF0ZXNbMF1dIDogQWxsQXhpc2VzLlgsXG4gICAgICBkZWYuY29vcmRpbmF0ZXMgPyBBbGxBeGlzZXNbZGVmLmNvb3JkaW5hdGVzWzFdXSA6IEFsbEF4aXNlcy5ZLFxuICAgICAgZGVmLmNvb3JkaW5hdGVzID8gQWxsQXhpc2VzW2RlZi5jb29yZGluYXRlc1syXV0gOiBBbGxBeGlzZXMuWlxuICAgIF07XG5cbiAgICB0aGlzLl90aGV0YSA9IGRlZi50aGV0YTtcbiAgICB0aGlzLl9waGkgPSBkZWYucGhpO1xuICB9XG5cbiAgaXNBY3RpdmF0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzQWN0aXZhdGVkO1xuICB9XG5cbiAgYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5faXNBY3RpdmF0ZWQgPSB0cnVlO1xuXG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdaJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdXJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdTJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdBJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdRJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdEJyk7XG5cbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIucHJldmVudERlZmF1bHQoJ1NoaWZ0Jyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdDJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdTcGFjZScpO1xuXG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdBcnJvd1VwJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLnByZXZlbnREZWZhdWx0KCdBcnJvd0Rvd24nKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIucHJldmVudERlZmF1bHQoJ0Fycm93TGVmdCcpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5wcmV2ZW50RGVmYXVsdCgnQXJyb3dSaWdodCcpO1xuICB9XG5cbiAgZGVhY3RpdmF0ZSgpIHtcbiAgICB0aGlzLl9pc0FjdGl2YXRlZCA9IGZhbHNlO1xuXG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmVuYWJsZURlZmF1bHQoJ1onKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnVycpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5lbmFibGVEZWZhdWx0KCdTJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmVuYWJsZURlZmF1bHQoJ0EnKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnUScpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5lbmFibGVEZWZhdWx0KCdEJyk7XG5cbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnU2hpZnQnKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnQycpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5lbmFibGVEZWZhdWx0KCdTcGFjZScpO1xuXG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmVuYWJsZURlZmF1bHQoJ0Fycm93VXAnKTtcbiAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuZW5hYmxlRGVmYXVsdCgnQXJyb3dEb3duJyk7XG4gICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmVuYWJsZURlZmF1bHQoJ0Fycm93TGVmdCcpO1xuICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5lbmFibGVEZWZhdWx0KCdBcnJvd1JpZ2h0Jyk7XG4gIH1cblxuICBpc0ludGVyYWN0ZWRXaXRoKCkge1xuICAgIHJldHVybiAoXG4gICAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdaJywgJ1cnLCAnUycsICdBJywgJ1EnLCAnRCcpIHx8XG4gICAgICBHbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdTaGlmdCcsICdDJywgJ1NwYWNlJykgfHxcbiAgICAgIEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoXG4gICAgICAgICdBcnJvd1VwJyxcbiAgICAgICAgJ0Fycm93RG93bicsXG4gICAgICAgICdBcnJvd0xlZnQnLFxuICAgICAgICAnQXJyb3dSaWdodCdcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgdXBkYXRlKGRlbHRhTXNUaW1lOiBudW1iZXIsIGZwc0NvbnRyb2xzOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBsZXQgbW92ZUZvcndhcmQgPSBmYWxzZTtcbiAgICBsZXQgbW92ZUJhY2t3YXJkID0gZmFsc2U7XG4gICAgbGV0IHN0cmFmZUxlZnQgPSBmYWxzZTtcbiAgICBsZXQgc3RyYWZlUmlnaHQgPSBmYWxzZTtcbiAgICBsZXQgaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgbGV0IGlzRGl2aW5nID0gZmFsc2U7XG4gICAgbGV0IGlzUmlzaW5nID0gZmFsc2U7XG4gICAgbGV0IGxvb2tEZWx0YVggPSAwO1xuICAgIGxldCBsb29rRGVsdGFZID0gMDtcblxuICAgIC8vXG4gICAgLy8gbW91c2VcbiAgICAvL1xuXG4gICAge1xuICAgICAgY29uc3QgZGVsdGFYID0gR2xvYmFsTW91c2VNYW5hZ2VyLmRlbHRhWCgpICogdGhpcy5fbW91c2VTZW5zaWJpbGl0eTtcbiAgICAgIGNvbnN0IGRlbHRhWSA9IEdsb2JhbE1vdXNlTWFuYWdlci5kZWx0YVkoKSAqIHRoaXMuX21vdXNlU2Vuc2liaWxpdHk7XG5cbiAgICAgIGxvb2tEZWx0YVggLT0gZGVnMlJhZChkZWx0YVgpICogZGVsdGFNc1RpbWU7XG4gICAgICBsb29rRGVsdGFZIC09IGRlZzJSYWQoZGVsdGFZKSAqIGRlbHRhTXNUaW1lO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gbW91c2VcbiAgICAvL1xuXG4gICAgLy9cbiAgICAvLyB0b3VjaFxuICAgIC8vXG5cbiAgICBjb25zdCBpc1RvdWNoZWQgPSBHbG9iYWxUb3VjaE1hbmFnZXIuZ2V0VG91Y2hEYXRhKCkubGVuZ3RoID4gMDtcblxuICAgIGlmIChpc1RvdWNoZWQpIHtcbiAgICAgIGlmICghdGhpcy5fdG91Y2hXYXNBY3RpdmUpIHtcbiAgICAgICAgY29uc3QgY3VyclRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBlbGFwc2VkID0gKGN1cnJUaW1lIC0gdGhpcy5fdG91Y2hTdGFydFRpbWUpIC8gMTAwMDtcbiAgICAgICAgaWYgKGVsYXBzZWQgPCAwLjI1KSB7XG4gICAgICAgICAgdGhpcy5fdG91Y2hNb3ZlRm9yd2FyZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fdG91Y2hTdGFydFRpbWUgPSBjdXJyVGltZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBmaXJzdFRvdWNoID0gR2xvYmFsVG91Y2hNYW5hZ2VyLmdldFRvdWNoRGF0YSgpWzBdO1xuXG4gICAgICBjb25zdCBkZWx0YVggPSBmaXJzdFRvdWNoLmRlbHRhWCAqIHRoaXMuX3RvdWNoU2Vuc2liaWxpdHk7XG4gICAgICBjb25zdCBkZWx0YVkgPSBmaXJzdFRvdWNoLmRlbHRhWSAqIHRoaXMuX3RvdWNoU2Vuc2liaWxpdHk7XG5cbiAgICAgIGxvb2tEZWx0YVggLT0gZGVnMlJhZChkZWx0YVgpICogZGVsdGFNc1RpbWU7XG4gICAgICBsb29rRGVsdGFZIC09IGRlZzJSYWQoZGVsdGFZKSAqIGRlbHRhTXNUaW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl90b3VjaE1vdmVGb3J3YXJkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5fdG91Y2hXYXNBY3RpdmUgPSBpc1RvdWNoZWQ7XG5cbiAgICBpZiAodGhpcy5fdG91Y2hNb3ZlRm9yd2FyZCkge1xuICAgICAgbW92ZUZvcndhcmQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gdG91Y2hcbiAgICAvL1xuXG4gICAgLy9cbiAgICAvLyBrZXlib2FyZFxuICAgIC8vXG5cbiAgICAvLyBmb3J3YXJkXG4gICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ1onLCAnVycpKSB7XG4gICAgICBtb3ZlRm9yd2FyZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmRcbiAgICBpZiAoR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnUycpKSB7XG4gICAgICBtb3ZlQmFja3dhcmQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIHN0cmFmZSBsZWZ0XG4gICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0EnLCAnUScpKSB7XG4gICAgICBzdHJhZmVMZWZ0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBzdHJhZmUgcmlnaHRcbiAgICBpZiAoR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnRCcpKSB7XG4gICAgICBzdHJhZmVSaWdodCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gcnVuXG4gICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ1NoaWZ0JykpIHtcbiAgICAgIGlzUnVubmluZyA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKCFmcHNDb250cm9scykge1xuICAgICAgLy8gZGl2ZVxuICAgICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0MnKSkge1xuICAgICAgICBpc0RpdmluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHJpc2VcbiAgICAgIGlmIChHbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdTcGFjZScpKSB7XG4gICAgICAgIGlzUmlzaW5nID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50TGluZWFyU3BlZWQgPVxuICAgICAgdGhpcy5fbW92aW5nU3BlZWQgKiAoaXNSdW5uaW5nID8gNCA6IDEpICogZGVsdGFNc1RpbWU7XG5cbiAgICAvL1xuICAgIC8vXG5cbiAgICBjb25zdCBjdXJyZW50QW5ndWxhclNwZWVkID0gdGhpcy5fa2V5Ym9hcmRTZW5zaWJpbGl0eSAqIGRlbHRhTXNUaW1lO1xuXG4gICAgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0Fycm93VXAnKSkge1xuICAgICAgbG9va0RlbHRhWSArPSBjdXJyZW50QW5ndWxhclNwZWVkO1xuICAgIH0gZWxzZSBpZiAoR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnQXJyb3dEb3duJykpIHtcbiAgICAgIGxvb2tEZWx0YVkgLT0gY3VycmVudEFuZ3VsYXJTcGVlZDtcbiAgICB9XG5cbiAgICBpZiAoR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnQXJyb3dMZWZ0JykpIHtcbiAgICAgIGxvb2tEZWx0YVggKz0gY3VycmVudEFuZ3VsYXJTcGVlZDtcbiAgICB9IGVsc2UgaWYgKEdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0Fycm93UmlnaHQnKSkge1xuICAgICAgbG9va0RlbHRhWCAtPSBjdXJyZW50QW5ndWxhclNwZWVkO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8ga2V5Ym9hcmRcbiAgICAvL1xuXG4gICAgLy9cbiAgICAvLyBpbnRlcm5hbHNcbiAgICAvL1xuXG4gICAgdGhpcy5fdGhldGEgKz0gbG9va0RlbHRhWDtcbiAgICB0aGlzLl9waGkgKz0gbG9va0RlbHRhWTtcblxuICAgIGNvbnN0IGhQaSA9IE1hdGguUEkgKiAwLjU7XG4gICAgY29uc3QgdmVydGljYWxMaW1pdCA9IGhQaSAqIDAuOTU7XG5cbiAgICB0aGlzLl9waGkgPSBNYXRoLm1pbihNYXRoLm1heCh0aGlzLl9waGksIC12ZXJ0aWNhbExpbWl0KSwgK3ZlcnRpY2FsTGltaXQpO1xuXG4gICAgY29uc3QgY29zVGhldGEgPSBNYXRoLmNvcyh0aGlzLl90aGV0YSk7XG4gICAgY29uc3Qgc2luVGhldGEgPSBNYXRoLnNpbih0aGlzLl90aGV0YSk7XG5cbiAgICBjb25zdCBbYXhpc1gsIGF4aXNZLCBheGlzWl0gPSB0aGlzLl9heGlzSW5kaWNlcztcblxuICAgIGNvbnN0IHVwUmFkaXVzID0gTWF0aC5jb3ModGhpcy5fcGhpICsgaFBpKTtcbiAgICB0aGlzLl91cEF4aXNbYXhpc1hdID0gdXBSYWRpdXMgKiBjb3NUaGV0YTtcbiAgICB0aGlzLl91cEF4aXNbYXhpc1ldID0gdXBSYWRpdXMgKiBzaW5UaGV0YTtcbiAgICB0aGlzLl91cEF4aXNbYXhpc1pdID0gTWF0aC5zaW4odGhpcy5fcGhpICsgaFBpKTtcblxuICAgIGNvbnN0IGZvcndhcmRSYWRpdXMgPSBNYXRoLmNvcyh0aGlzLl9waGkpO1xuICAgIHRoaXMuX2ZvcndhcmRBeGlzW2F4aXNYXSA9IGZvcndhcmRSYWRpdXMgKiBjb3NUaGV0YTtcbiAgICB0aGlzLl9mb3J3YXJkQXhpc1theGlzWV0gPSBmb3J3YXJkUmFkaXVzICogc2luVGhldGE7XG4gICAgdGhpcy5fZm9yd2FyZEF4aXNbYXhpc1pdID0gTWF0aC5zaW4odGhpcy5fcGhpKTtcblxuICAgIGdsbS52ZWMzLmNyb3NzKHRoaXMuX2xlZnRBeGlzLCB0aGlzLl91cEF4aXMsIHRoaXMuX2ZvcndhcmRBeGlzKTtcblxuICAgIGlmIChmcHNDb250cm9scykge1xuICAgICAgdGhpcy5fbW92ZV9mb3J3YXJkQXhpc1theGlzWF0gPSBjb3NUaGV0YTtcbiAgICAgIHRoaXMuX21vdmVfZm9yd2FyZEF4aXNbYXhpc1ldID0gc2luVGhldGE7XG4gICAgICB0aGlzLl9tb3ZlX2ZvcndhcmRBeGlzW2F4aXNaXSA9IDA7XG5cbiAgICAgIHRoaXMuX21vdmVfbGVmdEF4aXNbYXhpc1hdID0gLXNpblRoZXRhO1xuICAgICAgdGhpcy5fbW92ZV9sZWZ0QXhpc1theGlzWV0gPSBjb3NUaGV0YTtcbiAgICAgIHRoaXMuX21vdmVfbGVmdEF4aXNbYXhpc1pdID0gMDtcblxuICAgICAgdGhpcy5fbW92ZV91cEF4aXNbYXhpc1hdID0gMDtcbiAgICAgIHRoaXMuX21vdmVfdXBBeGlzW2F4aXNZXSA9IDA7XG4gICAgICB0aGlzLl9tb3ZlX3VwQXhpc1theGlzWl0gPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBnbG0udmVjMy5jb3B5KHRoaXMuX21vdmVfZm9yd2FyZEF4aXMsIHRoaXMuX2ZvcndhcmRBeGlzKTtcbiAgICAgIGdsbS52ZWMzLmNvcHkodGhpcy5fbW92ZV9sZWZ0QXhpcywgdGhpcy5fbGVmdEF4aXMpO1xuICAgICAgZ2xtLnZlYzMuY29weSh0aGlzLl9tb3ZlX3VwQXhpcywgdGhpcy5fdXBBeGlzKTtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cblxuICAgIGNvbnN0IHNjYWxlZEZvcndhcmQgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICAgIGdsbS52ZWMzLnNjYWxlKHNjYWxlZEZvcndhcmQsIHRoaXMuX21vdmVfZm9yd2FyZEF4aXMsIGN1cnJlbnRMaW5lYXJTcGVlZCk7XG4gICAgY29uc3Qgc2NhbGVkTGVmdCA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoMCwgMCwgMCk7XG4gICAgZ2xtLnZlYzMuc2NhbGUoc2NhbGVkTGVmdCwgdGhpcy5fbW92ZV9sZWZ0QXhpcywgY3VycmVudExpbmVhclNwZWVkKTtcbiAgICBjb25zdCBzY2FsZWRVcCA9IGdsbS52ZWMzLmZyb21WYWx1ZXMoMCwgMCwgMCk7XG4gICAgZ2xtLnZlYzMuc2NhbGUoc2NhbGVkVXAsIHRoaXMuX21vdmVfdXBBeGlzLCBjdXJyZW50TGluZWFyU3BlZWQpO1xuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG5cbiAgICBpZiAobW92ZUZvcndhcmQpIHtcbiAgICAgIGdsbS52ZWMzLmFkZCh0aGlzLl9wb3NpdGlvbiwgdGhpcy5fcG9zaXRpb24sIHNjYWxlZEZvcndhcmQpO1xuICAgIH0gZWxzZSBpZiAobW92ZUJhY2t3YXJkKSB7XG4gICAgICBnbG0udmVjMy5zdWIodGhpcy5fcG9zaXRpb24sIHRoaXMuX3Bvc2l0aW9uLCBzY2FsZWRGb3J3YXJkKTtcbiAgICB9XG5cbiAgICBpZiAoc3RyYWZlTGVmdCkge1xuICAgICAgZ2xtLnZlYzMuYWRkKHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9wb3NpdGlvbiwgc2NhbGVkTGVmdCk7XG4gICAgfSBlbHNlIGlmIChzdHJhZmVSaWdodCkge1xuICAgICAgZ2xtLnZlYzMuc3ViKHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9wb3NpdGlvbiwgc2NhbGVkTGVmdCk7XG4gICAgfVxuXG4gICAgaWYgKGlzUmlzaW5nKSB7XG4gICAgICBnbG0udmVjMy5hZGQodGhpcy5fcG9zaXRpb24sIHRoaXMuX3Bvc2l0aW9uLCBzY2FsZWRVcCk7XG4gICAgfSBlbHNlIGlmIChpc0RpdmluZykge1xuICAgICAgZ2xtLnZlYzMuc3ViKHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9wb3NpdGlvbiwgc2NhbGVkVXApO1xuICAgIH1cblxuICAgIGdsbS52ZWMzLmFkZCh0aGlzLl90YXJnZXQsIHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9mb3J3YXJkQXhpcyk7XG5cbiAgICAvL1xuICAgIC8vIGludGVybmFsc1xuICAgIC8vXG4gIH1cblxuICBnZXRQb3NpdGlvbigpOiBnbG0uUmVhZG9ubHlWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XG4gIH1cblxuICBzZXRQb3NpdGlvbihpblBvczogZ2xtLlJlYWRvbmx5VmVjMykge1xuICAgIGdsbS52ZWMzLmNvcHkodGhpcy5fcG9zaXRpb24sIGluUG9zKTtcbiAgICBnbG0udmVjMy5hZGQodGhpcy5fdGFyZ2V0LCB0aGlzLl9wb3NpdGlvbiwgdGhpcy5fZm9yd2FyZEF4aXMpO1xuICB9XG5cbiAgZ2V0VGFyZ2V0KCk6IGdsbS5SZWFkb25seVZlYzMge1xuICAgIHJldHVybiB0aGlzLl90YXJnZXQ7XG4gIH1cblxuICBnZXRVcEF4aXMoKTogZ2xtLlJlYWRvbmx5VmVjMyB7XG4gICAgcmV0dXJuIHRoaXMuX3VwQXhpcztcbiAgfVxuXG4gIGdldFRoZXRhKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3RoZXRhO1xuICB9XG5cbiAgZ2V0UGhpKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3BoaTtcbiAgfVxuXG4gIGdldFRvdWNoTW92ZUZvcndhcmQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3RvdWNoTW92ZUZvcndhcmQ7XG4gIH1cbn1cbiIsCiAgImV4cG9ydCBjb25zdCBjbGFtcCA9IChjdXJyVmFsOiBudW1iZXIsIG1pblZhbDogbnVtYmVyLCBtYXhWYWw6IG51bWJlcikgPT5cbiAgTWF0aC5taW4oTWF0aC5tYXgoY3VyclZhbCwgbWluVmFsKSwgbWF4VmFsKTtcbiIsCiAgImltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgY29uc3QgaW50ZXJzZWN0U2VnbWVudCA9IChcbiAgQTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgQjogZ2xtLlJlYWRvbmx5VmVjMixcbiAgSTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgUDogZ2xtLlJlYWRvbmx5VmVjMlxuKTogbnVtYmVyID0+IHtcbiAgY29uc3QgRCA9IGdsbS52ZWMyLmZyb21WYWx1ZXMoMCwgMCk7XG4gIGNvbnN0IEUgPSBnbG0udmVjMi5mcm9tVmFsdWVzKDAsIDApO1xuICBEWzBdID0gQlswXSAtIEFbMF07XG4gIERbMV0gPSBCWzFdIC0gQVsxXTtcbiAgRVswXSA9IFBbMF0gLSBJWzBdO1xuICBFWzFdID0gUFsxXSAtIElbMV07XG4gIGNvbnN0IGRlbm9tID0gRFswXSAqIEVbMV0gLSBEWzFdICogRVswXTtcbiAgaWYgKGRlbm9tID09IDApIHtcbiAgICByZXR1cm4gLTE7IC8vIGVycmV1ciwgY2FzIGxpbWl0ZVxuICB9XG4gIGNvbnN0IHQgPSAtKEFbMF0gKiBFWzFdIC0gSVswXSAqIEVbMV0gLSBFWzBdICogQVsxXSArIEVbMF0gKiBJWzFdKSAvIGRlbm9tO1xuICBpZiAodCA8IDAgfHwgdCA+PSAxKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgY29uc3QgdSA9IC0oLURbMF0gKiBBWzFdICsgRFswXSAqIElbMV0gKyBEWzFdICogQVswXSAtIERbMV0gKiBJWzBdKSAvIGRlbm9tO1xuICBpZiAodSA8IDAgfHwgdSA+PSAxKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIDE7XG59O1xuXG5leHBvcnQgY29uc3QgY29sbGlzaW9uTGluZXNTdHJpcCA9IChcbiAgdGFiOiBSZWFkb25seUFycmF5PGdsbS5SZWFkb25seVZlYzI+LFxuICBQOiBnbG0udmVjMlxuKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IEkgPSBnbG0udmVjMi5mcm9tVmFsdWVzKDAsIDApO1xuICBJWzBdID0gMTAwMDAgKyBNYXRoLnJhbmRvbSgpICogMTAwOyAvLyAxMDAwMCArIHVuIG5vbWJyZSBhbMOpYXRvaXJlIGVudHJlIDAgZXQgOTlcbiAgSVsxXSA9IDEwMDAwICsgTWF0aC5yYW5kb20oKSAqIDEwMDtcbiAgbGV0IG5iSW50ZXJzZWN0aW9ucyA9IDA7XG4gIGZvciAobGV0IGlpID0gMDsgaWkgPCB0YWIubGVuZ3RoOyArK2lpKSB7XG4gICAgbGV0IGpqID0gKGlpICsgMSkgJSB0YWIubGVuZ3RoO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gaW50ZXJzZWN0U2VnbWVudCh0YWJbaWldLCB0YWJbampdLCBJLCBQKTtcbiAgICBpZiAocmVzdWx0ID09IC0xKSB7XG4gICAgICByZXR1cm4gY29sbGlzaW9uTGluZXNTdHJpcCh0YWIsIFApOyAvLyBjYXMgbGltaXRlLCBvbiByZWxhbmNlIGxhIGZvbmN0aW9uLlxuICAgIH1cbiAgICBuYkludGVyc2VjdGlvbnMgKz0gcmVzdWx0O1xuICB9XG4gIGlmIChuYkludGVyc2VjdGlvbnMgJSAyID09IDEpIHtcbiAgICAvLyBuYkludGVyc2VjdGlvbnMgZXN0LWlsIGltcGFpciA/XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcbiIsCiAgImV4cG9ydCBjb25zdCBlYXNlQ2xhbXAgPSAodDogbnVtYmVyKSA9PiB7XG4gIGlmICh0ID4gMSkge1xuICAgIHJldHVybiB0IC0gTWF0aC5mbG9vcih0KTtcbiAgfVxuICByZXR1cm4gdDtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlUGluUG9uZyA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICB0ICo9IDIuMDtcbiAgaWYgKHQgPCAxLjApIHJldHVybiB0O1xuICB0IC09IDEuMDtcbiAgcmV0dXJuIDEuMCAtIHQ7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluU2luZSA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gTWF0aC5zaW4oMS41NzA3OTYzICogdCk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZU91dFNpbmUgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIDEuMCArIE1hdGguc2luKDEuNTcwNzk2MyAqICh0IC0gMS4wKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluT3V0U2luZSA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gMC41ICogKDEuMCArIE1hdGguc2luKDMuMTQxNTkyNiAqICh0IC0gMC41KSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJblF1YWQgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIHQgKiB0O1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VPdXRRdWFkID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIHJldHVybiB0ICogKDIuMCAtIHQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dFF1YWQgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIHQgPCAwLjUgPyAyLjAgKiB0ICogdCA6IHQgKiAoNC4wIC0gMi4wICogdCkgLSAxLjA7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluQ3ViaWMgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIHQgKiB0ICogdDtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlT3V0Q3ViaWMgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdDIgPSB0IC0gMTtcbiAgcmV0dXJuIDEuMCArIHQyICogdDIgKiB0Mjtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5PdXRDdWJpYyA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCB0MiA9IHQgLSAxLjA7XG4gIGNvbnN0IHQzID0gdDIgLSAxLjA7XG4gIHJldHVybiB0IDwgMC41ID8gNC4wICogdCAqIHQgKiB0IDogMS4wICsgdDIgKiAoMi4wICogdDMpICogKDIuMCAqIHQzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5RdWFydCA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICB0ICo9IHQ7XG4gIHJldHVybiB0ICogdDtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlT3V0UXVhcnQgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdDIgPSB0IC0gMS4wO1xuICB0ID0gdDIgKiB0MjtcbiAgcmV0dXJuIDEuMCAtIHQgKiB0O1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dFF1YXJ0ID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGlmICh0IDwgMC41KSB7XG4gICAgdCAqPSB0O1xuICAgIHJldHVybiA4LjAgKiB0ICogdDtcbiAgfVxuICBjb25zdCB0MiA9IHQgLSAxO1xuICB0ID0gdDIgKiB0MjtcbiAgcmV0dXJuIDEuMCAtIDguMCAqIHQgKiB0O1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJblF1aW50ID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHQyID0gdCAqIHQ7XG4gIHJldHVybiB0ICogdDIgKiB0Mjtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlT3V0UXVpbnQgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdHggPSB0IC0gMTtcbiAgY29uc3QgdDIgPSB0eCAqIHR4O1xuICByZXR1cm4gMS4wICsgdHggKiB0MiAqIHQyO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dFF1aW50ID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGxldCB0MjtcbiAgaWYgKHQgPCAwLjUpIHtcbiAgICB0MiA9IHQgKiB0O1xuICAgIHJldHVybiAxNi4wICogdCAqIHQyICogdDI7XG4gIH1cblxuICBjb25zdCB0eCA9IHQgLSAxLjA7XG4gIHQyID0gdHggKiB0eDtcbiAgcmV0dXJuIDEuMCArIDE2LjAgKiB0eCAqIHQyICogdDI7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluRXhwbyA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gKE1hdGgucG93KDIuMCwgOC4wICogdCkgLSAxKSAvIDI1NS4wO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VPdXRFeHBvID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIHJldHVybiAxLjAgLSBNYXRoLnBvdygyLjAsIC04LjAgKiB0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5PdXRFeHBvID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGlmICh0IDwgMC41KSByZXR1cm4gKE1hdGgucG93KDIuMCwgMTYuMCAqIHQpIC0gMSkgLyA1MTAuMDtcbiAgcmV0dXJuIDEuMCAtIDAuNSAqIE1hdGgucG93KDIuMCwgLTE2LjAgKiAodCAtIDAuNSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbkNpcmMgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIDEuMCAtIE1hdGguc3FydCgxLjAgLSB0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlT3V0Q2lyYyA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gTWF0aC5zcXJ0KHQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dENpcmMgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgaWYgKHQgPCAwLjUpIHJldHVybiAoMS4wIC0gTWF0aC5zcXJ0KDEuMCAtIDIuMCAqIHQpKSAqIDAuNTtcbiAgcmV0dXJuICgxLjAgKyBNYXRoLnNxcnQoMi4wICogdCAtIDEuMCkpICogMC41O1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbkJhY2sgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIHQgKiB0ICogKDIuNzAxNTggKiB0IC0gMS43MDE1OCk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZU91dEJhY2sgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgdHggPSB0IC0gMTtcbiAgcmV0dXJuIDEuMCArIHR4ICogdHggKiAoMi43MDE1OCAqIHR4ICsgMS43MDE1OCk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZUluT3V0QmFjayA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBpZiAodCA8IDAuNSkgcmV0dXJuIHQgKiB0ICogKDcuMCAqIHQgLSAyLjUpICogMi4wO1xuICBjb25zdCB0eCA9IHQgLSAxLjA7XG4gIHJldHVybiAxLjAgKyB0eCAqIHR4ICogMi4wICogKDcuMCAqIHR4ICsgMi41KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5FbGFzdGljID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHQyID0gdCAqIHQ7XG4gIHJldHVybiB0MiAqIHQyICogTWF0aC5zaW4odCAqIE1hdGguUEkgKiA0LjUpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VPdXRFbGFzdGljID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IHQyID0gKHQgLSAxLjApICogKHQgLSAxLjApO1xuICByZXR1cm4gMS4wIC0gdDIgKiB0MiAqIE1hdGguY29zKHQgKiBNYXRoLlBJICogNC41KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5PdXRFbGFzdGljID0gKHQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGxldCB0MjtcbiAgaWYgKHQgPCAwLjQ1KSB7XG4gICAgdDIgPSB0ICogdDtcbiAgICByZXR1cm4gOC4wICogdDIgKiB0MiAqIE1hdGguc2luKHQgKiBNYXRoLlBJICogOS4wKTtcbiAgfVxuICBpZiAodCA8IDAuNTUpIHJldHVybiAwLjUgKyAwLjc1ICogTWF0aC5zaW4odCAqIE1hdGguUEkgKiA0LjApO1xuXG4gIHQyID0gKHQgLSAxLjApICogKHQgLSAxLjApO1xuICByZXR1cm4gMS4wIC0gOC4wICogdDIgKiB0MiAqIE1hdGguc2luKHQgKiBNYXRoLlBJICogOS4wKTtcbn07XG5cbmV4cG9ydCBjb25zdCBlYXNlSW5Cb3VuY2UgPSAodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIE1hdGgucG93KDIuMCwgNi4wICogKHQgLSAxLjApKSAqIE1hdGguYWJzKE1hdGguc2luKHQgKiBNYXRoLlBJICogMy41KSk7XG59O1xuXG5leHBvcnQgY29uc3QgZWFzZU91dEJvdW5jZSA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gMS4wIC0gTWF0aC5wb3coMi4wLCAtNi4wICogdCkgKiBNYXRoLmFicyhNYXRoLmNvcyh0ICogTWF0aC5QSSAqIDMuNSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVhc2VJbk91dEJvdW5jZSA9ICh0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBpZiAodCA8IDAuNSlcbiAgICByZXR1cm4gKFxuICAgICAgOC4wICpcbiAgICAgIE1hdGgucG93KDIuMCwgOC4wICogKHQgLSAxLjApKSAqXG4gICAgICBNYXRoLmFicyhNYXRoLnNpbih0ICogTWF0aC5QSSAqIDcuMCkpXG4gICAgKTtcbiAgcmV0dXJuIChcbiAgICAxLjAgLSA4LjAgKiBNYXRoLnBvdygyLjAsIC04LjAgKiB0KSAqIE1hdGguYWJzKE1hdGguc2luKHQgKiBNYXRoLlBJICogNy4wKSlcbiAgKTtcbn07XG4iLAogICJleHBvcnQgY29uc3QgbGVycCA9IChyYXRpbzogbnVtYmVyLCBtaW5WYWw6IG51bWJlciwgbWF4VmFsOiBudW1iZXIpOiBudW1iZXIgPT5cbiAgbWluVmFsICsgKG1heFZhbCAtIG1pblZhbCkgKiByYXRpbztcbiIsCiAgImltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgY29uc3QgcG9sYXIyQ2FydGVzaWFuID0gKFxuICBsYXQ6IG51bWJlcixcbiAgbG5nOiBudW1iZXIsXG4gIHJlbEFsdGl0dWRlID0gMCxcbiAgZ2xvYlJhZGl1cyA9IDEwMFxuKTogZ2xtLnZlYzMgPT4ge1xuICBjb25zdCBwaGkgPSAoKDkwIC0gbGF0KSAqIE1hdGguUEkpIC8gMTgwO1xuICBjb25zdCB0aGV0YSA9ICgoOTAgLSBsbmcpICogTWF0aC5QSSkgLyAxODA7XG4gIGNvbnN0IHIgPSBnbG9iUmFkaXVzICogKDEgKyByZWxBbHRpdHVkZSk7XG4gIHJldHVybiBbXG4gICAgciAqIE1hdGguc2luKHBoaSkgKiBNYXRoLmNvcyh0aGV0YSksXG4gICAgciAqIE1hdGguY29zKHBoaSksXG4gICAgciAqIE1hdGguc2luKHBoaSkgKiBNYXRoLnNpbih0aGV0YSlcbiAgXTtcbn07XG5cbmV4cG9ydCBjb25zdCBjYXJ0ZXNpYW4yUG9sYXIgPSAoXG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICB6OiBudW1iZXIsXG4gIGdsb2JSYWRpdXMgPSAxMDBcbik6IHtcbiAgbGF0OiBudW1iZXI7XG4gIGxuZzogbnVtYmVyO1xuICBhbHRpdHVkZTogbnVtYmVyO1xufSA9PiB7XG4gIGNvbnN0IHIgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcbiAgY29uc3QgcGhpID0gTWF0aC5hY29zKHkgLyByKTtcbiAgY29uc3QgdGhldGEgPSBNYXRoLmF0YW4yKHosIHgpO1xuXG4gIHJldHVybiB7XG4gICAgbGF0OiA5MCAtIChwaGkgKiAxODApIC8gTWF0aC5QSSxcbiAgICBsbmc6IDkwIC0gKHRoZXRhICogMTgwKSAvIE1hdGguUEkgLSAodGhldGEgPCAtTWF0aC5QSSAvIDIgPyAzNjAgOiAwKSwgLy8ga2VlcCB3aXRoaW4gWy0xODAsIDE4MF0gYm91bmRhcmllc1xuICAgIGFsdGl0dWRlOiByIC8gZ2xvYlJhZGl1cyAtIDFcbiAgfTtcbn07XG4iLAogICJpbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuLy8gSW50ZXJzZWN0cyByYXkgciA9IHAgKyB0ZCwgfGR8ID0gMSwgd2l0aCBzcGhlcmUgcyBhbmQsIGlmIGludGVyc2VjdGluZyxcbi8vIHJldHVybnMgdCB2YWx1ZSBvZiBpbnRlcnNlY3Rpb24gYW5kIGludGVyc2VjdGlvbiBwb2ludCBxXG5leHBvcnQgY29uc3QgaW50ZXJzZWN0UmF5U3BoZXJlID0gKFxuICBwb3M6IGdsbS5SZWFkb25seVZlYzMsXG4gIGRpcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgY2VudGVyOiBnbG0uUmVhZG9ubHlWZWMzLFxuICByYWRpdXM6IG51bWJlclxuKTogZ2xtLnZlYzMgfCBudWxsID0+IHtcbiAgLy8gVmVjdG9yIG0gPSBwIC0gcy5jO1xuICBjb25zdCBtID0gZ2xtLnZlYzMuc3ViKGdsbS52ZWMzLmNyZWF0ZSgpLCBwb3MsIGNlbnRlcik7XG4gIC8vIGZsb2F0IGIgPSBEb3QobSwgZCk7XG4gIGNvbnN0IGIgPSBnbG0udmVjMy5kb3QobSwgZGlyKTtcbiAgLy8gZmxvYXQgYyA9IERvdChtLCBtKSAtIHMuciAqIHMucjtcbiAgY29uc3QgYyA9IGdsbS52ZWMzLmRvdChtLCBtKSAtIHJhZGl1cyAqIHJhZGl1cztcblxuICAvLyBFeGl0IGlmIHLigJlzIG9yaWdpbiBvdXRzaWRlIHMgKGMgPiAwKSBhbmQgciBwb2ludGluZyBhd2F5IGZyb20gcyAoYiA+IDApXG4gIGlmIChjID4gMCAmJiBiID4gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGRpc2NyID0gYiAqIGIgLSBjO1xuXG4gIC8vIEEgbmVnYXRpdmUgZGlzY3JpbWluYW50IGNvcnJlc3BvbmRzIHRvIHJheSBtaXNzaW5nIHNwaGVyZVxuICBpZiAoZGlzY3IgPCAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBSYXkgbm93IGZvdW5kIHRvIGludGVyc2VjdCBzcGhlcmUsIGNvbXB1dGUgc21hbGxlc3QgdCB2YWx1ZSBvZiBpbnRlcnNlY3Rpb25cbiAgbGV0IHQgPSAtYiAtIE1hdGguc3FydChkaXNjcik7XG5cbiAgLy8gSWYgdCBpcyBuZWdhdGl2ZSwgcmF5IHN0YXJ0ZWQgaW5zaWRlIHNwaGVyZSBzbyBjbGFtcCB0IHRvIHplcm9cbiAgaWYgKHQgPCAwKSB7XG4gICAgdCA9IDA7XG4gIH1cblxuICByZXR1cm4gZ2xtLnZlYzMuZnJvbVZhbHVlcyhcbiAgICBwb3NbMF0gKyB0ICogZGlyWzBdLFxuICAgIHBvc1sxXSArIHQgKiBkaXJbMV0sXG4gICAgcG9zWzJdICsgdCAqIGRpclsyXVxuICApO1xufTtcbiIsCiAgImV4cG9ydCBpbnRlcmZhY2UgSUZyYW1lUHJvZmlsZXIge1xuICBmcmFtZXNEZWx0YTogUmVhZG9ubHlBcnJheTxudW1iZXI+O1xuICBhdmVyYWdlRGVsdGE6IG51bWJlcjtcbiAgbWluRGVsdGE6IG51bWJlcjtcbiAgbWF4RGVsdGE6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEZyYW1lUHJvZmlsZXIgaW1wbGVtZW50cyBJRnJhbWVQcm9maWxlciB7XG4gIHByaXZhdGUgX2ZyYW1lc0RlbHRhOiBudW1iZXJbXSA9IFtdO1xuICBwcml2YXRlIF9hdmVyYWdlRGVsdGE6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX21pbkRlbHRhOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9tYXhEZWx0YTogbnVtYmVyID0gMDtcblxuICBwdXNoRGVsdGEoaW5EZWx0YTogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuX2ZyYW1lc0RlbHRhLmxlbmd0aCA+PSAxMDApIHtcbiAgICAgIHRoaXMuX2ZyYW1lc0RlbHRhLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5fZnJhbWVzRGVsdGEucHVzaChpbkRlbHRhKTtcblxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuXG4gICAgdGhpcy5fbWluRGVsdGEgPSArOTk5OTk5OTk5O1xuICAgIHRoaXMuX21heERlbHRhID0gLTk5OTk5OTk5OTtcbiAgICB0aGlzLl9hdmVyYWdlRGVsdGEgPSAwO1xuXG4gICAgZm9yIChjb25zdCBjdXJyRGVsdGEgb2YgdGhpcy5fZnJhbWVzRGVsdGEpIHtcbiAgICAgIHRoaXMuX21pbkRlbHRhID0gTWF0aC5taW4odGhpcy5fbWluRGVsdGEsIGN1cnJEZWx0YSk7XG4gICAgICB0aGlzLl9tYXhEZWx0YSA9IE1hdGgubWF4KHRoaXMuX21heERlbHRhLCBjdXJyRGVsdGEpO1xuICAgICAgdGhpcy5fYXZlcmFnZURlbHRhICs9IGN1cnJEZWx0YTtcbiAgICB9XG4gICAgdGhpcy5fYXZlcmFnZURlbHRhIC89IHRoaXMuX2ZyYW1lc0RlbHRhLmxlbmd0aDtcbiAgfVxuXG4gIGdldCBmcmFtZXNEZWx0YSgpOiBSZWFkb25seUFycmF5PG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLl9mcmFtZXNEZWx0YTtcbiAgfVxuICBnZXQgYXZlcmFnZURlbHRhKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2F2ZXJhZ2VEZWx0YTtcbiAgfVxuICBnZXQgbWluRGVsdGEoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbWluRGVsdGE7XG4gIH1cbiAgZ2V0IG1heERlbHRhKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heERlbHRhO1xuICB9XG59XG4iLAogICJleHBvcnQgY29uc3QgcHJvZ3Jlc3NGZXRjaCA9IGFzeW5jIChcbiAgdXJsOiBzdHJpbmcsXG4gIG9uUHJvZ3Jlc3M/OiAodG90YWw6IG51bWJlcikgPT4gdm9pZFxuKTogUHJvbWlzZTxSZXNwb25zZT4gPT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG5cbiAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keSEuZ2V0UmVhZGVyKCk7XG5cbiAgbGV0IHRvdGFsUHJvZ3Jlc3MgPSAwO1xuICBjb25zdCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgICBmdW5jdGlvbiBwdW1wKCk6IGFueSB7XG4gICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4oKHsgZG9uZSwgdmFsdWUgfSkgPT4ge1xuICAgICAgICAgIC8vIFdoZW4gbm8gbW9yZSBkYXRhIG5lZWRzIHRvIGJlIGNvbnN1bWVkLCBjbG9zZSB0aGUgc3RyZWFtXG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgICAgICAgdG90YWxQcm9ncmVzcyArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICBvblByb2dyZXNzKHRvdGFsUHJvZ3Jlc3MpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEVucXVldWUgdGhlIG5leHQgZGF0YSBjaHVuayBpbnRvIG91ciB0YXJnZXQgc3RyZWFtXG4gICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICBhd2FpdCBzdHJlYW07XG4gIHJldHVybiBuZXcgUmVzcG9uc2Uoc3RyZWFtKTtcbn07XG4iLAogICJleHBvcnQgY29uc3Qgc2xlZXAgPSBhc3luYyAoZGVsYXk6IG51bWJlcik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNhbmNlbGxhYmxlU2xlZXAgPSAoXG4gIGRlbGF5OiBudW1iZXJcbik6IHtcbiAgcHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcbiAgY2FuY2VsOiAoKSA9PiB2b2lkO1xufSA9PiB7XG4gIGxldCB0aW1lb3V0SGFuZGxlOiBudW1iZXIgPSAtMTtcbiAgbGV0IHJlc29sdmVDYWxsYmFjazogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgIHJlc29sdmVDYWxsYmFjayA9IHJlc29sdmU7XG4gICAgdGltZW91dEhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9taXNlLFxuICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgaWYgKHRpbWVvdXRIYW5kbGUgPj0gMCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc29sdmVDYWxsYmFjaykge1xuICAgICAgICByZXNvbHZlQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuIiwKICAiY29uc3QgUkFORF9NQVggPSAyMTQ3NDgzNjQ4IHwgMDtcblxuZXhwb3J0IGNsYXNzIERldGVybWluaXN0aWNSbmcge1xuICBwcml2YXRlIF9zZWVkOiBudW1iZXIgPSAxIHwgMDtcblxuICByYW5kb20oKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5fc2VlZCA9PSAwKSB7XG4gICAgICB0aGlzLl9zZWVkID0gMTIzNDU5ODc2IHwgMDtcbiAgICB9XG5cbiAgICBjb25zdCBoaSA9ICh0aGlzLl9zZWVkIC8gMTI3NzczKSB8IDA7XG4gICAgY29uc3QgbG8gPSB0aGlzLl9zZWVkICUgMTI3NzczIHwgMDtcbiAgICBsZXQgeCA9ICgxNjgwNyAqIGxvIC0gMjgzNiAqIGhpKSB8IDA7XG5cbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHggKz0gMHg3ZmZmZmZmZiB8IDA7XG4gICAgfVxuXG4gICAgdGhpcy5fc2VlZCA9IHg7XG5cbiAgICByZXR1cm4gKHggJSAoUkFORF9NQVggKyAxKSkgLyAtUkFORF9NQVg7XG4gIH1cblxuICBzZXRTZWVkKGluU2VlZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fc2VlZCA9IGluU2VlZCB8IDA7XG4gIH1cbn1cbiIsCiAgImltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5pbXBvcnQgeyBkZWcyUmFkIH0gZnJvbSAnLi4vLi4vc3lzdGVtL21hdGgvYW5nbGVzJztcblxuZW51bSBQcm9qZWN0aW9uVHlwZSB7XG4gIHBlcnNwZWN0aXZlID0gMCxcbiAgb3J0aG9nb25hbCA9IDFcbn1cblxuaW50ZXJmYWNlIElQZXJzcGVjdGl2ZURhdGFPcHRzIHtcbiAgZm92eTogbnVtYmVyO1xuICBhc3BlY3RSYXRpbz86IG51bWJlcjtcbiAgbmVhcjogbnVtYmVyO1xuICBmYXI6IG51bWJlcjtcbn1cblxudHlwZSBJUGVyc3BlY3RpdmVEYXRhID0gUmVxdWlyZWQ8SVBlcnNwZWN0aXZlRGF0YU9wdHM+O1xuXG5pbnRlcmZhY2UgSU9ydGhvZ29uYWxEYXRhIHtcbiAgbGVmdDogbnVtYmVyO1xuICByaWdodDogbnVtYmVyO1xuICB0b3A6IG51bWJlcjtcbiAgYm90dG9tOiBudW1iZXI7XG4gIG5lYXI6IG51bWJlcjtcbiAgZmFyOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNhbWVyYSB7XG4gIGdldEV5ZSgpOiBnbG0uUmVhZG9ubHlWZWMzO1xuICBnZXRUYXJnZXQoKTogZ2xtLlJlYWRvbmx5VmVjMztcbiAgZ2V0VXBBeGlzKCk6IGdsbS5SZWFkb25seVZlYzM7XG5cbiAgZ2V0UHJvamVjdGlvbk1hdHJpeCgpOiBnbG0uUmVhZG9ubHlNYXQ0O1xuICBnZXRWaWV3TWF0cml4KCk6IGdsbS5SZWFkb25seU1hdDQ7XG4gIGdldENvbXBvc2VkTWF0cml4KCk6IGdsbS5SZWFkb25seU1hdDQ7XG5cbiAgZ2V0UGVyc3BlY3RpdmVEYXRhKCk6IFJlYWRvbmx5PElQZXJzcGVjdGl2ZURhdGEgfCB1bmRlZmluZWQ+O1xuICBnZXRPcnRob2dvbmFsRGF0YSgpOiBSZWFkb25seTxJT3J0aG9nb25hbERhdGEgfCB1bmRlZmluZWQ+O1xufVxuXG5leHBvcnQgY2xhc3MgQ2FtZXJhIGltcGxlbWVudHMgSUNhbWVyYSB7XG4gIHByaXZhdGUgX3Byb2plY3Rpb25UeXBlID0gUHJvamVjdGlvblR5cGUucGVyc3BlY3RpdmU7XG4gIHByaXZhdGUgX3BlcnNwZWN0aXZlRGF0YT86IElQZXJzcGVjdGl2ZURhdGE7XG4gIHByaXZhdGUgX29ydGhvZ29uYWxEYXRhPzogSU9ydGhvZ29uYWxEYXRhO1xuXG4gIHByaXZhdGUgX3ZpZXdwb3J0UG9zID0gZ2xtLnZlYzIuZnJvbVZhbHVlcygwLCAwKTtcbiAgcHJpdmF0ZSBfdmlld3BvcnRTaXplID0gZ2xtLnZlYzIuZnJvbVZhbHVlcygwLCAwKTtcblxuICBwcml2YXRlIF9wcm9qZWN0aW9uTWF0cml4ID0gZ2xtLm1hdDQuY3JlYXRlKCk7XG4gIHByaXZhdGUgX3ZpZXdNYXRyaXggPSBnbG0ubWF0NC5jcmVhdGUoKTtcbiAgcHJpdmF0ZSBfY29tcG9zZWRNYXRyaXggPSBnbG0ubWF0NC5jcmVhdGUoKTtcblxuICBwcml2YXRlIF9leWUgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICBwcml2YXRlIF90YXJnZXQgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICBwcml2YXRlIF91cEF4aXMgPSBnbG0udmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuXG4gIC8vXG5cbiAgc2V0QXNQZXJzcGVjdGl2ZShpbkRhdGE6IElQZXJzcGVjdGl2ZURhdGFPcHRzKSB7XG4gICAgdGhpcy5fcHJvamVjdGlvblR5cGUgPSBQcm9qZWN0aW9uVHlwZS5wZXJzcGVjdGl2ZTtcblxuICAgIGxldCBhc3BlY3RSYXRpbyA9IGluRGF0YS5hc3BlY3RSYXRpbztcbiAgICBpZiAoYXNwZWN0UmF0aW8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgYXNwZWN0UmF0aW8gPSB0aGlzLl92aWV3cG9ydFNpemVbMF0gLyB0aGlzLl92aWV3cG9ydFNpemVbMV07XG4gICAgfVxuXG4gICAgdGhpcy5fcGVyc3BlY3RpdmVEYXRhID0ge1xuICAgICAgZm92eTogaW5EYXRhLmZvdnksXG4gICAgICBhc3BlY3RSYXRpbyxcbiAgICAgIG5lYXI6IGluRGF0YS5uZWFyLFxuICAgICAgZmFyOiBpbkRhdGEuZmFyXG4gICAgfTtcbiAgfVxuXG4gIHNldEFzT3J0aG9nb25hbChpbkRhdGE6IElPcnRob2dvbmFsRGF0YSkge1xuICAgIHRoaXMuX3Byb2plY3Rpb25UeXBlID0gUHJvamVjdGlvblR5cGUub3J0aG9nb25hbDtcbiAgICB0aGlzLl9vcnRob2dvbmFsRGF0YSA9IHsgLi4uaW5EYXRhIH07XG4gIH1cblxuICAvL1xuXG4gIHNldFZpZXdwb3J0UG9zKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5fdmlld3BvcnRQb3NbMF0gPSB3aWR0aDtcbiAgICB0aGlzLl92aWV3cG9ydFBvc1sxXSA9IGhlaWdodDtcbiAgfVxuXG4gIGdldFZpZXdwb3J0UG9zKCk6IGdsbS5SZWFkb25seVZlYzIge1xuICAgIHJldHVybiB0aGlzLl92aWV3cG9ydFBvcztcbiAgfVxuXG4gIC8vXG5cbiAgc2V0Vmlld3BvcnRTaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5fdmlld3BvcnRTaXplWzBdID0gd2lkdGg7XG4gICAgdGhpcy5fdmlld3BvcnRTaXplWzFdID0gaGVpZ2h0O1xuXG4gICAgaWYgKFxuICAgICAgdGhpcy5fcHJvamVjdGlvblR5cGUgIT09IFByb2plY3Rpb25UeXBlLnBlcnNwZWN0aXZlICYmXG4gICAgICB0aGlzLl9wZXJzcGVjdGl2ZURhdGFcbiAgICApIHtcbiAgICAgIHRoaXMuX3BlcnNwZWN0aXZlRGF0YS5hc3BlY3RSYXRpbyA9XG4gICAgICAgIHRoaXMuX3ZpZXdwb3J0U2l6ZVswXSAvIHRoaXMuX3ZpZXdwb3J0U2l6ZVsxXTtcbiAgICB9XG4gIH1cblxuICBnZXRWaWV3cG9ydFNpemUoKTogZ2xtLlJlYWRvbmx5VmVjMiB7XG4gICAgcmV0dXJuIHRoaXMuX3ZpZXdwb3J0U2l6ZTtcbiAgfVxuXG4gIC8vXG5cbiAgbG9va0F0KFxuICAgIGluRXllOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluVGFyZ2V0OiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluVXBBeGlzOiBnbG0uUmVhZG9ubHlWZWMzXG4gICkge1xuICAgIHRoaXMuc2V0RXllKGluRXllKTtcbiAgICB0aGlzLnNldFRhcmdldChpblRhcmdldCk7XG4gICAgdGhpcy5zZXRVcEF4aXMoaW5VcEF4aXMpO1xuICB9XG5cbiAgLy9cblxuICBzZXRFeWUoaW5FeWU6IGdsbS5SZWFkb25seVZlYzMpIHtcbiAgICBnbG0udmVjMy5jb3B5KHRoaXMuX2V5ZSwgaW5FeWUpO1xuICB9XG4gIHNldFRhcmdldChpblRhcmdldDogZ2xtLlJlYWRvbmx5VmVjMykge1xuICAgIGdsbS52ZWMzLmNvcHkodGhpcy5fdGFyZ2V0LCBpblRhcmdldCk7XG4gIH1cbiAgc2V0VXBBeGlzKGluVXBBeGlzOiBnbG0uUmVhZG9ubHlWZWMzKSB7XG4gICAgZ2xtLnZlYzMuY29weSh0aGlzLl91cEF4aXMsIGluVXBBeGlzKTtcbiAgfVxuXG4gIGdldEV5ZSgpOiBnbG0uUmVhZG9ubHlWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5fZXllO1xuICB9XG4gIGdldFRhcmdldCgpOiBnbG0uUmVhZG9ubHlWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0O1xuICB9XG4gIGdldFVwQXhpcygpOiBnbG0uUmVhZG9ubHlWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5fdXBBeGlzO1xuICB9XG5cbiAgLy9cblxuICBjb21wdXRlTWF0cmljZXMoKSB7XG4gICAgaWYgKHRoaXMuX3Byb2plY3Rpb25UeXBlID09PSBQcm9qZWN0aW9uVHlwZS5wZXJzcGVjdGl2ZSkge1xuICAgICAgY29uc3QgeyBmb3Z5LCBhc3BlY3RSYXRpbywgbmVhciwgZmFyIH0gPSB0aGlzLl9wZXJzcGVjdGl2ZURhdGEhO1xuICAgICAgZ2xtLm1hdDQucGVyc3BlY3RpdmUoXG4gICAgICAgIHRoaXMuX3Byb2plY3Rpb25NYXRyaXgsXG4gICAgICAgIGRlZzJSYWQoZm92eSksXG4gICAgICAgIGFzcGVjdFJhdGlvISxcbiAgICAgICAgbmVhcixcbiAgICAgICAgZmFyXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fcHJvamVjdGlvblR5cGUgPT09IFByb2plY3Rpb25UeXBlLm9ydGhvZ29uYWwpIHtcbiAgICAgIGNvbnN0IHsgbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tLCBuZWFyLCBmYXIgfSA9IHRoaXMuX29ydGhvZ29uYWxEYXRhITtcbiAgICAgIGdsbS5tYXQ0Lm9ydGhvKFxuICAgICAgICB0aGlzLl9wcm9qZWN0aW9uTWF0cml4LFxuICAgICAgICBsZWZ0LFxuICAgICAgICByaWdodCxcbiAgICAgICAgdG9wLFxuICAgICAgICBib3R0b20sXG4gICAgICAgIG5lYXIsXG4gICAgICAgIGZhclxuICAgICAgKTtcbiAgICB9XG5cbiAgICBnbG0ubWF0NC5sb29rQXQodGhpcy5fdmlld01hdHJpeCwgdGhpcy5fZXllLCB0aGlzLl90YXJnZXQsIHRoaXMuX3VwQXhpcyk7XG5cbiAgICB0aGlzLmNvbXB1dGVDb21wb3NlZE1hdHJpeCgpO1xuICB9XG5cbiAgY29tcHV0ZUNvbXBvc2VkTWF0cml4KCkge1xuICAgIGdsbS5tYXQ0Lm11bHRpcGx5KFxuICAgICAgdGhpcy5fY29tcG9zZWRNYXRyaXgsXG4gICAgICB0aGlzLl9wcm9qZWN0aW9uTWF0cml4LFxuICAgICAgdGhpcy5fdmlld01hdHJpeFxuICAgICk7XG4gIH1cblxuICBzZXRQcm9qZWN0aW9uTWF0cml4KGluTWF0NDogZ2xtLlJlYWRvbmx5TWF0NCkge1xuICAgIGdsbS5tYXQ0LmNvcHkodGhpcy5fcHJvamVjdGlvbk1hdHJpeCwgaW5NYXQ0KTtcbiAgfVxuICBzZXRWaWV3TWF0cml4KGluTWF0NDogZ2xtLlJlYWRvbmx5TWF0NCkge1xuICAgIGdsbS5tYXQ0LmNvcHkodGhpcy5fdmlld01hdHJpeCwgaW5NYXQ0KTtcbiAgfVxuICBzZXRDb21wb3NlZE1hdHJpeChpbk1hdDQ6IGdsbS5SZWFkb25seU1hdDQpIHtcbiAgICBnbG0ubWF0NC5jb3B5KHRoaXMuX2NvbXBvc2VkTWF0cml4LCBpbk1hdDQpO1xuICB9XG5cbiAgZ2V0UHJvamVjdGlvbk1hdHJpeCgpOiBnbG0uUmVhZG9ubHlNYXQ0IHtcbiAgICByZXR1cm4gdGhpcy5fcHJvamVjdGlvbk1hdHJpeDtcbiAgfVxuICBnZXRWaWV3TWF0cml4KCk6IGdsbS5SZWFkb25seU1hdDQge1xuICAgIHJldHVybiB0aGlzLl92aWV3TWF0cml4O1xuICB9XG4gIGdldENvbXBvc2VkTWF0cml4KCk6IGdsbS5SZWFkb25seU1hdDQge1xuICAgIHJldHVybiB0aGlzLl9jb21wb3NlZE1hdHJpeDtcbiAgfVxuXG4gIC8vXG5cbiAgZ2V0UGVyc3BlY3RpdmVEYXRhKCk6IFJlYWRvbmx5PElQZXJzcGVjdGl2ZURhdGEgfCB1bmRlZmluZWQ+IHtcbiAgICBpZiAodGhpcy5fcHJvamVjdGlvblR5cGUgIT09IFByb2plY3Rpb25UeXBlLnBlcnNwZWN0aXZlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24nKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3BlcnNwZWN0aXZlRGF0YTtcbiAgfVxuICBnZXRPcnRob2dvbmFsRGF0YSgpOiBSZWFkb25seTxJT3J0aG9nb25hbERhdGEgfCB1bmRlZmluZWQ+IHtcbiAgICBpZiAodGhpcy5fcHJvamVjdGlvblR5cGUgIT09IFByb2plY3Rpb25UeXBlLm9ydGhvZ29uYWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbm90IGFuIG9ydGhvZ29uYWwgcHJvamVjdGlvbicpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fb3J0aG9nb25hbERhdGE7XG4gIH1cbn1cbiIsCiAgImltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5lbnVtIEZydXN0dW1TaWRlIHtcbiAgUmlnaHQgPSAwLFxuICBMZWZ0ID0gMSxcbiAgQm90dG9tID0gMixcbiAgVG9wID0gMyxcbiAgQmFjayA9IDQsXG4gIEZyb250ID0gNVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElGcnVzdHVtQ3VsbGluZyB7XG4gIGNhbGN1bGF0ZUZydXN0dW0ocHJvajogZ2xtLlJlYWRvbmx5TWF0NCwgdmlldzogZ2xtLlJlYWRvbmx5TWF0NCk6IHZvaWQ7XG4gIHNwaGVyZUluRnJ1c3R1bSh4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCByYWRpdXM6IG51bWJlcik6IGJvb2xlYW47XG4gIHBvaW50SW5GcnVzdHVtKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIpOiBib29sZWFuO1xuICBjdWJlSW5GcnVzdHVtKGluWDogbnVtYmVyLCBpblk6IG51bWJlciwgaW5aOiBudW1iZXIsIGluU2l6ZTogbnVtYmVyKTogYm9vbGVhbjtcbiAgY3ViZUluRnJ1c3R1bVZlYzMoY2VudGVyOiBnbG0uUmVhZG9ubHlWZWMzLCBpblNpemU6IG51bWJlcik6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBGcnVzdHVtQ3VsbGluZyBpbXBsZW1lbnRzIElGcnVzdHVtQ3VsbGluZyB7XG4gIHByaXZhdGUgX2ZydXN0dW0gPSBuZXcgRmxvYXQzMkFycmF5KDI0KTsgLy8gNiAqIDQgdmFsdWVzXG5cbiAgcHJpdmF0ZSBfc2V0UGxhbmUoXG4gICAgc2lkZTogRnJ1c3R1bVNpZGUsXG4gICAgbGVmdDogZ2xtLlJlYWRvbmx5VmVjNCxcbiAgICByaWdodDogZ2xtLlJlYWRvbmx5VmVjNCxcbiAgICBjb2VmOiBudW1iZXJcbiAgKSB7XG4gICAgY29uc3QgaW5kZXggPSBzaWRlICogNDtcblxuICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAwXSA9IGxlZnRbMF0gKyByaWdodFswXSAqIGNvZWY7XG4gICAgdGhpcy5fZnJ1c3R1bVtpbmRleCArIDFdID0gbGVmdFsxXSArIHJpZ2h0WzFdICogY29lZjtcbiAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMl0gPSBsZWZ0WzJdICsgcmlnaHRbMl0gKiBjb2VmO1xuICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAzXSA9IGxlZnRbM10gKyByaWdodFszXSAqIGNvZWY7XG5cbiAgICBjb25zdCBtYWduaXR1ZGUgPSBNYXRoLnNxcnQoXG4gICAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMF0gKiB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMF0gK1xuICAgICAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMV0gKiB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMV0gK1xuICAgICAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMl0gKiB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMl1cbiAgICApO1xuXG4gICAgaWYgKG1hZ25pdHVkZSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdGhpcy5fZnJ1c3R1bVtpbmRleCArIDBdIC89IG1hZ25pdHVkZTtcbiAgICB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMV0gLz0gbWFnbml0dWRlO1xuICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAyXSAvPSBtYWduaXR1ZGU7XG4gICAgdGhpcy5fZnJ1c3R1bVtpbmRleCArIDNdIC89IG1hZ25pdHVkZTtcbiAgfVxuXG4gIGNhbGN1bGF0ZUZydXN0dW0ocHJvajogZ2xtLlJlYWRvbmx5TWF0NCwgdmlldzogZ2xtLlJlYWRvbmx5TWF0NCkge1xuICAgIGNvbnN0IGNsaXAgPSBnbG0ubWF0NC5tdWx0aXBseShnbG0ubWF0NC5jcmVhdGUoKSwgcHJvaiwgdmlldyk7XG5cbiAgICAvLy9cblxuICAgIGNvbnN0IHJvdzAgPSBnbG0udmVjNC5mcm9tVmFsdWVzKGNsaXBbMF0sIGNsaXBbNF0sIGNsaXBbOF0sIGNsaXBbMTJdKTtcbiAgICBjb25zdCByb3cxID0gZ2xtLnZlYzQuZnJvbVZhbHVlcyhjbGlwWzFdLCBjbGlwWzVdLCBjbGlwWzldLCBjbGlwWzEzXSk7XG4gICAgY29uc3Qgcm93MiA9IGdsbS52ZWM0LmZyb21WYWx1ZXMoY2xpcFsyXSwgY2xpcFs2XSwgY2xpcFsxMF0sIGNsaXBbMTRdKTtcbiAgICBjb25zdCByb3czID0gZ2xtLnZlYzQuZnJvbVZhbHVlcyhjbGlwWzNdLCBjbGlwWzddLCBjbGlwWzExXSwgY2xpcFsxNV0pO1xuXG4gICAgdGhpcy5fc2V0UGxhbmUoRnJ1c3R1bVNpZGUuUmlnaHQsIHJvdzMsIHJvdzAsIC0xKTtcbiAgICB0aGlzLl9zZXRQbGFuZShGcnVzdHVtU2lkZS5MZWZ0LCByb3czLCByb3cwLCArMSk7XG4gICAgdGhpcy5fc2V0UGxhbmUoRnJ1c3R1bVNpZGUuQm90dG9tLCByb3czLCByb3cxLCArMSk7XG4gICAgdGhpcy5fc2V0UGxhbmUoRnJ1c3R1bVNpZGUuVG9wLCByb3czLCByb3cxLCAtMSk7XG4gICAgdGhpcy5fc2V0UGxhbmUoRnJ1c3R1bVNpZGUuQmFjaywgcm93Mywgcm93MiwgLTEpO1xuICAgIHRoaXMuX3NldFBsYW5lKEZydXN0dW1TaWRlLkZyb250LCByb3czLCByb3cyLCArMSk7XG4gIH1cblxuICBzcGhlcmVJbkZydXN0dW0oeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciwgcmFkaXVzOiBudW1iZXIpIHtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgNjsgKytpaSkge1xuICAgICAgY29uc3QgaW5kZXggPSBpaSAqIDQ7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAwXSAqIHggK1xuICAgICAgICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAxXSAqIHkgK1xuICAgICAgICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAyXSAqIHogK1xuICAgICAgICAgIHRoaXMuX2ZydXN0dW1baW5kZXggKyAzXSA8PVxuICAgICAgICAtcmFkaXVzXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcG9pbnRJbkZydXN0dW0oeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlcikge1xuICAgIC8vIHNwaGVyZSBvZiByYWRpdXMgMCA9PiBwb2ludFxuICAgIHJldHVybiB0aGlzLnNwaGVyZUluRnJ1c3R1bSh4LCB5LCB6LCAwKTtcbiAgfVxuXG4gIGN1YmVJbkZydXN0dW1WZWMzKGNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMywgaW5TaXplOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy5jdWJlSW5GcnVzdHVtKGNlbnRlclswXSwgY2VudGVyWzFdLCBjZW50ZXJbMl0sIGluU2l6ZSk7XG4gIH1cblxuICBjdWJlSW5GcnVzdHVtKGluWDogbnVtYmVyLCBpblk6IG51bWJlciwgaW5aOiBudW1iZXIsIGluU2l6ZTogbnVtYmVyKSB7XG4gICAgY29uc3QgaFNpemUgPSBpblNpemUgKiAwLjU7XG4gICAgY29uc3QgbWluWCA9IGluWCAtIGhTaXplO1xuICAgIGNvbnN0IG1pblkgPSBpblkgLSBoU2l6ZTtcbiAgICBjb25zdCBtaW5aID0gaW5aIC0gaFNpemU7XG4gICAgY29uc3QgbWF4WCA9IGluWCArIGhTaXplO1xuICAgIGNvbnN0IG1heFkgPSBpblkgKyBoU2l6ZTtcbiAgICBjb25zdCBtYXhaID0gaW5aICsgaFNpemU7XG5cbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgNjsgKytpaSkge1xuICAgICAgY29uc3QgaW5kZXggPSBpaSAqIDQ7XG4gICAgICBjb25zdCBwbGFuQSA9IHRoaXMuX2ZydXN0dW1baW5kZXggKyAwXTtcbiAgICAgIGNvbnN0IHBsYW5CID0gdGhpcy5fZnJ1c3R1bVtpbmRleCArIDFdO1xuICAgICAgY29uc3QgcGxhbkMgPSB0aGlzLl9mcnVzdHVtW2luZGV4ICsgMl07XG4gICAgICBjb25zdCBwbGFuRCA9IHRoaXMuX2ZydXN0dW1baW5kZXggKyAzXTtcblxuICAgICAgaWYgKFxuICAgICAgICBwbGFuQSAqIG1pblggKyBwbGFuQiAqIG1pblkgKyBwbGFuQyAqIG1pblogKyBwbGFuRCA+IDAgfHxcbiAgICAgICAgcGxhbkEgKiBtYXhYICsgcGxhbkIgKiBtaW5ZICsgcGxhbkMgKiBtaW5aICsgcGxhbkQgPiAwIHx8XG4gICAgICAgIHBsYW5BICogbWluWCArIHBsYW5CICogbWF4WSArIHBsYW5DICogbWluWiArIHBsYW5EID4gMCB8fFxuICAgICAgICBwbGFuQSAqIG1heFggKyBwbGFuQiAqIG1heFkgKyBwbGFuQyAqIG1pblogKyBwbGFuRCA+IDAgfHxcbiAgICAgICAgcGxhbkEgKiBtaW5YICsgcGxhbkIgKiBtaW5ZICsgcGxhbkMgKiBtYXhaICsgcGxhbkQgPiAwIHx8XG4gICAgICAgIHBsYW5BICogbWF4WCArIHBsYW5CICogbWluWSArIHBsYW5DICogbWF4WiArIHBsYW5EID4gMCB8fFxuICAgICAgICBwbGFuQSAqIG1pblggKyBwbGFuQiAqIG1heFkgKyBwbGFuQyAqIG1heFogKyBwbGFuRCA+IDAgfHxcbiAgICAgICAgcGxhbkEgKiBtYXhYICsgcGxhbkIgKiBtYXhZICsgcGxhbkMgKiBtYXhaICsgcGxhbkQgPiAwXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwKICAiLy8gaHR0cHM6Ly93d3cub3BlbmdsLm9yZy93aWtpL0dsdVByb2plY3RfYW5kX2dsdVVuUHJvamVjdF9jb2RlXG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgY29uc3Qgc2NlbmVUb1NjcmVlbkNvb3JkaW5hdGVzID0gKFxuICBzY2VuZVBvczogZ2xtLlJlYWRvbmx5VmVjM1tdLFxuICBtb2RlbFZpZXc6IGdsbS5SZWFkb25seU1hdDQsXG4gIHByb2plY3Rpb246IGdsbS5SZWFkb25seU1hdDQsXG4gIHZpZXdwb3J0OiBnbG0uUmVhZG9ubHlWZWM0XG4pOiBnbG0udmVjM1tdID0+IHtcbiAgY29uc3QgY29tcG9zZWRNYXRyaXggPSBnbG0ubWF0NC5jcmVhdGUoKTtcblxuICBnbG0ubWF0NC5tdWx0aXBseShjb21wb3NlZE1hdHJpeCwgcHJvamVjdGlvbiwgbW9kZWxWaWV3KTtcblxuICByZXR1cm4gc2NlbmVUb1NjcmVlbkNvb3Jkc0Zyb21Db21wb3NlZChzY2VuZVBvcywgY29tcG9zZWRNYXRyaXgsIHZpZXdwb3J0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzY2VuZVRvU2NyZWVuQ29vcmRzRnJvbUNvbXBvc2VkID0gKFxuICBhbGxTY2VuZVBvczogZ2xtLlJlYWRvbmx5VmVjM1tdLFxuICBjb21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCxcbiAgdmlld3BvcnQ6IGdsbS5SZWFkb25seVZlYzRcbik6IGdsbS52ZWMzW10gPT4ge1xuICBjb25zdCBpbnB1dFZlYzQgPSBnbG0udmVjNC5jcmVhdGUoKTtcblxuICBjb25zdCBtdWx0aXBsaWVkVmVjNCA9IGdsbS52ZWM0LmNyZWF0ZSgpO1xuXG4gIGNvbnN0IHJlc3VsdHM6IGdsbS52ZWMzW10gPSBbXTtcblxuICBhbGxTY2VuZVBvcy5mb3JFYWNoKChzY2VuZVBvcykgPT4ge1xuICAgIGlucHV0VmVjNFswXSA9IHNjZW5lUG9zWzBdO1xuICAgIGlucHV0VmVjNFsxXSA9IHNjZW5lUG9zWzFdO1xuICAgIGlucHV0VmVjNFsyXSA9IHNjZW5lUG9zWzJdO1xuICAgIGlucHV0VmVjNFszXSA9IDE7XG5cbiAgICBnbG0udmVjNC50cmFuc2Zvcm1NYXQ0KG11bHRpcGxpZWRWZWM0LCBpbnB1dFZlYzQsIGNvbXBvc2VkTWF0cml4KTtcblxuICAgIC8vVGhlIHJlc3VsdCBub3JtYWxpemVzIGJldHdlZW4gLTEgYW5kIDFcbiAgICBpZiAobXVsdGlwbGllZFZlYzRbM10gPT09IDApIHtcbiAgICAgIC8vVGhlIHcgdmFsdWVcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIG11bHRpcGxpZWRWZWM0WzNdID0gMSAvIG11bHRpcGxpZWRWZWM0WzNdO1xuICAgIC8vIFBlcnNwZWN0aXZlIGRpdmlzaW9uXG4gICAgbXVsdGlwbGllZFZlYzRbMF0gKj0gbXVsdGlwbGllZFZlYzRbM107XG4gICAgbXVsdGlwbGllZFZlYzRbMV0gKj0gbXVsdGlwbGllZFZlYzRbM107XG4gICAgbXVsdGlwbGllZFZlYzRbMl0gKj0gbXVsdGlwbGllZFZlYzRbM107XG5cbiAgICAvLyBXaW5kb3cgY29vcmRpbmF0ZXNcbiAgICAvLyBNYXAgeCwgeSB0byByYW5nZSAwLTFcbiAgICAobXVsdGlwbGllZFZlYzRbMF0gPVxuICAgICAgKG11bHRpcGxpZWRWZWM0WzBdICogMC41ICsgMC41KSAqIHZpZXdwb3J0WzJdICsgdmlld3BvcnRbMF0pLFxuICAgICAgKG11bHRpcGxpZWRWZWM0WzFdID1cbiAgICAgICAgKG11bHRpcGxpZWRWZWM0WzFdICogMC41ICsgMC41KSAqIHZpZXdwb3J0WzNdICsgdmlld3BvcnRbMV0pO1xuXG4gICAgcmVzdWx0cy5wdXNoKGdsbS52ZWMzLmNvcHkoZ2xtLnZlYzMuY3JlYXRlKCksIG11bHRpcGxpZWRWZWM0IGFzIGdsbS52ZWMzKSk7XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHRzO1xufTtcbiIsCiAgIi8vIGh0dHBzOi8vd3d3Lm9wZW5nbC5vcmcvd2lraS9HbHVQcm9qZWN0X2FuZF9nbHVVblByb2plY3RfY29kZVxuXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuZXhwb3J0IGNvbnN0IHNjcmVlblRvU2NlbmVDb29yZGluYXRlcyA9IChcbiAgYWxsU2NyZWVuUG9zOiBnbG0uUmVhZG9ubHlWZWMzW10sXG4gIG1vZGVsVmlldzogZ2xtLlJlYWRvbmx5TWF0NCxcbiAgcHJvamVjdGlvbjogZ2xtLlJlYWRvbmx5TWF0NCxcbiAgdmlld3BvcnQ6IGdsbS5SZWFkb25seVZlYzRcbik6IGdsbS52ZWMzW10gPT4ge1xuICBjb25zdCBjb21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCA9IGdsbS5tYXQ0Lm11bHRpcGx5KFxuICAgIGdsbS5tYXQ0LmNyZWF0ZSgpLFxuICAgIHByb2plY3Rpb24sXG4gICAgbW9kZWxWaWV3XG4gICk7XG4gIHJldHVybiBzY3JlZW5Ub1NjZW5lQ29vcmRpbmF0ZXNGcm9tQ29tcG9zZWQoXG4gICAgYWxsU2NyZWVuUG9zLFxuICAgIGNvbXBvc2VkTWF0cml4LFxuICAgIHZpZXdwb3J0XG4gICk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2NyZWVuVG9TY2VuZUNvb3JkaW5hdGVzRnJvbUNvbXBvc2VkID0gKFxuICBhbGxTY3JlZW5Qb3M6IGdsbS5SZWFkb25seVZlYzNbXSxcbiAgY29tcG9zZWRNYXRyaXg6IGdsbS5SZWFkb25seU1hdDQsXG4gIHZpZXdwb3J0OiBnbG0uUmVhZG9ubHlWZWM0XG4pOiBnbG0udmVjM1tdID0+IHtcbiAgY29uc3QgaW52ZXJ0ZWRDb21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCA9IGdsbS5tYXQ0LmludmVydChcbiAgICBnbG0ubWF0NC5jcmVhdGUoKSxcbiAgICBjb21wb3NlZE1hdHJpeFxuICApO1xuXG4gIHJldHVybiBzY3JlZW5Ub1NjZW5lQ29vcmRpbmF0ZXNGcm9tSW52Q29tcG9zZWQoXG4gICAgYWxsU2NyZWVuUG9zLFxuICAgIGludmVydGVkQ29tcG9zZWRNYXRyaXgsXG4gICAgdmlld3BvcnRcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzY3JlZW5Ub1NjZW5lQ29vcmRpbmF0ZXNGcm9tSW52Q29tcG9zZWQgPSAoXG4gIGFsbFNjcmVlblBvczogZ2xtLlJlYWRvbmx5VmVjM1tdLFxuICBpbnZlcnRlZENvbXBvc2VkTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQ0LFxuICB2aWV3cG9ydDogZ2xtLlJlYWRvbmx5VmVjNFxuKTogZ2xtLnZlYzNbXSA9PiB7XG4gIGNvbnN0IHJlc3VsdHM6IGdsbS52ZWMzW10gPSBbXTtcblxuICBjb25zdCBtdWx0aXBsaWVkVmVjNCA9IGdsbS52ZWM0LmNyZWF0ZSgpO1xuXG4gIGFsbFNjcmVlblBvcy5mb3JFYWNoKChzY3JlZW5Qb3MpID0+IHtcbiAgICBtdWx0aXBsaWVkVmVjNFswXSA9XG4gICAgICAoKHNjcmVlblBvc1swXSAtIHZpZXdwb3J0WzBdKSAvIHZpZXdwb3J0WzJdKSAqIDIuMCAtIDEuMDtcbiAgICBtdWx0aXBsaWVkVmVjNFsxXSA9XG4gICAgICAoKHNjcmVlblBvc1sxXSAtIHZpZXdwb3J0WzFdKSAvIHZpZXdwb3J0WzNdKSAqIDIuMCAtIDEuMDtcbiAgICBtdWx0aXBsaWVkVmVjNFsyXSA9IDIuMCAqIHNjcmVlblBvc1syXSAtIDEuMDtcbiAgICBtdWx0aXBsaWVkVmVjNFszXSA9IDEuMDtcblxuICAgIGdsbS52ZWM0LnRyYW5zZm9ybU1hdDQoXG4gICAgICBtdWx0aXBsaWVkVmVjNCxcbiAgICAgIG11bHRpcGxpZWRWZWM0LFxuICAgICAgaW52ZXJ0ZWRDb21wb3NlZE1hdHJpeFxuICAgICk7XG5cbiAgICAvL1RoZSByZXN1bHQgbm9ybWFsaXplcyBiZXR3ZWVuIC0xIGFuZCAxXG4gICAgaWYgKG11bHRpcGxpZWRWZWM0WzNdID09PSAwKSB7XG4gICAgICAvLyBUaGUgdyB2YWx1ZVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG11bHRpcGxpZWRWZWM0WzNdID0gMSAvIG11bHRpcGxpZWRWZWM0WzNdO1xuICAgIC8vIFBlcnNwZWN0aXZlIGRpdmlzaW9uXG4gICAgbXVsdGlwbGllZFZlYzRbMF0gKj0gbXVsdGlwbGllZFZlYzRbM107XG4gICAgbXVsdGlwbGllZFZlYzRbMV0gKj0gbXVsdGlwbGllZFZlYzRbM107XG4gICAgbXVsdGlwbGllZFZlYzRbMl0gKj0gbXVsdGlwbGllZFZlYzRbM107XG5cbiAgICByZXN1bHRzLnB1c2goZ2xtLnZlYzMuY29weShnbG0udmVjMy5jcmVhdGUoKSwgbXVsdGlwbGllZFZlYzQgYXMgZ2xtLnZlYzMpKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdHM7XG59O1xuIiwKICAiZXhwb3J0IGNsYXNzIFdlYkdMQ29udGV4dCB7XG4gIHByaXZhdGUgc3RhdGljIF9nbDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXRpYyBfZXh0ZW5zaW9uTG9zZUNvbnRleHQ6IFdFQkdMX2xvc2VfY29udGV4dCB8IG51bGwgPSBudWxsO1xuXG4gIHN0YXRpYyBpbml0aWFsaXplKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICBjb25zdCByZW5kZXJpbmdDb250ZXh0QXR0cmliczogV2ViR0xDb250ZXh0QXR0cmlidXRlcyA9IHtcbiAgICAgIC8vIEJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlIGNhbnZhcyBjb250YWlucyBhbiBhbHBoYSBidWZmZXIuXG4gICAgICBhbHBoYTogZmFsc2UsXG5cbiAgICAgIC8vIEJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgd2hldGhlciBvciBub3QgdG8gcGVyZm9ybSBhbnRpLWFsaWFzaW5nLlxuICAgICAgYW50aWFsaWFzOiBmYWxzZSxcblxuICAgICAgLy8gQm9vbGVhbiB0aGF0IGluZGljYXRlcyB0aGF0IHRoZSBkcmF3aW5nIGJ1ZmZlciBoYXMgYSBkZXB0aFxuICAgICAgLy8gYnVmZmVyIG9mIGF0IGxlYXN0IDE2IGJpdHMuXG4gICAgICBkZXB0aDogdHJ1ZSxcblxuICAgICAgLy8gQm9vbGVhbiB0aGF0IGluZGljYXRlcyBpZiBhIGNvbnRleHQgd2lsbCBiZSBjcmVhdGVkIGlmIHRoZVxuICAgICAgLy8gc3lzdGVtIHBlcmZvcm1hbmNlIGlzIGxvdy5cbiAgICAgIGZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6IGZhbHNlLFxuXG4gICAgICAvLyBBIGhpbnQgdG8gdGhlIHVzZXIgYWdlbnQgaW5kaWNhdGluZyB3aGF0IGNvbmZpZ3VyYXRpb24gb2YgR1BVIGlzXG4gICAgICAvLyBzdWl0YWJsZSBmb3IgdGhlIFdlYkdMIGNvbnRleHQuIFBvc3NpYmxlIHZhbHVlcyBhcmU6XG4gICAgICAvLyBcImRlZmF1bHRcIjpcbiAgICAgIC8vICAgICBMZXQgdGhlIHVzZXIgYWdlbnQgZGVjaWRlIHdoaWNoIEdQVSBjb25maWd1cmF0aW9uIGlzIG1vc3RcbiAgICAgIC8vICAgICBzdWl0YWJsZS4gVGhpcyBpcyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgIC8vIFwiaGlnaC1wZXJmb3JtYW5jZVwiOlxuICAgICAgLy8gICAgIFByaW9yaXRpemVzIHJlbmRlcmluZyBwZXJmb3JtYW5jZSBvdmVyIHBvd2VyIGNvbnN1bXB0aW9uLlxuICAgICAgLy8gXCJsb3ctcG93ZXJcIjpcbiAgICAgIC8vICAgICBQcmlvcml0aXplcyBwb3dlciBzYXZpbmcgb3ZlciByZW5kZXJpbmcgcGVyZm9ybWFuY2UuXG4gICAgICBwb3dlclByZWZlcmVuY2U6ICdoaWdoLXBlcmZvcm1hbmNlJyxcblxuICAgICAgLy8gQm9vbGVhbiB0aGF0IGluZGljYXRlcyB0aGF0IHRoZSBwYWdlIGNvbXBvc2l0b3Igd2lsbCBhc3N1bWUgdGhlXG4gICAgICAvLyBkcmF3aW5nIGJ1ZmZlciBjb250YWlucyBjb2xvcnMgd2l0aCBwcmUtbXVsdGlwbGllZCBhbHBoYS5cbiAgICAgIHByZW11bHRpcGxpZWRBbHBoYTogdHJ1ZSwgLy8gc2xvd2VyIGZyYW1lcmF0ZSB3aGVuIGZhbHNlXG5cbiAgICAgIC8vIElmIHRoZSB2YWx1ZSBpcyB0cnVlIHRoZSBidWZmZXJzIHdpbGwgbm90IGJlIGNsZWFyZWQgYW5kIHdpbGxcbiAgICAgIC8vIHByZXNlcnZlIHRoZWlyIHZhbHVlcyB1bnRpbCBjbGVhcmVkIG9yIG92ZXJ3cml0dGVuIGJ5IHRoZSBhdXRob3IuXG4gICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IHRydWUsXG5cbiAgICAgIC8vIEJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgdGhhdCB0aGUgZHJhd2luZyBidWZmZXIgaGFzIGFcbiAgICAgIC8vIHN0ZW5jaWwgYnVmZmVyIG9mIGF0IGxlYXN0IDggYml0cy5cbiAgICAgIHN0ZW5jaWw6IGZhbHNlXG4gICAgfTtcblxuICAgIFdlYkdMQ29udGV4dC5fZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wyJywgcmVuZGVyaW5nQ29udGV4dEF0dHJpYnMpO1xuXG4gICAgaWYgKCFXZWJHTENvbnRleHQuX2dsKSB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBjcmVhdGUgd2ViZ2wgY29udGV4dCcpO1xuXG4gICAgV2ViR0xDb250ZXh0Ll9leHRlbnNpb25Mb3NlQ29udGV4dCA9XG4gICAgICBXZWJHTENvbnRleHQuX2dsLmdldEV4dGVuc2lvbignV0VCR0xfbG9zZV9jb250ZXh0Jyk7XG5cbiAgICBXZWJHTENvbnRleHQuX2dsLmdldEV4dGVuc2lvbignRVhUX2NvbG9yX2J1ZmZlcl9mbG9hdCcpO1xuICAgIFdlYkdMQ29udGV4dC5fZ2wuZ2V0RXh0ZW5zaW9uKCdFWFRfZmxvYXRfYmxlbmQnKTtcbiAgfVxuXG4gIC8vXG4gIC8vXG4gIC8vXG5cbiAgc3RhdGljIGdldENvbnRleHQoKSB7XG4gICAgaWYgKCFXZWJHTENvbnRleHQuX2dsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dlYmdsIGNvbnRleHQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIHJldHVybiBXZWJHTENvbnRleHQuX2dsO1xuICB9XG5cbiAgLy9cbiAgLy9cbiAgLy9cblxuICBzdGF0aWMgZ2V0RXh0ZW5zaW9uTG9zZUNvbnRleHQoKSB7XG4gICAgcmV0dXJuIFdlYkdMQ29udGV4dC5fZXh0ZW5zaW9uTG9zZUNvbnRleHQ7XG4gIH1cblxuICBzdGF0aWMgZ2V0RXh0ZW5zaW9uTG9zZUNvbnRleHRTdHJpY3QoKSB7XG4gICAgaWYgKCFXZWJHTENvbnRleHQuX2V4dGVuc2lvbkxvc2VDb250ZXh0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2xvc2UgY29udGV4dCBleHRlbnNpb24gbm90IGF2YWlsYWJsZScpO1xuICAgIH1cblxuICAgIHJldHVybiBXZWJHTENvbnRleHQuX2V4dGVuc2lvbkxvc2VDb250ZXh0O1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5cbmV4cG9ydCBlbnVtIEN1YmVNYXBUeXBlIHtcbiAgcG9zaXRpdmVYLFxuICBuZWdhdGl2ZVgsXG4gIHBvc2l0aXZlWSxcbiAgbmVnYXRpdmVZLFxuICBwb3NpdGl2ZVosXG4gIG5lZ2F0aXZlWlxufVxuXG5leHBvcnQgY29uc3QgZ2V0Q3ViZU1hcFR5cGUgPSAoaW5UeXBlOiBDdWJlTWFwVHlwZSk6IG51bWJlciA9PiB7XG4gIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgc3dpdGNoIChpblR5cGUpIHtcbiAgICBjYXNlIEN1YmVNYXBUeXBlLnBvc2l0aXZlWDpcbiAgICAgIHJldHVybiBnbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1g7XG4gICAgY2FzZSBDdWJlTWFwVHlwZS5uZWdhdGl2ZVg6XG4gICAgICByZXR1cm4gZ2wuVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9YO1xuICAgIGNhc2UgQ3ViZU1hcFR5cGUucG9zaXRpdmVZOlxuICAgICAgcmV0dXJuIGdsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWTtcbiAgICBjYXNlIEN1YmVNYXBUeXBlLm5lZ2F0aXZlWTpcbiAgICAgIHJldHVybiBnbC5URVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1k7XG4gICAgY2FzZSBDdWJlTWFwVHlwZS5wb3NpdGl2ZVo6XG4gICAgICByZXR1cm4gZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9aO1xuICAgIGNhc2UgQ3ViZU1hcFR5cGUubmVnYXRpdmVaOlxuICAgICAgcmV0dXJuIGdsLlRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWjtcbiAgfVxuICAvLyB0aHJvdyBuZXcgRXJyb3IoJ2N1YmUgbWFwOiBpbnZhbGlkIHR5cGUnKTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRDdWJlTWFwIHtcbiAgaW5pdGlhbGl6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQ7XG4gIHJhd0JpbmQoKTogdm9pZDtcbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZEN1YmVNYXApID0+IHZvaWQpOiB2b2lkO1xuICBnZXRSYXdPYmplY3QoKTogV2ViR0xUZXh0dXJlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCb3VuZEN1YmVNYXAge1xuICBhbGxvY2F0ZSgpOiB2b2lkO1xuICBsb2FkRnJvbU1lbW9yeShpblR5cGU6IEN1YmVNYXBUeXBlLCBpblBpeGVsczogVWludDhBcnJheSk6IHZvaWQ7XG4gIGNvbXBsZXRlKCk6IHZvaWQ7XG4gIGdldFJhd09iamVjdCgpOiBXZWJHTFRleHR1cmU7XG59XG5cbmV4cG9ydCBjbGFzcyBDdWJlTWFwIGltcGxlbWVudHMgSVVuYm91bmRDdWJlTWFwLCBJQm91bmRDdWJlTWFwIHtcbiAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbWluQnVmZmVyU2l6ZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfdGV4dHVyZTogV2ViR0xUZXh0dXJlIHwgbnVsbCA9IG51bGw7XG5cbiAgaW5pdGlhbGl6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh3aWR0aCA8IDEpIHRocm93IG5ldyBFcnJvcihgY3ViZSBtYXA6IHdpZHRoIGlzIDwgMSwgaW5wdXQ6ICR7d2lkdGh9YCk7XG4gICAgaWYgKGhlaWdodCA8IDEpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGN1YmUgbWFwOiBoZWlnaHQgaXMgPCAxLCBpbnB1dDogJHtoZWlnaHR9YCk7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIHRoaXMuX3RleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fbWluQnVmZmVyU2l6ZSA9IHRoaXMuX3dpZHRoICogdGhpcy5faGVpZ2h0ICogNDtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy5fdGV4dHVyZSk7XG4gIH1cblxuICByYXdCaW5kKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkgdGhyb3cgbmV3IEVycm9yKCdjdWJlIG1hcDogbm90IGluaXRpYWxpemVkJyk7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfQ1VCRV9NQVAsIHRoaXMuX3RleHR1cmUpO1xuICB9XG5cbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZEN1YmVNYXApID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnJhd0JpbmQoKTtcblxuICAgIGluQ2FsbGJhY2sodGhpcyk7XG5cbiAgICBDdWJlTWFwLnVuYmluZCgpO1xuICB9XG5cbiAgc3RhdGljIHVuYmluZCgpOiB2b2lkIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFX0NVQkVfTUFQLCBudWxsKTtcbiAgfVxuXG4gIGxvYWRGcm9tTWVtb3J5KGluVHlwZTogQ3ViZU1hcFR5cGUsIGluUGl4ZWxzOiBVaW50OEFycmF5KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ2N1YmUgbWFwOiBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICBpZiAoaW5QaXhlbHMubGVuZ3RoIDwgdGhpcy5fbWluQnVmZmVyU2l6ZSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYGN1YmUgbWFwOiBtaXNzLW1hdGNoaW5nIHBpeGVscyBidWZmZXIgc2l6ZSwgaW5wdXQ6ICR7aW5QaXhlbHMubGVuZ3RofWBcbiAgICAgICk7XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBjb25zdCBsZXZlbCA9IDA7XG4gICAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBnbC5SR0JBO1xuICAgIGNvbnN0IGJvcmRlciA9IDA7XG4gICAgY29uc3Qgc3JjRm9ybWF0ID0gZ2wuUkdCQTtcbiAgICBjb25zdCBzcmNUeXBlID0gZ2wuVU5TSUdORURfQllURTtcblxuICAgIGdsLnRleEltYWdlMkQoXG4gICAgICBnZXRDdWJlTWFwVHlwZShpblR5cGUpLFxuICAgICAgbGV2ZWwsXG4gICAgICBpbnRlcm5hbEZvcm1hdCxcbiAgICAgIHRoaXMuX3dpZHRoLFxuICAgICAgdGhpcy5faGVpZ2h0LFxuICAgICAgYm9yZGVyLFxuICAgICAgc3JjRm9ybWF0LFxuICAgICAgc3JjVHlwZSxcbiAgICAgIGluUGl4ZWxzXG4gICAgKTtcbiAgfVxuXG4gIGFsbG9jYXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IGdsLlJHQkE7XG4gICAgY29uc3QgYm9yZGVyID0gMDtcbiAgICBjb25zdCBzcmNGb3JtYXQgPSBnbC5SR0JBO1xuICAgIGNvbnN0IHNyY1R5cGUgPSBnbC5VTlNJR05FRF9CWVRFO1xuXG4gICAgY29uc3QgcGl4ZWxzID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fd2lkdGggKiB0aGlzLl9oZWlnaHQgKiA0KTtcblxuICAgIFtcbiAgICAgIEN1YmVNYXBUeXBlLm5lZ2F0aXZlWCxcbiAgICAgIEN1YmVNYXBUeXBlLm5lZ2F0aXZlWSxcbiAgICAgIEN1YmVNYXBUeXBlLm5lZ2F0aXZlWixcbiAgICAgIEN1YmVNYXBUeXBlLnBvc2l0aXZlWCxcbiAgICAgIEN1YmVNYXBUeXBlLnBvc2l0aXZlWSxcbiAgICAgIEN1YmVNYXBUeXBlLnBvc2l0aXZlWlxuICAgIF0uZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgZ2wudGV4SW1hZ2UyRChcbiAgICAgICAgZ2V0Q3ViZU1hcFR5cGUodHlwZSksXG4gICAgICAgIGxldmVsLFxuICAgICAgICBpbnRlcm5hbEZvcm1hdCxcbiAgICAgICAgdGhpcy5fd2lkdGgsXG4gICAgICAgIHRoaXMuX2hlaWdodCxcbiAgICAgICAgYm9yZGVyLFxuICAgICAgICBzcmNGb3JtYXQsXG4gICAgICAgIHNyY1R5cGUsXG4gICAgICAgIHBpeGVsc1xuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBsZXRlKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmdlbmVyYXRlTWlwbWFwKGdsLlRFWFRVUkVfQ1VCRV9NQVApO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoXG4gICAgICBnbC5URVhUVVJFX0NVQkVfTUFQLFxuICAgICAgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLFxuICAgICAgZ2wuTElORUFSX01JUE1BUF9MSU5FQVJcbiAgICApO1xuICB9XG5cbiAgZ2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcignY3ViZSBtYXA6IG5vdCBpbml0aWFsaXplZCcpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICB9XG5cbiAgZ2V0SGVpZ2h0KCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ2N1YmUgbWFwOiBub3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gIH1cblxuICBnZXRSYXdPYmplY3QoKSB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG5cbiAgICAvLyBUT0RPOiB0aGlzIGlzIHVnbHlcbiAgICByZXR1cm4gdGhpcy5fdGV4dHVyZTtcbiAgfVxufVxuIiwKICAiaW1wb3J0IHsgV2ViR0xDb250ZXh0IH0gZnJvbSAnLi9XZWJHTENvbnRleHQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElVbmJvdW5kRGF0YVRleHR1cmUge1xuICBpbml0aWFsaXplKGRhdGE6IG51bWJlcltdIHwgbnVtYmVyKTogdm9pZDtcbiAgcmF3QmluZCgpOiB2b2lkO1xuICBwcmVCaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmUpID0+IHZvaWQpOiB2b2lkO1xuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmUpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCb3VuZERhdGFUZXh0dXJlIGV4dGVuZHMgSVVuYm91bmREYXRhVGV4dHVyZSB7XG4gIGFsbG9jYXRlKGRhdGE6IG51bWJlcltdIHwgbnVtYmVyKTogdm9pZDtcbiAgdXBkYXRlKHN0YXJ0OiBudW1iZXIsIGRhdGE6IG51bWJlcltdKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFUZXh0dXJlIGltcGxlbWVudHMgSUJvdW5kRGF0YVRleHR1cmUge1xuICBwcml2YXRlIF90ZXh0dXJlOiBXZWJHTFRleHR1cmUgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIF9idWZmZXI6IEZsb2F0MzJBcnJheSB8IHVuZGVmaW5lZDtcblxuICAvLyBpbml0aWFsaXplKGRhdGE6IG51bWJlcltdID0gW10sIG51bUNvbXBvbmVudHM6IG51bWJlciA9IDEpIHtcbiAgaW5pdGlhbGl6ZShkYXRhOiBudW1iZXJbXSB8IG51bWJlcikge1xuICAgIGlmICh0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSBhbHJlYWR5IGluaXRpYWxpemVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgdGhpcy5fdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0ZXh0dXJlIGZhaWxlZCB0byBiZSBjcmVhdGVkJyk7XG4gICAgfVxuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fdGV4dHVyZSk7XG5cbiAgICAvLyB3ZSBkb24ndCB3YW50IGFueSBmaWx0ZXJpbmdcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuXG4gICAgLy8gdGhpcy51cGRhdGUoZGF0YSwgbnVtQ29tcG9uZW50cyk7XG4gICAgdGhpcy5hbGxvY2F0ZShkYXRhKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy5fdGV4dHVyZSk7XG4gIH1cblxuICBhbGxvY2F0ZShkYXRhOiBudW1iZXJbXSB8IG51bWJlcikge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFTaXplID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEubGVuZ3RoIDogZGF0YTtcbiAgICBpZiAoZGF0YVNpemUgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiB3aWR0aCBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuICAgIGlmIChkYXRhU2l6ZSA+IDIwNDgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgZGF0YSB0ZXh0dXJlIG1heCBzaXplIGlzIDIwNDggKGlucHV0IHdhcyAke2RhdGFTaXplfSlgKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcblxuICAgIC8vIGRvbmUgZm9yIHR5cGUgc2FmZXR5IGNvbXBsaWFuY2UgcmVhc29uc1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAvLyAtPiBuZXcgRmxvYXQzMkFycmF5KG51bWJlcltdKVxuICAgICAgdGhpcy5fYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gLT4gbmV3IEZsb2F0MzJBcnJheShudW1iZXIpXG4gICAgICB0aGlzLl9idWZmZXIgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgIH1cblxuICAgIC8vIC8vIGV4cGFuZCB0aGUgZGF0YSB0byA0IHZhbHVlcyBwZXIgcGl4ZWwuXG4gICAgLy8gY29uc3QgbnVtRWxlbWVudHMgPSBkYXRhLmxlbmd0aCAvIG51bUNvbXBvbmVudHM7XG4gICAgLy8gY29uc3QgZXhwYW5kZWREYXRhID0gbmV3IEZsb2F0MzJBcnJheShudW1FbGVtZW50cyAqIDQpO1xuICAgIC8vIGZvciAobGV0IGlpID0gMDsgaWkgPCBudW1FbGVtZW50czsgKytpaSkge1xuICAgIC8vICAgY29uc3Qgc3JjT2Zmc2V0ID0gaWkgKiBudW1Db21wb25lbnRzO1xuICAgIC8vICAgY29uc3QgZHN0T2Zmc2V0ID0gaWkgKiA0O1xuICAgIC8vICAgZm9yIChsZXQgamogPSAwOyBqaiA8IG51bUNvbXBvbmVudHM7ICsramopXG4gICAgLy8gICAgIGV4cGFuZGVkRGF0YVtkc3RPZmZzZXQgKyBqal0gPSBkYXRhW3NyY09mZnNldCArIGpqXTtcbiAgICAvLyB9XG5cbiAgICBjb25zdCBsZXZlbCA9IDA7XG4gICAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBnbC5SMzJGO1xuICAgIGNvbnN0IHdpZHRoID0gZGF0YVNpemU7XG4gICAgY29uc3QgaGVpZ2h0ID0gMTtcbiAgICBjb25zdCBib3JkZXIgPSAwO1xuICAgIGNvbnN0IGZvcm1hdCA9IGdsLlJFRDtcbiAgICBjb25zdCB0eXBlID0gZ2wuRkxPQVQ7XG4gICAgZ2wudGV4SW1hZ2UyRChcbiAgICAgIGdsLlRFWFRVUkVfMkQsXG4gICAgICBsZXZlbCxcbiAgICAgIGludGVybmFsRm9ybWF0LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBib3JkZXIsXG4gICAgICBmb3JtYXQsXG4gICAgICB0eXBlLFxuICAgICAgdGhpcy5fYnVmZmVyXG4gICAgKTtcbiAgfVxuXG4gIHVwZGF0ZShzdGFydDogbnVtYmVyLCBkYXRhOiBudW1iZXJbXSkge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG4gICAgfVxuICAgIGlmICghdGhpcy5fYnVmZmVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSB1cGRhdGUgYnV0IG5vdCBwcmV2aW91c2x5IGFsbG9jYXRlZCcpO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgKyBkYXRhLmxlbmd0aCA+IHRoaXMuX2J1ZmZlci5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYGRhdGEgdGV4dHVyZSB1cGRhdGUgYnV0IHNpemUgaXMgbGFyZ2VyIChzdGFydDogJHtzdGFydH0sIGxlbmd0aDogJHtkYXRhLmxlbmd0aH0sIG1heDogJHt0aGlzLl9idWZmZXIubGVuZ3RofSlgXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX3RleHR1cmUpO1xuXG4gICAgLy8gdGhpcy5fYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcblxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBkYXRhLmxlbmd0aDsgKytpaSkge1xuICAgICAgdGhpcy5fYnVmZmVyW2lpXSA9IGRhdGFbaWldO1xuICAgIH1cblxuICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICAvLyBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IGdsLlIzMkY7XG4gICAgY29uc3Qgd2lkdGggPSBkYXRhLmxlbmd0aDtcbiAgICBjb25zdCBoZWlnaHQgPSAxO1xuICAgIC8vIGNvbnN0IGJvcmRlciA9IDA7XG4gICAgY29uc3QgZm9ybWF0ID0gZ2wuUkVEO1xuICAgIGNvbnN0IHR5cGUgPSBnbC5GTE9BVDtcblxuICAgIGNvbnN0IHhvZmZzZXQgPSBzdGFydDtcbiAgICBjb25zdCB5b2Zmc2V0ID0gMDsgLy8gbXVzdCBzdGF5IDBcbiAgICBjb25zdCBzcmNPZmZzZXQgPSAwO1xuXG4gICAgZ2wudGV4U3ViSW1hZ2UyRChcbiAgICAgIGdsLlRFWFRVUkVfMkQsXG4gICAgICBsZXZlbCxcbiAgICAgIHhvZmZzZXQsXG4gICAgICB5b2Zmc2V0LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBmb3JtYXQsXG4gICAgICB0eXBlLFxuICAgICAgdGhpcy5fYnVmZmVyLFxuICAgICAgc3JjT2Zmc2V0XG4gICAgKTtcbiAgfVxuXG4gIHJhd0JpbmQoKSB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcbiAgfVxuXG4gIHByZUJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmREYXRhVGV4dHVyZSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucmF3QmluZCgpO1xuICAgIGluQ2FsbGJhY2sodGhpcyk7XG4gIH1cblxuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmUpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnByZUJpbmQoaW5DYWxsYmFjayk7XG4gICAgRGF0YVRleHR1cmUudW5iaW5kKCk7XG4gIH1cblxuICBzdGF0aWMgdW5iaW5kKCk6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIG51bGwpO1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmREYXRhVGV4dHVyZVZlYzQge1xuICBpbml0aWFsaXplKGRhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdW10pOiB2b2lkO1xuICByYXdCaW5kKCk6IHZvaWQ7XG4gIHByZUJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmREYXRhVGV4dHVyZVZlYzQpID0+IHZvaWQpOiB2b2lkO1xuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmVWZWM0KSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQm91bmREYXRhVGV4dHVyZVZlYzQgZXh0ZW5kcyBJVW5ib3VuZERhdGFUZXh0dXJlVmVjNCB7XG4gIGFsbG9jYXRlKGRhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdW10pOiB2b2lkO1xuICB1cGRhdGUoc3RhcnQ6IG51bWJlciwgZGF0YTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRhVGV4dHVyZVZlYzQgaW1wbGVtZW50cyBJQm91bmREYXRhVGV4dHVyZVZlYzQge1xuICBwcml2YXRlIF90ZXh0dXJlOiBXZWJHTFRleHR1cmUgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIF9idWZmZXI6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQ7XG5cbiAgLy8gaW5pdGlhbGl6ZShkYXRhOiBudW1iZXJbXSA9IFtdLCBudW1Db21wb25lbnRzOiBudW1iZXIgPSAxKSB7XG4gIGluaXRpYWxpemUoZGF0YTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSA9IFtdKSB7XG4gICAgaWYgKHRoaXMuX3RleHR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0ZXh0dXJlIGFscmVhZHkgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICB0aGlzLl90ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgZmFpbGVkIHRvIGJlIGNyZWF0ZWQnKTtcbiAgICB9XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcblxuICAgIC8vIHdlIGRvbid0IHdhbnQgYW55IGZpbHRlcmluZ1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5ORUFSRVNUKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG5cbiAgICAvLyB0aGlzLnVwZGF0ZShkYXRhLCBudW1Db21wb25lbnRzKTtcbiAgICB0aGlzLmFsbG9jYXRlKGRhdGEpO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wuZGVsZXRlVGV4dHVyZSh0aGlzLl90ZXh0dXJlKTtcbiAgfVxuXG4gIC8vIHVwZGF0ZShkYXRhOiBudW1iZXJbXSwgbnVtQ29tcG9uZW50czogbnVtYmVyID0gMSkge1xuICBhbGxvY2F0ZShkYXRhOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdKSB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdGV4dHVyZSBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gICAgaWYgKGRhdGEubGVuZ3RoIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndGV4dHVyZTogd2lkdGggbXVzdCBiZSBwb3NpdGl2ZScpO1xuICAgIH1cblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX3RleHR1cmUpO1xuXG4gICAgdGhpcy5fYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5mbGF0KCkpO1xuXG4gICAgLy8gLy8gZXhwYW5kIHRoZSBkYXRhIHRvIDQgdmFsdWVzIHBlciBwaXhlbC5cbiAgICAvLyBjb25zdCBudW1FbGVtZW50cyA9IGRhdGEubGVuZ3RoIC8gbnVtQ29tcG9uZW50cztcbiAgICAvLyBjb25zdCBleHBhbmRlZERhdGEgPSBuZXcgRmxvYXQzMkFycmF5KG51bUVsZW1lbnRzICogNCk7XG4gICAgLy8gZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bUVsZW1lbnRzOyArK2lpKSB7XG4gICAgLy8gICBjb25zdCBzcmNPZmZzZXQgPSBpaSAqIG51bUNvbXBvbmVudHM7XG4gICAgLy8gICBjb25zdCBkc3RPZmZzZXQgPSBpaSAqIDQ7XG4gICAgLy8gICBmb3IgKGxldCBqaiA9IDA7IGpqIDwgbnVtQ29tcG9uZW50czsgKytqailcbiAgICAvLyAgICAgZXhwYW5kZWREYXRhW2RzdE9mZnNldCArIGpqXSA9IGRhdGFbc3JjT2Zmc2V0ICsgampdO1xuICAgIC8vIH1cblxuICAgIGNvbnN0IGxldmVsID0gMDtcbiAgICBjb25zdCBpbnRlcm5hbEZvcm1hdCA9IGdsLlJHQkE7XG4gICAgY29uc3Qgd2lkdGggPSBkYXRhLmxlbmd0aDtcbiAgICBjb25zdCBoZWlnaHQgPSAxO1xuICAgIGNvbnN0IGJvcmRlciA9IDA7XG4gICAgY29uc3QgZm9ybWF0ID0gZ2wuUkdCQTtcbiAgICBjb25zdCB0eXBlID0gZ2wuVU5TSUdORURfQllURTtcbiAgICBnbC50ZXhJbWFnZTJEKFxuICAgICAgZ2wuVEVYVFVSRV8yRCxcbiAgICAgIGxldmVsLFxuICAgICAgaW50ZXJuYWxGb3JtYXQsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIGJvcmRlcixcbiAgICAgIGZvcm1hdCxcbiAgICAgIHR5cGUsXG4gICAgICB0aGlzLl9idWZmZXJcbiAgICApO1xuICB9XG5cbiAgdXBkYXRlKHN0YXJ0OiBudW1iZXIsIGRhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdW10pIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0ZXh0dXJlIG5vdCBpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2J1ZmZlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRhIHRleHR1cmUgdXBkYXRlIGJ1dCBub3QgcHJldmlvdXNseSBhbGxvY2F0ZWQnKTtcbiAgICB9XG4gICAgaWYgKHN0YXJ0ICsgZGF0YS5sZW5ndGggPiB0aGlzLl9idWZmZXIubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBkYXRhIHRleHR1cmUgdXBkYXRlIGJ1dCBzaXplIGlzIGxhcmdlciAoc3RhcnQ6ICR7c3RhcnR9LCBsZW5ndGg6ICR7ZGF0YS5sZW5ndGh9LCBtYXg6ICR7dGhpcy5fYnVmZmVyLmxlbmd0aH0pYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0aGlzLl90ZXh0dXJlKTtcblxuICAgIC8vIHRoaXMuX2J1ZmZlciA9IG5ldyBVaW50OEFycmF5KGRhdGEuZmxhdCgpKTtcblxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBkYXRhLmxlbmd0aDsgKytpaSkge1xuICAgICAgdGhpcy5fYnVmZmVyW2lpICogNCArIDBdID0gZGF0YVtpaV1bMF07XG4gICAgICB0aGlzLl9idWZmZXJbaWkgKiA0ICsgMV0gPSBkYXRhW2lpXVsxXTtcbiAgICAgIHRoaXMuX2J1ZmZlcltpaSAqIDQgKyAyXSA9IGRhdGFbaWldWzJdO1xuICAgICAgdGhpcy5fYnVmZmVyW2lpICogNCArIDNdID0gZGF0YVtpaV1bM107XG4gICAgfVxuXG4gICAgY29uc3QgbGV2ZWwgPSAwO1xuICAgIGNvbnN0IHdpZHRoID0gZGF0YS5sZW5ndGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gMTtcbiAgICBjb25zdCBmb3JtYXQgPSBnbC5SR0JBO1xuICAgIGNvbnN0IHR5cGUgPSBnbC5VTlNJR05FRF9CWVRFO1xuXG4gICAgY29uc3QgeG9mZnNldCA9IHN0YXJ0O1xuICAgIGNvbnN0IHlvZmZzZXQgPSAwOyAvLyBtdXN0IHN0YXkgMFxuICAgIGNvbnN0IHNyY09mZnNldCA9IDA7XG5cbiAgICBnbC50ZXhTdWJJbWFnZTJEKFxuICAgICAgZ2wuVEVYVFVSRV8yRCxcbiAgICAgIGxldmVsLFxuICAgICAgeG9mZnNldCxcbiAgICAgIHlvZmZzZXQsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIGZvcm1hdCxcbiAgICAgIHR5cGUsXG4gICAgICB0aGlzLl9idWZmZXIsXG4gICAgICBzcmNPZmZzZXRcbiAgICApO1xuICB9XG5cbiAgcmF3QmluZCgpIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0ZXh0dXJlIG5vdCBpbml0aWFsaXplZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX3RleHR1cmUpO1xuICB9XG5cbiAgcHJlQmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZERhdGFUZXh0dXJlVmVjNCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucmF3QmluZCgpO1xuICAgIGluQ2FsbGJhY2sodGhpcyk7XG4gIH1cblxuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kRGF0YVRleHR1cmVWZWM0KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5wcmVCaW5kKGluQ2FsbGJhY2spO1xuICAgIERhdGFUZXh0dXJlVmVjNC51bmJpbmQoKTtcbiAgfVxuXG4gIHN0YXRpYyB1bmJpbmQoKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG4gIH1cbn1cbiIsCiAgImltcG9ydCB7IFdlYkdMQ29udGV4dCB9IGZyb20gJy4vV2ViR0xDb250ZXh0JztcblxuZXhwb3J0IGNvbnN0IGNoZWNrRXJyb3IgPSAoKSA9PiB7XG4gIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgY29uc3QgZXJyb3JJZCA9IGdsLmdldEVycm9yKCk7XG5cbiAgc3dpdGNoIChlcnJvcklkKSB7XG4gICAgLy8gR0xfTk9fRVJST1JcbiAgICAvLyAgIE5vIGVycm9yIGhhcyBiZWVuIHJlY29yZGVkLiBUaGUgdmFsdWUgb2YgdGhpcyBzeW1ib2xpYyBjb25zdGFudCBpcyBndWFyYW50ZWVkIHRvIGJlIDAuXG4gICAgY2FzZSBnbC5JTlZBTElEX0VOVU06XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdnbC5JTlZBTElEX0VOVU1cXG5BbiB1bmFjY2VwdGFibGUgdmFsdWUgaXMgc3BlY2lmaWVkIGZvciBhbiBlbnVtZXJhdGVkIGFyZ3VtZW50LiBUaGUgb2ZmZW5kaW5nIGNvbW1hbmQgaXMgaWdub3JlZCBhbmQgaGFzIG5vIG90aGVyIHNpZGUgZWZmZWN0IHRoYW4gdG8gc2V0IHRoZSBlcnJvciBmbGFnLidcbiAgICAgICk7XG4gICAgY2FzZSBnbC5JTlZBTElEX1ZBTFVFOlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnZ2wuSU5WQUxJRF9WQUxVRVxcbkEgbnVtZXJpYyBhcmd1bWVudCBpcyBvdXQgb2YgcmFuZ2UuIFRoZSBvZmZlbmRpbmcgY29tbWFuZCBpcyBpZ25vcmVkIGFuZCBoYXMgbm8gb3RoZXIgc2lkZSBlZmZlY3QgdGhhbiB0byBzZXQgdGhlIGVycm9yIGZsYWcuJ1xuICAgICAgKTtcbiAgICBjYXNlIGdsLklOVkFMSURfT1BFUkFUSU9OOlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnZ2wuSU5WQUxJRF9PUEVSQVRJT05cXG5UaGUgc3BlY2lmaWVkIG9wZXJhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiB0aGUgY3VycmVudCBzdGF0ZS4gVGhlIG9mZmVuZGluZyBjb21tYW5kIGlzIGlnbm9yZWQgYW5kIGhhcyBubyBvdGhlciBzaWRlIGVmZmVjdCB0aGFuIHRvIHNldCB0aGUgZXJyb3IgZmxhZy4nXG4gICAgICApO1xuICAgIGNhc2UgZ2wuSU5WQUxJRF9GUkFNRUJVRkZFUl9PUEVSQVRJT046XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdnbC5JTlZBTElEX0ZSQU1FQlVGRkVSX09QRVJBVElPTlxcblRoZSBmcmFtZWJ1ZmZlciBvYmplY3QgaXMgbm90IGNvbXBsZXRlLiBUaGUgb2ZmZW5kaW5nIGNvbW1hbmQgaXMgaWdub3JlZCBhbmQgaGFzIG5vIG90aGVyIHNpZGUgZWZmZWN0IHRoYW4gdG8gc2V0IHRoZSBlcnJvciBmbGFnLidcbiAgICAgICk7XG4gICAgY2FzZSBnbC5PVVRfT0ZfTUVNT1JZOlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnZ2wuT1VUX09GX01FTU9SWVxcblRoZXJlIGlzIG5vdCBlbm91Z2ggbWVtb3J5IGxlZnQgdG8gZXhlY3V0ZSB0aGUgY29tbWFuZC4gVGhlIHN0YXRlIG9mIHRoZSBHTCBpcyB1bmRlZmluZWQsIGV4Y2VwdCBmb3IgdGhlIHN0YXRlIG9mIHRoZSBlcnJvciBmbGFncywgYWZ0ZXIgdGhpcyBlcnJvciBpcyByZWNvcmRlZC4nXG4gICAgICApO1xuICAgIGNhc2UgZ2wuQ09OVEVYVF9MT1NUX1dFQkdMOlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnZ2wuQ09OVEVYVF9MT1NUX1dFQkdMXFxuIElmIHRoZSBXZWJHTCBjb250ZXh0IGlzIGxvc3QsIHRoaXMgZXJyb3IgaXMgcmV0dXJuZWQgb24gdGhlIGZpcnN0IGNhbGwgdG8gZ2V0RXJyb3IuIEFmdGVyd2FyZHMgYW5kIHVudGlsIHRoZSBjb250ZXh0IGhhcyBiZWVuIHJlc3RvcmVkLCBpdCByZXR1cm5zIGdsLk5PX0VSUk9SLidcbiAgICAgICk7XG4gICAgLy8gY2FzZSBnbC5TVEFDS19VTkRFUkZMT1c6XG4gICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoXCJBbiBhdHRlbXB0IGhhcyBiZWVuIG1hZGUgdG8gcGVyZm9ybSBhbiBvcGVyYXRpb24gdGhhdCB3b3VsZCBjYXVzZSBhbiBpbnRlcm5hbCBzdGFjayB0byB1bmRlcmZsb3cuXCIpXG4gICAgLy8gY2FzZSBnbC5TVEFDS19PVkVSRkxPVzpcbiAgICAvLyAgIHRocm93IG5ldyBFcnJvcihcIkFuIGF0dGVtcHQgaGFzIGJlZW4gbWFkZSB0byBwZXJmb3JtIGFuIG9wZXJhdGlvbiB0aGF0IHdvdWxkIGNhdXNlIGFuIGludGVybmFsIHN0YWNrIHRvIG92ZXJmbG93LlwiKVxuICB9XG59O1xuIiwKICAiaW1wb3J0IHsgV2ViR0xDb250ZXh0IH0gZnJvbSAnLi9XZWJHTENvbnRleHQnO1xuXG5leHBvcnQgY2xhc3MgRmVuY2VTeW5jIHtcbiAgcHJpdmF0ZSBfc3luYzogV2ViR0xTeW5jIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fc3luYykge1xuICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiZmVuY2Ugbm90IHN0YXJ0ZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC5kZWxldGVTeW5jKHRoaXMuX3N5bmMpO1xuICAgIHRoaXMuX3N5bmMgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpc1N0YXJ0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3N5bmMgIT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHN0YXJ0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zeW5jKSB7XG4gICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJmZW5jZSBhbHJlYWR5IHN0YXJ0ZWRcIik7XG4gICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGNvbnN0IHRtcFN5bmMgPSBnbC5mZW5jZVN5bmMoZ2wuU1lOQ19HUFVfQ09NTUFORFNfQ09NUExFVEUsIDApO1xuICAgIGlmICh0bXBTeW5jID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBjcmVhdGUgYSB3ZWJnbCBmZW5jZScpO1xuICAgIH1cbiAgICB0aGlzLl9zeW5jID0gdG1wU3luYztcbiAgICBnbC5mbHVzaCgpO1xuICAgIGdsLmZpbmlzaCgpO1xuICB9XG5cbiAgaXNTaWduYWxlZCgpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuX3N5bmMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZmVuY2Ugbm90IHN0YXJ0ZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgY29uc3Qgc2lnbmFsZWQgPSBnbC5nZXRTeW5jUGFyYW1ldGVyKHRoaXMuX3N5bmMsIGdsLlNZTkNfU1RBVFVTKTtcbiAgICByZXR1cm4gc2lnbmFsZWQgPT09IGdsLlNJR05BTEVEO1xuICB9XG5cbiAgd2FpdCh0aW1lb3V0TmFub1NlYzogbnVtYmVyKTogJ2RvbmUnIHwgJ3RpbWVkLW91dCcge1xuICAgIGlmICghdGhpcy5fc3luYykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmZW5jZSBub3Qgc3RhcnRlZCcpO1xuICAgIH1cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBjb25zdCBiaXRmbGFncyA9IDA7XG4gICAgY29uc3Qgc3RhdHVzID0gZ2wuY2xpZW50V2FpdFN5bmModGhpcy5fc3luYywgYml0ZmxhZ3MsIHRpbWVvdXROYW5vU2VjKTtcblxuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlIGdsLlRJTUVPVVRfRVhQSVJFRDpcbiAgICAgICAgLy8gaXQncyBub3QgZG9uZSwgY2hlY2sgYWdhaW4gbmV4dCB0aW1lXG4gICAgICAgIHJldHVybiAndGltZWQtb3V0JztcbiAgICAgIGNhc2UgZ2wuV0FJVF9GQUlMRUQ6XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcignZmVuY2Uud2FpdCAtPiBzaG91bGQgbmV2ZXIgZ2V0IGhlcmUnKTtcbiAgICAgICAgY29uc29sZS53YXJuKCdmZW5jZS53YWl0IC0+IHNob3VsZCBuZXZlciBnZXQgaGVyZScpO1xuICAgICAgICAvLyByZXR1cm4gJ3RpbWVkLW91dCc7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICByZXR1cm4gJ2RvbmUnO1xuICAgICAgY2FzZSBnbC5BTFJFQURZX1NJR05BTEVEOlxuICAgICAgY2FzZSBnbC5DT05ESVRJT05fU0FUSVNGSUVEOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIHJldHVybiAnZG9uZSc7XG4gICAgfVxuICB9XG59XG4iLAogICJpbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5pbXBvcnQgeyBJQm91bmRUZXh0dXJlIH0gZnJvbSAnLi9UZXh0dXJlJztcbmltcG9ydCB7IElCb3VuZFJlbmRlckJ1ZmZlciB9IGZyb20gJy4vUmVuZGVyQnVmZmVyJztcbmltcG9ydCB7IEN1YmVNYXBUeXBlLCBJQm91bmRDdWJlTWFwLCBnZXRDdWJlTWFwVHlwZSB9IGZyb20gJy4vQ3ViZU1hcCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRGcmFtZUJ1ZmZlciB7XG4gIHJhd0JpbmQoKTogdm9pZDtcbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZEZyYW1lQnVmZmVyKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQm91bmRGcmFtZUJ1ZmZlciB7XG4gIGF0dGFjaFRleHR1cmUodGV4dHVyZTogSUJvdW5kVGV4dHVyZSk6IHZvaWQ7XG4gIGF0dGFjaERlcHRoVGV4dHVyZSh0ZXh0dXJlOiBJQm91bmRUZXh0dXJlKTogdm9pZDtcbiAgYXR0YWNoUmVuZGVyQnVmZmVyKHRleHR1cmU6IElCb3VuZFJlbmRlckJ1ZmZlcik6IHZvaWQ7XG4gIGF0dGFjaEN1YmVNYXAodGV4dHVyZTogSUJvdW5kQ3ViZU1hcCwgdHlwZTogQ3ViZU1hcFR5cGUpOiB2b2lkO1xuICBnZXRQaXhlbHMoXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlcixcbiAgICB3aWR0aDogbnVtYmVyLFxuICAgIGhlaWdodDogbnVtYmVyLFxuICAgIG91dERzdDogVWludDhBcnJheVxuICApOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgRnJhbWVCdWZmZXIgaW1wbGVtZW50cyBJVW5ib3VuZEZyYW1lQnVmZmVyLCBJQm91bmRGcmFtZUJ1ZmZlciB7XG4gIHByaXZhdGUgX2ZyYW1lQnVmZmVyOiBXZWJHTEZyYW1lYnVmZmVyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGNvbnN0IHRtcEZibyA9IGdsLmNyZWF0ZUZyYW1lYnVmZmVyKCk7XG4gICAgaWYgKHRtcEZibyA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdudWxsIGZyYW1lIGJ1ZmZlciBvYmplY3QnKTtcbiAgICB0aGlzLl9mcmFtZUJ1ZmZlciA9IHRtcEZibztcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuX2ZyYW1lQnVmZmVyKTtcbiAgfVxuXG4gIHJhd0JpbmQoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5fZnJhbWVCdWZmZXIpO1xuICB9XG5cbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZEZyYW1lQnVmZmVyKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5yYXdCaW5kKCk7XG5cbiAgICBpbkNhbGxiYWNrKHRoaXMpO1xuXG4gICAgRnJhbWVCdWZmZXIudW5iaW5kKCk7XG4gIH1cblxuICBzdGF0aWMgdW5iaW5kKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gIH1cblxuICBhdHRhY2hUZXh0dXJlKHRleHR1cmU6IElCb3VuZFRleHR1cmUpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICAvLyBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHRoaXMuX2ZyYW1lQnVmZmVyKTtcblxuICAgIC8vIHRleHR1cmUucmF3QmluZCgpO1xuXG4gICAgY29uc3QgbWlwbWFwTGV2ZWwgPSAwO1xuXG4gICAgZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoXG4gICAgICBnbC5GUkFNRUJVRkZFUixcbiAgICAgIGdsLkNPTE9SX0FUVEFDSE1FTlQwLFxuICAgICAgZ2wuVEVYVFVSRV8yRCxcbiAgICAgIHRleHR1cmUuZ2V0UmF3T2JqZWN0KCksXG4gICAgICBtaXBtYXBMZXZlbFxuICAgICk7XG4gIH1cblxuICBhdHRhY2hEZXB0aFRleHR1cmUodGV4dHVyZTogSUJvdW5kVGV4dHVyZSkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIC8vIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgdGhpcy5fZnJhbWVCdWZmZXIpO1xuXG4gICAgLy8gdGV4dHVyZS5yYXdCaW5kKCk7XG5cbiAgICBjb25zdCBtaXBtYXBMZXZlbCA9IDA7XG5cbiAgICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChcbiAgICAgIGdsLkZSQU1FQlVGRkVSLFxuICAgICAgZ2wuREVQVEhfQVRUQUNITUVOVCxcbiAgICAgIGdsLlRFWFRVUkVfMkQsXG4gICAgICB0ZXh0dXJlLmdldFJhd09iamVjdCgpLFxuICAgICAgbWlwbWFwTGV2ZWxcbiAgICApO1xuICB9XG5cbiAgYXR0YWNoUmVuZGVyQnVmZmVyKHRleHR1cmU6IElCb3VuZFJlbmRlckJ1ZmZlcik6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKFxuICAgICAgZ2wuRlJBTUVCVUZGRVIsXG4gICAgICBnbC5ERVBUSF9BVFRBQ0hNRU5ULFxuICAgICAgZ2wuUkVOREVSQlVGRkVSLFxuICAgICAgdGV4dHVyZS5nZXRSYXdPYmplY3QoKVxuICAgICk7XG4gIH1cblxuICBhdHRhY2hDdWJlTWFwKHRleHR1cmU6IElCb3VuZEN1YmVNYXAsIHR5cGU6IEN1YmVNYXBUeXBlKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgLy8gZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCB0aGlzLl9mcmFtZUJ1ZmZlcik7XG5cbiAgICAvLyB0ZXh0dXJlLnJhd0JpbmQoKTtcblxuICAgIGNvbnN0IG1pcG1hcExldmVsID0gMDtcblxuICAgIGdsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKFxuICAgICAgZ2wuRlJBTUVCVUZGRVIsXG4gICAgICBnbC5DT0xPUl9BVFRBQ0hNRU5UMCxcbiAgICAgIGdldEN1YmVNYXBUeXBlKHR5cGUpLFxuICAgICAgdGV4dHVyZS5nZXRSYXdPYmplY3QoKSxcbiAgICAgIG1pcG1hcExldmVsXG4gICAgKTtcbiAgfVxuXG4gIGdldFBpeGVscyhcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyLFxuICAgIHdpZHRoOiBudW1iZXIsXG4gICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgb3V0RHN0OiBVaW50OEFycmF5XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC5yZWFkUGl4ZWxzKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG91dERzdCk7XG4gIH1cbn1cbiIsCiAgImltcG9ydCB7IFdlYkdMQ29udGV4dCB9IGZyb20gJy4vV2ViR0xDb250ZXh0JztcbmltcG9ydCB7IElVbmJvdW5kU2hhZGVyIH0gZnJvbSAnLi9TaGFkZXJQcm9ncmFtJztcblxuZXhwb3J0IGNvbnN0IEJ5dGVzUGVyUGl4ZWwgPSA0OyAvLyBmbG9hdCAoZmxvYXQzMiA9IDQgYnl0ZXMpXG5cbmV4cG9ydCBlbnVtIEF0dHJpYnV0ZVR5cGUge1xuICBmbG9hdCxcbiAgdmVjMmYsXG4gIHZlYzNmLFxuICB2ZWM0ZixcbiAgbWF0M2YsXG4gIG1hdDRmXG59XG5cbmNvbnN0IGdldEF0dHJUeXBlU2l6ZSA9IChpblR5cGU6IEF0dHJpYnV0ZVR5cGUpID0+IHtcbiAgc3dpdGNoIChpblR5cGUpIHtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUuZmxvYXQ6XG4gICAgICByZXR1cm4gMTtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjMmY6XG4gICAgICByZXR1cm4gMjtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjM2Y6XG4gICAgICByZXR1cm4gMztcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjNGY6XG4gICAgICByZXR1cm4gNDtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0M2Y6XG4gICAgICByZXR1cm4gOTtcbiAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0NGY6XG4gICAgICByZXR1cm4gMTY7XG4gIH1cbn07XG5cbmV4cG9ydCBlbnVtIFByaW1pdGl2ZVR5cGUge1xuICBsaW5lcyxcbiAgbGluZVN0cmlwLFxuICBsaW5lTG9vcCxcbiAgdHJpYW5nbGVzLFxuICB0cmlhbmdsZVN0cmlwLFxuICB0cmlhbmdsZUZhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZib0F0dHIge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IEF0dHJpYnV0ZVR5cGU7XG4gIGluZGV4OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmJvRGVmaW5pdGlvbiB7XG4gIGF0dHJzOiBWYm9BdHRyW107XG4gIHN0cmlkZT86IG51bWJlcjtcbiAgaW5zdGFuY2VkOiBib29sZWFuO1xuICBtb2RlPzogJ3N0YXRpYycgfCAnZHluYW1pYycgfCAnc3RyZWFtaW5nJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW9tZXRyeURlZmluaXRpb24ge1xuICB2Ym9zOiBWYm9EZWZpbml0aW9uW107XG4gIHByaW1pdGl2ZVR5cGU6IFByaW1pdGl2ZVR5cGU7XG59XG5cbmNvbnN0IF9lbnN1cmVGbG9hdEJ1ZmZlciA9IChcbiAgdmVydGljZXM6IFJlYWRvbmx5QXJyYXk8bnVtYmVyPiB8IFJlYWRvbmx5PEZsb2F0MzJBcnJheT5cbik6IFJlYWRvbmx5PEZsb2F0MzJBcnJheT4gPT4ge1xuICBpZiAodmVydGljZXMgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHtcbiAgICByZXR1cm4gdmVydGljZXM7XG4gIH1cbiAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpO1xufTtcblxuaW50ZXJmYWNlIElWYm9EYXRhIHtcbiAgb2JqZWN0OiBXZWJHTEJ1ZmZlcjtcbiAgbWF4U2l6ZTogbnVtYmVyO1xuICBtb2RlOiAnc3RhdGljJyB8ICdkeW5hbWljJyB8ICdzdHJlYW1pbmcnO1xufVxuXG5jb25zdCBfZ2V0QnVmZmVyVXNhZ2UgPSAoaW5Nb2RlOiAnc3RhdGljJyB8ICdkeW5hbWljJyB8ICdzdHJlYW1pbmcnKSA9PiB7XG4gIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICBpZiAoaW5Nb2RlID09PSAnZHluYW1pYycpIHtcbiAgICByZXR1cm4gZ2wuRFlOQU1JQ19EUkFXO1xuICB9XG4gIGlmIChpbk1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgcmV0dXJuIGdsLlNUUkVBTV9EUkFXO1xuICB9XG4gIHJldHVybiBnbC5TVEFUSUNfRFJBVztcbn07XG5cbmV4cG9ydCBjbGFzcyBHZW9tZXRyeSB7XG4gIHByaXZhdGUgX2RlZjogR2VvbWV0cnlEZWZpbml0aW9uO1xuICBwcml2YXRlIF92YW86IFdlYkdMVmVydGV4QXJyYXlPYmplY3RPRVM7XG4gIHByaXZhdGUgX3Zib3M6IElWYm9EYXRhW107XG4gIHByaXZhdGUgX3ByaW1pdGl2ZVR5cGU6IG51bWJlcjtcbiAgcHJpdmF0ZSBfcHJpbWl0aXZlU3RhcnQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3ByaW1pdGl2ZUNvdW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9pbnN0YW5jZUNvdW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9pc0luc3RhbmNlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHNoYWRlcjogSVVuYm91bmRTaGFkZXIsIGRlZjogR2VvbWV0cnlEZWZpbml0aW9uKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgaWYgKGRlZi52Ym9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbXB0eSB2Ym8gZGVmaW5pdGlvbicpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgdmJvIG9mIGRlZi52Ym9zKSB7XG4gICAgICBpZiAodmJvLmF0dHJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VtcHR5IHZibyBhdHRyaWJ1dGUgZGVmaW5pdGlvbicpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IGF0dHIgb2YgdmJvLmF0dHJzKSB7XG4gICAgICAgIGlmICghc2hhZGVyLmhhc0F0dHJpYnV0ZShhdHRyLm5hbWUpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBhdHRyaWJ1dGUgbm90IGZvdW5kLCBuYW1lPVwiJHthdHRyLm5hbWV9XCJgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2RlZiA9IGRlZjtcblxuICAgIHN3aXRjaCAoZGVmLnByaW1pdGl2ZVR5cGUpIHtcbiAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS5saW5lczpcbiAgICAgICAgdGhpcy5fcHJpbWl0aXZlVHlwZSA9IGdsLkxJTkVTO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS5saW5lU3RyaXA6XG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZVR5cGUgPSBnbC5MSU5FX1NUUklQO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS5saW5lTG9vcDpcbiAgICAgICAgdGhpcy5fcHJpbWl0aXZlVHlwZSA9IGdsLkxJTkVfTE9PUDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFByaW1pdGl2ZVR5cGUudHJpYW5nbGVzOlxuICAgICAgICB0aGlzLl9wcmltaXRpdmVUeXBlID0gZ2wuVFJJQU5HTEVTO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS50cmlhbmdsZVN0cmlwOlxuICAgICAgICB0aGlzLl9wcmltaXRpdmVUeXBlID0gZ2wuVFJJQU5HTEVfU1RSSVA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBQcmltaXRpdmVUeXBlLnRyaWFuZ2xlRmFuOlxuICAgICAgICB0aGlzLl9wcmltaXRpdmVUeXBlID0gZ2wuVFJJQU5HTEVfRkFOO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigncHJpbWl0aXZlIHR5cGUgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgbmV3VmFvID0gZ2wuY3JlYXRlVmVydGV4QXJyYXkoKTtcbiAgICBpZiAoIW5ld1Zhbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmYWlsIG8gY3JlYXRlIGEgdmFvIHVuaXQnKTtcbiAgICB9XG5cbiAgICB0aGlzLl92YW8gPSBuZXdWYW87XG4gICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuX3Zhbyk7XG5cbiAgICAvL1xuXG4gICAgdGhpcy5fdmJvcyA9IFtdO1xuICAgIGZvciAoY29uc3QgdmJvRGVmIG9mIHRoaXMuX2RlZi52Ym9zKSB7XG4gICAgICBjb25zdCBuZXdWYm8gPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgIGlmICghbmV3VmJvKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZmFpbCBvIGNyZWF0ZSBhIHZibyB1bml0Jyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3Zib3MucHVzaCh7XG4gICAgICAgIG9iamVjdDogbmV3VmJvLFxuICAgICAgICBtYXhTaXplOiAwLFxuICAgICAgICBtb2RlOiB2Ym9EZWYubW9kZSB8fCAnc3RhdGljJ1xuICAgICAgfSk7XG5cbiAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBuZXdWYm8pO1xuXG4gICAgICBsZXQgc3RyaWRlID0gdmJvRGVmLnN0cmlkZSB8fCAwO1xuICAgICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgICAgLy8gYXV0byBkZXRlcm1pbmUgc3RyaWRlIHZhbHVlXG4gICAgICAgIGZvciAoY29uc3QgYXR0ciBvZiB2Ym9EZWYuYXR0cnMpIHtcbiAgICAgICAgICBzd2l0Y2ggKGF0dHIudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBBdHRyaWJ1dGVUeXBlLmZsb2F0OlxuICAgICAgICAgICAgICBzdHJpZGUgKz0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjMmY6XG4gICAgICAgICAgICAgIHN0cmlkZSArPSAyO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlVHlwZS52ZWMzZjpcbiAgICAgICAgICAgICAgc3RyaWRlICs9IDM7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBBdHRyaWJ1dGVUeXBlLnZlYzRmOlxuICAgICAgICAgICAgICBzdHJpZGUgKz0gNDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0M2Y6XG4gICAgICAgICAgICAgIHN0cmlkZSArPSA5O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQXR0cmlidXRlVHlwZS5tYXQ0ZjpcbiAgICAgICAgICAgICAgc3RyaWRlICs9IDE2O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RyaWRlICo9IEJ5dGVzUGVyUGl4ZWw7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgYXR0ciBvZiB2Ym9EZWYuYXR0cnMpIHtcbiAgICAgICAgbGV0IHJvd1NpemUgPSAxO1xuICAgICAgICBsZXQgdG90YWxSb3dzID0gMTtcbiAgICAgICAgc3dpdGNoIChhdHRyLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUuZmxvYXQ6XG4gICAgICAgICAgICByb3dTaXplID0gMTtcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjMmY6XG4gICAgICAgICAgICByb3dTaXplID0gMjtcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjM2Y6XG4gICAgICAgICAgICByb3dTaXplID0gMztcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUudmVjNGY6XG4gICAgICAgICAgICByb3dTaXplID0gNDtcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0M2Y6XG4gICAgICAgICAgICByb3dTaXplID0gMztcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEF0dHJpYnV0ZVR5cGUubWF0NGY6XG4gICAgICAgICAgICByb3dTaXplID0gNDtcbiAgICAgICAgICAgIHRvdGFsUm93cyA9IDQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGF0dHJMb2NhdGlvbiA9IHNoYWRlci5nZXRBdHRyaWJ1dGUoYXR0ci5uYW1lKTtcblxuICAgICAgICAvLyBUT0RPOiBjaGVjayBpZiB0aGUgaW5kZXggaXMgMCBvbiBrPjAgYW5kIGFzc2VydC90aHJvdyBvbiBpdFxuXG4gICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCB0b3RhbFJvd3M7ICsraWkpIHtcbiAgICAgICAgICBjb25zdCBhdHRySWQgPSBhdHRyTG9jYXRpb24gKyBpaTtcbiAgICAgICAgICBjb25zdCByb3dJbmRleCA9IChhdHRyLmluZGV4ICsgaWkgKiByb3dTaXplKSAqIEJ5dGVzUGVyUGl4ZWw7XG5cbiAgICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRySWQpO1xuICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoXG4gICAgICAgICAgICBhdHRySWQsXG4gICAgICAgICAgICByb3dTaXplLFxuICAgICAgICAgICAgZ2wuRkxPQVQsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIHN0cmlkZSxcbiAgICAgICAgICAgIHJvd0luZGV4XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmICh2Ym9EZWYuaW5zdGFuY2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKGF0dHJJZCwgMSk7XG4gICAgICAgICAgICB0aGlzLl9pc0luc3RhbmNlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9cblxuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheShudWxsKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZm9yIChjb25zdCB2Ym8gb2YgdGhpcy5fdmJvcykge1xuICAgICAgZ2wuZGVsZXRlQnVmZmVyKHZiby5vYmplY3QpO1xuICAgIH1cbiAgICB0aGlzLl92Ym9zLmxlbmd0aCA9IDA7XG5cbiAgICBnbC5kZWxldGVWZXJ0ZXhBcnJheSh0aGlzLl92YW8pO1xuICB9XG5cbiAgc2V0QnVmZmVyU2l6ZShpbkluZGV4OiBudW1iZXIsIGluU2l6ZTogbnVtYmVyKSB7XG4gICAgaWYgKGluSW5kZXggPCAwIHx8IGluSW5kZXggPj0gdGhpcy5fdmJvcy5sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgbm8gdmJvIGF2YWlsYWJsZSB0byB0aGF0IGluZGV4IChpbnB1dDogJHtpbkluZGV4fSlgKTtcbiAgICB9XG5cbiAgICBpZiAoaW5TaXplIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdmJvIG11c3QgYmUgPiAwIChpbnB1dDogJHtpblNpemV9KWApO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJWYm8gPSB0aGlzLl92Ym9zW2luSW5kZXhdO1xuXG4gICAgaWYgKGluU2l6ZSA8IGN1cnJWYm8ubWF4U2l6ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGN1cnJWYm8ubWF4U2l6ZSA9IGluU2l6ZTtcblxuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBjdXJyVmJvLm9iamVjdCk7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIGluU2l6ZSwgX2dldEJ1ZmZlclVzYWdlKGN1cnJWYm8ubW9kZSkpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcbiAgfVxuXG4gIHNldEZsb2F0QnVmZmVyU2l6ZShpbmRleDogbnVtYmVyLCBpblNpemU6IG51bWJlcikge1xuICAgIHRoaXMuc2V0QnVmZmVyU2l6ZShpbmRleCwgaW5TaXplICogNCk7XG4gIH1cblxuICBhbGxvY2F0ZUJ1ZmZlcihcbiAgICBpbkluZGV4OiBudW1iZXIsXG4gICAgaW5WZXJ0aWNlczogUmVhZG9ubHlBcnJheTxudW1iZXI+IHwgUmVhZG9ubHk8RmxvYXQzMkFycmF5PixcbiAgICBpblNpemU6IG51bWJlclxuICApIHtcbiAgICBpZiAoaW5JbmRleCA8IDAgfHwgaW5JbmRleCA+PSB0aGlzLl92Ym9zLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgbm8gdmJvIGF2YWlsYWJsZSB0byB0aGF0IGluZGV4IChpbnB1dDogJHtpbkluZGV4fSwgdG90YWwgdmJvczogJHt0aGlzLl92Ym9zLmxlbmd0aH0pYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoaW5TaXplIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgc2l6ZSBtdXN0IGJlID4gMCAoaW5wdXQ6ICR7aW5TaXplfSlgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyVmJvID0gdGhpcy5fdmJvc1tpbkluZGV4XTtcblxuICAgIGlmIChpblNpemUgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB2Ym8gbXVzdCBiZSA+IDAgKGlucHV0OiAke2luU2l6ZX0pYCk7XG4gICAgfVxuXG4gICAgY3VyclZiby5tYXhTaXplID0gaW5TaXplO1xuXG4gICAgY29uc3QgYnVmZmVyID0gX2Vuc3VyZUZsb2F0QnVmZmVyKGluVmVydGljZXMpO1xuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGN1cnJWYm8ub2JqZWN0KTtcbiAgICBnbC5idWZmZXJEYXRhKFxuICAgICAgZ2wuQVJSQVlfQlVGRkVSLFxuICAgICAgYnVmZmVyLFxuICAgICAgX2dldEJ1ZmZlclVzYWdlKGN1cnJWYm8ubW9kZSksXG4gICAgICAwLFxuICAgICAgaW5TaXplXG4gICAgKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XG4gIH1cblxuICB1cGRhdGVCdWZmZXIoXG4gICAgaW5JbmRleDogbnVtYmVyLFxuICAgIGluVmVydGljZXM6IFJlYWRvbmx5QXJyYXk8bnVtYmVyPiB8IFJlYWRvbmx5PEZsb2F0MzJBcnJheT4sXG4gICAgaW5TaXplOiBudW1iZXIsXG4gICAgaW5TdGFydE9mZnNldD86IG51bWJlclxuICApIHtcbiAgICBpZiAoaW5JbmRleCA8IDAgfHwgaW5JbmRleCA+PSB0aGlzLl92Ym9zLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgbm8gdmJvIGF2YWlsYWJsZSB0byB0aGF0IGluZGV4IChpbnB1dDogJHtpbkluZGV4fSwgdG90YWwgdmJvczogJHt0aGlzLl92Ym9zLmxlbmd0aH0pYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoaW5TaXplIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgc2l6ZSBtdXN0IGJlID4gMCAoaW5wdXQ6ICR7aW5TaXplfSlgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyVmJvID0gdGhpcy5fdmJvc1tpbkluZGV4XTtcblxuICAgIGlmIChpblN0YXJ0T2Zmc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChpblN0YXJ0T2Zmc2V0IDwgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG9mZnNldCBtdXN0IGJlID49IDAgKGlucHV0OiAke2luU3RhcnRPZmZzZXR9KWApO1xuICAgICAgfVxuICAgICAgY29uc3QgZW5kSW5kZXggPSBpblN0YXJ0T2Zmc2V0ICsgaW5TaXplO1xuICAgICAgaWYgKGVuZEluZGV4ID4gY3VyclZiby5tYXhTaXplKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgb2Zmc2V0ICsgc2l6ZSA+IHRvIHZibyBtYXggc2l6ZSAoaW5wdXQ6ICR7ZW5kSW5kZXh9LCBtYXggc2l6ZTogJHtjdXJyVmJvLm1heFNpemV9KWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGluU2l6ZSA+IGN1cnJWYm8ubWF4U2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgc2l6ZSBtdXN0IGJlIDwgdG8gdmJvIG1heCBzaXplIChpbnB1dDogJHtpblNpemV9LCBtYXggc2l6ZTogJHtjdXJyVmJvLm1heFNpemV9KWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gX2Vuc3VyZUZsb2F0QnVmZmVyKGluVmVydGljZXMpO1xuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGN1cnJWYm8ub2JqZWN0KTtcbiAgICBnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgaW5TdGFydE9mZnNldCA/PyAwLCBidWZmZXIuc2xpY2UoMCwgaW5TaXplKSwgMCwgaW5TaXplKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMuX3ByaW1pdGl2ZUNvdW50ID09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faXNJbnN0YW5jZWQgJiYgdGhpcy5faW5zdGFuY2VDb3VudCA9PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuX3Zhbyk7XG5cbiAgICBpZiAodGhpcy5faXNJbnN0YW5jZWQgPT09IHRydWUpIHtcbiAgICAgIGdsLmRyYXdBcnJheXNJbnN0YW5jZWQoXG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZVR5cGUsXG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZVN0YXJ0LFxuICAgICAgICB0aGlzLl9wcmltaXRpdmVDb3VudCxcbiAgICAgICAgdGhpcy5faW5zdGFuY2VDb3VudFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2wuZHJhd0FycmF5cyhcbiAgICAgICAgdGhpcy5fcHJpbWl0aXZlVHlwZSxcbiAgICAgICAgdGhpcy5fcHJpbWl0aXZlU3RhcnQsXG4gICAgICAgIHRoaXMuX3ByaW1pdGl2ZUNvdW50XG4gICAgICApO1xuICAgIH1cblxuICAgIGdsLmJpbmRWZXJ0ZXhBcnJheShudWxsKTtcbiAgfVxuXG4gIHNldFByaW1pdGl2ZVN0YXJ0KHN0YXJ0OiBudW1iZXIpIHtcbiAgICB0aGlzLl9wcmltaXRpdmVTdGFydCA9IHN0YXJ0O1xuICB9XG5cbiAgc2V0UHJpbWl0aXZlQ291bnQoY291bnQ6IG51bWJlcikge1xuICAgIHRoaXMuX3ByaW1pdGl2ZUNvdW50ID0gY291bnQ7XG4gIH1cblxuICBzZXRJbnN0YW5jZWRDb3VudChjb3VudDogbnVtYmVyKSB7XG4gICAgdGhpcy5faW5zdGFuY2VDb3VudCA9IGNvdW50O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHZW9tZXRyeUJ1aWxkZXIge1xuICBwcml2YXRlIF9kZWY6IEdlb21ldHJ5RGVmaW5pdGlvbiA9IHtcbiAgICB2Ym9zOiBbXSxcbiAgICBwcmltaXRpdmVUeXBlOiBQcmltaXRpdmVUeXBlLmxpbmVzXG4gIH07XG5cbiAgcmVzZXQoKTogdGhpcyB7XG4gICAgdGhpcy5fZGVmID0ge1xuICAgICAgdmJvczogW10sXG4gICAgICBwcmltaXRpdmVUeXBlOiBQcmltaXRpdmVUeXBlLmxpbmVzXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldERlZigpOiBHZW9tZXRyeURlZmluaXRpb24ge1xuICAgIHJldHVybiB0aGlzLl9kZWY7XG4gIH1cblxuICBzZXRQcmltaXRpdmVUeXBlKFxuICAgIGluUHJpbWl0aXZlOlxuICAgICAgfCAnbGluZXMnXG4gICAgICB8ICdsaW5lU3RyaXAnXG4gICAgICB8ICdsaW5lTG9vcCdcbiAgICAgIHwgJ3RyaWFuZ2xlcydcbiAgICAgIHwgJ3RyaWFuZ2xlU3RyaXAnXG4gICAgICB8ICd0cmlhbmdsZUZhbidcbiAgKTogdGhpcyB7XG4gICAgdGhpcy5fZGVmLnByaW1pdGl2ZVR5cGUgPSBQcmltaXRpdmVUeXBlW2luUHJpbWl0aXZlXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRWYm8oKTogdGhpcyB7XG4gICAgdGhpcy5fZGVmLnZib3MucHVzaCh7XG4gICAgICBhdHRyczogW10sXG4gICAgICAvLyBzdHJpZGU6IDAsXG4gICAgICBpbnN0YW5jZWQ6IGZhbHNlXG4gICAgICAvLyBkeW5hbWljOiBmYWxzZSxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRWYm9Bc0luc3RhbmNlZCgpOiB0aGlzIHtcbiAgICB0aGlzLl9nZXRMYXN0VmJvKCkuaW5zdGFuY2VkID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRWYm9Bc0R5bmFtaWMoKTogdGhpcyB7XG4gICAgdGhpcy5fZ2V0TGFzdFZibygpLm1vZGUgPSAnZHluYW1pYyc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc2V0VmJvQXNTdHJlYW1pbmcoKTogdGhpcyB7XG4gICAgdGhpcy5fZ2V0TGFzdFZibygpLm1vZGUgPSAnc3RyZWFtaW5nJztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBzZXRTdHJpZGUoaW5TdHJpZGU6IG51bWJlcik6IHRoaXMge1xuICAgIHRoaXMuX2dldExhc3RWYm8oKS5zdHJpZGUgPSBpblN0cmlkZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBhZGRWYm9BdHRyaWJ1dGUoXG4gICAgaW5OYW1lOiBzdHJpbmcsXG4gICAgaW5UeXBlOiAnZmxvYXQnIHwgJ3ZlYzJmJyB8ICd2ZWMzZicgfCAndmVjNGYnIHwgJ21hdDNmJyB8ICdtYXQ0ZidcbiAgKTogdGhpcyB7XG4gICAgY29uc3QgY3VyclZibyA9IHRoaXMuX2dldExhc3RWYm8oKTtcbiAgICBjb25zdCBsYXN0QXR0ciA9XG4gICAgICBjdXJyVmJvLmF0dHJzLmxlbmd0aCA+IDAgPyBjdXJyVmJvLmF0dHJzW2N1cnJWYm8uYXR0cnMubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgIGN1cnJWYm8uYXR0cnMucHVzaCh7XG4gICAgICBuYW1lOiBpbk5hbWUsXG4gICAgICB0eXBlOiBBdHRyaWJ1dGVUeXBlW2luVHlwZV0sXG4gICAgICBpbmRleDogbGFzdEF0dHIgPyBsYXN0QXR0ci5pbmRleCArIGdldEF0dHJUeXBlU2l6ZShsYXN0QXR0ci50eXBlKSA6IDBcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHByaXZhdGUgX2dldExhc3RWYm8oKTogVmJvRGVmaW5pdGlvbiB7XG4gICAgaWYgKHRoaXMuX2RlZi52Ym9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBWQk8gc2V0dXAnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2RlZi52Ym9zW3RoaXMuX2RlZi52Ym9zLmxlbmd0aCAtIDFdO1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRSZW5kZXJCdWZmZXIge1xuICBkaXNwb3NlKCk6IHZvaWQ7XG4gIHJhd0JpbmQoKTogdm9pZDtcbiAgcHJlQmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFJlbmRlckJ1ZmZlcikgPT4gdm9pZCk6IHZvaWQ7XG4gIGJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmRSZW5kZXJCdWZmZXIpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCb3VuZFJlbmRlckJ1ZmZlciB7XG4gIHNldFNpemUoXG4gICAgdHlwZTogJ2RlcHRoMTYnIHwgJ2RlcHRoMjQnIHwgJ2RlcHRoMzJmJyxcbiAgICB3aWR0aDogbnVtYmVyLFxuICAgIGhlaWdodDogbnVtYmVyXG4gICk6IHZvaWQ7XG4gIGdldFJhd09iamVjdCgpOiBXZWJHTFJlbmRlcmJ1ZmZlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlckJ1ZmZlciBpbXBsZW1lbnRzIElVbmJvdW5kUmVuZGVyQnVmZmVyLCBJQm91bmRSZW5kZXJCdWZmZXIge1xuICBwcml2YXRlIF9idWZmZXI6IFdlYkdMUmVuZGVyYnVmZmVyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGNvbnN0IHRtcEJ1ZiA9IGdsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpO1xuICAgIGlmICh0bXBCdWYgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbnVsbCByZW5kZXIgYnVmZmVyIG9iamVjdCcpO1xuICAgIH1cbiAgICB0aGlzLl9idWZmZXIgPSB0bXBCdWY7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5fYnVmZmVyKTtcbiAgfVxuXG4gIHJhd0JpbmQoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCB0aGlzLl9idWZmZXIpO1xuICB9XG5cbiAgcHJlQmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFJlbmRlckJ1ZmZlcikgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucmF3QmluZCgpO1xuICAgIGluQ2FsbGJhY2sodGhpcyk7XG4gIH1cblxuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kUmVuZGVyQnVmZmVyKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5wcmVCaW5kKGluQ2FsbGJhY2spO1xuICAgIFJlbmRlckJ1ZmZlci51bmJpbmQoKTtcbiAgfVxuXG4gIHN0YXRpYyB1bmJpbmQoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wuYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICB9XG5cbiAgc2V0U2l6ZShcbiAgICB0eXBlOiAnZGVwdGgxNicgfCAnZGVwdGgyNCcgfCAnZGVwdGgzMmYnLFxuICAgIHdpZHRoOiBudW1iZXIsXG4gICAgaGVpZ2h0OiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgbGV0IGludGVybmFsRm9ybWF0OiBudW1iZXIgPSBnbC5ERVBUSF9DT01QT05FTlQzMkY7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdkZXB0aDE2Jzoge1xuICAgICAgICBpbnRlcm5hbEZvcm1hdCA9IGdsLkRFUFRIX0NPTVBPTkVOVDE2O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2RlcHRoMjQnOiB7XG4gICAgICAgIGludGVybmFsRm9ybWF0ID0gZ2wuREVQVEhfQ09NUE9ORU5UMTY7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGdsLnJlbmRlcmJ1ZmZlclN0b3JhZ2UoZ2wuUkVOREVSQlVGRkVSLCBpbnRlcm5hbEZvcm1hdCwgd2lkdGgsIGhlaWdodCk7XG4gIH1cblxuICBnZXRSYXdPYmplY3QoKTogV2ViR0xSZW5kZXJidWZmZXIge1xuICAgIHJldHVybiB0aGlzLl9idWZmZXI7XG4gIH1cbn1cbiIsCiAgImltcG9ydCB7IElVbmJvdW5kVGV4dHVyZUFycmF5IH0gZnJvbSAnLi9UZXh0dXJlQXJyYXknO1xuaW1wb3J0IHsgSVVuYm91bmRDdWJlTWFwIH0gZnJvbSAnLi9DdWJlTWFwJztcbmltcG9ydCB7IElVbmJvdW5kVGV4dHVyZSB9IGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgeyBJVW5ib3VuZERhdGFUZXh0dXJlIH0gZnJvbSAnLi9EYXRhVGV4dHVyZSc7XG5pbXBvcnQgeyBJVW5ib3VuZERhdGFUZXh0dXJlVmVjNCB9IGZyb20gJy4vRGF0YVRleHR1cmVWZWM0JztcbmltcG9ydCB7IFdlYkdMQ29udGV4dCB9IGZyb20gJy4vV2ViR0xDb250ZXh0JztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNoYWRlclByb2dyYW1PcHRzIHtcbiAgdmVydGV4U3JjOiBzdHJpbmc7XG4gIGZyYWdtZW50U3JjOiBzdHJpbmc7XG4gIGF0dHJpYnV0ZXM6IHN0cmluZ1tdO1xuICB1bmlmb3Jtczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRTaGFkZXIge1xuICBpc0JvdW5kKCk6IGJvb2xlYW47XG4gIGhhc0F0dHJpYnV0ZShuYW1lOiBzdHJpbmcpOiBib29sZWFuO1xuICBnZXRBdHRyaWJ1dGUobmFtZTogc3RyaW5nKTogbnVtYmVyO1xuICBnZXRVbmlmb3JtKG5hbWU6IHN0cmluZyk6IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kU2hhZGVyKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQm91bmRTaGFkZXIge1xuICBzZXRUZXh0dXJlVW5pZm9ybShcbiAgICBpbk5hbWU6IHN0cmluZyxcbiAgICBpblRleHR1cmU6XG4gICAgICB8IElVbmJvdW5kVGV4dHVyZVxuICAgICAgfCBJVW5ib3VuZFRleHR1cmVBcnJheVxuICAgICAgfCBJVW5ib3VuZEN1YmVNYXBcbiAgICAgIHwgSVVuYm91bmREYXRhVGV4dHVyZVxuICAgICAgfCBJVW5ib3VuZERhdGFUZXh0dXJlVmVjNCxcbiAgICBpbkluZGV4OiBudW1iZXJcbiAgKTogdm9pZDtcbiAgc2V0SW50ZWdlcjFVbmlmb3JtKGluTmFtZTogc3RyaW5nLCBpblZhbHVlOiBudW1iZXIpOiB2b2lkO1xuICBzZXRJbnRlZ2VyMlVuaWZvcm0oaW5OYW1lOiBzdHJpbmcsIGluVmFsdWVYOiBudW1iZXIsIGluVmFsdWVZOiBudW1iZXIpOiB2b2lkO1xuICBzZXRJbnRlZ2VyM1VuaWZvcm0oXG4gICAgaW5OYW1lOiBzdHJpbmcsXG4gICAgaW5WYWx1ZVg6IG51bWJlcixcbiAgICBpblZhbHVlWTogbnVtYmVyLFxuICAgIGluVmFsdWVaOiBudW1iZXJcbiAgKTogdm9pZDtcbiAgc2V0RmxvYXQxVW5pZm9ybShpbk5hbWU6IHN0cmluZywgaW5WYWx1ZTogbnVtYmVyKTogdm9pZDtcbiAgc2V0RmxvYXQyVW5pZm9ybShpbk5hbWU6IHN0cmluZywgaW5WYWx1ZVg6IG51bWJlciwgaW5WYWx1ZVk6IG51bWJlcik6IHZvaWQ7XG4gIHNldEZsb2F0M1VuaWZvcm0oXG4gICAgaW5OYW1lOiBzdHJpbmcsXG4gICAgaW5WYWx1ZVg6IG51bWJlcixcbiAgICBpblZhbHVlWTogbnVtYmVyLFxuICAgIGluVmFsdWVaOiBudW1iZXJcbiAgKTogdm9pZDtcbiAgc2V0TWF0cml4M1VuaWZvcm0oaW5OYW1lOiBzdHJpbmcsIGluTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQzKTogdm9pZDtcbiAgc2V0TWF0cml4NFVuaWZvcm0oaW5OYW1lOiBzdHJpbmcsIGluTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQ0KTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIFNoYWRlclByb2dyYW0ge1xuICBwcml2YXRlIHN0YXRpYyBfaXNCb3VuZDogU2hhZGVyUHJvZ3JhbSB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgX25hbWU6IHN0cmluZztcblxuICBwcml2YXRlIF9wcm9ncmFtOiBXZWJHTFByb2dyYW07XG5cbiAgcHJpdmF0ZSBfYXR0cmlidXRlcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gIHByaXZhdGUgX3VuaWZvcm1zID0gbmV3IE1hcDxzdHJpbmcsIFdlYkdMVW5pZm9ybUxvY2F0aW9uPigpO1xuXG4gIGNvbnN0cnVjdG9yKGluTmFtZTogc3RyaW5nLCBvcHQ6IElTaGFkZXJQcm9ncmFtT3B0cykge1xuICAgIHRoaXMuX25hbWUgPSBpbk5hbWU7XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSB0aGlzLl9nZXRTaGFkZXIob3B0LnZlcnRleFNyYywgZ2wuVkVSVEVYX1NIQURFUik7XG4gICAgY29uc3QgZnJhZ21lbnRTaGFkZXIgPSB0aGlzLl9nZXRTaGFkZXIob3B0LmZyYWdtZW50U3JjLCBnbC5GUkFHTUVOVF9TSEFERVIpO1xuXG4gICAgLy9cblxuICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgaWYgKCFwcm9ncmFtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBjcmVhdGUgYSBzaGFkZXIgcHJvZ3JhbScpO1xuICAgIH1cblxuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XG4gICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgZ2wuZGVsZXRlU2hhZGVyKHZlcnRleFNoYWRlcik7IC8vIGZyZWUgdXAgbm93IHVudXNlZCBtZW1vcnlcbiAgICBnbC5kZWxldGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpOyAvLyBmcmVlIHVwIG5vdyB1bnVzZWQgbWVtb3J5XG5cbiAgICBpZiAoIWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKSB7XG4gICAgICAvLyBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBsaW5raW5nXG4gICAgICBjb25zdCBsYXN0RXJyb3IgPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKTtcblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnRmFpbGVkIHRvIGluaXRpYWxpemVkIHNoYWRlcnMsIEVycm9yIGxpbmtpbmc6JyArIGxhc3RFcnJvclxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wcm9ncmFtID0gcHJvZ3JhbTtcblxuICAgIC8vIHRoaXMuX2dldEF0dHJpYkFuZExvY2F0aW9uKG9wdC5hdHRyaWJ1dGVzLCBvcHQudW5pZm9ybXMpO1xuXG4gICAgLy8gdGhpcy5yYXdCaW5kKCk7XG4gICAgdGhpcy5iaW5kKCgpID0+IHtcbiAgICAgIHRoaXMuX2dldEF0dHJpYnV0ZXMob3B0LmF0dHJpYnV0ZXMpO1xuICAgICAgdGhpcy5fZ2V0VW5pZm9ybXMob3B0LnVuaWZvcm1zKTtcbiAgICB9KTtcbiAgICAvLyBTaGFkZXJQcm9ncmFtLnVuYmluZCgpO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLl9wcm9ncmFtKTtcbiAgfVxuXG4gIC8vIHJhd0JpbmQoKSB7XG4gIC8vICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gIC8vICAgZ2wudXNlUHJvZ3JhbSh0aGlzLl9wcm9ncmFtKTtcbiAgLy8gfVxuXG4gIGJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmRTaGFkZXIpID0+IHZvaWQpIHtcbiAgICBpZiAoU2hhZGVyUHJvZ3JhbS5faXNCb3VuZCAhPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgRG91YmxlIHNoYWRlciBiaW5kaW5nIChib3VuZDogJHtTaGFkZXJQcm9ncmFtLl9pc0JvdW5kLl9uYW1lfSwgYmluZGluZzogJHt0aGlzLl9uYW1lfSlgXG4gICAgICApO1xuICAgIH1cblxuICAgIFNoYWRlclByb2dyYW0uX2lzQm91bmQgPSB0aGlzO1xuICAgIC8vIHRoaXMucmF3QmluZCgpO1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC51c2VQcm9ncmFtKHRoaXMuX3Byb2dyYW0pO1xuXG4gICAgaW5DYWxsYmFjayh0aGlzKTtcblxuICAgIFNoYWRlclByb2dyYW0udW5iaW5kKCk7XG4gIH1cblxuICBzdGF0aWMgdW5iaW5kKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLnVzZVByb2dyYW0obnVsbCk7XG4gICAgU2hhZGVyUHJvZ3JhbS5faXNCb3VuZCA9IG51bGw7XG4gIH1cblxuICBpc0JvdW5kKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBTaGFkZXJQcm9ncmFtLl9pc0JvdW5kID09PSB0aGlzO1xuICB9XG5cbiAgaGFzQXR0cmlidXRlKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLl9hdHRyaWJ1dGVzLmhhcyhuYW1lKTtcbiAgfVxuXG4gIGdldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGUgPSB0aGlzLl9hdHRyaWJ1dGVzLmdldChuYW1lKTtcbiAgICBpZiAoYXR0cmlidXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgYXR0cmlidXRlIG5vdCBmb3VuZDogJHtuYW1lfWApO1xuICAgIH1cblxuICAgIHJldHVybiBhdHRyaWJ1dGU7XG4gIH1cblxuICBnZXRVbmlmb3JtKG5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IHVuaWZvcm0gPSB0aGlzLl91bmlmb3Jtcy5nZXQobmFtZSk7XG4gICAgaWYgKHVuaWZvcm0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmlmb3JtIG5vdCBmb3VuZDogJHtuYW1lfWApO1xuICAgIH1cblxuICAgIHJldHVybiB1bmlmb3JtO1xuICB9XG5cbiAgc2V0VGV4dHVyZVVuaWZvcm0oXG4gICAgaW5OYW1lOiBzdHJpbmcsXG4gICAgaW5UZXh0dXJlOlxuICAgICAgfCBJVW5ib3VuZFRleHR1cmVcbiAgICAgIHwgSVVuYm91bmRUZXh0dXJlQXJyYXlcbiAgICAgIHwgSVVuYm91bmRDdWJlTWFwXG4gICAgICB8IElVbmJvdW5kRGF0YVRleHR1cmVcbiAgICAgIHwgSVVuYm91bmREYXRhVGV4dHVyZVZlYzQsXG4gICAgaW5JbmRleDogbnVtYmVyXG4gICkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyBpbkluZGV4KTtcbiAgICBnbC51bmlmb3JtMWkodGhpcy5nZXRVbmlmb3JtKGluTmFtZSksIGluSW5kZXgpO1xuICAgIGluVGV4dHVyZS5yYXdCaW5kKCk7XG4gIH1cblxuICBzZXRJbnRlZ2VyMVVuaWZvcm0oaW5OYW1lOiBzdHJpbmcsIGluVmFsdWU6IG51bWJlcikge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC51bmlmb3JtMWkodGhpcy5nZXRVbmlmb3JtKGluTmFtZSksIGluVmFsdWUpO1xuICB9XG5cbiAgc2V0SW50ZWdlcjJVbmlmb3JtKGluTmFtZTogc3RyaW5nLCBpblZhbHVlWDogbnVtYmVyLCBpblZhbHVlWTogbnVtYmVyKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLnVuaWZvcm0yaSh0aGlzLmdldFVuaWZvcm0oaW5OYW1lKSwgaW5WYWx1ZVgsIGluVmFsdWVZKTtcbiAgfVxuXG4gIHNldEludGVnZXIzVW5pZm9ybShcbiAgICBpbk5hbWU6IHN0cmluZyxcbiAgICBpblZhbHVlWDogbnVtYmVyLFxuICAgIGluVmFsdWVZOiBudW1iZXIsXG4gICAgaW5WYWx1ZVo6IG51bWJlclxuICApIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wudW5pZm9ybTNpKHRoaXMuZ2V0VW5pZm9ybShpbk5hbWUpLCBpblZhbHVlWCwgaW5WYWx1ZVksIGluVmFsdWVaKTtcbiAgfVxuXG4gIHNldEZsb2F0MVVuaWZvcm0oaW5OYW1lOiBzdHJpbmcsIGluVmFsdWU6IG51bWJlcikge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC51bmlmb3JtMWYodGhpcy5nZXRVbmlmb3JtKGluTmFtZSksIGluVmFsdWUpO1xuICB9XG5cbiAgc2V0RmxvYXQyVW5pZm9ybShpbk5hbWU6IHN0cmluZywgaW5WYWx1ZVg6IG51bWJlciwgaW5WYWx1ZVk6IG51bWJlcikge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC51bmlmb3JtMmYodGhpcy5nZXRVbmlmb3JtKGluTmFtZSksIGluVmFsdWVYLCBpblZhbHVlWSk7XG4gIH1cblxuICBzZXRGbG9hdDNVbmlmb3JtKFxuICAgIGluTmFtZTogc3RyaW5nLFxuICAgIGluVmFsdWVYOiBudW1iZXIsXG4gICAgaW5WYWx1ZVk6IG51bWJlcixcbiAgICBpblZhbHVlWjogbnVtYmVyXG4gICkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC51bmlmb3JtM2YodGhpcy5nZXRVbmlmb3JtKGluTmFtZSksIGluVmFsdWVYLCBpblZhbHVlWSwgaW5WYWx1ZVopO1xuICB9XG5cbiAgc2V0TWF0cml4M1VuaWZvcm0oaW5OYW1lOiBzdHJpbmcsIGluTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQzKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLnVuaWZvcm1NYXRyaXgzZnYodGhpcy5nZXRVbmlmb3JtKGluTmFtZSksIGZhbHNlLCBpbk1hdHJpeCBhcyBnbG0ubWF0Myk7XG4gIH1cblxuICBzZXRNYXRyaXg0VW5pZm9ybShpbk5hbWU6IHN0cmluZywgaW5NYXRyaXg6IGdsbS5SZWFkb25seU1hdDQpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLmdldFVuaWZvcm0oaW5OYW1lKSwgZmFsc2UsIGluTWF0cml4IGFzIGdsbS5tYXQ0KTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldEF0dHJpYnV0ZXMoYXR0cmlidXRlczogc3RyaW5nW10pIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgYXR0cmlidXRlcy5sZW5ndGg7ICsraWkpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5fcHJvZ3JhbSwgYXR0cmlidXRlc1tpaV0pO1xuXG4gICAgICBpZiAodmFsdWUgPCAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgYXR0cmlidXRlIG5vdCBmb3VuZCA9PiAke2F0dHJpYnV0ZXNbaWldfWApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9hdHRyaWJ1dGVzLnNldChhdHRyaWJ1dGVzW2lpXSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2dldFVuaWZvcm1zKHVuaWZvcm1zOiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCB1bmlmb3Jtcy5sZW5ndGg7ICsraWkpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuX3Byb2dyYW0sIHVuaWZvcm1zW2lpXSk7XG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVuaWZvcm0gbm90IGZvdW5kID0+ICR7dW5pZm9ybXNbaWldfWApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl91bmlmb3Jtcy5zZXQodW5pZm9ybXNbaWldLCB2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLy9cblxuICBwcml2YXRlIF9nZXRTaGFkZXIoc3JjOiBzdHJpbmcsIHR5cGU6IG51bWJlcikge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcblxuICAgIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICBpZiAoIXNoYWRlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgY3JlYXRlIGEgc2hhZGVyJyk7XG4gICAgfVxuXG4gICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcbiAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG5cbiAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgbGV0IGVycm9yX3N0ciA9IGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcbiAgICAgIGlmICghZXJyb3Jfc3RyKSBlcnJvcl9zdHIgPSAnZmFpbGVkIHRvIGNvbXBpbGUgYSBzaGFkZXInO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3Jfc3RyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hhZGVyO1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRUZXh0dXJlIHtcbiAgaW5pdGlhbGl6ZSgpOiB2b2lkO1xuICByYXdCaW5kKCk6IHZvaWQ7XG4gIHByZUJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmRUZXh0dXJlKSA9PiB2b2lkKTogdm9pZDtcbiAgYmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFRleHR1cmUpID0+IHZvaWQpOiB2b2lkO1xuICBnZXRXaWR0aCgpOiBudW1iZXI7XG4gIGdldEhlaWdodCgpOiBudW1iZXI7XG4gIGdldFJhd09iamVjdCgpOiBXZWJHTFRleHR1cmU7XG59XG5cbmV4cG9ydCBlbnVtIFRleHR1cmVGaWx0ZXIge1xuICBwaXhlbGF0ZWQgPSAwLFxuICBsaW5lYXIgPSAxLFxuICBtaXBtYXAgPSAyXG59XG5cbmV4cG9ydCBlbnVtIFRleHR1cmVSZXBlYXQge1xuICBub1JlcGVhdCA9IDAsXG4gIHJlcGVhdCA9IDFcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQm91bmRUZXh0dXJlIHtcbiAgbG9hZEZyb21JbWFnZShcbiAgICBpbkltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LFxuICAgIG1vZGU/OiBUZXh0dXJlRmlsdGVyLFxuICAgIHJlcGVhdD86IFRleHR1cmVSZXBlYXRcbiAgKTogdm9pZDtcbiAgbG9hZEZyb21NZW1vcnkoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgaW5QaXhlbHM6IFVpbnQ4QXJyYXksXG4gICAgbW9kZT86IFRleHR1cmVGaWx0ZXIsXG4gICAgcmVwZWF0PzogVGV4dHVyZVJlcGVhdFxuICApOiB2b2lkO1xuICBhbGxvY2F0ZShcbiAgICBpbldpZHRoOiBudW1iZXIsXG4gICAgaW5IZWlnaHQ6IG51bWJlcixcbiAgICBtb2RlPzogVGV4dHVyZUZpbHRlcixcbiAgICByZXBlYXQ/OiBUZXh0dXJlUmVwZWF0XG4gICk6IHZvaWQ7XG4gIGFsbG9jYXRlRGVwdGgoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgbW9kZT86IFRleHR1cmVGaWx0ZXIsXG4gICAgcmVwZWF0PzogVGV4dHVyZVJlcGVhdFxuICApOiB2b2lkO1xuICByZXNpemUoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgbW9kZT86IFRleHR1cmVGaWx0ZXIsXG4gICAgcmVwZWF0PzogVGV4dHVyZVJlcGVhdFxuICApOiB2b2lkO1xuICBnZXRSYXdPYmplY3QoKTogV2ViR0xUZXh0dXJlO1xufVxuXG5leHBvcnQgY2xhc3MgVGV4dHVyZSBpbXBsZW1lbnRzIElVbmJvdW5kVGV4dHVyZSwgSUJvdW5kVGV4dHVyZSB7XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3RleHR1cmU6IFdlYkdMVGV4dHVyZSB8IG51bGwgPSBudWxsO1xuXG4gIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcigndGV4dHVyZTogYWxyZWFkeSBpbml0aWFsaXplZCcpO1xuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIHRoaXMuX3RleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gIH1cblxuICByYXdCaW5kKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fdGV4dHVyZSk7XG4gIH1cblxuICBwcmVCaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kVGV4dHVyZSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucmF3QmluZCgpO1xuICAgIGluQ2FsbGJhY2sodGhpcyk7XG4gIH1cblxuICBiaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kVGV4dHVyZSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMucHJlQmluZChpbkNhbGxiYWNrKTtcbiAgICBUZXh0dXJlLnVuYmluZCgpO1xuICB9XG5cbiAgc3RhdGljIHVuYmluZCgpOiB2b2lkIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKTtcbiAgfVxuXG4gIGxvYWRGcm9tSW1hZ2UoXG4gICAgaW5JbWFnZTogSFRNTEltYWdlRWxlbWVudCxcbiAgICBtb2RlOiBUZXh0dXJlRmlsdGVyID0gVGV4dHVyZUZpbHRlci5waXhlbGF0ZWQsXG4gICAgcmVwZWF0OiBUZXh0dXJlUmVwZWF0ID0gVGV4dHVyZVJlcGVhdC5ub1JlcGVhdFxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9hbGxvY2F0ZShpbkltYWdlLndpZHRoLCBpbkltYWdlLmhlaWdodCwgaW5JbWFnZSwgbW9kZSwgcmVwZWF0KTtcbiAgfVxuXG4gIGxvYWRGcm9tTWVtb3J5KFxuICAgIGluV2lkdGg6IG51bWJlcixcbiAgICBpbkhlaWdodDogbnVtYmVyLFxuICAgIGluUGl4ZWxzOiBVaW50OEFycmF5LFxuICAgIG1vZGU6IFRleHR1cmVGaWx0ZXIgPSBUZXh0dXJlRmlsdGVyLnBpeGVsYXRlZCxcbiAgICByZXBlYXQ6IFRleHR1cmVSZXBlYXQgPSBUZXh0dXJlUmVwZWF0Lm5vUmVwZWF0XG4gICk6IHZvaWQge1xuICAgIHRoaXMuX2FsbG9jYXRlKGluV2lkdGgsIGluSGVpZ2h0LCBpblBpeGVscywgbW9kZSwgcmVwZWF0KTtcbiAgfVxuXG4gIGFsbG9jYXRlKFxuICAgIGluV2lkdGg6IG51bWJlcixcbiAgICBpbkhlaWdodDogbnVtYmVyLFxuICAgIG1vZGU6IFRleHR1cmVGaWx0ZXIgPSBUZXh0dXJlRmlsdGVyLnBpeGVsYXRlZCxcbiAgICByZXBlYXQ6IFRleHR1cmVSZXBlYXQgPSBUZXh0dXJlUmVwZWF0Lm5vUmVwZWF0XG4gICk6IHZvaWQge1xuICAgIHRoaXMuX2FsbG9jYXRlKGluV2lkdGgsIGluSGVpZ2h0LCBudWxsLCBtb2RlLCByZXBlYXQpO1xuICB9XG5cbiAgYWxsb2NhdGVEZXB0aChcbiAgICBpbldpZHRoOiBudW1iZXIsXG4gICAgaW5IZWlnaHQ6IG51bWJlcixcbiAgICBtb2RlOiBUZXh0dXJlRmlsdGVyID0gVGV4dHVyZUZpbHRlci5waXhlbGF0ZWQsXG4gICAgcmVwZWF0OiBUZXh0dXJlUmVwZWF0ID0gVGV4dHVyZVJlcGVhdC5ub1JlcGVhdFxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9hbGxvY2F0ZShpbldpZHRoLCBpbkhlaWdodCwgbnVsbCwgbW9kZSwgcmVwZWF0LCB0cnVlKTtcbiAgfVxuXG4gIHJlc2l6ZShcbiAgICBpbldpZHRoOiBudW1iZXIsXG4gICAgaW5IZWlnaHQ6IG51bWJlcixcbiAgICBtb2RlOiBUZXh0dXJlRmlsdGVyID0gVGV4dHVyZUZpbHRlci5waXhlbGF0ZWQsXG4gICAgcmVwZWF0OiBUZXh0dXJlUmVwZWF0ID0gVGV4dHVyZVJlcGVhdC5ub1JlcGVhdFxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9hbGxvY2F0ZShpbldpZHRoLCBpbkhlaWdodCwgbnVsbCwgbW9kZSwgcmVwZWF0KTtcbiAgfVxuXG4gIHByaXZhdGUgX2FsbG9jYXRlKFxuICAgIGluV2lkdGg6IG51bWJlcixcbiAgICBpbkhlaWdodDogbnVtYmVyLFxuICAgIGluUGl4ZWxzOiBVaW50OEFycmF5IHwgSFRNTEltYWdlRWxlbWVudCB8IG51bGwgPSBudWxsLFxuICAgIG1vZGU6IFRleHR1cmVGaWx0ZXIgPSBUZXh0dXJlRmlsdGVyLnBpeGVsYXRlZCxcbiAgICByZXBlYXQ6IFRleHR1cmVSZXBlYXQgPSBUZXh0dXJlUmVwZWF0Lm5vUmVwZWF0LFxuICAgIGlzRGVwdGhUZXh0dXJlOiBib29sZWFuID0gZmFsc2VcbiAgKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmU6IG5vdCBpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgICBpZiAoaW5XaWR0aCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmU6IHdpZHRoIG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgICB9XG4gICAgaWYgKGluSGVpZ2h0IDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndGV4dHVyZTogaGVpZ2h0IG11c3QgYmUgcG9zaXRpdmUnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICB0aGlzLl93aWR0aCA9IGluV2lkdGg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaW5IZWlnaHQ7XG5cbiAgICBjb25zdCBsZXZlbCA9IDA7XG4gICAgY29uc3QgaW50ZXJuYWxGb3JtYXQgPSBpc0RlcHRoVGV4dHVyZSA/IGdsLkRFUFRIX0NPTVBPTkVOVDMyRiA6IGdsLlJHQkE7XG4gICAgY29uc3QgYm9yZGVyID0gMDtcbiAgICBjb25zdCBzcmNGb3JtYXQgPSBpc0RlcHRoVGV4dHVyZSA/IGdsLkRFUFRIX0NPTVBPTkVOVCA6IGdsLlJHQkE7XG4gICAgY29uc3Qgc3JjVHlwZSA9IGlzRGVwdGhUZXh0dXJlID8gZ2wuRkxPQVQgOiBnbC5VTlNJR05FRF9CWVRFO1xuXG4gICAgaWYgKGluUGl4ZWxzIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkge1xuICAgICAgZ2wudGV4SW1hZ2UyRChcbiAgICAgICAgZ2wuVEVYVFVSRV8yRCxcbiAgICAgICAgbGV2ZWwsXG4gICAgICAgIGludGVybmFsRm9ybWF0LFxuICAgICAgICBzcmNGb3JtYXQsXG4gICAgICAgIHNyY1R5cGUsXG4gICAgICAgIGluUGl4ZWxzXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBnbC50ZXhJbWFnZTJEKFxuICAgICAgICBnbC5URVhUVVJFXzJELFxuICAgICAgICBsZXZlbCxcbiAgICAgICAgaW50ZXJuYWxGb3JtYXQsXG4gICAgICAgIGluV2lkdGgsXG4gICAgICAgIGluSGVpZ2h0LFxuICAgICAgICBib3JkZXIsXG4gICAgICAgIHNyY0Zvcm1hdCxcbiAgICAgICAgc3JjVHlwZSxcbiAgICAgICAgaW5QaXhlbHNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlcGVhdCA9PT0gVGV4dHVyZVJlcGVhdC5ub1JlcGVhdCkge1xuICAgICAgLy8gd3JhcHBpbmcgdG8gY2xhbXAgdG8gZWRnZVxuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICB9IGVsc2UgaWYgKHJlcGVhdCA9PT0gVGV4dHVyZVJlcGVhdC5yZXBlYXQpIHtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLlJFUEVBVCk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5SRVBFQVQpO1xuICAgIH1cblxuICAgIGlmIChtb2RlID09PSBUZXh0dXJlRmlsdGVyLnBpeGVsYXRlZCkge1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gVGV4dHVyZUZpbHRlci5saW5lYXIpIHtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5MSU5FQVIpO1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLkxJTkVBUik7XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSBUZXh0dXJlRmlsdGVyLm1pcG1hcCkge1xuICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAoZ2wuVEVYVFVSRV8yRCk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKFxuICAgICAgICBnbC5URVhUVVJFXzJELFxuICAgICAgICBnbC5URVhUVVJFX01JTl9GSUxURVIsXG4gICAgICAgIGdsLkxJTkVBUl9NSVBNQVBfTElORUFSXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGdldFdpZHRoKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG5cbiAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gIH1cblxuICBnZXRIZWlnaHQoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcigndGV4dHVyZSBub3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gIH1cblxuICBnZXRSYXdPYmplY3QoKSB7XG4gICAgaWYgKCF0aGlzLl90ZXh0dXJlKSB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmUgbm90IGluaXRpYWxpemVkJyk7XG5cbiAgICAvLyBUT0RPOiB0aGlzIGlzIHVnbHlcbiAgICByZXR1cm4gdGhpcy5fdGV4dHVyZTtcbiAgfVxufVxuIiwKICAiaW1wb3J0IHsgVGV4dHVyZUZpbHRlciwgVGV4dHVyZVJlcGVhdCB9IGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgeyBXZWJHTENvbnRleHQgfSBmcm9tICcuL1dlYkdMQ29udGV4dCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVuYm91bmRUZXh0dXJlQXJyYXkge1xuICBpbml0aWFsaXplKCk6IHZvaWQ7XG4gIHJhd0JpbmQoKTogdm9pZDtcbiAgcHJlQmluZChpbkNhbGxiYWNrOiAoYm91bmQ6IElCb3VuZFRleHR1cmVBcnJheSkgPT4gdm9pZCk6IHZvaWQ7XG4gIGJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmRUZXh0dXJlQXJyYXkpID0+IHZvaWQpOiB2b2lkO1xuICBnZXRXaWR0aCgpOiBudW1iZXI7XG4gIGdldEhlaWdodCgpOiBudW1iZXI7XG4gIGdldFJhd09iamVjdCgpOiBXZWJHTFRleHR1cmU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJvdW5kVGV4dHVyZUFycmF5IHtcbiAgbG9hZEZyb21JbWFnZShcbiAgICBpbldpZHRoOiBudW1iZXIsXG4gICAgaW5IZWlnaHQ6IG51bWJlcixcbiAgICBpblRvdGFsTGF5ZXJzOiBudW1iZXIsXG4gICAgaW5JbWFnZTogSFRNTEltYWdlRWxlbWVudCxcbiAgICBtb2RlPzogVGV4dHVyZUZpbHRlcixcbiAgICByZXBlYXQ/OiBUZXh0dXJlUmVwZWF0XG4gICk6IHZvaWQ7XG4gIGxvYWRGcm9tTWVtb3J5KFxuICAgIGluV2lkdGg6IG51bWJlcixcbiAgICBpbkhlaWdodDogbnVtYmVyLFxuICAgIGluVG90YWxMYXllcnM6IG51bWJlcixcbiAgICBpblBpeGVsczogVWludDhBcnJheSxcbiAgICBtb2RlPzogVGV4dHVyZUZpbHRlcixcbiAgICByZXBlYXQ/OiBUZXh0dXJlUmVwZWF0XG4gICk6IHZvaWQ7XG4gIGdldFJhd09iamVjdCgpOiBXZWJHTFRleHR1cmU7XG59XG5cbmV4cG9ydCBjbGFzcyBUZXh0dXJlQXJyYXkgaW1wbGVtZW50cyBJVW5ib3VuZFRleHR1cmVBcnJheSwgSUJvdW5kVGV4dHVyZUFycmF5IHtcbiAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfdGV4dHVyZTogV2ViR0xUZXh0dXJlIHwgbnVsbCA9IG51bGw7XG5cbiAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fdGV4dHVyZSkgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiBhbHJlYWR5IGluaXRpYWxpemVkJyk7XG5cbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgdGhpcy5fdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgIGdsLmRlbGV0ZVRleHR1cmUodGhpcy5fdGV4dHVyZSk7XG4gIH1cblxuICByYXdCaW5kKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRF9BUlJBWSwgdGhpcy5fdGV4dHVyZSk7XG4gIH1cblxuICBwcmVCaW5kKGluQ2FsbGJhY2s6IChib3VuZDogSUJvdW5kVGV4dHVyZUFycmF5KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5yYXdCaW5kKCk7XG4gICAgaW5DYWxsYmFjayh0aGlzKTtcbiAgfVxuXG4gIGJpbmQoaW5DYWxsYmFjazogKGJvdW5kOiBJQm91bmRUZXh0dXJlQXJyYXkpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnByZUJpbmQoaW5DYWxsYmFjayk7XG4gICAgVGV4dHVyZUFycmF5LnVuYmluZCgpO1xuICB9XG5cbiAgc3RhdGljIHVuYmluZCgpOiB2b2lkIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJEX0FSUkFZLCBudWxsKTtcbiAgfVxuXG4gIGxvYWRGcm9tSW1hZ2UoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgaW5Ub3RhbExheWVyczogbnVtYmVyLFxuICAgIGluSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsXG4gICAgbW9kZTogVGV4dHVyZUZpbHRlciA9IFRleHR1cmVGaWx0ZXIucGl4ZWxhdGVkLFxuICAgIHJlcGVhdDogVGV4dHVyZVJlcGVhdCA9IFRleHR1cmVSZXBlYXQubm9SZXBlYXRcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fYWxsb2NhdGUoaW5XaWR0aCwgaW5IZWlnaHQsIGluVG90YWxMYXllcnMsIGluSW1hZ2UsIG1vZGUsIHJlcGVhdCk7XG4gIH1cblxuICBsb2FkRnJvbU1lbW9yeShcbiAgICBpbldpZHRoOiBudW1iZXIsXG4gICAgaW5IZWlnaHQ6IG51bWJlcixcbiAgICBpblRvdGFsTGF5ZXJzOiBudW1iZXIsXG4gICAgaW5QaXhlbHM6IFVpbnQ4QXJyYXksXG4gICAgbW9kZTogVGV4dHVyZUZpbHRlciA9IFRleHR1cmVGaWx0ZXIucGl4ZWxhdGVkLFxuICAgIHJlcGVhdDogVGV4dHVyZVJlcGVhdCA9IFRleHR1cmVSZXBlYXQubm9SZXBlYXRcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fYWxsb2NhdGUoaW5XaWR0aCwgaW5IZWlnaHQsIGluVG90YWxMYXllcnMsIGluUGl4ZWxzLCBtb2RlLCByZXBlYXQpO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWxsb2NhdGUoXG4gICAgaW5XaWR0aDogbnVtYmVyLFxuICAgIGluSGVpZ2h0OiBudW1iZXIsXG4gICAgaW5Ub3RhbExheWVyczogbnVtYmVyLFxuICAgIGluUGl4ZWxzOiBVaW50OEFycmF5IHwgSFRNTEltYWdlRWxlbWVudCB8IG51bGwgPSBudWxsLFxuICAgIG1vZGU6IFRleHR1cmVGaWx0ZXIgPSBUZXh0dXJlRmlsdGVyLnBpeGVsYXRlZCxcbiAgICByZXBlYXQ6IFRleHR1cmVSZXBlYXQgPSBUZXh0dXJlUmVwZWF0Lm5vUmVwZWF0XG4gICk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gICAgaWYgKGluV2lkdGggPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlOiB3aWR0aCBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuICAgIGlmIChpbkhlaWdodCA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RleHR1cmU6IGhlaWdodCBtdXN0IGJlIHBvc2l0aXZlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgdGhpcy5fd2lkdGggPSBpbldpZHRoO1xuICAgIHRoaXMuX2hlaWdodCA9IGluSGVpZ2h0O1xuXG4gICAgY29uc3QgbGV2ZWwgPSAwO1xuICAgIGNvbnN0IGludGVybmFsRm9ybWF0ID0gZ2wuUkdCQTtcbiAgICBjb25zdCBib3JkZXIgPSAwO1xuICAgIGNvbnN0IHNyY0Zvcm1hdCA9IGdsLlJHQkE7XG4gICAgY29uc3Qgc3JjVHlwZSA9IGdsLlVOU0lHTkVEX0JZVEU7XG5cbiAgICBpZiAoaW5QaXhlbHMgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KSB7XG4gICAgICBnbC50ZXhJbWFnZTNEKFxuICAgICAgICBnbC5URVhUVVJFXzJEX0FSUkFZLFxuICAgICAgICBsZXZlbCxcbiAgICAgICAgaW50ZXJuYWxGb3JtYXQsXG4gICAgICAgIGluV2lkdGgsXG4gICAgICAgIGluSGVpZ2h0LFxuICAgICAgICBpblRvdGFsTGF5ZXJzLFxuICAgICAgICBib3JkZXIsXG4gICAgICAgIHNyY0Zvcm1hdCxcbiAgICAgICAgc3JjVHlwZSxcbiAgICAgICAgaW5QaXhlbHNcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdsLnRleEltYWdlM0QoXG4gICAgICAgIGdsLlRFWFRVUkVfMkRfQVJSQVksXG4gICAgICAgIGxldmVsLFxuICAgICAgICBpbnRlcm5hbEZvcm1hdCxcbiAgICAgICAgaW5XaWR0aCxcbiAgICAgICAgaW5IZWlnaHQsXG4gICAgICAgIGluVG90YWxMYXllcnMsXG4gICAgICAgIGJvcmRlcixcbiAgICAgICAgc3JjRm9ybWF0LFxuICAgICAgICBzcmNUeXBlLFxuICAgICAgICBpblBpeGVsc1xuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAocmVwZWF0ID09PSBUZXh0dXJlUmVwZWF0Lm5vUmVwZWF0KSB7XG4gICAgICAvLyB3cmFwcGluZyB0byBjbGFtcCB0byBlZGdlXG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKFxuICAgICAgICBnbC5URVhUVVJFXzJEX0FSUkFZLFxuICAgICAgICBnbC5URVhUVVJFX1dSQVBfUyxcbiAgICAgICAgZ2wuQ0xBTVBfVE9fRURHRVxuICAgICAgKTtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoXG4gICAgICAgIGdsLlRFWFRVUkVfMkRfQVJSQVksXG4gICAgICAgIGdsLlRFWFRVUkVfV1JBUF9ULFxuICAgICAgICBnbC5DTEFNUF9UT19FREdFXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAocmVwZWF0ID09PSBUZXh0dXJlUmVwZWF0LnJlcGVhdCkge1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJEX0FSUkFZLCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuUkVQRUFUKTtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRF9BUlJBWSwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLlJFUEVBVCk7XG4gICAgfVxuXG4gICAgaWYgKG1vZGUgPT09IFRleHR1cmVGaWx0ZXIucGl4ZWxhdGVkKSB7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkRfQVJSQVksIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkRfQVJSQVksIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSBUZXh0dXJlRmlsdGVyLmxpbmVhcikge1xuICAgICAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJEX0FSUkFZLCBnbC5URVhUVVJFX01BR19GSUxURVIsIGdsLkxJTkVBUik7XG4gICAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkRfQVJSQVksIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKTtcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09IFRleHR1cmVGaWx0ZXIubWlwbWFwKSB7XG4gICAgICBnbC5nZW5lcmF0ZU1pcG1hcChnbC5URVhUVVJFXzJEX0FSUkFZKTtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRF9BUlJBWSwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5ORUFSRVNUKTtcbiAgICAgIGdsLnRleFBhcmFtZXRlcmkoXG4gICAgICAgIGdsLlRFWFRVUkVfMkRfQVJSQVksXG4gICAgICAgIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUixcbiAgICAgICAgZ2wuTElORUFSX01JUE1BUF9MSU5FQVJcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgZ2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcigndGV4dHVyZSBub3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgfVxuXG4gIGdldEhlaWdodCgpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5fdGV4dHVyZSkgdGhyb3cgbmV3IEVycm9yKCd0ZXh0dXJlIG5vdCBpbml0aWFsaXplZCcpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgfVxuXG4gIGdldFJhd09iamVjdCgpIHtcbiAgICBpZiAoIXRoaXMuX3RleHR1cmUpIHRocm93IG5ldyBFcnJvcigndGV4dHVyZSBub3QgaW5pdGlhbGl6ZWQnKTtcblxuICAgIC8vIFRPRE86IHRoaXMgaXMgdWdseVxuICAgIHJldHVybiB0aGlzLl90ZXh0dXJlO1xuICB9XG59XG4iLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG51bmlmb3JtIG1hdDQgdV9jb21wb3NlZE1hdHJpeDtcblxuaW4gdmVjMyBhX3ZlcnRleF9wb3NpdGlvbjtcbmluIHZlYzMgYV92ZXJ0ZXhfbm9ybWFsO1xuXG5pbiB2ZWMzIGFfb2Zmc2V0X2NlbnRlcjtcbmluIHZlYzQgYV9vZmZzZXRfb3JpZW50YXRpb247XG5pbiB2ZWMzIGFfb2Zmc2V0X2NvbG9yO1xuaW4gdmVjMyBhX29mZnNldF9zY2FsZTtcblxuZmxhdCBvdXQgdmVjNCB2X2NvbG9yO1xub3V0IHZlYzMgdl93b3JsZFNwYWNlUG9zaXRpb247XG5vdXQgdmVjMyB2X3dvcmxkU3BhY2VOb3JtYWw7XG5cblxudmVjMyBhcHBseV9xdWF0X3RvX3ZlYzModmVjMyBwb3NpdGlvbiwgdmVjNCBxKVxue1xuICB2ZWMzIHYgPSBwb3NpdGlvbi54eXo7XG4gIHJldHVybiB2ICsgMi4wICogY3Jvc3MocS54eXosIGNyb3NzKHEueHl6LCB2KSArIHEudyAqIHYpO1xufVxuXG52b2lkIG1haW4odm9pZClcbntcblx0dmVjMyB3b3JsZFNwYWNlUG9zaXRpb24gPSBhX29mZnNldF9jZW50ZXIgKyBhcHBseV9xdWF0X3RvX3ZlYzMoYV92ZXJ0ZXhfcG9zaXRpb24gKiBhX29mZnNldF9zY2FsZSwgYV9vZmZzZXRfb3JpZW50YXRpb24pO1xuXHR2ZWMzIHdvcmxkU3BhY2VOb3JtYWwgPSBhcHBseV9xdWF0X3RvX3ZlYzMoYV92ZXJ0ZXhfbm9ybWFsLCBhX29mZnNldF9vcmllbnRhdGlvbik7XG5cbiAgZ2xfUG9zaXRpb24gPSB1X2NvbXBvc2VkTWF0cml4ICogdmVjNCh3b3JsZFNwYWNlUG9zaXRpb24sIDEuMCk7XG5cbiAgdl9jb2xvciA9IHZlYzQoYV9vZmZzZXRfY29sb3IsIDEuMCk7XG4gIHZfd29ybGRTcGFjZVBvc2l0aW9uID0gd29ybGRTcGFjZVBvc2l0aW9uO1xuICB2X3dvcmxkU3BhY2VOb3JtYWwgPSB3b3JsZFNwYWNlTm9ybWFsO1xufVxuYC50cmltKCk7IiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBsb3dwIGZsb2F0O1xuXG51bmlmb3JtIHZlYzMgdV9saWdodFBvcztcblxuZmxhdCBpbiB2ZWM0IHZfY29sb3I7XG5pbiB2ZWMzIHZfd29ybGRTcGFjZVBvc2l0aW9uO1xuaW4gdmVjMyB2X3dvcmxkU3BhY2VOb3JtYWw7XG5cbm91dCB2ZWM0IG9fY29sb3I7XG5cbi8vXG4vL1xuLy9cblxuY29uc3QgZmxvYXQga19hbWJpYW50Q29lZiA9IDAuMTtcblxuY29uc3QgdmVjMyBrX3NwZWNDb2xvciA9IHZlYzMoMS4wLCAxLjAsIDEuMCk7XG5cbnZlYzMgX2dldExpZ2h0Q29sb3IodmVjNCBjdXJyZW50Q29sb3IpXG57XG4gIHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKHZfd29ybGRTcGFjZU5vcm1hbCk7XG4gIHZlYzMgbGlnaHREaXIgPSBub3JtYWxpemUodV9saWdodFBvcyAtIHZfd29ybGRTcGFjZVBvc2l0aW9uKTtcblxuICBmbG9hdCBkaWZmdXNlQ29lZiA9IG1heChkb3QobGlnaHREaXIsIHZfd29ybGRTcGFjZU5vcm1hbC54eXopLCAwLjApO1xuICBmbG9hdCBzcGVjdWxhckNvZWYgPSAwLjA7XG5cbiAgLy8gaWYgKGRpZmZ1c2VDb2VmID4gMC4wICYmIHZfc2tpcFNwZWN1bGFyIDwgMC41KVxuICAvLyB7XG4gIC8vICAgLy8gc3BlY3VsYXJcblxuICAvLyAgIHZlYzMgcmVmbGVjdERpciA9IHJlZmxlY3QoLWxpZ2h0RGlyLCBub3JtYWwpO1xuICAvLyAgIHZlYzMgdmlld0RpciA9IG5vcm1hbGl6ZSh1X2xpZ2h0UG9zIC0gdl93b3JsZFNwYWNlUG9zaXRpb24pO1xuXG4gIC8vICAgZmxvYXQgc3BlY0FuZ2xlID0gbWF4KGRvdChyZWZsZWN0RGlyLCB2aWV3RGlyKSwgMC4wKTtcbiAgLy8gICBzcGVjdWxhckNvZWYgPSBwb3coc3BlY0FuZ2xlLCAzMi4wKTtcbiAgLy8gfVxuXG4gIHZlYzMgZGlmZnVzZUNvbG9yID0gY3VycmVudENvbG9yLnJnYiAqIChrX2FtYmlhbnRDb2VmICsgZGlmZnVzZUNvZWYpO1xuICB2ZWMzIHNwZWN1bGFyQ29sb3IgPSBrX3NwZWNDb2xvciAqIHNwZWN1bGFyQ29lZiAqIGN1cnJlbnRDb2xvci5hO1xuXG4gIHJldHVybiBkaWZmdXNlQ29sb3IgKyBzcGVjdWxhckNvbG9yO1xufVxuXG4vL1xuLy9cbi8vXG5cbnZvaWQgbWFpbih2b2lkKVxue1xuICBvX2NvbG9yID0gdmVjNChfZ2V0TGlnaHRDb2xvcih2X2NvbG9yKSwgMS4wKTtcbn1cbmAudHJpbSgpOyIsCiAgImltcG9ydCAqIGFzIHdlYmdsMiBmcm9tICcuLi8uLi8uLi9ncmFwaGljcy93ZWJnbDInO1xuaW1wb3J0IHsgSUNhbWVyYSB9IGZyb20gJy4uLy4uLy4uL2dyYXBoaWNzL2NhbWVyYSc7XG5cbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBzdGFja1JlbmRlcmVyVmVydGV4IGZyb20gJy4vc2hhZGVycy9nZW9tZXRyeS1yZW5kZXJlci5nbHNsLnZlcnQnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHN0YWNrUmVuZGVyZXJGcmFnbWVudCBmcm9tICcuL3NoYWRlcnMvZ2VvbWV0cnktcmVuZGVyZXIuZ2xzbC5mcmFnJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmNvbnN0IGtfYnVmZmVyU2l6ZSA9IDE0ICogMTAyNDtcblxuZXhwb3J0IGludGVyZmFjZSBJVmVydGV4IHtcbiAgcG9zOiBnbG0udmVjMztcbiAgbm9ybWFsOiBnbG0udmVjMztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJR2VvbWV0cnlSZW5kZXJlciB7XG4gIHB1c2goXG4gICAgaW5Qb2ludEE6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5RdWF0OiBnbG0uUmVhZG9ubHlRdWF0LFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5TY2FsZTogZ2xtLlJlYWRvbmx5VmVjM1xuICApOiB2b2lkO1xuICBmbHVzaChpbkNhbWVyYTogSUNhbWVyYSk6IHZvaWQ7XG4gIGNsZWFyKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBHZW9tZXRyeVJlbmRlcmVyIGltcGxlbWVudHMgSUdlb21ldHJ5UmVuZGVyZXIge1xuICBwcml2YXRlIF9zaGFkZXI6IHdlYmdsMi5JVW5ib3VuZFNoYWRlcjtcbiAgcHJpdmF0ZSBfZ2VvbWV0cnk6IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnk7XG5cbiAgcHJpdmF0ZSBfYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShrX2J1ZmZlclNpemUpO1xuICBwcml2YXRlIF9jdXJyZW50U2l6ZTogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zaGFkZXIgPSBuZXcgd2ViZ2wyLlNoYWRlclByb2dyYW0oJ0dlb21ldHJ5UmVuZGVyZXInLCB7XG4gICAgICB2ZXJ0ZXhTcmM6IHN0YWNrUmVuZGVyZXJWZXJ0ZXgsXG4gICAgICBmcmFnbWVudFNyYzogc3RhY2tSZW5kZXJlckZyYWdtZW50LFxuICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAnYV92ZXJ0ZXhfcG9zaXRpb24nLFxuICAgICAgICAnYV92ZXJ0ZXhfbm9ybWFsJyxcbiAgICAgICAgJ2Ffb2Zmc2V0X2NlbnRlcicsXG4gICAgICAgICdhX29mZnNldF9vcmllbnRhdGlvbicsXG4gICAgICAgICdhX29mZnNldF9jb2xvcicsXG4gICAgICAgICdhX29mZnNldF9zY2FsZSdcbiAgICAgIF0sXG4gICAgICB1bmlmb3JtczogWyd1X2NvbXBvc2VkTWF0cml4JywgJ3VfbGlnaHRQb3MnXVxuICAgIH0pO1xuXG4gICAgY29uc3QgZ2VvQnVpbGRlciA9IG5ldyB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5QnVpbGRlcigpO1xuICAgIGdlb0J1aWxkZXJcbiAgICAgIC5yZXNldCgpXG4gICAgICAuc2V0UHJpbWl0aXZlVHlwZSgndHJpYW5nbGVzJylcbiAgICAgIC5hZGRWYm8oKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV92ZXJ0ZXhfcG9zaXRpb24nLCAndmVjM2YnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV92ZXJ0ZXhfbm9ybWFsJywgJ3ZlYzNmJylcbiAgICAgIC8vIC5zZXRTdHJpZGUoMyAqIDQgKiA2KVxuICAgICAgLmFkZFZibygpXG4gICAgICAuc2V0VmJvQXNTdHJlYW1pbmcoKVxuICAgICAgLnNldFZib0FzSW5zdGFuY2VkKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2Ffb2Zmc2V0X2NlbnRlcicsICd2ZWMzZicpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX29mZnNldF9vcmllbnRhdGlvbicsICd2ZWM0ZicpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX29mZnNldF9jb2xvcicsICd2ZWMzZicpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX29mZnNldF9zY2FsZScsICd2ZWMzZicpO1xuXG4gICAgdGhpcy5fZ2VvbWV0cnkgPSBuZXcgd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeShcbiAgICAgIHRoaXMuX3NoYWRlcixcbiAgICAgIGdlb0J1aWxkZXIuZ2V0RGVmKClcbiAgICApO1xuICAgIHRoaXMuX2dlb21ldHJ5LnNldEZsb2F0QnVmZmVyU2l6ZSgxLCBrX2J1ZmZlclNpemUpO1xuICB9XG5cbiAgc2V0R2VvbWV0cnlWZXJ0aWNlcyh2ZXJ0aWNlczogSVZlcnRleFtdKSB7XG4gICAgY29uc3QgYnVmID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAuLi52ZXJ0aWNlcy5tYXAoKHZhbCkgPT4gWy4uLnZhbC5wb3MsIC4uLnZhbC5ub3JtYWxdKS5mbGF0KClcbiAgICBdKTtcbiAgICAvLyBjb25zdCBidWYgPSBuZXcgRmxvYXQzMkFycmF5KFsuLi52ZXJ0aWNlcy5tYXAodmFsID0+IFsuLi52YWwucG9zXSkuZmxhdCgpXSk7XG4gICAgdGhpcy5fZ2VvbWV0cnkuYWxsb2NhdGVCdWZmZXIoMCwgYnVmLCBidWYubGVuZ3RoKTtcbiAgICB0aGlzLl9nZW9tZXRyeS5zZXRQcmltaXRpdmVDb3VudChidWYubGVuZ3RoIC8gNik7XG4gIH1cblxuICBwdXNoKFxuICAgIGluUG9pbnRBOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUXVhdDogZ2xtLlJlYWRvbmx5UXVhdCxcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2NhbGU6IGdsbS5SZWFkb25seVZlYzNcbiAgKSB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRTaXplICsgMTMgPj0gdGhpcy5fYnVmZmVyLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuX3NoYWRlci5pc0JvdW5kKCkpIHtcbiAgICAgICAgdGhpcy5fZmx1c2goKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblBvaW50QVswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblBvaW50QVsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblBvaW50QVsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblF1YXRbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5RdWF0WzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluUXVhdFsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblF1YXRbM107XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Db2xvclswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpbkNvbG9yWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluQ29sb3JbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5TY2FsZVswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblNjYWxlWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluU2NhbGVbMl07XG4gICAgLy8gdGhpcy5fY3VycmVudFNpemUgKz0gNjtcbiAgfVxuXG4gIGZsdXNoKGluQ2FtZXJhOiBJQ2FtZXJhKSB7XG4gICAgaWYgKCF0aGlzLmNhblJlbmRlcigpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2hhZGVyLmJpbmQoKGJvdW5kKSA9PiB7XG4gICAgICBib3VuZC5zZXRNYXRyaXg0VW5pZm9ybSgndV9jb21wb3NlZE1hdHJpeCcsIGluQ2FtZXJhLmdldENvbXBvc2VkTWF0cml4KCkpO1xuICAgICAgY29uc3QgZXllUG9zID0gaW5DYW1lcmEuZ2V0RXllKCk7XG4gICAgICBib3VuZC5zZXRGbG9hdDNVbmlmb3JtKCd1X2xpZ2h0UG9zJywgZXllUG9zWzBdLCBleWVQb3NbMV0sIGV5ZVBvc1syXSk7XG5cbiAgICAgIHRoaXMuX2ZsdXNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBzYWZlUmVuZGVyKGluQ2FtZXJhOiBJQ2FtZXJhLCBpbkNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fc2hhZGVyLmJpbmQoKGJvdW5kKSA9PiB7XG4gICAgICBib3VuZC5zZXRNYXRyaXg0VW5pZm9ybSgndV9jb21wb3NlZE1hdHJpeCcsIGluQ2FtZXJhLmdldENvbXBvc2VkTWF0cml4KCkpO1xuICAgICAgY29uc3QgZXllUG9zID0gaW5DYW1lcmEuZ2V0RXllKCk7XG4gICAgICBib3VuZC5zZXRGbG9hdDNVbmlmb3JtKCd1X2xpZ2h0UG9zJywgZXllUG9zWzBdLCBleWVQb3NbMV0sIGV5ZVBvc1syXSk7XG5cbiAgICAgIGluQ2FsbGJhY2soKTtcblxuICAgICAgdGhpcy5fZmx1c2goKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZsdXNoKCkge1xuICAgIHRoaXMuX2dlb21ldHJ5LnVwZGF0ZUJ1ZmZlcigxLCB0aGlzLl9idWZmZXIsIHRoaXMuX2N1cnJlbnRTaXplLCAwKTtcbiAgICB0aGlzLl9nZW9tZXRyeS5zZXRJbnN0YW5jZWRDb3VudCh0aGlzLl9jdXJyZW50U2l6ZSAvIDEzKTtcblxuICAgIHRoaXMuX2dlb21ldHJ5LnJlbmRlcigpO1xuXG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG5cbiAgY2FuUmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50U2l6ZSA+IDA7XG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9jdXJyZW50U2l6ZSA9IDA7XG4gIH1cbn1cbiIsCiAgImV4cG9ydCBkZWZhdWx0IGBcbiN2ZXJzaW9uIDMwMCBlc1xuXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbnVuaWZvcm0gbWF0NCB1X2NvbXBvc2VkTWF0cml4O1xuXG5pbiB2ZWMzIGFfdmVydGV4X3Bvc2l0aW9uO1xuXG5pbiB2ZWMzIGFfb2Zmc2V0X2NlbnRlcjtcbmluIHZlYzQgYV9vZmZzZXRfb3JpZW50YXRpb247XG5pbiB2ZWMzIGFfb2Zmc2V0X2NvbG9yO1xuaW4gdmVjMyBhX29mZnNldF9zY2FsZTtcblxuZmxhdCBvdXQgdmVjNCB2X2NvbG9yO1xuXG52ZWMzIGFwcGx5X3F1YXRfdG9fdmVjMyh2ZWMzIHBvc2l0aW9uLCB2ZWM0IHEpXG57XG4gIHZlYzMgdiA9IHBvc2l0aW9uLnh5ejtcbiAgcmV0dXJuIHYgKyAyLjAgKiBjcm9zcyhxLnh5eiwgY3Jvc3MocS54eXosIHYpICsgcS53ICogdik7XG59XG5cbnZvaWQgbWFpbih2b2lkKVxue1xuXHR2ZWMzIHdvcmxkU3BhY2VQb3NpdGlvbiA9IGFfb2Zmc2V0X2NlbnRlciArIGFwcGx5X3F1YXRfdG9fdmVjMyhhX3ZlcnRleF9wb3NpdGlvbiAqIGFfb2Zmc2V0X3NjYWxlLCBhX29mZnNldF9vcmllbnRhdGlvbik7XG5cbiAgZ2xfUG9zaXRpb24gPSB1X2NvbXBvc2VkTWF0cml4ICogdmVjNCh3b3JsZFNwYWNlUG9zaXRpb24sIDEuMCk7XG5cbiAgdl9jb2xvciA9IHZlYzQoYV9vZmZzZXRfY29sb3IsIDEuMCk7XG59XG5gLnRyaW0oKTsiLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGxvd3AgZmxvYXQ7XG5cbmZsYXQgaW4gdmVjNCB2X2NvbG9yO1xuXG5vdXQgdmVjNCBvX2NvbG9yO1xuXG52b2lkIG1haW4odm9pZClcbntcbiAgb19jb2xvciA9IHZlYzQodl9jb2xvci5yYmcsIDEuMCk7XG59XG5gLnRyaW0oKTsiLAogICJpbXBvcnQgKiBhcyB3ZWJnbDIgZnJvbSAnLi4vLi4vLi4vZ3JhcGhpY3Mvd2ViZ2wyJztcbmltcG9ydCB7IElDYW1lcmEgfSBmcm9tICcuLi8uLi8uLi9ncmFwaGljcy9jYW1lcmEnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgc3RhY2tSZW5kZXJlclZlcnRleCBmcm9tICcuL3NoYWRlcnMvZ2VvbWV0cnktcmVuZGVyZXItZmxhdC5nbHNsLnZlcnQnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHN0YWNrUmVuZGVyZXJGcmFnbWVudCBmcm9tICcuL3NoYWRlcnMvZ2VvbWV0cnktcmVuZGVyZXItZmxhdC5nbHNsLmZyYWcnO1xuXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuY29uc3Qga19idWZmZXJTaXplID0gMTQgKiAxMDI0O1xuXG5leHBvcnQgaW50ZXJmYWNlIElGbGF0VmVydGV4IHtcbiAgcG9zOiBnbG0udmVjMztcbiAgLy8gbm9ybWFsOiBnbG0udmVjMztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJR2VvbWV0cnlSZW5kZXJlckZsYXQge1xuICBwdXNoKFxuICAgIGluUG9pbnRBOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUXVhdDogZ2xtLlJlYWRvbmx5UXVhdCxcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2NhbGU6IGdsbS5SZWFkb25seVZlYzNcbiAgKTogdm9pZDtcbiAgZmx1c2goaW5DYW1lcmE6IElDYW1lcmEpOiB2b2lkO1xuICBjbGVhcigpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgR2VvbWV0cnlSZW5kZXJlckZsYXQgaW1wbGVtZW50cyBJR2VvbWV0cnlSZW5kZXJlckZsYXQge1xuICBwcml2YXRlIF9zaGFkZXI6IHdlYmdsMi5JVW5ib3VuZFNoYWRlcjtcbiAgcHJpdmF0ZSBfZ2VvbWV0cnk6IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnk7XG5cbiAgcHJpdmF0ZSBfYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShrX2J1ZmZlclNpemUpO1xuICBwcml2YXRlIF9jdXJyZW50U2l6ZTogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zaGFkZXIgPSBuZXcgd2ViZ2wyLlNoYWRlclByb2dyYW0oJ0dlb21ldHJ5UmVuZGVyZXJGbGF0Jywge1xuICAgICAgdmVydGV4U3JjOiBzdGFja1JlbmRlcmVyVmVydGV4LFxuICAgICAgZnJhZ21lbnRTcmM6IHN0YWNrUmVuZGVyZXJGcmFnbWVudCxcbiAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgJ2FfdmVydGV4X3Bvc2l0aW9uJyxcbiAgICAgICAgLy8gJ2FfdmVydGV4X25vcm1hbCcsXG4gICAgICAgICdhX29mZnNldF9jZW50ZXInLFxuICAgICAgICAnYV9vZmZzZXRfb3JpZW50YXRpb24nLFxuICAgICAgICAnYV9vZmZzZXRfY29sb3InLFxuICAgICAgICAnYV9vZmZzZXRfc2NhbGUnXG4gICAgICBdLFxuICAgICAgdW5pZm9ybXM6IFtcbiAgICAgICAgJ3VfY29tcG9zZWRNYXRyaXgnXG4gICAgICAgIC8vICd1X2xpZ2h0UG9zJ1xuICAgICAgXVxuICAgIH0pO1xuXG4gICAgY29uc3QgZ2VvQnVpbGRlciA9IG5ldyB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5QnVpbGRlcigpO1xuICAgIGdlb0J1aWxkZXJcbiAgICAgIC5yZXNldCgpXG4gICAgICAuc2V0UHJpbWl0aXZlVHlwZSgndHJpYW5nbGVzJylcbiAgICAgIC5hZGRWYm8oKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV92ZXJ0ZXhfcG9zaXRpb24nLCAndmVjM2YnKVxuICAgICAgLy8gLmFkZFZib0F0dHJpYnV0ZSgnYV92ZXJ0ZXhfbm9ybWFsJywgJ3ZlYzNmJylcbiAgICAgIC8vIC5zZXRTdHJpZGUoMyAqIDQgKiA2KVxuICAgICAgLmFkZFZibygpXG4gICAgICAuc2V0VmJvQXNTdHJlYW1pbmcoKVxuICAgICAgLnNldFZib0FzSW5zdGFuY2VkKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2Ffb2Zmc2V0X2NlbnRlcicsICd2ZWMzZicpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX29mZnNldF9vcmllbnRhdGlvbicsICd2ZWM0ZicpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX29mZnNldF9jb2xvcicsICd2ZWMzZicpXG4gICAgICAuYWRkVmJvQXR0cmlidXRlKCdhX29mZnNldF9zY2FsZScsICd2ZWMzZicpO1xuXG4gICAgdGhpcy5fZ2VvbWV0cnkgPSBuZXcgd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeShcbiAgICAgIHRoaXMuX3NoYWRlcixcbiAgICAgIGdlb0J1aWxkZXIuZ2V0RGVmKClcbiAgICApO1xuICAgIHRoaXMuX2dlb21ldHJ5LnNldEZsb2F0QnVmZmVyU2l6ZSgxLCBrX2J1ZmZlclNpemUpO1xuICB9XG5cbiAgc2V0R2VvbWV0cnlWZXJ0aWNlcyh2ZXJ0aWNlczogSUZsYXRWZXJ0ZXhbXSkge1xuICAgIGNvbnN0IGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgLy8gLi4udmVydGljZXMubWFwKCh2YWwpID0+IFsuLi52YWwucG9zLCAuLi52YWwubm9ybWFsXSkuZmxhdCgpXG4gICAgICAuLi52ZXJ0aWNlcy5tYXAoKHZhbCkgPT4gWy4uLnZhbC5wb3NdKS5mbGF0KClcbiAgICBdKTtcbiAgICAvLyBjb25zdCBidWYgPSBuZXcgRmxvYXQzMkFycmF5KFsuLi52ZXJ0aWNlcy5tYXAodmFsID0+IFsuLi52YWwucG9zXSkuZmxhdCgpXSk7XG4gICAgdGhpcy5fZ2VvbWV0cnkuYWxsb2NhdGVCdWZmZXIoMCwgYnVmLCBidWYubGVuZ3RoKTtcbiAgICB0aGlzLl9nZW9tZXRyeS5zZXRQcmltaXRpdmVDb3VudChidWYubGVuZ3RoIC8gMyk7XG4gIH1cblxuICBwdXNoKFxuICAgIGluUG9pbnRBOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUXVhdDogZ2xtLlJlYWRvbmx5UXVhdCxcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2NhbGU6IGdsbS5SZWFkb25seVZlYzNcbiAgKSB7XG4gICAgaWYgKHRoaXMuX2N1cnJlbnRTaXplICsgMTMgPj0gdGhpcy5fYnVmZmVyLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuX3NoYWRlci5pc0JvdW5kKCkpIHtcbiAgICAgICAgdGhpcy5fZmx1c2goKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblBvaW50QVswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblBvaW50QVsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblBvaW50QVsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblF1YXRbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5RdWF0WzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluUXVhdFsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblF1YXRbM107XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Db2xvclswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpbkNvbG9yWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluQ29sb3JbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5TY2FsZVswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSBpblNjYWxlWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluU2NhbGVbMl07XG4gICAgLy8gdGhpcy5fY3VycmVudFNpemUgKz0gNjtcbiAgfVxuXG4gIGZsdXNoKGluQ2FtZXJhOiBJQ2FtZXJhKSB7XG4gICAgaWYgKCF0aGlzLmNhblJlbmRlcigpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2hhZGVyLmJpbmQoKGJvdW5kKSA9PiB7XG4gICAgICBib3VuZC5zZXRNYXRyaXg0VW5pZm9ybSgndV9jb21wb3NlZE1hdHJpeCcsIGluQ2FtZXJhLmdldENvbXBvc2VkTWF0cml4KCkpO1xuICAgICAgLy8gY29uc3QgZXllUG9zID0gaW5DYW1lcmEuZ2V0RXllKCk7XG4gICAgICAvLyBib3VuZC5zZXRGbG9hdDNVbmlmb3JtKCd1X2xpZ2h0UG9zJywgZXllUG9zWzBdLCBleWVQb3NbMV0sIGV5ZVBvc1syXSk7XG5cbiAgICAgIHRoaXMuX2ZsdXNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBzYWZlUmVuZGVyKGluQ2FtZXJhOiBJQ2FtZXJhLCBpbkNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fc2hhZGVyLmJpbmQoKGJvdW5kKSA9PiB7XG4gICAgICBib3VuZC5zZXRNYXRyaXg0VW5pZm9ybSgndV9jb21wb3NlZE1hdHJpeCcsIGluQ2FtZXJhLmdldENvbXBvc2VkTWF0cml4KCkpO1xuICAgICAgLy8gY29uc3QgZXllUG9zID0gaW5DYW1lcmEuZ2V0RXllKCk7XG4gICAgICAvLyBib3VuZC5zZXRGbG9hdDNVbmlmb3JtKCd1X2xpZ2h0UG9zJywgZXllUG9zWzBdLCBleWVQb3NbMV0sIGV5ZVBvc1syXSk7XG5cbiAgICAgIGluQ2FsbGJhY2soKTtcblxuICAgICAgdGhpcy5fZmx1c2goKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZsdXNoKCkge1xuICAgIHRoaXMuX2dlb21ldHJ5LnVwZGF0ZUJ1ZmZlcigxLCB0aGlzLl9idWZmZXIsIHRoaXMuX2N1cnJlbnRTaXplLCAwKTtcbiAgICB0aGlzLl9nZW9tZXRyeS5zZXRJbnN0YW5jZWRDb3VudCh0aGlzLl9jdXJyZW50U2l6ZSAvIDEzKTtcblxuICAgIHRoaXMuX2dlb21ldHJ5LnJlbmRlcigpO1xuXG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG5cbiAgY2FuUmVuZGVyKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50U2l6ZSA+IDA7XG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9jdXJyZW50U2l6ZSA9IDA7XG4gIH1cbn1cbiIsCiAgImltcG9ydCAqIGFzIHdlYmdsMiBmcm9tICcuLi8uLi8uLi93ZWJnbDInO1xuXG5leHBvcnQgY2xhc3MgU2NlbmVDYXB0dXJlciB7XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBfZnJhbWVCdWZmZXI6IHdlYmdsMi5JVW5ib3VuZEZyYW1lQnVmZmVyID0gbmV3IHdlYmdsMi5GcmFtZUJ1ZmZlcigpO1xuICBwcml2YXRlIF9yZW5kZXJCdWZmZXI6IHdlYmdsMi5JVW5ib3VuZFJlbmRlckJ1ZmZlciA9XG4gICAgbmV3IHdlYmdsMi5SZW5kZXJCdWZmZXIoKTtcbiAgcHJpdmF0ZSBfY29sb3JUZXh0dXJlczogd2ViZ2wyLklVbmJvdW5kVGV4dHVyZVtdID0gW107XG4gIHByaXZhdGUgX2N1cnJlbnRJbmRleDogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuX2NvbG9yVGV4dHVyZXMucHVzaChuZXcgd2ViZ2wyLlRleHR1cmUoKSk7XG4gICAgdGhpcy5fY29sb3JUZXh0dXJlcy5wdXNoKG5ldyB3ZWJnbDIuVGV4dHVyZSgpKTtcbiAgICB0aGlzLl9jb2xvclRleHR1cmVzLmZvckVhY2goKHRleHR1cmUpID0+IHRleHR1cmUuaW5pdGlhbGl6ZSgpKTtcblxuICAgIHRoaXMucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICB9XG5cbiAgcmVzaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICB0aGlzLl9yZW5kZXJCdWZmZXIuYmluZCgoYm91bmRCdWZmZXIpID0+IHtcbiAgICAgIGJvdW5kQnVmZmVyLnNldFNpemUoJ2RlcHRoMzJmJywgdGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb2xvclRleHR1cmVzLmZvckVhY2goKHRleHR1cmUpID0+IHtcbiAgICAgIHRleHR1cmUuYmluZCgoYm91bmRUZXh0dXJlKSA9PiB7XG4gICAgICAgIGJvdW5kVGV4dHVyZS5hbGxvY2F0ZSh0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZnJhbWVCdWZmZXIuYmluZCgoYm91bmRGcmFtZUJ1ZmZlcikgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyQnVmZmVyLmJpbmQoKGJvdW5kQnVmZmVyKSA9PiB7XG4gICAgICAgIGJvdW5kRnJhbWVCdWZmZXIuYXR0YWNoUmVuZGVyQnVmZmVyKGJvdW5kQnVmZmVyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgY2FwdHVyZVNjZW5lKHJlbmRlckNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fZnJhbWVCdWZmZXIuYmluZCgoYm91bmRGcmFtZUJ1ZmZlcikgPT4ge1xuICAgICAgdGhpcy5fY29sb3JUZXh0dXJlc1t0aGlzLl9jdXJyZW50SW5kZXhdLmJpbmQoKGJvdW5kVGV4dHVyZSkgPT4ge1xuICAgICAgICBib3VuZEZyYW1lQnVmZmVyLmF0dGFjaFRleHR1cmUoYm91bmRUZXh0dXJlKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBnbCA9IHdlYmdsMi5XZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuICAgICAgZ2wudmlld3BvcnQoMCwgMCwgdGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XG4gICAgICBnbC5jbGVhckNvbG9yKDAsIDAsIDAsIDApO1xuXG4gICAgICByZW5kZXJDYWxsYmFjaygpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY3VycmVudEluZGV4ID0gKHRoaXMuX2N1cnJlbnRJbmRleCArIDEpICUgdGhpcy5fY29sb3JUZXh0dXJlcy5sZW5ndGg7XG4gIH1cblxuICBnZXQgY29sb3JUZXh0dXJlKCk6IHdlYmdsMi5JVW5ib3VuZFRleHR1cmUge1xuICAgIHJldHVybiB0aGlzLl9jb2xvclRleHR1cmVzW3RoaXMuX2N1cnJlbnRJbmRleF07XG4gIH1cbn1cbiIsCiAgImV4cG9ydCBkZWZhdWx0IGBcbiN2ZXJzaW9uIDMwMCBlc1xuXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbnVuaWZvcm0gbWF0NCB1X2NvbXBvc2VkTWF0cml4O1xuXG5pbiB2ZWMzICBhX3ZlcnRleF9wb3NpdGlvbjtcbmluIHZlYzIgIGFfdmVydGV4X3RleENvb3JkO1xuXG5vdXQgdmVjMiB2X3RleENvb3JkO1xuXG52b2lkIG1haW4odm9pZClcbntcbiAgdl90ZXhDb29yZCA9IGFfdmVydGV4X3RleENvb3JkO1xuICBnbF9Qb3NpdGlvbiA9IHVfY29tcG9zZWRNYXRyaXggKiB2ZWM0KGFfdmVydGV4X3Bvc2l0aW9uLCAxLjApO1xufVxuXG5gLnRyaW0oKTsiLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG51bmlmb3JtIHNhbXBsZXIyRCB1X3RleHR1cmU7XG5cbmluIHZlYzIgdl90ZXhDb29yZDtcblxub3V0IHZlYzQgb19jb2xvcjtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIG9fY29sb3IgPSB0ZXh0dXJlKHVfdGV4dHVyZSwgdl90ZXhDb29yZCk7XG59XG5gLnRyaW0oKTsiLAogICJpbXBvcnQgKiBhcyB3ZWJnbDIgZnJvbSAnLi4vLi4vLi4vd2ViZ2wyJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHZlcnRleFNoYWRlciBmcm9tICcuL3NoYWRlcnMvaHVkLXRleHR1cmUtcmVuZGVyZXIuZ2xzbC52ZXJ0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCBmcmFnbWVudFNoYWRlciBmcm9tICcuL3NoYWRlcnMvaHVkLXRleHR1cmUtcmVuZGVyZXIuZ2xzbC5mcmFnJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJIdWRUZXh0dXJlIHtcbiAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF9zaGFkZXI6IHdlYmdsMi5TaGFkZXJQcm9ncmFtO1xuICBwcml2YXRlIF9nZW9tZXRyeTogd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeTtcblxuICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuX3NoYWRlciA9IG5ldyB3ZWJnbDIuU2hhZGVyUHJvZ3JhbSgnUmVuZGVySHVkVGV4dHVyZScsIHtcbiAgICAgIHZlcnRleFNyYzogdmVydGV4U2hhZGVyLFxuICAgICAgZnJhZ21lbnRTcmM6IGZyYWdtZW50U2hhZGVyLFxuICAgICAgYXR0cmlidXRlczogWydhX3ZlcnRleF9wb3NpdGlvbicsICdhX3ZlcnRleF90ZXhDb29yZCddLFxuICAgICAgdW5pZm9ybXM6IFsndV9jb21wb3NlZE1hdHJpeCcsICd1X3RleHR1cmUnXVxuICAgIH0pO1xuXG4gICAgY29uc3QgZ2VvQnVpbGRlciA9IG5ldyB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5QnVpbGRlcigpO1xuICAgIGdlb0J1aWxkZXJcbiAgICAgIC5yZXNldCgpXG4gICAgICAuc2V0UHJpbWl0aXZlVHlwZSgndHJpYW5nbGVTdHJpcCcpXG4gICAgICAuYWRkVmJvKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X3Bvc2l0aW9uJywgJ3ZlYzNmJylcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X3RleENvb3JkJywgJ3ZlYzJmJyk7XG5cbiAgICB0aGlzLl9nZW9tZXRyeSA9IG5ldyB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5KFxuICAgICAgdGhpcy5fc2hhZGVyLFxuICAgICAgZ2VvQnVpbGRlci5nZXREZWYoKVxuICAgICk7XG5cbiAgICB0aGlzLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgfVxuXG4gIHJlc2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgY29uc3QgdG1wVmVydGljZXM6IHsgcG9zOiBnbG0uUmVhZG9ubHlWZWMzOyB0ZXg6IGdsbS5SZWFkb25seVZlYzIgfVtdID0gW1xuICAgICAgeyBwb3M6IFt0aGlzLl93aWR0aCAqIDAsIHRoaXMuX2hlaWdodCAqIDAsIC0xXSwgdGV4OiBbMCwgMF0gfSxcbiAgICAgIHsgcG9zOiBbdGhpcy5fd2lkdGggKiAxLCB0aGlzLl9oZWlnaHQgKiAwLCAtMV0sIHRleDogWzEsIDBdIH0sXG4gICAgICB7IHBvczogW3RoaXMuX3dpZHRoICogMCwgdGhpcy5faGVpZ2h0ICogMSwgLTFdLCB0ZXg6IFswLCAxXSB9LFxuICAgICAgeyBwb3M6IFt0aGlzLl93aWR0aCAqIDEsIHRoaXMuX2hlaWdodCAqIDEsIC0xXSwgdGV4OiBbMSwgMV0gfVxuICAgIF07XG5cbiAgICBjb25zdCB2ZXJ0QXJyID0gdG1wVmVydGljZXNcbiAgICAgIC5tYXAoKHZlcnRleCkgPT4ge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHZlcnRleC5wb3NbMF0sXG4gICAgICAgICAgdmVydGV4LnBvc1sxXSxcbiAgICAgICAgICB2ZXJ0ZXgucG9zWzJdLFxuICAgICAgICAgIHZlcnRleC50ZXhbMF0sXG4gICAgICAgICAgdmVydGV4LnRleFsxXVxuICAgICAgICBdO1xuICAgICAgfSlcbiAgICAgIC5mbGF0KCk7XG5cbiAgICB0aGlzLl9nZW9tZXRyeS5hbGxvY2F0ZUJ1ZmZlcigwLCB2ZXJ0QXJyLCB2ZXJ0QXJyLmxlbmd0aCk7XG4gICAgdGhpcy5fZ2VvbWV0cnkuc2V0UHJpbWl0aXZlQ291bnQodmVydEFyci5sZW5ndGggLyA1KTtcbiAgfVxuXG4gIGZsdXNoKGNvbXBvc2VkTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQ0LCBjdWJlTWFwOiB3ZWJnbDIuSVVuYm91bmRUZXh0dXJlKSB7XG4gICAgdGhpcy5fc2hhZGVyLmJpbmQoKGJvdW5kU2hhZGVyKSA9PiB7XG4gICAgICBib3VuZFNoYWRlci5zZXRNYXRyaXg0VW5pZm9ybSgndV9jb21wb3NlZE1hdHJpeCcsIGNvbXBvc2VkTWF0cml4KTtcbiAgICAgIGJvdW5kU2hhZGVyLnNldFRleHR1cmVVbmlmb3JtKCd1X3RleHR1cmUnLCBjdWJlTWFwLCAwKTtcblxuICAgICAgdGhpcy5fZ2VvbWV0cnkucmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsCiAgImltcG9ydCB7IFNjZW5lQ2FwdHVyZXIgfSBmcm9tICcuL2ludGVybmFscy9TY2VuZUNhcHR1cmVyJztcbmltcG9ydCB7IFJlbmRlckh1ZFRleHR1cmUgfSBmcm9tICcuL2ludGVybmFscy9SZW5kZXJIdWRUZXh0dXJlJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBjbGFzcyBNdWx0aUJ1ZmZlcnNSZW5kZXJpbmcge1xuICBwcml2YXRlIF9zY2VuZUNhcHR1cmVyOiBTY2VuZUNhcHR1cmVyO1xuICBwcml2YXRlIF9yZW5kZXJIdWRUZXh0dXJlOiBSZW5kZXJIdWRUZXh0dXJlO1xuXG4gIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5fc2NlbmVDYXB0dXJlciA9IG5ldyBTY2VuZUNhcHR1cmVyKHdpZHRoLCBoZWlnaHQpO1xuICAgIHRoaXMuX3JlbmRlckh1ZFRleHR1cmUgPSBuZXcgUmVuZGVySHVkVGV4dHVyZSh3aWR0aCwgaGVpZ2h0KTtcbiAgfVxuXG4gIHJlc2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMuX3NjZW5lQ2FwdHVyZXIucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIHRoaXMuX3JlbmRlckh1ZFRleHR1cmUucmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICB9XG5cbiAgY2FwdHVyZVNjZW5lKHJlbmRlckNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fc2NlbmVDYXB0dXJlci5jYXB0dXJlU2NlbmUocmVuZGVyQ2FsbGJhY2spO1xuICB9XG5cbiAgcmVuZGVySHVkKGNvbXBvc2VkTWF0NDogZ2xtLlJlYWRvbmx5TWF0NCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlckh1ZFRleHR1cmUuZmx1c2goXG4gICAgICBjb21wb3NlZE1hdDQsXG4gICAgICB0aGlzLl9zY2VuZUNhcHR1cmVyLmNvbG9yVGV4dHVyZVxuICAgICk7XG4gIH1cbn1cbiIsCiAgImV4cG9ydCBkZWZhdWx0IGBcbiN2ZXJzaW9uIDMwMCBlc1xuXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbnVuaWZvcm0gbWF0NCB1X2NvbXBvc2VkTWF0cml4O1xuXG5pbiB2ZWMzIGFfdmVydGV4X3Bvc2l0aW9uO1xuaW4gdmVjNCBhX3ZlcnRleF9jb2xvcjtcblxuZmxhdCBvdXQgdmVjNCB2X2NvbG9yO1xuXG52b2lkIG1haW4odm9pZClcbntcbiAgZ2xfUG9zaXRpb24gPSB1X2NvbXBvc2VkTWF0cml4ICogdmVjNChhX3ZlcnRleF9wb3NpdGlvbiwgMS4wKTtcblxuICB2X2NvbG9yID0gYV92ZXJ0ZXhfY29sb3I7XG59XG5gLnRyaW0oKTsiLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGxvd3AgZmxvYXQ7XG5cbmZsYXQgaW4gdmVjNCB2X2NvbG9yO1xuXG5vdXQgdmVjNCBvX2NvbG9yO1xuXG52b2lkIG1haW4odm9pZClcbntcbiAgb19jb2xvciA9IHZfY29sb3I7XG59XG5gLnRyaW0oKTsiLAogICJpbXBvcnQgKiBhcyB3ZWJnbDIgZnJvbSAnLi4vLi4vLi4vLi4vZ3JhcGhpY3Mvd2ViZ2wyJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmNvbnN0IGtfYnVmZmVyU2l6ZSA9IDE0ICogMTAyNDtcblxuZXhwb3J0IGNsYXNzIFdpcmVGcmFtZXNTdGFja1JlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfc2hhZGVyOiB3ZWJnbDIuSVVuYm91bmRTaGFkZXI7XG4gIHByaXZhdGUgX2dlb21ldHJ5OiB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5O1xuXG4gIHByaXZhdGUgX2J1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoa19idWZmZXJTaXplKTtcbiAgcHJpdmF0ZSBfY3VycmVudFNpemU6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaW5TaGFkZXI6IHdlYmdsMi5JVW5ib3VuZFNoYWRlcixcbiAgICBpbkdlb21ldHJ5RGVmOiB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5RGVmaW5pdGlvblxuICApIHtcbiAgICB0aGlzLl9zaGFkZXIgPSBpblNoYWRlcjtcbiAgICBjb25zdCBnZW9tZXRyeURlZjogd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeURlZmluaXRpb24gPSB7XG4gICAgICAuLi5pbkdlb21ldHJ5RGVmLFxuICAgICAgcHJpbWl0aXZlVHlwZTogd2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5QcmltaXRpdmVUeXBlLmxpbmVzXG4gICAgfTtcblxuICAgIHRoaXMuX2dlb21ldHJ5ID0gbmV3IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnkoaW5TaGFkZXIsIGdlb21ldHJ5RGVmKTtcbiAgfVxuXG4gIHB1c2hMaW5lKFxuICAgIGluUG9pbnRBOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUG9pbnRCOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50U2l6ZSArIDcgKiAyID49IHRoaXMuX2J1ZmZlci5sZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLl9zaGFkZXIuaXNCb3VuZCgpKSB7XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhbHBoYVZhbHVlID0gaW5Db2xvclszXSA/PyAxO1xuXG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMF0gPSBpblBvaW50QVswXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAxXSA9IGluUG9pbnRBWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDJdID0gaW5Qb2ludEFbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgM10gPSBpbkNvbG9yWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDRdID0gaW5Db2xvclsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA1XSA9IGluQ29sb3JbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNl0gPSBhbHBoYVZhbHVlO1xuICAgIHRoaXMuX2N1cnJlbnRTaXplICs9IDc7XG5cbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAwXSA9IGluUG9pbnRCWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDFdID0gaW5Qb2ludEJbMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMl0gPSBpblBvaW50QlsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAzXSA9IGluQ29sb3JbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNF0gPSBpbkNvbG9yWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDVdID0gaW5Db2xvclsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA2XSA9IGFscGhhVmFsdWU7XG4gICAgdGhpcy5fY3VycmVudFNpemUgKz0gNztcbiAgfVxuXG4gIGNhblJlbmRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFNpemUgPiAwO1xuICB9XG5cbiAgZmx1c2goKSB7XG4gICAgaWYgKCF0aGlzLmNhblJlbmRlcigpKSByZXR1cm47XG5cbiAgICB0aGlzLl9nZW9tZXRyeS5hbGxvY2F0ZUJ1ZmZlcigwLCB0aGlzLl9idWZmZXIsIHRoaXMuX2N1cnJlbnRTaXplKTtcbiAgICB0aGlzLl9nZW9tZXRyeS5zZXRQcmltaXRpdmVDb3VudCh0aGlzLl9jdXJyZW50U2l6ZSAvIDcpO1xuXG4gICAgdGhpcy5fZ2VvbWV0cnkucmVuZGVyKCk7XG5cbiAgICB0aGlzLmNsZWFyKCk7XG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICAvLyByZXNldCB2ZXJ0aWNlc1xuICAgIHRoaXMuX2N1cnJlbnRTaXplID0gMDtcbiAgfVxufVxuIiwKICAiaW1wb3J0ICogYXMgd2ViZ2wyIGZyb20gJy4uLy4uLy4uLy4uL2dyYXBoaWNzL3dlYmdsMic7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5jb25zdCBrX2J1ZmZlclNpemUgPSA3ICogMTAyNDtcblxuZXhwb3J0IGNsYXNzIFRyaWFuZ2xlc1N0YWNrUmVuZGVyZXIge1xuICBwcml2YXRlIF9zaGFkZXI6IHdlYmdsMi5JVW5ib3VuZFNoYWRlcjtcbiAgcHJpdmF0ZSBfZ2VvbWV0cnk6IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnk7XG5cbiAgcHJpdmF0ZSBfYnVmZmVyID0gbmV3IEZsb2F0MzJBcnJheShrX2J1ZmZlclNpemUpO1xuICBwcml2YXRlIF9jdXJyZW50U2l6ZTogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBpblNoYWRlcjogd2ViZ2wyLklVbmJvdW5kU2hhZGVyLFxuICAgIGluR2VvbWV0cnlEZWY6IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnlEZWZpbml0aW9uXG4gICkge1xuICAgIHRoaXMuX3NoYWRlciA9IGluU2hhZGVyO1xuICAgIGNvbnN0IGdlb21ldHJ5RGVmOiB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5RGVmaW5pdGlvbiA9IHtcbiAgICAgIC4uLmluR2VvbWV0cnlEZWYsXG4gICAgICBwcmltaXRpdmVUeXBlOiB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLlByaW1pdGl2ZVR5cGUudHJpYW5nbGVzXG4gICAgfTtcblxuICAgIHRoaXMuX2dlb21ldHJ5ID0gbmV3IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnkoaW5TaGFkZXIsIGdlb21ldHJ5RGVmKTtcbiAgfVxuXG4gIHB1c2hUcmlhbmdsZShcbiAgICBpblBvaW50QTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblBvaW50QjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblBvaW50QzogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzIHwgZ2xtLlJlYWRvbmx5VmVjNFxuICApIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFNpemUgKyA3ICogNiA+PSB0aGlzLl9idWZmZXIubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5fc2hhZGVyLmlzQm91bmQoKSkge1xuICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWxwaGFWYWx1ZSA9IGluQ29sb3JbM10gPz8gMTtcblxuICAgIC8vIDBcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAwXSA9IGluUG9pbnRBWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDFdID0gaW5Qb2ludEFbMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMl0gPSBpblBvaW50QVsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAzXSA9IGluQ29sb3JbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNF0gPSBpbkNvbG9yWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDVdID0gaW5Db2xvclsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA2XSA9IGFscGhhVmFsdWU7XG4gICAgdGhpcy5fY3VycmVudFNpemUgKz0gNztcblxuICAgIC8vIDJcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAwXSA9IGluUG9pbnRCWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDFdID0gaW5Qb2ludEJbMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMl0gPSBpblBvaW50QlsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAzXSA9IGluQ29sb3JbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNF0gPSBpbkNvbG9yWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDVdID0gaW5Db2xvclsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA2XSA9IGFscGhhVmFsdWU7XG4gICAgdGhpcy5fY3VycmVudFNpemUgKz0gNztcblxuICAgIC8vIDNcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAwXSA9IGluUG9pbnRDWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDFdID0gaW5Qb2ludENbMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgMl0gPSBpblBvaW50Q1syXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyAzXSA9IGluQ29sb3JbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplICsgNF0gPSBpbkNvbG9yWzFdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSArIDVdID0gaW5Db2xvclsyXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUgKyA2XSA9IGFscGhhVmFsdWU7XG4gICAgdGhpcy5fY3VycmVudFNpemUgKz0gNztcbiAgfVxuXG4gIHB1c2hMaW5lKFxuICAgIGluUG9pbnRBOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUG9pbnRCOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIHRoaWNrbmVzczogbnVtYmVyLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50U2l6ZSArIDcgKiA2ID49IHRoaXMuX2J1ZmZlci5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkaWZmWCA9IGluUG9pbnRCWzBdIC0gaW5Qb2ludEFbMF07XG4gICAgY29uc3QgZGlmZlkgPSBpblBvaW50QlsxXSAtIGluUG9pbnRBWzFdO1xuICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMihkaWZmWSwgZGlmZlgpICsgTWF0aC5QSSAqIDAuNTtcblxuICAgIGNvbnN0IHN0ZXBYID0gTWF0aC5jb3MoYW5nbGUpICogdGhpY2tuZXNzICogMC41O1xuICAgIGNvbnN0IHN0ZXBZID0gTWF0aC5zaW4oYW5nbGUpICogdGhpY2tuZXNzICogMC41O1xuXG4gICAgdGhpcy5wdXNoVHJpYW5nbGUoXG4gICAgICBbaW5Qb2ludEFbMF0gLSBzdGVwWCwgaW5Qb2ludEFbMV0gLSBzdGVwWSwgaW5Qb2ludEFbMl1dLFxuICAgICAgW2luUG9pbnRCWzBdIC0gc3RlcFgsIGluUG9pbnRCWzFdIC0gc3RlcFksIGluUG9pbnRCWzJdXSxcbiAgICAgIFtpblBvaW50QlswXSArIHN0ZXBYLCBpblBvaW50QlsxXSArIHN0ZXBZLCBpblBvaW50QlsyXV0sXG4gICAgICBpbkNvbG9yXG4gICAgKTtcbiAgICB0aGlzLnB1c2hUcmlhbmdsZShcbiAgICAgIFtpblBvaW50QVswXSAtIHN0ZXBYLCBpblBvaW50QVsxXSAtIHN0ZXBZLCBpblBvaW50QVsyXV0sXG4gICAgICBbaW5Qb2ludEJbMF0gKyBzdGVwWCwgaW5Qb2ludEJbMV0gKyBzdGVwWSwgaW5Qb2ludEJbMl1dLFxuICAgICAgW2luUG9pbnRBWzBdICsgc3RlcFgsIGluUG9pbnRBWzFdICsgc3RlcFksIGluUG9pbnRBWzJdXSxcbiAgICAgIGluQ29sb3JcbiAgICApO1xuICB9XG5cbiAgcHVzaFJvdGF0ZWRMaW5lKFxuICAgIGNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBhbmdsZTogbnVtYmVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIHRoaWNrbmVzczogbnVtYmVyLFxuICAgIGNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzXG4gICkge1xuICAgIHRoaXMucHVzaExpbmUoXG4gICAgICBbXG4gICAgICAgIGNlbnRlclswXSAtIGxlbmd0aCAqIE1hdGguY29zKGFuZ2xlKSxcbiAgICAgICAgY2VudGVyWzFdIC0gbGVuZ3RoICogTWF0aC5zaW4oYW5nbGUpLFxuICAgICAgICBjZW50ZXJbMl1cbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIGNlbnRlclswXSArIGxlbmd0aCAqIE1hdGguY29zKGFuZ2xlKSxcbiAgICAgICAgY2VudGVyWzFdICsgbGVuZ3RoICogTWF0aC5zaW4oYW5nbGUpLFxuICAgICAgICBjZW50ZXJbMl1cbiAgICAgIF0sXG4gICAgICB0aGlja25lc3MsXG4gICAgICBjb2xvclxuICAgICk7XG4gIH1cblxuICBwdXNoT3JpZ2luQm91bmRSZWN0YW5nbGUoXG4gICAgaW5PcmlnaW46IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5TaXplOiBnbG0uUmVhZG9ubHlWZWMyLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICkge1xuICAgIGlmICh0aGlzLl9jdXJyZW50U2l6ZSArIDcgKiA2ID49IHRoaXMuX2J1ZmZlci5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtYXhDb29yZDogZ2xtLlJlYWRvbmx5VmVjMiA9IFtcbiAgICAgIGluT3JpZ2luWzBdICsgaW5TaXplWzBdLFxuICAgICAgaW5PcmlnaW5bMV0gKyBpblNpemVbMV1cbiAgICBdO1xuXG4gICAgdGhpcy5wdXNoVHJpYW5nbGUoXG4gICAgICBbaW5PcmlnaW5bMF0sIGluT3JpZ2luWzFdLCBpbk9yaWdpblsyXV0sXG4gICAgICBbbWF4Q29vcmRbMF0sIG1heENvb3JkWzFdLCBpbk9yaWdpblsyXV0sXG4gICAgICBbaW5PcmlnaW5bMF0sIG1heENvb3JkWzFdLCBpbk9yaWdpblsyXV0sXG4gICAgICBpbkNvbG9yXG4gICAgKTtcblxuICAgIHRoaXMucHVzaFRyaWFuZ2xlKFxuICAgICAgW2luT3JpZ2luWzBdLCBpbk9yaWdpblsxXSwgaW5PcmlnaW5bMl1dLFxuICAgICAgW21heENvb3JkWzBdLCBpbk9yaWdpblsxXSwgaW5PcmlnaW5bMl1dLFxuICAgICAgW21heENvb3JkWzBdLCBtYXhDb29yZFsxXSwgaW5PcmlnaW5bMl1dLFxuICAgICAgaW5Db2xvclxuICAgICk7XG4gIH1cblxuICBwdXNoQ2VudGVyZWRSZWN0YW5nbGUoXG4gICAgaW5DZW50ZXI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5TaXplOiBnbG0uUmVhZG9ubHlWZWMyLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICkge1xuICAgIGNvbnN0IG9yaWdpbjogZ2xtLlJlYWRvbmx5VmVjMyA9IFtcbiAgICAgIGluQ2VudGVyWzBdIC0gaW5TaXplWzBdICogMC41LFxuICAgICAgaW5DZW50ZXJbMV0gLSBpblNpemVbMV0gKiAwLjUsXG4gICAgICBpbkNlbnRlclsyXVxuICAgIF07XG5cbiAgICB0aGlzLnB1c2hPcmlnaW5Cb3VuZFJlY3RhbmdsZShvcmlnaW4sIGluU2l6ZSwgaW5Db2xvcik7XG4gIH1cblxuICBjYW5SZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRTaXplID4gMDtcbiAgfVxuXG4gIGZsdXNoKCkge1xuICAgIGlmICghdGhpcy5jYW5SZW5kZXIoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2dlb21ldHJ5LmFsbG9jYXRlQnVmZmVyKDAsIHRoaXMuX2J1ZmZlciwgdGhpcy5fY3VycmVudFNpemUpO1xuICAgIHRoaXMuX2dlb21ldHJ5LnNldFByaW1pdGl2ZUNvdW50KHRoaXMuX2N1cnJlbnRTaXplIC8gNyk7XG5cbiAgICB0aGlzLl9nZW9tZXRyeS5yZW5kZXIoKTtcblxuICAgIHRoaXMuY2xlYXIoKTtcbiAgfVxuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIC8vIHJlc2V0IHZlcnRpY2VzXG4gICAgdGhpcy5fY3VycmVudFNpemUgPSAwO1xuICB9XG59XG4iLAogICJpbXBvcnQgKiBhcyB3ZWJnbDIgZnJvbSAnLi4vLi4vLi4vZ3JhcGhpY3Mvd2ViZ2wyJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHN0YWNrUmVuZGVyZXJWZXJ0ZXggZnJvbSAnLi9zaGFkZXJzL3N0YWNrLXJlbmRlcmVyLmdsc2wudmVydCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgc3RhY2tSZW5kZXJlckZyYWdtZW50IGZyb20gJy4vc2hhZGVycy9zdGFjay1yZW5kZXJlci5nbHNsLmZyYWcnO1xuXG5pbXBvcnQgeyBXaXJlRnJhbWVzU3RhY2tSZW5kZXJlciB9IGZyb20gJy4vaW50ZXJuYWxzL1dpcmVGcmFtZXNTdGFja1JlbmRlcmVyJztcbmltcG9ydCB7IFRyaWFuZ2xlc1N0YWNrUmVuZGVyZXIgfSBmcm9tICcuL2ludGVybmFscy9UcmlhbmdsZXNTdGFja1JlbmRlcmVyJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN0YWNrUmVuZGVyZXJzIHtcbiAgcHVzaFRyaWFuZ2xlKFxuICAgIGluUG9zQTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblBvc0I6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb3NDOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICk6IHZvaWQ7XG5cbiAgcHVzaFF1YWQoXG4gICAgaW5Qb3M6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5TaXplOiBnbG0uUmVhZG9ubHlWZWMyLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzMgfCBnbG0uUmVhZG9ubHlWZWM0XG4gICk6IHZvaWQ7XG5cbiAgcHVzaExpbmUoXG4gICAgaW5Qb2ludEE6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb2ludEI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjM1xuICApOiB2b2lkO1xuXG4gIHB1c2hDcm9zcyhcbiAgICBpbkNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNpemU6IG51bWJlcixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzXG4gICk6IHZvaWQ7XG5cbiAgcHVzaFRoaWNrTGluZShcbiAgICBpblBvaW50QTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblBvaW50QjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICB0aGlja25lc3M6IG51bWJlcixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzXG4gICk6IHZvaWQ7XG5cbiAgcHVzaFJvdGF0ZWRMaW5lKFxuICAgIGNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBhbmdsZTogbnVtYmVyLFxuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIHRoaWNrbmVzczogbnVtYmVyLFxuICAgIGNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzXG4gICk6IHZvaWQ7XG5cbiAgcHVzaE9yaWdpbkJvdW5kUmVjdGFuZ2xlKFxuICAgIGluT3JpZ2luOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2l6ZTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzIHwgZ2xtLlJlYWRvbmx5VmVjNFxuICApOiB2b2lkO1xuXG4gIHB1c2hDZW50ZXJlZFJlY3RhbmdsZShcbiAgICBpbkNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNpemU6IGdsbS5SZWFkb25seVZlYzIsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyB8IGdsbS5SZWFkb25seVZlYzRcbiAgKTogdm9pZDtcblxuICBzYWZlUmVuZGVyKGluQ29tcG9zZWRNYXRyaXg6IGdsbS5SZWFkb25seU1hdDQsIGluQ2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkO1xuICBmbHVzaChjb21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCk6IHZvaWQ7XG4gIGNsZWFyKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTdGFja1JlbmRlcmVycyBpbXBsZW1lbnRzIElTdGFja1JlbmRlcmVycyB7XG4gIHByaXZhdGUgX3NoYWRlcjogd2ViZ2wyLklVbmJvdW5kU2hhZGVyO1xuXG4gIHByaXZhdGUgX3dpcmVGcmFtZXNTdGFja1JlbmRlcmVyOiBXaXJlRnJhbWVzU3RhY2tSZW5kZXJlcjtcbiAgcHJpdmF0ZSBfdHJpYW5nbGVzU3RhY2tSZW5kZXJlcjogVHJpYW5nbGVzU3RhY2tSZW5kZXJlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zaGFkZXIgPSBuZXcgd2ViZ2wyLlNoYWRlclByb2dyYW0oJ1N0YWNrUmVuZGVyZXJzJywge1xuICAgICAgdmVydGV4U3JjOiBzdGFja1JlbmRlcmVyVmVydGV4LFxuICAgICAgZnJhZ21lbnRTcmM6IHN0YWNrUmVuZGVyZXJGcmFnbWVudCxcbiAgICAgIGF0dHJpYnV0ZXM6IFsnYV92ZXJ0ZXhfcG9zaXRpb24nLCAnYV92ZXJ0ZXhfY29sb3InXSxcbiAgICAgIHVuaWZvcm1zOiBbJ3VfY29tcG9zZWRNYXRyaXgnXVxuICAgIH0pO1xuXG4gICAgY29uc3QgZ2VvQnVpbGRlciA9IG5ldyB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5QnVpbGRlcigpO1xuICAgIGdlb0J1aWxkZXJcbiAgICAgIC5yZXNldCgpXG4gICAgICAuc2V0UHJpbWl0aXZlVHlwZSgnbGluZXMnKVxuICAgICAgLmFkZFZibygpXG4gICAgICAuc2V0VmJvQXNEeW5hbWljKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X3Bvc2l0aW9uJywgJ3ZlYzNmJylcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4X2NvbG9yJywgJ3ZlYzRmJyk7XG5cbiAgICB0aGlzLl93aXJlRnJhbWVzU3RhY2tSZW5kZXJlciA9IG5ldyBXaXJlRnJhbWVzU3RhY2tSZW5kZXJlcihcbiAgICAgIHRoaXMuX3NoYWRlcixcbiAgICAgIGdlb0J1aWxkZXIuZ2V0RGVmKClcbiAgICApO1xuICAgIHRoaXMuX3RyaWFuZ2xlc1N0YWNrUmVuZGVyZXIgPSBuZXcgVHJpYW5nbGVzU3RhY2tSZW5kZXJlcihcbiAgICAgIHRoaXMuX3NoYWRlcixcbiAgICAgIGdlb0J1aWxkZXIuZ2V0RGVmKClcbiAgICApO1xuICB9XG5cbiAgcHVzaExpbmUoXG4gICAgaW5Qb2ludEE6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Qb2ludEI6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjM1xuICApIHtcbiAgICB0aGlzLl93aXJlRnJhbWVzU3RhY2tSZW5kZXJlci5wdXNoTGluZShpblBvaW50QSwgaW5Qb2ludEIsIGluQ29sb3IpO1xuICB9XG5cbiAgcHVzaENyb3NzKFxuICAgIGluQ2VudGVyOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2l6ZTogbnVtYmVyLFxuICAgIGluQ29sb3I6IGdsbS5SZWFkb25seVZlYzNcbiAgKSB7XG4gICAgY29uc3QgY3Jvc3NWZXJ0aWNlczogZ2xtLlJlYWRvbmx5VmVjM1tdID0gW1xuICAgICAgW2luQ2VudGVyWzBdIC0gaW5TaXplLCBpbkNlbnRlclsxXSwgaW5DZW50ZXJbMl1dLFxuICAgICAgW2luQ2VudGVyWzBdICsgaW5TaXplLCBpbkNlbnRlclsxXSwgaW5DZW50ZXJbMl1dLFxuICAgICAgW2luQ2VudGVyWzBdLCBpbkNlbnRlclsxXSAtIGluU2l6ZSwgaW5DZW50ZXJbMl1dLFxuICAgICAgW2luQ2VudGVyWzBdLCBpbkNlbnRlclsxXSArIGluU2l6ZSwgaW5DZW50ZXJbMl1dLFxuICAgICAgW2luQ2VudGVyWzBdLCBpbkNlbnRlclsxXSwgaW5DZW50ZXJbMl0gLSBpblNpemVdLFxuICAgICAgW2luQ2VudGVyWzBdLCBpbkNlbnRlclsxXSwgaW5DZW50ZXJbMl0gKyBpblNpemVdXG4gICAgXTtcbiAgICBjb25zdCBjcm9zc0luZGljZXM6IG51bWJlcltdID0gWzAsIDEsIDIsIDMsIDQsIDVdO1xuXG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGNyb3NzSW5kaWNlcy5sZW5ndGg7IGlpICs9IDIpIHtcbiAgICAgIGNvbnN0IHZlcnRleEEgPSBjcm9zc1ZlcnRpY2VzW2lpICsgMF07XG4gICAgICBjb25zdCB2ZXJ0ZXhCID0gY3Jvc3NWZXJ0aWNlc1tpaSArIDFdO1xuICAgICAgdGhpcy5fd2lyZUZyYW1lc1N0YWNrUmVuZGVyZXIucHVzaExpbmUodmVydGV4QSwgdmVydGV4QiwgaW5Db2xvcik7XG4gICAgfVxuICB9XG5cbiAgcHVzaFRoaWNrTGluZShcbiAgICBpblBvaW50QTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblBvaW50QjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICB0aGlja25lc3M6IG51bWJlcixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzXG4gICkge1xuICAgIHRoaXMuX3RyaWFuZ2xlc1N0YWNrUmVuZGVyZXIucHVzaExpbmUoXG4gICAgICBpblBvaW50QSxcbiAgICAgIGluUG9pbnRCLFxuICAgICAgdGhpY2tuZXNzLFxuICAgICAgaW5Db2xvclxuICAgICk7XG4gIH1cblxuICBwdXNoUm90YXRlZExpbmUoXG4gICAgY2VudGVyOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGFuZ2xlOiBudW1iZXIsXG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgdGhpY2tuZXNzOiBudW1iZXIsXG4gICAgY29sb3I6IGdsbS5SZWFkb25seVZlYzNcbiAgKSB7XG4gICAgdGhpcy5fdHJpYW5nbGVzU3RhY2tSZW5kZXJlci5wdXNoUm90YXRlZExpbmUoXG4gICAgICBjZW50ZXIsXG4gICAgICBhbmdsZSxcbiAgICAgIGxlbmd0aCxcbiAgICAgIHRoaWNrbmVzcyxcbiAgICAgIGNvbG9yXG4gICAgKTtcbiAgfVxuXG4gIHB1c2hPcmlnaW5Cb3VuZFJlY3RhbmdsZShcbiAgICBpbk9yaWdpbjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNpemU6IGdsbS5SZWFkb25seVZlYzIsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyB8IGdsbS5SZWFkb25seVZlYzRcbiAgKSB7XG4gICAgdGhpcy5fdHJpYW5nbGVzU3RhY2tSZW5kZXJlci5wdXNoT3JpZ2luQm91bmRSZWN0YW5nbGUoXG4gICAgICBpbk9yaWdpbixcbiAgICAgIGluU2l6ZSxcbiAgICAgIGluQ29sb3JcbiAgICApO1xuICB9XG5cbiAgcHVzaENlbnRlcmVkUmVjdGFuZ2xlKFxuICAgIGluQ2VudGVyOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluU2l6ZTogZ2xtLlJlYWRvbmx5VmVjMixcbiAgICBpbkNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzIHwgZ2xtLlJlYWRvbmx5VmVjNFxuICApIHtcbiAgICB0aGlzLl90cmlhbmdsZXNTdGFja1JlbmRlcmVyLnB1c2hDZW50ZXJlZFJlY3RhbmdsZShcbiAgICAgIGluQ2VudGVyLFxuICAgICAgaW5TaXplLFxuICAgICAgaW5Db2xvclxuICAgICk7XG4gIH1cblxuICBwdXNoVHJpYW5nbGUoXG4gICAgaW5Qb3NBOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIGluUG9zQjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblBvc0M6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyB8IGdsbS5SZWFkb25seVZlYzRcbiAgKSB7XG4gICAgdGhpcy5fdHJpYW5nbGVzU3RhY2tSZW5kZXJlci5wdXNoVHJpYW5nbGUoaW5Qb3NBLCBpblBvc0IsIGluUG9zQywgaW5Db2xvcik7XG4gIH1cblxuICBwdXNoUXVhZChcbiAgICBpblBvczogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICBpblNpemU6IGdsbS5SZWFkb25seVZlYzIsXG4gICAgaW5Db2xvcjogZ2xtLlJlYWRvbmx5VmVjMyB8IGdsbS5SZWFkb25seVZlYzRcbiAgKSB7XG4gICAgdGhpcy5wdXNoVHJpYW5nbGUoXG4gICAgICBbaW5Qb3NbMF0gKyBpblNpemVbMF0gKiAwLCBpblBvc1sxXSArIGluU2l6ZVsxXSAqIDAsIGluUG9zWzJdXSxcbiAgICAgIFtpblBvc1swXSArIGluU2l6ZVswXSAqIDEsIGluUG9zWzFdICsgaW5TaXplWzFdICogMSwgaW5Qb3NbMl1dLFxuICAgICAgW2luUG9zWzBdICsgaW5TaXplWzBdICogMSwgaW5Qb3NbMV0gKyBpblNpemVbMV0gKiAwLCBpblBvc1syXV0sXG4gICAgICBpbkNvbG9yXG4gICAgKTtcbiAgICB0aGlzLnB1c2hUcmlhbmdsZShcbiAgICAgIFtpblBvc1swXSArIGluU2l6ZVswXSAqIDAsIGluUG9zWzFdICsgaW5TaXplWzFdICogMCwgaW5Qb3NbMl1dLFxuICAgICAgW2luUG9zWzBdICsgaW5TaXplWzBdICogMSwgaW5Qb3NbMV0gKyBpblNpemVbMV0gKiAxLCBpblBvc1syXV0sXG4gICAgICBbaW5Qb3NbMF0gKyBpblNpemVbMF0gKiAwLCBpblBvc1sxXSArIGluU2l6ZVsxXSAqIDEsIGluUG9zWzJdXSxcbiAgICAgIGluQ29sb3JcbiAgICApO1xuICB9XG5cbiAgZmx1c2goaW5Db21wb3NlZE1hdHJpeDogZ2xtLlJlYWRvbmx5TWF0NCkge1xuICAgIGlmIChcbiAgICAgICF0aGlzLl93aXJlRnJhbWVzU3RhY2tSZW5kZXJlci5jYW5SZW5kZXIoKSAmJlxuICAgICAgIXRoaXMuX3RyaWFuZ2xlc1N0YWNrUmVuZGVyZXIuY2FuUmVuZGVyKClcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zaGFkZXIuYmluZCgoYm91bmQpID0+IHtcbiAgICAgIGJvdW5kLnNldE1hdHJpeDRVbmlmb3JtKCd1X2NvbXBvc2VkTWF0cml4JywgaW5Db21wb3NlZE1hdHJpeCk7XG5cbiAgICAgIHRoaXMuX3dpcmVGcmFtZXNTdGFja1JlbmRlcmVyLmZsdXNoKCk7XG4gICAgICB0aGlzLl90cmlhbmdsZXNTdGFja1JlbmRlcmVyLmZsdXNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBzYWZlUmVuZGVyKGluQ29tcG9zZWRNYXRyaXg6IGdsbS5SZWFkb25seU1hdDQsIGluQ2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9zaGFkZXIuYmluZCgoYm91bmQpID0+IHtcbiAgICAgIGJvdW5kLnNldE1hdHJpeDRVbmlmb3JtKCd1X2NvbXBvc2VkTWF0cml4JywgaW5Db21wb3NlZE1hdHJpeCk7XG5cbiAgICAgIGluQ2FsbGJhY2soKTtcblxuICAgICAgdGhpcy5fd2lyZUZyYW1lc1N0YWNrUmVuZGVyZXIuZmx1c2goKTtcbiAgICAgIHRoaXMuX3RyaWFuZ2xlc1N0YWNrUmVuZGVyZXIuZmx1c2goKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX3dpcmVGcmFtZXNTdGFja1JlbmRlcmVyLmNsZWFyKCk7XG4gICAgdGhpcy5fdHJpYW5nbGVzU3RhY2tSZW5kZXJlci5jbGVhcigpO1xuICB9XG59XG4iLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG51bmlmb3JtIG1hdDQgdV9jb21wb3NlZE1hdHJpeDtcblxuaW4gdmVjMiBhX3ZlcnRleF9wb3NpdGlvbjtcbmluIHZlYzIgYV92ZXJ0ZXhfdGV4Q29vcmQ7XG5pbiB2ZWMzIGFfb2Zmc2V0X3Bvc2l0aW9uO1xuaW4gdmVjMiBhX29mZnNldF90ZXhDb29yZDtcbmluIHZlYzMgYV9vZmZzZXRfY29sb3I7XG5pbiBmbG9hdCBhX29mZnNldF9zY2FsZTtcblxub3V0IHZlYzIgdl90ZXhDb29yZDtcbmZsYXQgb3V0IHZlYzMgdl9jb2xvcjtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIHZlYzMgcG9zaXRpb24gPSB2ZWMzKGFfdmVydGV4X3Bvc2l0aW9uLCAwLjApICogYV9vZmZzZXRfc2NhbGUgKyBhX29mZnNldF9wb3NpdGlvbjtcblxuICBnbF9Qb3NpdGlvbiA9IHVfY29tcG9zZWRNYXRyaXggKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xuXG4gIHZfdGV4Q29vcmQgPSBhX3ZlcnRleF90ZXhDb29yZCArIGFfb2Zmc2V0X3RleENvb3JkO1xuICB2X2NvbG9yID0gYV9vZmZzZXRfY29sb3I7XG59XG5gLnRyaW0oKTsiLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG5cbnVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4dHVyZTtcblxuaW4gdmVjMiB2X3RleENvb3JkO1xuZmxhdCBpbiB2ZWMzIHZfY29sb3I7XG5cbm91dCB2ZWM0IG9fY29sb3I7XG5cbnZvaWQgbWFpbih2b2lkKVxue1xuICB2ZWM0IHRleHR1cmVDb2xvciA9IHRleHR1cmUodV90ZXh0dXJlLCB2X3RleENvb3JkKTtcbiAgaWYgKHRleHR1cmVDb2xvci5hIDwgMC41KVxuICB7XG4gICAgZGlzY2FyZDtcbiAgfVxuICBlbHNlXG4gIHtcbiAgICBvX2NvbG9yID0gdmVjNCh2X2NvbG9yLCB0ZXh0dXJlQ29sb3IuYSk7XG4gIH1cbn1cbmAudHJpbSgpOyIsCiAgImV4cG9ydCBjb25zdCBhc2NpaVRleHR1cmVIZXggPVxuICAnN2U3ZTI4ZmQwM2ZkMDdmZTA0ZmUwYWZmMDJmZjdlNGRmZDBjZmQwM2ZkMDdmZTA0ZmUwYWZmMDJmZjFhZmMwZGZkMTBmYzA4ZmMwZmZlNTVmZjE1ZmIwYmZkMDNmZDA3ZmUwNGZlMDhmNzA3ZmQwNGZmMDdmZTAyZmUwY2ZkMGZmZDBjZmQwYWZmMDNmZTAzZmYwYWZlNDRmZTE1ZmIwYmZkMDNmZDA0ZjIwNGY2MDdmZDAzZmUwN2ZlMDJmZTBjZmQwZWZkMGVmZDBhZmYwMmZlMDJmZjBiZmU0M2ZkMTVmYjBjZmUwM2ZlMDVmMjA0ZmUwMWZmMDJmZjBhZmQwMmZkMDdmZTAyZmUwYmZkMGVmZDEwZmQwYWZhMGNmZTQyZmQxNmZiMWJmZTA0ZmUwN2ZlMDFmZjAyZmYwZWZkMDlmYzFjZmQxMmZkMDlmYTBjZmU0MWZkMTdmYjFiZmUwNGZlMDdmNzBiZmQwYWZjMDRmZjE3ZmQxMmZkMDZmNDA1ZjYxNmY2MWNmZDE5ZmQxY2ZlMDRmZTA4ZjcwOWZkMGJmYjAyZmUxN2ZkMTJmZDA2ZjQwNWY2MTZmNjFiZmQxYWZkMWNmZTA0ZmUwYWZmMDJmZjAxZmUwOGZkMGJmZTAyZmExN2ZkMTJmZDA5ZmEwY2ZlM2VmZDM3ZjIwN2ZmMDJmZjAxZmUwN2ZkMDJmZDA3ZmUwM2ZjMTlmZDEwZmQwYWZhMGNmZTNkZmQzOGYyMDRmNjA3ZmUwM2ZkMDdmZTAzZmQxYmZkMGVmZDBhZmYwMmZlMDJmZjBiZmUwY2ZkMWRmZDBkZmQxZGZkMWNmZTA0ZmUwN2Y3MDhmZjA0ZmQwN2ZlMDJmYjFiZmQwY2ZkMGFmZjAzZmUwM2ZmMGFmZTBjZmQxZGZkMGNmZDFlZmQxY2ZlMDRmZTBhZmYwMmZmMWFmYjAyZmUxYmZjMDhmYzBmZmUxY2ZkMWRmZDBiZmQxZmZkMWNmZTA0ZmUwYWZmMDJmZjdhZmQ3ZTdlN2U3ZTdlN2UwZWZkMTdmZDEwZmMwYWY4MGJmZTBiZjkwOWY5MGRmZDA4ZjYwOWZiMDhmNTA2ZjgwOGY4MmNmZDE5ZmQwZGY4MDdmZDA0ZmQwYWZlMGFmZDAzZmQwN2ZkMDNmZDBiZmMwOGZkMGZmZDBiZmQwNWZkMDVmZDA0ZmQwNmZkMDRmZDJhZmQxYmZkMGJmYzAyZmMwNmZkMDNmYzA5ZmQwYWZkMDRmZDA2ZmQwNGZkMDlmYjA4ZmQwZWZkMGNmZDA1ZmQwNWZkMDRmZDA2ZmQwNGZkMDlmZDBjZmQwZWZkMWRmZDBhZmUwNWZkMDZmZDAyZmIwNmZhMTFmZDBkZmQwOGZlMDFmZDA4ZmQwZGZkMGRmZDA1ZmQwNWZkMDRmZDA2ZmQwNGZkMDlmZDBjZmQwZGZkMGFmNDA5ZmQxMGZkMDZmZDAyZmIwNmZhMTBmZDBkZmQwOGZlMDJmZDA4ZmQwZGZkMTVmZDA1ZmIwMmZkMDZmZDA0ZmQwOWZkMGNmZDBjZmQwYmY0MGFmZDBlZmQwN2ZkMDFmZTAxZmQwOWZkMGZmZDBiZmIwOGZlMDNmZDA4ZjgwOGY3MGVmZDA4ZmEwOGY2MjZmZDIzZmQwY2ZkMDhmZDAxZmUwMWZkMDlmZDBlZmQwY2ZiMDhmNjA2ZjcwN2Y2MGNmZDA5ZmEwOWY3MjZmZDIzZmQwYmZkMDlmYjAyZmQwOWZkMGRmZDEwZmQwN2Y2MGNmYzA2ZmQwNGZkMGJmZDA4ZmQwMmZiMGRmZDA5ZmQwY2ZkMGNmZDBiZjQwYWZkMGNmZDA5ZmIwMmZkMDlmZDBjZmQxMmZkMGJmZDBmZmQwNmZkMDRmZDBhZmQwOWZkMDRmZDBkZmQwOWZkMGNmZDBkZmQwYWY0MDlmZDE5ZmMwM2ZkMDlmZDBiZmQwM2ZkMDZmZDA0ZmQwYmZkMDhmZDA0ZmQwNmZkMDRmZDA5ZmQwYWZkMDRmZDBjZmQwYWZkMGNmZDBlZmQxZGZkMWFmZDA0ZmQwOWZkMGFmZDA0ZmQwNmZkMDNmZDBjZmQwOGZkMDNmZDA3ZmQwNGZkMDlmZDBhZmQwNGZkMGJmZDE5ZmQxMGZkMWJmZDBmZmQwYWY4MDdmNzA3ZjYwN2Y5MGJmOTA3ZjkwOWY4MGFmZDBiZjgwOWZiMmVmZDE5ZmQxMGZkN2U1MWZkMTdmZDExZmQ3ZTdlN2U3ZTEzZjg3ZTc4ZmQwNWZkMDhmYzA5ZjcwOWY5MDdmODA4ZjYwNmY2MDhmOTA3ZmQwM2ZkMDdmOTBkZjkwNWZjMDNmZDA2ZmIwYmZkMDVmZDA1ZmQwNWZkMDhmYjA4ZmQwNWZkMDdmYTA5ZmQwM2ZkMDdmZDAzZmQwN2ZkMDJmZDA4ZmQwNGZlMDdmZDA0ZmUwN2ZkMDNmZDA2ZmQwM2ZkMDlmZDExZmQwOGZkMDNmZDA3ZmQwY2ZjMDNmYzA1ZmQwNWZkMDdmZDAxZmQwN2ZkMDVmZDA2ZmQwMmZkMDhmZDAzZmQwNmZkMDRmZDA3ZmQwM2ZkMDdmZDA1ZmYwN2ZkMDVmZjA2ZmQwNGZkMDZmZDAzZmQwOWZkMTFmZDA4ZmQwMmZkMDhmZDBjZmIwMWZiMDVmYzA0ZmQwNmZkMDNmZDA2ZmQwNWZkMDVmZDA0ZmQwN2ZkMDNmZDA2ZmQwZWZkMDNmZDA3ZmQwZGZkMGNmZDA0ZmQwNmZkMDNmZDA5ZmQxMWZkMDhmZDAxZmQwOWZkMGNmNTA1ZmIwM2ZkMDVmZDA1ZmQwNWZkMDJmYTA1ZmQwNGZkMDdmZDAzZmQwNmZkMGVmZDAzZmQwN2ZkMDNmZTA4ZmQwM2ZlMDdmZDBkZmQwM2ZkMDlmZDExZmQwOGZhMGFmZDBjZjUwNWZhMDJmZDA1ZmQwNWZkMDVmZDAyZmEwNWZkMDRmZDA3ZjgwN2ZkMGVmZDAzZmQwN2Y4MDhmODA3ZmQwZGY3MDlmZDExZmQwOGZiMGJmZDBjZmQwMWZkMDFmZDA1ZmQwMWZkMDFmZDA1ZmQwNWZkMDVmZDAyZmEwNWZkMDRmZDA3ZjgwN2ZkMGVmZDAzZmQwN2Y4MDhmODA3ZmQwZGY3MDlmZDExZmQwOGZiMGJmZDBjZmQwMmZmMDJmZDA1ZmQwMmZhMDVmZDA1ZmQwNWZkMDJmYTA1ZjYwN2ZkMDNmZDA2ZmQwZWZkMDNmZDA3ZmQwM2ZlMDhmZDAzZmUwN2ZkMDJmYjA2ZmQwM2ZkMDlmZDBiZmQwM2ZkMDhmYTBhZmQwY2ZkMDVmZDA1ZmQwM2ZiMDVmZDA1ZmQwNWZkMGRmZDA0ZmQwN2ZkMDNmZDA2ZmQwZWZkMDNmZDA3ZmQwZGZkMGNmZDA0ZmQwNmZkMDNmZDA5ZmQwYmZkMDNmZDA4ZmQwMWZkMDlmZDA1ZmYwNmZkMDVmZDA1ZmQwNGZjMDVmZDA1ZmQwNWZkMGRmZDA0ZmQwN2ZkMDNmZDA2ZmQwNGZkMDdmZDAzZmQwN2ZkMDVmZjA3ZmQwY2ZkMDRmZDA2ZmQwM2ZkMDlmZDBiZmQwM2ZkMDhmZDAyZmQwOGZkMDRmZTA2ZmQwNWZkMDVmZDA1ZmQwNmZkMDNmZDA2ZmQwZGZkMDRmZDA3ZmQwM2ZkMDdmZDAzZmQwN2ZkMDJmZDA4ZmQwNGZlMDdmZDBkZmQwM2ZkMDZmZDAzZmQwOWZkMGJmZDAzZmQwOGZkMDNmZDA3ZmQwM2ZkMDZmZDA1ZmQwNWZkMDVmZDA3ZmQwMWZkMDdmZDBkZmQwNGZkMDZmNzA5ZjkwN2Y4MDhmNjA2ZmIwZGY4MDZmZDAzZmQwN2Y5MGFmOTA4ZmMwM2ZkMDZmNjA2ZmQwNWZkMDVmZDA1ZmQwOGZiMGFmODdlN2U3ZTdlN2U3ZTdlNjhmZTFhZjcwYWZiMDhmNzA4ZjgwN2Y1MDVmZDAzZmQwN2ZkMDNmZDA3ZmQwNWZkMDVmZDAzZmQwN2ZkMDNmZDA3ZjYwOGY5MDdmZjExZjkwYWZjMWFmZDAzZmQwN2ZjMDFmYzA3ZmQwM2ZkMDZmZDA0ZmQwNmZlMDJmZDAyZmUwNWZkMDNmZDA3ZmQwM2ZkMDdmZDA1ZmQwNWZkMDNmZDA3ZmQwM2ZkMDdmZDA0ZmQwOGZkMGJmZTE0ZmQwOWZhMTlmZDAzZmQwN2ZkMDNmZDA3ZmQwM2ZkMDZmZDA0ZmQwNmZmMDNmZDAzZmYwNWZkMDNmZDA3ZmQwM2ZkMDdmZDA1ZmQwNWZkMDNmZDA3ZmQwM2ZkMDdmZTA1ZmQwOGZkMGJmZDEzZmQwOGZkMDJmZDE4ZmQwM2ZkMDZmZDA1ZmQwNmZkMDNmZDA2ZmQwNGZkMGFmZDA5ZmQwM2ZkMDdmZDAzZmQwN2ZkMDVmZDA2ZmQwMWZkMDhmZDAzZmQwN2ZmMDVmZDA5ZmQwY2ZkMTJmZDA3ZmQwNGZkMTdmZDAzZmQwNmZkMDVmZDA2ZmQwM2ZkMDZmZDExZmQwOWZkMDNmZDA3ZmQwM2ZkMDdmZDA1ZmQwN2ZiMDlmZDAzZmQwY2ZkMGFmZDBkZmQxMWZkMjhmODA3ZmQwNWZkMDZmODA4ZjkwY2ZkMDlmZDAzZmQwN2ZkMDNmZDA3ZmQwMmZmMDJmZDA4ZmQwYmZkMDFmZDBjZmQwYmZkMGVmZDEwZmQyOGY4MDdmZDA1ZmQwNmY4MDlmOTBiZmQwOWZkMDNmZDA3ZmQwM2ZkMDdmZDAyZmYwMmZkMDhmZDBjZmIwY2ZkMGNmZDBmZmQwZmZkMjhmZDBjZmQwM2ZiMDZmZDAyZmQwZWZkMGFmZDA5ZmQwM2ZkMDdmZDAzZmQwN2ZkMDJmZjAyZmQwN2ZiMGNmZDBjZmQwZGZkMTBmZDBlZmQyOGZkMGNmZDAyZmEwNmZkMDNmZDA2ZmQwNGZkMGFmZDA5ZmQwM2ZkMDdmZDAzZmQwOGY3MDdmZDAxZmQwYmZkMGJmZDA1ZmYwOGZkMTFmZDBkZmQyOGZkMGRmNzA3ZmQwM2ZkMDZmZDA0ZmQwYWZkMDlmZDAzZmQwOGZkMDFmZDA5ZmMwMWZjMDZmZDAzZmQwYWZkMGFmZDA1ZmUwOGZkMTJmZDBjZmQyOGZkMGRmNzA3ZmQwM2ZkMDZmZDA0ZmQwYWZkMDlmZDAzZmQwOWZiMGJmZDAxZmQwN2ZkMDNmZDBhZmQwYWZkMDRmZDA4ZmQxM2ZkMGJmZDI3ZmIxMmZkMDZmYzAzZmQwN2Y4MDlmOTA4ZjkwYmZkMGNmZDAxZmQwN2ZkMDNmZDA4ZjkwOGY2MDhmOTEwZmQwNmY5M2NmYTdlNTRmMDdlNzJmMDdlN2U3ZTdlMGJmZDFkZmMyMWZiMTlmYjE4ZmMxMGZkMGZmZDA3ZmMwZGZhMzlmZDFlZmQyMmZkMTlmZDAxZmQxOGZkMTBmZDBmZmQwOGZkMTBmZDNiZmQxY2ZkMjJmZDE5ZmQwMWZkMThmZDEwZmQwZmZkMDhmZDEwZmQzYmZkMWNmZDIyZmQxOWZkMWNmZDJkZmQxMGZkNGFmOTA5ZjgwOGY5MDlmODA4ZjkwYWZkMGNmYjAyZmUwN2ZkMDFmYzA4ZmEwY2ZhMDhmZDAzZmQwYWZkMDlmNjA2ZjgwOWY5MWVmZDA4ZmQwM2ZkMDZmZDAzZmQwN2ZkMDNmZDA3ZmQwM2ZkMDdmODA4ZmQwM2ZkMDhmYzAyZmQwYWZkMGZmZDA4ZmQwMmZkMGJmZDA5ZmQwMmZmMDJmZDA1ZmQwM2ZkMDdmZDAzZmQxZGZkMDhmZDAzZmQwNmZkMDNmZDA3ZmQwM2ZkMDdmZDAzZmQwN2Y4MDhmZDAzZmQwOGZjMDJmZDBhZmQwZmZkMDhmZDAxZmQwY2ZkMDlmZDAyZmYwMmZkMDVmZDAzZmQwN2ZkMDNmZDE4ZjgwOGZkMDNmZDA2ZmQwZGZkMDNmZDA3ZjcwOWZkMGJmZDAzZmQwOGZkMDNmZDBhZmQwZmZkMDhmYTBkZmQwOWZkMDJmZjAyZmQwNWZkMDNmZDA3ZmQwM2ZkMTdmZDAzZmQwOGZkMDNmZDA2ZmQwZGZkMDNmZDA3ZmQwZmZkMGJmZDAzZmQwOGZkMDNmZDBhZmQwZmZkMDhmZDAxZmQwY2ZkMDlmZDAyZmYwMmZkMDVmZDAzZmQwN2ZkMDNmZDE3ZmQwM2ZkMDhmZDAzZmQwNmZkMDNmZDA3ZmQwM2ZkMDdmZDAzZmQwOWZkMGNmODA4ZmQwM2ZkMGFmZDBmZmQwOGZkMDJmZDBiZmQwOWZkMDJmZjAyZmQwNWZkMDNmZDA3ZmQwM2ZkMTdmZDAzZmQwOGZkMDNmZDA2ZmQwM2ZkMDdmZDAzZmQwN2ZkMDNmZDA5ZmQwZGY5MDhmZDAzZmQwYWZkMGZmZDA4ZmQwM2ZkMGFmZDA5ZmQwMmZmMDJmZDA1ZmQwM2ZkMDdmZDAzZmQxOGZiMDJmZTA2ZmUwMmZiMDhmOTA5ZmIwMmZlMDdmOTA4ZjkwZmZkMDdmYzAzZmQwN2Y3MDZmZDAzZmQwN2ZjMDNmZDA3ZjcwNmZkMDVmZDA1ZmQwM2ZkMDhmOTc4ZmQwM2ZkMjdmZDAzZmQ3ZTRhZjkyYWZhN2U3ZTdlN2U3ZTdlMThmYTA5ZmMwOWZhMWVmZTRlZmY2ZWZkMGRmYzBkZmQxY2ZjNGNmZTZlZmQwZGZjMGRmZDFiZmE0YWZkNmVmZDBkZmMwZGZkMWFmZDAyZmQwN2ZlMDJmYjA3ZmIwMmZlMDdmYzAyZmQwOGY5MDhmNzA3ZmQwM2ZkMDdmZDAzZmQwN2ZkMDVmZDA1ZmQwMmZkMDlmZDAzZmQwNmY4MGFmZDBlZmMwZWZkMDhmYjAzZmQwNWZkMDRmZDA3ZmQwM2ZkMDVmZDAzZmQwOWY3MDZmZDA0ZmUwOWZkMGJmZDAzZmQwN2ZkMDNmZDA3ZmQwNWZkMDVmZDAyZmQwOWZkMDNmZDA2ZmUwM2ZkMDhmZDI0ZmQwNWZkMDFmZDAyZmQwNWZlMDZmZTA3ZmQwM2ZkMDVmZDAzZmQwOWZjMDJmZDA2ZmQwNGZlMDlmZDBiZmQwM2ZkMDdmZDAzZmQwN2ZkMDVmZDA2ZmEwYWZkMDNmZDA2ZmYwM2ZkMDlmZDI0ZmQwNWZkMDJmZDAxZmQwNWZlMDZmZTA3ZmQwM2ZkMDVmZDAzZmQwOWZkMGRmYjBjZmQwYmZkMDNmZDA3ZmQwM2ZkMDdmZDAyZmYwMmZkMDdmYzBiZmQwM2ZkMDlmZDBjZmQwZWZjMGVmZDA3ZmQwM2ZiMDZmZTA2ZmUwN2ZkMDNmZDA1ZmQwM2ZkMDlmZDBmZmIwYWZkMGJmZDAzZmQwN2ZkMDNmZDA3ZmQwMmZmMDJmZDA3ZmMwYmZkMDNmZDA4ZmQwZWZkMGRmYzBkZmQxOWZlMDZmZTA3ZmQwM2ZkMDVmZDAzZmQwOWZkMGNmZTA0ZmQwOWZkMDFmZDA3ZmQwM2ZkMDhmZDAxZmQwOWZjMDFmYzA3ZmEwYmY5MDhmZDAzZmYwYmZkMGRmYzBkZmQxOWZlMDZmZTA3ZjgwN2Y4MDlmZDBjZmUwNGZkMDlmZDAxZmQwN2ZkMDNmZDA5ZmIwYmZkMDFmZDA3ZmQwMmZkMGJmYjA4ZmQwM2ZlMGJmZDBkZmMwZGZkMTlmNjA3ZmQxMWZkMDhmYjBjZjkwYmZiMDlmYjAyZmUwOWZkMGNmZDAxZmQwN2ZkMDJmZDBkZmQwOGY4MGNmYTA5ZmMwOWZhMWFmNjA3ZmQxMWZkN2NmZDY5ZmIwZmZiNzdmYSc7XG4iLAogICJpbXBvcnQgKiBhcyB3ZWJnbDIgZnJvbSAnLi4vLi4vLi4vZ3JhcGhpY3Mvd2ViZ2wyJztcblxuLy8gaW1wb3J0ICogYXMgc2hhZGVycyBmcm9tICcuL3NoYWRlcnMnO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgdGV4dFJlbmRlcmVyVmVydGV4IGZyb20gJy4vc2hhZGVycy90ZXh0LXJlbmRlcmVyLmdsc2wudmVydCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgdGV4dFJlbmRlcmVyRnJhZ21lbnQgZnJvbSAnLi9zaGFkZXJzL3RleHQtcmVuZGVyZXIuZ2xzbC5mcmFnJztcblxuaW1wb3J0IHsgYXNjaWlUZXh0dXJlSGV4IH0gZnJvbSAnLi9pbnRlcm5hbHMvYXNjaWlUZXh0dXJlSGV4JztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmNvbnN0IGtfZ3JpZFNpemU6IGdsbS5SZWFkb25seVZlYzIgPSBbMTYsIDZdO1xuY29uc3Qga190ZXhDb29yZDogZ2xtLlJlYWRvbmx5VmVjMiA9IFsxIC8ga19ncmlkU2l6ZVswXSwgMSAvIGtfZ3JpZFNpemVbMV1dO1xuXG5jb25zdCBrX2J1ZmZlclNpemUgPSA5ICogMTAyNCAqIDQ7XG5cbnR5cGUgSG9yaXpvbnRhbFRleHRBbGlnbiA9ICdsZWZ0JyB8ICdjZW50ZXJlZCcgfCAncmlnaHQnO1xudHlwZSBWZXJ0aWNhbFRleHRBbGlnbiA9ICd0b3AnIHwgJ2NlbnRlcmVkJyB8ICdib3R0b20nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElUZXh0UmVuZGVyZXIge1xuICBzZXRUZXh0QWxpZ24oXG4gICAgaW5Ib3Jpem9udGFsVGV4dEFsaWduOiBIb3Jpem9udGFsVGV4dEFsaWduLFxuICAgIGluVmVydGljYWxUZXh0QWxpZ246IFZlcnRpY2FsVGV4dEFsaWduXG4gICk6IHRoaXM7XG4gIHNldFRleHRTY2FsZShpblNjYWxlOiBudW1iZXIpOiB0aGlzO1xuICBzZXRUZXh0Q29sb3IoaW5SZWQ6IG51bWJlciwgaW5HcmVlbjogbnVtYmVyLCBpbkJsdWU6IG51bWJlcik6IHRoaXM7XG5cbiAgcHVzaFRleHQoaW5NZXNzYWdlOiBzdHJpbmcsIGluUG9zaXRpb246IGdsbS5SZWFkb25seVZlYzIpOiB0aGlzO1xuXG4gIGZsdXNoKGNvbXBvc2VkTWF0cml4OiBnbG0uUmVhZG9ubHlNYXQ0KTogdGhpcztcbiAgY2xlYXIoKTogdGhpcztcbn1cblxuZXhwb3J0IGNsYXNzIFRleHRSZW5kZXJlciBpbXBsZW1lbnRzIElUZXh0UmVuZGVyZXIge1xuICBwcml2YXRlIF9zaGFkZXI6IHdlYmdsMi5JVW5ib3VuZFNoYWRlcjtcbiAgcHJpdmF0ZSBfZ2VvbWV0cnk6IHdlYmdsMi5HZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnk7XG4gIHByaXZhdGUgX3RleHR1cmU6IHdlYmdsMi5JVW5ib3VuZFRleHR1cmUgPSBuZXcgd2ViZ2wyLlRleHR1cmUoKTtcbiAgcHJpdmF0ZSBfdGV4Q29vcmRNYXA6IE1hcDxzdHJpbmcsIGdsbS5SZWFkb25seVZlYzI+O1xuXG4gIHByaXZhdGUgX2J1ZmZlciA9IG5ldyBGbG9hdDMyQXJyYXkoa19idWZmZXJTaXplKTtcbiAgcHJpdmF0ZSBfY3VycmVudFNpemU6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBfdGV4dFNjYWxlOiBudW1iZXIgPSAxNDtcbiAgcHJpdmF0ZSBfdGV4dENvbG9yOiBnbG0udmVjMyA9IFsxLCAxLCAxXTtcblxuICBwcml2YXRlIF9ob3Jpem9udGFsVGV4dEFsaWduOiBIb3Jpem9udGFsVGV4dEFsaWduID0gJ2xlZnQnO1xuICBwcml2YXRlIF92ZXJ0aWNhbFRleHRBbGlnbjogVmVydGljYWxUZXh0QWxpZ24gPSAndG9wJztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zaGFkZXIgPSBuZXcgd2ViZ2wyLlNoYWRlclByb2dyYW0oJ1RleHRSZW5kZXJlcicsIHtcbiAgICAgIHZlcnRleFNyYzogdGV4dFJlbmRlcmVyVmVydGV4LFxuICAgICAgZnJhZ21lbnRTcmM6IHRleHRSZW5kZXJlckZyYWdtZW50LFxuICAgICAgYXR0cmlidXRlczogW1xuICAgICAgICAnYV92ZXJ0ZXhfcG9zaXRpb24nLFxuICAgICAgICAnYV92ZXJ0ZXhfdGV4Q29vcmQnLFxuICAgICAgICAnYV9vZmZzZXRfcG9zaXRpb24nLFxuICAgICAgICAnYV9vZmZzZXRfdGV4Q29vcmQnLFxuICAgICAgICAnYV9vZmZzZXRfY29sb3InLFxuICAgICAgICAnYV9vZmZzZXRfc2NhbGUnXG4gICAgICBdLFxuICAgICAgdW5pZm9ybXM6IFsndV9jb21wb3NlZE1hdHJpeCcsICd1X3RleHR1cmUnXVxuICAgIH0pO1xuXG4gICAgY29uc3QgZ2VvQnVpbGRlciA9IG5ldyB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5QnVpbGRlcigpO1xuICAgIGdlb0J1aWxkZXJcbiAgICAgIC5yZXNldCgpXG4gICAgICAuc2V0UHJpbWl0aXZlVHlwZSgndHJpYW5nbGVzJylcbiAgICAgIC5hZGRWYm8oKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV92ZXJ0ZXhfcG9zaXRpb24nLCAndmVjMmYnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV92ZXJ0ZXhfdGV4Q29vcmQnLCAndmVjMmYnKVxuICAgICAgLnNldFN0cmlkZSg0ICogNClcbiAgICAgIC5hZGRWYm8oKVxuICAgICAgLnNldFZib0FzRHluYW1pYygpXG4gICAgICAuc2V0VmJvQXNJbnN0YW5jZWQoKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfcG9zaXRpb24nLCAndmVjM2YnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfdGV4Q29vcmQnLCAndmVjMmYnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfY29sb3InLCAndmVjM2YnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV9vZmZzZXRfc2NhbGUnLCAnZmxvYXQnKVxuICAgICAgLnNldFN0cmlkZSg5ICogNCk7XG5cbiAgICB0aGlzLl9nZW9tZXRyeSA9IG5ldyB3ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5KFxuICAgICAgdGhpcy5fc2hhZGVyLFxuICAgICAgZ2VvQnVpbGRlci5nZXREZWYoKVxuICAgICk7XG5cbiAgICB0eXBlIFZlcnRleCA9IHsgcG9zaXRpb246IGdsbS5SZWFkb25seVZlYzI7IHRleENvb3JkOiBnbG0uUmVhZG9ubHlWZWMyIH07XG5cbiAgICBjb25zdCB2ZXJ0aWNlczogW1ZlcnRleCwgVmVydGV4LCBWZXJ0ZXgsIFZlcnRleF0gPSBbXG4gICAgICB7XG4gICAgICAgIHBvc2l0aW9uOiBbKzAuNSwgLTAuNV0sXG4gICAgICAgIHRleENvb3JkOiBba190ZXhDb29yZFswXSAqIDEsIGtfdGV4Q29vcmRbMV0gKiAxXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcG9zaXRpb246IFstMC41LCAtMC41XSxcbiAgICAgICAgdGV4Q29vcmQ6IFtrX3RleENvb3JkWzBdICogMCwga190ZXhDb29yZFsxXSAqIDFdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwb3NpdGlvbjogWyswLjUsICswLjVdLFxuICAgICAgICB0ZXhDb29yZDogW2tfdGV4Q29vcmRbMF0gKiAxLCBrX3RleENvb3JkWzFdICogMF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBvc2l0aW9uOiBbLTAuNSwgKzAuNV0sXG4gICAgICAgIHRleENvb3JkOiBba190ZXhDb29yZFswXSAqIDAsIGtfdGV4Q29vcmRbMV0gKiAwXVxuICAgICAgfVxuICAgIF07XG5cbiAgICBjb25zdCBpbmRpY2VzID0gWzEsIDAsIDIsIDEsIDIsIDNdO1xuXG4gICAgY29uc3QgbGV0dGVyVmVydGljZXM6IG51bWJlcltdID0gW107XG4gICAgZm9yIChjb25zdCBpbmRleCBvZiBpbmRpY2VzKSB7XG4gICAgICBjb25zdCB2ZXJ0ZXggPSB2ZXJ0aWNlc1tpbmRleF07XG4gICAgICBsZXR0ZXJWZXJ0aWNlcy5wdXNoKFxuICAgICAgICB2ZXJ0ZXgucG9zaXRpb25bMF0sXG4gICAgICAgIHZlcnRleC5wb3NpdGlvblsxXSxcbiAgICAgICAgdmVydGV4LnRleENvb3JkWzBdLFxuICAgICAgICB2ZXJ0ZXgudGV4Q29vcmRbMV1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fZ2VvbWV0cnkuYWxsb2NhdGVCdWZmZXIoMCwgbGV0dGVyVmVydGljZXMsIGxldHRlclZlcnRpY2VzLmxlbmd0aCk7XG4gICAgdGhpcy5fZ2VvbWV0cnkuc2V0UHJpbWl0aXZlQ291bnQobGV0dGVyVmVydGljZXMubGVuZ3RoIC8gNCk7XG5cbiAgICB0aGlzLl90ZXhDb29yZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBnbG0uUmVhZG9ubHlWZWMyPihbXG4gICAgICBbJyAnLCBbMCAqIGtfdGV4Q29vcmRbMF0sIDAgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJyEnLCBbMSAqIGtfdGV4Q29vcmRbMF0sIDAgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1wiJywgWzIgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWycjJywgWzMgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyckJywgWzQgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyclJywgWzUgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWycmJywgWzYgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgW1wiJ1wiLCBbNyAqIGtfdGV4Q29vcmRbMF0sIDAgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJygnLCBbOCAqIGtfdGV4Q29vcmRbMF0sIDAgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJyknLCBbOSAqIGtfdGV4Q29vcmRbMF0sIDAgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJyonLCBbMTAgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWycrJywgWzExICoga190ZXhDb29yZFswXSwgMCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnLCcsIFsxMiAqIGtfdGV4Q29vcmRbMF0sIDAgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJy0nLCBbMTMgKiBrX3RleENvb3JkWzBdLCAwICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWycuJywgWzE0ICoga190ZXhDb29yZFswXSwgMCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnLycsIFsxNSAqIGtfdGV4Q29vcmRbMF0sIDAgKiBrX3RleENvb3JkWzFdXV0sXG5cbiAgICAgIFsnMCcsIFswICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnMScsIFsxICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnMicsIFsyICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnMycsIFszICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnNCcsIFs0ICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnNScsIFs1ICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnNicsIFs2ICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnNycsIFs3ICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnOCcsIFs4ICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnOScsIFs5ICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnOicsIFsxMCAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJzsnLCBbMTEgKiBrX3RleENvb3JkWzBdLCAxICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyc8JywgWzEyICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnPScsIFsxMyAqIGtfdGV4Q29vcmRbMF0sIDEgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJz4nLCBbMTQgKiBrX3RleENvb3JkWzBdLCAxICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyc/JywgWzE1ICoga190ZXhDb29yZFswXSwgMSAqIGtfdGV4Q29vcmRbMV1dXSxcblxuICAgICAgWydAJywgWzAgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydBJywgWzEgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydCJywgWzIgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydDJywgWzMgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydEJywgWzQgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydFJywgWzUgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydGJywgWzYgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydHJywgWzcgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydIJywgWzggKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydJJywgWzkgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydKJywgWzEwICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnSycsIFsxMSAqIGtfdGV4Q29vcmRbMF0sIDIgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ0wnLCBbMTIgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydNJywgWzEzICoga190ZXhDb29yZFswXSwgMiAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnTicsIFsxNCAqIGtfdGV4Q29vcmRbMF0sIDIgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ08nLCBbMTUgKiBrX3RleENvb3JkWzBdLCAyICoga190ZXhDb29yZFsxXV1dLFxuXG4gICAgICBbJ1AnLCBbMCAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1EnLCBbMSAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1InLCBbMiAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1MnLCBbMyAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1QnLCBbNCAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1UnLCBbNSAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1YnLCBbNiAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1cnLCBbNyAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1gnLCBbOCAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1knLCBbOSAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ1onLCBbMTAgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydbJywgWzExICoga190ZXhDb29yZFswXSwgMyAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnXFxcXCcsIFsxMiAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ10nLCBbMTMgKiBrX3RleENvb3JkWzBdLCAzICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydeJywgWzE0ICoga190ZXhDb29yZFswXSwgMyAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnXycsIFsxNSAqIGtfdGV4Q29vcmRbMF0sIDMgKiBrX3RleENvb3JkWzFdXV0sXG5cbiAgICAgIFsnYCcsIFswICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnYScsIFsxICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnYicsIFsyICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnYycsIFszICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnZCcsIFs0ICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnZScsIFs1ICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnZicsIFs2ICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnZycsIFs3ICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnaCcsIFs4ICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnaScsIFs5ICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnaicsIFsxMCAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ2snLCBbMTEgKiBrX3RleENvb3JkWzBdLCA0ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydsJywgWzEyICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnbScsIFsxMyAqIGtfdGV4Q29vcmRbMF0sIDQgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ24nLCBbMTQgKiBrX3RleENvb3JkWzBdLCA0ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydvJywgWzE1ICoga190ZXhDb29yZFswXSwgNCAqIGtfdGV4Q29vcmRbMV1dXSxcblxuICAgICAgWydwJywgWzAgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydxJywgWzEgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydyJywgWzIgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWydzJywgWzMgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyd0JywgWzQgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyd1JywgWzUgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyd2JywgWzYgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyd3JywgWzcgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyd4JywgWzggKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyd5JywgWzkgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyd6JywgWzEwICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsneycsIFsxMSAqIGtfdGV4Q29vcmRbMF0sIDUgKiBrX3RleENvb3JkWzFdXV0sXG4gICAgICBbJ3wnLCBbMTIgKiBrX3RleENvb3JkWzBdLCA1ICoga190ZXhDb29yZFsxXV1dLFxuICAgICAgWyd9JywgWzEzICoga190ZXhDb29yZFswXSwgNSAqIGtfdGV4Q29vcmRbMV1dXSxcbiAgICAgIFsnficsIFsxNCAqIGtfdGV4Q29vcmRbMF0sIDUgKiBrX3RleENvb3JkWzFdXV1cbiAgICBdKTtcblxuICAgIGNvbnN0IHdpZHRoID0gMjU2O1xuICAgIGNvbnN0IGhlaWdodCA9IDk2O1xuICAgIGNvbnN0IGltYWdlUGl4ZWxzID0gbmV3IFVpbnQ4QXJyYXkod2lkdGggKiBoZWlnaHQgKiA0KTtcbiAgICB7XG4gICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGFzY2lpVGV4dHVyZUhleC5sZW5ndGg7IGlpICs9IDIpIHtcbiAgICAgICAgbGV0IGN1cnJTaXplID1cbiAgICAgICAgICBwYXJzZUludChgJHthc2NpaVRleHR1cmVIZXguc3Vic3RyaW5nKGlpLCBpaSArIDIpfTAwMDAwMGAsIDE2KSA+PiAyNDtcblxuICAgICAgICBsZXQgY3VyclZhbCA9IDA7XG4gICAgICAgIGlmIChjdXJyU2l6ZSA8IDApIHtcbiAgICAgICAgICBjdXJyU2l6ZSA9IC1jdXJyU2l6ZTtcbiAgICAgICAgICBjdXJyVmFsID0gMjU1O1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGN1cnJTaXplOyArK2lpKSB7XG4gICAgICAgICAgaW1hZ2VQaXhlbHNbaW5kZXggKiA0ICsgMF0gPSBjdXJyVmFsO1xuICAgICAgICAgIGltYWdlUGl4ZWxzW2luZGV4ICogNCArIDFdID0gY3VyclZhbDtcbiAgICAgICAgICBpbWFnZVBpeGVsc1tpbmRleCAqIDQgKyAyXSA9IGN1cnJWYWw7XG4gICAgICAgICAgaW1hZ2VQaXhlbHNbaW5kZXggKiA0ICsgM10gPSBjdXJyVmFsO1xuICAgICAgICAgICsraW5kZXg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl90ZXh0dXJlLmluaXRpYWxpemUoKTtcbiAgICB0aGlzLl90ZXh0dXJlLmJpbmQoKGJvdW5kVGV4dHVyZSkgPT4ge1xuICAgICAgYm91bmRUZXh0dXJlLmxvYWRGcm9tTWVtb3J5KHdpZHRoLCBoZWlnaHQsIGltYWdlUGl4ZWxzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldFRleHRBbGlnbihcbiAgICBpbkhvcml6b250YWxUZXh0QWxpZ246IEhvcml6b250YWxUZXh0QWxpZ24sXG4gICAgaW5WZXJ0aWNhbFRleHRBbGlnbjogVmVydGljYWxUZXh0QWxpZ25cbiAgKTogdGhpcyB7XG4gICAgdGhpcy5faG9yaXpvbnRhbFRleHRBbGlnbiA9IGluSG9yaXpvbnRhbFRleHRBbGlnbjtcbiAgICB0aGlzLl92ZXJ0aWNhbFRleHRBbGlnbiA9IGluVmVydGljYWxUZXh0QWxpZ247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZXRUZXh0U2NhbGUoaW5TY2FsZTogbnVtYmVyKTogdGhpcyB7XG4gICAgdGhpcy5fdGV4dFNjYWxlID0gaW5TY2FsZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldFRleHRDb2xvcihpblJlZDogbnVtYmVyLCBpbkdyZWVuOiBudW1iZXIsIGluQmx1ZTogbnVtYmVyKTogdGhpcyB7XG4gICAgdGhpcy5fdGV4dENvbG9yWzBdID0gaW5SZWQ7XG4gICAgdGhpcy5fdGV4dENvbG9yWzFdID0gaW5HcmVlbjtcbiAgICB0aGlzLl90ZXh0Q29sb3JbMl0gPSBpbkJsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdXNoVGV4dChpbk1lc3NhZ2U6IHN0cmluZywgaW5Qb3NpdGlvbjogZ2xtLlJlYWRvbmx5VmVjMik6IHRoaXMge1xuICAgIC8vXG4gICAgLy8gdmFsaWRhdGVcbiAgICAvL1xuXG4gICAgaWYgKGluTWVzc2FnZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpZiAodGhpcy5fdGV4dFNjYWxlIDw9IDApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNvbnN0IGFsbExpbmVXaWR0aDogbnVtYmVyW10gPSBbMF07XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGluTWVzc2FnZS5sZW5ndGg7ICsraWkpIHtcbiAgICAgIGlmIChpbk1lc3NhZ2VbaWldID09ICdcXG4nKSB7XG4gICAgICAgIGFsbExpbmVXaWR0aC5wdXNoKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxsTGluZVdpZHRoW2FsbExpbmVXaWR0aC5sZW5ndGggLSAxXSArPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhbGxMaW5lV2lkdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gZm9yIChjb25zdCBjdXJyTGluZSBvZiBhbGxMaW5lV2lkdGgpIHtcbiAgICAvLyAgIGlmIChjdXJyTGluZSA9PT0gMCkge1xuICAgIC8vICAgICByZXR1cm4gdGhpcztcbiAgICAvLyAgIH1cbiAgICAvLyB9XG5cbiAgICBsZXQgbGluZUluZGV4ID0gMDtcblxuICAgIGNvbnN0IGN1cnJQb3M6IGdsbS52ZWMyID0gWzAsIDBdO1xuXG4gICAgLy9cbiAgICAvLyBwcmUgcHJvY2Vzc1xuICAgIC8vXG5cbiAgICBjb25zdCBoU2NhbGUgPSB0aGlzLl90ZXh0U2NhbGUgKiAwLjU7XG5cbiAgICBzd2l0Y2ggKHRoaXMuX2hvcml6b250YWxUZXh0QWxpZ24pIHtcbiAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICBjdXJyUG9zWzBdID0gaW5Qb3NpdGlvblswXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjZW50ZXJlZCc6XG4gICAgICAgIGN1cnJQb3NbMF0gPSBpblBvc2l0aW9uWzBdIC0gYWxsTGluZVdpZHRoW2xpbmVJbmRleF0gKiBoU2NhbGUgKyBoU2NhbGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICBjdXJyUG9zWzBdID1cbiAgICAgICAgICBpblBvc2l0aW9uWzBdIC1cbiAgICAgICAgICBhbGxMaW5lV2lkdGhbbGluZUluZGV4XSAqIHRoaXMuX3RleHRTY2FsZSArXG4gICAgICAgICAgdGhpcy5fdGV4dFNjYWxlO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMuX3ZlcnRpY2FsVGV4dEFsaWduKSB7XG4gICAgICBjYXNlICd0b3AnOlxuICAgICAgICBjdXJyUG9zWzFdID0gaW5Qb3NpdGlvblsxXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjZW50ZXJlZCc6XG4gICAgICAgIGN1cnJQb3NbMV0gPSBpblBvc2l0aW9uWzFdICsgYWxsTGluZVdpZHRoLmxlbmd0aCAqIGhTY2FsZSAtIGhTY2FsZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICBjdXJyUG9zWzFdID1cbiAgICAgICAgICBpblBvc2l0aW9uWzFdIC0gKGFsbExpbmVXaWR0aC5sZW5ndGggLSAxKSAqIHRoaXMuX3RleHRTY2FsZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBwcm9jZXNzXG4gICAgLy9cblxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBpbk1lc3NhZ2UubGVuZ3RoOyArK2lpKSB7XG4gICAgICBjb25zdCBsZXR0ZXIgPSBpbk1lc3NhZ2VbaWldO1xuXG4gICAgICBpZiAobGV0dGVyID09ICdcXG4nKSB7XG4gICAgICAgIGxpbmVJbmRleCArPSAxO1xuXG4gICAgICAgIC8vIGdvIGJhY2tcbiAgICAgICAgc3dpdGNoICh0aGlzLl9ob3Jpem9udGFsVGV4dEFsaWduKSB7XG4gICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICBjdXJyUG9zWzBdID0gaW5Qb3NpdGlvblswXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2NlbnRlcmVkJzpcbiAgICAgICAgICAgIGN1cnJQb3NbMF0gPVxuICAgICAgICAgICAgICBpblBvc2l0aW9uWzBdIC0gYWxsTGluZVdpZHRoW2xpbmVJbmRleF0gKiBoU2NhbGUgKyBoU2NhbGU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICBjdXJyUG9zWzBdID1cbiAgICAgICAgICAgICAgaW5Qb3NpdGlvblswXSAtXG4gICAgICAgICAgICAgIGFsbExpbmVXaWR0aFtsaW5lSW5kZXhdICogdGhpcy5fdGV4dFNjYWxlICtcbiAgICAgICAgICAgICAgdGhpcy5fdGV4dFNjYWxlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyUG9zWzFdIC09IHRoaXMuX3RleHRTY2FsZTsgLy8gZ28gZG93blxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcHVzaExldHRlcihsZXR0ZXIsIGN1cnJQb3MpO1xuICAgICAgICAvLyBnbyByaWdodFxuICAgICAgICBjdXJyUG9zWzBdICs9IHRoaXMuX3RleHRTY2FsZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwcml2YXRlIF9wdXNoTGV0dGVyKGluQ2hhcmFjdGVyOiBzdHJpbmcsIGluUG9zaXRpb246IGdsbS5SZWFkb25seVZlYzIpIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFNpemUgKyA5ICogMTAgPj0gdGhpcy5fYnVmZmVyLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRleENvb3JkID0gdGhpcy5fdGV4Q29vcmRNYXAuZ2V0KGluQ2hhcmFjdGVyKTtcblxuICAgIGlmICghdGV4Q29vcmQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGZhaWwgdG8gZmluZCBhIGxldHRlciwgbGV0dGVyPSR7aW5DaGFyYWN0ZXJ9YCk7XG5cbiAgICBmb3IgKGxldCB5eSA9IC0xOyB5eSA8PSAxOyArK3l5KSB7XG4gICAgICBmb3IgKGxldCB4eCA9IC0xOyB4eCA8PSAxOyArK3h4KSB7XG4gICAgICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluUG9zaXRpb25bMF0gKyAyICogeHg7XG4gICAgICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluUG9zaXRpb25bMV0gKyAyICogeXk7XG4gICAgICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IC0wLjE7XG4gICAgICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IHRleENvb3JkWzBdO1xuICAgICAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSB0ZXhDb29yZFsxXTtcbiAgICAgICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gMDsgLy8gYmxhY2tDb2xvclxuICAgICAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSAwOyAvLyBibGFja0NvbG9yXG4gICAgICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IDA7IC8vIGJsYWNrQ29sb3JcbiAgICAgICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gdGhpcy5fdGV4dFNjYWxlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IGluUG9zaXRpb25bMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gaW5Qb3NpdGlvblsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSAwLjA7XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gdGV4Q29vcmRbMF07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gdGV4Q29vcmRbMV07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gdGhpcy5fdGV4dENvbG9yWzBdO1xuICAgIHRoaXMuX2J1ZmZlclt0aGlzLl9jdXJyZW50U2l6ZSsrXSA9IHRoaXMuX3RleHRDb2xvclsxXTtcbiAgICB0aGlzLl9idWZmZXJbdGhpcy5fY3VycmVudFNpemUrK10gPSB0aGlzLl90ZXh0Q29sb3JbMl07XG4gICAgdGhpcy5fYnVmZmVyW3RoaXMuX2N1cnJlbnRTaXplKytdID0gdGhpcy5fdGV4dFNjYWxlO1xuICB9XG5cbiAgZmx1c2goY29tcG9zZWRNYXRyaXg6IGdsbS5SZWFkb25seU1hdDQpOiB0aGlzIHtcbiAgICBpZiAodGhpcy5fY3VycmVudFNpemUgPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMuX3NoYWRlci5iaW5kKChib3VuZFNoYWRlcikgPT4ge1xuICAgICAgYm91bmRTaGFkZXIuc2V0TWF0cml4NFVuaWZvcm0oJ3VfY29tcG9zZWRNYXRyaXgnLCBjb21wb3NlZE1hdHJpeCk7XG4gICAgICBib3VuZFNoYWRlci5zZXRUZXh0dXJlVW5pZm9ybSgndV90ZXh0dXJlJywgdGhpcy5fdGV4dHVyZSwgMCk7XG5cbiAgICAgIHRoaXMuX2dlb21ldHJ5LmFsbG9jYXRlQnVmZmVyKDEsIHRoaXMuX2J1ZmZlciwgdGhpcy5fY3VycmVudFNpemUpO1xuICAgICAgdGhpcy5fZ2VvbWV0cnkuc2V0SW5zdGFuY2VkQ291bnQodGhpcy5fY3VycmVudFNpemUgLyA5KTtcbiAgICAgIHRoaXMuX2dlb21ldHJ5LnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgd2ViZ2wyLlRleHR1cmUudW5iaW5kKCk7XG5cbiAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGNsZWFyKCk6IHRoaXMge1xuICAgIC8vIHJlc2V0IHZlcnRpY2VzXG4gICAgdGhpcy5fY3VycmVudFNpemUgPSAwO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iLAogICJpbXBvcnQgKiBhcyBicm93c2VyIGZyb20gJy4uLy4uLy4uL3N5c3RlbS9icm93c2VyJztcbmltcG9ydCAqIGFzIHJlbmRlcmVycyBmcm9tICcuLi8uLi8uLi9ncmFwaGljcy9yZW5kZXJlcnMnO1xuXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuaW50ZXJmYWNlIEluZGljYXRvciB7XG4gIGNlbnRlcjogZ2xtLlJlYWRvbmx5VmVjMjtcbiAgc2l6ZTogZ2xtLlJlYWRvbmx5VmVjMjtcbiAgdGV4dD86IHN0cmluZztcbiAgbGluZXM/OiB7XG4gICAgYTogZ2xtLlJlYWRvbmx5VmVjMjtcbiAgICBiOiBnbG0uUmVhZG9ubHlWZWMyO1xuICAgIHRoaWNrbmVzczogbnVtYmVyO1xuICAgIGNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzO1xuICB9W107XG4gIGNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzO1xufVxuXG5jb25zdCBkZWZhdWx0Q29sb3I6IGdsbS5SZWFkb25seVZlYzMgPSBbMC4yLCAwLjIsIDAuMl07XG5jb25zdCBhY3RpdmF0ZWRDb2xvcjogZ2xtLlJlYWRvbmx5VmVjMyA9IFswLjIsIDAuNiwgMC4yXTtcblxuY29uc3QgX3JlbmRlckluZGljYXRvciA9IChcbiAgY3VyckluZGljYXRvcjogSW5kaWNhdG9yLFxuICBzdGFja1JlbmRlcmVyczogcmVuZGVyZXJzLklTdGFja1JlbmRlcmVycyxcbiAgdGV4dFJlbmRlcmVyOiByZW5kZXJlcnMuSVRleHRSZW5kZXJlclxuKSA9PiB7XG4gIGNvbnN0IHsgY2VudGVyIH0gPSBjdXJySW5kaWNhdG9yO1xuXG4gIHN0YWNrUmVuZGVyZXJzLnB1c2hDZW50ZXJlZFJlY3RhbmdsZShcbiAgICBnbG0udmVjMy5mcm9tVmFsdWVzKGNlbnRlclswXSwgY2VudGVyWzFdLCAtMC4zKSxcbiAgICBjdXJySW5kaWNhdG9yLnNpemUsXG4gICAgWzAsIDAsIDBdXG4gICk7XG5cbiAgc3RhY2tSZW5kZXJlcnMucHVzaENlbnRlcmVkUmVjdGFuZ2xlKFxuICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoY2VudGVyWzBdLCBjZW50ZXJbMV0sIC0wLjIpLFxuICAgIFtjdXJySW5kaWNhdG9yLnNpemVbMF0gLSAyLCBjdXJySW5kaWNhdG9yLnNpemVbMV0gLSAyXSxcbiAgICBjdXJySW5kaWNhdG9yLmNvbG9yXG4gICk7XG5cbiAgaWYgKGN1cnJJbmRpY2F0b3IudGV4dCkge1xuICAgIHRleHRSZW5kZXJlclxuICAgICAgLnNldFRleHRTY2FsZSgxNilcbiAgICAgIC5zZXRUZXh0QWxpZ24oJ2NlbnRlcmVkJywgJ2NlbnRlcmVkJylcbiAgICAgIC5wdXNoVGV4dChjdXJySW5kaWNhdG9yLnRleHQsIGNlbnRlcilcbiAgICAgIC5zZXRUZXh0QWxpZ24oJ2xlZnQnLCAndG9wJyk7XG4gIH1cblxuICBpZiAoY3VyckluZGljYXRvci5saW5lcykge1xuICAgIGN1cnJJbmRpY2F0b3IubGluZXMuZm9yRWFjaCgoY3VyckxpbmUpID0+IHtcbiAgICAgIHN0YWNrUmVuZGVyZXJzLnB1c2hUaGlja0xpbmUoXG4gICAgICAgIFtjZW50ZXJbMF0gKyBjdXJyTGluZS5hWzBdLCBjZW50ZXJbMV0gKyBjdXJyTGluZS5hWzFdLCAwXSxcbiAgICAgICAgW2NlbnRlclswXSArIGN1cnJMaW5lLmJbMF0sIGNlbnRlclsxXSArIGN1cnJMaW5lLmJbMV0sIDBdLFxuICAgICAgICBjdXJyTGluZS50aGlja25lc3MsXG4gICAgICAgIGN1cnJMaW5lLmNvbG9yXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgYWRkS2V5U3Ryb2tlc1dpZGdldHMgPSAoXG4gIGluUG9zOiBnbG0uUmVhZG9ubHlWZWMyLFxuICBzdGFja1JlbmRlcmVyczogcmVuZGVyZXJzLklTdGFja1JlbmRlcmVycyxcbiAgdGV4dFJlbmRlcmVyOiByZW5kZXJlcnMuSVRleHRSZW5kZXJlclxuKSA9PiB7XG4gIF9yZW5kZXJJbmRpY2F0b3IoXG4gICAge1xuICAgICAgY2VudGVyOiBbaW5Qb3NbMF0sIGluUG9zWzFdXSxcbiAgICAgIHNpemU6IFs0MCwgNDBdLFxuICAgICAgdGV4dDogJ0FcXG5RJyxcbiAgICAgIGNvbG9yOiBicm93c2VyLkdsb2JhbEtleWJvYXJkTWFuYWdlci5pc1ByZXNzZWQoJ0EnLCAnUScpXG4gICAgICAgID8gYWN0aXZhdGVkQ29sb3JcbiAgICAgICAgOiBkZWZhdWx0Q29sb3JcbiAgICB9LFxuICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgIHRleHRSZW5kZXJlclxuICApO1xuXG4gIF9yZW5kZXJJbmRpY2F0b3IoXG4gICAge1xuICAgICAgY2VudGVyOiBbaW5Qb3NbMF0gKyA0NSAqIDEsIGluUG9zWzFdXSxcbiAgICAgIHNpemU6IFs0MCwgNDBdLFxuICAgICAgdGV4dDogJ1MnLFxuICAgICAgY29sb3I6IGJyb3dzZXIuR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnUycpXG4gICAgICAgID8gYWN0aXZhdGVkQ29sb3JcbiAgICAgICAgOiBkZWZhdWx0Q29sb3JcbiAgICB9LFxuICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgIHRleHRSZW5kZXJlclxuICApO1xuXG4gIF9yZW5kZXJJbmRpY2F0b3IoXG4gICAge1xuICAgICAgY2VudGVyOiBbaW5Qb3NbMF0gKyA0NSAqIDEsIGluUG9zWzFdICsgNDVdLFxuICAgICAgc2l6ZTogWzQwLCA0MF0sXG4gICAgICB0ZXh0OiAnV1xcblonLFxuICAgICAgY29sb3I6IGJyb3dzZXIuR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnVycsICdaJylcbiAgICAgICAgPyBhY3RpdmF0ZWRDb2xvclxuICAgICAgICA6IGRlZmF1bHRDb2xvclxuICAgIH0sXG4gICAgc3RhY2tSZW5kZXJlcnMsXG4gICAgdGV4dFJlbmRlcmVyXG4gICk7XG5cbiAgX3JlbmRlckluZGljYXRvcihcbiAgICB7XG4gICAgICBjZW50ZXI6IFtpblBvc1swXSArIDQ1ICogMiwgaW5Qb3NbMV1dLFxuICAgICAgc2l6ZTogWzQwLCA0MF0sXG4gICAgICB0ZXh0OiAnRCcsXG4gICAgICBjb2xvcjogYnJvd3Nlci5HbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdEJylcbiAgICAgICAgPyBhY3RpdmF0ZWRDb2xvclxuICAgICAgICA6IGRlZmF1bHRDb2xvclxuICAgIH0sXG4gICAgc3RhY2tSZW5kZXJlcnMsXG4gICAgdGV4dFJlbmRlcmVyXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgYWRkQXJyb3dTdHJva2VzV2lkZ2V0cyA9IChcbiAgaW5Qb3M6IGdsbS5SZWFkb25seVZlYzIsXG4gIHN0YWNrUmVuZGVyZXJzOiByZW5kZXJlcnMuSVN0YWNrUmVuZGVyZXJzLFxuICB0ZXh0UmVuZGVyZXI6IHJlbmRlcmVycy5JVGV4dFJlbmRlcmVyXG4pID0+IHtcbiAgLy8gYXJyb3cgbGVmdFxuICBfcmVuZGVySW5kaWNhdG9yKFxuICAgIHtcbiAgICAgIGNlbnRlcjogW2luUG9zWzBdLCBpblBvc1sxXV0sXG4gICAgICBzaXplOiBbNDAsIDQwXSxcbiAgICAgIGxpbmVzOiBbXG4gICAgICAgIHsgYTogWzE1LCAwXSwgYjogWy04LCAwXSwgdGhpY2tuZXNzOiA2LCBjb2xvcjogWzEsIDEsIDFdIH0sXG4gICAgICAgIHsgYTogWzAsIDEwXSwgYjogWy0xMiwgLTJdLCB0aGlja25lc3M6IDYsIGNvbG9yOiBbMSwgMSwgMV0gfSxcbiAgICAgICAgeyBhOiBbMCwgLTEwXSwgYjogWy0xMiwgMl0sIHRoaWNrbmVzczogNiwgY29sb3I6IFsxLCAxLCAxXSB9XG4gICAgICBdLFxuICAgICAgY29sb3I6IGJyb3dzZXIuR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmlzUHJlc3NlZCgnQXJyb3dMZWZ0JylcbiAgICAgICAgPyBhY3RpdmF0ZWRDb2xvclxuICAgICAgICA6IGRlZmF1bHRDb2xvclxuICAgIH0sXG4gICAgc3RhY2tSZW5kZXJlcnMsXG4gICAgdGV4dFJlbmRlcmVyXG4gICk7XG5cbiAgLy8gYXJyb3cgZG93blxuICBfcmVuZGVySW5kaWNhdG9yKFxuICAgIHtcbiAgICAgIGNlbnRlcjogW2luUG9zWzBdICsgNDUsIGluUG9zWzFdXSxcbiAgICAgIHNpemU6IFs0MCwgNDBdLFxuICAgICAgbGluZXM6IFtcbiAgICAgICAgeyBhOiBbMCwgMTVdLCBiOiBbMCwgLThdLCB0aGlja25lc3M6IDYsIGNvbG9yOiBbMSwgMSwgMV0gfSxcbiAgICAgICAgeyBhOiBbMTAsIDBdLCBiOiBbLTIsIC0xMl0sIHRoaWNrbmVzczogNiwgY29sb3I6IFsxLCAxLCAxXSB9LFxuICAgICAgICB7IGE6IFstMTAsIDBdLCBiOiBbMiwgLTEyXSwgdGhpY2tuZXNzOiA2LCBjb2xvcjogWzEsIDEsIDFdIH1cbiAgICAgIF0sXG4gICAgICBjb2xvcjogYnJvd3Nlci5HbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdBcnJvd0Rvd24nKVxuICAgICAgICA/IGFjdGl2YXRlZENvbG9yXG4gICAgICAgIDogZGVmYXVsdENvbG9yXG4gICAgfSxcbiAgICBzdGFja1JlbmRlcmVycyxcbiAgICB0ZXh0UmVuZGVyZXJcbiAgKTtcblxuICAvLyBhcnJvdyB1cFxuICBfcmVuZGVySW5kaWNhdG9yKFxuICAgIHtcbiAgICAgIGNlbnRlcjogW2luUG9zWzBdICsgNDUsIGluUG9zWzFdICsgNDVdLFxuICAgICAgc2l6ZTogWzQwLCA0MF0sXG4gICAgICBsaW5lczogW1xuICAgICAgICB7IGE6IFswLCAtMTVdLCBiOiBbMCwgOF0sIHRoaWNrbmVzczogNiwgY29sb3I6IFsxLCAxLCAxXSB9LFxuICAgICAgICB7IGE6IFsxMCwgMF0sIGI6IFstMiwgMTJdLCB0aGlja25lc3M6IDYsIGNvbG9yOiBbMSwgMSwgMV0gfSxcbiAgICAgICAgeyBhOiBbLTEwLCAwXSwgYjogWzIsIDEyXSwgdGhpY2tuZXNzOiA2LCBjb2xvcjogWzEsIDEsIDFdIH1cbiAgICAgIF0sXG4gICAgICBjb2xvcjogYnJvd3Nlci5HbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdBcnJvd1VwJylcbiAgICAgICAgPyBhY3RpdmF0ZWRDb2xvclxuICAgICAgICA6IGRlZmF1bHRDb2xvclxuICAgIH0sXG4gICAgc3RhY2tSZW5kZXJlcnMsXG4gICAgdGV4dFJlbmRlcmVyXG4gICk7XG5cbiAgLy8gYXJyb3cgcmlnaHRcbiAgX3JlbmRlckluZGljYXRvcihcbiAgICB7XG4gICAgICBjZW50ZXI6IFtpblBvc1swXSArIDQ1ICogMiwgaW5Qb3NbMV1dLFxuICAgICAgc2l6ZTogWzQwLCA0MF0sXG4gICAgICBsaW5lczogW1xuICAgICAgICB7IGE6IFstMTUsIDBdLCBiOiBbOCwgMF0sIHRoaWNrbmVzczogNiwgY29sb3I6IFsxLCAxLCAxXSB9LFxuICAgICAgICB7IGE6IFswLCAxMF0sIGI6IFsxMiwgLTJdLCB0aGlja25lc3M6IDYsIGNvbG9yOiBbMSwgMSwgMV0gfSxcbiAgICAgICAgeyBhOiBbMCwgLTEwXSwgYjogWzEyLCAyXSwgdGhpY2tuZXNzOiA2LCBjb2xvcjogWzEsIDEsIDFdIH1cbiAgICAgIF0sXG4gICAgICBjb2xvcjogYnJvd3Nlci5HbG9iYWxLZXlib2FyZE1hbmFnZXIuaXNQcmVzc2VkKCdBcnJvd1JpZ2h0JylcbiAgICAgICAgPyBhY3RpdmF0ZWRDb2xvclxuICAgICAgICA6IGRlZmF1bHRDb2xvclxuICAgIH0sXG4gICAgc3RhY2tSZW5kZXJlcnMsXG4gICAgdGV4dFJlbmRlcmVyXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgYWRkS2V5c1RvdWNoZXNXaWRnZXRzID0gKFxuICBpbkNhbnZhc0VsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50LFxuICBpblBvczogZ2xtLlJlYWRvbmx5VmVjMixcbiAgc3RhY2tSZW5kZXJlcnM6IHJlbmRlcmVycy5JU3RhY2tSZW5kZXJlcnMsXG4gIHRleHRSZW5kZXJlcjogcmVuZGVyZXJzLklUZXh0UmVuZGVyZXJcbikgPT4ge1xuICBpZiAoYnJvd3Nlci5HbG9iYWxUb3VjaE1hbmFnZXIuaXNTdXBwb3J0ZWQoaW5DYW52YXNFbGVtZW50KSkge1xuICAgIF9yZW5kZXJJbmRpY2F0b3IoXG4gICAgICB7XG4gICAgICAgIGNlbnRlcjogW2luUG9zWzBdICsgMTE1LCBpblBvc1sxXV0sXG4gICAgICAgIHNpemU6IFsyMzAsIDYwXSxcbiAgICAgICAgdGV4dDogJ1RvdWNoIEV2ZW50c1xcblN1cHBvcnRlZFxcbihkb3VibGUgdGFwKScsXG4gICAgICAgIGNvbG9yOiBbMCwgMC41LCAwXVxuICAgICAgfSxcbiAgICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgICAgdGV4dFJlbmRlcmVyXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBfcmVuZGVySW5kaWNhdG9yKFxuICAgICAge1xuICAgICAgICBjZW50ZXI6IFtpblBvc1swXSArIDExNSwgaW5Qb3NbMV1dLFxuICAgICAgICBzaXplOiBbMjMwLCA2MF0sXG4gICAgICAgIHRleHQ6ICdUb3VjaCBFdmVudHNcXG5Ob3QgU3VwcG9ydGVkJyxcbiAgICAgICAgY29sb3I6IFswLjUsIDAsIDBdXG4gICAgICB9LFxuICAgICAgc3RhY2tSZW5kZXJlcnMsXG4gICAgICB0ZXh0UmVuZGVyZXJcbiAgICApO1xuICB9XG5cbiAgaWYgKGJyb3dzZXIuR2xvYmFsUG9pbnRlckxvY2tNYW5hZ2VyLmNhbkJlUG9pbnRlckxvY2tlZChpbkNhbnZhc0VsZW1lbnQpKSB7XG4gICAgX3JlbmRlckluZGljYXRvcihcbiAgICAgIHtcbiAgICAgICAgY2VudGVyOiBbaW5Qb3NbMF0gKyAxMDUsIGluUG9zWzFdICsgNzBdLFxuICAgICAgICBzaXplOiBbMjEwLCA2MF0sXG4gICAgICAgIHRleHQ6ICdNb3VzZVxcblN1cHBvcnRlZCcsXG4gICAgICAgIGNvbG9yOiBbMCwgMC41LCAwXVxuICAgICAgfSxcbiAgICAgIHN0YWNrUmVuZGVyZXJzLFxuICAgICAgdGV4dFJlbmRlcmVyXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBfcmVuZGVySW5kaWNhdG9yKFxuICAgICAge1xuICAgICAgICBjZW50ZXI6IFtpblBvc1swXSArIDEwNSwgaW5Qb3NbMV0gKyA3MF0sXG4gICAgICAgIHNpemU6IFsyMTAsIDYwXSxcbiAgICAgICAgdGV4dDogJ01vdXNlIEV2ZW50c1xcbk5vdCBTdXBwb3J0ZWQnLFxuICAgICAgICBjb2xvcjogWzAuNSwgMCwgMF1cbiAgICAgIH0sXG4gICAgICBzdGFja1JlbmRlcmVycyxcbiAgICAgIHRleHRSZW5kZXJlclxuICAgICk7XG4gIH1cbn07XG5cbi8vIGV4cG9ydCBjb25zdCByZW5kZXJDb250cm9scyA9IChcbi8vICAgaW5DYW52YXNFbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudCxcbi8vICAgc3RhY2tSZW5kZXJlcnM6IHJlbmRlcmVycy5JU3RhY2tSZW5kZXJlcnMsXG4vLyAgIHRleHRSZW5kZXJlcjogcmVuZGVyZXJzLklUZXh0UmVuZGVyZXJcbi8vICkgPT4ge1xuLy8gICAvLyBjb25zdCBhbGxJbmRpY2F0b3I6IEluZGljYXRvcltdID0gW107XG5cbi8vICAgY29uc3Qga2V5RXZlbnRzUG9zOiBnbG0uUmVhZG9ubHlWZWMyID0gWzcgKyAyMCwgMTY1XTtcbi8vICAgY29uc3QgdG91Y2hFdmVudHNQb3M6IGdsbS5SZWFkb25seVZlYzIgPSBbNyArIDIwLCAyNjBdO1xuLy8gICBjb25zdCBib2FyZFBvczogZ2xtLlJlYWRvbmx5VmVjMiA9IFs3LCAzNV07XG5cbi8vICAgYWRkS2V5U3Ryb2tlc1dpZGdldHMoa2V5RXZlbnRzUG9zLCBzdGFja1JlbmRlcmVycywgdGV4dFJlbmRlcmVyKTtcbi8vICAgYWRkQXJyb3dTdHJva2VzV2lkZ2V0cyh0b3VjaEV2ZW50c1Bvcywgc3RhY2tSZW5kZXJlcnMsIHRleHRSZW5kZXJlcik7XG4vLyAgIGFkZEtleXNUb3VjaGVzV2lkZ2V0cyhpbkNhbnZhc0VsZW1lbnQsIGJvYXJkUG9zLCBzdGFja1JlbmRlcmVycywgdGV4dFJlbmRlcmVyKTtcbi8vIH07XG4iLAogICJpbXBvcnQgeyBzeXN0ZW0sIGdyYXBoaWNzIH0gZnJvbSAnLi4vLi4vLi4nO1xuXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuZXhwb3J0IGNvbnN0IHJlbmRlckZwc01ldGVyID0gKFxuICBpblBvczogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgaW5TaXplOiBnbG0uUmVhZG9ubHlWZWMyLFxuICBpbkZyYW1lUHJvZmlsZXI6IHN5c3RlbS5tZXRyaWNzLklGcmFtZVByb2ZpbGVyLFxuICBpblN0YWNrUmVuZGVyZXJzOiBncmFwaGljcy5yZW5kZXJlcnMuSVN0YWNrUmVuZGVyZXJzLFxuICBpblRleHRSZW5kZXJlcjogZ3JhcGhpY3MucmVuZGVyZXJzLklUZXh0UmVuZGVyZXIsXG4gIGluU2hvd0ZwcyA9IGZhbHNlXG4pID0+IHtcbiAgLy8gZnBzIG1ldGVyXG5cbiAgY29uc3Qga19kaXZpZGVyID0gNTtcbiAgY29uc3Qga192ZXJ0aWNhbFNpemUgPVxuICAgIE1hdGguY2VpbChpbkZyYW1lUHJvZmlsZXIubWF4RGVsdGEgLyBrX2RpdmlkZXIpICoga19kaXZpZGVyO1xuXG4gIHtcbiAgICAvLyBib3JkZXJcblxuICAgIGluU3RhY2tSZW5kZXJlcnMucHVzaE9yaWdpbkJvdW5kUmVjdGFuZ2xlKGluUG9zLCBpblNpemUsIFswLCAwLCAwLCAwLjVdKTtcblxuICAgIGNvbnN0IGFsbFZlcnRpY2VzOiBbXG4gICAgICBnbG0uUmVhZG9ubHlWZWMzLFxuICAgICAgZ2xtLlJlYWRvbmx5VmVjMyxcbiAgICAgIGdsbS5SZWFkb25seVZlYzMsXG4gICAgICBnbG0uUmVhZG9ubHlWZWMzXG4gICAgXSA9IFtcbiAgICAgIFtpblBvc1swXSArIGluU2l6ZVswXSAqIDAsIGluUG9zWzFdICsgaW5TaXplWzFdICogMCwgMF0sXG4gICAgICBbaW5Qb3NbMF0gKyBpblNpemVbMF0gKiAxLCBpblBvc1sxXSArIGluU2l6ZVsxXSAqIDAsIDBdLFxuICAgICAgW2luUG9zWzBdICsgaW5TaXplWzBdICogMSwgaW5Qb3NbMV0gKyBpblNpemVbMV0gKiAxLCAwXSxcbiAgICAgIFtpblBvc1swXSArIGluU2l6ZVswXSAqIDAsIGluUG9zWzFdICsgaW5TaXplWzFdICogMSwgMF1cbiAgICBdO1xuXG4gICAgaW5TdGFja1JlbmRlcmVycy5wdXNoTGluZShhbGxWZXJ0aWNlc1swXSwgYWxsVmVydGljZXNbMV0sIFsxLCAxLCAxXSk7XG4gICAgaW5TdGFja1JlbmRlcmVycy5wdXNoTGluZShhbGxWZXJ0aWNlc1sxXSwgYWxsVmVydGljZXNbMl0sIFsxLCAxLCAxXSk7XG4gICAgaW5TdGFja1JlbmRlcmVycy5wdXNoTGluZShhbGxWZXJ0aWNlc1syXSwgYWxsVmVydGljZXNbM10sIFsxLCAxLCAxXSk7XG4gICAgaW5TdGFja1JlbmRlcmVycy5wdXNoTGluZShhbGxWZXJ0aWNlc1szXSwgYWxsVmVydGljZXNbMF0sIFsxLCAxLCAxXSk7XG4gIH0gLy8gYm9yZGVyXG5cbiAge1xuICAgIC8vIGRpdmlkZXJzXG5cbiAgICBmb3IgKFxuICAgICAgbGV0IGN1cnJEaXZpZGVyID0ga19kaXZpZGVyO1xuICAgICAgY3VyckRpdmlkZXIgPCBrX3ZlcnRpY2FsU2l6ZTtcbiAgICAgIGN1cnJEaXZpZGVyICs9IGtfZGl2aWRlclxuICAgICkge1xuICAgICAgY29uc3QgcmF0aW8gPSBjdXJyRGl2aWRlciAvIGtfdmVydGljYWxTaXplO1xuXG4gICAgICBjb25zdCBwb2ludEE6IGdsbS5SZWFkb25seVZlYzMgPSBbXG4gICAgICAgIGluUG9zWzBdICsgMCxcbiAgICAgICAgaW5Qb3NbMV0gKyBpblNpemVbMV0gKiByYXRpbyxcbiAgICAgICAgMFxuICAgICAgXTtcbiAgICAgIGNvbnN0IHBvaW50QjogZ2xtLlJlYWRvbmx5VmVjMyA9IFtcbiAgICAgICAgaW5Qb3NbMF0gKyBpblNpemVbMF0sXG4gICAgICAgIGluUG9zWzFdICsgaW5TaXplWzFdICogcmF0aW8sXG4gICAgICAgIDBcbiAgICAgIF07XG5cbiAgICAgIGluU3RhY2tSZW5kZXJlcnMucHVzaExpbmUocG9pbnRBLCBwb2ludEIsIFswLjUsIDAuNSwgMC41XSk7XG4gICAgfVxuICB9IC8vIGRpdmlkZXJzXG5cbiAge1xuICAgIC8vIGN1cnZlXG5cbiAgICBpZiAoaW5GcmFtZVByb2ZpbGVyLmZyYW1lc0RlbHRhLmxlbmd0aCA+PSAyKSB7XG4gICAgICBjb25zdCB3aWR0aFN0ZXAgPSBpblNpemVbMF0gLyBpbkZyYW1lUHJvZmlsZXIuZnJhbWVzRGVsdGEubGVuZ3RoO1xuXG4gICAgICBsZXQgcHJldkRlbHRhID0gaW5GcmFtZVByb2ZpbGVyLmZyYW1lc0RlbHRhWzBdO1xuICAgICAgbGV0IHByZXZDb29yZFggPSAwO1xuICAgICAgbGV0IHByZXZDb29yZFkgPSAoaW5TaXplWzFdICogcHJldkRlbHRhKSAvIGtfdmVydGljYWxTaXplO1xuXG4gICAgICBmb3IgKGxldCBpaSA9IDE7IGlpIDwgaW5GcmFtZVByb2ZpbGVyLmZyYW1lc0RlbHRhLmxlbmd0aDsgKytpaSkge1xuICAgICAgICBjb25zdCBjdXJyRGVsdGEgPSBpbkZyYW1lUHJvZmlsZXIuZnJhbWVzRGVsdGFbaWldO1xuICAgICAgICBjb25zdCBjdXJyQ29vcmRYID0gaWkgKiB3aWR0aFN0ZXA7XG4gICAgICAgIGNvbnN0IGN1cnJDb29yZFkgPSAoaW5TaXplWzFdICogY3VyckRlbHRhKSAvIGtfdmVydGljYWxTaXplO1xuXG4gICAgICAgIGNvbnN0IHBvaW50QTogZ2xtLlJlYWRvbmx5VmVjMyA9IFtcbiAgICAgICAgICBpblBvc1swXSArIHByZXZDb29yZFgsXG4gICAgICAgICAgaW5Qb3NbMV0gKyBwcmV2Q29vcmRZLFxuICAgICAgICAgIDBcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgcG9pbnRCOiBnbG0uUmVhZG9ubHlWZWMzID0gW1xuICAgICAgICAgIGluUG9zWzBdICsgY3VyckNvb3JkWCxcbiAgICAgICAgICBpblBvc1sxXSArIGN1cnJDb29yZFksXG4gICAgICAgICAgMFxuICAgICAgICBdO1xuXG4gICAgICAgIGluU3RhY2tSZW5kZXJlcnMucHVzaExpbmUocG9pbnRBLCBwb2ludEIsIFsxLCAxLCAxXSk7XG5cbiAgICAgICAgcHJldkRlbHRhID0gY3VyckRlbHRhO1xuICAgICAgICBwcmV2Q29vcmRYID0gY3VyckNvb3JkWDtcbiAgICAgICAgcHJldkNvb3JkWSA9IGN1cnJDb29yZFk7XG4gICAgICB9XG4gICAgfVxuICB9IC8vIGN1cnZlXG5cbiAge1xuICAgIC8vIGNvdW50ZXJcblxuICAgIGNvbnN0IGtfdGV4dFNjYWxlID0gMTQ7XG4gICAgY29uc3Qga190ZXh0SFNjYWxlID0ga190ZXh0U2NhbGUgKiAwLjU7XG5cbiAgICBjb25zdCBhdmVyYWdlVmFsdWUgPSBpbkZyYW1lUHJvZmlsZXIuYXZlcmFnZURlbHRhO1xuICAgIGNvbnN0IG1heFZhbHVlID0gaW5GcmFtZVByb2ZpbGVyLm1heERlbHRhO1xuICAgIGNvbnN0IG1pblZhbHVlID0gaW5GcmFtZVByb2ZpbGVyLm1pbkRlbHRhO1xuXG4gICAgbGV0IGF2ZXJhZ2VTdHIgPSBgfiR7YXZlcmFnZVZhbHVlLnRvRml4ZWQoMCl9bXNgO1xuICAgIGxldCBtYXhTdHIgPSBgPCR7bWF4VmFsdWV9bXNgO1xuICAgIGxldCBtaW5TdHIgPSBgPiR7bWluVmFsdWV9bXNgO1xuXG4gICAgaWYgKGluU2hvd0ZwcyA9PT0gdHJ1ZSkge1xuICAgICAgY29uc3QgX2dldEZwc1N0ciA9IChpblZhbDogbnVtYmVyKSA9PlxuICAgICAgICBpblZhbCA8IDk5OSA/IGluVmFsLnRvRml4ZWQoMCkgOiAnPz8/JztcblxuICAgICAgYXZlcmFnZVN0ciArPSBgXFxufiR7X2dldEZwc1N0cigxMDAwIC8gYXZlcmFnZVZhbHVlKX1mcHNgO1xuICAgICAgbWF4U3RyICs9IGBcXG48JHtfZ2V0RnBzU3RyKDEwMDAgLyBtYXhWYWx1ZSl9ZnBzYDtcbiAgICAgIG1pblN0ciArPSBgXFxuPiR7X2dldEZwc1N0cigxMDAwIC8gbWluVmFsdWUpfWZwc2A7XG4gICAgfVxuXG4gICAgaW5UZXh0UmVuZGVyZXJcbiAgICAgIC5zZXRUZXh0U2NhbGUoa190ZXh0U2NhbGUpXG4gICAgICAuc2V0VGV4dEFsaWduKCdsZWZ0JywgJ3RvcCcpXG4gICAgICAuc2V0VGV4dENvbG9yKDEuMCwgMS4wLCAwLjc1KVxuICAgICAgLnB1c2hUZXh0KGF2ZXJhZ2VTdHIsIFtpblBvc1swXSArIDcsIGluUG9zWzFdIC0gOF0pXG4gICAgICAuc2V0VGV4dEFsaWduKCdsZWZ0JywgJ2NlbnRlcmVkJylcbiAgICAgIC5zZXRUZXh0Q29sb3IoMS4wLCAwLjc1LCAwLjc1KVxuICAgICAgLnB1c2hUZXh0KG1heFN0ciwgW1xuICAgICAgICBpblBvc1swXSArIGluU2l6ZVswXSArIGtfdGV4dEhTY2FsZSxcbiAgICAgICAgaW5Qb3NbMV0gKyBpblNpemVbMV0gLSBrX3RleHRIU2NhbGUgKiAxXG4gICAgICBdKVxuICAgICAgLnNldFRleHRDb2xvcigwLjc1LCAxLjAsIDAuNzUpXG4gICAgICAucHVzaFRleHQobWluU3RyLCBbXG4gICAgICAgIGluUG9zWzBdICsgaW5TaXplWzBdICsga190ZXh0SFNjYWxlLFxuICAgICAgICBpblBvc1sxXSArIGtfdGV4dEhTY2FsZSAqIDFcbiAgICAgIF0pXG4gICAgICAuc2V0VGV4dENvbG9yKDEuMCwgMS4wLCAxLjApO1xuICB9IC8vIGNvdW50ZXJcbn07XG4iLAogICJleHBvcnQgY29uc3QgZ2V0SW1hZ2VGcm9tVXJsID0gKHVybDogc3RyaW5nKTogUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PiA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICBpbWFnZS5vbmVycm9yID0gcmVqZWN0O1xuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIHJlc29sdmUoaW1hZ2UpO1xuICAgIH07XG4gICAgaW1hZ2Uuc3JjID0gdXJsO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaEltYWdlQnVmZmVyID0gYXN5bmMgKFxuICB1cmw6IHN0cmluZyxcbiAgb25Qcm9ncmVzcz86IChyZWNlaXZlZDogbnVtYmVyLCB0b3RhbDogbnVtYmVyKSA9PiB2b2lkXG4pOiBQcm9taXNlPHsgYnVmZmVyOiBVaW50OEFycmF5OyB0eXBlOiBzdHJpbmcgfT4gPT4ge1xuICAvLyBTdGVwIDE6IHN0YXJ0IHRoZSBmZXRjaCBhbmQgb2J0YWluIGEgcmVhZGVyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keSEuZ2V0UmVhZGVyKCk7XG5cbiAgLy8gU3RlcCAyOiBnZXQgdG90YWwgbGVuZ3RoXG4gIGNvbnN0IGNvbnRlbnRMZW5ndGggPSArcmVzcG9uc2UuaGVhZGVycy5nZXQoJ0NvbnRlbnQtTGVuZ3RoJykhO1xuICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdDb250ZW50LVR5cGUnKSE7XG5cbiAgbGV0IGxhc3RQZXJjZW50ID0gMDtcblxuICAvLyBTdGVwIDM6IHJlYWQgdGhlIGRhdGFcbiAgbGV0IHJlY2VpdmVkTGVuZ3RoID0gMDsgLy8gcmVjZWl2ZWQgdGhhdCBtYW55IGJ5dGVzIGF0IHRoZSBtb21lbnRcbiAgbGV0IGNodW5rcyA9IFtdOyAvLyBhcnJheSBvZiByZWNlaXZlZCBiaW5hcnkgY2h1bmtzIChjb21wcmlzZXMgdGhlIGJvZHkpXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcblxuICAgIGlmIChkb25lKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjaHVua3MucHVzaCh2YWx1ZSk7XG4gICAgcmVjZWl2ZWRMZW5ndGggKz0gdmFsdWUubGVuZ3RoO1xuXG4gICAgaWYgKG9uUHJvZ3Jlc3MpIHtcbiAgICAgIC8vIGNvbnN0IGN1cnJlbnRQZXJjZW50ID0gTWF0aC5mbG9vcihyZWNlaXZlZExlbmd0aCAvIGNvbnRlbnRMZW5ndGggKiAxMDApO1xuICAgICAgLy8gaWYgKGxhc3RQZXJjZW50ICE9PSBjdXJyZW50UGVyY2VudCkge1xuICAgICAgLy8gICBsYXN0UGVyY2VudCA9IGN1cnJlbnRQZXJjZW50O1xuICAgICAgb25Qcm9ncmVzcyhyZWNlaXZlZExlbmd0aCwgY29udGVudExlbmd0aCk7XG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgLy8gY29uc29sZS5sb2coYFJlY2VpdmVkICR7cmVjZWl2ZWRMZW5ndGh9IG9mICR7Y29udGVudExlbmd0aH1gKTtcbiAgfVxuXG4gIC8vIFN0ZXAgNDogY29uY2F0ZW5hdGUgY2h1bmtzIGludG8gc2luZ2xlIFVpbnQ4QXJyYXlcbiAgY29uc3QgY2h1bmtzQWxsID0gbmV3IFVpbnQ4QXJyYXkocmVjZWl2ZWRMZW5ndGgpOyAvLyAoNC4xKVxuICBsZXQgcG9zaXRpb24gPSAwO1xuICBmb3IgKGxldCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICBjaHVua3NBbGwuc2V0KGNodW5rLCBwb3NpdGlvbik7IC8vICg0LjIpXG4gICAgcG9zaXRpb24gKz0gY2h1bmsubGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBidWZmZXI6IGNodW5rc0FsbCxcbiAgICB0eXBlOiBjb250ZW50VHlwZVxuICB9O1xuXG4gIC8vIC8vIFN0ZXAgNTogZGVjb2RlIGludG8gYSBzdHJpbmdcbiAgLy8gbGV0IHJlc3VsdCA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpLmRlY29kZShjaHVua3NBbGwpO1xuXG4gIC8vIC8vIFdlJ3JlIGRvbmUhXG4gIC8vIGxldCBjb21taXRzID0gSlNPTi5wYXJzZShyZXN1bHQpO1xuICAvLyBhbGVydChjb21taXRzWzBdLmF1dGhvci5sb2dpbik7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0SW1hZ2VGcm9tQnVmZmVyID0gYXN5bmMgKFxuICBidWZmZXI6IFVpbnQ4QXJyYXksXG4gIHR5cGU6IHN0cmluZ1xuKTogUHJvbWlzZTxIVE1MSW1hZ2VFbGVtZW50PiA9PiB7XG4gIC8vIGZldGNoSW1hZ2VCdWZmZXIoKTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIGltYWdlLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xuICAgICAgcmVzb2x2ZShpbWFnZSk7XG4gICAgfTtcbiAgICBpbWFnZS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtidWZmZXJdLCB7IHR5cGUgfSAvKiAoMSkgKi8pKTtcbiAgfSk7XG5cbiAgLy8gY29uc3QgdG1wSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgLy8gdG1wSW1hZ2Uuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChcbiAgLy8gICBuZXcgQmxvYihbYnVmZmVyXSwgeyB0eXBlIH0gLyogKDEpICovKVxuICAvLyApO1xuXG4gIC8vIHJldHVybiB0bXBJbWFnZTtcbn07XG5cbi8vIC8vIFNtYWxsIHJlZCBkb3QgaW1hZ2Vcbi8vIGNvbnN0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShbMTM3LCA4MCwgNzgsIDcxLCAxMywgMTAsIDI2LCAxMCwgMCwgMCwgMCwgMTMsIDczLCA3MiwgNjgsIDgyLCAwLCAwLCAwLCA1LCAwLCAwLCAwLCA1LCA4LCA2LCAwLCAwLCAwLCAxNDEsIDExMSwgMzgsIDIyOSwgMCwgMCwgMCwgMjgsIDczLCA2OCwgNjUsIDg0LCA4LCAyMTUsIDk5LCAyNDgsIDI1NSwgMjU1LCA2MywgMTk1LCAxMjcsIDYsIDMyLCA1LCAxOTUsIDMyLCAxOCwgMTMyLCAyMDgsIDQ5LCAyNDEsIDEzMCwgODgsIDIwNSwgNCwgMCwgMTQsIDI0NSwgNTMsIDIwMywgMjA5LCAxNDIsIDE0LCAzMSwgMCwgMCwgMCwgMCwgNzMsIDY5LCA3OCwgNjgsIDE3NCwgNjYsIDk2LCAxMzBdKTtcblxuLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LWltZycpLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoXG4vLyAgIG5ldyBCbG9iKFtjb250ZW50LmJ1ZmZlcl0sIHsgdHlwZTogJ2ltYWdlL3BuZycgfSAvKiAoMSkgKi8pXG4vLyApO1xuIiwKICAiaW1wb3J0IHsgSVZlcnRleCB9IGZyb20gJy4vSVZlcnRleCc7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG4vLyBleHBvcnQgaW50ZXJmYWNlIElWZXJ0ZXgge1xuLy8gICBwb3M6IGdsbS52ZWMzO1xuLy8gICBub3JtYWw6IGdsbS52ZWMzO1xuLy8gfVxuXG5leHBvcnQgY29uc3QgbWFrZUJveCA9IChpblNpemU6IGdsbS5SZWFkb25seVZlYzMpOiBJVmVydGV4W10gPT4ge1xuICBjb25zdCBoU2l6ZVggPSBpblNpemVbMF0gKiAwLjU7XG4gIGNvbnN0IGhTaXplWSA9IGluU2l6ZVsxXSAqIDAuNTtcbiAgY29uc3QgaFNpemVaID0gaW5TaXplWzJdICogMC41O1xuXG4gIGNvbnN0IGFsbE5vcm1hbHM6IGdsbS5SZWFkb25seVZlYzNbXSA9IFtdO1xuICBhbGxOb3JtYWxzLnB1c2goWy0xLCAwLCAwXSk7IC8vIDBcbiAgYWxsTm9ybWFscy5wdXNoKFsrMSwgMCwgMF0pOyAvLyAxXG4gIGFsbE5vcm1hbHMucHVzaChbMCwgLTEsIDBdKTsgLy8gMlxuICBhbGxOb3JtYWxzLnB1c2goWzAsICsxLCAwXSk7IC8vIDNcbiAgYWxsTm9ybWFscy5wdXNoKFswLCAwLCAtMV0pOyAvLyA0XG4gIGFsbE5vcm1hbHMucHVzaChbMCwgMCwgKzFdKTsgLy8gNVxuXG4gIGNvbnN0IGFsbFZlcnRpY2VzOiBnbG0uUmVhZG9ubHlWZWMzW10gPSBbXTtcbiAgYWxsVmVydGljZXMucHVzaChbLWhTaXplWCwgLWhTaXplWSwgLWhTaXplWl0pOyAvLyAwXG4gIGFsbFZlcnRpY2VzLnB1c2goWytoU2l6ZVgsIC1oU2l6ZVksIC1oU2l6ZVpdKTsgLy8gMVxuICBhbGxWZXJ0aWNlcy5wdXNoKFstaFNpemVYLCAraFNpemVZLCAtaFNpemVaXSk7IC8vIDJcbiAgYWxsVmVydGljZXMucHVzaChbK2hTaXplWCwgK2hTaXplWSwgLWhTaXplWl0pOyAvLyAzXG4gIGFsbFZlcnRpY2VzLnB1c2goWy1oU2l6ZVgsIC1oU2l6ZVksICtoU2l6ZVpdKTsgLy8gNFxuICBhbGxWZXJ0aWNlcy5wdXNoKFsraFNpemVYLCAtaFNpemVZLCAraFNpemVaXSk7IC8vIDVcbiAgYWxsVmVydGljZXMucHVzaChbLWhTaXplWCwgK2hTaXplWSwgK2hTaXplWl0pOyAvLyA2XG4gIGFsbFZlcnRpY2VzLnB1c2goWytoU2l6ZVgsICtoU2l6ZVksICtoU2l6ZVpdKTsgLy8gN1xuXG4gIC8vXG5cbiAgY29uc3QgYWxsSW5kaWNlczogZ2xtLlJlYWRvbmx5VmVjNFtdID0gW107XG5cbiAgLy8gLXogMDEyM1xuICBhbGxJbmRpY2VzLnB1c2goWzAsIDIsIDEsIC8qbm9ybWFsID0+ICovIDRdKTtcbiAgYWxsSW5kaWNlcy5wdXNoKFsyLCAzLCAxLCAvKm5vcm1hbCA9PiAqLyA0XSk7XG4gIC8vICt6IDQ1NjdcbiAgYWxsSW5kaWNlcy5wdXNoKFs0LCA1LCA2LCAvKm5vcm1hbCA9PiAqLyA1XSk7XG4gIGFsbEluZGljZXMucHVzaChbNiwgNSwgNywgLypub3JtYWwgPT4gKi8gNV0pO1xuXG4gIC8vICt4IDEzNTdcbiAgYWxsSW5kaWNlcy5wdXNoKFsxLCAzLCA1LCAvKm5vcm1hbCA9PiAqLyAxXSk7XG4gIGFsbEluZGljZXMucHVzaChbNSwgMywgNywgLypub3JtYWwgPT4gKi8gMV0pO1xuICAvLyAteCAwMjQ2XG4gIGFsbEluZGljZXMucHVzaChbMCwgNCwgMiwgLypub3JtYWwgPT4gKi8gMF0pO1xuICBhbGxJbmRpY2VzLnB1c2goWzQsIDYsIDIsIC8qbm9ybWFsID0+ICovIDBdKTtcblxuICAvLyAreSAyMzY3XG4gIGFsbEluZGljZXMucHVzaChbMiwgNiwgMywgLypub3JtYWwgPT4gKi8gM10pO1xuICBhbGxJbmRpY2VzLnB1c2goWzYsIDcsIDMsIC8qbm9ybWFsID0+ICovIDNdKTtcbiAgLy8gLXkgMDE0NVxuICBhbGxJbmRpY2VzLnB1c2goWzAsIDEsIDQsIC8qbm9ybWFsID0+ICovIDJdKTtcbiAgYWxsSW5kaWNlcy5wdXNoKFs0LCAxLCA1LCAvKm5vcm1hbCA9PiAqLyAyXSk7XG5cbiAgLy8gY29uc3QgZmluYWxWZXJ0aWNlczogbnVtYmVyW10gPSBbXTtcbiAgY29uc3QgdmVydGljZXM6IElWZXJ0ZXhbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgaW5kZXggb2YgYWxsSW5kaWNlcykge1xuICAgIHZlcnRpY2VzLnB1c2goe1xuICAgICAgcG9zOiBnbG0udmVjMy5jb3B5KFswLCAwLCAwXSwgYWxsVmVydGljZXNbaW5kZXhbMF1dKSxcbiAgICAgIG5vcm1hbDogZ2xtLnZlYzMuY29weShbMCwgMCwgMF0sIGFsbE5vcm1hbHNbaW5kZXhbM11dKVxuICAgIH0pO1xuICAgIHZlcnRpY2VzLnB1c2goe1xuICAgICAgcG9zOiBnbG0udmVjMy5jb3B5KFswLCAwLCAwXSwgYWxsVmVydGljZXNbaW5kZXhbMV1dKSxcbiAgICAgIG5vcm1hbDogZ2xtLnZlYzMuY29weShbMCwgMCwgMF0sIGFsbE5vcm1hbHNbaW5kZXhbM11dKVxuICAgIH0pO1xuICAgIHZlcnRpY2VzLnB1c2goe1xuICAgICAgcG9zOiBnbG0udmVjMy5jb3B5KFswLCAwLCAwXSwgYWxsVmVydGljZXNbaW5kZXhbMl1dKSxcbiAgICAgIG5vcm1hbDogZ2xtLnZlYzMuY29weShbMCwgMCwgMF0sIGFsbE5vcm1hbHNbaW5kZXhbM11dKVxuICAgIH0pO1xuXG4gICAgLy8gZmluYWxWZXJ0aWNlcy5wdXNoKGFsbFZlcnRpY2VzW2luZGV4WzBdXVswXSk7XG4gICAgLy8gZmluYWxWZXJ0aWNlcy5wdXNoKGFsbFZlcnRpY2VzW2luZGV4WzBdXVsxXSk7XG4gICAgLy8gZmluYWxWZXJ0aWNlcy5wdXNoKGFsbFZlcnRpY2VzW2luZGV4WzBdXVsyXSk7XG5cbiAgICAvLyBpZiAoaW5BZGROb3JtYWxzKSB7XG4gICAgLy8gICBmaW5hbFZlcnRpY2VzLnB1c2goYWxsTm9ybWFsc1tpbmRleFszXV1bMF0pO1xuICAgIC8vICAgZmluYWxWZXJ0aWNlcy5wdXNoKGFsbE5vcm1hbHNbaW5kZXhbM11dWzFdKTtcbiAgICAvLyAgIGZpbmFsVmVydGljZXMucHVzaChhbGxOb3JtYWxzW2luZGV4WzNdXVsyXSk7XG4gICAgLy8gfVxuXG4gICAgLy8gZmluYWxWZXJ0aWNlcy5wdXNoKGFsbFZlcnRpY2VzW2luZGV4WzFdXVswXSk7XG4gICAgLy8gZmluYWxWZXJ0aWNlcy5wdXNoKGFsbFZlcnRpY2VzW2luZGV4WzFdXVsxXSk7XG4gICAgLy8gZmluYWxWZXJ0aWNlcy5wdXNoKGFsbFZlcnRpY2VzW2luZGV4WzFdXVsyXSk7XG5cbiAgICAvLyBpZiAoaW5BZGROb3JtYWxzKSB7XG4gICAgLy8gICBmaW5hbFZlcnRpY2VzLnB1c2goYWxsTm9ybWFsc1tpbmRleFszXV1bMF0pO1xuICAgIC8vICAgZmluYWxWZXJ0aWNlcy5wdXNoKGFsbE5vcm1hbHNbaW5kZXhbM11dWzFdKTtcbiAgICAvLyAgIGZpbmFsVmVydGljZXMucHVzaChhbGxOb3JtYWxzW2luZGV4WzNdXVsyXSk7XG4gICAgLy8gfVxuXG4gICAgLy8gZmluYWxWZXJ0aWNlcy5wdXNoKGFsbFZlcnRpY2VzW2luZGV4WzJdXVswXSk7XG4gICAgLy8gZmluYWxWZXJ0aWNlcy5wdXNoKGFsbFZlcnRpY2VzW2luZGV4WzJdXVsxXSk7XG4gICAgLy8gZmluYWxWZXJ0aWNlcy5wdXNoKGFsbFZlcnRpY2VzW2luZGV4WzJdXVsyXSk7XG5cbiAgICAvLyBpZiAoaW5BZGROb3JtYWxzKSB7XG4gICAgLy8gICBmaW5hbFZlcnRpY2VzLnB1c2goYWxsTm9ybWFsc1tpbmRleFszXV1bMF0pO1xuICAgIC8vICAgZmluYWxWZXJ0aWNlcy5wdXNoKGFsbE5vcm1hbHNbaW5kZXhbM11dWzFdKTtcbiAgICAvLyAgIGZpbmFsVmVydGljZXMucHVzaChhbGxOb3JtYWxzW2luZGV4WzNdXVsyXSk7XG4gICAgLy8gfVxuICB9XG5cbiAgcmV0dXJuIHZlcnRpY2VzO1xufTtcbiIsCiAgImltcG9ydCB7IElWZXJ0ZXggfSBmcm9tICcuL0lWZXJ0ZXgnO1xuXG5pbXBvcnQgKiBhcyBnbG0gZnJvbSAnZ2wtbWF0cml4JztcblxuLy8gZXhwb3J0IGludGVyZmFjZSBJVmVydGV4IHtcbi8vICAgcG9zOiBnbG0udmVjMztcbi8vICAgbm9ybWFsOiBnbG0udmVjMztcbi8vIH1cblxuY29uc3QgX2RyYXdTcGhlcmVQYXRjaCA9IChcbiAgdmVydGljZXM6IElWZXJ0ZXhbXSxcbiAgcXVhbGl0eTogbnVtYmVyLFxuICByYWRpdXM6IG51bWJlcixcbiAgdjAxOiBnbG0uUmVhZG9ubHlWZWMzLFxuICB2MDI6IGdsbS5SZWFkb25seVZlYzMsXG4gIHYwMzogZ2xtLlJlYWRvbmx5VmVjM1xuKSA9PiB7XG4gIGlmIChxdWFsaXR5IDw9IDApIHtcbiAgICAvLyBoYWNrOiBwb3NpdGlvbiA9IG5vcm1hbFxuICAgIHZlcnRpY2VzLnB1c2goe1xuICAgICAgcG9zOiBnbG0udmVjMy5zY2FsZShnbG0udmVjMy5jcmVhdGUoKSwgdjAxLCByYWRpdXMpLFxuICAgICAgbm9ybWFsOiBnbG0udmVjMy5jb3B5KGdsbS52ZWMzLmNyZWF0ZSgpLCB2MDEpXG4gICAgfSk7XG4gICAgdmVydGljZXMucHVzaCh7XG4gICAgICBwb3M6IGdsbS52ZWMzLnNjYWxlKGdsbS52ZWMzLmNyZWF0ZSgpLCB2MDMsIHJhZGl1cyksXG4gICAgICBub3JtYWw6IGdsbS52ZWMzLmNvcHkoZ2xtLnZlYzMuY3JlYXRlKCksIHYwMylcbiAgICB9KTtcbiAgICB2ZXJ0aWNlcy5wdXNoKHtcbiAgICAgIHBvczogZ2xtLnZlYzMuc2NhbGUoZ2xtLnZlYzMuY3JlYXRlKCksIHYwMiwgcmFkaXVzKSxcbiAgICAgIG5vcm1hbDogZ2xtLnZlYzMuY29weShnbG0udmVjMy5jcmVhdGUoKSwgdjAyKVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHYxMiA9IGdsbS52ZWMzLm5vcm1hbGl6ZShcbiAgICAgIGdsbS52ZWMzLmNyZWF0ZSgpLFxuICAgICAgZ2xtLnZlYzMubGVycChnbG0udmVjMy5jcmVhdGUoKSwgdjAxLCB2MDIsIDAuNSlcbiAgICApO1xuICAgIGNvbnN0IHYyMyA9IGdsbS52ZWMzLm5vcm1hbGl6ZShcbiAgICAgIGdsbS52ZWMzLmNyZWF0ZSgpLFxuICAgICAgZ2xtLnZlYzMubGVycChnbG0udmVjMy5jcmVhdGUoKSwgdjAyLCB2MDMsIDAuNSlcbiAgICApO1xuICAgIGNvbnN0IHYzMSA9IGdsbS52ZWMzLm5vcm1hbGl6ZShcbiAgICAgIGdsbS52ZWMzLmNyZWF0ZSgpLFxuICAgICAgZ2xtLnZlYzMubGVycChnbG0udmVjMy5jcmVhdGUoKSwgdjAzLCB2MDEsIDAuNSlcbiAgICApO1xuXG4gICAgcXVhbGl0eSAtPSAxO1xuXG4gICAgX2RyYXdTcGhlcmVQYXRjaCh2ZXJ0aWNlcywgcXVhbGl0eSwgcmFkaXVzLCB2MDEsIHYxMiwgdjMxKTtcbiAgICBfZHJhd1NwaGVyZVBhdGNoKHZlcnRpY2VzLCBxdWFsaXR5LCByYWRpdXMsIHYxMiwgdjAyLCB2MjMpO1xuICAgIF9kcmF3U3BoZXJlUGF0Y2godmVydGljZXMsIHF1YWxpdHksIHJhZGl1cywgdjMxLCB2MjMsIHYwMyk7XG4gICAgX2RyYXdTcGhlcmVQYXRjaCh2ZXJ0aWNlcywgcXVhbGl0eSwgcmFkaXVzLCB2MTIsIHYyMywgdjMxKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IG1ha2VTcGhlcmUgPSAoXG4gIHF1YWxpdHk6IG51bWJlcixcbiAgcmFkaXVzOiBudW1iZXJcbiAgLy8gbW9kZWxNYXQ0OiBnbG0uUmVhZG9ubHlNYXQ0XG4pOiBJVmVydGV4W10gPT4ge1xuICBjb25zdCBrX2ljeCA9IDAuNTI1NzMxMTEyMTE5MTMzNjA2O1xuICBjb25zdCBrX2ljeiA9IDAuODUwNjUwODA4MzUyMDM5OTMyO1xuXG4gIGNvbnN0IHRtcFZlcnRpY2VzOiBnbG0uUmVhZG9ubHlWZWMzW10gPSBbXG4gICAgWy1rX2ljeCwgMC4wLCAra19pY3pdLFxuICAgIFsra19pY3gsIDAuMCwgK2tfaWN6XSxcbiAgICBbLWtfaWN4LCAwLjAsIC1rX2ljel0sXG4gICAgWytrX2ljeCwgMC4wLCAta19pY3pdLFxuICAgIFswLjAsICtrX2ljeiwgK2tfaWN4XSxcbiAgICBbMC4wLCAra19pY3osIC1rX2ljeF0sXG4gICAgWzAuMCwgLWtfaWN6LCAra19pY3hdLFxuICAgIFswLjAsIC1rX2ljeiwgLWtfaWN4XSxcbiAgICBbK2tfaWN6LCAra19pY3gsIDAuMF0sXG4gICAgWy1rX2ljeiwgK2tfaWN4LCAwLjBdLFxuICAgIFsra19pY3osIC1rX2ljeCwgMC4wXSxcbiAgICBbLWtfaWN6LCAta19pY3gsIDAuMF1cbiAgXTtcblxuICBjb25zdCB0bXBJbmRpY2VzOiBnbG0uUmVhZG9ubHlWZWMzW10gPSBbXG4gICAgWzAsIDQsIDFdLFxuICAgIFswLCA5LCA0XSxcbiAgICBbOSwgNSwgNF0sXG4gICAgWzQsIDUsIDhdLFxuICAgIFs0LCA4LCAxXSxcbiAgICBbOCwgMTAsIDFdLFxuICAgIFs4LCAzLCAxMF0sXG4gICAgWzUsIDMsIDhdLFxuICAgIFs1LCAyLCAzXSxcbiAgICBbMiwgNywgM10sXG4gICAgWzcsIDEwLCAzXSxcbiAgICBbNywgNiwgMTBdLFxuICAgIFs3LCAxMSwgNl0sXG4gICAgWzExLCAwLCA2XSxcbiAgICBbMCwgMSwgNl0sXG4gICAgWzYsIDEsIDEwXSxcbiAgICBbOSwgMCwgMTFdLFxuICAgIFs5LCAxMSwgMl0sXG4gICAgWzksIDIsIDVdLFxuICAgIFs3LCAyLCAxMV1cbiAgXTtcblxuICBjb25zdCB2ZXJ0aWNlczogSVZlcnRleFtdID0gW107XG5cbiAgZm9yIChjb25zdCBpbmRleCBvZiB0bXBJbmRpY2VzKSB7XG4gICAgX2RyYXdTcGhlcmVQYXRjaChcbiAgICAgIHZlcnRpY2VzLFxuICAgICAgcXVhbGl0eSxcbiAgICAgIHJhZGl1cyxcbiAgICAgIHRtcFZlcnRpY2VzW2luZGV4WzBdXSxcbiAgICAgIHRtcFZlcnRpY2VzW2luZGV4WzFdXSxcbiAgICAgIHRtcFZlcnRpY2VzW2luZGV4WzJdXVxuICAgICk7XG4gIH1cblxuICAvLyBjb25zdCBuZXdQb3MgPSBnbG0udmVjMy5jcmVhdGUoKTtcbiAgLy8gLy8gY29uc3QgbmV3Tm9ybSA9IGdsbS52ZWMzLmNyZWF0ZSgpO1xuICAvLyAvLyBjb25zdCBtb2RlbE1hdDMgPSBnbG0ubWF0My5mcm9tTWF0NChnbG0ubWF0My5jcmVhdGUoKSwgbW9kZWxNYXQ0KTtcblxuICAvLyBmb3IgKGNvbnN0IHZlcnRleCBvZiB2ZXJ0aWNlcykge1xuICAvLyAgIGdsbS52ZWMzLnRyYW5zZm9ybU1hdDQobmV3UG9zLCB2ZXJ0ZXgucG9zLCBtb2RlbE1hdDQpO1xuICAvLyAgIGdsbS52ZWMzLmNvcHkodmVydGV4LnBvcywgbmV3UG9zKTtcbiAgLy8gfVxuXG4gIHJldHVybiB2ZXJ0aWNlcztcblxuICAvLyByZXR1cm4gdmVydGljZXMubWFwKCh2ZXJ0ZXgpID0+IHtcblxuICAvLyAgIGdsbS52ZWMzLnRyYW5zZm9ybU1hdDQobmV3UG9zLCB2ZXJ0ZXgucG9zLCBtb2RlbE1hdDQpO1xuICAvLyAgIC8vIGdsbS52ZWMzLnRyYW5zZm9ybU1hdDMobmV3Tm9ybSwgdmVydGV4Lm5vcm1hbCwgbW9kZWxNYXQzKTtcblxuICAvLyAgIHJldHVybiB7XG4gIC8vICAgICBwb3M6IGdsbS52ZWMzLmNvcHkoZ2xtLnZlYzMuY3JlYXRlKCksIG5ld1BvcyksXG4gIC8vICAgfVxuICAvLyAgIC8vICAgbmV3UG9zWzBdLFxuICAvLyAgIC8vICAgbmV3UG9zWzFdLFxuICAvLyAgIC8vICAgbmV3UG9zWzJdLFxuICAvLyAgIC8vICAgdmVydGV4Lm5vcm1hbFswXSxcbiAgLy8gICAvLyAgIHZlcnRleC5ub3JtYWxbMV0sXG4gIC8vICAgLy8gICB2ZXJ0ZXgubm9ybWFsWzJdXG4gIC8vICAgLy8gXTtcbiAgLy8gfSlcbiAgLy8gICAvLyAuZmxhdCgpO1xufTtcbiIsCiAgImV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICBwcml2YXRlIF90ZXh0QXJlYUVsZW1lbnQ6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBfbGluZXM6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgX21heExpbmVzID0gMzA7XG5cbiAgY29uc3RydWN0b3IodGV4dEFyZWFFbGVtZW50SWQ6IHN0cmluZykge1xuICAgIHRoaXMuX3RleHRBcmVhRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgdGV4dEFyZWFFbGVtZW50SWRcbiAgICApIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG5cbiAgICBpZiAoIXRoaXMuX3RleHRBcmVhRWxlbWVudClcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRE9NIGVsZW1lbnRzIG5vdCBmb3VuZCwgaWQ9JHt0ZXh0QXJlYUVsZW1lbnRJZH1gKTtcblxuICAgIHRoaXMuX3RleHRBcmVhRWxlbWVudC52YWx1ZSA9ICcnOyAvLyA8PSBjbGVhciBhbnkgYnJvd3NlciBjYWNoZVxuICB9XG5cbiAgbG9nKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncykuam9pbignICcpO1xuXG4gICAgY29uc29sZS5sb2codGV4dCk7XG5cbiAgICB0aGlzLl9wdXNoVGV4dCh0ZXh0KTtcbiAgfVxuXG4gIGVycm9yKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncykuam9pbignICcpO1xuXG4gICAgY29uc29sZS5lcnJvcih0ZXh0KTtcblxuICAgIHRoaXMuX3B1c2hUZXh0KGBbRVJSXSAtICR7dGV4dH1gKTtcbiAgfVxuXG4gIF9wdXNoVGV4dCh0ZXh0OiBzdHJpbmcpIHtcbiAgICB0aGlzLl9saW5lcy5wdXNoKHRleHQpO1xuICAgIGlmICh0aGlzLl9saW5lcy5sZW5ndGggPiB0aGlzLl9tYXhMaW5lcylcbiAgICAgIHRoaXMuX2xpbmVzLnNwbGljZSgwLCB0aGlzLl9saW5lcy5sZW5ndGggLSB0aGlzLl9tYXhMaW5lcyk7XG5cbiAgICB0aGlzLl90ZXh0QXJlYUVsZW1lbnQudmFsdWUgPSBgJHt0aGlzLl9saW5lcy5qb2luKCdcXG4nKX1cXG5gO1xuXG4gICAgLy8gZm9yY2UgZm9jdXMgb24gbGFzdCBsaW5lXG4gICAgdGhpcy5fdGV4dEFyZWFFbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuX3RleHRBcmVhRWxlbWVudC5zY3JvbGxIZWlnaHQ7XG4gIH1cblxuICBwZWVrTGFzdCgpIHtcbiAgICBpZiAodGhpcy5fbGluZXMubGVuZ3RoID4gMCkgcmV0dXJuIHRoaXMuX2xpbmVzW3RoaXMuX2xpbmVzLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBwb3BMYXN0KCkge1xuICAgIGlmICh0aGlzLl9saW5lcy5sZW5ndGggPiAwKSB0aGlzLl9saW5lcy5zcGxpY2UodGhpcy5fbGluZXMubGVuZ3RoIC0gMSwgMSk7XG4gIH1cbn1cbiIsCiAgIid1c2Ugc3RyaWN0JztcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cclxuXHJcblxyXG5mdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG50eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcclxuICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxufTtcblxuY29uc3Qgc2NyaXB0TG9hZGluZ1V0aWxpdHkgPSAoaW5TcmMpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgc2NyaXB0RWxlbWVudC5zcmMgPSBpblNyYztcbiAgICAgICAgLy8gc2NyaXB0RWxlbWVudC5vbnByb2dyZXNzID0gKGV2ZW50KSA9PiBsb2dnZXIubG9nKFwiZXZlbnRcIiwgZXZlbnQpO1xuICAgICAgICBzY3JpcHRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCByZXNvbHZlKTtcbiAgICAgICAgc2NyaXB0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gICAgfSk7XG59O1xuXG5jbGFzcyBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlIHtcbiAgICBzdGF0aWMgbG9hZChvcHRzKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlLmxvYWRKc1BhcnQob3B0cy5qc1VybCk7XG4gICAgICAgICAgICB5aWVsZCBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlLmxvYWRXYXNtUGFydChvcHRzLndhc21VcmwpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxvYWRKc1BhcnQodXJsKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCBzY3JpcHRMb2FkaW5nVXRpbGl0eSh1cmwpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxvYWRXYXNtUGFydCh1cmxQcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUuX3dhc21Nb2R1bGUgPSB5aWVsZCBGcmFua2VuUGh5c0xvYWRlcih7XG4gICAgICAgICAgICAgICAgbG9jYXRlRmlsZTogKHVybCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7dXJsUHJlZml4fS8ke3VybH1gO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gVE9UQUxfTUVNT1JZOiAxICogMTAyNFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0KCkge1xuICAgICAgICBpZiAoIXRoaXMuX3dhc21Nb2R1bGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZyYW5rZW5QaHlzIHdhc20gbW9kdWxlIG5vdCBsb2FkZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3dhc21Nb2R1bGU7XG4gICAgfVxufVxuXG5jbGFzcyBDb250YWN0RXZlbnRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzTWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvLyBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyB9XG4gICAgaXNFdmVudExpc3RlbmVkVG8odHlwZSkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNNYXAuZ2V0KHR5cGUpO1xuICAgICAgICByZXR1cm4gKCEhbGlzdGVuZXJzICYmIGxpc3RlbmVycy5sZW5ndGggPiAwKTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICAvLyBpZiAoIXRoaXMuaXNFdmVudEFsbG93ZWQodHlwZSkpXG4gICAgICAgIC8vIFx0cmV0dXJuIEVycm9ySGFuZGxlci5yZXBvcnRFcnJvcihgZXZlbnQgdHlwZSBub3QgaW4gdGhlIHdoaXRlIGxpc3QsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICBsZXQgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzTWFwLmdldCh0eXBlKTtcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzTWFwLnNldCh0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRpcnR5IGNhc3RcbiAgICAgICAgaWYgKGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIHJldHVybiBFcnJvckhhbmRsZXIucmVwb3J0RXJyb3IoYGR1cGxpY2F0ZSBldmVudCBsaXN0ZW5lciwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGR1cGxpY2F0ZWQgZXZlbnQgbGlzdGVuZXIsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRpcnR5IGNhc3RcbiAgICAgICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICBoYXNFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIC8vIGlmICghdGhpcy5pc0V2ZW50QWxsb3dlZCh0eXBlKSlcbiAgICAgICAgLy8gXHRyZXR1cm4gRXJyb3JIYW5kbGVyLnJlcG9ydEVycm9yKGBldmVudCB0eXBlIG5vdCBpbiB0aGUgd2hpdGUgbGlzdCwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc01hcC5nZXQodHlwZSk7XG4gICAgICAgIC8vIGRpcnR5IGNhc3RcbiAgICAgICAgcmV0dXJuIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgIT09IC0xKTtcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICAvLyBpZiAoIXRoaXMuaXNFdmVudEFsbG93ZWQodHlwZSkpXG4gICAgICAgIC8vIFx0cmV0dXJuIEVycm9ySGFuZGxlci5yZXBvcnRFcnJvcihgZXZlbnQgdHlwZSBub3QgaW4gdGhlIHdoaXRlIGxpc3QsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNNYXAuZ2V0KHR5cGUpO1xuICAgICAgICBpZiAobGlzdGVuZXJzID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gZXZlbnQgbGlzdGVuZXIsIHR5cGU9JHt0eXBlfWApO1xuICAgICAgICAgICAgLy8gcmV0dXJuIEVycm9ySGFuZGxlci5yZXBvcnRFcnJvcihgdW5rbm93biBldmVudCBsaXN0ZW5lciwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgLy8gaWYgKCF0aGlzLmlzRXZlbnRBbGxvd2VkKGV2ZW50LnR5cGUpKVxuICAgICAgICAvLyBcdHJldHVybiBFcnJvckhhbmRsZXIucmVwb3J0RXJyb3IoYGV2ZW50IHR5cGUgbm90IGluIHRoZSB3aGl0ZSBsaXN0LCB0eXBlPSR7ZXZlbnQudHlwZX1gKTtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzTWFwLmdldChldmVudC50eXBlKTtcbiAgICAgICAgaWYgKGxpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXZlbnQudGFyZ2V0ID0gdGhpcztcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzQ29weSA9IGxpc3RlbmVycy5zbGljZSgwKTtcbiAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGxpc3RlbmVyc0NvcHkubGVuZ3RoOyArK2lpKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNDb3B5W2lpXS5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgV2FzbU1vZHVsZUhvbGRlciB7XG4gICAgc3RhdGljIHNldCh3YXNtTW9kdWxlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBXYXNtTW9kdWxlSG9sZGVyLl93YXNtTW9kdWxlID0gd2FzbU1vZHVsZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5fd2FzbU1vZHVsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnJhbmtlblBoeXMgd2FzbSBtb2R1bGUgbm90IGxvYWRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fd2FzbU1vZHVsZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tbW9uIHV0aWxpdGllc1xuICogQG1vZHVsZSBnbE1hdHJpeFxuICovXG4vLyBDb25maWd1cmF0aW9uIENvbnN0YW50c1xudmFyIEVQU0lMT04gPSAwLjAwMDAwMTtcbnZhciBBUlJBWV9UWVBFID0gdHlwZW9mIEZsb2F0MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBGbG9hdDMyQXJyYXkgOiBBcnJheTtcbmlmICghTWF0aC5oeXBvdCkgTWF0aC5oeXBvdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHkgPSAwLFxuICAgICAgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIHkgKz0gYXJndW1lbnRzW2ldICogYXJndW1lbnRzW2ldO1xuICB9XG5cbiAgcmV0dXJuIE1hdGguc3FydCh5KTtcbn07XG5cbi8qKlxuICogM3gzIE1hdHJpeFxuICogQG1vZHVsZSBtYXQzXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDNcbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gYSBuZXcgM3gzIG1hdHJpeFxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZSQ0KCkge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoOSk7XG5cbiAgaWYgKEFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzVdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gIH1cblxuICBvdXRbMF0gPSAxO1xuICBvdXRbNF0gPSAxO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuXG4vKipcbiAqIDMgRGltZW5zaW9uYWwgVmVjdG9yXG4gKiBAbW9kdWxlIHZlYzNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzNcbiAqXG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlJDMoKSB7XG4gIHZhciBvdXQgPSBuZXcgQVJSQVlfVFlQRSgzKTtcblxuICBpZiAoQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xuXG5mdW5jdGlvbiBsZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWMzIGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBmcm9tVmFsdWVzJDEoeCwgeSwgeikge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoMyk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSQyKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgbGVuID0geCAqIHggKyB5ICogeSArIHogKiB6O1xuXG4gIGlmIChsZW4gPiAwKSB7XG4gICAgLy9UT0RPOiBldmFsdWF0ZSB1c2Ugb2YgZ2xtX2ludnNxcnQgaGVyZT9cbiAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gIH1cblxuICBvdXRbMF0gPSBhWzBdICogbGVuO1xuICBvdXRbMV0gPSBhWzFdICogbGVuO1xuICBvdXRbMl0gPSBhWzJdICogbGVuO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICovXG5cbmZ1bmN0aW9uIGRvdChhLCBiKSB7XG4gIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdICsgYVsyXSAqIGJbMl07XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG5cbmZ1bmN0aW9uIGNyb3NzKG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdO1xuICBvdXRbMF0gPSBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXogKiBieCAtIGF4ICogYno7XG4gIG91dFsyXSA9IGF4ICogYnkgLSBheSAqIGJ4O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cblxudmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzNzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzMuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWMzcyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlJDMoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSAzO1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgdmVjWzJdID0gYVtpICsgMl07XG4gICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgIGFbaV0gPSB2ZWNbMF07XG4gICAgICBhW2kgKyAxXSA9IHZlY1sxXTtcbiAgICAgIGFbaSArIDJdID0gdmVjWzJdO1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9O1xufSkoKTtcblxuLyoqXG4gKiA0IERpbWVuc2lvbmFsIFZlY3RvclxuICogQG1vZHVsZSB2ZWM0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3LCBlbXB0eSB2ZWM0XG4gKlxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZSQyKCkge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKEFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjNCBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG5cbmZ1bmN0aW9uIGZyb21WYWx1ZXMoeCwgeSwgeiwgdykge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoNCk7XG4gIG91dFswXSA9IHg7XG4gIG91dFsxXSA9IHk7XG4gIG91dFsyXSA9IHo7XG4gIG91dFszXSA9IHc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSQxKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHZhciBsZW4gPSB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcblxuICBpZiAobGVuID4gMCkge1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IHggKiBsZW47XG4gIG91dFsxXSA9IHkgKiBsZW47XG4gIG91dFsyXSA9IHogKiBsZW47XG4gIG91dFszXSA9IHcgKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWM0cy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWM0LiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjNHMgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZlYyA9IGNyZWF0ZSQyKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgdmFyIGksIGw7XG5cbiAgICBpZiAoIXN0cmlkZSkge1xuICAgICAgc3RyaWRlID0gNDtcbiAgICB9XG5cbiAgICBpZiAoIW9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoY291bnQpIHtcbiAgICAgIGwgPSBNYXRoLm1pbihjb3VudCAqIHN0cmlkZSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsID0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZlY1swXSA9IGFbaV07XG4gICAgICB2ZWNbMV0gPSBhW2kgKyAxXTtcbiAgICAgIHZlY1syXSA9IGFbaSArIDJdO1xuICAgICAgdmVjWzNdID0gYVtpICsgM107XG4gICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgIGFbaV0gPSB2ZWNbMF07XG4gICAgICBhW2kgKyAxXSA9IHZlY1sxXTtcbiAgICAgIGFbaSArIDJdID0gdmVjWzJdO1xuICAgICAgYVtpICsgM10gPSB2ZWNbM107XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KSgpO1xuXG4vKipcbiAqIFF1YXRlcm5pb25cbiAqIEBtb2R1bGUgcXVhdFxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBxdWF0XG4gKlxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGUkMSgpIHtcbiAgdmFyIG91dCA9IG5ldyBBUlJBWV9UWVBFKDQpO1xuXG4gIGlmIChBUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICB9XG5cbiAgb3V0WzNdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogU2V0cyBhIHF1YXQgZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYW5kIHJvdGF0aW9uIGF4aXMsXG4gKiB0aGVuIHJldHVybnMgaXQuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyBhcm91bmQgd2hpY2ggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiovXG5cbmZ1bmN0aW9uIHNldEF4aXNBbmdsZShvdXQsIGF4aXMsIHJhZCkge1xuICByYWQgPSByYWQgKiAwLjU7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgb3V0WzBdID0gcyAqIGF4aXNbMF07XG4gIG91dFsxXSA9IHMgKiBheGlzWzFdO1xuICBvdXRbMl0gPSBzICogYXhpc1syXTtcbiAgb3V0WzNdID0gTWF0aC5jb3MocmFkKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbmZ1bmN0aW9uIHNsZXJwKG91dCwgYSwgYiwgdCkge1xuICAvLyBiZW5jaG1hcmtzOlxuICAvLyAgICBodHRwOi8vanNwZXJmLmNvbS9xdWF0ZXJuaW9uLXNsZXJwLWltcGxlbWVudGF0aW9uc1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdLFxuICAgICAgYncgPSBiWzNdO1xuICB2YXIgb21lZ2EsIGNvc29tLCBzaW5vbSwgc2NhbGUwLCBzY2FsZTE7IC8vIGNhbGMgY29zaW5lXG5cbiAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSlcblxuICBpZiAoY29zb20gPCAwLjApIHtcbiAgICBjb3NvbSA9IC1jb3NvbTtcbiAgICBieCA9IC1ieDtcbiAgICBieSA9IC1ieTtcbiAgICBieiA9IC1iejtcbiAgICBidyA9IC1idztcbiAgfSAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzXG5cblxuICBpZiAoMS4wIC0gY29zb20gPiBFUFNJTE9OKSB7XG4gICAgLy8gc3RhbmRhcmQgY2FzZSAoc2xlcnApXG4gICAgb21lZ2EgPSBNYXRoLmFjb3MoY29zb20pO1xuICAgIHNpbm9tID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgIHNjYWxlMCA9IE1hdGguc2luKCgxLjAgLSB0KSAqIG9tZWdhKSAvIHNpbm9tO1xuICAgIHNjYWxlMSA9IE1hdGguc2luKHQgKiBvbWVnYSkgLyBzaW5vbTtcbiAgfSBlbHNlIHtcbiAgICAvLyBcImZyb21cIiBhbmQgXCJ0b1wiIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlXG4gICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvblxuICAgIHNjYWxlMCA9IDEuMCAtIHQ7XG4gICAgc2NhbGUxID0gdDtcbiAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzXG5cblxuICBvdXRbMF0gPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4O1xuICBvdXRbMV0gPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICBvdXRbMl0gPSBzY2FsZTAgKiBheiArIHNjYWxlMSAqIGJ6O1xuICBvdXRbM10gPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcXVhdGVybmlvbiBmcm9tIHRoZSBnaXZlbiAzeDMgcm90YXRpb24gbWF0cml4LlxuICpcbiAqIE5PVEU6IFRoZSByZXN1bHRhbnQgcXVhdGVybmlvbiBpcyBub3Qgbm9ybWFsaXplZCwgc28geW91IHNob3VsZCBiZSBzdXJlXG4gKiB0byByZW5vcm1hbGl6ZSB0aGUgcXVhdGVybmlvbiB5b3Vyc2VsZiB3aGVyZSBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gbSByb3RhdGlvbiBtYXRyaXhcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbmZ1bmN0aW9uIGZyb21NYXQzKG91dCwgbSkge1xuICAvLyBBbGdvcml0aG0gaW4gS2VuIFNob2VtYWtlJ3MgYXJ0aWNsZSBpbiAxOTg3IFNJR0dSQVBIIGNvdXJzZSBub3Rlc1xuICAvLyBhcnRpY2xlIFwiUXVhdGVybmlvbiBDYWxjdWx1cyBhbmQgRmFzdCBBbmltYXRpb25cIi5cbiAgdmFyIGZUcmFjZSA9IG1bMF0gKyBtWzRdICsgbVs4XTtcbiAgdmFyIGZSb290O1xuXG4gIGlmIChmVHJhY2UgPiAwLjApIHtcbiAgICAvLyB8d3wgPiAxLzIsIG1heSBhcyB3ZWxsIGNob29zZSB3ID4gMS8yXG4gICAgZlJvb3QgPSBNYXRoLnNxcnQoZlRyYWNlICsgMS4wKTsgLy8gMndcblxuICAgIG91dFszXSA9IDAuNSAqIGZSb290O1xuICAgIGZSb290ID0gMC41IC8gZlJvb3Q7IC8vIDEvKDR3KVxuXG4gICAgb3V0WzBdID0gKG1bNV0gLSBtWzddKSAqIGZSb290O1xuICAgIG91dFsxXSA9IChtWzZdIC0gbVsyXSkgKiBmUm9vdDtcbiAgICBvdXRbMl0gPSAobVsxXSAtIG1bM10pICogZlJvb3Q7XG4gIH0gZWxzZSB7XG4gICAgLy8gfHd8IDw9IDEvMlxuICAgIHZhciBpID0gMDtcbiAgICBpZiAobVs0XSA+IG1bMF0pIGkgPSAxO1xuICAgIGlmIChtWzhdID4gbVtpICogMyArIGldKSBpID0gMjtcbiAgICB2YXIgaiA9IChpICsgMSkgJSAzO1xuICAgIHZhciBrID0gKGkgKyAyKSAlIDM7XG4gICAgZlJvb3QgPSBNYXRoLnNxcnQobVtpICogMyArIGldIC0gbVtqICogMyArIGpdIC0gbVtrICogMyArIGtdICsgMS4wKTtcbiAgICBvdXRbaV0gPSAwLjUgKiBmUm9vdDtcbiAgICBmUm9vdCA9IDAuNSAvIGZSb290O1xuICAgIG91dFszXSA9IChtW2ogKiAzICsga10gLSBtW2sgKiAzICsgal0pICogZlJvb3Q7XG4gICAgb3V0W2pdID0gKG1baiAqIDMgKyBpXSArIG1baSAqIDMgKyBqXSkgKiBmUm9vdDtcbiAgICBvdXRba10gPSAobVtrICogMyArIGldICsgbVtpICogMyArIGtdKSAqIGZSb290O1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTm9ybWFsaXplIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdGVybmlvbiB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5cbnZhciBub3JtYWxpemUgPSBub3JtYWxpemUkMTtcbi8qKlxuICogU2V0cyBhIHF1YXRlcm5pb24gdG8gcmVwcmVzZW50IHRoZSBzaG9ydGVzdCByb3RhdGlvbiBmcm9tIG9uZVxuICogdmVjdG9yIHRvIGFub3RoZXIuXG4gKlxuICogQm90aCB2ZWN0b3JzIGFyZSBhc3N1bWVkIHRvIGJlIHVuaXQgbGVuZ3RoLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBpbml0aWFsIHZlY3RvclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIGRlc3RpbmF0aW9uIHZlY3RvclxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciB0bXB2ZWMzID0gY3JlYXRlJDMoKTtcbiAgdmFyIHhVbml0VmVjMyA9IGZyb21WYWx1ZXMkMSgxLCAwLCAwKTtcbiAgdmFyIHlVbml0VmVjMyA9IGZyb21WYWx1ZXMkMSgwLCAxLCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICB2YXIgZG90JDEgPSBkb3QoYSwgYik7XG5cbiAgICBpZiAoZG90JDEgPCAtMC45OTk5OTkpIHtcbiAgICAgIGNyb3NzKHRtcHZlYzMsIHhVbml0VmVjMywgYSk7XG4gICAgICBpZiAobGVuKHRtcHZlYzMpIDwgMC4wMDAwMDEpIGNyb3NzKHRtcHZlYzMsIHlVbml0VmVjMywgYSk7XG4gICAgICBub3JtYWxpemUkMih0bXB2ZWMzLCB0bXB2ZWMzKTtcbiAgICAgIHNldEF4aXNBbmdsZShvdXQsIHRtcHZlYzMsIE1hdGguUEkpO1xuICAgICAgcmV0dXJuIG91dDtcbiAgICB9IGVsc2UgaWYgKGRvdCQxID4gMC45OTk5OTkpIHtcbiAgICAgIG91dFswXSA9IDA7XG4gICAgICBvdXRbMV0gPSAwO1xuICAgICAgb3V0WzJdID0gMDtcbiAgICAgIG91dFszXSA9IDE7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjcm9zcyh0bXB2ZWMzLCBhLCBiKTtcbiAgICAgIG91dFswXSA9IHRtcHZlYzNbMF07XG4gICAgICBvdXRbMV0gPSB0bXB2ZWMzWzFdO1xuICAgICAgb3V0WzJdID0gdG1wdmVjM1syXTtcbiAgICAgIG91dFszXSA9IDEgKyBkb3QkMTtcbiAgICAgIHJldHVybiBub3JtYWxpemUob3V0LCBvdXQpO1xuICAgIH1cbiAgfTtcbn0pKCk7XG4vKipcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYyB0aGUgdGhpcmQgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGQgdGhlIGZvdXJ0aCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRlbXAxID0gY3JlYXRlJDEoKTtcbiAgdmFyIHRlbXAyID0gY3JlYXRlJDEoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIGEsIGIsIGMsIGQsIHQpIHtcbiAgICBzbGVycCh0ZW1wMSwgYSwgZCwgdCk7XG4gICAgc2xlcnAodGVtcDIsIGIsIGMsIHQpO1xuICAgIHNsZXJwKG91dCwgdGVtcDEsIHRlbXAyLCAyICogdCAqICgxIC0gdCkpO1xuICAgIHJldHVybiBvdXQ7XG4gIH07XG59KSgpO1xuLyoqXG4gKiBTZXRzIHRoZSBzcGVjaWZpZWQgcXVhdGVybmlvbiB3aXRoIHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlblxuICogYXhlcy4gRWFjaCBheGlzIGlzIGEgdmVjMyBhbmQgaXMgZXhwZWN0ZWQgdG8gYmUgdW5pdCBsZW5ndGggYW5kXG4gKiBwZXJwZW5kaWN1bGFyIHRvIGFsbCBvdGhlciBzcGVjaWZpZWQgYXhlcy5cbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdmlldyAgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIHZpZXdpbmcgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gcmlnaHQgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGxvY2FsIFwicmlnaHRcIiBkaXJlY3Rpb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB1cCAgICB0aGUgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgbG9jYWwgXCJ1cFwiIGRpcmVjdGlvblxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciBtYXRyID0gY3JlYXRlJDQoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvdXQsIHZpZXcsIHJpZ2h0LCB1cCkge1xuICAgIG1hdHJbMF0gPSByaWdodFswXTtcbiAgICBtYXRyWzNdID0gcmlnaHRbMV07XG4gICAgbWF0cls2XSA9IHJpZ2h0WzJdO1xuICAgIG1hdHJbMV0gPSB1cFswXTtcbiAgICBtYXRyWzRdID0gdXBbMV07XG4gICAgbWF0cls3XSA9IHVwWzJdO1xuICAgIG1hdHJbMl0gPSAtdmlld1swXTtcbiAgICBtYXRyWzVdID0gLXZpZXdbMV07XG4gICAgbWF0cls4XSA9IC12aWV3WzJdO1xuICAgIHJldHVybiBub3JtYWxpemUob3V0LCBmcm9tTWF0MyhvdXQsIG1hdHIpKTtcbiAgfTtcbn0pKCk7XG5cbi8qKlxuICogMiBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjMlxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjMlxuICpcbiAqIEByZXR1cm5zIHt2ZWMyfSBhIG5ldyAyRCB2ZWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGUoKSB7XG4gIHZhciBvdXQgPSBuZXcgQVJSQVlfVFlQRSgyKTtcblxuICBpZiAoQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjMnMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjMi4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzJzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciB2ZWMgPSBjcmVhdGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSAyO1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KSgpO1xuXG5jb25zdCBjb252ZXhTd2VlcCA9IChyYXdEeW5hbWljc1dvcmxkLCBkZWYpID0+IHtcbiAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgIGNvbnN0IGZyb21WZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmZyb21bMF0sIGRlZi5mcm9tWzFdLCBkZWYuZnJvbVsyXSk7XG4gICAgY29uc3QgdG9WZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLnRvWzBdLCBkZWYudG9bMV0sIGRlZi50b1syXSk7XG4gICAgY29uc3QgZnJvbVRyc2YgPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKCk7XG4gICAgZnJvbVRyc2Yuc2V0SWRlbnRpdHkoKTtcbiAgICBmcm9tVHJzZi5zZXRPcmlnaW4oZnJvbVZlYzMpO1xuICAgIGNvbnN0IHRvVHJzZiA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0oKTtcbiAgICB0b1Ryc2Yuc2V0SWRlbnRpdHkoKTtcbiAgICB0b1Ryc2Yuc2V0T3JpZ2luKHRvVmVjMyk7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IGJ1bGxldC5DbG9zZXN0Q29udmV4UmVzdWx0Q2FsbGJhY2soZnJvbVZlYzMsIHRvVmVjMyk7XG4gICAgcmVzdWx0LnNldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwKGRlZi5jb2xsaXNpb25GaWx0ZXJHcm91cCk7XG4gICAgcmVzdWx0LnNldF9tX2NvbGxpc2lvbkZpbHRlck1hc2soZGVmLmNvbGxpc2lvbkZpbHRlck1hc2spO1xuICAgIGNvbnN0IHNoYXBlID0gbmV3IGJ1bGxldC5idFNwaGVyZVNoYXBlKGRlZi5yYWRpdXMpO1xuICAgIHJhd0R5bmFtaWNzV29ybGQuY29udmV4U3dlZXBUZXN0KHNoYXBlLCBmcm9tVHJzZiwgdG9UcnNmLCByZXN1bHQsIDApO1xuICAgIGlmICghcmVzdWx0Lmhhc0hpdCgpKSB7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGZyb21WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodG9WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmVzdWx0KTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koc2hhcGUpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShmcm9tVHJzZik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRvVHJzZik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gY29uc3Qgb2JqZWN0ID0gYm9keU1hcC5nZXQoKHJlc3VsdC5nZXQoKSBhcyBhbnkpLnB0cik7XG4gICAgLy8gaWYgKCFvYmplY3QpIHtcbiAgICAvLyAgIGJ1bGxldC5kZXN0cm95KGZyb21WZWMzKTtcbiAgICAvLyAgIGJ1bGxldC5kZXN0cm95KHRvVmVjMyk7XG4gICAgLy8gICBidWxsZXQuZGVzdHJveShyZXN1bHQpO1xuICAgIC8vICAgcmV0dXJuO1xuICAgIC8vIH1cbiAgICAvLyBnZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb24oKTogbnVtYmVyO1xuICAgIC8vIGdldF9tX2NvbGxpc2lvbk9iamVjdCgpOiBidENvbGxpc2lvbk9iamVjdDtcbiAgICBjb25zdCByYXdQb3NpdGlvbiA9IHJlc3VsdC5nZXRfbV9oaXRQb2ludFdvcmxkKCk7XG4gICAgY29uc3QgcmF3Tm9ybWFsID0gcmVzdWx0LmdldF9tX2hpdE5vcm1hbFdvcmxkKCk7XG4gICAgY29uc3QgZnJhY3Rpb24gPSByZXN1bHQuZ2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uKCk7XG4gICAgY29uc3QgaW1wYWN0ID0gZnJvbVZhbHVlcyQxKHJhd1Bvc2l0aW9uLngoKSwgcmF3UG9zaXRpb24ueSgpLCByYXdQb3NpdGlvbi56KCkpO1xuICAgIGNvbnN0IG5vcm1hbCA9IGZyb21WYWx1ZXMkMShyYXdOb3JtYWwueCgpLCByYXdOb3JtYWwueSgpLCByYXdOb3JtYWwueigpKTtcbiAgICBidWxsZXQuZGVzdHJveShyYXdOb3JtYWwpO1xuICAgIGJ1bGxldC5kZXN0cm95KHJhd1Bvc2l0aW9uKTtcbiAgICBidWxsZXQuZGVzdHJveShmcm9tVmVjMyk7XG4gICAgYnVsbGV0LmRlc3Ryb3kodG9WZWMzKTtcbiAgICBidWxsZXQuZGVzdHJveShyZXN1bHQpO1xuICAgIGJ1bGxldC5kZXN0cm95KHNoYXBlKTtcbiAgICBidWxsZXQuZGVzdHJveShmcm9tVHJzZik7XG4gICAgYnVsbGV0LmRlc3Ryb3kodG9UcnNmKTtcbiAgICByZXR1cm4geyBmcmFjdGlvbiwgaW1wYWN0LCBub3JtYWwgfTtcbn07XG5cbmNvbnN0IERJU0FCTEVfREVBQ1RJVkFUSU9OID0gNDtcbmNsYXNzIENvbmNyZXRlUGh5c2ljQm9keSBleHRlbmRzIENvbnRhY3RFdmVudEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKGRlZiwgcmF3U2hhcGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5faXNBbGl2ZSA9IHRydWU7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIHRoaXMuX2N1c3RvbVNoYXBlID0gcmF3U2hhcGU7XG4gICAgICAgIGNvbnN0IHRtcFZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICB0aGlzLl9jdXN0b21TaGFwZS5zaGFwZS5jYWxjdWxhdGVMb2NhbEluZXJ0aWEoZGVmLm1hc3MsIHRtcFZlYzMpO1xuICAgICAgICBjb25zdCBtb3Rpb25TdGF0ZSA9IG51bGw7IC8vIGhhY2sgOihcbiAgICAgICAgY29uc3QgcmJJbmZvID0gbmV3IGJ1bGxldC5idFJpZ2lkQm9keUNvbnN0cnVjdGlvbkluZm8oZGVmLm1hc3MsIG1vdGlvblN0YXRlLCB0aGlzLl9jdXN0b21TaGFwZS5zaGFwZSwgdG1wVmVjMyk7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keSA9IG5ldyBidWxsZXQuYnRSaWdpZEJvZHkocmJJbmZvKTtcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbkFuZFJvdGF0aW9uKGRlZi5wb3NpdGlvbiwgZGVmLm9yaWVudGF0aW9uKTtcbiAgICAgICAgLy8gdGhpcy5fY3VzdG9tU2hhcGUgPSB0aGlzLl9nZXRTaGFwZShkZWYuc2hhcGUpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0bXBWZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmJJbmZvKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fcmF3UmlnaWRCb2R5KTtcbiAgICAgICAgLy8gYnVsbGV0LmRlc3Ryb3kodGhpcy5fY3VzdG9tU2hhcGUpO1xuICAgICAgICB0aGlzLl9jdXN0b21TaGFwZS5jbGVhbnVwKCk7XG4gICAgICAgIC8vIGhhY2sgdG8gZm9yY2UgaXQgdG8gY3Jhc2ggaWYgdGhlIGJvZHkgaXMgcmV1c2VkXG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2lzQWxpdmUgPSBmYWxzZTtcbiAgICB9XG4gICAgaXNBbGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzQWxpdmU7XG4gICAgfVxuICAgIHNldFBvc2l0aW9uQW5kUm90YXRpb24ocG9zaXRpb24sIHJvdGF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gbmV3IGJ1bGxldC5idFZlY3RvcjMocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXSk7XG4gICAgICAgIGNvbnN0IG5ld1JvdGF0aW9uID0gbmV3IGJ1bGxldC5idFF1YXRlcm5pb24ocm90YXRpb25bMF0sIHJvdGF0aW9uWzFdLCByb3RhdGlvblsyXSwgcm90YXRpb25bM10pO1xuICAgICAgICBjb25zdCBuZXdUcmFuc2Zvcm0gPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKG5ld1JvdGF0aW9uLCBuZXdQb3NpdGlvbik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRXb3JsZFRyYW5zZm9ybShuZXdUcmFuc2Zvcm0pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdUcmFuc2Zvcm0pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdQb3NpdGlvbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1JvdGF0aW9uKTtcbiAgICB9XG4gICAgc2V0UG9zaXRpb24oeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgY29uc3QgbmV3Um90YXRpb24gPSBuZXcgYnVsbGV0LmJ0UXVhdGVybmlvbihyb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uWzJdLCByb3RhdGlvblszXSk7XG4gICAgICAgIGNvbnN0IG5ld1RyYW5zZm9ybSA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0obmV3Um90YXRpb24sIG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldFdvcmxkVHJhbnNmb3JtKG5ld1RyYW5zZm9ybSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1RyYW5zZm9ybSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3Um90YXRpb24pO1xuICAgIH1cbiAgICBzZXRSb3RhdGlvbih4LCB5LCB6LCB3KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhvcmlnaW5bMF0sIG9yaWdpblsxXSwgb3JpZ2luWzJdKTtcbiAgICAgICAgY29uc3QgbmV3Um90YXRpb24gPSBuZXcgYnVsbGV0LmJ0UXVhdGVybmlvbih4LCB5LCB6LCB3KTtcbiAgICAgICAgY29uc3QgbmV3VHJhbnNmb3JtID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybShuZXdSb3RhdGlvbiwgbmV3UG9zaXRpb24pO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0V29ybGRUcmFuc2Zvcm0obmV3VHJhbnNmb3JtKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VHJhbnNmb3JtKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3UG9zaXRpb24pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdSb3RhdGlvbik7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uQW5kUm90YXRpb24ocG9zaXRpb24sIHJvdGF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJhd1RyYW5zZm9ybSA9IHRoaXMuX3Jhd1JpZ2lkQm9keS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICBjb25zdCByYXdPcmlnaW4gPSByYXdUcmFuc2Zvcm0uZ2V0T3JpZ2luKCk7XG4gICAgICAgIGNvbnN0IHJhd1JvdGF0aW9uID0gcmF3VHJhbnNmb3JtLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHBvc2l0aW9uWzBdID0gcmF3T3JpZ2luLngoKTtcbiAgICAgICAgcG9zaXRpb25bMV0gPSByYXdPcmlnaW4ueSgpO1xuICAgICAgICBwb3NpdGlvblsyXSA9IHJhd09yaWdpbi56KCk7XG4gICAgICAgIHJvdGF0aW9uWzBdID0gcmF3Um90YXRpb24ueCgpO1xuICAgICAgICByb3RhdGlvblsxXSA9IHJhd1JvdGF0aW9uLnkoKTtcbiAgICAgICAgcm90YXRpb25bMl0gPSByYXdSb3RhdGlvbi56KCk7XG4gICAgICAgIHJvdGF0aW9uWzNdID0gcmF3Um90YXRpb24udygpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyYXdSb3RhdGlvbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd09yaWdpbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1RyYW5zZm9ybSk7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByYXdUcmFuc2Zvcm0gPSB0aGlzLl9yYXdSaWdpZEJvZHkuZ2V0V29ybGRUcmFuc2Zvcm0oKTtcbiAgICAgICAgY29uc3QgcmF3T3JpZ2luID0gcmF3VHJhbnNmb3JtLmdldE9yaWdpbigpO1xuICAgICAgICBjb25zdCBvcmlnaW4gPSBmcm9tVmFsdWVzJDEocmF3T3JpZ2luLngoKSwgcmF3T3JpZ2luLnkoKSwgcmF3T3JpZ2luLnooKSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd09yaWdpbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1RyYW5zZm9ybSk7XG4gICAgICAgIHJldHVybiBvcmlnaW47XG4gICAgfVxuICAgIGdldFJvdGF0aW9uKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByYXdUcmFuc2Zvcm0gPSB0aGlzLl9yYXdSaWdpZEJvZHkuZ2V0V29ybGRUcmFuc2Zvcm0oKTtcbiAgICAgICAgY29uc3QgcmF3Um90YXRpb24gPSByYXdUcmFuc2Zvcm0uZ2V0Um90YXRpb24oKTtcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSBmcm9tVmFsdWVzKHJhd1JvdGF0aW9uLngoKSwgcmF3Um90YXRpb24ueSgpLCByYXdSb3RhdGlvbi56KCksIHJhd1JvdGF0aW9uLncoKSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1JvdGF0aW9uKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3VHJhbnNmb3JtKTtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgIH1cbiAgICBnZXRMaW5lYXJWZWxvY2l0eSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgdmVsID0gdGhpcy5fcmF3UmlnaWRCb2R5LmdldExpbmVhclZlbG9jaXR5KCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZnJvbVZhbHVlcyQxKHZlbC54KCksIHZlbC55KCksIHZlbC56KCkpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh2ZWwpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGdldEFuZ3VsYXJWZWxvY2l0eSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgdmVsID0gdGhpcy5fcmF3UmlnaWRCb2R5LmdldEFuZ3VsYXJWZWxvY2l0eSgpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGZyb21WYWx1ZXMkMSh2ZWwueCgpLCB2ZWwueSgpLCB2ZWwueigpKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodmVsKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBzZXRMaW5lYXJWZWxvY2l0eSh4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0TGluZWFyVmVsb2NpdHkobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgc2V0QW5ndWxhclZlbG9jaXR5KHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRBbmd1bGFyVmVsb2NpdHkobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgc2V0TGluZWFyRmFjdG9yKHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRMaW5lYXJGYWN0b3IobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgc2V0QW5ndWxhckZhY3Rvcih4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0QW5ndWxhckZhY3RvcihuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBhcHBseUNlbnRyYWxGb3JjZSh4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuYXBwbHlDZW50cmFsRm9yY2UobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgYXBwbHlDZW50cmFsSW1wdWxzZSh4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuYXBwbHlDZW50cmFsSW1wdWxzZShuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBzZXREYW1waW5nKGxpbmVhciwgYW5ndWxhciA9IDApIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldERhbXBpbmcobGluZWFyLCBhbmd1bGFyKTtcbiAgICB9XG4gICAgc2V0Q2NkTW90aW9uVGhyZXNob2xkKGNjZE1vdGlvblRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0Q2NkTW90aW9uVGhyZXNob2xkKGNjZE1vdGlvblRocmVzaG9sZCk7XG4gICAgfVxuICAgIHNldENjZFN3ZXB0U3BoZXJlUmFkaXVzKHJhZGl1cykge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXMocmFkaXVzKTtcbiAgICB9XG4gICAgc2V0UmVzdGl0dXRpb24ocmVzdGl0dXRpb24pIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldFJlc3RpdHV0aW9uKHJlc3RpdHV0aW9uKTtcbiAgICB9XG4gICAgc2V0RnJpY3Rpb24oZnJpY3Rpb24pIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldEZyaWN0aW9uKGZyaWN0aW9uKTtcbiAgICB9XG4gICAgc2V0Um9sbGluZ0ZyaWN0aW9uKGZyaWN0aW9uKSB7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRSb2xsaW5nRnJpY3Rpb24oZnJpY3Rpb24pO1xuICAgIH1cbiAgICBzZXRHcmF2aXR5KHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRHcmF2aXR5KG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIGlzU3RhdGljT2JqZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3UmlnaWRCb2R5LmlzU3RhdGljT2JqZWN0KCk7XG4gICAgfVxuICAgIGlzS2luZW1hdGljT2JqZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3UmlnaWRCb2R5LmlzS2luZW1hdGljT2JqZWN0KCk7XG4gICAgfVxuICAgIGlzU3RhdGljT3JLaW5lbWF0aWNPYmplY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdSaWdpZEJvZHkuaXNTdGF0aWNPcktpbmVtYXRpY09iamVjdCgpO1xuICAgIH1cbiAgICBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmlzU3RhdGljT3JLaW5lbWF0aWNPYmplY3QoKSB8fCB0aGlzLl9yYXdSaWdpZEJvZHkuaXNBY3RpdmUoKSk7XG4gICAgfVxuICAgIGVuYWJsZURlYWN0aXZhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LmFjdGl2YXRlKHRydWUpO1xuICAgIH1cbiAgICBkaXNhYmxlRGVhY3RpdmF0aW9uKCkge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0QWN0aXZhdGlvblN0YXRlKERJU0FCTEVfREVBQ1RJVkFUSU9OKTtcbiAgICB9XG4gICAgY2Fubm90RGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmlzU3RhdGljT3JLaW5lbWF0aWNPYmplY3QoKSB8fFxuICAgICAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LmdldEFjdGl2YXRpb25TdGF0ZSgpID09IERJU0FCTEVfREVBQ1RJVkFUSU9OKTtcbiAgICB9XG4gICAgY2FuRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmNhbm5vdERlYWN0aXZhdGUoKTtcbiAgICB9XG59XG5cbmNsYXNzIENvbmNyZXRlUGh5c2ljVmVoaWNsZSB7XG4gICAgY29uc3RydWN0b3IocmF3RHluYW1pY3NXb3JsZCwgY2hhc3Npc0JvZHksIGRlZikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICB0aGlzLl9jaGFzc2lzQm9keSA9IGNoYXNzaXNCb2R5O1xuICAgICAgICB0aGlzLl92ZWhpY2xlVHVuaW5nID0gbmV3IGJ1bGxldC5idFZlaGljbGVUdW5pbmcoKTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFZlaGljbGVSYXljYXN0ZXIgPSBuZXcgYnVsbGV0LmJ0RGVmYXVsdFZlaGljbGVSYXljYXN0ZXIocmF3RHluYW1pY3NXb3JsZCk7XG4gICAgICAgIHRoaXMuX3Jhd1ZlaGljbGUgPSBuZXcgYnVsbGV0LmJ0UmF5Y2FzdFZlaGljbGUodGhpcy5fdmVoaWNsZVR1bmluZywgY2hhc3Npc0JvZHkuX3Jhd1JpZ2lkQm9keSwgdGhpcy5fZGVmYXVsdFZlaGljbGVSYXljYXN0ZXIpO1xuICAgICAgICB0aGlzLl9yYXdWZWhpY2xlLnNldENvb3JkaW5hdGVTeXN0ZW0oZGVmLmNvb3JkaW5hdGVTeXN0ZW1bMF0sIGRlZi5jb29yZGluYXRlU3lzdGVtWzFdLCBkZWYuY29vcmRpbmF0ZVN5c3RlbVsyXSk7XG4gICAgICAgIGNvbnN0IGdyb3VuZERpcmVjdGlvbiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5ncm91bmREaXJlY3Rpb25bMF0sIGRlZi5ncm91bmREaXJlY3Rpb25bMV0sIGRlZi5ncm91bmREaXJlY3Rpb25bMl0pO1xuICAgICAgICBjb25zdCByb3RhdGlvbkF4aXMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYucm90YXRpb25BeGlzWzBdLCBkZWYucm90YXRpb25BeGlzWzFdLCBkZWYucm90YXRpb25BeGlzWzJdKTtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvblBvaW50ID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IGRlZi53aGVlbHMubGVuZ3RoOyArK2lpKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gZGVmLndoZWVsc1tpaV07XG4gICAgICAgICAgICBjb25uZWN0aW9uUG9pbnQuc2V0VmFsdWUoY3VycmVudC5jb25uZWN0aW9uUG9pbnRbMF0sIGN1cnJlbnQuY29ubmVjdGlvblBvaW50WzFdLCBjdXJyZW50LmNvbm5lY3Rpb25Qb2ludFsyXSk7XG4gICAgICAgICAgICBjb25zdCB3aGVlbEluZm8gPSB0aGlzLl9yYXdWZWhpY2xlLmFkZFdoZWVsKGNvbm5lY3Rpb25Qb2ludCwgLy8gY29ubmVjdGlvblBvaW50Q1MwLFxuICAgICAgICAgICAgZ3JvdW5kRGlyZWN0aW9uLCAvLyB3aGVlbERpcmVjdGlvbkNTMCxcbiAgICAgICAgICAgIHJvdGF0aW9uQXhpcywgLy8gd2hlZWxBeGxlQ1MsXG4gICAgICAgICAgICBkZWYuc3VzcGVuc2lvblJlc3RMZW5ndGgsIGRlZi53aGVlbFJhZGl1cywgdGhpcy5fdmVoaWNsZVR1bmluZywgY3VycmVudC5pc0Zyb250V2hlZWwpO1xuICAgICAgICAgICAgd2hlZWxJbmZvLnNldF9tX3N1c3BlbnNpb25TdGlmZm5lc3MoZGVmLnN1c3BlbnNpb25TdGlmZm5lc3MpO1xuICAgICAgICAgICAgd2hlZWxJbmZvLnNldF9tX3doZWVsc0RhbXBpbmdSZWxheGF0aW9uKGRlZi53aGVlbHNEYW1waW5nUmVsYXhhdGlvbik7XG4gICAgICAgICAgICB3aGVlbEluZm8uc2V0X21fd2hlZWxzRGFtcGluZ0NvbXByZXNzaW9uKGRlZi53aGVlbHNEYW1waW5nQ29tcHJlc3Npb24pO1xuICAgICAgICAgICAgd2hlZWxJbmZvLnNldF9tX2ZyaWN0aW9uU2xpcChkZWYud2hlZWxGcmljdGlvbik7XG4gICAgICAgICAgICB3aGVlbEluZm8uc2V0X21fcm9sbEluZmx1ZW5jZShkZWYucm9sbEluZmx1ZW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koY29ubmVjdGlvblBvaW50KTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koZ3JvdW5kRGlyZWN0aW9uKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocm90YXRpb25BeGlzKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fcmF3VmVoaWNsZSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX2RlZmF1bHRWZWhpY2xlUmF5Y2FzdGVyKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fdmVoaWNsZVR1bmluZyk7XG4gICAgfVxuICAgIGdldENoYXNzaXNCb2R5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hhc3Npc0JvZHk7XG4gICAgfVxuICAgIHNldFN0ZWVyaW5nVmFsdWUoaW5kZXgsIGFuZ2xlKSB7XG4gICAgICAgIHRoaXMuX3Jhd1ZlaGljbGUuc2V0U3RlZXJpbmdWYWx1ZShhbmdsZSwgaW5kZXgpO1xuICAgIH1cbiAgICBhcHBseUVuZ2luZUZvcmNlKGluZGV4LCBmb3JjZSkge1xuICAgICAgICB0aGlzLl9yYXdWZWhpY2xlLmFwcGx5RW5naW5lRm9yY2UoZm9yY2UsIGluZGV4KTtcbiAgICB9XG4gICAgc2V0QnJha2UoaW5kZXgsIGZvcmNlKSB7XG4gICAgICAgIHRoaXMuX3Jhd1ZlaGljbGUuc2V0QnJha2UoZm9yY2UsIGluZGV4KTtcbiAgICB9XG4gICAgZ2V0V2hlZVRyYW5zZm9ybXMoKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IGFsbFRyYW5zZm9ybXMgPSBbXTtcbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdGVkVHJhbnNmb3JtID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgbnVtV2hlZWxzID0gdGhpcy5fcmF3VmVoaWNsZS5nZXROdW1XaGVlbHMoKTtcbiAgICAgICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG51bVdoZWVsczsgKytpaSkge1xuICAgICAgICAgICAgdGhpcy5fcmF3VmVoaWNsZS51cGRhdGVXaGVlbFRyYW5zZm9ybShpaSwgaW50ZXJwb2xhdGVkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIGNvbnN0IHJhd1RyYW5zZm9ybSA9IHRoaXMuX3Jhd1ZlaGljbGUuZ2V0V2hlZWxUcmFuc2Zvcm1XUyhpaSk7XG4gICAgICAgICAgICBjb25zdCByYXdPcmlnaW4gPSByYXdUcmFuc2Zvcm0uZ2V0T3JpZ2luKCk7XG4gICAgICAgICAgICBjb25zdCByYXdSb3RhdGlvbiA9IHJhd1RyYW5zZm9ybS5nZXRSb3RhdGlvbigpO1xuICAgICAgICAgICAgYWxsVHJhbnNmb3Jtcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZnJvbVZhbHVlcyQxKHJhd09yaWdpbi54KCksIHJhd09yaWdpbi55KCksIHJhd09yaWdpbi56KCkpLFxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBmcm9tVmFsdWVzKHJhd1JvdGF0aW9uLngoKSwgcmF3Um90YXRpb24ueSgpLCByYXdSb3RhdGlvbi56KCksIHJhd1JvdGF0aW9uLncoKSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1JvdGF0aW9uKTtcbiAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd09yaWdpbik7XG4gICAgICAgICAgICBidWxsZXQuZGVzdHJveShyYXdUcmFuc2Zvcm0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGxUcmFuc2Zvcm1zO1xuICAgIH1cbn1cblxuY2xhc3MgQ29uY3JldGVHZW5lcmljNkRvZkNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKGRlZikge1xuICAgICAgICB0aGlzLl9ib2R5QSA9IGRlZi5ib2R5QTtcbiAgICAgICAgdGhpcy5fYm9keUIgPSBkZWYuYm9keUI7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJhd1JpZ2lkQm9keUEgPSBkZWYuYm9keUEuX3Jhd1JpZ2lkQm9keTtcbiAgICAgICAgY29uc3QgcmF3UmlnaWRCb2R5QiA9IGRlZi5ib2R5Qi5fcmF3UmlnaWRCb2R5O1xuICAgICAgICBjb25zdCBuZXdSb3RhdGlvbiA9IG5ldyBidWxsZXQuYnRRdWF0ZXJuaW9uKDAsIDAsIDEsIDApO1xuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbkEgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYuZnJhbWVBWzBdLCBkZWYuZnJhbWVBWzFdLCBkZWYuZnJhbWVBWzJdKTtcbiAgICAgICAgY29uc3QgbmV3VHJhbnNmb3JtQSA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0obmV3Um90YXRpb24sIG5ld1Bvc2l0aW9uQSk7XG4gICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uQiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5mcmFtZUJbMF0sIGRlZi5mcmFtZUJbMV0sIGRlZi5mcmFtZUJbMl0pO1xuICAgICAgICBjb25zdCBuZXdUcmFuc2Zvcm1CID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybShuZXdSb3RhdGlvbiwgbmV3UG9zaXRpb25CKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludCA9IG5ldyBidWxsZXQuYnRHZW5lcmljNkRvZlNwcmluZ0NvbnN0cmFpbnQocmF3UmlnaWRCb2R5QSwgcmF3UmlnaWRCb2R5QiwgbmV3VHJhbnNmb3JtQSwgbmV3VHJhbnNmb3JtQiwgZGVmLnVzZVJlZmVyZW5jZUZyYW1lQSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlU3ByaW5nKDAsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVTcHJpbmcoMSwgZmFsc2UpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZVNwcmluZygyLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0U3RpZmZuZXNzKDAsIDEpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldFN0aWZmbmVzcygxLCAxKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRTdGlmZm5lc3MoMiwgMSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0RGFtcGluZygwLCAxKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXREYW1waW5nKDEsIDEpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldERhbXBpbmcoMiwgMSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1RyYW5zZm9ybUEpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdUcmFuc2Zvcm1CKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3UG9zaXRpb25BKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3UG9zaXRpb25CKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3Um90YXRpb24pO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9yYXdDb25zdHJhaW50KTtcbiAgICB9XG4gICAgc2V0TGluZWFyTG93ZXJMaW1pdCh2YWwpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmFsID0gbmV3IGJ1bGxldC5idFZlY3RvcjModmFsWzBdLCB2YWxbMV0sIHZhbFsyXSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0TGluZWFyTG93ZXJMaW1pdChuZXdWYWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWYWwpO1xuICAgIH1cbiAgICBzZXRMaW5lYXJVcHBlckxpbWl0KHZhbCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWYWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh2YWxbMF0sIHZhbFsxXSwgdmFsWzJdKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRMaW5lYXJVcHBlckxpbWl0KG5ld1ZhbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZhbCk7XG4gICAgfVxuICAgIHNldEFuZ3VsYXJMb3dlckxpbWl0KHZhbCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWYWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh2YWxbMF0sIHZhbFsxXSwgdmFsWzJdKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRBbmd1bGFyTG93ZXJMaW1pdChuZXdWYWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWYWwpO1xuICAgIH1cbiAgICBzZXRBbmd1bGFyVXBwZXJMaW1pdCh2YWwpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmFsID0gbmV3IGJ1bGxldC5idFZlY3RvcjModmFsWzBdLCB2YWxbMV0sIHZhbFsyXSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0QW5ndWxhclVwcGVyTGltaXQobmV3VmFsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmFsKTtcbiAgICB9XG59XG5cbmNsYXNzIENvbmNyZXRlSGluZ2VDb25zdHJhaW50IHtcbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgdGhpcy5fYm9keUEgPSBkZWYuYm9keUE7XG4gICAgICAgIHRoaXMuX2JvZHlCID0gZGVmLmJvZHlCO1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCByYXdSaWdpZEJvZHlBID0gZGVmLmJvZHlBLl9yYXdSaWdpZEJvZHk7XG4gICAgICAgIGNvbnN0IHJhd1JpZ2lkQm9keUIgPSBkZWYuYm9keUIuX3Jhd1JpZ2lkQm9keTtcbiAgICAgICAgLy8gY29uc3QgbmV3Um90YXRpb24gPSBuZXcgYnVsbGV0LmJ0UXVhdGVybmlvbigwLCAwLCAxLCAwKTtcbiAgICAgICAgY29uc3QgcGl2b3RJbkEgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYucGl2b3RJbkFbMF0sIGRlZi5waXZvdEluQVsxXSwgZGVmLnBpdm90SW5BWzJdKTtcbiAgICAgICAgY29uc3QgcGl2b3RJbkIgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYucGl2b3RJbkJbMF0sIGRlZi5waXZvdEluQlsxXSwgZGVmLnBpdm90SW5CWzJdKTtcbiAgICAgICAgY29uc3QgYXhpc0luQSA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5heGlzSW5BWzBdLCBkZWYuYXhpc0luQVsxXSwgZGVmLmF4aXNJbkFbMl0pO1xuICAgICAgICBjb25zdCBheGlzSW5CID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmF4aXNJbkJbMF0sIGRlZi5heGlzSW5CWzFdLCBkZWYuYXhpc0luQlsyXSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQgPSBuZXcgYnVsbGV0LmJ0SGluZ2VDb25zdHJhaW50KHJhd1JpZ2lkQm9keUEsIHJhd1JpZ2lkQm9keUIsIHBpdm90SW5BLCBwaXZvdEluQiwgYXhpc0luQSwgYXhpc0luQiwgZGVmLnVzZVJlZmVyZW5jZUZyYW1lQSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlU3ByaW5nKDAsIGZhbHNlKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVTcHJpbmcoMSwgZmFsc2UpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZVNwcmluZygyLCBmYWxzZSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0U3RpZmZuZXNzKDAsIDEpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LnNldFN0aWZmbmVzcygxLCAxKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5zZXRTdGlmZm5lc3MoMiwgMSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0RGFtcGluZygwLCAxKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5zZXREYW1waW5nKDEsIDEpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LnNldERhbXBpbmcoMiwgMSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHBpdm90SW5BKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocGl2b3RJbkIpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShheGlzSW5BKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koYXhpc0luQik7XG4gICAgICAgIC8vIGJ1bGxldC5kZXN0cm95KG5ld1JvdGF0aW9uKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fcmF3Q29uc3RyYWludCk7XG4gICAgfVxuICAgIHNldExpbWl0KGxvdywgaGlnaCwgc29mdG5lc3MsIGJpYXNGYWN0b3IsIHJlbGF4YXRpb25GYWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRMaW1pdChsb3csIGhpZ2gsIHNvZnRuZXNzLCBiaWFzRmFjdG9yLCByZWxheGF0aW9uRmFjdG9yKTtcbiAgICB9XG4gICAgZW5hYmxlQW5ndWxhck1vdG9yKGVuYWJsZU1vdG9yLCB0YXJnZXRWZWxvY2l0eSwgbWF4TW90b3JJbXB1bHNlKSB7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlQW5ndWxhck1vdG9yKGVuYWJsZU1vdG9yLCB0YXJnZXRWZWxvY2l0eSwgbWF4TW90b3JJbXB1bHNlKTtcbiAgICB9XG4gICAgLy8gc2V0QW5ndWxhck9ubHkoYW5ndWxhck9ubHk6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0QW5ndWxhck9ubHkoYW5ndWxhck9ubHkpO1xuICAgIC8vIH1cbiAgICBlbmFibGVNb3RvcihlbmFibGVNb3Rvcikge1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZU1vdG9yKGVuYWJsZU1vdG9yKTtcbiAgICB9XG4gICAgc2V0TWF4TW90b3JJbXB1bHNlKG1heE1vdG9ySW1wdWxzZSkge1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldE1heE1vdG9ySW1wdWxzZShtYXhNb3RvckltcHVsc2UpO1xuICAgIH1cbiAgICBzZXRNb3RvclRhcmdldCh0YXJnZXRBbmdsZSwgZHQpIHtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRNb3RvclRhcmdldCh0YXJnZXRBbmdsZSwgZHQpO1xuICAgIH1cbn1cblxuY29uc3QgcmF5Q2FzdCA9IChyYXdEeW5hbWljc1dvcmxkLCBib2R5TWFwLCBkZWYpID0+IHtcbiAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgIGNvbnN0IGZyb21WZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmZyb21bMF0sIGRlZi5mcm9tWzFdLCBkZWYuZnJvbVsyXSk7XG4gICAgY29uc3QgdG9WZWMzID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLnRvWzBdLCBkZWYudG9bMV0sIGRlZi50b1syXSk7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IGJ1bGxldC5DbG9zZXN0UmF5UmVzdWx0Q2FsbGJhY2soZnJvbVZlYzMsIHRvVmVjMyk7XG4gICAgcmVzdWx0LnNldF9tX2NvbGxpc2lvbkZpbHRlckdyb3VwKGRlZi5jb2xsaXNpb25GaWx0ZXJHcm91cCk7XG4gICAgcmVzdWx0LnNldF9tX2NvbGxpc2lvbkZpbHRlck1hc2soZGVmLmNvbGxpc2lvbkZpbHRlck1hc2spO1xuICAgIHJhd0R5bmFtaWNzV29ybGQucmF5VGVzdChmcm9tVmVjMywgdG9WZWMzLCByZXN1bHQpO1xuICAgIGlmICghcmVzdWx0Lmhhc0hpdCgpKSB7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGZyb21WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodG9WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmVzdWx0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvYmplY3QgPSBib2R5TWFwLmdldChyZXN1bHQuZ2V0X21fY29sbGlzaW9uT2JqZWN0KCkucHRyKTtcbiAgICBpZiAoIW9iamVjdCkge1xuICAgICAgICBidWxsZXQuZGVzdHJveShmcm9tVmVjMyk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRvVmVjMyk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJlc3VsdCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gZ2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uKCk6IG51bWJlcjtcbiAgICAvLyBnZXRfbV9jb2xsaXNpb25PYmplY3QoKTogYnRDb2xsaXNpb25PYmplY3Q7XG4gICAgY29uc3QgcmF3Tm9ybWFsID0gcmVzdWx0LmdldF9tX2hpdE5vcm1hbFdvcmxkKCk7XG4gICAgY29uc3QgcmF3UG9zaXRpb24gPSByZXN1bHQuZ2V0X21faGl0UG9pbnRXb3JsZCgpO1xuICAgIGNvbnN0IGltcGFjdCA9IGZyb21WYWx1ZXMkMShyYXdQb3NpdGlvbi54KCksIHJhd1Bvc2l0aW9uLnkoKSwgcmF3UG9zaXRpb24ueigpKTtcbiAgICBjb25zdCBub3JtYWwgPSBmcm9tVmFsdWVzJDEocmF3Tm9ybWFsLngoKSwgcmF3Tm9ybWFsLnkoKSwgcmF3Tm9ybWFsLnooKSk7XG4gICAgYnVsbGV0LmRlc3Ryb3kocmF3Tm9ybWFsKTtcbiAgICBidWxsZXQuZGVzdHJveShyYXdQb3NpdGlvbik7XG4gICAgYnVsbGV0LmRlc3Ryb3koZnJvbVZlYzMpO1xuICAgIGJ1bGxldC5kZXN0cm95KHRvVmVjMyk7XG4gICAgYnVsbGV0LmRlc3Ryb3kocmVzdWx0KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBvYmplY3QsXG4gICAgICAgIGZyYWN0aW9uOiByZXN1bHQuZ2V0X21fY2xvc2VzdEhpdEZyYWN0aW9uKCksXG4gICAgICAgIGltcGFjdCxcbiAgICAgICAgbm9ybWFsLFxuICAgIH07XG59O1xuXG5jbGFzcyBQaHlzaWNXb3JsZCBleHRlbmRzIENvbnRhY3RFdmVudEhhbmRsZXIge1xuICAgIC8vIHByaXZhdGUgX3F1ZXJ5U2hhcGUgPSBuZXcgUXVlcnlTaGFwZSgpO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9ib2R5TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl92ZWhpY2xlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50cyA9IFtdO1xuICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwMiA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMyID0gW107XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIC8vIGJ1bGxldC5saXN0ZW5Ub0NvbnRhY3RDYWxsYmFja3MoKTtcbiAgICAgICAgdGhpcy5fY29sbGlzaW9uQ29uZiA9IG5ldyBidWxsZXQuYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbigpO1xuICAgICAgICB0aGlzLl9kaXNwYXRjaGVyID0gbmV3IGJ1bGxldC5idENvbGxpc2lvbkRpc3BhdGNoZXIodGhpcy5fY29sbGlzaW9uQ29uZik7XG4gICAgICAgIHRoaXMuX2Jyb2FkUGhhc2UgPSBuZXcgYnVsbGV0LmJ0RGJ2dEJyb2FkcGhhc2UoKTtcbiAgICAgICAgdGhpcy5fc29sdmVyID0gbmV3IGJ1bGxldC5idFNlcXVlbnRpYWxJbXB1bHNlQ29uc3RyYWludFNvbHZlcigpO1xuICAgICAgICAvLyB0aGlzLl9yYXdEeW5hbWljc1dvcmxkID0gbmV3IGJ1bGxldC5idERpc2NyZXRlRHluYW1pY3NXb3JsZCh0aGlzLl9kaXNwYXRjaGVyLCB0aGlzLl9icm9hZFBoYXNlLCB0aGlzLl9zb2x2ZXIsIHRoaXMuX2NvbGxpc2lvbkNvbmYpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkID0gbmV3IGJ1bGxldC5idGpzRHluYW1pY3NXb3JsZCh0aGlzLl9kaXNwYXRjaGVyLCB0aGlzLl9icm9hZFBoYXNlLCB0aGlzLl9zb2x2ZXIsIHRoaXMuX2NvbGxpc2lvbkNvbmYpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnNldEdyYXZpdHkobmV3IGJ1bGxldC5idFZlY3RvcjMoMCwgMCwgLTEwKSk7XG4gICAgICAgIHRoaXMuX2luaXRDb2xsaXNpb25FdmVudHMoKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMuZm9yRWFjaCgoY3VyckNvbnN0cmFpbnQpID0+IGN1cnJDb25zdHJhaW50LmRpc3Bvc2UoKSk7XG4gICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMyLmZvckVhY2goKGN1cnJDb25zdHJhaW50KSA9PiBjdXJyQ29uc3RyYWludC5kaXNwb3NlKCkpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50czIubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcDIuY2xlYXIoKTtcbiAgICAgICAgWy4uLnRoaXMuX3ZlaGljbGVNYXAudmFsdWVzKCldLmZvckVhY2goKGN1cnJWZWhpY2xlKSA9PiBjdXJyVmVoaWNsZS5kaXNwb3NlKCkpO1xuICAgICAgICB0aGlzLl92ZWhpY2xlTWFwLmNsZWFyKCk7XG4gICAgICAgIFsuLi50aGlzLl9ib2R5TWFwLnZhbHVlcygpXS5mb3JFYWNoKChjdXJyQm9keSkgPT4gY3VyckJvZHkuZGlzcG9zZSgpKTtcbiAgICAgICAgdGhpcy5fYm9keU1hcC5jbGVhcigpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9yYXdEeW5hbWljc1dvcmxkKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fc29sdmVyKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fYnJvYWRQaGFzZSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX2Rpc3BhdGNoZXIpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9jb2xsaXNpb25Db25mKTtcbiAgICB9XG4gICAgY3JlYXRlUmlnaWRCb2R5KGRlZikge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHRoaXMuX2dldFNoYXBlKGRlZi5zaGFwZSwgZGVmLm1hc3MgPiAwKTtcbiAgICAgICAgY29uc3QgbmV3Qm9keSA9IG5ldyBDb25jcmV0ZVBoeXNpY0JvZHkoZGVmLCBuZXdTaGFwZSk7XG4gICAgICAgIC8vIGlmIChkZWYuc2hhcGUudHlwZSA9PT0gJ21lc2gnKSB7XG4gICAgICAgIC8vICAgY29uc3QgbWVzaFNoYXBlID0gbmV3Qm9keS5fcmF3U2hhcGUgYXMgYnVsbGV0SnMuYnRHSW1wYWN0TWVzaFNoYXBlO1xuICAgICAgICAvLyAgIG5ld0JvZHkuX3Jhd1NoYXBlID0gdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5jcmVhdGVDb21wb3VuZEZyb21HaW1wYWN0U2hhcGUobWVzaFNoYXBlLCAwKTtcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gfVxuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLmFkZFJpZ2lkQm9keShuZXdCb2R5Ll9yYXdSaWdpZEJvZHksIC0xLCAtMSk7XG4gICAgICAgIC8vIGhhY2ssIHdlIHVzZSB0aGUgd2FzbSBoZWFwIG1lbW9yeSBhZGRyZXNzIGFzIGFuIGlkZW50aWZpZXIsIGl0J3MgZmFzdGVyXG4gICAgICAgIHRoaXMuX2JvZHlNYXAuc2V0KG5ld0JvZHkuX3Jhd1JpZ2lkQm9keS5wdHIsIG5ld0JvZHkpO1xuICAgICAgICByZXR1cm4gbmV3Qm9keTtcbiAgICB9XG4gICAgX2dldFNoYXBlKGRlZiwgaXNEeW5hbWljKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIHN3aXRjaCAoZGVmLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2JveCc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBib3hIYWxmRXh0ZW50ID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICBib3hIYWxmRXh0ZW50LnNldFZhbHVlKGRlZi5zaXplWzBdICogMC41LCBkZWYuc2l6ZVsxXSAqIDAuNSwgZGVmLnNpemVbMl0gKiAwLjUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhd1NoYXBlID0gbmV3IGJ1bGxldC5idEJveFNoYXBlKGJveEhhbGZFeHRlbnQpO1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGJveEhhbGZFeHRlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4gYnVsbGV0LmRlc3Ryb3kocmF3U2hhcGUpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdzcGhlcmUnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3U2hhcGUgPSBuZXcgYnVsbGV0LmJ0U3BoZXJlU2hhcGUoZGVmLnJhZGl1cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGU6IHJhd1NoYXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwOiAoKSA9PiBidWxsZXQuZGVzdHJveShyYXdTaGFwZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2N5bGluZGVyJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJWZWMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYucmFkaXVzLCBkZWYucmFkaXVzLCBkZWYubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByYXdTaGFwZSA9IG5ldyBidWxsZXQuYnRDeWxpbmRlclNoYXBlKGJWZWMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3U2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3koYlZlYyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2NhcHN1bGUnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3U2hhcGUgPSBuZXcgYnVsbGV0LmJ0Q2Fwc3VsZVNoYXBlKGRlZi5yYWRpdXMsIGRlZi5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4gYnVsbGV0LmRlc3Ryb3kocmF3U2hhcGUpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdtZXNoJzoge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IG1lbW9yeSBsZWFrXG4gICAgICAgICAgICAgICAgY29uc3QgdHJpYW5nbGVNZXNoID0gbmV3IGJ1bGxldC5idFRyaWFuZ2xlTWVzaCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJWZWMxID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiVmVjMiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYlZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICAgICAgICAgIGRlZi50cmlhbmdsZXMuZm9yRWFjaCgoW3ZlYzEsIHZlYzIsIHZlYzNdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJWZWMxLnNldFZhbHVlKHZlYzFbMF0sIHZlYzFbMV0sIHZlYzFbMl0pO1xuICAgICAgICAgICAgICAgICAgICBiVmVjMi5zZXRWYWx1ZSh2ZWMyWzBdLCB2ZWMyWzFdLCB2ZWMyWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgYlZlYzMuc2V0VmFsdWUodmVjM1swXSwgdmVjM1sxXSwgdmVjM1syXSk7XG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlTWVzaC5hZGRUcmlhbmdsZShiVmVjMSwgYlZlYzIsIGJWZWMzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShiVmVjMSk7XG4gICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3koYlZlYzIpO1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGJWZWMzKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNEeW5hbWljKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc2hTaGFwZSA9IG5ldyBidWxsZXQuYnRHSW1wYWN0TWVzaFNoYXBlKHRyaWFuZ2xlTWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd1NoYXBlID0gdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5jcmVhdGVDb21wb3VuZEZyb21HaW1wYWN0U2hhcGUobWVzaFNoYXBlLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShyYXdTaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kobWVzaFNoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveSh0cmlhbmdsZU1lc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3U2hhcGUgPSBuZXcgYnVsbGV0LmJ0QnZoVHJpYW5nbGVNZXNoU2hhcGUodHJpYW5nbGVNZXNoLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZTogcmF3U2hhcGUsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHRyaWFuZ2xlTWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2NvbXBvdW5kJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhd0NvbXBvdW5kID0gbmV3IGJ1bGxldC5idENvbXBvdW5kU2hhcGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxSYXdTaGFwZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsUXVhdCA9IG5ldyBidWxsZXQuYnRRdWF0ZXJuaW9uKDAsIDAsIDEsIDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVHJhbnNmb3JtID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyBzaGFwZSwgcG9zaXRpb24sIG9yaWVudGF0aW9uIH0gb2YgZGVmLnNoYXBlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByYXdWYWx1ZXMgPSB0aGlzLl9nZXRTaGFwZShzaGFwZSwgaXNEeW5hbWljKTtcbiAgICAgICAgICAgICAgICAgICAgYWxsUmF3U2hhcGVzLnB1c2gocmF3VmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxWZWMzLnNldFZhbHVlKHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFF1YXQuc2V0VmFsdWUob3JpZW50YXRpb25bMF0sIG9yaWVudGF0aW9uWzFdLCBvcmllbnRhdGlvblsyXSwgb3JpZW50YXRpb25bM10pO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFRyYW5zZm9ybS5zZXRPcmlnaW4obG9jYWxWZWMzKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxUcmFuc2Zvcm0uc2V0Um90YXRpb24obG9jYWxRdWF0KTtcbiAgICAgICAgICAgICAgICAgICAgcmF3Q29tcG91bmQuYWRkQ2hpbGRTaGFwZShsb2NhbFRyYW5zZm9ybSwgcmF3VmFsdWVzLnNoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VyclNoYXBlLnBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGN1cnJTaGFwZS5vcmllbnRhdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBjdXJyU2hhcGUuc2hhcGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kobG9jYWxWZWMzKTtcbiAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShsb2NhbFF1YXQpO1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGxvY2FsVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZTogcmF3Q29tcG91bmQsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd0NvbXBvdW5kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY3VyclJhd1NoYXBlIG9mIGFsbFJhd1NoYXBlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGN1cnJSYXdTaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95UmlnaWRCb2R5KHJpZ2lkQm9keSkge1xuICAgICAgICBjb25zdCByYXdSaWdpZEJvZHkgPSByaWdpZEJvZHkuX3Jhd1JpZ2lkQm9keTtcbiAgICAgICAgY29uc3QgYm9keVB0ciA9IHJhd1JpZ2lkQm9keS5wdHI7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQucmVtb3ZlUmlnaWRCb2R5KHJhd1JpZ2lkQm9keSk7XG4gICAgICAgIC8vIGhhY2ssIHdlIHVzZSB0aGUgd2FzbSBoZWFwIG1lbW9yeSBhZGRyZXNzIGFzIGFuIGlkZW50aWZpZXIsIGl0J3MgZmFzdGVyXG4gICAgICAgIHRoaXMuX2JvZHlNYXAuZGVsZXRlKGJvZHlQdHIpO1xuICAgICAgICByaWdpZEJvZHkuZGlzcG9zZSgpO1xuICAgICAgICAvLyBkZXN0cm95IGFueSBjb25zdHJhaW50cyB0aGF0IG1pZ2h0IGFmZmVjdCB0aGlzIGJvZHlcbiAgICAgICAgY29uc3QgYm9keUxpc3RPZkNvbnN0cmFpbnRzID0gdGhpcy5fY29uc3RyYWludE1hcC5nZXQoYm9keVB0cik7XG4gICAgICAgIGlmIChib2R5TGlzdE9mQ29uc3RyYWludHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY3VyckNvbnN0cmFpbnQgb2YgYm9keUxpc3RPZkNvbnN0cmFpbnRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95R2VuZXJpYzZEb2ZDb25zdHJhaW50KGN1cnJDb25zdHJhaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBkZXN0cm95IGFueSBjb25zdHJhaW50cyB0aGF0IG1pZ2h0IGFmZmVjdCB0aGlzIGJvZHlcbiAgICAgICAgY29uc3QgYm9keUxpc3RPZkNvbnN0cmFpbnRzMiA9IHRoaXMuX2NvbnN0cmFpbnRNYXAyLmdldChib2R5UHRyKTtcbiAgICAgICAgaWYgKGJvZHlMaXN0T2ZDb25zdHJhaW50czIpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY3VyckNvbnN0cmFpbnQgb2YgYm9keUxpc3RPZkNvbnN0cmFpbnRzMikge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveUhpbmdlQ29uc3RyYWludChjdXJyQ29uc3RyYWludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogem9tYmllIGJvZGllcyBjb3VsZCBzdGlsbCBiZSByZWYvdXNlZCwgY2FuIGl0IGJlIHByZXZlbnRlZD9cbiAgICAgICAgLy8gLT4gcmF3IHJpZ2lkIGJvZHkgaXMgc2V0IHRvIG51bGwgaW5zaWRlXG4gICAgICAgIC8vIC0+IHNob3VsZCBmaW5kIGEgZnJpZW5kbGllciB3YXlcbiAgICB9XG4gICAgY3JlYXRlVmVoaWNsZShkZWYpIHtcbiAgICAgICAgY29uc3QgbmV3Qm9keSA9IHRoaXMuY3JlYXRlUmlnaWRCb2R5KGRlZi5jaGFzc2lzRGVmKTtcbiAgICAgICAgY29uc3QgcmF3UmlnaWRCb2R5ID0gbmV3Qm9keTtcbiAgICAgICAgY29uc3QgdmVoaWNsZSA9IG5ldyBDb25jcmV0ZVBoeXNpY1ZlaGljbGUodGhpcy5fcmF3RHluYW1pY3NXb3JsZCwgcmF3UmlnaWRCb2R5LCBkZWYpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLmFkZEFjdGlvbih2ZWhpY2xlLl9yYXdWZWhpY2xlKTtcbiAgICAgICAgLy8gaGFjaywgd2UgdXNlIHRoZSB3YXNtIGhlYXAgbWVtb3J5IGFkZHJlc3MgYXMgYW4gaWRlbnRpZmllciwgaXQncyBmYXN0ZXJcbiAgICAgICAgdGhpcy5fdmVoaWNsZU1hcC5zZXQodmVoaWNsZS5wdHIsIHZlaGljbGUpO1xuICAgICAgICByZXR1cm4gdmVoaWNsZTtcbiAgICB9XG4gICAgZGVzdHJveVZlaGljbGUodmVoaWNsZSkge1xuICAgICAgICB0aGlzLmRlc3Ryb3lSaWdpZEJvZHkodmVoaWNsZS5fY2hhc3Npc0JvZHkpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnJlbW92ZUFjdGlvbih2ZWhpY2xlLl9yYXdWZWhpY2xlKTtcbiAgICAgICAgLy8gaGFjaywgd2UgdXNlIHRoZSB3YXNtIGhlYXAgbWVtb3J5IGFkZHJlc3MgYXMgYW4gaWRlbnRpZmllciwgaXQncyBmYXN0ZXJcbiAgICAgICAgdGhpcy5fdmVoaWNsZU1hcC5kZWxldGUodmVoaWNsZS5wdHIpO1xuICAgICAgICB2ZWhpY2xlLmRpc3Bvc2UoKTtcbiAgICAgICAgLy8gVE9ETzogem9tYmllIHZlaGljbGVzIGNvdWxkIHN0aWxsIGJlIHJlZi91c2VkLCBjYW4gaXQgYmUgcHJldmVudGVkP1xuICAgIH1cbiAgICBjcmVhdGVHZW5lcmljNkRvZkNvbnN0cmFpbnQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgQ29uY3JldGVHZW5lcmljNkRvZkNvbnN0cmFpbnQoZGVmKTtcbiAgICAgICAgLy8gZ2V0IG9yIGNyZWF0ZVxuICAgICAgICBjb25zdCBwdHJBID0gZGVmLmJvZHlBLl9yYXdSaWdpZEJvZHkucHRyO1xuICAgICAgICBsZXQgYm9keUxpc3RBID0gdGhpcy5fY29uc3RyYWludE1hcC5nZXQocHRyQSk7XG4gICAgICAgIGlmICghYm9keUxpc3RBKSB7XG4gICAgICAgICAgICBib2R5TGlzdEEgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAuc2V0KHB0ckEsIGJvZHlMaXN0QSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSBjb25zdHJhaW50IGFnYWluc3QgYm9keUEgcG9pbnRlciB2YWx1ZVxuICAgICAgICBib2R5TGlzdEEucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgLy8gZ2V0IG9yIGNyZWF0ZVxuICAgICAgICBjb25zdCBwdHJCID0gZGVmLmJvZHlCLl9yYXdSaWdpZEJvZHkucHRyO1xuICAgICAgICBsZXQgYm9keUxpc3RCID0gdGhpcy5fY29uc3RyYWludE1hcC5nZXQocHRyQik7XG4gICAgICAgIGlmICghYm9keUxpc3RCKSB7XG4gICAgICAgICAgICBib2R5TGlzdEIgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAuc2V0KHB0ckEsIGJvZHlMaXN0Qik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSBjb25zdHJhaW50IGFnYWluc3QgYm9keUIgcG9pbnRlciB2YWx1ZVxuICAgICAgICBib2R5TGlzdEIucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQuX3Jhd0NvbnN0cmFpbnQsIHRydWUpO1xuICAgICAgICAvLyBUT0RPOiBzYXZlIGluIG1hcFxuICAgICAgICAvLyBUT0RPOiBkaXNjYXJkIGlmIG9uZSBvZiB0aGUgYm9keSBpcyByZW1vdmVkXG4gICAgICAgIHJldHVybiBjb25zdHJhaW50O1xuICAgIH1cbiAgICBkZXN0cm95R2VuZXJpYzZEb2ZDb25zdHJhaW50KGNvbnN0cmFpbnQpIHtcbiAgICAgICAgY29uc3QgY29uY3JldGUgPSBjb25zdHJhaW50O1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnJlbW92ZUNvbnN0cmFpbnQoY29uY3JldGUuX3Jhd0NvbnN0cmFpbnQpO1xuICAgICAgICAvLyByZW1vdmUgY29uc3RyYWludHMgZnJvbSB0aGUgbWFwIHZhbHVlIChib2R5QSlcbiAgICAgICAgY29uc3QgYm9keUxpc3RBID0gdGhpcy5fY29uc3RyYWludE1hcC5nZXQoY29uY3JldGUuX2JvZHlBLl9yYXdSaWdpZEJvZHkucHRyKTtcbiAgICAgICAgaWYgKGJvZHlMaXN0QSkge1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY29uc3RyYWludCBhbmQgcmVtb3ZlIGl0XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGJvZHlMaXN0QS5pbmRleE9mKGNvbmNyZXRlKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYm9keUxpc3RBLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIGNvbnN0cmFpbnRzIGZyb20gdGhlIG1hcCAoYm9keUIpXG4gICAgICAgIGNvbnN0IGJvZHlMaXN0QiA9IHRoaXMuX2NvbnN0cmFpbnRNYXAuZ2V0KGNvbmNyZXRlLl9ib2R5Qi5fcmF3UmlnaWRCb2R5LnB0cik7XG4gICAgICAgIGlmIChib2R5TGlzdEIpIHtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvbnN0cmFpbnQgYW5kIHJlbW92ZSBpdFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBib2R5TGlzdEIuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGJvZHlMaXN0Qi5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIGxpc3Qgb2YgYWxsIGNvbnN0cmFpbnRzXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fYWxsQ29uc3RyYWludHMuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50cy5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICB9XG4gICAgICAgIGNvbmNyZXRlLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgY3JlYXRlSGluZ2VDb25zdHJhaW50KGRlZikge1xuICAgICAgICBjb25zdCBjb25zdHJhaW50ID0gbmV3IENvbmNyZXRlSGluZ2VDb25zdHJhaW50KGRlZik7XG4gICAgICAgIC8vIGdldCBvciBjcmVhdGVcbiAgICAgICAgY29uc3QgcHRyQSA9IGRlZi5ib2R5QS5fcmF3UmlnaWRCb2R5LnB0cjtcbiAgICAgICAgbGV0IGJvZHlMaXN0QSA9IHRoaXMuX2NvbnN0cmFpbnRNYXAyLmdldChwdHJBKTtcbiAgICAgICAgaWYgKCFib2R5TGlzdEEpIHtcbiAgICAgICAgICAgIGJvZHlMaXN0QSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcDIuc2V0KHB0ckEsIGJvZHlMaXN0QSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2F2ZSBjb25zdHJhaW50IGFnYWluc3QgYm9keUEgcG9pbnRlciB2YWx1ZVxuICAgICAgICBib2R5TGlzdEEucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgLy8gZ2V0IG9yIGNyZWF0ZVxuICAgICAgICBjb25zdCBwdHJCID0gZGVmLmJvZHlCLl9yYXdSaWdpZEJvZHkucHRyO1xuICAgICAgICBsZXQgYm9keUxpc3RCID0gdGhpcy5fY29uc3RyYWludE1hcDIuZ2V0KHB0ckIpO1xuICAgICAgICBpZiAoIWJvZHlMaXN0Qikge1xuICAgICAgICAgICAgYm9keUxpc3RCID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwMi5zZXQocHRyQSwgYm9keUxpc3RCKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzYXZlIGNvbnN0cmFpbnQgYWdhaW5zdCBib2R5QiBwb2ludGVyIHZhbHVlXG4gICAgICAgIGJvZHlMaXN0Qi5wdXNoKGNvbnN0cmFpbnQpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50czIucHVzaChjb25zdHJhaW50KTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQuX3Jhd0NvbnN0cmFpbnQsIHRydWUpO1xuICAgICAgICAvLyBUT0RPOiBzYXZlIGluIG1hcFxuICAgICAgICAvLyBUT0RPOiBkaXNjYXJkIGlmIG9uZSBvZiB0aGUgYm9keSBpcyByZW1vdmVkXG4gICAgICAgIHJldHVybiBjb25zdHJhaW50O1xuICAgIH1cbiAgICBkZXN0cm95SGluZ2VDb25zdHJhaW50KGNvbnN0cmFpbnQpIHtcbiAgICAgICAgY29uc3QgY29uY3JldGUgPSBjb25zdHJhaW50O1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnJlbW92ZUNvbnN0cmFpbnQoY29uY3JldGUuX3Jhd0NvbnN0cmFpbnQpO1xuICAgICAgICAvLyByZW1vdmUgY29uc3RyYWludHMgZnJvbSB0aGUgbWFwIHZhbHVlIChib2R5QSlcbiAgICAgICAgY29uc3QgYm9keUxpc3RBID0gdGhpcy5fY29uc3RyYWludE1hcDIuZ2V0KGNvbmNyZXRlLl9ib2R5QS5fcmF3UmlnaWRCb2R5LnB0cik7XG4gICAgICAgIGlmIChib2R5TGlzdEEpIHtcbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIGNvbnN0cmFpbnQgYW5kIHJlbW92ZSBpdFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBib2R5TGlzdEEuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGJvZHlMaXN0QS5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSBjb25zdHJhaW50cyBmcm9tIHRoZSBtYXAgKGJvZHlCKVxuICAgICAgICBjb25zdCBib2R5TGlzdEIgPSB0aGlzLl9jb25zdHJhaW50TWFwMi5nZXQoY29uY3JldGUuX2JvZHlCLl9yYXdSaWdpZEJvZHkucHRyKTtcbiAgICAgICAgaWYgKGJvZHlMaXN0Qikge1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY29uc3RyYWludCBhbmQgcmVtb3ZlIGl0XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGJvZHlMaXN0Qi5pbmRleE9mKGNvbmNyZXRlKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYm9keUxpc3RCLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIGZyb20gbGlzdCBvZiBhbGwgY29uc3RyYWludHNcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9hbGxDb25zdHJhaW50czIuaW5kZXhPZihjb25jcmV0ZSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50czIuc3BsaWNlKGluZGV4LCAwKTtcbiAgICAgICAgfVxuICAgICAgICBjb25jcmV0ZS5kaXNwb3NlKCk7XG4gICAgfVxuICAgIHJheUNhc3QoZnJvbSwgdG8pIHtcbiAgICAgICAgcmV0dXJuIHJheUNhc3QodGhpcy5fcmF3RHluYW1pY3NXb3JsZCwgdGhpcy5fYm9keU1hcCwge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IC0xLFxuICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyTWFzazogLTFcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnZleFN3ZWVwKGZyb20sIHRvLCByYWRpdXMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnZleFN3ZWVwKHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQsIHtcbiAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICB0byxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiAtMSxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IC0xLFxuICAgICAgICAgICAgcmFkaXVzOiByYWRpdXNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9pbml0Q29sbGlzaW9uRXZlbnRzKCkge1xuICAgICAgICBjb25zdCBldmVudEZsYWdzID0ge1xuICAgICAgICAgICAgd29ybGQ6IDEgPDwgMCxcbiAgICAgICAgICAgIGJvZHlBOiAxIDw8IDEsXG4gICAgICAgICAgICBib2R5QjogMSA8PCAyXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IF9vbkNvbnRhY3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvZHlBID0gZXZlbnQuZGF0YS5nZXRCb2R5QSgpO1xuICAgICAgICAgICAgY29uc3QgYm9keUIgPSBldmVudC5kYXRhLmdldEJvZHlCKCk7XG4gICAgICAgICAgICBjb25zdCByaWdpZEJvZHlBID0gdGhpcy5fYm9keU1hcC5nZXQoYm9keUEucHRyKTtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2lkQm9keUIgPSB0aGlzLl9ib2R5TWFwLmdldChib2R5Qi5wdHIpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ19vbkNvbnRhY3RDaGFuZ2UnKTtcbiAgICAgICAgICAgIGlmICghcmlnaWRCb2R5QSB8fCAhcmlnaWRCb2R5Qikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBldmVudC50eXBlO1xuICAgICAgICAgICAgY29uc3QgY29sbGlzaW9uRmxhZyA9ICgodGhpcy5pc0V2ZW50TGlzdGVuZWRUbyh0eXBlKSA/IGV2ZW50RmxhZ3Mud29ybGQgOiAwKSB8XG4gICAgICAgICAgICAgICAgKHJpZ2lkQm9keUEuaXNFdmVudExpc3RlbmVkVG8odHlwZSkgPyBldmVudEZsYWdzLmJvZHlBIDogMCkgfFxuICAgICAgICAgICAgICAgIChyaWdpZEJvZHlCLmlzRXZlbnRMaXN0ZW5lZFRvKHR5cGUpID8gZXZlbnRGbGFncy5ib2R5QiA6IDApKTtcbiAgICAgICAgICAgIGlmIChjb2xsaXNpb25GbGFnID09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb250YWN0SWQgPSBldmVudC5kYXRhLmdldElkKCk7XG4gICAgICAgICAgICBjb25zdCBidWxsZXRQb3MgPSBldmVudC5kYXRhLmdldFBvc2l0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBidWxsZXROb3JtYWxCID0gZXZlbnQuZGF0YS5nZXROb3JtYWxCKCk7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICB4OiBidWxsZXRQb3MueCgpLFxuICAgICAgICAgICAgICAgIHk6IGJ1bGxldFBvcy55KCksXG4gICAgICAgICAgICAgICAgejogYnVsbGV0UG9zLnooKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBub3JtYWxCID0ge1xuICAgICAgICAgICAgICAgIHg6IGJ1bGxldE5vcm1hbEIueCgpLFxuICAgICAgICAgICAgICAgIHk6IGJ1bGxldE5vcm1hbEIueSgpLFxuICAgICAgICAgICAgICAgIHo6IGJ1bGxldE5vcm1hbEIueigpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjb2xsaXNpb25GbGFnICYgZXZlbnRGbGFncy53b3JsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2lkQm9keUEsXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdpZEJvZHlCLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZyb21WYWx1ZXMkMShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEI6IGZyb21WYWx1ZXMkMShub3JtYWxCLngsIG5vcm1hbEIueSwgbm9ybWFsQi56KSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbGxpc2lvbkZsYWcgJiBldmVudEZsYWdzLmJvZHlBKSB7XG4gICAgICAgICAgICAgICAgcmlnaWRCb2R5QS5kaXNwYXRjaEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXI6IHJpZ2lkQm9keUIsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbjogeyB4OiBwb3NpdGlvbi54LCB5OiBwb3NpdGlvbi55LCB6OiBwb3NpdGlvbi56IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3JtYWxCOiB7IHg6IC1ub3JtYWxCLngsIHk6IC1ub3JtYWxCLnksIHo6IC1ub3JtYWxCLnogfVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZyb21WYWx1ZXMkMShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEI6IGZyb21WYWx1ZXMkMSgtbm9ybWFsQi54LCAtbm9ybWFsQi55LCAtbm9ybWFsQi56KSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbGxpc2lvbkZsYWcgJiBldmVudEZsYWdzLmJvZHlCKSB7XG4gICAgICAgICAgICAgICAgcmlnaWRCb2R5Qi5kaXNwYXRjaEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3RoZXI6IHJpZ2lkQm9keUEsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbjogeyB4OiBwb3NpdGlvbi54LCB5OiBwb3NpdGlvbi55LCB6OiBwb3NpdGlvbi56IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3JtYWxCOiB7IHg6IG5vcm1hbEIueCwgeTogbm9ybWFsQi55LCB6OiBub3JtYWxCLnogfVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGZyb21WYWx1ZXMkMShwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbEI6IGZyb21WYWx1ZXMkMShub3JtYWxCLngsIG5vcm1hbEIueSwgbm9ybWFsQi56KSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBoYWNreVxuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBidWxsZXQub24oXCJiZWdpbkNvbnRhY3RcIiwgX29uQ29udGFjdENoYW5nZSk7XG4gICAgICAgIGJ1bGxldC5vbihcInVwZGF0ZUNvbnRhY3RcIiwgX29uQ29udGFjdENoYW5nZSk7XG4gICAgICAgIGJ1bGxldC5vbihcImVuZENvbnRhY3RcIiwgX29uQ29udGFjdENoYW5nZSk7XG4gICAgICAgIGJ1bGxldC5vbihcImNjZENvbnRhY3RcIiwgX29uQ29udGFjdENoYW5nZSk7XG4gICAgICAgIGJ1bGxldC5saXN0ZW5Ub0NvbnRhY3RDYWxsYmFja3MoKTtcbiAgICB9XG4gICAgc3RlcFNpbXVsYXRpb24oZGVsdGFUaW1lU2VjLCBtYXhTdWJTdGVwcyA9IDMsIGZpeGVkU3RlcCA9IDEgLyA2MCkge1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnN0ZXBTaW11bGF0aW9uKGRlbHRhVGltZVNlYywgbWF4U3ViU3RlcHMsIGZpeGVkU3RlcCk7XG4gICAgfVxuICAgIHNldEdyYXZpdHkoeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWZWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5zZXRHcmF2aXR5KG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIHNldERlYnVnV2lyZWZyYW1lQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgY29udGFjdFB0ciA9IGJ1bGxldC5hZGRGdW5jdGlvbihjYWxsYmFjaywgXCJ2ZmZmZmZmZmZmXCIpOyAvLyB2ZmZmZmZmZmZmIC0+IFZvaWQgRmxvYXQgRmxvYXQgLi4uXG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuc2V0RGVidWdXaXJlZnJhbWVDYWxsYmFjayhjb250YWN0UHRyKTtcbiAgICB9XG4gICAgc2V0RGVidWdXaXJlZnJhbWVGZWF0dXJlc0ZsYWcoZmxhZykge1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnNldERlYnVnV2lyZWZyYW1lRmVhdHVyZXNGbGFnKGZsYWcpO1xuICAgIH1cbiAgICBkZWJ1Z0RyYXdXb3JsZCgpIHtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5kZWJ1Z0RyYXdXb3JsZCgpO1xuICAgIH1cbn1cblxudmFyIERlYnVnRHJhd0ZsYWdzO1xuKGZ1bmN0aW9uIChEZWJ1Z0RyYXdGbGFncykge1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX05vRGVidWdcIl0gPSAwXSA9IFwiREJHX05vRGVidWdcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3V2lyZWZyYW1lXCJdID0gMV0gPSBcIkRCR19EcmF3V2lyZWZyYW1lXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd0FhYmJcIl0gPSAyXSA9IFwiREJHX0RyYXdBYWJiXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd0ZlYXR1cmVzVGV4dFwiXSA9IDRdID0gXCJEQkdfRHJhd0ZlYXR1cmVzVGV4dFwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdDb250YWN0UG9pbnRzXCJdID0gOF0gPSBcIkRCR19EcmF3Q29udGFjdFBvaW50c1wiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX05vRGVhY3RpdmF0aW9uXCJdID0gMTZdID0gXCJEQkdfTm9EZWFjdGl2YXRpb25cIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19Ob0hlbHBUZXh0XCJdID0gMzJdID0gXCJEQkdfTm9IZWxwVGV4dFwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdUZXh0XCJdID0gNjRdID0gXCJEQkdfRHJhd1RleHRcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19Qcm9maWxlVGltaW5nc1wiXSA9IDEyOF0gPSBcIkRCR19Qcm9maWxlVGltaW5nc1wiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0VuYWJsZVNhdENvbXBhcmlzb25cIl0gPSAyNTZdID0gXCJEQkdfRW5hYmxlU2F0Q29tcGFyaXNvblwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0Rpc2FibGVCdWxsZXRMQ1BcIl0gPSA1MTJdID0gXCJEQkdfRGlzYWJsZUJ1bGxldExDUFwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0VuYWJsZUNDRFwiXSA9IDEwMjRdID0gXCJEQkdfRW5hYmxlQ0NEXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd0NvbnN0cmFpbnRzXCJdID0gMjA0OF0gPSBcIkRCR19EcmF3Q29uc3RyYWludHNcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3Q29uc3RyYWludExpbWl0c1wiXSA9IDQwOTZdID0gXCJEQkdfRHJhd0NvbnN0cmFpbnRMaW1pdHNcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19GYXN0V2lyZWZyYW1lXCJdID0gODE5Ml0gPSBcIkRCR19GYXN0V2lyZWZyYW1lXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd05vcm1hbHNcIl0gPSAxNjM4NF0gPSBcIkRCR19EcmF3Tm9ybWFsc1wiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdGcmFtZXNcIl0gPSAzMjc2OF0gPSBcIkRCR19EcmF3RnJhbWVzXCI7XG59KShEZWJ1Z0RyYXdGbGFncyB8fCAoRGVidWdEcmF3RmxhZ3MgPSB7fSkpO1xuXG52YXIgaW5kZXggPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIENvbmNyZXRlUGh5c2ljQm9keTogQ29uY3JldGVQaHlzaWNCb2R5LFxuICAgIENvbmNyZXRlUGh5c2ljVmVoaWNsZTogQ29uY3JldGVQaHlzaWNWZWhpY2xlLFxuICAgIENvbnRhY3RFdmVudEhhbmRsZXI6IENvbnRhY3RFdmVudEhhbmRsZXIsXG4gICAgZ2V0IERlYnVnRHJhd0ZsYWdzICgpIHsgcmV0dXJuIERlYnVnRHJhd0ZsYWdzOyB9LFxuICAgIFBoeXNpY1dvcmxkOiBQaHlzaWNXb3JsZCxcbiAgICBXYXNtTW9kdWxlSG9sZGVyOiBXYXNtTW9kdWxlSG9sZGVyLFxuICAgIGNvbnZleFN3ZWVwOiBjb252ZXhTd2VlcCxcbiAgICByYXlDYXN0OiByYXlDYXN0XG59KTtcblxuZXhwb3J0cy5Ccm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlID0gQnJvd3NlckZyYW5rZW5QaHlzV2FzbU1vZHVsZTtcbmV4cG9ydHMucGh5c2ljcyA9IGluZGV4O1xuIiwKICAiJ3VzZSBzdHJpY3QnO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UsIFN1cHByZXNzZWRFcnJvciwgU3ltYm9sLCBJdGVyYXRvciAqL1xyXG5cclxuXHJcbmZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbnR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xyXG59O1xuXG5jb25zdCBzY3JpcHRMb2FkaW5nVXRpbGl0eSA9IChpblNyYykgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHNjcmlwdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICBzY3JpcHRFbGVtZW50LnNyYyA9IGluU3JjO1xuICAgICAgICAvLyBzY3JpcHRFbGVtZW50Lm9ucHJvZ3Jlc3MgPSAoZXZlbnQpID0+IGxvZ2dlci5sb2coXCJldmVudFwiLCBldmVudCk7XG4gICAgICAgIHNjcmlwdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlc29sdmUpO1xuICAgICAgICBzY3JpcHRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHRFbGVtZW50KTtcbiAgICB9KTtcbn07XG5cbmNsYXNzIEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUge1xuICAgIHN0YXRpYyBsb2FkKG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUubG9hZEpzUGFydChvcHRzLmpzVXJsKTtcbiAgICAgICAgICAgIHlpZWxkIEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUubG9hZFdhc21QYXJ0KG9wdHMud2FzbVVybCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbG9hZEpzUGFydCh1cmwpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIHNjcmlwdExvYWRpbmdVdGlsaXR5KHVybCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbG9hZFdhc21QYXJ0KHVybFByZWZpeCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgQnJvd3NlckZyYW5rZW5QaHlzV2FzbU1vZHVsZS5fd2FzbU1vZHVsZSA9IHlpZWxkIEZyYW5rZW5QaHlzTG9hZGVyKHtcbiAgICAgICAgICAgICAgICBsb2NhdGVGaWxlOiAodXJsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHt1cmxQcmVmaXh9LyR7dXJsfWA7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBUT1RBTF9NRU1PUlk6IDEgKiAxMDI0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5fd2FzbU1vZHVsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnJhbmtlblBoeXMgd2FzbSBtb2R1bGUgbm90IGxvYWRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fd2FzbU1vZHVsZTtcbiAgICB9XG59XG5cbmNsYXNzIENvbnRhY3RFdmVudEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8vIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIH1cbiAgICBpc0V2ZW50TGlzdGVuZWRUbyh0eXBlKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc01hcC5nZXQodHlwZSk7XG4gICAgICAgIHJldHVybiAoISFsaXN0ZW5lcnMgJiYgbGlzdGVuZXJzLmxlbmd0aCA+IDApO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIC8vIGlmICghdGhpcy5pc0V2ZW50QWxsb3dlZCh0eXBlKSlcbiAgICAgICAgLy8gXHRyZXR1cm4gRXJyb3JIYW5kbGVyLnJlcG9ydEVycm9yKGBldmVudCB0eXBlIG5vdCBpbiB0aGUgd2hpdGUgbGlzdCwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgIGxldCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNNYXAuZ2V0KHR5cGUpO1xuICAgICAgICBpZiAoIWxpc3RlbmVycykge1xuICAgICAgICAgICAgbGlzdGVuZXJzID0gW107XG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnNNYXAuc2V0KHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGlydHkgY2FzdFxuICAgICAgICBpZiAobGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpICE9PSAtMSkge1xuICAgICAgICAgICAgLy8gcmV0dXJuIEVycm9ySGFuZGxlci5yZXBvcnRFcnJvcihgZHVwbGljYXRlIGV2ZW50IGxpc3RlbmVyLCB0eXBlPSR7dHlwZX1gKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZHVwbGljYXRlZCBldmVudCBsaXN0ZW5lciwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGlydHkgY2FzdFxuICAgICAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuICAgIG9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIGhhc0V2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgLy8gaWYgKCF0aGlzLmlzRXZlbnRBbGxvd2VkKHR5cGUpKVxuICAgICAgICAvLyBcdHJldHVybiBFcnJvckhhbmRsZXIucmVwb3J0RXJyb3IoYGV2ZW50IHR5cGUgbm90IGluIHRoZSB3aGl0ZSBsaXN0LCB0eXBlPSR7dHlwZX1gKTtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzTWFwLmdldCh0eXBlKTtcbiAgICAgICAgLy8gZGlydHkgY2FzdFxuICAgICAgICByZXR1cm4gKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkICYmIGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSAhPT0gLTEpO1xuICAgIH1cbiAgICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIC8vIGlmICghdGhpcy5pc0V2ZW50QWxsb3dlZCh0eXBlKSlcbiAgICAgICAgLy8gXHRyZXR1cm4gRXJyb3JIYW5kbGVyLnJlcG9ydEVycm9yKGBldmVudCB0eXBlIG5vdCBpbiB0aGUgd2hpdGUgbGlzdCwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc01hcC5nZXQodHlwZSk7XG4gICAgICAgIGlmIChsaXN0ZW5lcnMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBldmVudCBsaXN0ZW5lciwgdHlwZT0ke3R5cGV9YCk7XG4gICAgICAgICAgICAvLyByZXR1cm4gRXJyb3JIYW5kbGVyLnJlcG9ydEVycm9yKGB1bmtub3duIGV2ZW50IGxpc3RlbmVyLCB0eXBlPSR7dHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgZGlzcGF0Y2hFdmVudChldmVudCkge1xuICAgICAgICAvLyBpZiAoIXRoaXMuaXNFdmVudEFsbG93ZWQoZXZlbnQudHlwZSkpXG4gICAgICAgIC8vIFx0cmV0dXJuIEVycm9ySGFuZGxlci5yZXBvcnRFcnJvcihgZXZlbnQgdHlwZSBub3QgaW4gdGhlIHdoaXRlIGxpc3QsIHR5cGU9JHtldmVudC50eXBlfWApO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNNYXAuZ2V0KGV2ZW50LnR5cGUpO1xuICAgICAgICBpZiAobGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBldmVudC50YXJnZXQgPSB0aGlzO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnNDb3B5ID0gbGlzdGVuZXJzLnNsaWNlKDApO1xuICAgICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbGlzdGVuZXJzQ29weS5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc0NvcHlbaWldLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBXYXNtTW9kdWxlSG9sZGVyIHtcbiAgICBzdGF0aWMgc2V0KHdhc21Nb2R1bGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIFdhc21Nb2R1bGVIb2xkZXIuX3dhc21Nb2R1bGUgPSB3YXNtTW9kdWxlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGdldCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl93YXNtTW9kdWxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGcmFua2VuUGh5cyB3YXNtIG1vZHVsZSBub3QgbG9hZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl93YXNtTW9kdWxlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21tb24gdXRpbGl0aWVzXG4gKiBAbW9kdWxlIGdsTWF0cml4XG4gKi9cbi8vIENvbmZpZ3VyYXRpb24gQ29uc3RhbnRzXG52YXIgRVBTSUxPTiA9IDAuMDAwMDAxO1xudmFyIEFSUkFZX1RZUEUgPSB0eXBlb2YgRmxvYXQzMkFycmF5ICE9PSAndW5kZWZpbmVkJyA/IEZsb2F0MzJBcnJheSA6IEFycmF5O1xuaWYgKCFNYXRoLmh5cG90KSBNYXRoLmh5cG90ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgeSA9IDAsXG4gICAgICBpID0gYXJndW1lbnRzLmxlbmd0aDtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgeSArPSBhcmd1bWVudHNbaV0gKiBhcmd1bWVudHNbaV07XG4gIH1cblxuICByZXR1cm4gTWF0aC5zcXJ0KHkpO1xufTtcblxuLyoqXG4gKiAzeDMgTWF0cml4XG4gKiBAbW9kdWxlIG1hdDNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgbWF0M1xuICpcbiAqIEByZXR1cm5zIHttYXQzfSBhIG5ldyAzeDMgbWF0cml4XG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlJDQoKSB7XG4gIHZhciBvdXQgPSBuZXcgQVJSQVlfVFlQRSg5KTtcblxuICBpZiAoQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNV0gPSAwO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgfVxuXG4gIG91dFswXSA9IDE7XG4gIG91dFs0XSA9IDE7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG5cbi8qKlxuICogMyBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBtb2R1bGUgdmVjM1xuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjM1xuICpcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGUkMygpIHtcbiAgdmFyIG91dCA9IG5ldyBBUlJBWV9UWVBFKDMpO1xuXG4gIGlmIChBUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG5cbmZ1bmN0aW9uIGxlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHksIHopO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzMgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzN9IGEgbmV3IDNEIHZlY3RvclxuICovXG5cbmZ1bmN0aW9uIGZyb21WYWx1ZXMkMSh4LCB5LCB6KSB7XG4gIHZhciBvdXQgPSBuZXcgQVJSQVlfVFlQRSgzKTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZnVuY3Rpb24gbm9ybWFsaXplJDIob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciBsZW4gPSB4ICogeCArIHkgKiB5ICsgeiAqIHo7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICAvL1RPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlP1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IGFbMF0gKiBsZW47XG4gIG91dFsxXSA9IGFbMV0gKiBsZW47XG4gIG91dFsyXSA9IGFbMl0gKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKi9cblxuZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsxXSAqIGJbMV0gKyBhWzJdICogYlsyXTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cblxuZnVuY3Rpb24gY3Jvc3Mob3V0LCBhLCBiKSB7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl07XG4gIHZhciBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl07XG4gIG91dFswXSA9IGF5ICogYnogLSBheiAqIGJ5O1xuICBvdXRbMV0gPSBheiAqIGJ4IC0gYXggKiBiejtcbiAgb3V0WzJdID0gYXggKiBieSAtIGF5ICogYng7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xuXG52YXIgbGVuID0gbGVuZ3RoO1xuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjM3MuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjMy4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzNzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIHZhciB2ZWMgPSBjcmVhdGUkMygpO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgIHZhciBpLCBsO1xuXG4gICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgIHN0cmlkZSA9IDM7XG4gICAgfVxuXG4gICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBsID0gTWF0aC5taW4oY291bnQgKiBzdHJpZGUgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IGEubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGw7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2ZWNbMF0gPSBhW2ldO1xuICAgICAgdmVjWzFdID0gYVtpICsgMV07XG4gICAgICB2ZWNbMl0gPSBhW2kgKyAyXTtcbiAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgYVtpXSA9IHZlY1swXTtcbiAgICAgIGFbaSArIDFdID0gdmVjWzFdO1xuICAgICAgYVtpICsgMl0gPSB2ZWNbMl07XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KSgpO1xuXG4vKipcbiAqIDQgRGltZW5zaW9uYWwgVmVjdG9yXG4gKiBAbW9kdWxlIHZlYzRcbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzRcbiAqXG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlJDIoKSB7XG4gIHZhciBvdXQgPSBuZXcgQVJSQVlfVFlQRSg0KTtcblxuICBpZiAoQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cblxuZnVuY3Rpb24gZnJvbVZhbHVlcyh4LCB5LCB6LCB3KSB7XG4gIHZhciBvdXQgPSBuZXcgQVJSQVlfVFlQRSg0KTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cblxuZnVuY3Rpb24gbm9ybWFsaXplJDEob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciB3ID0gYVszXTtcbiAgdmFyIGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3O1xuXG4gIGlmIChsZW4gPiAwKSB7XG4gICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICB9XG5cbiAgb3V0WzBdID0geCAqIGxlbjtcbiAgb3V0WzFdID0geSAqIGxlbjtcbiAgb3V0WzJdID0geiAqIGxlbjtcbiAgb3V0WzNdID0gdyAqIGxlbjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzRzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzQuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWM0cyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgdmVjID0gY3JlYXRlJDIoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICB2YXIgaSwgbDtcblxuICAgIGlmICghc3RyaWRlKSB7XG4gICAgICBzdHJpZGUgPSA0O1xuICAgIH1cblxuICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cblxuICAgIGlmIChjb3VudCkge1xuICAgICAgbCA9IE1hdGgubWluKGNvdW50ICogc3RyaWRlICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmVjWzBdID0gYVtpXTtcbiAgICAgIHZlY1sxXSA9IGFbaSArIDFdO1xuICAgICAgdmVjWzJdID0gYVtpICsgMl07XG4gICAgICB2ZWNbM10gPSBhW2kgKyAzXTtcbiAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgYVtpXSA9IHZlY1swXTtcbiAgICAgIGFbaSArIDFdID0gdmVjWzFdO1xuICAgICAgYVtpICsgMl0gPSB2ZWNbMl07XG4gICAgICBhW2kgKyAzXSA9IHZlY1szXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbiAgfTtcbn0pKCk7XG5cbi8qKlxuICogUXVhdGVybmlvblxuICogQG1vZHVsZSBxdWF0XG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IHF1YXRcbiAqXG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZSQxKCkge1xuICB2YXIgb3V0ID0gbmV3IEFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKEFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBTZXRzIGEgcXVhdCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhbmQgcm90YXRpb24gYXhpcyxcbiAqIHRoZW4gcmV0dXJucyBpdC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBheGlzIHRoZSBheGlzIGFyb3VuZCB3aGljaCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqKi9cblxuZnVuY3Rpb24gc2V0QXhpc0FuZ2xlKG91dCwgYXhpcywgcmFkKSB7XG4gIHJhZCA9IHJhZCAqIDAuNTtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICBvdXRbMF0gPSBzICogYXhpc1swXTtcbiAgb3V0WzFdID0gcyAqIGF4aXNbMV07XG4gIG91dFsyXSA9IHMgKiBheGlzWzJdO1xuICBvdXRbM10gPSBNYXRoLmNvcyhyYWQpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuZnVuY3Rpb24gc2xlcnAob3V0LCBhLCBiLCB0KSB7XG4gIC8vIGJlbmNobWFya3M6XG4gIC8vICAgIGh0dHA6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tc2xlcnAtaW1wbGVtZW50YXRpb25zXG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBhdyA9IGFbM107XG4gIHZhciBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl0sXG4gICAgICBidyA9IGJbM107XG4gIHZhciBvbWVnYSwgY29zb20sIHNpbm9tLCBzY2FsZTAsIHNjYWxlMTsgLy8gY2FsYyBjb3NpbmVcblxuICBjb3NvbSA9IGF4ICogYnggKyBheSAqIGJ5ICsgYXogKiBieiArIGF3ICogYnc7IC8vIGFkanVzdCBzaWducyAoaWYgbmVjZXNzYXJ5KVxuXG4gIGlmIChjb3NvbSA8IDAuMCkge1xuICAgIGNvc29tID0gLWNvc29tO1xuICAgIGJ4ID0gLWJ4O1xuICAgIGJ5ID0gLWJ5O1xuICAgIGJ6ID0gLWJ6O1xuICAgIGJ3ID0gLWJ3O1xuICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHNcblxuXG4gIGlmICgxLjAgLSBjb3NvbSA+IEVQU0lMT04pIHtcbiAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICBvbWVnYSA9IE1hdGguYWNvcyhjb3NvbSk7XG4gICAgc2lub20gPSBNYXRoLnNpbihvbWVnYSk7XG4gICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbm9tO1xuICB9IGVsc2Uge1xuICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAvLyAgLi4uIHNvIHdlIGNhbiBkbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uXG4gICAgc2NhbGUwID0gMS4wIC0gdDtcbiAgICBzY2FsZTEgPSB0O1xuICB9IC8vIGNhbGN1bGF0ZSBmaW5hbCB2YWx1ZXNcblxuXG4gIG91dFswXSA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gIG91dFsxXSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7XG4gIG91dFsyXSA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7XG4gIG91dFszXSA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIDN4MyByb3RhdGlvbiBtYXRyaXguXG4gKlxuICogTk9URTogVGhlIHJlc3VsdGFudCBxdWF0ZXJuaW9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyB5b3Ugc2hvdWxkIGJlIHN1cmVcbiAqIHRvIHJlbm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uIHlvdXJzZWxmIHdoZXJlIG5lY2Vzc2FyeS5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBtIHJvdGF0aW9uIG1hdHJpeFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxuZnVuY3Rpb24gZnJvbU1hdDMob3V0LCBtKSB7XG4gIC8vIEFsZ29yaXRobSBpbiBLZW4gU2hvZW1ha2UncyBhcnRpY2xlIGluIDE5ODcgU0lHR1JBUEggY291cnNlIG5vdGVzXG4gIC8vIGFydGljbGUgXCJRdWF0ZXJuaW9uIENhbGN1bHVzIGFuZCBGYXN0IEFuaW1hdGlvblwiLlxuICB2YXIgZlRyYWNlID0gbVswXSArIG1bNF0gKyBtWzhdO1xuICB2YXIgZlJvb3Q7XG5cbiAgaWYgKGZUcmFjZSA+IDAuMCkge1xuICAgIC8vIHx3fCA+IDEvMiwgbWF5IGFzIHdlbGwgY2hvb3NlIHcgPiAxLzJcbiAgICBmUm9vdCA9IE1hdGguc3FydChmVHJhY2UgKyAxLjApOyAvLyAyd1xuXG4gICAgb3V0WzNdID0gMC41ICogZlJvb3Q7XG4gICAgZlJvb3QgPSAwLjUgLyBmUm9vdDsgLy8gMS8oNHcpXG5cbiAgICBvdXRbMF0gPSAobVs1XSAtIG1bN10pICogZlJvb3Q7XG4gICAgb3V0WzFdID0gKG1bNl0gLSBtWzJdKSAqIGZSb290O1xuICAgIG91dFsyXSA9IChtWzFdIC0gbVszXSkgKiBmUm9vdDtcbiAgfSBlbHNlIHtcbiAgICAvLyB8d3wgPD0gMS8yXG4gICAgdmFyIGkgPSAwO1xuICAgIGlmIChtWzRdID4gbVswXSkgaSA9IDE7XG4gICAgaWYgKG1bOF0gPiBtW2kgKiAzICsgaV0pIGkgPSAyO1xuICAgIHZhciBqID0gKGkgKyAxKSAlIDM7XG4gICAgdmFyIGsgPSAoaSArIDIpICUgMztcbiAgICBmUm9vdCA9IE1hdGguc3FydChtW2kgKiAzICsgaV0gLSBtW2ogKiAzICsgal0gLSBtW2sgKiAzICsga10gKyAxLjApO1xuICAgIG91dFtpXSA9IDAuNSAqIGZSb290O1xuICAgIGZSb290ID0gMC41IC8gZlJvb3Q7XG4gICAgb3V0WzNdID0gKG1baiAqIDMgKyBrXSAtIG1bayAqIDMgKyBqXSkgKiBmUm9vdDtcbiAgICBvdXRbal0gPSAobVtqICogMyArIGldICsgbVtpICogMyArIGpdKSAqIGZSb290O1xuICAgIG91dFtrXSA9IChtW2sgKiAzICsgaV0gKyBtW2kgKiAzICsga10pICogZlJvb3Q7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXG4gKiBOb3JtYWxpemUgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0ZXJuaW9uIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cblxudmFyIG5vcm1hbGl6ZSA9IG5vcm1hbGl6ZSQxO1xuLyoqXG4gKiBTZXRzIGEgcXVhdGVybmlvbiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gb25lXG4gKiB2ZWN0b3IgdG8gYW5vdGhlci5cbiAqXG4gKiBCb3RoIHZlY3RvcnMgYXJlIGFzc3VtZWQgdG8gYmUgdW5pdCBsZW5ndGguXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGluaXRpYWwgdmVjdG9yXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgZGVzdGluYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRtcHZlYzMgPSBjcmVhdGUkMygpO1xuICB2YXIgeFVuaXRWZWMzID0gZnJvbVZhbHVlcyQxKDEsIDAsIDApO1xuICB2YXIgeVVuaXRWZWMzID0gZnJvbVZhbHVlcyQxKDAsIDEsIDApO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgYSwgYikge1xuICAgIHZhciBkb3QkMSA9IGRvdChhLCBiKTtcblxuICAgIGlmIChkb3QkMSA8IC0wLjk5OTk5OSkge1xuICAgICAgY3Jvc3ModG1wdmVjMywgeFVuaXRWZWMzLCBhKTtcbiAgICAgIGlmIChsZW4odG1wdmVjMykgPCAwLjAwMDAwMSkgY3Jvc3ModG1wdmVjMywgeVVuaXRWZWMzLCBhKTtcbiAgICAgIG5vcm1hbGl6ZSQyKHRtcHZlYzMsIHRtcHZlYzMpO1xuICAgICAgc2V0QXhpc0FuZ2xlKG91dCwgdG1wdmVjMywgTWF0aC5QSSk7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSBpZiAoZG90JDEgPiAwLjk5OTk5OSkge1xuICAgICAgb3V0WzBdID0gMDtcbiAgICAgIG91dFsxXSA9IDA7XG4gICAgICBvdXRbMl0gPSAwO1xuICAgICAgb3V0WzNdID0gMTtcbiAgICAgIHJldHVybiBvdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNyb3NzKHRtcHZlYzMsIGEsIGIpO1xuICAgICAgb3V0WzBdID0gdG1wdmVjM1swXTtcbiAgICAgIG91dFsxXSA9IHRtcHZlYzNbMV07XG4gICAgICBvdXRbMl0gPSB0bXB2ZWMzWzJdO1xuICAgICAgb3V0WzNdID0gMSArIGRvdCQxO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZShvdXQsIG91dCk7XG4gICAgfVxuICB9O1xufSkoKTtcbi8qKlxuICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gd2l0aCB0d28gY29udHJvbCBwb2ludHNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBjIHRoZSB0aGlyZCBvcGVyYW5kXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gZCB0aGUgZm91cnRoIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgdGVtcDEgPSBjcmVhdGUkMSgpO1xuICB2YXIgdGVtcDIgPSBjcmVhdGUkMSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgYSwgYiwgYywgZCwgdCkge1xuICAgIHNsZXJwKHRlbXAxLCBhLCBkLCB0KTtcbiAgICBzbGVycCh0ZW1wMiwgYiwgYywgdCk7XG4gICAgc2xlcnAob3V0LCB0ZW1wMSwgdGVtcDIsIDIgKiB0ICogKDEgLSB0KSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfTtcbn0pKCk7XG4vKipcbiAqIFNldHMgdGhlIHNwZWNpZmllZCBxdWF0ZXJuaW9uIHdpdGggdmFsdWVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuXG4gKiBheGVzLiBFYWNoIGF4aXMgaXMgYSB2ZWMzIGFuZCBpcyBleHBlY3RlZCB0byBiZSB1bml0IGxlbmd0aCBhbmRcbiAqIHBlcnBlbmRpY3VsYXIgdG8gYWxsIG90aGVyIHNwZWNpZmllZCBheGVzLlxuICpcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2aWV3ICB0aGUgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgdmlld2luZyBkaXJlY3Rpb25cbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSByaWdodCB0aGUgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgbG9jYWwgXCJyaWdodFwiIGRpcmVjdGlvblxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHVwICAgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInVwXCIgZGlyZWN0aW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIG1hdHIgPSBjcmVhdGUkNCgpO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgdmlldywgcmlnaHQsIHVwKSB7XG4gICAgbWF0clswXSA9IHJpZ2h0WzBdO1xuICAgIG1hdHJbM10gPSByaWdodFsxXTtcbiAgICBtYXRyWzZdID0gcmlnaHRbMl07XG4gICAgbWF0clsxXSA9IHVwWzBdO1xuICAgIG1hdHJbNF0gPSB1cFsxXTtcbiAgICBtYXRyWzddID0gdXBbMl07XG4gICAgbWF0clsyXSA9IC12aWV3WzBdO1xuICAgIG1hdHJbNV0gPSAtdmlld1sxXTtcbiAgICBtYXRyWzhdID0gLXZpZXdbMl07XG4gICAgcmV0dXJuIG5vcm1hbGl6ZShvdXQsIGZyb21NYXQzKG91dCwgbWF0cikpO1xuICB9O1xufSkoKTtcblxuLyoqXG4gKiAyIERpbWVuc2lvbmFsIFZlY3RvclxuICogQG1vZHVsZSB2ZWMyXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3LCBlbXB0eSB2ZWMyXG4gKlxuICogQHJldHVybnMge3ZlYzJ9IGEgbmV3IDJEIHZlY3RvclxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBBUlJBWV9UWVBFKDIpO1xuXG4gIGlmIChBUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWMycy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWMyLiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjMnMgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZlYyA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgIHZhciBpLCBsO1xuXG4gICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgIHN0cmlkZSA9IDI7XG4gICAgfVxuXG4gICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBsID0gTWF0aC5taW4oY291bnQgKiBzdHJpZGUgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IGEubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGw7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2ZWNbMF0gPSBhW2ldO1xuICAgICAgdmVjWzFdID0gYVtpICsgMV07XG4gICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgIGFbaV0gPSB2ZWNbMF07XG4gICAgICBhW2kgKyAxXSA9IHZlY1sxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYTtcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IGNvbnZleFN3ZWVwID0gKHJhd0R5bmFtaWNzV29ybGQsIGRlZikgPT4ge1xuICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgY29uc3QgZnJvbVZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYuZnJvbVswXSwgZGVmLmZyb21bMV0sIGRlZi5mcm9tWzJdKTtcbiAgICBjb25zdCB0b1ZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYudG9bMF0sIGRlZi50b1sxXSwgZGVmLnRvWzJdKTtcbiAgICBjb25zdCBmcm9tVHJzZiA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0oKTtcbiAgICBmcm9tVHJzZi5zZXRJZGVudGl0eSgpO1xuICAgIGZyb21UcnNmLnNldE9yaWdpbihmcm9tVmVjMyk7XG4gICAgY29uc3QgdG9UcnNmID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybSgpO1xuICAgIHRvVHJzZi5zZXRJZGVudGl0eSgpO1xuICAgIHRvVHJzZi5zZXRPcmlnaW4odG9WZWMzKTtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgYnVsbGV0LkNsb3Nlc3RDb252ZXhSZXN1bHRDYWxsYmFjayhmcm9tVmVjMywgdG9WZWMzKTtcbiAgICByZXN1bHQuc2V0X21fY29sbGlzaW9uRmlsdGVyR3JvdXAoZGVmLmNvbGxpc2lvbkZpbHRlckdyb3VwKTtcbiAgICByZXN1bHQuc2V0X21fY29sbGlzaW9uRmlsdGVyTWFzayhkZWYuY29sbGlzaW9uRmlsdGVyTWFzayk7XG4gICAgY29uc3Qgc2hhcGUgPSBuZXcgYnVsbGV0LmJ0U3BoZXJlU2hhcGUoZGVmLnJhZGl1cyk7XG4gICAgcmF3RHluYW1pY3NXb3JsZC5jb252ZXhTd2VlcFRlc3Qoc2hhcGUsIGZyb21UcnNmLCB0b1Ryc2YsIHJlc3VsdCwgMCk7XG4gICAgaWYgKCFyZXN1bHQuaGFzSGl0KCkpIHtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koZnJvbVZlYzMpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0b1ZlYzMpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyZXN1bHQpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShzaGFwZSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGZyb21UcnNmKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodG9UcnNmKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBjb25zdCBvYmplY3QgPSBib2R5TWFwLmdldCgocmVzdWx0LmdldCgpIGFzIGFueSkucHRyKTtcbiAgICAvLyBpZiAoIW9iamVjdCkge1xuICAgIC8vICAgYnVsbGV0LmRlc3Ryb3koZnJvbVZlYzMpO1xuICAgIC8vICAgYnVsbGV0LmRlc3Ryb3kodG9WZWMzKTtcbiAgICAvLyAgIGJ1bGxldC5kZXN0cm95KHJlc3VsdCk7XG4gICAgLy8gICByZXR1cm47XG4gICAgLy8gfVxuICAgIC8vIGdldF9tX2Nsb3Nlc3RIaXRGcmFjdGlvbigpOiBudW1iZXI7XG4gICAgLy8gZ2V0X21fY29sbGlzaW9uT2JqZWN0KCk6IGJ0Q29sbGlzaW9uT2JqZWN0O1xuICAgIGNvbnN0IHJhd1Bvc2l0aW9uID0gcmVzdWx0LmdldF9tX2hpdFBvaW50V29ybGQoKTtcbiAgICBjb25zdCByYXdOb3JtYWwgPSByZXN1bHQuZ2V0X21faGl0Tm9ybWFsV29ybGQoKTtcbiAgICBjb25zdCBmcmFjdGlvbiA9IHJlc3VsdC5nZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb24oKTtcbiAgICBjb25zdCBpbXBhY3QgPSBmcm9tVmFsdWVzJDEocmF3UG9zaXRpb24ueCgpLCByYXdQb3NpdGlvbi55KCksIHJhd1Bvc2l0aW9uLnooKSk7XG4gICAgY29uc3Qgbm9ybWFsID0gZnJvbVZhbHVlcyQxKHJhd05vcm1hbC54KCksIHJhd05vcm1hbC55KCksIHJhd05vcm1hbC56KCkpO1xuICAgIGJ1bGxldC5kZXN0cm95KHJhd05vcm1hbCk7XG4gICAgYnVsbGV0LmRlc3Ryb3kocmF3UG9zaXRpb24pO1xuICAgIGJ1bGxldC5kZXN0cm95KGZyb21WZWMzKTtcbiAgICBidWxsZXQuZGVzdHJveSh0b1ZlYzMpO1xuICAgIGJ1bGxldC5kZXN0cm95KHJlc3VsdCk7XG4gICAgYnVsbGV0LmRlc3Ryb3koc2hhcGUpO1xuICAgIGJ1bGxldC5kZXN0cm95KGZyb21UcnNmKTtcbiAgICBidWxsZXQuZGVzdHJveSh0b1Ryc2YpO1xuICAgIHJldHVybiB7IGZyYWN0aW9uLCBpbXBhY3QsIG5vcm1hbCB9O1xufTtcblxuY29uc3QgRElTQUJMRV9ERUFDVElWQVRJT04gPSA0O1xuY2xhc3MgQ29uY3JldGVQaHlzaWNCb2R5IGV4dGVuZHMgQ29udGFjdEV2ZW50SGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoZGVmLCByYXdTaGFwZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9pc0FsaXZlID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgdGhpcy5fY3VzdG9tU2hhcGUgPSByYXdTaGFwZTtcbiAgICAgICAgY29uc3QgdG1wVmVjMyA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKCk7XG4gICAgICAgIHRoaXMuX2N1c3RvbVNoYXBlLnNoYXBlLmNhbGN1bGF0ZUxvY2FsSW5lcnRpYShkZWYubWFzcywgdG1wVmVjMyk7XG4gICAgICAgIGNvbnN0IG1vdGlvblN0YXRlID0gbnVsbDsgLy8gaGFjayA6KFxuICAgICAgICBjb25zdCByYkluZm8gPSBuZXcgYnVsbGV0LmJ0UmlnaWRCb2R5Q29uc3RydWN0aW9uSW5mbyhkZWYubWFzcywgbW90aW9uU3RhdGUsIHRoaXMuX2N1c3RvbVNoYXBlLnNoYXBlLCB0bXBWZWMzKTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5ID0gbmV3IGJ1bGxldC5idFJpZ2lkQm9keShyYkluZm8pO1xuICAgICAgICB0aGlzLnNldFBvc2l0aW9uQW5kUm90YXRpb24oZGVmLnBvc2l0aW9uLCBkZWYub3JpZW50YXRpb24pO1xuICAgICAgICAvLyB0aGlzLl9jdXN0b21TaGFwZSA9IHRoaXMuX2dldFNoYXBlKGRlZi5zaGFwZSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRtcFZlYzMpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyYkluZm8pO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9yYXdSaWdpZEJvZHkpO1xuICAgICAgICAvLyBidWxsZXQuZGVzdHJveSh0aGlzLl9jdXN0b21TaGFwZSk7XG4gICAgICAgIHRoaXMuX2N1c3RvbVNoYXBlLmNsZWFudXAoKTtcbiAgICAgICAgLy8gaGFjayB0byBmb3JjZSBpdCB0byBjcmFzaCBpZiB0aGUgYm9keSBpcyByZXVzZWRcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5faXNBbGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBpc0FsaXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNBbGl2ZTtcbiAgICB9XG4gICAgc2V0UG9zaXRpb25BbmRSb3RhdGlvbihwb3NpdGlvbiwgcm90YXRpb24pIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhwb3NpdGlvblswXSwgcG9zaXRpb25bMV0sIHBvc2l0aW9uWzJdKTtcbiAgICAgICAgY29uc3QgbmV3Um90YXRpb24gPSBuZXcgYnVsbGV0LmJ0UXVhdGVybmlvbihyb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uWzJdLCByb3RhdGlvblszXSk7XG4gICAgICAgIGNvbnN0IG5ld1RyYW5zZm9ybSA9IG5ldyBidWxsZXQuYnRUcmFuc2Zvcm0obmV3Um90YXRpb24sIG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldFdvcmxkVHJhbnNmb3JtKG5ld1RyYW5zZm9ybSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1RyYW5zZm9ybSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1Bvc2l0aW9uKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3Um90YXRpb24pO1xuICAgIH1cbiAgICBzZXRQb3NpdGlvbih4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICBjb25zdCBuZXdSb3RhdGlvbiA9IG5ldyBidWxsZXQuYnRRdWF0ZXJuaW9uKHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0sIHJvdGF0aW9uWzNdKTtcbiAgICAgICAgY29uc3QgbmV3VHJhbnNmb3JtID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybShuZXdSb3RhdGlvbiwgbmV3UG9zaXRpb24pO1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0V29ybGRUcmFuc2Zvcm0obmV3VHJhbnNmb3JtKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VHJhbnNmb3JtKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3UG9zaXRpb24pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdSb3RhdGlvbik7XG4gICAgfVxuICAgIHNldFJvdGF0aW9uKHgsIHksIHosIHcpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3Qgb3JpZ2luID0gdGhpcy5nZXRQb3NpdGlvbigpO1xuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKG9yaWdpblswXSwgb3JpZ2luWzFdLCBvcmlnaW5bMl0pO1xuICAgICAgICBjb25zdCBuZXdSb3RhdGlvbiA9IG5ldyBidWxsZXQuYnRRdWF0ZXJuaW9uKHgsIHksIHosIHcpO1xuICAgICAgICBjb25zdCBuZXdUcmFuc2Zvcm0gPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKG5ld1JvdGF0aW9uLCBuZXdQb3NpdGlvbik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRXb3JsZFRyYW5zZm9ybShuZXdUcmFuc2Zvcm0pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdUcmFuc2Zvcm0pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdQb3NpdGlvbik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1JvdGF0aW9uKTtcbiAgICB9XG4gICAgZ2V0UG9zaXRpb25BbmRSb3RhdGlvbihwb3NpdGlvbiwgcm90YXRpb24pIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgcmF3VHJhbnNmb3JtID0gdGhpcy5fcmF3UmlnaWRCb2R5LmdldFdvcmxkVHJhbnNmb3JtKCk7XG4gICAgICAgIGNvbnN0IHJhd09yaWdpbiA9IHJhd1RyYW5zZm9ybS5nZXRPcmlnaW4oKTtcbiAgICAgICAgY29uc3QgcmF3Um90YXRpb24gPSByYXdUcmFuc2Zvcm0uZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcG9zaXRpb25bMF0gPSByYXdPcmlnaW4ueCgpO1xuICAgICAgICBwb3NpdGlvblsxXSA9IHJhd09yaWdpbi55KCk7XG4gICAgICAgIHBvc2l0aW9uWzJdID0gcmF3T3JpZ2luLnooKTtcbiAgICAgICAgcm90YXRpb25bMF0gPSByYXdSb3RhdGlvbi54KCk7XG4gICAgICAgIHJvdGF0aW9uWzFdID0gcmF3Um90YXRpb24ueSgpO1xuICAgICAgICByb3RhdGlvblsyXSA9IHJhd1JvdGF0aW9uLnooKTtcbiAgICAgICAgcm90YXRpb25bM10gPSByYXdSb3RhdGlvbi53KCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1JvdGF0aW9uKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3T3JpZ2luKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3VHJhbnNmb3JtKTtcbiAgICB9XG4gICAgZ2V0UG9zaXRpb24oKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJhd1RyYW5zZm9ybSA9IHRoaXMuX3Jhd1JpZ2lkQm9keS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICBjb25zdCByYXdPcmlnaW4gPSByYXdUcmFuc2Zvcm0uZ2V0T3JpZ2luKCk7XG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IGZyb21WYWx1ZXMkMShyYXdPcmlnaW4ueCgpLCByYXdPcmlnaW4ueSgpLCByYXdPcmlnaW4ueigpKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3T3JpZ2luKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3VHJhbnNmb3JtKTtcbiAgICAgICAgcmV0dXJuIG9yaWdpbjtcbiAgICB9XG4gICAgZ2V0Um90YXRpb24oKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJhd1RyYW5zZm9ybSA9IHRoaXMuX3Jhd1JpZ2lkQm9keS5nZXRXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICBjb25zdCByYXdSb3RhdGlvbiA9IHJhd1RyYW5zZm9ybS5nZXRSb3RhdGlvbigpO1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IGZyb21WYWx1ZXMocmF3Um90YXRpb24ueCgpLCByYXdSb3RhdGlvbi55KCksIHJhd1JvdGF0aW9uLnooKSwgcmF3Um90YXRpb24udygpKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3Um90YXRpb24pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyYXdUcmFuc2Zvcm0pO1xuICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgfVxuICAgIGdldExpbmVhclZlbG9jaXR5KCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCB2ZWwgPSB0aGlzLl9yYXdSaWdpZEJvZHkuZ2V0TGluZWFyVmVsb2NpdHkoKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmcm9tVmFsdWVzJDEodmVsLngoKSwgdmVsLnkoKSwgdmVsLnooKSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHZlbCk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0QW5ndWxhclZlbG9jaXR5KCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCB2ZWwgPSB0aGlzLl9yYXdSaWdpZEJvZHkuZ2V0QW5ndWxhclZlbG9jaXR5KCk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZnJvbVZhbHVlcyQxKHZlbC54KCksIHZlbC55KCksIHZlbC56KCkpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh2ZWwpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHNldExpbmVhclZlbG9jaXR5KHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRMaW5lYXJWZWxvY2l0eShuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBzZXRBbmd1bGFyVmVsb2NpdHkoeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWZWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldEFuZ3VsYXJWZWxvY2l0eShuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBzZXRMaW5lYXJGYWN0b3IoeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWZWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldExpbmVhckZhY3RvcihuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBzZXRBbmd1bGFyRmFjdG9yKHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRBbmd1bGFyRmFjdG9yKG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIGFwcGx5Q2VudHJhbEZvcmNlKHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5hcHBseUNlbnRyYWxGb3JjZShuZXdWZWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWZWwpO1xuICAgIH1cbiAgICBhcHBseUNlbnRyYWxJbXB1bHNlKHgsIHksIHopIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgbmV3VmVsID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoeCwgeSwgeik7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5hcHBseUNlbnRyYWxJbXB1bHNlKG5ld1ZlbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZlbCk7XG4gICAgfVxuICAgIHNldERhbXBpbmcobGluZWFyLCBhbmd1bGFyID0gMCkge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0RGFtcGluZyhsaW5lYXIsIGFuZ3VsYXIpO1xuICAgIH1cbiAgICBzZXRDY2RNb3Rpb25UaHJlc2hvbGQoY2NkTW90aW9uVGhyZXNob2xkKSB7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRDY2RNb3Rpb25UaHJlc2hvbGQoY2NkTW90aW9uVGhyZXNob2xkKTtcbiAgICB9XG4gICAgc2V0Q2NkU3dlcHRTcGhlcmVSYWRpdXMocmFkaXVzKSB7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRDY2RTd2VwdFNwaGVyZVJhZGl1cyhyYWRpdXMpO1xuICAgIH1cbiAgICBzZXRSZXN0aXR1dGlvbihyZXN0aXR1dGlvbikge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0UmVzdGl0dXRpb24ocmVzdGl0dXRpb24pO1xuICAgIH1cbiAgICBzZXRGcmljdGlvbihmcmljdGlvbikge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuc2V0RnJpY3Rpb24oZnJpY3Rpb24pO1xuICAgIH1cbiAgICBzZXRSb2xsaW5nRnJpY3Rpb24oZnJpY3Rpb24pIHtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldFJvbGxpbmdGcmljdGlvbihmcmljdGlvbik7XG4gICAgfVxuICAgIHNldEdyYXZpdHkoeCwgeSwgeikge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWZWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh4LCB5LCB6KTtcbiAgICAgICAgdGhpcy5fcmF3UmlnaWRCb2R5LnNldEdyYXZpdHkobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgaXNTdGF0aWNPYmplY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdSaWdpZEJvZHkuaXNTdGF0aWNPYmplY3QoKTtcbiAgICB9XG4gICAgaXNLaW5lbWF0aWNPYmplY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdSaWdpZEJvZHkuaXNLaW5lbWF0aWNPYmplY3QoKTtcbiAgICB9XG4gICAgaXNTdGF0aWNPcktpbmVtYXRpY09iamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1JpZ2lkQm9keS5pc1N0YXRpY09yS2luZW1hdGljT2JqZWN0KCk7XG4gICAgfVxuICAgIGlzQWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaXNTdGF0aWNPcktpbmVtYXRpY09iamVjdCgpIHx8IHRoaXMuX3Jhd1JpZ2lkQm9keS5pc0FjdGl2ZSgpKTtcbiAgICB9XG4gICAgZW5hYmxlRGVhY3RpdmF0aW9uKCkge1xuICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuYWN0aXZhdGUodHJ1ZSk7XG4gICAgfVxuICAgIGRpc2FibGVEZWFjdGl2YXRpb24oKSB7XG4gICAgICAgIHRoaXMuX3Jhd1JpZ2lkQm9keS5zZXRBY3RpdmF0aW9uU3RhdGUoRElTQUJMRV9ERUFDVElWQVRJT04pO1xuICAgIH1cbiAgICBjYW5ub3REZWFjdGl2YXRlKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaXNTdGF0aWNPcktpbmVtYXRpY09iamVjdCgpIHx8XG4gICAgICAgICAgICB0aGlzLl9yYXdSaWdpZEJvZHkuZ2V0QWN0aXZhdGlvblN0YXRlKCkgPT0gRElTQUJMRV9ERUFDVElWQVRJT04pO1xuICAgIH1cbiAgICBjYW5EZWFjdGl2YXRlKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuY2Fubm90RGVhY3RpdmF0ZSgpO1xuICAgIH1cbn1cblxuY2xhc3MgQ29uY3JldGVQaHlzaWNWZWhpY2xlIHtcbiAgICBjb25zdHJ1Y3RvcihyYXdEeW5hbWljc1dvcmxkLCBjaGFzc2lzQm9keSwgZGVmKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIHRoaXMuX2NoYXNzaXNCb2R5ID0gY2hhc3Npc0JvZHk7XG4gICAgICAgIHRoaXMuX3ZlaGljbGVUdW5pbmcgPSBuZXcgYnVsbGV0LmJ0VmVoaWNsZVR1bmluZygpO1xuICAgICAgICB0aGlzLl9kZWZhdWx0VmVoaWNsZVJheWNhc3RlciA9IG5ldyBidWxsZXQuYnREZWZhdWx0VmVoaWNsZVJheWNhc3RlcihyYXdEeW5hbWljc1dvcmxkKTtcbiAgICAgICAgdGhpcy5fcmF3VmVoaWNsZSA9IG5ldyBidWxsZXQuYnRSYXljYXN0VmVoaWNsZSh0aGlzLl92ZWhpY2xlVHVuaW5nLCBjaGFzc2lzQm9keS5fcmF3UmlnaWRCb2R5LCB0aGlzLl9kZWZhdWx0VmVoaWNsZVJheWNhc3Rlcik7XG4gICAgICAgIHRoaXMuX3Jhd1ZlaGljbGUuc2V0Q29vcmRpbmF0ZVN5c3RlbShkZWYuY29vcmRpbmF0ZVN5c3RlbVswXSwgZGVmLmNvb3JkaW5hdGVTeXN0ZW1bMV0sIGRlZi5jb29yZGluYXRlU3lzdGVtWzJdKTtcbiAgICAgICAgY29uc3QgZ3JvdW5kRGlyZWN0aW9uID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmdyb3VuZERpcmVjdGlvblswXSwgZGVmLmdyb3VuZERpcmVjdGlvblsxXSwgZGVmLmdyb3VuZERpcmVjdGlvblsyXSk7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uQXhpcyA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5yb3RhdGlvbkF4aXNbMF0sIGRlZi5yb3RhdGlvbkF4aXNbMV0sIGRlZi5yb3RhdGlvbkF4aXNbMl0pO1xuICAgICAgICBjb25zdCBjb25uZWN0aW9uUG9pbnQgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgZGVmLndoZWVscy5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBkZWYud2hlZWxzW2lpXTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb25Qb2ludC5zZXRWYWx1ZShjdXJyZW50LmNvbm5lY3Rpb25Qb2ludFswXSwgY3VycmVudC5jb25uZWN0aW9uUG9pbnRbMV0sIGN1cnJlbnQuY29ubmVjdGlvblBvaW50WzJdKTtcbiAgICAgICAgICAgIGNvbnN0IHdoZWVsSW5mbyA9IHRoaXMuX3Jhd1ZlaGljbGUuYWRkV2hlZWwoY29ubmVjdGlvblBvaW50LCAvLyBjb25uZWN0aW9uUG9pbnRDUzAsXG4gICAgICAgICAgICBncm91bmREaXJlY3Rpb24sIC8vIHdoZWVsRGlyZWN0aW9uQ1MwLFxuICAgICAgICAgICAgcm90YXRpb25BeGlzLCAvLyB3aGVlbEF4bGVDUyxcbiAgICAgICAgICAgIGRlZi5zdXNwZW5zaW9uUmVzdExlbmd0aCwgZGVmLndoZWVsUmFkaXVzLCB0aGlzLl92ZWhpY2xlVHVuaW5nLCBjdXJyZW50LmlzRnJvbnRXaGVlbCk7XG4gICAgICAgICAgICB3aGVlbEluZm8uc2V0X21fc3VzcGVuc2lvblN0aWZmbmVzcyhkZWYuc3VzcGVuc2lvblN0aWZmbmVzcyk7XG4gICAgICAgICAgICB3aGVlbEluZm8uc2V0X21fd2hlZWxzRGFtcGluZ1JlbGF4YXRpb24oZGVmLndoZWVsc0RhbXBpbmdSZWxheGF0aW9uKTtcbiAgICAgICAgICAgIHdoZWVsSW5mby5zZXRfbV93aGVlbHNEYW1waW5nQ29tcHJlc3Npb24oZGVmLndoZWVsc0RhbXBpbmdDb21wcmVzc2lvbik7XG4gICAgICAgICAgICB3aGVlbEluZm8uc2V0X21fZnJpY3Rpb25TbGlwKGRlZi53aGVlbEZyaWN0aW9uKTtcbiAgICAgICAgICAgIHdoZWVsSW5mby5zZXRfbV9yb2xsSW5mbHVlbmNlKGRlZi5yb2xsSW5mbHVlbmNlKTtcbiAgICAgICAgfVxuICAgICAgICBidWxsZXQuZGVzdHJveShjb25uZWN0aW9uUG9pbnQpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShncm91bmREaXJlY3Rpb24pO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyb3RhdGlvbkF4aXMpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9yYXdWZWhpY2xlKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fZGVmYXVsdFZlaGljbGVSYXljYXN0ZXIpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl92ZWhpY2xlVHVuaW5nKTtcbiAgICB9XG4gICAgZ2V0Q2hhc3Npc0JvZHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGFzc2lzQm9keTtcbiAgICB9XG4gICAgc2V0U3RlZXJpbmdWYWx1ZShpbmRleCwgYW5nbGUpIHtcbiAgICAgICAgdGhpcy5fcmF3VmVoaWNsZS5zZXRTdGVlcmluZ1ZhbHVlKGFuZ2xlLCBpbmRleCk7XG4gICAgfVxuICAgIGFwcGx5RW5naW5lRm9yY2UoaW5kZXgsIGZvcmNlKSB7XG4gICAgICAgIHRoaXMuX3Jhd1ZlaGljbGUuYXBwbHlFbmdpbmVGb3JjZShmb3JjZSwgaW5kZXgpO1xuICAgIH1cbiAgICBzZXRCcmFrZShpbmRleCwgZm9yY2UpIHtcbiAgICAgICAgdGhpcy5fcmF3VmVoaWNsZS5zZXRCcmFrZShmb3JjZSwgaW5kZXgpO1xuICAgIH1cbiAgICBnZXRXaGVlVHJhbnNmb3JtcygpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgYWxsVHJhbnNmb3JtcyA9IFtdO1xuICAgICAgICBjb25zdCBpbnRlcnBvbGF0ZWRUcmFuc2Zvcm0gPSB0cnVlO1xuICAgICAgICBjb25zdCBudW1XaGVlbHMgPSB0aGlzLl9yYXdWZWhpY2xlLmdldE51bVdoZWVscygpO1xuICAgICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgbnVtV2hlZWxzOyArK2lpKSB7XG4gICAgICAgICAgICB0aGlzLl9yYXdWZWhpY2xlLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGlpLCBpbnRlcnBvbGF0ZWRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgY29uc3QgcmF3VHJhbnNmb3JtID0gdGhpcy5fcmF3VmVoaWNsZS5nZXRXaGVlbFRyYW5zZm9ybVdTKGlpKTtcbiAgICAgICAgICAgIGNvbnN0IHJhd09yaWdpbiA9IHJhd1RyYW5zZm9ybS5nZXRPcmlnaW4oKTtcbiAgICAgICAgICAgIGNvbnN0IHJhd1JvdGF0aW9uID0gcmF3VHJhbnNmb3JtLmdldFJvdGF0aW9uKCk7XG4gICAgICAgICAgICBhbGxUcmFuc2Zvcm1zLnB1c2goe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBmcm9tVmFsdWVzJDEocmF3T3JpZ2luLngoKSwgcmF3T3JpZ2luLnkoKSwgcmF3T3JpZ2luLnooKSksXG4gICAgICAgICAgICAgICAgcm90YXRpb246IGZyb21WYWx1ZXMocmF3Um90YXRpb24ueCgpLCByYXdSb3RhdGlvbi55KCksIHJhd1JvdGF0aW9uLnooKSwgcmF3Um90YXRpb24udygpKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3Um90YXRpb24pO1xuICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3T3JpZ2luKTtcbiAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1RyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFsbFRyYW5zZm9ybXM7XG4gICAgfVxufVxuXG5jbGFzcyBDb25jcmV0ZUdlbmVyaWM2RG9mQ29uc3RyYWludCB7XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIHRoaXMuX2JvZHlBID0gZGVmLmJvZHlBO1xuICAgICAgICB0aGlzLl9ib2R5QiA9IGRlZi5ib2R5QjtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgY29uc3QgcmF3UmlnaWRCb2R5QSA9IGRlZi5ib2R5QS5fcmF3UmlnaWRCb2R5O1xuICAgICAgICBjb25zdCByYXdSaWdpZEJvZHlCID0gZGVmLmJvZHlCLl9yYXdSaWdpZEJvZHk7XG4gICAgICAgIGNvbnN0IG5ld1JvdGF0aW9uID0gbmV3IGJ1bGxldC5idFF1YXRlcm5pb24oMCwgMCwgMSwgMCk7XG4gICAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uQSA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5mcmFtZUFbMF0sIGRlZi5mcmFtZUFbMV0sIGRlZi5mcmFtZUFbMl0pO1xuICAgICAgICBjb25zdCBuZXdUcmFuc2Zvcm1BID0gbmV3IGJ1bGxldC5idFRyYW5zZm9ybShuZXdSb3RhdGlvbiwgbmV3UG9zaXRpb25BKTtcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb25CID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmZyYW1lQlswXSwgZGVmLmZyYW1lQlsxXSwgZGVmLmZyYW1lQlsyXSk7XG4gICAgICAgIGNvbnN0IG5ld1RyYW5zZm9ybUIgPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKG5ld1JvdGF0aW9uLCBuZXdQb3NpdGlvbkIpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50ID0gbmV3IGJ1bGxldC5idEdlbmVyaWM2RG9mU3ByaW5nQ29uc3RyYWludChyYXdSaWdpZEJvZHlBLCByYXdSaWdpZEJvZHlCLCBuZXdUcmFuc2Zvcm1BLCBuZXdUcmFuc2Zvcm1CLCBkZWYudXNlUmVmZXJlbmNlRnJhbWVBKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVTcHJpbmcoMCwgZmFsc2UpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZVNwcmluZygxLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlU3ByaW5nKDIsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRTdGlmZm5lc3MoMCwgMSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0U3RpZmZuZXNzKDEsIDEpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldFN0aWZmbmVzcygyLCAxKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXREYW1waW5nKDAsIDEpO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldERhbXBpbmcoMSwgMSk7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0RGFtcGluZygyLCAxKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VHJhbnNmb3JtQSk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1RyYW5zZm9ybUIpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdQb3NpdGlvbkEpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdQb3NpdGlvbkIpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdSb3RhdGlvbik7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX3Jhd0NvbnN0cmFpbnQpO1xuICAgIH1cbiAgICBzZXRMaW5lYXJMb3dlckxpbWl0KHZhbCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWYWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh2YWxbMF0sIHZhbFsxXSwgdmFsWzJdKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRMaW5lYXJMb3dlckxpbWl0KG5ld1ZhbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZhbCk7XG4gICAgfVxuICAgIHNldExpbmVhclVwcGVyTGltaXQodmFsKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZhbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHZhbFswXSwgdmFsWzFdLCB2YWxbMl0pO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldExpbmVhclVwcGVyTGltaXQobmV3VmFsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmFsKTtcbiAgICB9XG4gICAgc2V0QW5ndWxhckxvd2VyTGltaXQodmFsKSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZhbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHZhbFswXSwgdmFsWzFdLCB2YWxbMl0pO1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldEFuZ3VsYXJMb3dlckxpbWl0KG5ld1ZhbCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KG5ld1ZhbCk7XG4gICAgfVxuICAgIHNldEFuZ3VsYXJVcHBlckxpbWl0KHZhbCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBuZXdWYWwgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyh2YWxbMF0sIHZhbFsxXSwgdmFsWzJdKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRBbmd1bGFyVXBwZXJMaW1pdChuZXdWYWwpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShuZXdWYWwpO1xuICAgIH1cbn1cblxuY2xhc3MgQ29uY3JldGVIaW5nZUNvbnN0cmFpbnQge1xuICAgIGNvbnN0cnVjdG9yKGRlZikge1xuICAgICAgICB0aGlzLl9ib2R5QSA9IGRlZi5ib2R5QTtcbiAgICAgICAgdGhpcy5fYm9keUIgPSBkZWYuYm9keUI7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJhd1JpZ2lkQm9keUEgPSBkZWYuYm9keUEuX3Jhd1JpZ2lkQm9keTtcbiAgICAgICAgY29uc3QgcmF3UmlnaWRCb2R5QiA9IGRlZi5ib2R5Qi5fcmF3UmlnaWRCb2R5O1xuICAgICAgICAvLyBjb25zdCBuZXdSb3RhdGlvbiA9IG5ldyBidWxsZXQuYnRRdWF0ZXJuaW9uKDAsIDAsIDEsIDApO1xuICAgICAgICBjb25zdCBwaXZvdEluQSA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5waXZvdEluQVswXSwgZGVmLnBpdm90SW5BWzFdLCBkZWYucGl2b3RJbkFbMl0pO1xuICAgICAgICBjb25zdCBwaXZvdEluQiA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5waXZvdEluQlswXSwgZGVmLnBpdm90SW5CWzFdLCBkZWYucGl2b3RJbkJbMl0pO1xuICAgICAgICBjb25zdCBheGlzSW5BID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoZGVmLmF4aXNJbkFbMF0sIGRlZi5heGlzSW5BWzFdLCBkZWYuYXhpc0luQVsyXSk7XG4gICAgICAgIGNvbnN0IGF4aXNJbkIgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYuYXhpc0luQlswXSwgZGVmLmF4aXNJbkJbMV0sIGRlZi5heGlzSW5CWzJdKTtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludCA9IG5ldyBidWxsZXQuYnRIaW5nZUNvbnN0cmFpbnQocmF3UmlnaWRCb2R5QSwgcmF3UmlnaWRCb2R5QiwgcGl2b3RJbkEsIHBpdm90SW5CLCBheGlzSW5BLCBheGlzSW5CLCBkZWYudXNlUmVmZXJlbmNlRnJhbWVBKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVTcHJpbmcoMCwgZmFsc2UpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LmVuYWJsZVNwcmluZygxLCBmYWxzZSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlU3ByaW5nKDIsIGZhbHNlKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5zZXRTdGlmZm5lc3MoMCwgMSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0U3RpZmZuZXNzKDEsIDEpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LnNldFN0aWZmbmVzcygyLCAxKTtcbiAgICAgICAgLy8gdGhpcy5fcmF3Q29uc3RyYWludC5zZXREYW1waW5nKDAsIDEpO1xuICAgICAgICAvLyB0aGlzLl9yYXdDb25zdHJhaW50LnNldERhbXBpbmcoMSwgMSk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0RGFtcGluZygyLCAxKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocGl2b3RJbkEpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShwaXZvdEluQik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGF4aXNJbkEpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShheGlzSW5CKTtcbiAgICAgICAgLy8gYnVsbGV0LmRlc3Ryb3kobmV3Um90YXRpb24pO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9yYXdDb25zdHJhaW50KTtcbiAgICB9XG4gICAgc2V0TGltaXQobG93LCBoaWdoLCBzb2Z0bmVzcywgYmlhc0ZhY3RvciwgcmVsYXhhdGlvbkZhY3Rvcikge1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldExpbWl0KGxvdywgaGlnaCwgc29mdG5lc3MsIGJpYXNGYWN0b3IsIHJlbGF4YXRpb25GYWN0b3IpO1xuICAgIH1cbiAgICBlbmFibGVBbmd1bGFyTW90b3IoZW5hYmxlTW90b3IsIHRhcmdldFZlbG9jaXR5LCBtYXhNb3RvckltcHVsc2UpIHtcbiAgICAgICAgdGhpcy5fcmF3Q29uc3RyYWludC5lbmFibGVBbmd1bGFyTW90b3IoZW5hYmxlTW90b3IsIHRhcmdldFZlbG9jaXR5LCBtYXhNb3RvckltcHVsc2UpO1xuICAgIH1cbiAgICAvLyBzZXRBbmd1bGFyT25seShhbmd1bGFyT25seTogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vICAgdGhpcy5fcmF3Q29uc3RyYWludC5zZXRBbmd1bGFyT25seShhbmd1bGFyT25seSk7XG4gICAgLy8gfVxuICAgIGVuYWJsZU1vdG9yKGVuYWJsZU1vdG9yKSB7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuZW5hYmxlTW90b3IoZW5hYmxlTW90b3IpO1xuICAgIH1cbiAgICBzZXRNYXhNb3RvckltcHVsc2UobWF4TW90b3JJbXB1bHNlKSB7XG4gICAgICAgIHRoaXMuX3Jhd0NvbnN0cmFpbnQuc2V0TWF4TW90b3JJbXB1bHNlKG1heE1vdG9ySW1wdWxzZSk7XG4gICAgfVxuICAgIHNldE1vdG9yVGFyZ2V0KHRhcmdldEFuZ2xlLCBkdCkge1xuICAgICAgICB0aGlzLl9yYXdDb25zdHJhaW50LnNldE1vdG9yVGFyZ2V0KHRhcmdldEFuZ2xlLCBkdCk7XG4gICAgfVxufVxuXG5jb25zdCByYXlDYXN0ID0gKHJhd0R5bmFtaWNzV29ybGQsIGJvZHlNYXAsIGRlZikgPT4ge1xuICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgY29uc3QgZnJvbVZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYuZnJvbVswXSwgZGVmLmZyb21bMV0sIGRlZi5mcm9tWzJdKTtcbiAgICBjb25zdCB0b1ZlYzMgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMyhkZWYudG9bMF0sIGRlZi50b1sxXSwgZGVmLnRvWzJdKTtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgYnVsbGV0LkNsb3Nlc3RSYXlSZXN1bHRDYWxsYmFjayhmcm9tVmVjMywgdG9WZWMzKTtcbiAgICByZXN1bHQuc2V0X21fY29sbGlzaW9uRmlsdGVyR3JvdXAoZGVmLmNvbGxpc2lvbkZpbHRlckdyb3VwKTtcbiAgICByZXN1bHQuc2V0X21fY29sbGlzaW9uRmlsdGVyTWFzayhkZWYuY29sbGlzaW9uRmlsdGVyTWFzayk7XG4gICAgcmF3RHluYW1pY3NXb3JsZC5yYXlUZXN0KGZyb21WZWMzLCB0b1ZlYzMsIHJlc3VsdCk7XG4gICAgaWYgKCFyZXN1bHQuaGFzSGl0KCkpIHtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3koZnJvbVZlYzMpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0b1ZlYzMpO1xuICAgICAgICBidWxsZXQuZGVzdHJveShyZXN1bHQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9iamVjdCA9IGJvZHlNYXAuZ2V0KHJlc3VsdC5nZXRfbV9jb2xsaXNpb25PYmplY3QoKS5wdHIpO1xuICAgIGlmICghb2JqZWN0KSB7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KGZyb21WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodG9WZWMzKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmVzdWx0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBnZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb24oKTogbnVtYmVyO1xuICAgIC8vIGdldF9tX2NvbGxpc2lvbk9iamVjdCgpOiBidENvbGxpc2lvbk9iamVjdDtcbiAgICBjb25zdCByYXdOb3JtYWwgPSByZXN1bHQuZ2V0X21faGl0Tm9ybWFsV29ybGQoKTtcbiAgICBjb25zdCByYXdQb3NpdGlvbiA9IHJlc3VsdC5nZXRfbV9oaXRQb2ludFdvcmxkKCk7XG4gICAgY29uc3QgaW1wYWN0ID0gZnJvbVZhbHVlcyQxKHJhd1Bvc2l0aW9uLngoKSwgcmF3UG9zaXRpb24ueSgpLCByYXdQb3NpdGlvbi56KCkpO1xuICAgIGNvbnN0IG5vcm1hbCA9IGZyb21WYWx1ZXMkMShyYXdOb3JtYWwueCgpLCByYXdOb3JtYWwueSgpLCByYXdOb3JtYWwueigpKTtcbiAgICBidWxsZXQuZGVzdHJveShyYXdOb3JtYWwpO1xuICAgIGJ1bGxldC5kZXN0cm95KHJhd1Bvc2l0aW9uKTtcbiAgICBidWxsZXQuZGVzdHJveShmcm9tVmVjMyk7XG4gICAgYnVsbGV0LmRlc3Ryb3kodG9WZWMzKTtcbiAgICBidWxsZXQuZGVzdHJveShyZXN1bHQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG9iamVjdCxcbiAgICAgICAgZnJhY3Rpb246IHJlc3VsdC5nZXRfbV9jbG9zZXN0SGl0RnJhY3Rpb24oKSxcbiAgICAgICAgaW1wYWN0LFxuICAgICAgICBub3JtYWwsXG4gICAgfTtcbn07XG5cbmNsYXNzIFBoeXNpY1dvcmxkIGV4dGVuZHMgQ29udGFjdEV2ZW50SGFuZGxlciB7XG4gICAgLy8gcHJpdmF0ZSBfcXVlcnlTaGFwZSA9IG5ldyBRdWVyeVNoYXBlKCk7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2JvZHlNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX3ZlaGljbGVNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzID0gW107XG4gICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAyID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50czIgPSBbXTtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgLy8gYnVsbGV0Lmxpc3RlblRvQ29udGFjdENhbGxiYWNrcygpO1xuICAgICAgICB0aGlzLl9jb2xsaXNpb25Db25mID0gbmV3IGJ1bGxldC5idERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uKCk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoZXIgPSBuZXcgYnVsbGV0LmJ0Q29sbGlzaW9uRGlzcGF0Y2hlcih0aGlzLl9jb2xsaXNpb25Db25mKTtcbiAgICAgICAgdGhpcy5fYnJvYWRQaGFzZSA9IG5ldyBidWxsZXQuYnREYnZ0QnJvYWRwaGFzZSgpO1xuICAgICAgICB0aGlzLl9zb2x2ZXIgPSBuZXcgYnVsbGV0LmJ0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyKCk7XG4gICAgICAgIC8vIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQgPSBuZXcgYnVsbGV0LmJ0RGlzY3JldGVEeW5hbWljc1dvcmxkKHRoaXMuX2Rpc3BhdGNoZXIsIHRoaXMuX2Jyb2FkUGhhc2UsIHRoaXMuX3NvbHZlciwgdGhpcy5fY29sbGlzaW9uQ29uZik7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQgPSBuZXcgYnVsbGV0LmJ0anNEeW5hbWljc1dvcmxkKHRoaXMuX2Rpc3BhdGNoZXIsIHRoaXMuX2Jyb2FkUGhhc2UsIHRoaXMuX3NvbHZlciwgdGhpcy5fY29sbGlzaW9uQ29uZik7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuc2V0R3Jhdml0eShuZXcgYnVsbGV0LmJ0VmVjdG9yMygwLCAwLCAtMTApKTtcbiAgICAgICAgdGhpcy5faW5pdENvbGxpc2lvbkV2ZW50cygpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50cy5mb3JFYWNoKChjdXJyQ29uc3RyYWludCkgPT4gY3VyckNvbnN0cmFpbnQuZGlzcG9zZSgpKTtcbiAgICAgICAgdGhpcy5fYWxsQ29uc3RyYWludHMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcC5jbGVhcigpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50czIuZm9yRWFjaCgoY3VyckNvbnN0cmFpbnQpID0+IGN1cnJDb25zdHJhaW50LmRpc3Bvc2UoKSk7XG4gICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzMi5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwMi5jbGVhcigpO1xuICAgICAgICBbLi4udGhpcy5fdmVoaWNsZU1hcC52YWx1ZXMoKV0uZm9yRWFjaCgoY3VyclZlaGljbGUpID0+IGN1cnJWZWhpY2xlLmRpc3Bvc2UoKSk7XG4gICAgICAgIHRoaXMuX3ZlaGljbGVNYXAuY2xlYXIoKTtcbiAgICAgICAgWy4uLnRoaXMuX2JvZHlNYXAudmFsdWVzKCldLmZvckVhY2goKGN1cnJCb2R5KSA9PiBjdXJyQm9keS5kaXNwb3NlKCkpO1xuICAgICAgICB0aGlzLl9ib2R5TWFwLmNsZWFyKCk7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9zb2x2ZXIpO1xuICAgICAgICBidWxsZXQuZGVzdHJveSh0aGlzLl9icm9hZFBoYXNlKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kodGhpcy5fZGlzcGF0Y2hlcik7XG4gICAgICAgIGJ1bGxldC5kZXN0cm95KHRoaXMuX2NvbGxpc2lvbkNvbmYpO1xuICAgIH1cbiAgICBjcmVhdGVSaWdpZEJvZHkoZGVmKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0gdGhpcy5fZ2V0U2hhcGUoZGVmLnNoYXBlLCBkZWYubWFzcyA+IDApO1xuICAgICAgICBjb25zdCBuZXdCb2R5ID0gbmV3IENvbmNyZXRlUGh5c2ljQm9keShkZWYsIG5ld1NoYXBlKTtcbiAgICAgICAgLy8gaWYgKGRlZi5zaGFwZS50eXBlID09PSAnbWVzaCcpIHtcbiAgICAgICAgLy8gICBjb25zdCBtZXNoU2hhcGUgPSBuZXdCb2R5Ll9yYXdTaGFwZSBhcyBidWxsZXRKcy5idEdJbXBhY3RNZXNoU2hhcGU7XG4gICAgICAgIC8vICAgbmV3Qm9keS5fcmF3U2hhcGUgPSB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLmNyZWF0ZUNvbXBvdW5kRnJvbUdpbXBhY3RTaGFwZShtZXNoU2hhcGUsIDApO1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyB9XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuYWRkUmlnaWRCb2R5KG5ld0JvZHkuX3Jhd1JpZ2lkQm9keSwgLTEsIC0xKTtcbiAgICAgICAgLy8gaGFjaywgd2UgdXNlIHRoZSB3YXNtIGhlYXAgbWVtb3J5IGFkZHJlc3MgYXMgYW4gaWRlbnRpZmllciwgaXQncyBmYXN0ZXJcbiAgICAgICAgdGhpcy5fYm9keU1hcC5zZXQobmV3Qm9keS5fcmF3UmlnaWRCb2R5LnB0ciwgbmV3Qm9keSk7XG4gICAgICAgIHJldHVybiBuZXdCb2R5O1xuICAgIH1cbiAgICBfZ2V0U2hhcGUoZGVmLCBpc0R5bmFtaWMpIHtcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gV2FzbU1vZHVsZUhvbGRlci5nZXQoKTtcbiAgICAgICAgc3dpdGNoIChkZWYudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnYm94Jzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJveEhhbGZFeHRlbnQgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICAgICAgICAgIGJveEhhbGZFeHRlbnQuc2V0VmFsdWUoZGVmLnNpemVbMF0gKiAwLjUsIGRlZi5zaXplWzFdICogMC41LCBkZWYuc2l6ZVsyXSAqIDAuNSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3U2hhcGUgPSBuZXcgYnVsbGV0LmJ0Qm94U2hhcGUoYm94SGFsZkV4dGVudCk7XG4gICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3koYm94SGFsZkV4dGVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGU6IHJhd1NoYXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwOiAoKSA9PiBidWxsZXQuZGVzdHJveShyYXdTaGFwZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ3NwaGVyZSc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCByYXdTaGFwZSA9IG5ldyBidWxsZXQuYnRTcGhlcmVTaGFwZShkZWYucmFkaXVzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzaGFwZTogcmF3U2hhcGUsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXA6ICgpID0+IGJ1bGxldC5kZXN0cm95KHJhd1NoYXBlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnY3lsaW5kZXInOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYlZlYyA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKGRlZi5yYWRpdXMsIGRlZi5yYWRpdXMsIGRlZi5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhd1NoYXBlID0gbmV3IGJ1bGxldC5idEN5bGluZGVyU2hhcGUoYlZlYyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGU6IHJhd1NoYXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShyYXdTaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShiVmVjKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnY2Fwc3VsZSc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCByYXdTaGFwZSA9IG5ldyBidWxsZXQuYnRDYXBzdWxlU2hhcGUoZGVmLnJhZGl1cywgZGVmLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2hhcGU6IHJhd1NoYXBlLFxuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwOiAoKSA9PiBidWxsZXQuZGVzdHJveShyYXdTaGFwZSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ21lc2gnOiB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogbWVtb3J5IGxlYWtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmlhbmdsZU1lc2ggPSBuZXcgYnVsbGV0LmJ0VHJpYW5nbGVNZXNoKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYlZlYzEgPSBuZXcgYnVsbGV0LmJ0VmVjdG9yMygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJWZWMyID0gbmV3IGJ1bGxldC5idFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiVmVjMyA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgZGVmLnRyaWFuZ2xlcy5mb3JFYWNoKChbdmVjMSwgdmVjMiwgdmVjM10pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYlZlYzEuc2V0VmFsdWUodmVjMVswXSwgdmVjMVsxXSwgdmVjMVsyXSk7XG4gICAgICAgICAgICAgICAgICAgIGJWZWMyLnNldFZhbHVlKHZlYzJbMF0sIHZlYzJbMV0sIHZlYzJbMl0pO1xuICAgICAgICAgICAgICAgICAgICBiVmVjMy5zZXRWYWx1ZSh2ZWMzWzBdLCB2ZWMzWzFdLCB2ZWMzWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGVNZXNoLmFkZFRyaWFuZ2xlKGJWZWMxLCBiVmVjMiwgYlZlYzMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGJWZWMxKTtcbiAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShiVmVjMik7XG4gICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3koYlZlYzMpO1xuICAgICAgICAgICAgICAgIGlmIChpc0R5bmFtaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzaFNoYXBlID0gbmV3IGJ1bGxldC5idEdJbXBhY3RNZXNoU2hhcGUodHJpYW5nbGVNZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3U2hhcGUgPSB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLmNyZWF0ZUNvbXBvdW5kRnJvbUdpbXBhY3RTaGFwZShtZXNoU2hhcGUsIDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGU6IHJhd1NoYXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHJhd1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShtZXNoU2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KHRyaWFuZ2xlTWVzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByYXdTaGFwZSA9IG5ldyBidWxsZXQuYnRCdmhUcmlhbmdsZU1lc2hTaGFwZSh0cmlhbmdsZU1lc2gsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdTaGFwZSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3U2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kodHJpYW5nbGVNZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnY29tcG91bmQnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3Q29tcG91bmQgPSBuZXcgYnVsbGV0LmJ0Q29tcG91bmRTaGFwZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJhd1NoYXBlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsVmVjMyA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxRdWF0ID0gbmV3IGJ1bGxldC5idFF1YXRlcm5pb24oMCwgMCwgMSwgMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxUcmFuc2Zvcm0gPSBuZXcgYnVsbGV0LmJ0VHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB7IHNoYXBlLCBwb3NpdGlvbiwgb3JpZW50YXRpb24gfSBvZiBkZWYuc2hhcGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd1ZhbHVlcyA9IHRoaXMuX2dldFNoYXBlKHNoYXBlLCBpc0R5bmFtaWMpO1xuICAgICAgICAgICAgICAgICAgICBhbGxSYXdTaGFwZXMucHVzaChyYXdWYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFZlYzMuc2V0VmFsdWUocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXSk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsUXVhdC5zZXRWYWx1ZShvcmllbnRhdGlvblswXSwgb3JpZW50YXRpb25bMV0sIG9yaWVudGF0aW9uWzJdLCBvcmllbnRhdGlvblszXSk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsVHJhbnNmb3JtLnNldE9yaWdpbihsb2NhbFZlYzMpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFRyYW5zZm9ybS5zZXRSb3RhdGlvbihsb2NhbFF1YXQpO1xuICAgICAgICAgICAgICAgICAgICByYXdDb21wb3VuZC5hZGRDaGlsZFNoYXBlKGxvY2FsVHJhbnNmb3JtLCByYXdWYWx1ZXMuc2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjdXJyU2hhcGUucG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gY3VyclNoYXBlLm9yaWVudGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGN1cnJTaGFwZS5zaGFwZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidWxsZXQuZGVzdHJveShsb2NhbFZlYzMpO1xuICAgICAgICAgICAgICAgIGJ1bGxldC5kZXN0cm95KGxvY2FsUXVhdCk7XG4gICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kobG9jYWxUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlOiByYXdDb21wb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3kocmF3Q29tcG91bmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjdXJyUmF3U2hhcGUgb2YgYWxsUmF3U2hhcGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0LmRlc3Ryb3koY3VyclJhd1NoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3lSaWdpZEJvZHkocmlnaWRCb2R5KSB7XG4gICAgICAgIGNvbnN0IHJhd1JpZ2lkQm9keSA9IHJpZ2lkQm9keS5fcmF3UmlnaWRCb2R5O1xuICAgICAgICBjb25zdCBib2R5UHRyID0gcmF3UmlnaWRCb2R5LnB0cjtcbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5yZW1vdmVSaWdpZEJvZHkocmF3UmlnaWRCb2R5KTtcbiAgICAgICAgLy8gaGFjaywgd2UgdXNlIHRoZSB3YXNtIGhlYXAgbWVtb3J5IGFkZHJlc3MgYXMgYW4gaWRlbnRpZmllciwgaXQncyBmYXN0ZXJcbiAgICAgICAgdGhpcy5fYm9keU1hcC5kZWxldGUoYm9keVB0cik7XG4gICAgICAgIHJpZ2lkQm9keS5kaXNwb3NlKCk7XG4gICAgICAgIC8vIGRlc3Ryb3kgYW55IGNvbnN0cmFpbnRzIHRoYXQgbWlnaHQgYWZmZWN0IHRoaXMgYm9keVxuICAgICAgICBjb25zdCBib2R5TGlzdE9mQ29uc3RyYWludHMgPSB0aGlzLl9jb25zdHJhaW50TWFwLmdldChib2R5UHRyKTtcbiAgICAgICAgaWYgKGJvZHlMaXN0T2ZDb25zdHJhaW50cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBjdXJyQ29uc3RyYWludCBvZiBib2R5TGlzdE9mQ29uc3RyYWludHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lHZW5lcmljNkRvZkNvbnN0cmFpbnQoY3VyckNvbnN0cmFpbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGRlc3Ryb3kgYW55IGNvbnN0cmFpbnRzIHRoYXQgbWlnaHQgYWZmZWN0IHRoaXMgYm9keVxuICAgICAgICBjb25zdCBib2R5TGlzdE9mQ29uc3RyYWludHMyID0gdGhpcy5fY29uc3RyYWludE1hcDIuZ2V0KGJvZHlQdHIpO1xuICAgICAgICBpZiAoYm9keUxpc3RPZkNvbnN0cmFpbnRzMikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBjdXJyQ29uc3RyYWludCBvZiBib2R5TGlzdE9mQ29uc3RyYWludHMyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95SGluZ2VDb25zdHJhaW50KGN1cnJDb25zdHJhaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiB6b21iaWUgYm9kaWVzIGNvdWxkIHN0aWxsIGJlIHJlZi91c2VkLCBjYW4gaXQgYmUgcHJldmVudGVkP1xuICAgICAgICAvLyAtPiByYXcgcmlnaWQgYm9keSBpcyBzZXQgdG8gbnVsbCBpbnNpZGVcbiAgICAgICAgLy8gLT4gc2hvdWxkIGZpbmQgYSBmcmllbmRsaWVyIHdheVxuICAgIH1cbiAgICBjcmVhdGVWZWhpY2xlKGRlZikge1xuICAgICAgICBjb25zdCBuZXdCb2R5ID0gdGhpcy5jcmVhdGVSaWdpZEJvZHkoZGVmLmNoYXNzaXNEZWYpO1xuICAgICAgICBjb25zdCByYXdSaWdpZEJvZHkgPSBuZXdCb2R5O1xuICAgICAgICBjb25zdCB2ZWhpY2xlID0gbmV3IENvbmNyZXRlUGh5c2ljVmVoaWNsZSh0aGlzLl9yYXdEeW5hbWljc1dvcmxkLCByYXdSaWdpZEJvZHksIGRlZik7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuYWRkQWN0aW9uKHZlaGljbGUuX3Jhd1ZlaGljbGUpO1xuICAgICAgICAvLyBoYWNrLCB3ZSB1c2UgdGhlIHdhc20gaGVhcCBtZW1vcnkgYWRkcmVzcyBhcyBhbiBpZGVudGlmaWVyLCBpdCdzIGZhc3RlclxuICAgICAgICB0aGlzLl92ZWhpY2xlTWFwLnNldCh2ZWhpY2xlLnB0ciwgdmVoaWNsZSk7XG4gICAgICAgIHJldHVybiB2ZWhpY2xlO1xuICAgIH1cbiAgICBkZXN0cm95VmVoaWNsZSh2ZWhpY2xlKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveVJpZ2lkQm9keSh2ZWhpY2xlLl9jaGFzc2lzQm9keSk7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQucmVtb3ZlQWN0aW9uKHZlaGljbGUuX3Jhd1ZlaGljbGUpO1xuICAgICAgICAvLyBoYWNrLCB3ZSB1c2UgdGhlIHdhc20gaGVhcCBtZW1vcnkgYWRkcmVzcyBhcyBhbiBpZGVudGlmaWVyLCBpdCdzIGZhc3RlclxuICAgICAgICB0aGlzLl92ZWhpY2xlTWFwLmRlbGV0ZSh2ZWhpY2xlLnB0cik7XG4gICAgICAgIHZlaGljbGUuZGlzcG9zZSgpO1xuICAgICAgICAvLyBUT0RPOiB6b21iaWUgdmVoaWNsZXMgY291bGQgc3RpbGwgYmUgcmVmL3VzZWQsIGNhbiBpdCBiZSBwcmV2ZW50ZWQ/XG4gICAgfVxuICAgIGNyZWF0ZUdlbmVyaWM2RG9mQ29uc3RyYWludChkZWYpIHtcbiAgICAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBDb25jcmV0ZUdlbmVyaWM2RG9mQ29uc3RyYWludChkZWYpO1xuICAgICAgICAvLyBnZXQgb3IgY3JlYXRlXG4gICAgICAgIGNvbnN0IHB0ckEgPSBkZWYuYm9keUEuX3Jhd1JpZ2lkQm9keS5wdHI7XG4gICAgICAgIGxldCBib2R5TGlzdEEgPSB0aGlzLl9jb25zdHJhaW50TWFwLmdldChwdHJBKTtcbiAgICAgICAgaWYgKCFib2R5TGlzdEEpIHtcbiAgICAgICAgICAgIGJvZHlMaXN0QSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcC5zZXQocHRyQSwgYm9keUxpc3RBKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzYXZlIGNvbnN0cmFpbnQgYWdhaW5zdCBib2R5QSBwb2ludGVyIHZhbHVlXG4gICAgICAgIGJvZHlMaXN0QS5wdXNoKGNvbnN0cmFpbnQpO1xuICAgICAgICAvLyBnZXQgb3IgY3JlYXRlXG4gICAgICAgIGNvbnN0IHB0ckIgPSBkZWYuYm9keUIuX3Jhd1JpZ2lkQm9keS5wdHI7XG4gICAgICAgIGxldCBib2R5TGlzdEIgPSB0aGlzLl9jb25zdHJhaW50TWFwLmdldChwdHJCKTtcbiAgICAgICAgaWYgKCFib2R5TGlzdEIpIHtcbiAgICAgICAgICAgIGJvZHlMaXN0QiA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fY29uc3RyYWludE1hcC5zZXQocHRyQSwgYm9keUxpc3RCKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzYXZlIGNvbnN0cmFpbnQgYWdhaW5zdCBib2R5QiBwb2ludGVyIHZhbHVlXG4gICAgICAgIGJvZHlMaXN0Qi5wdXNoKGNvbnN0cmFpbnQpO1xuICAgICAgICB0aGlzLl9hbGxDb25zdHJhaW50cy5wdXNoKGNvbnN0cmFpbnQpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludC5fcmF3Q29uc3RyYWludCwgdHJ1ZSk7XG4gICAgICAgIC8vIFRPRE86IHNhdmUgaW4gbWFwXG4gICAgICAgIC8vIFRPRE86IGRpc2NhcmQgaWYgb25lIG9mIHRoZSBib2R5IGlzIHJlbW92ZWRcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnQ7XG4gICAgfVxuICAgIGRlc3Ryb3lHZW5lcmljNkRvZkNvbnN0cmFpbnQoY29uc3RyYWludCkge1xuICAgICAgICBjb25zdCBjb25jcmV0ZSA9IGNvbnN0cmFpbnQ7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQucmVtb3ZlQ29uc3RyYWludChjb25jcmV0ZS5fcmF3Q29uc3RyYWludCk7XG4gICAgICAgIC8vIHJlbW92ZSBjb25zdHJhaW50cyBmcm9tIHRoZSBtYXAgdmFsdWUgKGJvZHlBKVxuICAgICAgICBjb25zdCBib2R5TGlzdEEgPSB0aGlzLl9jb25zdHJhaW50TWFwLmdldChjb25jcmV0ZS5fYm9keUEuX3Jhd1JpZ2lkQm9keS5wdHIpO1xuICAgICAgICBpZiAoYm9keUxpc3RBKSB7XG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBjb25zdHJhaW50IGFuZCByZW1vdmUgaXRcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gYm9keUxpc3RBLmluZGV4T2YoY29uY3JldGUpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICBib2R5TGlzdEEuc3BsaWNlKGluZGV4LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgY29uc3RyYWludHMgZnJvbSB0aGUgbWFwIChib2R5QilcbiAgICAgICAgY29uc3QgYm9keUxpc3RCID0gdGhpcy5fY29uc3RyYWludE1hcC5nZXQoY29uY3JldGUuX2JvZHlCLl9yYXdSaWdpZEJvZHkucHRyKTtcbiAgICAgICAgaWYgKGJvZHlMaXN0Qikge1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY29uc3RyYWludCBhbmQgcmVtb3ZlIGl0XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGJvZHlMaXN0Qi5pbmRleE9mKGNvbmNyZXRlKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYm9keUxpc3RCLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIGZyb20gbGlzdCBvZiBhbGwgY29uc3RyYWludHNcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9hbGxDb25zdHJhaW50cy5pbmRleE9mKGNvbmNyZXRlKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uY3JldGUuZGlzcG9zZSgpO1xuICAgIH1cbiAgICBjcmVhdGVIaW5nZUNvbnN0cmFpbnQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgQ29uY3JldGVIaW5nZUNvbnN0cmFpbnQoZGVmKTtcbiAgICAgICAgLy8gZ2V0IG9yIGNyZWF0ZVxuICAgICAgICBjb25zdCBwdHJBID0gZGVmLmJvZHlBLl9yYXdSaWdpZEJvZHkucHRyO1xuICAgICAgICBsZXQgYm9keUxpc3RBID0gdGhpcy5fY29uc3RyYWludE1hcDIuZ2V0KHB0ckEpO1xuICAgICAgICBpZiAoIWJvZHlMaXN0QSkge1xuICAgICAgICAgICAgYm9keUxpc3RBID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb25zdHJhaW50TWFwMi5zZXQocHRyQSwgYm9keUxpc3RBKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzYXZlIGNvbnN0cmFpbnQgYWdhaW5zdCBib2R5QSBwb2ludGVyIHZhbHVlXG4gICAgICAgIGJvZHlMaXN0QS5wdXNoKGNvbnN0cmFpbnQpO1xuICAgICAgICAvLyBnZXQgb3IgY3JlYXRlXG4gICAgICAgIGNvbnN0IHB0ckIgPSBkZWYuYm9keUIuX3Jhd1JpZ2lkQm9keS5wdHI7XG4gICAgICAgIGxldCBib2R5TGlzdEIgPSB0aGlzLl9jb25zdHJhaW50TWFwMi5nZXQocHRyQik7XG4gICAgICAgIGlmICghYm9keUxpc3RCKSB7XG4gICAgICAgICAgICBib2R5TGlzdEIgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnN0cmFpbnRNYXAyLnNldChwdHJBLCBib2R5TGlzdEIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNhdmUgY29uc3RyYWludCBhZ2FpbnN0IGJvZHlCIHBvaW50ZXIgdmFsdWVcbiAgICAgICAgYm9keUxpc3RCLnB1c2goY29uc3RyYWludCk7XG4gICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzMi5wdXNoKGNvbnN0cmFpbnQpO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludC5fcmF3Q29uc3RyYWludCwgdHJ1ZSk7XG4gICAgICAgIC8vIFRPRE86IHNhdmUgaW4gbWFwXG4gICAgICAgIC8vIFRPRE86IGRpc2NhcmQgaWYgb25lIG9mIHRoZSBib2R5IGlzIHJlbW92ZWRcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnQ7XG4gICAgfVxuICAgIGRlc3Ryb3lIaW5nZUNvbnN0cmFpbnQoY29uc3RyYWludCkge1xuICAgICAgICBjb25zdCBjb25jcmV0ZSA9IGNvbnN0cmFpbnQ7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQucmVtb3ZlQ29uc3RyYWludChjb25jcmV0ZS5fcmF3Q29uc3RyYWludCk7XG4gICAgICAgIC8vIHJlbW92ZSBjb25zdHJhaW50cyBmcm9tIHRoZSBtYXAgdmFsdWUgKGJvZHlBKVxuICAgICAgICBjb25zdCBib2R5TGlzdEEgPSB0aGlzLl9jb25zdHJhaW50TWFwMi5nZXQoY29uY3JldGUuX2JvZHlBLl9yYXdSaWdpZEJvZHkucHRyKTtcbiAgICAgICAgaWYgKGJvZHlMaXN0QSkge1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgY29uc3RyYWludCBhbmQgcmVtb3ZlIGl0XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGJvZHlMaXN0QS5pbmRleE9mKGNvbmNyZXRlKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYm9keUxpc3RBLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIGNvbnN0cmFpbnRzIGZyb20gdGhlIG1hcCAoYm9keUIpXG4gICAgICAgIGNvbnN0IGJvZHlMaXN0QiA9IHRoaXMuX2NvbnN0cmFpbnRNYXAyLmdldChjb25jcmV0ZS5fYm9keUIuX3Jhd1JpZ2lkQm9keS5wdHIpO1xuICAgICAgICBpZiAoYm9keUxpc3RCKSB7XG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBjb25zdHJhaW50IGFuZCByZW1vdmUgaXRcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gYm9keUxpc3RCLmluZGV4T2YoY29uY3JldGUpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICBib2R5TGlzdEIuc3BsaWNlKGluZGV4LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgZnJvbSBsaXN0IG9mIGFsbCBjb25zdHJhaW50c1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2FsbENvbnN0cmFpbnRzMi5pbmRleE9mKGNvbmNyZXRlKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2FsbENvbnN0cmFpbnRzMi5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICB9XG4gICAgICAgIGNvbmNyZXRlLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgcmF5Q2FzdChmcm9tLCB0bykge1xuICAgICAgICByZXR1cm4gcmF5Q2FzdCh0aGlzLl9yYXdEeW5hbWljc1dvcmxkLCB0aGlzLl9ib2R5TWFwLCB7XG4gICAgICAgICAgICBmcm9tLFxuICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJHcm91cDogLTEsXG4gICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiAtMVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29udmV4U3dlZXAoZnJvbSwgdG8sIHJhZGl1cykge1xuICAgICAgICByZXR1cm4gY29udmV4U3dlZXAodGhpcy5fcmF3RHluYW1pY3NXb3JsZCwge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IC0xLFxuICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyTWFzazogLTEsXG4gICAgICAgICAgICByYWRpdXM6IHJhZGl1c1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2luaXRDb2xsaXNpb25FdmVudHMoKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50RmxhZ3MgPSB7XG4gICAgICAgICAgICB3b3JsZDogMSA8PCAwLFxuICAgICAgICAgICAgYm9keUE6IDEgPDwgMSxcbiAgICAgICAgICAgIGJvZHlCOiAxIDw8IDJcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgX29uQ29udGFjdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm9keUEgPSBldmVudC5kYXRhLmdldEJvZHlBKCk7XG4gICAgICAgICAgICBjb25zdCBib2R5QiA9IGV2ZW50LmRhdGEuZ2V0Qm9keUIoKTtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2lkQm9keUEgPSB0aGlzLl9ib2R5TWFwLmdldChib2R5QS5wdHIpO1xuICAgICAgICAgICAgY29uc3QgcmlnaWRCb2R5QiA9IHRoaXMuX2JvZHlNYXAuZ2V0KGJvZHlCLnB0cik7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnX29uQ29udGFjdENoYW5nZScpO1xuICAgICAgICAgICAgaWYgKCFyaWdpZEJvZHlBIHx8ICFyaWdpZEJvZHlCKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IGV2ZW50LnR5cGU7XG4gICAgICAgICAgICBjb25zdCBjb2xsaXNpb25GbGFnID0gKCh0aGlzLmlzRXZlbnRMaXN0ZW5lZFRvKHR5cGUpID8gZXZlbnRGbGFncy53b3JsZCA6IDApIHxcbiAgICAgICAgICAgICAgICAocmlnaWRCb2R5QS5pc0V2ZW50TGlzdGVuZWRUbyh0eXBlKSA/IGV2ZW50RmxhZ3MuYm9keUEgOiAwKSB8XG4gICAgICAgICAgICAgICAgKHJpZ2lkQm9keUIuaXNFdmVudExpc3RlbmVkVG8odHlwZSkgPyBldmVudEZsYWdzLmJvZHlCIDogMCkpO1xuICAgICAgICAgICAgaWYgKGNvbGxpc2lvbkZsYWcgPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbnRhY3RJZCA9IGV2ZW50LmRhdGEuZ2V0SWQoKTtcbiAgICAgICAgICAgIGNvbnN0IGJ1bGxldFBvcyA9IGV2ZW50LmRhdGEuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IGJ1bGxldE5vcm1hbEIgPSBldmVudC5kYXRhLmdldE5vcm1hbEIoKTtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgIHg6IGJ1bGxldFBvcy54KCksXG4gICAgICAgICAgICAgICAgeTogYnVsbGV0UG9zLnkoKSxcbiAgICAgICAgICAgICAgICB6OiBidWxsZXRQb3MueigpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbEIgPSB7XG4gICAgICAgICAgICAgICAgeDogYnVsbGV0Tm9ybWFsQi54KCksXG4gICAgICAgICAgICAgICAgeTogYnVsbGV0Tm9ybWFsQi55KCksXG4gICAgICAgICAgICAgICAgejogYnVsbGV0Tm9ybWFsQi56KCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGNvbGxpc2lvbkZsYWcgJiBldmVudEZsYWdzLndvcmxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFjdElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaWRCb2R5QSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2lkQm9keUIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZnJvbVZhbHVlcyQxKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHBvc2l0aW9uLnopLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQjogZnJvbVZhbHVlcyQxKG5vcm1hbEIueCwgbm9ybWFsQi55LCBub3JtYWxCLnopLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sbGlzaW9uRmxhZyAmIGV2ZW50RmxhZ3MuYm9keUEpIHtcbiAgICAgICAgICAgICAgICByaWdpZEJvZHlBLmRpc3BhdGNoRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdGhlcjogcmlnaWRCb2R5QixcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc2l0aW9uOiB7IHg6IHBvc2l0aW9uLngsIHk6IHBvc2l0aW9uLnksIHo6IHBvc2l0aW9uLnogfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbEI6IHsgeDogLW5vcm1hbEIueCwgeTogLW5vcm1hbEIueSwgejogLW5vcm1hbEIueiB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZnJvbVZhbHVlcyQxKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHBvc2l0aW9uLnopLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQjogZnJvbVZhbHVlcyQxKC1ub3JtYWxCLngsIC1ub3JtYWxCLnksIC1ub3JtYWxCLnopLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29sbGlzaW9uRmxhZyAmIGV2ZW50RmxhZ3MuYm9keUIpIHtcbiAgICAgICAgICAgICAgICByaWdpZEJvZHlCLmRpc3BhdGNoRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWN0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdGhlcjogcmlnaWRCb2R5QSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc2l0aW9uOiB7IHg6IHBvc2l0aW9uLngsIHk6IHBvc2l0aW9uLnksIHo6IHBvc2l0aW9uLnogfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbEI6IHsgeDogbm9ybWFsQi54LCB5OiBub3JtYWxCLnksIHo6IG5vcm1hbEIueiB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZnJvbVZhbHVlcyQxKHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHBvc2l0aW9uLnopLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsQjogZnJvbVZhbHVlcyQxKG5vcm1hbEIueCwgbm9ybWFsQi55LCBub3JtYWxCLnopLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRPRE86IGhhY2t5XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGJ1bGxldC5vbihcImJlZ2luQ29udGFjdFwiLCBfb25Db250YWN0Q2hhbmdlKTtcbiAgICAgICAgYnVsbGV0Lm9uKFwidXBkYXRlQ29udGFjdFwiLCBfb25Db250YWN0Q2hhbmdlKTtcbiAgICAgICAgYnVsbGV0Lm9uKFwiZW5kQ29udGFjdFwiLCBfb25Db250YWN0Q2hhbmdlKTtcbiAgICAgICAgYnVsbGV0Lm9uKFwiY2NkQ29udGFjdFwiLCBfb25Db250YWN0Q2hhbmdlKTtcbiAgICAgICAgYnVsbGV0Lmxpc3RlblRvQ29udGFjdENhbGxiYWNrcygpO1xuICAgIH1cbiAgICBzdGVwU2ltdWxhdGlvbihkZWx0YVRpbWVTZWMsIG1heFN1YlN0ZXBzID0gMywgZml4ZWRTdGVwID0gMSAvIDYwKSB7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuc3RlcFNpbXVsYXRpb24oZGVsdGFUaW1lU2VjLCBtYXhTdWJTdGVwcywgZml4ZWRTdGVwKTtcbiAgICB9XG4gICAgc2V0R3Jhdml0eSh4LCB5LCB6KSB7XG4gICAgICAgIGNvbnN0IGJ1bGxldCA9IFdhc21Nb2R1bGVIb2xkZXIuZ2V0KCk7XG4gICAgICAgIGNvbnN0IG5ld1ZlbCA9IG5ldyBidWxsZXQuYnRWZWN0b3IzKHgsIHksIHopO1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLnNldEdyYXZpdHkobmV3VmVsKTtcbiAgICAgICAgYnVsbGV0LmRlc3Ryb3kobmV3VmVsKTtcbiAgICB9XG4gICAgc2V0RGVidWdXaXJlZnJhbWVDYWxsYmFjayhjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBidWxsZXQgPSBXYXNtTW9kdWxlSG9sZGVyLmdldCgpO1xuICAgICAgICBjb25zdCBjb250YWN0UHRyID0gYnVsbGV0LmFkZEZ1bmN0aW9uKGNhbGxiYWNrLCBcInZmZmZmZmZmZmZcIik7IC8vIHZmZmZmZmZmZmYgLT4gVm9pZCBGbG9hdCBGbG9hdCAuLi5cbiAgICAgICAgdGhpcy5fcmF3RHluYW1pY3NXb3JsZC5zZXREZWJ1Z1dpcmVmcmFtZUNhbGxiYWNrKGNvbnRhY3RQdHIpO1xuICAgIH1cbiAgICBzZXREZWJ1Z1dpcmVmcmFtZUZlYXR1cmVzRmxhZyhmbGFnKSB7XG4gICAgICAgIHRoaXMuX3Jhd0R5bmFtaWNzV29ybGQuc2V0RGVidWdXaXJlZnJhbWVGZWF0dXJlc0ZsYWcoZmxhZyk7XG4gICAgfVxuICAgIGRlYnVnRHJhd1dvcmxkKCkge1xuICAgICAgICB0aGlzLl9yYXdEeW5hbWljc1dvcmxkLmRlYnVnRHJhd1dvcmxkKCk7XG4gICAgfVxufVxuXG52YXIgRGVidWdEcmF3RmxhZ3M7XG4oZnVuY3Rpb24gKERlYnVnRHJhd0ZsYWdzKSB7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfTm9EZWJ1Z1wiXSA9IDBdID0gXCJEQkdfTm9EZWJ1Z1wiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdXaXJlZnJhbWVcIl0gPSAxXSA9IFwiREJHX0RyYXdXaXJlZnJhbWVcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3QWFiYlwiXSA9IDJdID0gXCJEQkdfRHJhd0FhYmJcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3RmVhdHVyZXNUZXh0XCJdID0gNF0gPSBcIkRCR19EcmF3RmVhdHVyZXNUZXh0XCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd0NvbnRhY3RQb2ludHNcIl0gPSA4XSA9IFwiREJHX0RyYXdDb250YWN0UG9pbnRzXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfTm9EZWFjdGl2YXRpb25cIl0gPSAxNl0gPSBcIkRCR19Ob0RlYWN0aXZhdGlvblwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX05vSGVscFRleHRcIl0gPSAzMl0gPSBcIkRCR19Ob0hlbHBUZXh0XCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd1RleHRcIl0gPSA2NF0gPSBcIkRCR19EcmF3VGV4dFwiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX1Byb2ZpbGVUaW1pbmdzXCJdID0gMTI4XSA9IFwiREJHX1Byb2ZpbGVUaW1pbmdzXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRW5hYmxlU2F0Q29tcGFyaXNvblwiXSA9IDI1Nl0gPSBcIkRCR19FbmFibGVTYXRDb21wYXJpc29uXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRGlzYWJsZUJ1bGxldExDUFwiXSA9IDUxMl0gPSBcIkRCR19EaXNhYmxlQnVsbGV0TENQXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRW5hYmxlQ0NEXCJdID0gMTAyNF0gPSBcIkRCR19FbmFibGVDQ0RcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3Q29uc3RyYWludHNcIl0gPSAyMDQ4XSA9IFwiREJHX0RyYXdDb25zdHJhaW50c1wiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0RyYXdDb25zdHJhaW50TGltaXRzXCJdID0gNDA5Nl0gPSBcIkRCR19EcmF3Q29uc3RyYWludExpbWl0c1wiO1xuICAgIERlYnVnRHJhd0ZsYWdzW0RlYnVnRHJhd0ZsYWdzW1wiREJHX0Zhc3RXaXJlZnJhbWVcIl0gPSA4MTkyXSA9IFwiREJHX0Zhc3RXaXJlZnJhbWVcIjtcbiAgICBEZWJ1Z0RyYXdGbGFnc1tEZWJ1Z0RyYXdGbGFnc1tcIkRCR19EcmF3Tm9ybWFsc1wiXSA9IDE2Mzg0XSA9IFwiREJHX0RyYXdOb3JtYWxzXCI7XG4gICAgRGVidWdEcmF3RmxhZ3NbRGVidWdEcmF3RmxhZ3NbXCJEQkdfRHJhd0ZyYW1lc1wiXSA9IDMyNzY4XSA9IFwiREJHX0RyYXdGcmFtZXNcIjtcbn0pKERlYnVnRHJhd0ZsYWdzIHx8IChEZWJ1Z0RyYXdGbGFncyA9IHt9KSk7XG5cbnZhciBpbmRleCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgQ29uY3JldGVQaHlzaWNCb2R5OiBDb25jcmV0ZVBoeXNpY0JvZHksXG4gICAgQ29uY3JldGVQaHlzaWNWZWhpY2xlOiBDb25jcmV0ZVBoeXNpY1ZlaGljbGUsXG4gICAgQ29udGFjdEV2ZW50SGFuZGxlcjogQ29udGFjdEV2ZW50SGFuZGxlcixcbiAgICBnZXQgRGVidWdEcmF3RmxhZ3MgKCkgeyByZXR1cm4gRGVidWdEcmF3RmxhZ3M7IH0sXG4gICAgUGh5c2ljV29ybGQ6IFBoeXNpY1dvcmxkLFxuICAgIFdhc21Nb2R1bGVIb2xkZXI6IFdhc21Nb2R1bGVIb2xkZXIsXG4gICAgY29udmV4U3dlZXA6IGNvbnZleFN3ZWVwLFxuICAgIHJheUNhc3Q6IHJheUNhc3Rcbn0pO1xuXG5leHBvcnRzLkJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUgPSBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlO1xuZXhwb3J0cy5waHlzaWNzID0gaW5kZXg7XG4iLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG5pbiB2ZWMyIGFfdmVydGV4UG9zaXRpb247XG5pbiB2ZWMzIGFfcGxvdFBvc2l0aW9uO1xuXG5vdXQgdmVjMyB2X3Bvc2l0aW9uO1xuXG52b2lkIG1haW4odm9pZClcbntcbiAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFfdmVydGV4UG9zaXRpb24sIDEuMCwgMS4wKTtcblxuICB2X3Bvc2l0aW9uID0gYV9wbG90UG9zaXRpb247XG59XG5gLnRyaW0oKTsiLAogICJleHBvcnQgZGVmYXVsdCBgXG4jdmVyc2lvbiAzMDAgZXNcblxucHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG4vL1xuLy9cbi8vXG5cblxuLy8gSW5kaWNlcyBvZiByZWZyYWN0aW9uRmFjdG9yXG5jb25zdCBmbG9hdCBBaXIgPSAxLjA7XG5jb25zdCBmbG9hdCBHbGFzcyA9IDEuNTE3MTQ7XG5cbi8vIEFpciB0byBnbGFzcyByYXRpbyBvZiB0aGUgaW5kaWNlcyBvZiByZWZyYWN0aW9uRmFjdG9yIChFdGEpXG5jb25zdCBmbG9hdCBFdGEgPSBBaXIgLyBHbGFzcztcblxuLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmVmcmFjdGl2ZV9pbmRleCBSZWZsZWN0aXZpdHlcbmNvbnN0IGZsb2F0IFIwID0gKChBaXIgLSBHbGFzcykgKiAoQWlyIC0gR2xhc3MpKSAvICgoQWlyICsgR2xhc3MpICogKEFpciArIEdsYXNzKSk7XG5cbi8vXG4vL1xuLy9cblxudW5pZm9ybSB2ZWMzICAgICAgICB1X2NhbWVyYUV5ZTtcblxuLy9cblxudW5pZm9ybSBzYW1wbGVyMkQgICB1X3NjZW5lVGV4dHVyZURhdGE7XG51bmlmb3JtIGludCAgICAgICAgIHVfc2NlbmVUZXh0dXJlU2l6ZTtcblxudW5pZm9ybSBpbnQgICAgICAgdV9zcGhlcmVzU3RhcnQ7XG51bmlmb3JtIGludCAgICAgICB1X3NwaGVyZXNTdG9wO1xuXG51bmlmb3JtIGludCAgICAgICB1X2JveGVzU3RhcnQ7XG51bmlmb3JtIGludCAgICAgICB1X2JveGVzU3RvcDtcblxudW5pZm9ybSBpbnQgICAgICAgdV90cmlhbmdsZXNTdGFydDtcbnVuaWZvcm0gaW50ICAgICAgIHVfdHJpYW5nbGVzU3RvcDtcblxuLy9cblxudW5pZm9ybSBzYW1wbGVyMkQgICB1X2xpZ2h0c1RleHR1cmVEYXRhO1xuXG51bmlmb3JtIGludCAgICAgICB1X3N1bkxpZ2h0c1N0YXJ0O1xudW5pZm9ybSBpbnQgICAgICAgdV9zdW5MaWdodHNTdG9wO1xuXG51bmlmb3JtIGludCAgICAgICB1X3Nwb3RMaWdodHNTdGFydDtcbnVuaWZvcm0gaW50ICAgICAgIHVfc3BvdExpZ2h0c1N0b3A7XG5cbi8vXG4vL1xuLy9cblxuaW4gdmVjMyAgdl9wb3NpdGlvbjtcblxub3V0IHZlYzQgb19jb2xvcjtcblxuLy9cblxuY29uc3QgZmxvYXQgICAgIGdfYW1iaWFudExpZ2h0ID0gMC4xNTtcblxuY29uc3QgdmVjMyAgICAgIGdfYmFja2dyb3VuZENvbG9yID0gdmVjMygwLjEpO1xuXG4vL1xuXG5zdHJ1Y3QgUmF5VmFsdWVzXG57XG4gIHZlYzMgb3JpZ2luO1xuICB2ZWMzIGRpcmVjdGlvbjtcbn07XG5cbnN0cnVjdCBSYXlSZXN1bHRcbntcbiAgYm9vbCBoYXNIaXQ7XG4gIGZsb2F0IGRpc3RhbmNlO1xuICB2ZWMzIHBvc2l0aW9uO1xuICB2ZWMzIG5vcm1hbDtcbiAgdmVjNCBjb2xvcjtcbiAgZmxvYXQgcmVmbGVjdGlvbkZhY3RvcjtcbiAgZmxvYXQgcmVmcmFjdGlvbkZhY3RvcjtcbiAgYm9vbCBsaWdodEVuYWJsZWQ7XG59O1xuXG5cbnN0cnVjdCBTdGFja0RhdGFcbntcbiAgLy8gaW50IHBhcmVudEluZGV4O1xuICBib29sIHVzZWQ7XG4gIFJheVZhbHVlcyByYXk7XG4gIFJheVJlc3VsdCByZXN1bHQ7XG4gIGludCByZWZsZWN0aW9uSW5kZXg7XG4gIGludCByZWZyYWN0aW9uSW5kZXg7XG59O1xuXG4vL1xuLy9cbi8vXG4vL1xuLy9cblxuZmxvYXQgZ2V0U2NlbmVEYXRhQnlJbmRleChpbnQgaW5kZXgpXG57XG4gIHJldHVybiB0ZXhlbEZldGNoKHVfc2NlbmVUZXh0dXJlRGF0YSwgaXZlYzIoaW5kZXgsIDApLCAwKS54O1xufVxuXG52ZWMzIGdldFNjZW5lVmVjM0J5SW5kZXgoaW50IGluZGV4KVxue1xuICByZXR1cm4gdmVjMyhcbiAgICB0ZXhlbEZldGNoKHVfc2NlbmVUZXh0dXJlRGF0YSwgaXZlYzIoaW5kZXggKyAwLCAwKSwgMCkueCxcbiAgICB0ZXhlbEZldGNoKHVfc2NlbmVUZXh0dXJlRGF0YSwgaXZlYzIoaW5kZXggKyAxLCAwKSwgMCkueCxcbiAgICB0ZXhlbEZldGNoKHVfc2NlbmVUZXh0dXJlRGF0YSwgaXZlYzIoaW5kZXggKyAyLCAwKSwgMCkueFxuICApO1xufVxuXG5mbG9hdCBnZXRMaWdodHNEYXRhQnlJbmRleChpbnQgaW5kZXgpXG57XG4gIHJldHVybiB0ZXhlbEZldGNoKHVfbGlnaHRzVGV4dHVyZURhdGEsIGl2ZWMyKGluZGV4LCAwKSwgMCkueDtcbn1cblxudmVjMyBnZXRMaWdodHNWZWMzQnlJbmRleChpbnQgaW5kZXgpXG57XG4gIHJldHVybiB2ZWMzKFxuICAgIHRleGVsRmV0Y2godV9saWdodHNUZXh0dXJlRGF0YSwgaXZlYzIoaW5kZXggKyAwLCAwKSwgMCkueCxcbiAgICB0ZXhlbEZldGNoKHVfbGlnaHRzVGV4dHVyZURhdGEsIGl2ZWMyKGluZGV4ICsgMSwgMCksIDApLngsXG4gICAgdGV4ZWxGZXRjaCh1X2xpZ2h0c1RleHR1cmVEYXRhLCBpdmVjMihpbmRleCArIDIsIDApLCAwKS54XG4gICk7XG59XG5cbnZlYzMgYXBwbHlfcXVhdF90b192ZWMzKHZlYzMgcG9zaXRpb24sIHZlYzQgcSlcbntcbiAgdmVjMyB2ID0gcG9zaXRpb24ueHl6O1xuICByZXR1cm4gdiArIDIuMCAqIGNyb3NzKHEueHl6LCBjcm9zcyhxLnh5eiwgdikgKyBxLncgKiB2KTtcbn1cbm1hdDMgcXVhdF90b19tYXQzKHZlYzQgcSlcbntcblxuICAvLyBtdWx0aXBseSBieSBzcXJ0KDIpIHRvIGdldCByaWQgb2YgYWxsIHRoZSAyLjAgZmFjdG9ycyBpbiB0aGUgbWF0cml4XG4gIHEgKj0gMS40MTQyMTQ7XG5cbiAgZmxvYXQgeHggPSBxLnggKiBxLng7XG4gIGZsb2F0IHh5ID0gcS54ICogcS55O1xuICBmbG9hdCB4eiA9IHEueCAqIHEuejtcbiAgZmxvYXQgeHcgPSBxLnggKiBxLnc7XG5cbiAgZmxvYXQgeXkgPSBxLnkgKiBxLnk7XG4gIGZsb2F0IHl6ID0gcS55ICogcS56O1xuICBmbG9hdCB5dyA9IHEueSAqIHEudztcblxuICBmbG9hdCB6eiA9IHEueiAqIHEuejtcbiAgZmxvYXQgencgPSBxLnogKiBxLnc7XG5cbiAgcmV0dXJuIG1hdDMoXG4gICAgMS4wIC0geXkgLSB6eixcbiAgICB4eSArIHp3LFxuICAgIHh6IC0geXcsXG5cbiAgICB4eSAtIHp3LFxuICAgIDEuMCAtIHh4IC0genosXG4gICAgeXogKyB4dyxcblxuICAgIHh6ICsgeXcsXG4gICAgeXogLSB4dyxcbiAgICAxLjAgLSB4eCAtIHl5XG4gICk7XG59XG4vL1xuLy9cbi8vXG4vL1xuLy9cblxuYm9vbCBpbnRlcnNlY3RTcGhlcmUoUmF5VmFsdWVzIHJheSwgZmxvYXQgcmFkaXVzLCBvdXQgZmxvYXQgb3V0RGlzdGFuY2UsIG91dCB2ZWMzIG5vcm1hbClcbntcbiAgZmxvYXQgbmVhclZhbHVlID0gMC4wMDE7IC8vIFRPRE86IGhhcmRjb2RlZFxuICBmbG9hdCBmYXJWYWx1ZSA9IDEwMC4wOyAvLyBUT0RPOiBoYXJkY29kZWRcblxuICBmbG9hdCBiID0gZG90KHJheS5vcmlnaW4sIHJheS5kaXJlY3Rpb24pO1xuICBmbG9hdCBjID0gZG90KHJheS5vcmlnaW4sIHJheS5vcmlnaW4pIC0gcmFkaXVzICogcmFkaXVzO1xuICBmbG9hdCBoID0gYiAqIGIgLSBjO1xuICBpZiAoaCA8IDAuMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGggPSBzcXJ0KGgpO1xuXG4gIGZsb2F0IGQxID0gLWIgLSBoO1xuICBpZiAoZDEgPj0gbmVhclZhbHVlICYmIGQxIDw9IGZhclZhbHVlKVxuICB7XG4gICAgbm9ybWFsID0gbm9ybWFsaXplKHJheS5vcmlnaW4gKyByYXkuZGlyZWN0aW9uICogZDEpO1xuICAgIG91dERpc3RhbmNlID0gZDE7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmbG9hdCBkMiA9IC1iICsgaDtcbiAgaWYgKGQyID49IG5lYXJWYWx1ZSAmJiBkMiA8PSBmYXJWYWx1ZSlcbiAge1xuICAgIG5vcm1hbCA9IG5vcm1hbGl6ZShyYXkub3JpZ2luICsgcmF5LmRpcmVjdGlvbiAqIGQyKTtcbiAgICBvdXREaXN0YW5jZSA9IGQyO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5ib29sIGludGVyc2VjdEJveChSYXlWYWx1ZXMgcmF5LCB2ZWMzIGJveFNpemUsIG91dCBmbG9hdCBvdXREaXN0YW5jZSwgb3V0IHZlYzMgbm9ybWFsKVxue1xuICBmbG9hdCBuZWFyVmFsdWUgPSAwLjAwMTsgLy8gVE9ETzogaGFyZGNvZGVkXG4gIGZsb2F0IGZhclZhbHVlID0gMTAwLjA7IC8vIFRPRE86IGhhcmRjb2RlZFxuXG4gIC8vXG4gIC8vXG4gIC8vIHNhZCBoYWNrOiBmaXggYSBzaGFkb3cgcmVsYXRlZCBidWdcblxuICAvLyBpZiAocmF5Lm9yaWdpbi54ID09IDAuMCkgcmF5Lm9yaWdpbi54ID0gLTFlLTg7XG4gIC8vIGlmIChyYXkub3JpZ2luLnkgPT0gMC4wKSByYXkub3JpZ2luLnkgPSAtMWUtODtcbiAgLy8gaWYgKHJheS5vcmlnaW4ueiA9PSAwLjApIHJheS5vcmlnaW4ueiA9IC0xZS04O1xuXG4gIGlmIChyYXkuZGlyZWN0aW9uLnggPT0gMC4wKSByYXkuZGlyZWN0aW9uLnggPSAtMWUtODtcbiAgaWYgKHJheS5kaXJlY3Rpb24ueSA9PSAwLjApIHJheS5kaXJlY3Rpb24ueSA9IC0xZS04O1xuICBpZiAocmF5LmRpcmVjdGlvbi56ID09IDAuMCkgcmF5LmRpcmVjdGlvbi56ID0gLTFlLTg7XG5cbiAgLy8gc2FkIGhhY2s6IGZpeCBhIHNoYWRvdyByZWxhdGVkIGJ1Z1xuICAvL1xuICAvL1xuXG4gIHZlYzMgbSA9IHNpZ24ocmF5LmRpcmVjdGlvbikgLyBtYXgoYWJzKHJheS5kaXJlY3Rpb24pLCAxZS04KTtcbiAgdmVjMyBuID0gbSAqIHJheS5vcmlnaW47XG4gIHZlYzMgayA9IGFicyhtKSAqIGJveFNpemU7XG5cbiAgdmVjMyB0MSA9IC1uIC0gaztcbiAgdmVjMyB0MiA9IC1uICsgaztcblxuICBmbG9hdCB0TiA9IG1heChtYXgodDEueCwgdDEueSksIHQxLnopO1xuICBmbG9hdCB0RiA9IG1pbihtaW4odDIueCwgdDIueSksIHQyLnopO1xuXG4gIGlmICh0TiA+IHRGIHx8IHRGIDw9IDAuMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0TiA+PSBuZWFyVmFsdWUgJiYgdE4gPD0gZmFyVmFsdWUpXG4gIHtcbiAgICBub3JtYWwgPSBub3JtYWxpemUoLXNpZ24ocmF5LmRpcmVjdGlvbikgKiBzdGVwKHQxLnl6eCwgdDEueHl6KSAqIHN0ZXAodDEuenh5LCB0MS54eXopKTtcbiAgICBvdXREaXN0YW5jZSA9IHROO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHRGID49IG5lYXJWYWx1ZSAmJiB0RiA8PSBmYXJWYWx1ZSlcbiAge1xuICAgIG5vcm1hbCA9IG5vcm1hbGl6ZSgtc2lnbihyYXkuZGlyZWN0aW9uKSAqIHN0ZXAodDEueXp4LCB0MS54eXopICogc3RlcCh0MS56eHksIHQxLnh5eikpO1xuICAgIG91dERpc3RhbmNlID0gdEY7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmJvb2wgaW50ZXJzZWN0VHJpYW5nbGUoUmF5VmFsdWVzIHJheSwgdmVjMyB2MCwgdmVjMyB2MSwgdmVjMyB2Miwgb3V0IGZsb2F0IG91dERpc3RhbmNlLCBvdXQgdmVjMyBub3JtYWwpXG57XG4gIGZsb2F0IG5lYXJWYWx1ZSA9IDAuMDAxOyAvLyBUT0RPOiBoYXJkY29kZWRcbiAgZmxvYXQgZmFyVmFsdWUgPSAxMDAuMDsgLy8gVE9ETzogaGFyZGNvZGVkXG5cbiAgdmVjMyB2MXYwID0gdjEgLSB2MDtcbiAgdmVjMyB2MnYwID0gdjIgLSB2MDtcbiAgdmVjMyByb3YwID0gcmF5Lm9yaWdpbiAtIHYwO1xuXG4gIHZlYzMgbiA9IGNyb3NzKHYxdjAsIHYydjApO1xuICB2ZWMzIHEgPSBjcm9zcyhyb3YwLCByYXkuZGlyZWN0aW9uKTtcbiAgZmxvYXQgZCA9IDEuMCAvIGRvdChyYXkuZGlyZWN0aW9uLCBuKTtcbiAgZmxvYXQgdSA9IGQgKiBkb3QoLXEsIHYydjApO1xuICBmbG9hdCB2ID0gZCAqIGRvdChxLCB2MXYwKTtcbiAgZmxvYXQgdCA9IGQgKiBkb3QoLW4sIHJvdjApO1xuXG4gIGlmICh1IDwgMC4wIHx8IHYgPCAwLjAgfHwgKHUgKyB2KSA+IDEuMCB8fCB0IDwgbmVhclZhbHVlIHx8IHQgPiBmYXJWYWx1ZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIG5vcm1hbCA9IG5vcm1hbGl6ZSgtbik7XG4gIG91dERpc3RhbmNlID0gdDtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIGZsb2F0IGludGVyc2VjdFBsYW5lKFJheVZhbHVlcyByYXksIHZlYzMgbm9ybWFsLCBmbG9hdCBvZmZzZXQpXG4vLyB7XG4vLyAgICAgcmV0dXJuIC0oZG90KHJheS5vcmlnaW4sIG5vcm1hbCkgKyBvZmZzZXQpIC8gZG90KHJheS5kaXJlY3Rpb24sIG5vcm1hbCk7XG4vLyB9XG5cbi8vIGZsb2F0IGludGVyc2VjdFBsYW5lMihSYXlWYWx1ZXMgcmF5LCB2ZWMzIG5vcm1hbCwgZmxvYXQgb2Zmc2V0KVxuLy8ge1xuLy8gICAgIGZsb2F0IG5lYXJWYWx1ZSA9IDAuMDAxOyAvLyBUT0RPOiBoYXJkY29kZWRcbi8vICAgICBmbG9hdCBmYXJWYWx1ZSA9IDEwMDAuMDsgLy8gVE9ETzogaGFyZGNvZGVkXG5cbi8vICAgICBmbG9hdCBhID0gZG90KHJheS5kaXJlY3Rpb24sIG5vcm1hbCk7XG4vLyAgICAgZmxvYXQgZCA9IC0oZG90KHJheS5vcmlnaW4sIG5vcm1hbCkgKyBvZmZzZXQpIC8gYTtcblxuLy8gICAgIGlmIChhID4gMC4wIHx8IGQgPCBuZWFyVmFsdWUgfHwgZCA+IGZhclZhbHVlKVxuLy8gICAgICAgICByZXR1cm4gLTEuMDtcblxuLy8gICAgIHJldHVybiBkO1xuLy8gfVxuXG4vLyBmbG9hdCBkaXNrSW50ZXJzZWN0KFJheVZhbHVlcyByYXksIHZlYzMgY2VudGVyLCB2ZWMzIG5vcm1hbCwgZmxvYXQgcmFkaXVzKVxuLy8ge1xuLy8gICAgIHZlYzMgIG8gPSByYXkub3JpZ2luIC0gY2VudGVyO1xuLy8gICAgIGZsb2F0IHQgPSAtZG90KG5vcm1hbCwgbykgLyBkb3QocmF5LmRpcmVjdGlvbiwgbm9ybWFsKTtcbi8vICAgICB2ZWMzICBxID0gbyArIHJheS5kaXJlY3Rpb24gKiB0O1xuLy8gICAgIHJldHVybiAoZG90KHEsIHEpIDwgcmFkaXVzICogcmFkaXVzKSA/IHQgOiAtMS4wO1xuLy8gfVxuXG4vL1xuLy9cbi8vXG4vL1xuLy9cblxuYm9vbCBpbnRlcnNlY3RTY2VuZShSYXlWYWx1ZXMgcmF5LCBvdXQgUmF5UmVzdWx0IG91dEJlc3RSZXN1bHQsIGJvb2wgc2hhZG93TW9kZSlcbntcbiAgZmxvYXQgYmVzdERpc3RhbmNlID0gLTEuMDtcblxuICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IGZhbHNlO1xuICBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID0gLTEuMDtcblxuICBpZiAodV9zY2VuZVRleHR1cmVTaXplIDw9IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBSYXlWYWx1ZXMgdG1wUmF5O1xuICB2ZWMzIG5vcm1hbDtcblxuICBmb3IgKGludCBpbmRleCA9IHVfc3BoZXJlc1N0YXJ0OyBpbmRleCA8IHVfc3BoZXJlc1N0b3A7IGluZGV4ICs9IDE2KVxuICB7XG4gICAgYm9vbCBjYXN0U2hhZG93ID0gKGdldFNjZW5lRGF0YUJ5SW5kZXgoaW5kZXggKyAxMykgIT0gMC4wKTtcblxuICAgIGlmIChzaGFkb3dNb2RlICYmICFjYXN0U2hhZG93KSB7XG4gICAgICBjb250aW51ZTsgLy8gdGhpcyBzcGhlcmUgZG9lcyBub3QgY2FzdCBhIHNoYWRvd1xuICAgIH1cblxuICAgIGZsb2F0IHJlZnJhY3Rpb25GYWN0b3IgPSBnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgMTIpO1xuICAgIGlmIChyZWZyYWN0aW9uRmFjdG9yID4gMC4wKVxuICAgIHtcblxuICAgICAgLy8gcmVmcmFjdGlvbiBsb2dpY1xuXG4gICAgICB2ZWMzIGNlbnRlciA9IGdldFNjZW5lVmVjM0J5SW5kZXgoaW5kZXggKyAwKTtcblxuICAgICAgZmxvYXQgcmFkaXVzID0gZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDcpO1xuXG4gICAgICB0bXBSYXkub3JpZ2luID0gcmF5Lm9yaWdpbiAtIGNlbnRlcjtcbiAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSByYXkuZGlyZWN0aW9uO1xuXG4gICAgICBmbG9hdCBjdXJyRGlzdGFuY2UxID0gMC4wO1xuICAgICAgaWYgKFxuICAgICAgICAhaW50ZXJzZWN0U3BoZXJlKHRtcFJheSwgcmFkaXVzLCBjdXJyRGlzdGFuY2UxLCBub3JtYWwpIHx8XG4gICAgICAgIChvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID4gMC4wICYmIGN1cnJEaXN0YW5jZTEgPiBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgY29sbGlkZSB3aXRoIHRoZSBpbnNpZGUgb2YgdGhlIHNwaGVyZVxuXG4gICAgICB2ZWMzIG5ld09yaWdpbiA9IHJheS5vcmlnaW4gKyAoY3VyckRpc3RhbmNlMSAqIDEuMDEpICogcmF5LmRpcmVjdGlvbjtcblxuICAgICAgdG1wUmF5Lm9yaWdpbiA9IChuZXdPcmlnaW4gLSBjZW50ZXIpO1xuICAgICAgdG1wUmF5LmRpcmVjdGlvbiA9IHJheS5kaXJlY3Rpb247XG5cbiAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSByZWZyYWN0KHRtcFJheS5kaXJlY3Rpb24sIC1ub3JtYWwsIEV0YSk7XG5cbiAgICAgIGZsb2F0IGN1cnJEaXN0YW5jZTIgPSAwLjA7XG4gICAgICBpZiAoXG4gICAgICAgICFpbnRlcnNlY3RTcGhlcmUodG1wUmF5LCByYWRpdXMsIGN1cnJEaXN0YW5jZTIsIG5vcm1hbCkgfHxcbiAgICAgICAgKG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPiAwLjAgJiYgY3VyckRpc3RhbmNlMiA+IG91dEJlc3RSZXN1bHQuZGlzdGFuY2UpXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGZsb2F0IHJlZmxlY3Rpb25GYWN0b3IgPSBnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgMTEpO1xuXG4gICAgICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID0gY3VyckRpc3RhbmNlMSArIGN1cnJEaXN0YW5jZTI7XG4gICAgICBvdXRCZXN0UmVzdWx0LnBvc2l0aW9uID0gbmV3T3JpZ2luICsgKGN1cnJEaXN0YW5jZTIgKiAxLjAxKSAqIHJheS5kaXJlY3Rpb247XG4gICAgICBvdXRCZXN0UmVzdWx0Lm5vcm1hbCA9IG5vcm1hbDtcbiAgICAgIG91dEJlc3RSZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IHJlZmxlY3Rpb25GYWN0b3I7XG4gICAgICBvdXRCZXN0UmVzdWx0LnJlZnJhY3Rpb25GYWN0b3IgPSByZWZyYWN0aW9uRmFjdG9yO1xuXG4gICAgICBib29sIGxpZ2h0RW5hYmxlZCA9IChnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgMTQpICE9IDAuMCk7XG4gICAgICBvdXRCZXN0UmVzdWx0LmxpZ2h0RW5hYmxlZCA9IGxpZ2h0RW5hYmxlZDtcblxuICAgICAgdmVjMyBjb2xvciA9IGdldFNjZW5lVmVjM0J5SW5kZXgoaW5kZXggKyA4KTtcblxuICAgICAgb3V0QmVzdFJlc3VsdC5jb2xvciA9IHZlYzQoY29sb3IsIDAuNSk7XG5cbiAgICAgIGNvbnRpbnVlOyAvLyBieXBhc3Mgbm9uIHJlZnJhY3RpdmUgbG9naWNcbiAgICB9XG5cblxuICAgIHZlYzMgY2VudGVyID0gZ2V0U2NlbmVWZWMzQnlJbmRleChpbmRleCArIDApO1xuICAgIHZlYzQgb3JpZW50YXRpb24gPSB2ZWM0KFxuICAgICAgZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDMpLFxuICAgICAgZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDQpLFxuICAgICAgZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDUpLFxuICAgICAgZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDYpXG4gICAgKTtcbiAgICBtYXQzIG5vcm1hbE1hdHJpeCA9IHF1YXRfdG9fbWF0MyhvcmllbnRhdGlvbik7XG4gICAgbWF0MyBpbnZlcnNlTm9ybWFsTWF0cml4ID0gaW52ZXJzZShub3JtYWxNYXRyaXgpO1xuXG4gICAgZmxvYXQgcmFkaXVzID0gZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDcpO1xuXG4gICAgLy8gY29udmVydCByYXkgZnJvbSB3b3JsZCBzcGFjZSB0byBib3ggc3BhY2VcbiAgICB0bXBSYXkub3JpZ2luID0gKGludmVyc2VOb3JtYWxNYXRyaXggKiAocmF5Lm9yaWdpbiAtIGNlbnRlcikpO1xuICAgIHRtcFJheS5kaXJlY3Rpb24gPSAoaW52ZXJzZU5vcm1hbE1hdHJpeCAqIHJheS5kaXJlY3Rpb24pO1xuXG4gICAgZmxvYXQgY3VyckRpc3RhbmNlID0gMC4wO1xuICAgIGlmIChcbiAgICAgICFpbnRlcnNlY3RTcGhlcmUodG1wUmF5LCByYWRpdXMsIGN1cnJEaXN0YW5jZSwgbm9ybWFsKSB8fFxuICAgICAgKG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPiAwLjAgJiYgY3VyckRpc3RhbmNlID4gb3V0QmVzdFJlc3VsdC5kaXN0YW5jZSlcbiAgICApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGNvbnZlcnQgbm9ybWFsIGZyb20gYm94IHNwYWNlIHRvIHdvcmxkIHNwYWNlXG4gICAgbm9ybWFsID0gbm9ybWFsTWF0cml4ICogbm9ybWFsO1xuXG4gICAgb3V0QmVzdFJlc3VsdC5oYXNIaXQgPSB0cnVlO1xuICAgIG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPSBjdXJyRGlzdGFuY2U7XG4gICAgb3V0QmVzdFJlc3VsdC5wb3NpdGlvbiA9IHJheS5vcmlnaW4gKyBjdXJyRGlzdGFuY2UgKiByYXkuZGlyZWN0aW9uO1xuICAgIG91dEJlc3RSZXN1bHQubm9ybWFsID0gbm9ybWFsO1xuICAgIG91dEJlc3RSZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IDAuMDtcblxuICAgIGJvb2wgY2hlc3Nib2FyZE1hdGVyaWFsRW5hYmxlZCA9IChnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgMTUpICE9IDAuMCk7XG5cbiAgICBpZiAoY2hlc3Nib2FyZE1hdGVyaWFsRW5hYmxlZClcbiAgICB7XG4gICAgICB2ZWMzIGxvY2FsUG9zID0gcmF5Lm9yaWdpbiArIGN1cnJEaXN0YW5jZSAqIHJheS5kaXJlY3Rpb247XG4gICAgICB2ZWMzIHR4UG9zID0gaW52ZXJzZU5vcm1hbE1hdHJpeCAqIChsb2NhbFBvcyAtIGNlbnRlcik7XG5cbiAgICAgIC8vIGNoZXNzYm9hcmQgY29sb3IgZWZmZWN0XG4gICAgICBpZiAoZnJhY3QodHhQb3MueCAqIDAuOSkgPiAwLjUgPT0gZnJhY3QodHhQb3MueSAqIDAuOSkgPiAwLjUgPT0gZnJhY3QodHhQb3MueiAqIDAuOSkgPiAwLjUpXG4gICAgICB7XG5cbiAgICAgICAgaWYgKHNoYWRvd01vZGUpXG4gICAgICAgIHtcbiAgICAgICAgICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IGZhbHNlOyAvLyBubyBzaGFkb3cgLT4gYWxsb3cgbGlnaHQgdG8gZ28gdGhyb3VnaFxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgIG91dEJlc3RSZXN1bHQuY29sb3IgPSB2ZWM0KDEuMCk7XG4gICAgICAgICAgb3V0QmVzdFJlc3VsdC5yZWZsZWN0aW9uRmFjdG9yID0gMC4wOyAvLyBvdmVycmlkZSByZWZsZWN0aW9uIC0+IHBsYWluIGNvbG9yXG4gICAgICAgICAgb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBlbHNlXG4gICAgICB7XG4gICAgICAgIG91dEJlc3RSZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgb3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA9IGN1cnJEaXN0YW5jZTtcbiAgICAgICAgb3V0QmVzdFJlc3VsdC5wb3NpdGlvbiA9IHJheS5vcmlnaW4gKyBjdXJyRGlzdGFuY2UgKiByYXkuZGlyZWN0aW9uO1xuICAgICAgICBvdXRCZXN0UmVzdWx0Lm5vcm1hbCA9IG5vcm1hbDtcbiAgICAgICAgLy8gb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wO1xuXG5cbiAgICAgICAgLy8gYmx1ZS9ncmVlbiwgbWF0XG4gICAgICAgIG91dEJlc3RSZXN1bHQuY29sb3IgPSB2ZWM0KDAuMCwgMC40LCAwLjQ1LCAxLjApO1xuICAgICAgICBvdXRCZXN0UmVzdWx0LnJlZmxlY3Rpb25GYWN0b3IgPSAwLjA7XG4gICAgICAgIG91dEJlc3RSZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IDAuMDtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZVxuICAgIHtcblxuICAgICAgb3V0QmVzdFJlc3VsdC5oYXNIaXQgPSB0cnVlO1xuICAgICAgb3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA9IGN1cnJEaXN0YW5jZTtcbiAgICAgIG91dEJlc3RSZXN1bHQucG9zaXRpb24gPSByYXkub3JpZ2luICsgY3VyckRpc3RhbmNlICogcmF5LmRpcmVjdGlvbjtcbiAgICAgIG91dEJlc3RSZXN1bHQubm9ybWFsID0gbm9ybWFsO1xuICAgICAgLy8gb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wO1xuXG4gICAgICB2ZWMzIGNvbG9yID0gZ2V0U2NlbmVWZWMzQnlJbmRleChpbmRleCArIDgpO1xuXG4gICAgICBmbG9hdCByZWZsZWN0aW9uRmFjdG9yID0gZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDExKTtcblxuICAgICAgb3V0QmVzdFJlc3VsdC5jb2xvciA9IHZlYzQoY29sb3IsIDAuNSk7XG4gICAgICBvdXRCZXN0UmVzdWx0LnJlZmxlY3Rpb25GYWN0b3IgPSByZWZsZWN0aW9uRmFjdG9yO1xuICAgICAgb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gcmVmcmFjdGlvbkZhY3RvcjtcbiAgICB9XG5cbiAgICBib29sIGxpZ2h0RW5hYmxlZCA9IChnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgMTQpICE9IDAuMCk7XG4gICAgb3V0QmVzdFJlc3VsdC5saWdodEVuYWJsZWQgPSBsaWdodEVuYWJsZWQ7XG4gIH1cblxuICBmb3IgKGludCBpbmRleCA9IHVfYm94ZXNTdGFydDsgaW5kZXggPCB1X2JveGVzU3RvcDsgaW5kZXggKz0gMTgpXG4gIHtcbiAgICBib29sIGNhc3RTaGFkb3cgPSAoZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDE1KSAhPSAwLjApO1xuXG4gICAgaWYgKHNoYWRvd01vZGUgJiYgIWNhc3RTaGFkb3cpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHRtcFJheS5vcmlnaW4gPSByYXkub3JpZ2luO1xuICAgIHRtcFJheS5kaXJlY3Rpb24gPSByYXkuZGlyZWN0aW9uO1xuXG4gICAgdmVjMyBjZW50ZXIgPSBnZXRTY2VuZVZlYzNCeUluZGV4KGluZGV4ICsgMCk7XG4gICAgdmVjNCBvcmllbnRhdGlvbiA9IHZlYzQoXG4gICAgICBnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgMyksXG4gICAgICBnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgNCksXG4gICAgICBnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgNSksXG4gICAgICBnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgNilcbiAgICApO1xuXG4gICAgdmVjMyBib3hTaXplID0gZ2V0U2NlbmVWZWMzQnlJbmRleChpbmRleCArIDcpO1xuXG4gICAgZmxvYXQgcmVmcmFjdGlvbkZhY3RvciA9IGdldFNjZW5lRGF0YUJ5SW5kZXgoaW5kZXggKyAxNCk7XG4gICAgaWYgKHJlZnJhY3Rpb25GYWN0b3IgPiAwLjApXG4gICAge1xuXG4gICAgICAvLyByZWZyYWN0aW9uIGxvZ2ljXG5cbiAgICAgIC8vIGNvbnZlcnQgcmF5IGZyb20gd29ybGQgc3BhY2UgdG8gc3BoZXJlIHNwYWNlXG4gICAgICBtYXQzIG5vcm1hbE1hdHJpeCA9IHF1YXRfdG9fbWF0MyhvcmllbnRhdGlvbik7XG4gICAgICBtYXQzIGludmVyc2VOb3JtYWxNYXRyaXggPSBpbnZlcnNlKG5vcm1hbE1hdHJpeCk7XG5cbiAgICAgIHRtcFJheS5vcmlnaW4gPSAoaW52ZXJzZU5vcm1hbE1hdHJpeCAqIChyYXkub3JpZ2luIC0gY2VudGVyKSk7XG4gICAgICB0bXBSYXkuZGlyZWN0aW9uID0gKGludmVyc2VOb3JtYWxNYXRyaXggKiByYXkuZGlyZWN0aW9uKTtcblxuICAgICAgZmxvYXQgY3VyckRpc3RhbmNlMSA9IDAuMDtcbiAgICAgIGlmIChcbiAgICAgICAgIWludGVyc2VjdEJveCh0bXBSYXksIGJveFNpemUsIGN1cnJEaXN0YW5jZTEsIG5vcm1hbCkgfHxcbiAgICAgICAgKG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPiAwLjAgJiYgY3VyckRpc3RhbmNlMSA+IG91dEJlc3RSZXN1bHQuZGlzdGFuY2UpXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG5vdyBjb2xsaWRlIHdpdGggdGhlIGluc2lkZSBvZiB0aGUgYm94XG5cbiAgICAgIHZlYzMgbmV3T3JpZ2luID0gcmF5Lm9yaWdpbiArIChjdXJyRGlzdGFuY2UxICogMS4wMDApICogcmF5LmRpcmVjdGlvbjtcblxuICAgICAgdG1wUmF5Lm9yaWdpbiA9IGludmVyc2VOb3JtYWxNYXRyaXggKiAobmV3T3JpZ2luIC0gY2VudGVyKTtcbiAgICAgIHRtcFJheS5kaXJlY3Rpb24gPSByZWZyYWN0KHRtcFJheS5kaXJlY3Rpb24sIG5vcm1hbCwgRXRhKTtcblxuICAgICAgZmxvYXQgY3VyckRpc3RhbmNlMiA9IDAuMDtcbiAgICAgIGlmIChcbiAgICAgICAgIWludGVyc2VjdEJveCh0bXBSYXksIGJveFNpemUsIGN1cnJEaXN0YW5jZTIsIG5vcm1hbCkgfHxcbiAgICAgICAgKG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPiAwLjAgJiYgY3VyckRpc3RhbmNlMiA+IG91dEJlc3RSZXN1bHQuZGlzdGFuY2UpXG4gICAgICApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnZlcnQgbm9ybWFsIGZyb20gYm94IHNwYWNlIHRvIHdvcmxkIHNwYWNlXG4gICAgICBub3JtYWwgPSBub3JtYWxNYXRyaXggKiBub3JtYWw7XG5cbiAgICAgIGZsb2F0IHJlZmxlY3Rpb25GYWN0b3IgPSBnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgMTMpO1xuXG4gICAgICBvdXRCZXN0UmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID0gY3VyckRpc3RhbmNlMSArIGN1cnJEaXN0YW5jZTI7XG4gICAgICBvdXRCZXN0UmVzdWx0LnBvc2l0aW9uID0gbmV3T3JpZ2luICsgKGN1cnJEaXN0YW5jZTIgKiAxLjAwMCkgKiByYXkuZGlyZWN0aW9uO1xuICAgICAgb3V0QmVzdFJlc3VsdC5ub3JtYWwgPSBub3JtYWw7XG4gICAgICBvdXRCZXN0UmVzdWx0LnJlZmxlY3Rpb25GYWN0b3IgPSByZWZsZWN0aW9uRmFjdG9yO1xuICAgICAgb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gcmVmcmFjdGlvbkZhY3RvcjtcblxuICAgICAgYm9vbCBsaWdodEVuYWJsZWQgPSAoZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDE2KSAhPSAwLjApO1xuICAgICAgb3V0QmVzdFJlc3VsdC5saWdodEVuYWJsZWQgPSBsaWdodEVuYWJsZWQ7XG5cbiAgICAgIHZlYzMgY29sb3IgPSBnZXRTY2VuZVZlYzNCeUluZGV4KGluZGV4ICsgMTApO1xuXG4gICAgICBvdXRCZXN0UmVzdWx0LmNvbG9yID0gdmVjNChjb2xvciwgMC41KTtcblxuICAgICAgY29udGludWU7IC8vIGJ5cGFzcyBub24gcmVmcmFjdGl2ZSBsb2dpY1xuICAgIH1cblxuICAgIC8vIGNvbnZlcnQgcmF5IGZyb20gd29ybGQgc3BhY2UgdG8gc3BoZXJlIHNwYWNlXG4gICAgbWF0MyBub3JtYWxNYXRyaXggPSBxdWF0X3RvX21hdDMob3JpZW50YXRpb24pO1xuICAgIG1hdDMgaW52ZXJzZU5vcm1hbE1hdHJpeCA9IGludmVyc2Uobm9ybWFsTWF0cml4KTtcbiAgICB0bXBSYXkub3JpZ2luID0gKGludmVyc2VOb3JtYWxNYXRyaXggKiAocmF5Lm9yaWdpbiAtIGNlbnRlcikpO1xuICAgIHRtcFJheS5kaXJlY3Rpb24gPSAoaW52ZXJzZU5vcm1hbE1hdHJpeCAqIHRtcFJheS5kaXJlY3Rpb24pO1xuXG4gICAgZmxvYXQgY3VyckRpc3RhbmNlID0gMC4wO1xuICAgIGlmIChcbiAgICAgICFpbnRlcnNlY3RCb3godG1wUmF5LCBib3hTaXplLCBjdXJyRGlzdGFuY2UsIG5vcm1hbCkgfHxcbiAgICAgIChvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID4gMC4wICYmIGN1cnJEaXN0YW5jZSA+IG91dEJlc3RSZXN1bHQuZGlzdGFuY2UpXG4gICAgKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBjb252ZXJ0IG5vcm1hbCBmcm9tIGJveCBzcGFjZSB0byB3b3JsZCBzcGFjZVxuICAgIG5vcm1hbCA9IG5vcm1hbE1hdHJpeCAqIG5vcm1hbDtcblxuICAgIG91dEJlc3RSZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID0gY3VyckRpc3RhbmNlO1xuICAgIG91dEJlc3RSZXN1bHQucG9zaXRpb24gPSByYXkub3JpZ2luICsgY3VyckRpc3RhbmNlICogcmF5LmRpcmVjdGlvbjtcbiAgICBvdXRCZXN0UmVzdWx0Lm5vcm1hbCA9IG5vcm1hbDtcblxuICAgIGJvb2wgY2hlc3Nib2FyZE1hdGVyaWFsRW5hYmxlZCA9IChnZXRTY2VuZURhdGFCeUluZGV4KGluZGV4ICsgMTcpICE9IDAuMCk7XG5cbiAgICBpZiAoY2hlc3Nib2FyZE1hdGVyaWFsRW5hYmxlZClcbiAgICB7XG4gICAgICBvdXRCZXN0UmVzdWx0LnJlZmxlY3Rpb25GYWN0b3IgPSAwLjU7XG4gICAgICBvdXRCZXN0UmVzdWx0LnJlZnJhY3Rpb25GYWN0b3IgPSAwLjA7IC8vIFRPRE9cblxuICAgICAgLy8gdGhlIG11bHRpcGxpY2F0aW9uIGJ5IDAuOTk5IHdpbGwgcmVtb3ZlIGdyYXBoaWMgYXJ0aWZhY3RcbiAgICAgIHZlYzMgdHhQb3MgPSAoaW52ZXJzZU5vcm1hbE1hdHJpeCAqIDAuOTk5KSAqIChjZW50ZXIgLSBvdXRCZXN0UmVzdWx0LnBvc2l0aW9uKTtcblxuICAgICAgLy8gY2hlc3Nib2FyZCBjb2xvciBlZmZlY3RcbiAgICAgIC8vIGlmIChmcmFjdCh0eFBvcy54ICogMC4yKSA+IDAuNSA9PSBmcmFjdCh0eFBvcy56ICogMC4yKSA+IDAuNSA9PSBmcmFjdCh0eFBvcy55ICogMC4yKSA+IDAuNSlcbiAgICAgIGlmIChmcmFjdCh0eFBvcy54ICogMC45KSA+IDAuNSA9PSBmcmFjdCh0eFBvcy55ICogMC45KSA+IDAuNSA9PSBmcmFjdCh0eFBvcy56ICogMC45KSA+IDAuNSlcbiAgICAgIHtcbiAgICAgICAgb3V0QmVzdFJlc3VsdC5jb2xvciA9IHZlYzQoMS4wKTtcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgIHtcbiAgICAgICAgb3V0QmVzdFJlc3VsdC5jb2xvciA9IHZlYzQoMC4wLCAwLjQsIDAuNDUsIDEuMCk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICB2ZWMzIGNvbG9yID0gZ2V0U2NlbmVWZWMzQnlJbmRleChpbmRleCArIDEwKTtcblxuICAgICAgZmxvYXQgcmVmbGVjdGlvbkZhY3RvciA9IGdldFNjZW5lRGF0YUJ5SW5kZXgoaW5kZXggKyAxMyk7XG5cbiAgICAgIG91dEJlc3RSZXN1bHQuY29sb3IgPSB2ZWM0KGNvbG9yLCAxLjApO1xuICAgICAgb3V0QmVzdFJlc3VsdC5yZWZsZWN0aW9uRmFjdG9yID0gcmVmbGVjdGlvbkZhY3RvcjtcbiAgICAgIG91dEJlc3RSZXN1bHQucmVmcmFjdGlvbkZhY3RvciA9IHJlZnJhY3Rpb25GYWN0b3I7XG4gICAgfVxuXG4gICAgYm9vbCBsaWdodEVuYWJsZWQgPSAoZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDE2KSAhPSAwLjApO1xuICAgIG91dEJlc3RSZXN1bHQubGlnaHRFbmFibGVkID0gbGlnaHRFbmFibGVkO1xuICB9XG5cbiAgZm9yIChpbnQgaW5kZXggPSB1X3RyaWFuZ2xlc1N0YXJ0OyBpbmRleCA8IHVfdHJpYW5nbGVzU3RvcDsgaW5kZXggKz0gMTUpXG4gIHtcbiAgICBib29sIGNhc3RTaGFkb3cgPSAoZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDEzKSAhPSAwLjApO1xuXG4gICAgaWYgKHNoYWRvd01vZGUgJiYgIWNhc3RTaGFkb3cpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHRtcFJheS5vcmlnaW4gPSByYXkub3JpZ2luO1xuICAgIHRtcFJheS5kaXJlY3Rpb24gPSByYXkuZGlyZWN0aW9uO1xuXG4gICAgdmVjMyB2MCA9IGdldFNjZW5lVmVjM0J5SW5kZXgoaW5kZXggKyAwKTtcbiAgICB2ZWMzIHYxID0gZ2V0U2NlbmVWZWMzQnlJbmRleChpbmRleCArIDMpO1xuICAgIHZlYzMgdjIgPSBnZXRTY2VuZVZlYzNCeUluZGV4KGluZGV4ICsgNik7XG5cbiAgICBmbG9hdCBjdXJyRGlzdGFuY2UgPSAwLjA7XG4gICAgaWYgKFxuICAgICAgIWludGVyc2VjdFRyaWFuZ2xlKHRtcFJheSwgdjAsIHYxLCB2MiwgY3VyckRpc3RhbmNlLCBub3JtYWwpIHx8XG4gICAgICAob3V0QmVzdFJlc3VsdC5kaXN0YW5jZSA+IDAuMCAmJiBjdXJyRGlzdGFuY2UgPiBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlKVxuICAgICkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgb3V0QmVzdFJlc3VsdC5oYXNIaXQgPSB0cnVlO1xuICAgIG91dEJlc3RSZXN1bHQuZGlzdGFuY2UgPSBjdXJyRGlzdGFuY2U7XG4gICAgb3V0QmVzdFJlc3VsdC5wb3NpdGlvbiA9IHJheS5vcmlnaW4gKyBjdXJyRGlzdGFuY2UgKiByYXkuZGlyZWN0aW9uO1xuICAgIG91dEJlc3RSZXN1bHQubm9ybWFsID0gbm9ybWFsO1xuXG4gICAgb3V0QmVzdFJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wOyAvLyBUT0RPXG5cbiAgICB2ZWMzIGNvbG9yID0gZ2V0U2NlbmVWZWMzQnlJbmRleChpbmRleCArIDkpO1xuXG4gICAgZmxvYXQgcmVmbGVjdGlvbkZhY3RvciA9IGdldFNjZW5lRGF0YUJ5SW5kZXgoaW5kZXggKyAxMik7XG5cbiAgICBvdXRCZXN0UmVzdWx0LmNvbG9yID0gdmVjNChjb2xvciwgMS4wKTtcbiAgICBvdXRCZXN0UmVzdWx0LnJlZmxlY3Rpb25GYWN0b3IgPSByZWZsZWN0aW9uRmFjdG9yO1xuXG4gICAgYm9vbCBsaWdodEVuYWJsZWQgPSAoZ2V0U2NlbmVEYXRhQnlJbmRleChpbmRleCArIDE0KSAhPSAwLjApO1xuICAgIG91dEJlc3RSZXN1bHQubGlnaHRFbmFibGVkID0gbGlnaHRFbmFibGVkO1xuXG4gICAgLy8gaWYgKHNoYWRvd01vZGUpXG4gICAgLy8gICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgeyAvLyBwbGFuZSB0ZXN0XG5cbiAgICAvLyB2ZWMzIHBsYW5lTm9ybWFsID0gbm9ybWFsaXplKHZlYzMoMC4wLCAwLjAsIDEuMCkpO1xuICAgIC8vIGZsb2F0IHZhbCA9IGludGVyc2VjdFBsYW5lKHRtcFJheSwgcGxhbmVOb3JtYWwsIDM1LjAvNC4wKjMuMCk7XG5cbiAgICAvLyB2ZWMzIHBsYW5lTm9ybWFsID0gbm9ybWFsaXplKHZlYzMoMC4wLCAwLjAsIDEuMCkpO1xuICAgIC8vIGZsb2F0IHZhbCA9IGludGVyc2VjdFBsYW5lKHRtcFJheSwgcGxhbmVOb3JtYWwsIDAuMCk7XG5cbiAgICAvLyB2ZWMzIHBsYW5lTm9ybWFsID0gbm9ybWFsaXplKHZlYzMoMC4wLCAwLjAsIDEuMCkpO1xuICAgIC8vIGZsb2F0IHZhbCA9IGludGVyc2VjdFBsYW5lKHRtcFJheSwgcGxhbmVOb3JtYWwsIDEwLjApO1xuXG4gICAgLy8gaWYgKHZhbCA+IDAuMCAmJiAoYmVzdERpc3RhbmNlIDw9IDAuMCB8fCB2YWwgPCBiZXN0RGlzdGFuY2UpKVxuICAgIC8vIHtcbiAgICAvLyAgICAgb3V0QmVzdFJlc3VsdC5oYXNIaXQgPSB0cnVlO1xuICAgIC8vICAgICBvdXRCZXN0UmVzdWx0LmRpc3RhbmNlID0gdmFsO1xuICAgIC8vICAgICBvdXRCZXN0UmVzdWx0LnBvc2l0aW9uID0gcmF5Lm9yaWdpbiArIHZhbCAqIHJheS5kaXJlY3Rpb247XG4gICAgLy8gICAgIG91dEJlc3RSZXN1bHQubm9ybWFsID0gdmVjMyhwbGFuZU5vcm1hbCk7XG4gICAgLy8gICAgIG91dEJlc3RSZXN1bHQuY29sb3IgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIDEuMCk7XG4gICAgLy8gICAgIG91dEJlc3RSZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IDAuMDtcbiAgICAvLyAgICAgb3V0QmVzdFJlc3VsdC5saWdodEVuYWJsZWQgPSB0cnVlO1xuICAgIC8vIH1cblxuICB9IC8vIHBsYW5lIHRlc3RcblxuICByZXR1cm4gb3V0QmVzdFJlc3VsdC5oYXNIaXQ7XG59XG5cbmZsb2F0IGxpZ2h0QXQodmVjMyBpbXBhY3RQb3NpdGlvbiwgdmVjMyBpbXBhY3ROb3JtYWwsIHZlYzMgdmlld2VyKVxue1xuICBmbG9hdCBiZXN0SW50ZW5zaXR5ID0gMC4wO1xuXG4gIGZvciAoaW50IGluZGV4ID0gdV9zdW5MaWdodHNTdGFydDsgaW5kZXggPCB1X3N1bkxpZ2h0c1N0b3A7IGluZGV4ICs9IDQpXG4gIHtcbiAgICB2ZWMzIGxpZ2h0RGlyID0gZ2V0TGlnaHRzVmVjM0J5SW5kZXgoaW5kZXggKyAwKTtcbiAgICBmbG9hdCBsb2NhbEludGVuc2l0eSA9IGdldExpZ2h0c0RhdGFCeUluZGV4KGluZGV4ICsgMyk7XG5cbiAgICBmbG9hdCBjb2VmID0gbG9jYWxJbnRlbnNpdHk7XG4gICAgbGlnaHREaXIgPSBub3JtYWxpemUobGlnaHREaXIpO1xuXG4gICAgLy8gaXMgdGhlIHN1biBsaWdodCBibG9ja2VkIGJ5IGFuIG9iamVjdD9cbiAgICBSYXlSZXN1bHQgcmVzdWx0O1xuICAgIGlmIChpbnRlcnNlY3RTY2VuZShSYXlWYWx1ZXMoaW1wYWN0UG9zaXRpb24sIGxpZ2h0RGlyKSwgcmVzdWx0LCB0cnVlKSkge1xuICAgICAgLy8gbGlnaHQgcmF5IGlzIGJsb2NrZWQsIHNraXAgdGhpcyBsaWdodFxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG5cbiAgICBmbG9hdCBpbnRlbnNpdHkgPSAwLjA7XG4gICAgdmVjMyByZWZsZWN0aW9uRmFjdG9yID0gcmVmbGVjdCgtbGlnaHREaXIsIGltcGFjdE5vcm1hbCk7XG4gICAgaW50ZW5zaXR5ICs9IDAuNiAqIHBvdyhtYXgoZG90KHJlZmxlY3Rpb25GYWN0b3IsIHZpZXdlciksIDAuMCksIDMwLjApO1xuICAgIGludGVuc2l0eSArPSAxLjAgKiBkb3QobGlnaHREaXIsIGltcGFjdE5vcm1hbCk7XG5cbiAgICBpbnRlbnNpdHkgKj0gY29lZjtcblxuICAgIGlmIChiZXN0SW50ZW5zaXR5IDwgaW50ZW5zaXR5KSB7XG4gICAgICBiZXN0SW50ZW5zaXR5ID0gaW50ZW5zaXR5O1xuICAgIH1cbiAgfVxuXG4gIGZvciAoaW50IGluZGV4ID0gdV9zcG90TGlnaHRzU3RhcnQ7IGluZGV4IDwgdV9zcG90TGlnaHRzU3RvcDsgaW5kZXggKz0gNSlcbiAge1xuICAgIHZlYzMgbGlnaHREaXIgPSB2ZWMzKDEuMCk7XG4gICAgZmxvYXQgY29lZiA9IDEuMDtcblxuICAgIC8vIHNwb3QgbGlnaHRcblxuICAgIHZlYzMgbGlnaHRQb3MgPSBnZXRMaWdodHNWZWMzQnlJbmRleChpbmRleCArIDApO1xuICAgIGZsb2F0IGxpZ2h0UmFkaXVzID0gZ2V0TGlnaHRzRGF0YUJ5SW5kZXgoaW5kZXggKyAzKTtcblxuICAgIHZlYzMgbGlnaHRUb0ltcGFjdFZlYzMgPSBsaWdodFBvcyAtIGltcGFjdFBvc2l0aW9uO1xuXG4gICAgLy8gaXMgaXQgb3V0IG9mIHRoZSBzcG90IGxpZ2h0IGVmZmVjdCByYWRpdXM/XG4gICAgZmxvYXQgbGlnaHRUb0ltcGFjdERpc3RhbmNlID0gbGVuZ3RoKGxpZ2h0VG9JbXBhY3RWZWMzKTtcbiAgICBpZiAobGlnaHRUb0ltcGFjdERpc3RhbmNlID4gbGlnaHRSYWRpdXMpIHtcbiAgICAgIC8vIG91dCBvZiByYW5nZSwgZG8gbm90IGFwcGx5IHRoaXMgbGlnaHRcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGxpZ2h0RGlyLnggPSBsaWdodFRvSW1wYWN0VmVjMy54IC8gbGlnaHRUb0ltcGFjdERpc3RhbmNlOyAvLyBub3JtYWxpemVcbiAgICBsaWdodERpci55ID0gbGlnaHRUb0ltcGFjdFZlYzMueSAvIGxpZ2h0VG9JbXBhY3REaXN0YW5jZTsgLy8gbm9ybWFsaXplXG4gICAgbGlnaHREaXIueiA9IGxpZ2h0VG9JbXBhY3RWZWMzLnogLyBsaWdodFRvSW1wYWN0RGlzdGFuY2U7IC8vIG5vcm1hbGl6ZVxuXG4gICAgZmxvYXQgbG9jYWxJbnRlbnNpdHkgPSBnZXRMaWdodHNEYXRhQnlJbmRleChpbmRleCArIDQpO1xuXG4gICAgY29lZiA9IGxvY2FsSW50ZW5zaXR5ICogKDEuMCAtIGxpZ2h0VG9JbXBhY3REaXN0YW5jZSAvIGxpZ2h0UmFkaXVzKTtcblxuICAgIFJheVJlc3VsdCByZXN1bHQ7XG4gICAgaWYgKFxuICAgICAgLy8gaXMgdGhlIHNwb3QgbGlnaHQgYmxvY2tlZCBieSBhbiBvYmplY3Q/XG4gICAgICBpbnRlcnNlY3RTY2VuZShSYXlWYWx1ZXMoaW1wYWN0UG9zaXRpb24sIGxpZ2h0RGlyKSwgcmVzdWx0LCB0cnVlKSAmJlxuICAgICAgLy8gaXMgdGhlIGJsb2NraW5nIG9iamVjdCBpbiByYW5nZSBvZiB0aGUgc3BvdCBsaWdodCBlZmZlY3QgcmFkaXVzP1xuICAgICAgcmVzdWx0LmRpc3RhbmNlIDwgbGlnaHRUb0ltcGFjdERpc3RhbmNlXG4gICAgKSB7XG4gICAgICAvLyBsaWdodCByYXkgaXMgYmxvY2tlZCwgc2tpcCB0aGlzIGxpZ2h0XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cblxuICAgIGZsb2F0IGludGVuc2l0eSA9IDAuMDtcbiAgICB2ZWMzIHJlZmxlY3Rpb25GYWN0b3IgPSByZWZsZWN0KC1saWdodERpciwgaW1wYWN0Tm9ybWFsKTtcbiAgICBpbnRlbnNpdHkgKz0gMC42ICogcG93KG1heChkb3QocmVmbGVjdGlvbkZhY3Rvciwgdmlld2VyKSwgMC4wKSwgMzAuMCk7XG4gICAgaW50ZW5zaXR5ICs9IDEuMCAqIGRvdChsaWdodERpciwgaW1wYWN0Tm9ybWFsKTtcblxuICAgIGludGVuc2l0eSAqPSBjb2VmO1xuXG4gICAgaWYgKGJlc3RJbnRlbnNpdHkgPCBpbnRlbnNpdHkpIHtcbiAgICAgIGJlc3RJbnRlbnNpdHkgPSBpbnRlbnNpdHk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1heChnX2FtYmlhbnRMaWdodCwgYmVzdEludGVuc2l0eSk7XG59XG5cbnZvaWQgbWFpbigpXG57XG4gIC8vXG4gIC8vXG4gIC8vIGluaXRpYWwgcmF5XG5cbiAgdmVjMyByYXlEaXIgPSBub3JtYWxpemUodl9wb3NpdGlvbiAtIHVfY2FtZXJhRXllKTsgLy8gY2FtZXJhIGRpcmVjdGlvblxuICB2ZWMzIGZpbmFsUGl4ZWxDb2xvciA9IGdfYmFja2dyb3VuZENvbG9yO1xuXG4gIGNvbnN0IGludCBtYXhTdGFjayA9IDQ7XG4gIFN0YWNrRGF0YSBfc3RhY2tbbWF4U3RhY2tdO1xuXG4gIC8vIGluaXRpYWxpemUgc3RhY2tcbiAgZm9yIChpbnQgaWkgPSAwOyBpaSA8IG1heFN0YWNrOyArK2lpKVxuICB7XG4gICAgX3N0YWNrW2lpXS51c2VkID0gZmFsc2U7XG4gICAgX3N0YWNrW2lpXS5yZXN1bHQucmVmbGVjdGlvbkZhY3RvciA9IDAuMDtcbiAgICBfc3RhY2tbaWldLnJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID0gMC4wO1xuICAgIF9zdGFja1tpaV0ucmVzdWx0LmxpZ2h0RW5hYmxlZCA9IGZhbHNlO1xuICAgIF9zdGFja1tpaV0ucmVmbGVjdGlvbkluZGV4ID0gLTE7XG4gICAgX3N0YWNrW2lpXS5yZWZyYWN0aW9uSW5kZXggPSAtMTtcbiAgfVxuXG4gIC8vIGluaXRpYWxpemUgZmlyc3Qgc3RhY2sgZWxlbWVudFxuICBfc3RhY2tbMF0udXNlZCA9IHRydWU7XG4gIF9zdGFja1swXS5yYXkgPSBSYXlWYWx1ZXModV9jYW1lcmFFeWUsIHJheURpcik7XG4gIF9zdGFja1swXS5yZXN1bHQucG9zaXRpb24gPSB1X2NhbWVyYUV5ZTtcbiAgX3N0YWNrWzBdLnJlc3VsdC5yZWZsZWN0aW9uRmFjdG9yID0gMS4wO1xuICBfc3RhY2tbMF0ucmVzdWx0LnJlZnJhY3Rpb25GYWN0b3IgPSAxLjA7XG4gIF9zdGFja1swXS5yZXN1bHQubGlnaHRFbmFibGVkID0gdHJ1ZTtcbiAgX3N0YWNrWzBdLnJlZmxlY3Rpb25JbmRleCA9IC0xO1xuICBfc3RhY2tbMF0ucmVmcmFjdGlvbkluZGV4ID0gLTE7XG5cbiAgaW50IHN0YWNrSW5kZXggPSAwO1xuXG4gIGZvciAoaW50IGlpID0gMDsgaWkgPCBtYXhTdGFjazsgKytpaSlcbiAge1xuICAgIC8vIGludGVyc2VjdCBvYmplY3RcbiAgICAvLyBpZiByZWZsZWN0aW9uL3JlZnJhY3Rpb24gcHVzaCB0byBzdGFjayAmIHNldCBpbmRleFxuICAgIC8vIHJlcGVhdFxuXG4gICAgaWYgKCFfc3RhY2tbaWldLnVzZWQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIF9zdGFja1tpaV0ucmVzdWx0Lmhhc0hpdCA9IGludGVyc2VjdFNjZW5lKFxuICAgICAgX3N0YWNrW2lpXS5yYXksXG4gICAgICBfc3RhY2tbaWldLnJlc3VsdCxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGlmICghX3N0YWNrW2lpXS5yZXN1bHQuaGFzSGl0KVxuICAgIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGZsb2F0IGxpZ2h0SW50ZW5zaXR5ID0gMS4wO1xuXG4gICAgaWYgKF9zdGFja1tpaV0ucmVzdWx0LmxpZ2h0RW5hYmxlZClcbiAgICB7XG4gICAgICBsaWdodEludGVuc2l0eSA9IGxpZ2h0QXQoXG4gICAgICAgIF9zdGFja1tpaV0ucmVzdWx0LnBvc2l0aW9uLFxuICAgICAgICBfc3RhY2tbaWldLnJlc3VsdC5ub3JtYWwsXG4gICAgICAgIC1fc3RhY2tbaWldLnJheS5kaXJlY3Rpb25cbiAgICAgICk7XG4gICAgfVxuXG4gICAgX3N0YWNrW2lpXS5yZXN1bHQuY29sb3IueHl6ICo9IGxpZ2h0SW50ZW5zaXR5O1xuXG4gICAgaWYgKF9zdGFja1tpaV0ucmVzdWx0LmxpZ2h0RW5hYmxlZCAmJiBsaWdodEludGVuc2l0eSA8PSAwLjApXG4gICAge1xuICAgICAgLy8gbm90IGxpdFxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gcmVmbGVjdGlvbi9yZWZyYWN0aW9uIGhlcmVcblxuICAgIGlmIChzdGFja0luZGV4ICsgMSA+PSBtYXhTdGFjaylcbiAgICB7XG4gICAgICAvLyBubyBtb3JlIHN0YWNrIHNwYWNlIGxlZnRcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChfc3RhY2tbaWldLnJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yID4gMC4wKVxuICAgIHtcbiAgICAgIC8vIHB1c2ggcmVmcmFjdGlvbiB0byB0aGUgc3RhY2tcbiAgICAgIHN0YWNrSW5kZXggKz0gMTtcblxuICAgICAgX3N0YWNrW3N0YWNrSW5kZXhdLnVzZWQgPSB0cnVlO1xuICAgICAgX3N0YWNrW3N0YWNrSW5kZXhdLnJheS5vcmlnaW4gPSBfc3RhY2tbaWldLnJlc3VsdC5wb3NpdGlvbjtcbiAgICAgIF9zdGFja1tzdGFja0luZGV4XS5yYXkuZGlyZWN0aW9uID0gcmVmcmFjdChfc3RhY2tbaWldLnJheS5kaXJlY3Rpb24sIF9zdGFja1tpaV0ucmVzdWx0Lm5vcm1hbCwgRXRhKTtcblxuICAgICAgX3N0YWNrW2lpXS5yZWZyYWN0aW9uSW5kZXggPSBzdGFja0luZGV4O1xuICAgIH1cblxuICAgIGlmIChfc3RhY2tbaWldLnJlc3VsdC5yZWZsZWN0aW9uRmFjdG9yID4gMC4wKVxuICAgIHtcbiAgICAgIC8vIHB1c2ggcmVmbGVjdGlvbiB0byB0aGUgc3RhY2tcbiAgICAgIHN0YWNrSW5kZXggKz0gMTtcblxuICAgICAgX3N0YWNrW3N0YWNrSW5kZXhdLnVzZWQgPSB0cnVlO1xuICAgICAgX3N0YWNrW3N0YWNrSW5kZXhdLnJheS5vcmlnaW4gPSBfc3RhY2tbaWldLnJlc3VsdC5wb3NpdGlvbjtcbiAgICAgIF9zdGFja1tzdGFja0luZGV4XS5yYXkuZGlyZWN0aW9uID0gcmVmbGVjdChfc3RhY2tbaWldLnJheS5kaXJlY3Rpb24sIF9zdGFja1tpaV0ucmVzdWx0Lm5vcm1hbCk7XG5cbiAgICAgIF9zdGFja1tpaV0ucmVmbGVjdGlvbkluZGV4ID0gc3RhY2tJbmRleDtcbiAgICB9XG5cbiAgfVxuXG4gIC8vIGNvbWJpbmUgYWxsIGNvbG9ycywgZnJvbSBsYXN0IHRvIGZpcnN0XG4gIGZvciAoaW50IGlpID0gbWF4U3RhY2sgLSAxOyBpaSA+PSAwOyAtLWlpKVxuICB7XG5cblxuICAgIGlmICghX3N0YWNrW2lpXS51c2VkIHx8ICFfc3RhY2tbaWldLnJlc3VsdC5oYXNIaXQpIHtcbiAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiA9IGdfYmFja2dyb3VuZENvbG9yO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKF9zdGFja1tpaV0ucmVmbGVjdGlvbkluZGV4ICE9IC0xKVxuICAgIHtcbiAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiA9XG4gICAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiAqICgxLjAgLSBfc3RhY2tbaWldLnJlc3VsdC5yZWZsZWN0aW9uRmFjdG9yKSArXG4gICAgICAgIF9zdGFja1tfc3RhY2tbaWldLnJlZmxlY3Rpb25JbmRleF0ucmVzdWx0LmNvbG9yLnh5eiAqIF9zdGFja1tpaV0ucmVzdWx0LnJlZmxlY3Rpb25GYWN0b3I7XG4gICAgfVxuXG4gICAgaWYgKF9zdGFja1tpaV0ucmVmcmFjdGlvbkluZGV4ICE9IC0xKVxuICAgIHtcbiAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiA9XG4gICAgICAgIF9zdGFja1tpaV0ucmVzdWx0LmNvbG9yLnh5eiAqICgxLjAgLSBfc3RhY2tbaWldLnJlc3VsdC5yZWZyYWN0aW9uRmFjdG9yKSArXG4gICAgICAgIF9zdGFja1tfc3RhY2tbaWldLnJlZnJhY3Rpb25JbmRleF0ucmVzdWx0LmNvbG9yLnh5eiAqIF9zdGFja1tpaV0ucmVzdWx0LnJlZnJhY3Rpb25GYWN0b3I7XG4gICAgfVxuICB9XG5cbiAgaWYgKF9zdGFja1swXS5yZXN1bHQuaGFzSGl0KSB7XG4gICAgZmluYWxQaXhlbENvbG9yID0gX3N0YWNrWzBdLnJlc3VsdC5jb2xvci54eXo7XG4gIH1cblxuICBvX2NvbG9yID0gdmVjNChmaW5hbFBpeGVsQ29sb3IsIDEuMCk7XG5cbn1cbmAudHJpbSgpOyIsCiAgImV4cG9ydCBkZWZhdWx0IGBcbiN2ZXJzaW9uIDMwMCBlc1xuXG5wcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbmluIHZlYzIgYV92ZXJ0ZXhQb3NpdGlvbjtcbmluIHZlYzIgYV92ZXJ0ZXhUZXh0dXJlQ29vcmQ7XG5cbm91dCB2ZWMyIHZfdGV4dHVyZUNvb3JkO1xuXG52b2lkIG1haW4odm9pZClcbntcbiAgdl90ZXh0dXJlQ29vcmQgPSBhX3ZlcnRleFRleHR1cmVDb29yZDtcblxuICBnbF9Qb3NpdGlvbiA9IHZlYzQoYV92ZXJ0ZXhQb3NpdGlvbiwgMS4wLCAxLjApO1xufVxuYC50cmltKCk7IiwKICAiZXhwb3J0IGRlZmF1bHQgYFxuI3ZlcnNpb24gMzAwIGVzXG5cbnByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxudW5pZm9ybSBzYW1wbGVyMkQgdV90ZXh0dXJlO1xudW5pZm9ybSB2ZWMyIHVfc3RlcDtcblxuaW4gdmVjMiB2X3RleHR1cmVDb29yZDtcblxub3V0IHZlYzQgb19jb2xvcjtcblxudm9pZCBtYWluKHZvaWQpXG57XG4gIC8vIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUodV90ZXh0dXJlLCB2X3RleHR1cmVDb29yZCk7XG5cbiAgZmxvYXQgdG90YWwgPSAwLjA7XG4gIHZlYzQgYWNjdW11bGF0ZWQgPSB2ZWM0KDAuMCk7XG5cbiAgLy9cblxuICBpZiAodl90ZXh0dXJlQ29vcmQueCAtIHVfc3RlcC54ID4gMC4wKVxuICB7XG4gICAgYWNjdW11bGF0ZWQgKz0gdGV4dHVyZSh1X3RleHR1cmUsIHZlYzIodl90ZXh0dXJlQ29vcmQueCAtIHVfc3RlcC54LCB2X3RleHR1cmVDb29yZC55KSk7XG4gICAgdG90YWwgKz0gMS4wO1xuICB9XG5cbiAgaWYgKHZfdGV4dHVyZUNvb3JkLnggKyB1X3N0ZXAueCA+IDAuMClcbiAge1xuICAgIGFjY3VtdWxhdGVkICs9IHRleHR1cmUodV90ZXh0dXJlLCB2ZWMyKHZfdGV4dHVyZUNvb3JkLnggKyB1X3N0ZXAueCwgdl90ZXh0dXJlQ29vcmQueSkpO1xuICAgIHRvdGFsICs9IDEuMDtcbiAgfVxuXG4gIGlmICh2X3RleHR1cmVDb29yZC55IC0gdV9zdGVwLnkgPiAwLjApXG4gIHtcbiAgICBhY2N1bXVsYXRlZCArPSB0ZXh0dXJlKHVfdGV4dHVyZSwgdmVjMih2X3RleHR1cmVDb29yZC54LCB2X3RleHR1cmVDb29yZC55IC0gdV9zdGVwLnkpKTtcbiAgICB0b3RhbCArPSAxLjA7XG4gIH1cblxuICBpZiAodl90ZXh0dXJlQ29vcmQueSArIHVfc3RlcC55ID4gMC4wKVxuICB7XG4gICAgYWNjdW11bGF0ZWQgKz0gdGV4dHVyZSh1X3RleHR1cmUsIHZlYzIodl90ZXh0dXJlQ29vcmQueCwgdl90ZXh0dXJlQ29vcmQueSArIHVfc3RlcC55KSk7XG4gICAgdG90YWwgKz0gMS4wO1xuICB9XG5cbiAgLy9cblxuICBpZiAodl90ZXh0dXJlQ29vcmQueCAtIHVfc3RlcC54ID4gMC4wICYmIHZfdGV4dHVyZUNvb3JkLnkgLSB1X3N0ZXAueSA+IDAuMClcbiAge1xuICAgIGFjY3VtdWxhdGVkICs9IHRleHR1cmUodV90ZXh0dXJlLCB2ZWMyKHZfdGV4dHVyZUNvb3JkLnggLSB1X3N0ZXAueCwgdl90ZXh0dXJlQ29vcmQueSAtIHVfc3RlcC55KSk7XG4gICAgdG90YWwgKz0gMS4wO1xuICB9XG5cbiAgaWYgKHZfdGV4dHVyZUNvb3JkLnggKyB1X3N0ZXAueCA+IDAuMCAmJiB2X3RleHR1cmVDb29yZC55IC0gdV9zdGVwLnkgPiAwLjApXG4gIHtcbiAgICBhY2N1bXVsYXRlZCArPSB0ZXh0dXJlKHVfdGV4dHVyZSwgdmVjMih2X3RleHR1cmVDb29yZC54ICsgdV9zdGVwLngsIHZfdGV4dHVyZUNvb3JkLnkgLSB1X3N0ZXAueSkpO1xuICAgIHRvdGFsICs9IDEuMDtcbiAgfVxuXG4gIGlmICh2X3RleHR1cmVDb29yZC54IC0gdV9zdGVwLnggPiAwLjAgJiYgdl90ZXh0dXJlQ29vcmQueSArIHVfc3RlcC55ID4gMC4wKVxuICB7XG4gICAgYWNjdW11bGF0ZWQgKz0gdGV4dHVyZSh1X3RleHR1cmUsIHZlYzIodl90ZXh0dXJlQ29vcmQueCAtIHVfc3RlcC54LCB2X3RleHR1cmVDb29yZC55ICsgdV9zdGVwLnkpKTtcbiAgICB0b3RhbCArPSAxLjA7XG4gIH1cblxuICBpZiAodl90ZXh0dXJlQ29vcmQueCArIHVfc3RlcC54ID4gMC4wICYmIHZfdGV4dHVyZUNvb3JkLnkgKyB1X3N0ZXAueSA+IDAuMClcbiAge1xuICAgIGFjY3VtdWxhdGVkICs9IHRleHR1cmUodV90ZXh0dXJlLCB2ZWMyKHZfdGV4dHVyZUNvb3JkLnggKyB1X3N0ZXAueCwgdl90ZXh0dXJlQ29vcmQueSArIHVfc3RlcC55KSk7XG4gICAgdG90YWwgKz0gMS4wO1xuICB9XG5cbiAgLy9cblxuICBpZiAodG90YWwgPiAwLjApXG4gICAgb19jb2xvciA9IGFjY3VtdWxhdGVkIC8gdG90YWw7XG4gIGVsc2VcbiAgICBvX2NvbG9yID0gdmVjNCgxLjAsIDAuMCwgMC4wLCAxLjApOyAvLyB3YXJuaW5nXG59XG5gLnRyaW0oKTsiLAogICJpbXBvcnQgeyBncmFwaGljcyB9IGZyb20gJ0Bsb2NhbC1mcmFtZXdvcmsnO1xuY29uc3Qge1xuICBXZWJHTENvbnRleHQsXG4gIERhdGFUZXh0dXJlLFxuICBUZXh0dXJlLFxuICBGcmFtZUJ1ZmZlcixcbiAgU2hhZGVyUHJvZ3JhbSxcbiAgR2VvbWV0cnlXcmFwcGVyXG59ID0gZ3JhcGhpY3Mud2ViZ2wyO1xuXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgcmF5VHJhY2VyVmVydGV4IGZyb20gJy4vc2hhZGVycy9yYXktdHJhY2VyLmdsc2wudmVydCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgcmF5VHJhY2VyRnJhZ21lbnQgZnJvbSAnLi9zaGFkZXJzL3JheS10cmFjZXIuZ2xzbC5mcmFnJztcblxuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHRleHR1cmVWZXJ0ZXggZnJvbSAnLi9zaGFkZXJzL3RleHR1cmUuZ2xzbC52ZXJ0Jztcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB0ZXh0dXJlRnJhZ21lbnQgZnJvbSAnLi9zaGFkZXJzL3RleHR1cmUuZ2xzbC5mcmFnJztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbmNvbnN0IF9kZWdyZWVUb1JhZCA9IChhbmdsZTogbnVtYmVyKSA9PiAoYW5nbGUgKiBNYXRoLlBJKSAvIDE4MDtcblxuZXhwb3J0IGludGVyZmFjZSBJRGVmaW5pdGlvbiB7XG4gIGNhbnZhc1dpZHRoOiBudW1iZXI7XG4gIGNhbnZhc0hlaWdodDogbnVtYmVyO1xuICBmb3Z5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVB1YmxpY1NwaGVyZSB7XG4gIHBvc2l0aW9uOiBnbG0uUmVhZG9ubHlWZWMzO1xuICBvcmllbnRhdGlvbjogZ2xtLlJlYWRvbmx5UXVhdDtcbiAgcmFkaXVzOiBudW1iZXI7XG4gIGNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzO1xuICByZWZsZWN0aW9uRmFjdG9yOiBudW1iZXI7XG4gIHJlZnJhY3Rpb25GYWN0b3I6IG51bWJlcjtcbiAgY2hlc3Nib2FyZEVuYWJsZWQ6IGJvb2xlYW47XG4gIGNhc3RTaGFkb3dFbmFibGVkOiBib29sZWFuO1xuICByZWNlaXZlTGlnaHRFbmFibGVkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElJbnRlcm5hbFNwaGVyZSB7XG4gIHBvc2l0aW9uOiBnbG0uUmVhZG9ubHlWZWMzO1xuICBvcmllbnRhdGlvbjogZ2xtLlJlYWRvbmx5UXVhdDtcbiAgcmFkaXVzOiBudW1iZXI7XG4gIGNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzO1xuICByZWZsZWN0aW9uRmFjdG9yOiBudW1iZXI7XG4gIHJlZnJhY3Rpb25GYWN0b3I6IG51bWJlcjtcbiAgY2FzdFNoYWRvd0VuYWJsZWQ6IGJvb2xlYW47XG4gIHJlY2VpdmVMaWdodEVuYWJsZWQ6IGJvb2xlYW47XG4gIGNoZXNzYm9hcmRFbmFibGVkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElQdWJsaWNCb3gge1xuICBwb3NpdGlvbjogZ2xtLlJlYWRvbmx5VmVjMztcbiAgb3JpZW50YXRpb246IGdsbS5SZWFkb25seVF1YXQ7XG4gIGJveFNpemU6IGdsbS5SZWFkb25seVZlYzM7XG4gIGNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzO1xuICByZWZsZWN0aW9uRmFjdG9yOiBudW1iZXI7XG4gIHJlZnJhY3Rpb25GYWN0b3I6IG51bWJlcjtcbiAgY2hlc3Nib2FyZEVuYWJsZWQ6IGJvb2xlYW47XG4gIGNhc3RTaGFkb3dFbmFibGVkOiBib29sZWFuO1xuICByZWNlaXZlTGlnaHRFbmFibGVkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEludGVybmFsQm94IHtcbiAgcG9zaXRpb246IGdsbS5SZWFkb25seVZlYzM7XG4gIG9yaWVudGF0aW9uOiBnbG0uUmVhZG9ubHlRdWF0O1xuICBib3hTaXplOiBnbG0uUmVhZG9ubHlWZWMzO1xuICBjb2xvcjogZ2xtLlJlYWRvbmx5VmVjMztcbiAgcmVmbGVjdGlvbkZhY3RvcjogbnVtYmVyO1xuICByZWZyYWN0aW9uRmFjdG9yOiBudW1iZXI7XG4gIGNhc3RTaGFkb3dFbmFibGVkOiBib29sZWFuO1xuICByZWNlaXZlTGlnaHRFbmFibGVkOiBib29sZWFuO1xuICBjaGVzc2JvYXJkRW5hYmxlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVHJpYW5nbGUge1xuICB2MDogZ2xtLlJlYWRvbmx5VmVjMztcbiAgdjE6IGdsbS5SZWFkb25seVZlYzM7XG4gIHYyOiBnbG0uUmVhZG9ubHlWZWMzO1xuICBjb2xvcjogZ2xtLlJlYWRvbmx5VmVjMztcbiAgcmVmbGVjdGlvbkZhY3RvcjogbnVtYmVyO1xuICBjYXN0U2hhZG93RW5hYmxlZDogYm9vbGVhbjtcbiAgcmVjZWl2ZUxpZ2h0RW5hYmxlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3VuTGlnaHQge1xuICBkaXJlY3Rpb246IGdsbS5SZWFkb25seVZlYzM7XG4gIGludGVuc2l0eTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTcG90TGlnaHQge1xuICBwb3NpdGlvbjogZ2xtLlJlYWRvbmx5VmVjMztcbiAgaW50ZW5zaXR5OiBudW1iZXI7XG4gIHJhZGl1czogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDYW1lcmEge1xuICBwb3NpdGlvbjogZ2xtLnZlYzM7XG4gIHRhcmdldDogZ2xtLnZlYzM7XG4gIHVwOiBnbG0udmVjMztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmF5VHJhY2VyUmVuZGVyZXIge1xuICBwdXNoU3BoZXJlKHtcbiAgICBwb3NpdGlvbixcbiAgICBvcmllbnRhdGlvbixcbiAgICByYWRpdXMsXG4gICAgY29sb3IsXG4gICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICBjaGVzc2JvYXJkRW5hYmxlZCxcbiAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICByZWNlaXZlTGlnaHRFbmFibGVkXG4gIH06IElQdWJsaWNTcGhlcmUpOiB2b2lkO1xuXG4gIHB1c2hCb3goe1xuICAgIHBvc2l0aW9uLFxuICAgIG9yaWVudGF0aW9uLFxuICAgIGJveFNpemUsXG4gICAgY29sb3IsXG4gICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICBjaGVzc2JvYXJkRW5hYmxlZCxcbiAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICByZWNlaXZlTGlnaHRFbmFibGVkXG4gIH06IElQdWJsaWNCb3gpOiB2b2lkO1xuXG4gIHB1c2hUcmlhbmdsZSh7XG4gICAgdjAsXG4gICAgdjEsXG4gICAgdjIsXG4gICAgY29sb3IsXG4gICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICByZWNlaXZlTGlnaHRFbmFibGVkXG4gIH06IElUcmlhbmdsZSk6IHZvaWQ7XG5cbiAgcHVzaFN1bkxpZ2h0KHsgZGlyZWN0aW9uLCBpbnRlbnNpdHkgfTogSVN1bkxpZ2h0KTogdm9pZDtcblxuICBwdXNoU3BvdExpZ2h0KHsgcG9zaXRpb24sIGludGVuc2l0eSwgcmFkaXVzIH06IElTcG90TGlnaHQpOiB2b2lkO1xuXG4gIGxvb2tBdChcbiAgICBleWU6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgdGFyZ2V0OiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIHVwOiBnbG0uUmVhZG9ubHlWZWMzXG4gICk6IHZvaWQ7XG5cbiAgcmVuZGVyKCk6IHZvaWQ7XG5cbiAgcmVzZXQoKTogdm9pZDtcblxuICBzZXRSZXNvbHV0aW9uQ29lZihpblJlc29sdXRpb25Db2VmOiBudW1iZXIpOiB2b2lkO1xuICBnZXRSZXNvbHV0aW9uQ29lZigpOiBudW1iZXI7XG5cbiAgc2V0QW50aUFsaWFzaW5nKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkO1xuICBnZXRBbnRpQWxpYXNpbmcoKTogYm9vbGVhbjtcblxuICBnZXRDdXJyZW50U2l6ZSgpOiBnbG0uUmVhZG9ubHlWZWMyO1xufVxuXG5leHBvcnQgY2xhc3MgUmF5VHJhY2VyUmVuZGVyZXIgaW1wbGVtZW50cyBJUmF5VHJhY2VyUmVuZGVyZXIge1xuICBwcml2YXRlIF9jYW1lcmFGb3Z5OiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfY2FudmFzV2lkdGg6IG51bWJlcjtcbiAgcHJpdmF0ZSBfY2FudmFzSGVpZ2h0OiBudW1iZXI7XG4gIHByaXZhdGUgX3JlbmRlcldpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgX3JlbmRlckhlaWdodDogbnVtYmVyO1xuICBwcml2YXRlIF9yZXNvbHV0aW9uQ29lZjogbnVtYmVyID0gMTtcbiAgcHJpdmF0ZSBfYW50aUFsaWFzaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfcmF5VHJhY2VyU2hhZGVyUHJvZ3JhbTogZ3JhcGhpY3Mud2ViZ2wyLklVbmJvdW5kU2hhZGVyO1xuICBwcml2YXRlIF90ZXh0dXJlU2hhZGVyUHJvZ3JhbTogZ3JhcGhpY3Mud2ViZ2wyLklVbmJvdW5kU2hhZGVyO1xuXG4gIHByaXZhdGUgX3JheVRyYWNlckdlb21ldHJ5OiBncmFwaGljcy53ZWJnbDIuR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5O1xuICBwcml2YXRlIF9zY3JlZW5HZW9tZXRyeTogZ3JhcGhpY3Mud2ViZ2wyLkdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeTtcblxuICBwcml2YXRlIF9maW5hbFRleHR1cmU6IGdyYXBoaWNzLndlYmdsMi5JVW5ib3VuZFRleHR1cmU7XG4gIHByaXZhdGUgX2ZyYW1lQnVmZmVyOiBncmFwaGljcy53ZWJnbDIuSVVuYm91bmRGcmFtZUJ1ZmZlcjtcblxuICBwcml2YXRlIF9zY2VuZURhdGFUZXh0dXJlOiBncmFwaGljcy53ZWJnbDIuSVVuYm91bmREYXRhVGV4dHVyZTtcbiAgcHJpdmF0ZSBfc3BoZXJlczogSUludGVybmFsU3BoZXJlW10gPSBbXTtcbiAgcHJpdmF0ZSBfYm94ZXM6IEludGVybmFsQm94W10gPSBbXTtcbiAgcHJpdmF0ZSBfdHJpYW5nbGVzOiBJVHJpYW5nbGVbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2xpZ2h0c0RhdGFUZXh0dXJlOiBncmFwaGljcy53ZWJnbDIuSVVuYm91bmREYXRhVGV4dHVyZTtcbiAgcHJpdmF0ZSBfc3VuTGlnaHRzOiBJU3VuTGlnaHRbXSA9IFtdO1xuICBwcml2YXRlIF9zcG90TGlnaHRzOiBJU3BvdExpZ2h0W10gPSBbXTtcblxuICBwcml2YXRlIF9jYW1lcmE6IElDYW1lcmE7XG5cbiAgY29uc3RydWN0b3IoaW5EZWY6IElEZWZpbml0aW9uKSB7XG4gICAgdGhpcy5fY2FtZXJhRm92eSA9IGluRGVmLmZvdnk7XG5cbiAgICB0aGlzLl9yZW5kZXJXaWR0aCA9IHRoaXMuX2NhbnZhc1dpZHRoID0gaW5EZWYuY2FudmFzV2lkdGg7XG4gICAgdGhpcy5fcmVuZGVySGVpZ2h0ID0gdGhpcy5fY2FudmFzSGVpZ2h0ID0gaW5EZWYuY2FudmFzSGVpZ2h0O1xuXG4gICAgdGhpcy5fcmF5VHJhY2VyU2hhZGVyUHJvZ3JhbSA9IG5ldyBTaGFkZXJQcm9ncmFtKCdSYXlUcmFjZXJSZW5kZXJlci0xJywge1xuICAgICAgdmVydGV4U3JjOiByYXlUcmFjZXJWZXJ0ZXgsXG4gICAgICBmcmFnbWVudFNyYzogcmF5VHJhY2VyRnJhZ21lbnQsXG4gICAgICBhdHRyaWJ1dGVzOiBbJ2FfdmVydGV4UG9zaXRpb24nLCAnYV9wbG90UG9zaXRpb24nXSxcbiAgICAgIHVuaWZvcm1zOiBbXG4gICAgICAgICd1X2NhbWVyYUV5ZScsXG5cbiAgICAgICAgJ3Vfc2NlbmVUZXh0dXJlRGF0YScsXG4gICAgICAgICd1X3NjZW5lVGV4dHVyZVNpemUnLFxuXG4gICAgICAgICd1X3NwaGVyZXNTdGFydCcsXG4gICAgICAgICd1X3NwaGVyZXNTdG9wJyxcbiAgICAgICAgJ3VfYm94ZXNTdGFydCcsXG4gICAgICAgICd1X2JveGVzU3RvcCcsXG4gICAgICAgICd1X3RyaWFuZ2xlc1N0YXJ0JyxcbiAgICAgICAgJ3VfdHJpYW5nbGVzU3RvcCcsXG5cbiAgICAgICAgJ3VfbGlnaHRzVGV4dHVyZURhdGEnLFxuXG4gICAgICAgICd1X3N1bkxpZ2h0c1N0YXJ0JyxcbiAgICAgICAgJ3Vfc3VuTGlnaHRzU3RvcCcsXG4gICAgICAgICd1X3Nwb3RMaWdodHNTdGFydCcsXG4gICAgICAgICd1X3Nwb3RMaWdodHNTdG9wJ1xuICAgICAgXVxuICAgIH0pO1xuXG4gICAgdGhpcy5fdGV4dHVyZVNoYWRlclByb2dyYW0gPSBuZXcgU2hhZGVyUHJvZ3JhbSgnUmF5VHJhY2VyUmVuZGVyZXItMScsIHtcbiAgICAgIHZlcnRleFNyYzogdGV4dHVyZVZlcnRleCxcbiAgICAgIGZyYWdtZW50U3JjOiB0ZXh0dXJlRnJhZ21lbnQsXG4gICAgICBhdHRyaWJ1dGVzOiBbJ2FfdmVydGV4UG9zaXRpb24nLCAnYV92ZXJ0ZXhUZXh0dXJlQ29vcmQnXSxcbiAgICAgIHVuaWZvcm1zOiBbJ3VfdGV4dHVyZScsICd1X3N0ZXAnXVxuICAgIH0pO1xuXG4gICAgdGhpcy5fZmluYWxUZXh0dXJlID0gbmV3IFRleHR1cmUoKTtcbiAgICB0aGlzLl9mcmFtZUJ1ZmZlciA9IG5ldyBGcmFtZUJ1ZmZlcigpO1xuXG4gICAgdGhpcy5fZmluYWxUZXh0dXJlLmluaXRpYWxpemUoKTtcbiAgICB0aGlzLl9maW5hbFRleHR1cmUucHJlQmluZCgoYm91bmRUZXh0dXJlKSA9PiB7XG4gICAgICBib3VuZFRleHR1cmUuYWxsb2NhdGUodGhpcy5fcmVuZGVyV2lkdGgsIHRoaXMuX3JlbmRlckhlaWdodCk7XG5cbiAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmJpbmQoKGJvdW5kRnJhbWVCdWZmZXIpID0+IHtcbiAgICAgICAgYm91bmRGcmFtZUJ1ZmZlci5hdHRhY2hUZXh0dXJlKGJvdW5kVGV4dHVyZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vXG4gICAgLy9cblxuICAgIGNvbnN0IGdlb0J1aWxkZXIgPSBuZXcgR2VvbWV0cnlXcmFwcGVyLkdlb21ldHJ5QnVpbGRlcigpO1xuICAgIGdlb0J1aWxkZXJcbiAgICAgIC5yZXNldCgpXG4gICAgICAuc2V0UHJpbWl0aXZlVHlwZSgndHJpYW5nbGVTdHJpcCcpXG4gICAgICAuYWRkVmJvKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4UG9zaXRpb24nLCAndmVjMmYnKVxuICAgICAgLmFkZFZibygpXG4gICAgICAuc2V0VmJvQXNEeW5hbWljKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfcGxvdFBvc2l0aW9uJywgJ3ZlYzNmJyk7XG5cbiAgICB0aGlzLl9yYXlUcmFjZXJHZW9tZXRyeSA9IG5ldyBHZW9tZXRyeVdyYXBwZXIuR2VvbWV0cnkoXG4gICAgICB0aGlzLl9yYXlUcmFjZXJTaGFkZXJQcm9ncmFtLFxuICAgICAgZ2VvQnVpbGRlci5nZXREZWYoKVxuICAgICk7XG5cbiAgICBjb25zdCByYXlUcmFjZXJWZXJ0aWNlcyA9IFtdO1xuICAgIHJheVRyYWNlclZlcnRpY2VzLnB1c2goKzEuMCwgKzEuMCk7IC8vIHRvcCByaWdodFxuICAgIHJheVRyYWNlclZlcnRpY2VzLnB1c2goLTEuMCwgKzEuMCk7IC8vIHRvcCBsZWZ0XG4gICAgcmF5VHJhY2VyVmVydGljZXMucHVzaCgrMS4wLCAtMS4wKTsgLy8gYm90dG9tIHJpZ2h0XG4gICAgcmF5VHJhY2VyVmVydGljZXMucHVzaCgtMS4wLCAtMS4wKTsgLy8gYm90dG9tIGxlZnRcblxuICAgIHRoaXMuX3JheVRyYWNlckdlb21ldHJ5LmFsbG9jYXRlQnVmZmVyKFxuICAgICAgMCxcbiAgICAgIHJheVRyYWNlclZlcnRpY2VzLFxuICAgICAgcmF5VHJhY2VyVmVydGljZXMubGVuZ3RoXG4gICAgKTtcbiAgICB0aGlzLl9yYXlUcmFjZXJHZW9tZXRyeS5zZXRQcmltaXRpdmVTdGFydCgwKTtcbiAgICB0aGlzLl9yYXlUcmFjZXJHZW9tZXRyeS5zZXRQcmltaXRpdmVDb3VudCg0KTtcblxuICAgIC8vXG4gICAgLy9cblxuICAgIGdlb0J1aWxkZXJcbiAgICAgIC5yZXNldCgpXG4gICAgICAuc2V0UHJpbWl0aXZlVHlwZSgndHJpYW5nbGVTdHJpcCcpXG4gICAgICAuYWRkVmJvKClcbiAgICAgIC5hZGRWYm9BdHRyaWJ1dGUoJ2FfdmVydGV4UG9zaXRpb24nLCAndmVjMmYnKVxuICAgICAgLmFkZFZib0F0dHJpYnV0ZSgnYV92ZXJ0ZXhUZXh0dXJlQ29vcmQnLCAndmVjMmYnKTtcblxuICAgIHRoaXMuX3NjcmVlbkdlb21ldHJ5ID0gbmV3IEdlb21ldHJ5V3JhcHBlci5HZW9tZXRyeShcbiAgICAgIHRoaXMuX3RleHR1cmVTaGFkZXJQcm9ncmFtLFxuICAgICAgZ2VvQnVpbGRlci5nZXREZWYoKVxuICAgICk7XG5cbiAgICBjb25zdCBzY3JlZW5WZXJ0aWNlczogbnVtYmVyW10gPSBbXTtcbiAgICBzY3JlZW5WZXJ0aWNlcy5wdXNoKCsxLjAsICsxLjAsIDEsIDEpOyAvLyB0b3AgcmlnaHRcbiAgICBzY3JlZW5WZXJ0aWNlcy5wdXNoKC0xLjAsICsxLjAsIDAsIDEpOyAvLyB0b3AgbGVmdFxuICAgIHNjcmVlblZlcnRpY2VzLnB1c2goKzEuMCwgLTEuMCwgMSwgMCk7IC8vIGJvdHRvbSByaWdodFxuICAgIHNjcmVlblZlcnRpY2VzLnB1c2goLTEuMCwgLTEuMCwgMCwgMCk7IC8vIGJvdHRvbSBsZWZ0XG5cbiAgICB0aGlzLl9zY3JlZW5HZW9tZXRyeS5hbGxvY2F0ZUJ1ZmZlcihcbiAgICAgIDAsXG4gICAgICBzY3JlZW5WZXJ0aWNlcyxcbiAgICAgIHNjcmVlblZlcnRpY2VzLmxlbmd0aFxuICAgICk7XG4gICAgdGhpcy5fc2NyZWVuR2VvbWV0cnkuc2V0UHJpbWl0aXZlU3RhcnQoMCk7XG4gICAgdGhpcy5fc2NyZWVuR2VvbWV0cnkuc2V0UHJpbWl0aXZlQ291bnQoNCk7XG5cbiAgICAvL1xuICAgIC8vXG5cbiAgICB0aGlzLl9zY2VuZURhdGFUZXh0dXJlID0gbmV3IERhdGFUZXh0dXJlKCk7XG4gICAgdGhpcy5fc2NlbmVEYXRhVGV4dHVyZS5pbml0aWFsaXplKDIwNDgpO1xuXG4gICAgdGhpcy5fbGlnaHRzRGF0YVRleHR1cmUgPSBuZXcgRGF0YVRleHR1cmUoKTtcbiAgICB0aGlzLl9saWdodHNEYXRhVGV4dHVyZS5pbml0aWFsaXplKDIwNDgpO1xuXG4gICAgdGhpcy5fY2FtZXJhID0ge1xuICAgICAgcG9zaXRpb246IGdsbS52ZWMzLmZyb21WYWx1ZXMoMCwgMCwgMCksXG4gICAgICB0YXJnZXQ6IGdsbS52ZWMzLmZyb21WYWx1ZXMoMS41LCAxLjUsIDEuNSksXG4gICAgICB1cDogZ2xtLnZlYzMuZnJvbVZhbHVlcygwLCAxLCAwKVxuICAgIH07XG4gIH1cblxuICBwdXNoU3BoZXJlKHtcbiAgICBwb3NpdGlvbixcbiAgICBvcmllbnRhdGlvbixcbiAgICByYWRpdXMsXG4gICAgY29sb3IsXG4gICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICByZWZyYWN0aW9uRmFjdG9yLFxuICAgIGNoZXNzYm9hcmRFbmFibGVkLFxuICAgIGNhc3RTaGFkb3dFbmFibGVkLFxuICAgIHJlY2VpdmVMaWdodEVuYWJsZWRcbiAgfTogSVB1YmxpY1NwaGVyZSk6IHZvaWQge1xuICAgIGlmIChyYWRpdXMgPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHNwaGVyZSByYWRpdXMnKTtcbiAgICB9XG4gICAgaWYgKHJlZmxlY3Rpb25GYWN0b3IgPCAwIHx8IHJlZmxlY3Rpb25GYWN0b3IgPiAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3BoZXJlIHJlZmxlY3Rpb24nKTtcbiAgICB9XG4gICAgaWYgKHJlZnJhY3Rpb25GYWN0b3IgPCAwIHx8IHJlZnJhY3Rpb25GYWN0b3IgPiAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgc3BoZXJlIHJlZnJhY3Rpb25GYWN0b3InKTtcbiAgICB9XG5cblxuICAgIC8vIGNvbnN0IHF1YXQgPSBnbG0ucXVhdC5pZGVudGl0eShnbG0ucXVhdC5jcmVhdGUoKSk7XG4gICAgLy8gZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKHF1YXQsIFswLDAsMV0sIE1hdGguUEkgKiAwLjI1KTtcblxuICAgIC8vIGNvbnN0IHF1YXRBID0gZ2xtLnF1YXQuaWRlbnRpdHkoZ2xtLnF1YXQuY3JlYXRlKCkpO1xuICAgIC8vIGdsbS5xdWF0LnNldEF4aXNBbmdsZShxdWF0QSwgWzAsMCwxXSwgTWF0aC5QSSAqIDAuMjUpO1xuXG4gICAgLy8gY29uc3QgcXVhdEIgPSBnbG0ucXVhdC5pZGVudGl0eShnbG0ucXVhdC5jcmVhdGUoKSk7XG4gICAgLy8gZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKHF1YXRCLCBbMSwwLDBdLCBNYXRoLlBJICogMC4yNSk7XG5cbiAgICAvLyBjb25zdCBxdWF0QyA9IGdsbS5xdWF0LmlkZW50aXR5KGdsbS5xdWF0LmNyZWF0ZSgpKTtcbiAgICAvLyBnbG0ucXVhdC5tdWx0aXBseShxdWF0QywgcXVhdEEsIHF1YXRCKTtcblxuICAgIC8vIGNvbnN0IG1hdDQgPSBnbG0ubWF0NC5jcmVhdGUoKTtcbiAgICAvLyBnbG0ubWF0NC5pZGVudGl0eShtYXQ0KTtcbiAgICAvLyBnbG0ubWF0NC50cmFuc2xhdGUobWF0NCwgbWF0NCwgcG9zaXRpb24pO1xuXG4gICAgLy8gZ2xtLm1hdDQucm90YXRlWShtYXQ0LCBtYXQ0LCBNYXRoLlBJICogMC4yNSk7IC8vIHZlcnRpY2FsIGF4aXMgZmlyc3RcblxuICAgIC8vIC8vIGdsbS5tYXQ0LnJvdGF0ZVkobWF0NCwgbWF0NCwgYW5nbGVZKTsgLy8gdmVydGljYWwgYXhpcyBmaXJzdFxuICAgIC8vIC8vIGdsbS5tYXQ0LnJvdGF0ZVoobWF0NCwgbWF0NCwgYW5nbGVaKTtcbiAgICAvLyAvLyBnbG0ubWF0NC5yb3RhdGVYKG1hdDQsIG1hdDQsIGFuZ2xlWCk7XG4gICAgLy8gLy8gLy8gZ2xtLm1hdDQuc2NhbGUobWF0NCwgbWF0NCwgWzAuNSwwLjUsMC41XSk7XG5cbiAgICB0aGlzLl9zcGhlcmVzLnB1c2goe1xuICAgICAgcG9zaXRpb246IFtwb3NpdGlvblswXSwgcG9zaXRpb25bMV0sIHBvc2l0aW9uWzJdXSxcbiAgICAgIC8vIG9yaWVudGF0aW9uOiBbcXVhdENbMF0sIHF1YXRDWzFdLCBxdWF0Q1syXSwgcXVhdENbM11dLFxuICAgICAgb3JpZW50YXRpb246IFtvcmllbnRhdGlvblswXSwgb3JpZW50YXRpb25bMV0sIG9yaWVudGF0aW9uWzJdLCBvcmllbnRhdGlvblszXV0sXG4gICAgICAvLyBtYXRyaXg6IG1hdDQsXG4gICAgICByYWRpdXMsXG4gICAgICBjb2xvcjogW2NvbG9yWzBdLCBjb2xvclsxXSwgY29sb3JbMl1dLFxuICAgICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICAgIHJlZnJhY3Rpb25GYWN0b3IsXG4gICAgICBjaGVzc2JvYXJkRW5hYmxlZCxcbiAgICAgIGNhc3RTaGFkb3dFbmFibGVkLFxuICAgICAgcmVjZWl2ZUxpZ2h0RW5hYmxlZFxuICAgIH0pO1xuICB9XG5cbiAgcHVzaEJveCh7XG4gICAgcG9zaXRpb24sXG4gICAgb3JpZW50YXRpb24sXG4gICAgYm94U2l6ZSxcbiAgICBjb2xvcixcbiAgICByZWZsZWN0aW9uRmFjdG9yLFxuICAgIHJlZnJhY3Rpb25GYWN0b3IsXG4gICAgY2hlc3Nib2FyZEVuYWJsZWQsXG4gICAgY2FzdFNoYWRvd0VuYWJsZWQsXG4gICAgcmVjZWl2ZUxpZ2h0RW5hYmxlZFxuICB9OiBJUHVibGljQm94KTogdm9pZCB7XG4gICAgaWYgKGJveFNpemVbMF0gPD0gMCB8fCBib3hTaXplWzFdIDw9IDAgfHwgYm94U2l6ZVsyXSA8PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYm94IHNpemUnKTtcbiAgICB9XG4gICAgaWYgKHJlZmxlY3Rpb25GYWN0b3IgPCAwIHx8IHJlZmxlY3Rpb25GYWN0b3IgPiAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYm94IHJlZmxlY3Rpb24nKTtcbiAgICB9XG5cbiAgICB0aGlzLl9ib3hlcy5wdXNoKHtcbiAgICAgIHBvc2l0aW9uOiBbcG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXV0sXG4gICAgICBvcmllbnRhdGlvbjogW29yaWVudGF0aW9uWzBdLCBvcmllbnRhdGlvblsxXSwgb3JpZW50YXRpb25bMl0sIG9yaWVudGF0aW9uWzNdXSxcbiAgICAgIGJveFNpemU6IGdsbS52ZWMzLmNsb25lKGJveFNpemUpLFxuICAgICAgY29sb3I6IGdsbS52ZWMzLmNsb25lKGNvbG9yKSxcbiAgICAgIHJlZmxlY3Rpb25GYWN0b3IsXG4gICAgICByZWZyYWN0aW9uRmFjdG9yLFxuICAgICAgY2hlc3Nib2FyZEVuYWJsZWQsXG4gICAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICAgIHJlY2VpdmVMaWdodEVuYWJsZWRcbiAgICB9KTtcbiAgfVxuXG4gIHB1c2hUcmlhbmdsZSh7XG4gICAgdjAsXG4gICAgdjEsXG4gICAgdjIsXG4gICAgY29sb3IsXG4gICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICBjYXN0U2hhZG93RW5hYmxlZCxcbiAgICByZWNlaXZlTGlnaHRFbmFibGVkXG4gIH06IElUcmlhbmdsZSkge1xuICAgIGlmIChyZWZsZWN0aW9uRmFjdG9yIDwgMCB8fCByZWZsZWN0aW9uRmFjdG9yID4gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHRyaWFuZ2xlIHJlZmxlY3Rpb24nKTtcbiAgICB9XG5cbiAgICB0aGlzLl90cmlhbmdsZXMucHVzaCh7XG4gICAgICB2MDogZ2xtLnZlYzMuY2xvbmUodjApLFxuICAgICAgdjE6IGdsbS52ZWMzLmNsb25lKHYxKSxcbiAgICAgIHYyOiBnbG0udmVjMy5jbG9uZSh2MiksXG4gICAgICBjb2xvcjogZ2xtLnZlYzMuY2xvbmUoY29sb3IpLFxuICAgICAgcmVmbGVjdGlvbkZhY3RvcixcbiAgICAgIGNhc3RTaGFkb3dFbmFibGVkLFxuICAgICAgcmVjZWl2ZUxpZ2h0RW5hYmxlZFxuICAgIH0pO1xuICB9XG5cbiAgcHVzaFN1bkxpZ2h0KHsgZGlyZWN0aW9uLCBpbnRlbnNpdHkgfTogSVN1bkxpZ2h0KSB7XG4gICAgLy8gYWRkIHN1biBsaWdodFxuXG4gICAgaWYgKGludGVuc2l0eSA8PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ2ludGVuc2l0eSBjYW5ub3QgYmUgMCcpO1xuICAgIGlmIChnbG0udmVjMy5sZW5ndGgoZGlyZWN0aW9uKSA9PT0gMClcbiAgICAgIHRocm93IG5ldyBFcnJvcignZGlyZWN0aW9uIGNhbm5vdCBiZSAwJyk7XG5cbiAgICBjb25zdCBkaXIgPSBnbG0udmVjMy5ub3JtYWxpemUoZ2xtLnZlYzMuY2xvbmUoZGlyZWN0aW9uKSwgZGlyZWN0aW9uKTtcblxuICAgIHRoaXMuX3N1bkxpZ2h0cy5wdXNoKHsgZGlyZWN0aW9uOiBkaXIsIGludGVuc2l0eSB9KTtcbiAgfVxuXG4gIHB1c2hTcG90TGlnaHQoeyBwb3NpdGlvbiwgaW50ZW5zaXR5LCByYWRpdXMgfTogSVNwb3RMaWdodCk6IHZvaWQge1xuICAgIC8vIGFkZCBzcG90IGxpZ2h0XG5cbiAgICBpZiAoaW50ZW5zaXR5IDw9IDApIHRocm93IG5ldyBFcnJvcignaW50ZW5zaXR5IGNhbm5vdCBiZSAwJyk7XG4gICAgaWYgKHJhZGl1cyA8PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ3JhZGl1cyBjYW5ub3QgYmUgPD0gMCcpO1xuXG4gICAgdGhpcy5fc3BvdExpZ2h0cy5wdXNoKHtcbiAgICAgIHBvc2l0aW9uOiBnbG0udmVjMy5jbG9uZShwb3NpdGlvbiksXG4gICAgICBpbnRlbnNpdHksXG4gICAgICByYWRpdXNcbiAgICB9KTtcbiAgfVxuXG4gIGxvb2tBdChcbiAgICBleWU6IGdsbS5SZWFkb25seVZlYzMsXG4gICAgdGFyZ2V0OiBnbG0uUmVhZG9ubHlWZWMzLFxuICAgIHVwOiBnbG0uUmVhZG9ubHlWZWMzXG4gICkge1xuICAgIGdsbS52ZWMzLmNvcHkodGhpcy5fY2FtZXJhLnBvc2l0aW9uLCBleWUpO1xuXG4gICAgLy9cbiAgICAvL1xuXG4gICAgbGV0IGZvcndhcmREaXIgPSBnbG0udmVjMy5zdWIoZ2xtLnZlYzMuY3JlYXRlKCksIHRhcmdldCwgZXllKTtcbiAgICBmb3J3YXJkRGlyID0gZ2xtLnZlYzMubm9ybWFsaXplKGZvcndhcmREaXIsIGZvcndhcmREaXIpO1xuICAgIGZvcndhcmREaXIgPSBnbG0udmVjMy5hZGQoZm9yd2FyZERpciwgZXllLCBmb3J3YXJkRGlyKTtcbiAgICBnbG0udmVjMy5jb3B5KHRoaXMuX2NhbWVyYS50YXJnZXQsIGZvcndhcmREaXIpO1xuXG4gICAgLy9cbiAgICAvL1xuXG4gICAgY29uc3QgdXBEaXIgPSBnbG0udmVjMy5ub3JtYWxpemUoZ2xtLnZlYzMuY3JlYXRlKCksIHVwKTtcbiAgICBnbG0udmVjMy5jb3B5KHRoaXMuX2NhbWVyYS51cCwgdXBEaXIpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIC8vIHRleHR1cmUgcGFzcyBmaXJzdFxuICAgIC8vIC0+IHdlIHJlbmRlciB0aGUgcHJldmlvdXMgZnJhbWUgdG8gYXZvaWQgcG90ZW50aWFsIHdlYmdsIHF1ZXVlIGJsb2NraW5nXG4gICAgdGhpcy5fcmVuZGVyVGV4dHVyZVBhc3MoKTtcbiAgICB0aGlzLl9yZW5kZXJSYXlUcmFjaW5nUGFzcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyVGV4dHVyZVBhc3MoKSB7XG4gICAgY29uc3QgZ2wgPSBXZWJHTENvbnRleHQuZ2V0Q29udGV4dCgpO1xuXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgdGhpcy5fY2FudmFzV2lkdGgsIHRoaXMuX2NhbnZhc0hlaWdodCk7XG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCAvKnwgZ2wuREVQVEhfQlVGRkVSX0JJVCovKTtcblxuICAgIGNvbnN0IHNoYWRlciA9IHRoaXMuX3RleHR1cmVTaGFkZXJQcm9ncmFtO1xuXG4gICAgc2hhZGVyLmJpbmQoKGJvdW5kU2hhZGVyKSA9PiB7XG4gICAgICBib3VuZFNoYWRlci5zZXRUZXh0dXJlVW5pZm9ybSgndV90ZXh0dXJlJywgdGhpcy5fZmluYWxUZXh0dXJlLCAwKTtcblxuICAgICAgLy8gYW50aSBhbGlhc2luZyBzZXR1cFxuXG4gICAgICBpZiAodGhpcy5fYW50aUFsaWFzaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0ZXBYID0gKDEgLSB0aGlzLl9yZW5kZXJXaWR0aCAvIHRoaXMuX2NhbnZhc1dpZHRoKSAqIDAuMDA1O1xuICAgICAgICBjb25zdCBzdGVwWSA9ICgxIC0gdGhpcy5fcmVuZGVySGVpZ2h0IC8gdGhpcy5fY2FudmFzSGVpZ2h0KSAqIDAuMDA1O1xuXG4gICAgICAgIGJvdW5kU2hhZGVyLnNldEZsb2F0MlVuaWZvcm0oJ3Vfc3RlcCcsIHN0ZXBYLCBzdGVwWSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBib3VuZFNoYWRlci5zZXRGbG9hdDJVbmlmb3JtKCd1X3N0ZXAnLCAwLCAwKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc2NyZWVuR2VvbWV0cnkucmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJSYXlUcmFjaW5nUGFzcygpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICBjb25zdCBmYXJDb3JuZXJzID0gdGhpcy5fY29tcHV0ZUNhbWVyYUZhckNvcm5lcnMoKTtcbiAgICB0aGlzLl9yYXlUcmFjZXJHZW9tZXRyeS5hbGxvY2F0ZUJ1ZmZlcigxLCBmYXJDb3JuZXJzLCBmYXJDb3JuZXJzLmxlbmd0aCk7XG5cbiAgICBjb25zdCBzY2FsZWRXaWR0aCA9IE1hdGguZmxvb3IodGhpcy5fcmVuZGVyV2lkdGgpO1xuICAgIGNvbnN0IHNjYWxlZEhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5fcmVuZGVySGVpZ2h0KTtcblxuICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmJpbmQoKCkgPT4ge1xuICAgICAgZ2wudmlld3BvcnQoMCwgMCwgc2NhbGVkV2lkdGgsIHNjYWxlZEhlaWdodCk7XG4gICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUIC8qfCBnbC5ERVBUSF9CVUZGRVJfQklUKi8pO1xuXG4gICAgICB7XG4gICAgICAgIC8vIHJheXRyYWNpbmcgcGFzc1xuXG4gICAgICAgIGNvbnN0IHNoYWRlciA9IHRoaXMuX3JheVRyYWNlclNoYWRlclByb2dyYW07XG5cbiAgICAgICAgc2hhZGVyLmJpbmQoKGJvdW5kU2hhZGVyKSA9PiB7XG4gICAgICAgICAgYm91bmRTaGFkZXIuc2V0RmxvYXQzVW5pZm9ybShcbiAgICAgICAgICAgICd1X2NhbWVyYUV5ZScsXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEucG9zaXRpb25bMF0sXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEucG9zaXRpb25bMV0sXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEucG9zaXRpb25bMl1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vXG5cbiAgICAgICAgICB7XG4gICAgICAgICAgICAvLyBzY2VuZSBkYXRhXG5cbiAgICAgICAgICAgIGNvbnN0IHNjZW5lRGF0YVZhbHVlczogbnVtYmVyW10gPSBbXTtcblxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gc3BoZXJlc1xuXG4gICAgICAgICAgICAgICAgYm91bmRTaGFkZXIuc2V0SW50ZWdlcjFVbmlmb3JtKCd1X3NwaGVyZXNTdGFydCcsIDApO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcGhlcmUgb2YgdGhpcy5fc3BoZXJlcykge1xuICAgICAgICAgICAgICAgICAgLy8gYWRkIHNwaGVyZVxuXG5cbiAgICAgICAgICAgICAgICAgIC8vIGZvciAobGV0IGlpID0gMDsgaWkgPCAxNjsgKytpaSlcbiAgICAgICAgICAgICAgICAgIC8vICAgc2NlbmVEYXRhVmFsdWVzLnB1c2goc3BoZXJlLm1hdHJpeFtpaV0pOyAvLyBbMC4uMTVdXG5cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBzcGhlcmUucG9zaXRpb25bMF0sIC8vIDBcbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLnBvc2l0aW9uWzFdLCAvLyAxXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5wb3NpdGlvblsyXSAvLyAyXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5vcmllbnRhdGlvblswXSwgLy8gM1xuICAgICAgICAgICAgICAgICAgICBzcGhlcmUub3JpZW50YXRpb25bMV0sIC8vIDRcbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLm9yaWVudGF0aW9uWzJdLCAvLyA1XG4gICAgICAgICAgICAgICAgICAgIHNwaGVyZS5vcmllbnRhdGlvblszXSAvLyA2XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLnB1c2goc3BoZXJlLnJhZGl1cyk7IC8vIFs3XVxuXG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLmNvbG9yWzBdLCAvLyBbOF1cbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLmNvbG9yWzFdLCAvLyBbOV1cbiAgICAgICAgICAgICAgICAgICAgc3BoZXJlLmNvbG9yWzJdIC8vIFsxMF1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMucHVzaChzcGhlcmUucmVmbGVjdGlvbkZhY3Rvcik7IC8vIFsxMV1cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKHNwaGVyZS5yZWZyYWN0aW9uRmFjdG9yKTsgLy8gWzEyXVxuXG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMucHVzaChzcGhlcmUuY2FzdFNoYWRvd0VuYWJsZWQgPyAxIDogMCk7IC8vIFsxM11cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKHNwaGVyZS5yZWNlaXZlTGlnaHRFbmFibGVkID8gMSA6IDApOyAvLyBbMTRdXG5cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKHNwaGVyZS5jaGVzc2JvYXJkRW5hYmxlZCA/IDEgOiAwKTsgLy8gWzE1XVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJvdW5kU2hhZGVyLnNldEludGVnZXIxVW5pZm9ybShcbiAgICAgICAgICAgICAgICAgICd1X3NwaGVyZXNTdG9wJyxcbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5sZW5ndGhcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IC8vIHNwaGVyZXNcblxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gYm94ZXNcblxuICAgICAgICAgICAgICAgIGJvdW5kU2hhZGVyLnNldEludGVnZXIxVW5pZm9ybShcbiAgICAgICAgICAgICAgICAgICd1X2JveGVzU3RhcnQnLFxuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLmxlbmd0aFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJveCBvZiB0aGlzLl9ib3hlcykge1xuICAgICAgICAgICAgICAgICAgLy8gYWRkIGJveFxuXG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgYm94LnBvc2l0aW9uWzBdLFxuICAgICAgICAgICAgICAgICAgICBib3gucG9zaXRpb25bMV0sXG4gICAgICAgICAgICAgICAgICAgIGJveC5wb3NpdGlvblsyXVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBib3gub3JpZW50YXRpb25bMF0sXG4gICAgICAgICAgICAgICAgICAgIGJveC5vcmllbnRhdGlvblsxXSxcbiAgICAgICAgICAgICAgICAgICAgYm94Lm9yaWVudGF0aW9uWzJdLFxuICAgICAgICAgICAgICAgICAgICBib3gub3JpZW50YXRpb25bM11cbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKCAvLyBbNy4uOV1cbiAgICAgICAgICAgICAgICAgICAgYm94LmJveFNpemVbMF0sXG4gICAgICAgICAgICAgICAgICAgIGJveC5ib3hTaXplWzFdLFxuICAgICAgICAgICAgICAgICAgICBib3guYm94U2l6ZVsyXVxuICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLnB1c2goIC8vIFsxMC4uMTJdXG4gICAgICAgICAgICAgICAgICAgIGJveC5jb2xvclswXSxcbiAgICAgICAgICAgICAgICAgICAgYm94LmNvbG9yWzFdLFxuICAgICAgICAgICAgICAgICAgICBib3guY29sb3JbMl1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMucHVzaChib3gucmVmbGVjdGlvbkZhY3Rvcik7IC8vIFsxM11cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKGJveC5yZWZyYWN0aW9uRmFjdG9yKTsgLy8gWzE0XVxuXG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMucHVzaChib3guY2FzdFNoYWRvd0VuYWJsZWQgPyAxIDogMCk7IC8vIFsxNV1cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKGJveC5yZWNlaXZlTGlnaHRFbmFibGVkID8gMSA6IDApOyAvLyBbMTZdXG5cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKGJveC5jaGVzc2JvYXJkRW5hYmxlZCA/IDEgOiAwKTsgLy8gWzE3XVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJvdW5kU2hhZGVyLnNldEludGVnZXIxVW5pZm9ybShcbiAgICAgICAgICAgICAgICAgICd1X2JveGVzU3RvcCcsXG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSAvLyBib3hlc1xuXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyB0cmlhbmdsZXNcblxuICAgICAgICAgICAgICAgIGJvdW5kU2hhZGVyLnNldEludGVnZXIxVW5pZm9ybShcbiAgICAgICAgICAgICAgICAgICd1X3RyaWFuZ2xlc1N0YXJ0JyxcbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5sZW5ndGhcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0cmlhbmdsZSBvZiB0aGlzLl90cmlhbmdsZXMpIHtcbiAgICAgICAgICAgICAgICAgIC8vIGFkZCB0cmlhbmdsZVxuXG4gICAgICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUudjBbMF0sXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnYwWzFdLFxuICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS52MFsyXVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS52MVswXSxcbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUudjFbMV0sXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnYxWzJdXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnYyWzBdLFxuICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS52MlsxXSxcbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUudjJbMl1cbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS5jb2xvclswXSxcbiAgICAgICAgICAgICAgICAgICAgdHJpYW5nbGUuY29sb3JbMV0sXG4gICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLmNvbG9yWzJdXG4gICAgICAgICAgICAgICAgICApOyAvLyBjb2xvclxuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLnB1c2godHJpYW5nbGUucmVmbGVjdGlvbkZhY3Rvcik7IC8vIHJlZmxlY3Rpb25cblxuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLnB1c2godHJpYW5nbGUuY2FzdFNoYWRvd0VuYWJsZWQgPyAxIDogMCk7IC8vIGNhc3RTaGFkb3dcbiAgICAgICAgICAgICAgICAgIHNjZW5lRGF0YVZhbHVlcy5wdXNoKHRyaWFuZ2xlLnJlY2VpdmVMaWdodEVuYWJsZWQgPyAxIDogMCk7IC8vIHJlY2VpdmVMaWdodFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJvdW5kU2hhZGVyLnNldEludGVnZXIxVW5pZm9ybShcbiAgICAgICAgICAgICAgICAgICd1X3RyaWFuZ2xlc1N0b3AnLFxuICAgICAgICAgICAgICAgICAgc2NlbmVEYXRhVmFsdWVzLmxlbmd0aFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gLy8gdHJpYW5nbGVzXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyAwKTtcbiAgICAgICAgICAgIHRoaXMuX3NjZW5lRGF0YVRleHR1cmUucHJlQmluZCgoYm91bmREYXRhVGV4dHVyZSkgPT4ge1xuICAgICAgICAgICAgICBib3VuZERhdGFUZXh0dXJlLnVwZGF0ZSgwLCBzY2VuZURhdGFWYWx1ZXMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGJvdW5kU2hhZGVyLnNldEludGVnZXIxVW5pZm9ybSgndV9zY2VuZVRleHR1cmVEYXRhJywgMCk7XG4gICAgICAgICAgICBib3VuZFNoYWRlci5zZXRJbnRlZ2VyMVVuaWZvcm0oXG4gICAgICAgICAgICAgICd1X3NjZW5lVGV4dHVyZVNpemUnLFxuICAgICAgICAgICAgICBzY2VuZURhdGFWYWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gLy8gc2NlbmUgZGF0YVxuXG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gbGlnaHRzIGRhdGFcblxuICAgICAgICAgICAgY29uc3QgbGlnaHRzRGF0YVZhbHVlczogbnVtYmVyW10gPSBbXTtcblxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyBzdW4gbGlnaHRzXG5cbiAgICAgICAgICAgICAgYm91bmRTaGFkZXIuc2V0SW50ZWdlcjFVbmlmb3JtKCd1X3N1bkxpZ2h0c1N0YXJ0JywgMCk7XG5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBzdW5MaWdodCBvZiB0aGlzLl9zdW5MaWdodHMpIHtcbiAgICAgICAgICAgICAgICAvLyBhZGQgc3VuIGxpZ2h0XG5cbiAgICAgICAgICAgICAgICBsaWdodHNEYXRhVmFsdWVzLnB1c2goXG4gICAgICAgICAgICAgICAgICBzdW5MaWdodC5kaXJlY3Rpb25bMF0sXG4gICAgICAgICAgICAgICAgICBzdW5MaWdodC5kaXJlY3Rpb25bMV0sXG4gICAgICAgICAgICAgICAgICBzdW5MaWdodC5kaXJlY3Rpb25bMl1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGxpZ2h0c0RhdGFWYWx1ZXMucHVzaChzdW5MaWdodC5pbnRlbnNpdHkpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYm91bmRTaGFkZXIuc2V0SW50ZWdlcjFVbmlmb3JtKFxuICAgICAgICAgICAgICAgICd1X3N1bkxpZ2h0c1N0b3AnLFxuICAgICAgICAgICAgICAgIGxpZ2h0c0RhdGFWYWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IC8vIHN1biBsaWdodHNcblxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyBzcG90IGxpZ2h0c1xuXG4gICAgICAgICAgICAgIGJvdW5kU2hhZGVyLnNldEludGVnZXIxVW5pZm9ybShcbiAgICAgICAgICAgICAgICAndV9zcG90TGlnaHRzU3RhcnQnLFxuICAgICAgICAgICAgICAgIGxpZ2h0c0RhdGFWYWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBzcG90TGlnaHQgb2YgdGhpcy5fc3BvdExpZ2h0cykge1xuICAgICAgICAgICAgICAgIC8vIGFkZCBzcG90IGxpZ2h0XG5cbiAgICAgICAgICAgICAgICBsaWdodHNEYXRhVmFsdWVzLnB1c2goXG4gICAgICAgICAgICAgICAgICBzcG90TGlnaHQucG9zaXRpb25bMF0sXG4gICAgICAgICAgICAgICAgICBzcG90TGlnaHQucG9zaXRpb25bMV0sXG4gICAgICAgICAgICAgICAgICBzcG90TGlnaHQucG9zaXRpb25bMl1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGxpZ2h0c0RhdGFWYWx1ZXMucHVzaChzcG90TGlnaHQucmFkaXVzKTtcbiAgICAgICAgICAgICAgICBsaWdodHNEYXRhVmFsdWVzLnB1c2goc3BvdExpZ2h0LmludGVuc2l0eSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBib3VuZFNoYWRlci5zZXRJbnRlZ2VyMVVuaWZvcm0oXG4gICAgICAgICAgICAgICAgJ3Vfc3BvdExpZ2h0c1N0b3AnLFxuICAgICAgICAgICAgICAgIGxpZ2h0c0RhdGFWYWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IC8vIHNwb3QgbGlnaHRzXG5cbiAgICAgICAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyAxKTtcbiAgICAgICAgICAgIHRoaXMuX2xpZ2h0c0RhdGFUZXh0dXJlLnByZUJpbmQoKGJvdW5kRGF0YVRleHR1cmUpID0+IHtcbiAgICAgICAgICAgICAgYm91bmREYXRhVGV4dHVyZS51cGRhdGUoMCwgbGlnaHRzRGF0YVZhbHVlcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYm91bmRTaGFkZXIuc2V0SW50ZWdlcjFVbmlmb3JtKCd1X2xpZ2h0c1RleHR1cmVEYXRhJywgMSk7XG4gICAgICAgICAgfSAvLyBsaWdodHMgZGF0YVxuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vXG5cbiAgICAgICAgICB0aGlzLl9yYXlUcmFjZXJHZW9tZXRyeS5yZW5kZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICB9IC8vIHJheXRyYWNpbmcgcGFzc1xuICAgIH0pO1xuXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgdGhpcy5fY2FudmFzV2lkdGgsIHRoaXMuX2NhbnZhc0hlaWdodCk7XG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9zdW5MaWdodHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9zcG90TGlnaHRzLmxlbmd0aCA9IDA7XG5cbiAgICB0aGlzLl9zcGhlcmVzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fYm94ZXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl90cmlhbmdsZXMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIHNldFJlc29sdXRpb25Db2VmKGluUmVzb2x1dGlvbkNvZWY6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIGluUmVzb2x1dGlvbkNvZWYgPT09IHRoaXMuX3Jlc29sdXRpb25Db2VmIHx8XG4gICAgICBpblJlc29sdXRpb25Db2VmIDw9IDAgfHxcbiAgICAgIGluUmVzb2x1dGlvbkNvZWYgPiAxXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fcmVzb2x1dGlvbkNvZWYgPSBpblJlc29sdXRpb25Db2VmO1xuXG4gICAgdGhpcy5fcmVuZGVyV2lkdGggPSBNYXRoLmZsb29yKHRoaXMuX2NhbnZhc1dpZHRoICogdGhpcy5fcmVzb2x1dGlvbkNvZWYpO1xuICAgIHRoaXMuX3JlbmRlckhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5fY2FudmFzSGVpZ2h0ICogdGhpcy5fcmVzb2x1dGlvbkNvZWYpO1xuXG4gICAgdGhpcy5fZmluYWxUZXh0dXJlLnByZUJpbmQoKGJvdW5kVGV4dHVyZSkgPT4ge1xuICAgICAgYm91bmRUZXh0dXJlLnJlc2l6ZSh0aGlzLl9yZW5kZXJXaWR0aCwgdGhpcy5fcmVuZGVySGVpZ2h0KTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFJlc29sdXRpb25Db2VmKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3Jlc29sdXRpb25Db2VmO1xuICB9XG5cbiAgc2V0QW50aUFsaWFzaW5nKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9hbnRpQWxpYXNpbmcgPSBlbmFibGVkO1xuICB9XG5cbiAgZ2V0QW50aUFsaWFzaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9hbnRpQWxpYXNpbmc7XG4gIH1cblxuICBnZXRDdXJyZW50U2l6ZSgpOiBnbG0uUmVhZG9ubHlWZWMyIHtcbiAgICByZXR1cm4gW3RoaXMuX3JlbmRlcldpZHRoLCB0aGlzLl9yZW5kZXJIZWlnaHRdO1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tcHV0ZUNhbWVyYUZhckNvcm5lcnMoKTogUmVhZG9ubHlBcnJheTxudW1iZXI+IHtcbiAgICBjb25zdCBmb3J3YXJkRGlyID0gZ2xtLnZlYzMuc3ViKFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICB0aGlzLl9jYW1lcmEudGFyZ2V0LFxuICAgICAgdGhpcy5fY2FtZXJhLnBvc2l0aW9uXG4gICAgKTtcblxuICAgIGNvbnN0IGxlZnREaXIgPSBnbG0udmVjMy5jcm9zcyhcbiAgICAgIGdsbS52ZWMzLmNyZWF0ZSgpLFxuICAgICAgZm9yd2FyZERpcixcbiAgICAgIHRoaXMuX2NhbWVyYS51cFxuICAgICk7XG4gICAgY29uc3QgdXBEaXIgPSBnbG0udmVjMy5jcm9zcyhnbG0udmVjMy5jcmVhdGUoKSwgbGVmdERpciwgZm9yd2FyZERpcik7XG5cbiAgICBjb25zdCByYWRIRm92eSA9IF9kZWdyZWVUb1JhZCh0aGlzLl9jYW1lcmFGb3Z5ICogMC41KTtcbiAgICBjb25zdCB4TGVuZ3RoID0gKE1hdGguY29zKHJhZEhGb3Z5KSAqIDEpIC8gTWF0aC5zaW4ocmFkSEZvdnkpO1xuXG4gICAgY29uc3Qgc2NhbGVkRm9yd2FyZERpciA9IGdsbS52ZWMzLm11bHRpcGx5KFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICBmb3J3YXJkRGlyLFxuICAgICAgZ2xtLnZlYzMuZnJvbVZhbHVlcyh4TGVuZ3RoLCB4TGVuZ3RoLCB4TGVuZ3RoKVxuICAgICk7XG4gICAgY29uc3QgZmFyQ2VudGVyID0gZ2xtLnZlYzMuYWRkKFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICB0aGlzLl9jYW1lcmEucG9zaXRpb24sXG4gICAgICBzY2FsZWRGb3J3YXJkRGlyXG4gICAgKTtcblxuICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gdGhpcy5fY2FudmFzV2lkdGggLyB0aGlzLl9jYW52YXNIZWlnaHQ7XG4gICAgY29uc3QgZmFySGFsZldpZHRoID0gZ2xtLnZlYzMubXVsdGlwbHkoXG4gICAgICBnbG0udmVjMy5jcmVhdGUoKSxcbiAgICAgIGxlZnREaXIsXG4gICAgICBnbG0udmVjMy5mcm9tVmFsdWVzKGFzcGVjdFJhdGlvLCBhc3BlY3RSYXRpbywgYXNwZWN0UmF0aW8pXG4gICAgKTtcblxuICAgIGNvbnN0IGZhclVwID0gZ2xtLnZlYzMuYWRkKGdsbS52ZWMzLmNyZWF0ZSgpLCBmYXJDZW50ZXIsIHVwRGlyKTtcbiAgICBjb25zdCBmYXJCb3R0b20gPSBnbG0udmVjMy5zdWJ0cmFjdChnbG0udmVjMy5jcmVhdGUoKSwgZmFyQ2VudGVyLCB1cERpcik7XG4gICAgY29uc3QgZmFyVG9wTGVmdCA9IGdsbS52ZWMzLnN1YnRyYWN0KFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICBmYXJVcCxcbiAgICAgIGZhckhhbGZXaWR0aFxuICAgICk7XG4gICAgY29uc3QgZmFyQm90dG9tTGVmdCA9IGdsbS52ZWMzLnN1YnRyYWN0KFxuICAgICAgZ2xtLnZlYzMuY3JlYXRlKCksXG4gICAgICBmYXJCb3R0b20sXG4gICAgICBmYXJIYWxmV2lkdGhcbiAgICApO1xuICAgIGNvbnN0IGZhclRvcFJpZ2h0ID0gZ2xtLnZlYzMuYWRkKGdsbS52ZWMzLmNyZWF0ZSgpLCBmYXJVcCwgZmFySGFsZldpZHRoKTtcbiAgICBjb25zdCBmYXJCb3R0b21SaWdodCA9IGdsbS52ZWMzLmFkZChcbiAgICAgIGdsbS52ZWMzLmNyZWF0ZSgpLFxuICAgICAgZmFyQm90dG9tLFxuICAgICAgZmFySGFsZldpZHRoXG4gICAgKTtcblxuICAgIHJldHVybiBbXG4gICAgICBmYXJUb3BSaWdodFswXSxcbiAgICAgIGZhclRvcFJpZ2h0WzFdLFxuICAgICAgZmFyVG9wUmlnaHRbMl0sXG4gICAgICBmYXJUb3BMZWZ0WzBdLFxuICAgICAgZmFyVG9wTGVmdFsxXSxcbiAgICAgIGZhclRvcExlZnRbMl0sXG4gICAgICBmYXJCb3R0b21SaWdodFswXSxcbiAgICAgIGZhckJvdHRvbVJpZ2h0WzFdLFxuICAgICAgZmFyQm90dG9tUmlnaHRbMl0sXG4gICAgICBmYXJCb3R0b21MZWZ0WzBdLFxuICAgICAgZmFyQm90dG9tTGVmdFsxXSxcbiAgICAgIGZhckJvdHRvbUxlZnRbMl1cbiAgICBdO1xuICB9XG5cbiAgZ2V0IGNhbnZhc1dpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLl9jYW52YXNXaWR0aDtcbiAgfVxuICBnZXQgY2FudmFzSGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLl9jYW52YXNIZWlnaHQ7XG4gIH1cbiAgZ2V0IHJlbmRlcldpZHRoKCkge1xuICAgIHJldHVybiB0aGlzLl9yZW5kZXJXaWR0aDtcbiAgfVxuICBnZXQgcmVuZGVySGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLl9yZW5kZXJIZWlnaHQ7XG4gIH1cblxuICBnZXQgY2FtZXJhKCk6IFJlYWRvbmx5PElDYW1lcmE+IHtcbiAgICByZXR1cm4gdGhpcy5fY2FtZXJhO1xuICB9XG5cbiAgZ2V0IHNwaGVyZXMoKTogUmVhZG9ubHlBcnJheTxJSW50ZXJuYWxTcGhlcmU+IHtcbiAgICByZXR1cm4gdGhpcy5fc3BoZXJlcztcbiAgfVxuICBnZXQgYm94ZXMoKTogUmVhZG9ubHlBcnJheTxJbnRlcm5hbEJveD4ge1xuICAgIHJldHVybiB0aGlzLl9ib3hlcztcbiAgfVxuICBnZXQgdHJpYW5nbGVzKCk6IFJlYWRvbmx5QXJyYXk8SVRyaWFuZ2xlPiB7XG4gICAgcmV0dXJuIHRoaXMuX3RyaWFuZ2xlcztcbiAgfVxuXG4gIGdldCBzdW5MaWdodHMoKTogUmVhZG9ubHlBcnJheTxJU3VuTGlnaHQ+IHtcbiAgICByZXR1cm4gdGhpcy5fc3VuTGlnaHRzO1xuICB9XG4gIGdldCBzcG90TGlnaHRzKCk6IFJlYWRvbmx5QXJyYXk8SVNwb3RMaWdodD4ge1xuICAgIHJldHVybiB0aGlzLl9zcG90TGlnaHRzO1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBncmFwaGljcyB9IGZyb20gJ0Bsb2NhbC1mcmFtZXdvcmsnO1xuY29uc3QgeyBXZWJHTENvbnRleHQgfSA9IGdyYXBoaWNzLndlYmdsMjtcbmNvbnN0IHsgQ2FtZXJhIH0gPSBncmFwaGljcy5jYW1lcmE7XG5jb25zdCB7IFRleHRSZW5kZXJlciwgU3RhY2tSZW5kZXJlcnMgfSA9IGdyYXBoaWNzLnJlbmRlcmVycztcblxuaW1wb3J0IHtcbiAgUmF5VHJhY2VyUmVuZGVyZXIsXG4gIElUcmlhbmdsZSxcbiAgSVB1YmxpY1NwaGVyZSxcbiAgSVJheVRyYWNlclJlbmRlcmVyLFxuICBJbnRlcm5hbEJveFxufSBmcm9tICcuL3JlbmRlcmVycyc7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG4vL1xuXG5jb25zdCBrX2ZvdnkgPSA3MDtcblxuaW50ZXJmYWNlIElEZWZpbml0aW9uIHtcbiAgY2FudmFzRG9tRWxlbWVudDogSFRNTENhbnZhc0VsZW1lbnQ7XG59XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJlciB7XG4gIHByaXZhdGUgX2RlZjogSURlZmluaXRpb247XG5cbiAgcHJpdmF0ZSBfcmF5VHJhY2VyUmVuZGVyZXI6IFJheVRyYWNlclJlbmRlcmVyO1xuICBwcml2YXRlIF90ZXh0UmVuZGVyZXI6IGdyYXBoaWNzLnJlbmRlcmVycy5UZXh0UmVuZGVyZXI7XG4gIHByaXZhdGUgX3N0YWNrUmVuZGVyZXJzOiBncmFwaGljcy5yZW5kZXJlcnMuU3RhY2tSZW5kZXJlcnM7XG4gIHByaXZhdGUgX211bHRpcGxlQnVmZmVyaW5nOiBncmFwaGljcy5yZW5kZXJlcnMuTXVsdGlCdWZmZXJzUmVuZGVyaW5nO1xuXG4gIHByaXZhdGUgX2RlYnVnU2NlbmVDYW1lcmEgPSBuZXcgQ2FtZXJhKCk7XG4gIHByaXZhdGUgX21haW5IdWRDYW1lcmEgPSBuZXcgQ2FtZXJhKCk7XG5cbiAgY29uc3RydWN0b3IoZGVmOiBJRGVmaW5pdGlvbikge1xuICAgIHRoaXMuX2RlZiA9IGRlZjtcblxuICAgIHRoaXMucmVzaXplKFxuICAgICAgdGhpcy5fZGVmLmNhbnZhc0RvbUVsZW1lbnQud2lkdGgsXG4gICAgICB0aGlzLl9kZWYuY2FudmFzRG9tRWxlbWVudC5oZWlnaHRcbiAgICApO1xuXG4gICAgV2ViR0xDb250ZXh0LmluaXRpYWxpemUodGhpcy5fZGVmLmNhbnZhc0RvbUVsZW1lbnQpO1xuXG4gICAgdGhpcy5fcmF5VHJhY2VyUmVuZGVyZXIgPSBuZXcgUmF5VHJhY2VyUmVuZGVyZXIoe1xuICAgICAgY2FudmFzV2lkdGg6IHRoaXMuX2RlZi5jYW52YXNEb21FbGVtZW50LndpZHRoLFxuICAgICAgY2FudmFzSGVpZ2h0OiB0aGlzLl9kZWYuY2FudmFzRG9tRWxlbWVudC5oZWlnaHQsXG4gICAgICBmb3Z5OiBrX2ZvdnlcbiAgICB9KTtcbiAgICB0aGlzLl90ZXh0UmVuZGVyZXIgPSBuZXcgVGV4dFJlbmRlcmVyKCk7XG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMgPSBuZXcgU3RhY2tSZW5kZXJlcnMoKTtcbiAgICB0aGlzLl9tdWx0aXBsZUJ1ZmZlcmluZyA9IG5ldyBncmFwaGljcy5yZW5kZXJlcnMuTXVsdGlCdWZmZXJzUmVuZGVyaW5nKFxuICAgICAgdGhpcy5fZGVmLmNhbnZhc0RvbUVsZW1lbnQud2lkdGgsXG4gICAgICB0aGlzLl9kZWYuY2FudmFzRG9tRWxlbWVudC5oZWlnaHRcbiAgICApO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICAvLyBmb3QgdGhlIGRhdGEgdGV4dHVyZSB0byBnb3QgZnJvbSBcImZsb2F0IHRvIGZsb2F0XCJcbiAgICAvLyA9PiBpbnN0ZWFkIG9mIFwidmVjNCB0byB2ZWM0XCJcbiAgICBjb25zdCBhbGlnbm1lbnQgPSAxO1xuICAgIGdsLnBpeGVsU3RvcmVpKGdsLlVOUEFDS19BTElHTk1FTlQsIGFsaWdubWVudCk7XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy8gaW5pdGlhbGl6ZSBXZWJHTFxuXG4gICAgZ2wuZGlzYWJsZShnbC5ERVBUSF9URVNUKTtcbiAgICBnbC5kaXNhYmxlKGdsLkJMRU5EKTtcbiAgICBnbC5kaXNhYmxlKGdsLkNVTExfRkFDRSk7XG4gICAgZ2wuZGVwdGhGdW5jKGdsLk5FVkVSKTtcblxuICAgIGdsLmNsZWFyQ29sb3IoMC4wLCAwLjAsIDAuMCwgMS4wKTtcbiAgICBnbC5jbGVhckRlcHRoKDEuMCk7XG4gIH1cblxuICByZXNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLl9kZWJ1Z1NjZW5lQ2FtZXJhLnNldFZpZXdwb3J0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB0aGlzLl9kZWJ1Z1NjZW5lQ2FtZXJhLnNldEFzUGVyc3BlY3RpdmUoe1xuICAgICAgZm92eToga19mb3Z5LFxuICAgICAgbmVhcjogMSxcbiAgICAgIGZhcjogNTAwXG4gICAgfSk7XG5cbiAgICB0aGlzLl9tYWluSHVkQ2FtZXJhLnNldFZpZXdwb3J0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgIGNvbnN0IGhXaWR0aCA9IHdpZHRoICogMC41O1xuICAgIGNvbnN0IGhIZWlnaHQgPSBoZWlnaHQgKiAwLjU7XG5cbiAgICB0aGlzLl9tYWluSHVkQ2FtZXJhLnNldEFzT3J0aG9nb25hbCh7XG4gICAgICBsZWZ0OiAtaFdpZHRoLFxuICAgICAgcmlnaHQ6ICtoV2lkdGgsXG4gICAgICB0b3A6IC1oSGVpZ2h0LFxuICAgICAgYm90dG9tOiAraEhlaWdodCxcbiAgICAgIG5lYXI6IC0yMDAsXG4gICAgICBmYXI6IDIwMFxuICAgIH0pO1xuICAgIHRoaXMuX21haW5IdWRDYW1lcmEuc2V0RXllKFtoV2lkdGgsIGhIZWlnaHQsIDFdKTtcbiAgICB0aGlzLl9tYWluSHVkQ2FtZXJhLnNldFRhcmdldChbaFdpZHRoLCBoSGVpZ2h0LCAwXSk7XG4gICAgdGhpcy5fbWFpbkh1ZENhbWVyYS5zZXRVcEF4aXMoWzAsIDEsIDBdKTtcbiAgICB0aGlzLl9tYWluSHVkQ2FtZXJhLmNvbXB1dGVNYXRyaWNlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcHVzaFdpcmVGcmFtZVNwaGVyZShzcGhlcmU6IElQdWJsaWNTcGhlcmUpIHtcbiAgICBjb25zdCBYID0gMC41MjU3MzExMTIxMTkxMzM2MDYgKiBzcGhlcmUucmFkaXVzO1xuICAgIGNvbnN0IFogPSAwLjg1MDY1MDgwODM1MjAzOTkzMiAqIHNwaGVyZS5yYWRpdXM7XG4gICAgY29uc3QgTiA9IDAuMDtcblxuICAgIGNvbnN0IHBvc2l0aW9uczogUmVhZG9ubHlBcnJheTxnbG0udmVjMz4gPSBbXG4gICAgICBbLVgsIE4sIFpdLFxuICAgICAgW1gsIE4sIFpdLFxuICAgICAgWy1YLCBOLCAtWl0sXG4gICAgICBbWCwgTiwgLVpdLFxuICAgICAgW04sIFosIFhdLFxuICAgICAgW04sIFosIC1YXSxcbiAgICAgIFtOLCAtWiwgWF0sXG4gICAgICBbTiwgLVosIC1YXSxcbiAgICAgIFtaLCBYLCBOXSxcbiAgICAgIFstWiwgWCwgTl0sXG4gICAgICBbWiwgLVgsIE5dLFxuICAgICAgWy1aLCAtWCwgTl1cbiAgICBdO1xuXG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IHBvc2l0aW9ucy5sZW5ndGg7ICsraWkpIHtcbiAgICAgIHBvc2l0aW9uc1tpaV1bMF0gKz0gc3BoZXJlLnBvc2l0aW9uWzBdO1xuICAgICAgcG9zaXRpb25zW2lpXVsxXSArPSBzcGhlcmUucG9zaXRpb25bMV07XG4gICAgICBwb3NpdGlvbnNbaWldWzJdICs9IHNwaGVyZS5wb3NpdGlvblsyXTtcbiAgICB9XG5cbiAgICBjb25zdCBpbmRpY2VzOiBSZWFkb25seUFycmF5PGdsbS5SZWFkb25seVZlYzM+ID0gW1xuICAgICAgWzAsIDQsIDFdLFxuICAgICAgWzAsIDksIDRdLFxuICAgICAgWzksIDUsIDRdLFxuICAgICAgWzQsIDUsIDhdLFxuICAgICAgWzQsIDgsIDFdLFxuICAgICAgWzgsIDEwLCAxXSxcbiAgICAgIFs4LCAzLCAxMF0sXG4gICAgICBbNSwgMywgOF0sXG4gICAgICBbNSwgMiwgM10sXG4gICAgICBbMiwgNywgM10sXG4gICAgICBbNywgMTAsIDNdLFxuICAgICAgWzcsIDYsIDEwXSxcbiAgICAgIFs3LCAxMSwgNl0sXG4gICAgICBbMTEsIDAsIDZdLFxuICAgICAgWzAsIDEsIDZdLFxuICAgICAgWzYsIDEsIDEwXSxcbiAgICAgIFs5LCAwLCAxMV0sXG4gICAgICBbOSwgMTEsIDJdLFxuICAgICAgWzksIDIsIDVdLFxuICAgICAgWzcsIDIsIDExXVxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IGluZGV4IG9mIGluZGljZXMpIHtcbiAgICAgIGNvbnN0IHYxID0gcG9zaXRpb25zW2luZGV4WzBdXTtcbiAgICAgIGNvbnN0IHYyID0gcG9zaXRpb25zW2luZGV4WzFdXTtcbiAgICAgIGNvbnN0IHYzID0gcG9zaXRpb25zW2luZGV4WzJdXTtcblxuICAgICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUodjEsIHYyLCBzcGhlcmUuY29sb3IpO1xuICAgICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUodjIsIHYzLCBzcGhlcmUuY29sb3IpO1xuICAgICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUodjMsIHYxLCBzcGhlcmUuY29sb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3B1c2hXaXJlRnJhbWVCb3goYm94OiBJbnRlcm5hbEJveCkge1xuICAgIGNvbnN0IHZlcnRpY2VzOiBSZWFkb25seUFycmF5PGdsbS5SZWFkb25seVZlYzM+ID0gW1xuICAgICAgZ2xtLnZlYzMuZnJvbVZhbHVlcygtYm94LmJveFNpemVbMF0sIC1ib3guYm94U2l6ZVsxXSwgLWJveC5ib3hTaXplWzJdKSxcbiAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoK2JveC5ib3hTaXplWzBdLCAtYm94LmJveFNpemVbMV0sIC1ib3guYm94U2l6ZVsyXSksXG4gICAgICBnbG0udmVjMy5mcm9tVmFsdWVzKC1ib3guYm94U2l6ZVswXSwgK2JveC5ib3hTaXplWzFdLCAtYm94LmJveFNpemVbMl0pLFxuICAgICAgZ2xtLnZlYzMuZnJvbVZhbHVlcygrYm94LmJveFNpemVbMF0sICtib3guYm94U2l6ZVsxXSwgLWJveC5ib3hTaXplWzJdKSxcbiAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoLWJveC5ib3hTaXplWzBdLCAtYm94LmJveFNpemVbMV0sICtib3guYm94U2l6ZVsyXSksXG4gICAgICBnbG0udmVjMy5mcm9tVmFsdWVzKCtib3guYm94U2l6ZVswXSwgLWJveC5ib3hTaXplWzFdLCArYm94LmJveFNpemVbMl0pLFxuICAgICAgZ2xtLnZlYzMuZnJvbVZhbHVlcygtYm94LmJveFNpemVbMF0sICtib3guYm94U2l6ZVsxXSwgK2JveC5ib3hTaXplWzJdKSxcbiAgICAgIGdsbS52ZWMzLmZyb21WYWx1ZXMoK2JveC5ib3hTaXplWzBdLCArYm94LmJveFNpemVbMV0sICtib3guYm94U2l6ZVsyXSlcbiAgICBdO1xuXG4gICAgY29uc3QgdmVydGljZXMyOiBnbG0uUmVhZG9ubHlWZWMzW10gPSBbXTtcblxuICAgIHZlcnRpY2VzLmZvckVhY2goKHZlcnRleCkgPT4ge1xuICAgICAgY29uc3QgcG9zID0gZ2xtLnZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKTtcblxuICAgICAgY29uc3QgbWF0NCA9IGdsbS5tYXQ0LmlkZW50aXR5KGdsbS5tYXQ0LmNyZWF0ZSgpKTtcbiAgICAgIGdsbS5tYXQ0LnRyYW5zbGF0ZShtYXQ0LCBtYXQ0LCBib3gucG9zaXRpb24pO1xuICAgICAgY29uc3QgbWF0NGIgPSBnbG0ubWF0NC5mcm9tUXVhdChnbG0ubWF0NC5jcmVhdGUoKSwgYm94Lm9yaWVudGF0aW9uKTtcbiAgICAgIGdsbS5tYXQ0Lm11bHRpcGx5KG1hdDQsIG1hdDQsIG1hdDRiKTtcblxuICAgICAgZ2xtLnZlYzMudHJhbnNmb3JtTWF0NChwb3MsIHZlcnRleCwgbWF0NCk7XG4gICAgICB2ZXJ0aWNlczIucHVzaChwb3MpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgaW5kaWNlc0dyb3VwOiBSZWFkb25seUFycmF5PGdsbS5SZWFkb25seVZlYzI+ID0gW1xuICAgICAgWzAsIDFdLFxuICAgICAgWzEsIDNdLFxuICAgICAgWzMsIDJdLFxuICAgICAgWzIsIDBdLFxuICAgICAgWzQsIDVdLFxuICAgICAgWzUsIDddLFxuICAgICAgWzcsIDZdLFxuICAgICAgWzYsIDRdLFxuICAgICAgWzAsIDRdLFxuICAgICAgWzEsIDVdLFxuICAgICAgWzMsIDddLFxuICAgICAgWzIsIDZdXG4gICAgXTtcblxuICAgIGluZGljZXNHcm91cC5mb3JFYWNoKChpbmRleCkgPT4ge1xuICAgICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUoXG4gICAgICAgIHZlcnRpY2VzMltpbmRleFswXV0sXG4gICAgICAgIHZlcnRpY2VzMltpbmRleFsxXV0sXG4gICAgICAgIGJveC5jb2xvclxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3B1c2hXaXJlRnJhbWVUcmlhbmdsZSh0cmlhbmdsZTogSVRyaWFuZ2xlKSB7XG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUodHJpYW5nbGUudjAsIHRyaWFuZ2xlLnYxLCB0cmlhbmdsZS5jb2xvcik7XG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUodHJpYW5nbGUudjEsIHRyaWFuZ2xlLnYyLCB0cmlhbmdsZS5jb2xvcik7XG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMucHVzaExpbmUodHJpYW5nbGUudjIsIHRyaWFuZ2xlLnYwLCB0cmlhbmdsZS5jb2xvcik7XG4gIH1cblxuICBzYWZlU2NlbmVXaXJlRnJhbWUoaW5DYWxsYmFjazogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMuX2RlYnVnU2NlbmVDYW1lcmEuc2V0RXllKHRoaXMuX3JheVRyYWNlclJlbmRlcmVyLmNhbWVyYS5wb3NpdGlvbik7XG4gICAgdGhpcy5fZGVidWdTY2VuZUNhbWVyYS5zZXRUYXJnZXQodGhpcy5fcmF5VHJhY2VyUmVuZGVyZXIuY2FtZXJhLnRhcmdldCk7XG4gICAgdGhpcy5fZGVidWdTY2VuZUNhbWVyYS5zZXRVcEF4aXModGhpcy5fcmF5VHJhY2VyUmVuZGVyZXIuY2FtZXJhLnVwKTtcbiAgICB0aGlzLl9kZWJ1Z1NjZW5lQ2FtZXJhLmNvbXB1dGVNYXRyaWNlcygpO1xuXG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMuc2FmZVJlbmRlcihcbiAgICAgIHRoaXMuX2RlYnVnU2NlbmVDYW1lcmEuZ2V0Q29tcG9zZWRNYXRyaXgoKSxcbiAgICAgIGluQ2FsbGJhY2tcbiAgICApO1xuICB9XG5cbiAgZmx1c2hIdWRXaXJlRnJhbWUoKSB7XG4gICAgdGhpcy5fc3RhY2tSZW5kZXJlcnMuZmx1c2godGhpcy5fbWFpbkh1ZENhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpKTtcbiAgfVxuXG4gIGZsdXNoSHVkVGV4dCgpIHtcbiAgICB0aGlzLl90ZXh0UmVuZGVyZXIuZmx1c2godGhpcy5fbWFpbkh1ZENhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpKTtcbiAgfVxuXG4gIHNldHVwRGVidWdSZW5kZXJlcigpIHtcbiAgICB0aGlzLl9yYXlUcmFjZXJSZW5kZXJlci5zcGhlcmVzLmZvckVhY2goKHNwaGVyZSkgPT5cbiAgICAgIHRoaXMuX3B1c2hXaXJlRnJhbWVTcGhlcmUoc3BoZXJlKVxuICAgICk7XG4gICAgdGhpcy5fcmF5VHJhY2VyUmVuZGVyZXIuYm94ZXMuZm9yRWFjaCgoYm94KSA9PiB0aGlzLl9wdXNoV2lyZUZyYW1lQm94KGJveCkpO1xuICAgIHRoaXMuX3JheVRyYWNlclJlbmRlcmVyLnRyaWFuZ2xlcy5mb3JFYWNoKCh0cmlhbmdsZSkgPT5cbiAgICAgIHRoaXMuX3B1c2hXaXJlRnJhbWVUcmlhbmdsZSh0cmlhbmdsZSlcbiAgICApO1xuICB9XG5cbiAgZ2V0IHJheVRyYWNlclJlbmRlcmVyKCk6IElSYXlUcmFjZXJSZW5kZXJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3JheVRyYWNlclJlbmRlcmVyO1xuICB9XG4gIGdldCBzdGFja1JlbmRlcmVycygpOiBncmFwaGljcy5yZW5kZXJlcnMuSVN0YWNrUmVuZGVyZXJzIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhY2tSZW5kZXJlcnM7XG4gIH1cbiAgZ2V0IHRleHRSZW5kZXJlcigpOiBncmFwaGljcy5yZW5kZXJlcnMuSVRleHRSZW5kZXJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3RleHRSZW5kZXJlcjtcbiAgfVxuICBnZXQgbXVsdGlwbGVCdWZmZXJpbmcoKTogZ3JhcGhpY3MucmVuZGVyZXJzLk11bHRpQnVmZmVyc1JlbmRlcmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX211bHRpcGxlQnVmZmVyaW5nO1xuICB9XG5cbiAgZ2V0IGRlYnVnU2NlbmVDYW1lcmEoKTogZ3JhcGhpY3MuY2FtZXJhLklDYW1lcmEge1xuICAgIHJldHVybiB0aGlzLl9kZWJ1Z1NjZW5lQ2FtZXJhO1xuICB9XG4gIGdldCBtYWluSHVkQ2FtZXJhKCk6IGdyYXBoaWNzLmNhbWVyYS5JQ2FtZXJhIHtcbiAgICByZXR1cm4gdGhpcy5fbWFpbkh1ZENhbWVyYTtcbiAgfVxufVxuIiwKICAiXG5pbXBvcnQgeyBzeXN0ZW0gfSBmcm9tICdAbG9jYWwtZnJhbWV3b3JrJztcblxuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICcuLi9ncmFwaGljcy9SZW5kZXJlcic7XG5cbmltcG9ydCB7IHBoeXNpY3MgfSBmcm9tICdGcmFua2VuUGh5cyc7XG5cbmltcG9ydCAqIGFzIGdsbSBmcm9tICdnbC1tYXRyaXgnO1xuXG5cbmxldCBjb250aW51b3VzVGltZTogbnVtYmVyID0gMDtcblxuaW50ZXJmYWNlIEJveE9iamVjdCB7XG4gIGJveFNpemU6IGdsbS5SZWFkb25seVZlYzM7XG4gIGNvbG9yOiBnbG0uUmVhZG9ubHlWZWMzO1xuICByZWZsZWN0aW9uRmFjdG9yOiBudW1iZXI7XG4gIHJlZnJhY3Rpb25GYWN0b3I6IG51bWJlcjtcbiAgcGh5c2ljQm9keTogcGh5c2ljcy5JUGh5c2ljQm9keTtcbiAgY2hlc3Nib2FyZE1hdGVyaWFsOiBib29sZWFuO1xuICByZWNlaXZlTGlnaHRFbmFibGVkOiBib29sZWFuO1xuICBjYXN0U2hhZG93RW5hYmxlZDogYm9vbGVhbjtcbn07XG5cbmludGVyZmFjZSBTcGhlcmVPYmplY3Qge1xuICByYWRpdXM6IG51bWJlcjtcbiAgcGh5c2ljQm9keTogcGh5c2ljcy5JUGh5c2ljQm9keTtcbn07XG5cbmNvbnN0IGFsbEJveGVzOiBCb3hPYmplY3RbXSA9IFtdO1xuY29uc3QgYWxsU3BoZXJlczogU3BoZXJlT2JqZWN0W10gPSBbXTtcblxuXG5jb25zdCBnX2xpZ2h0UG9zOiBnbG0udmVjMyA9IFswLDAsMjBdXG5jb25zdCBnX3JlZnJhY3RpdmVQb3M6IGdsbS52ZWMzID0gWzAsMCwyMF1cblxuXG5jb25zdCBfY3JlYXRlQm94ID0gKFxuICBwaHlzaWNXb3JsZDogcGh5c2ljcy5QaHlzaWNXb3JsZCxcbiAgcG9zaXRpb246IGdsbS5SZWFkb25seVZlYzMsXG4gIG9yaWVudGF0aW9uOiBnbG0uUmVhZG9ubHlRdWF0LFxuICBib3hTaXplOiBnbG0uUmVhZG9ubHlWZWMzLFxuICBjb2xvcjogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgcmVmbGVjdGlvbkZhY3RvcjogbnVtYmVyLFxuICByZWZyYWN0aW9uRmFjdG9yOiBudW1iZXIgPSAwLFxuICBjaGVzc2JvYXJkTWF0ZXJpYWw6IGJvb2xlYW4gPSBmYWxzZSxcbiAgcmVjZWl2ZUxpZ2h0RW5hYmxlZDogYm9vbGVhbiA9IHRydWUsXG4gIGNhc3RTaGFkb3dFbmFibGVkOiBib29sZWFuID0gdHJ1ZVxuKSA9PiB7XG5cbiAgY29uc3QgcGh5c2ljQm9keSA9IHBoeXNpY1dvcmxkLmNyZWF0ZVJpZ2lkQm9keSh7XG4gICAgbWFzczogMCwgLy8gc3RhdGljXG4gICAgc2hhcGU6IHsgdHlwZTogJ2JveCcsIHNpemU6IFtib3hTaXplWzBdICogMS45NSwgYm94U2l6ZVsxXSAqIDEuOTUsIGJveFNpemVbMl0gKiAxLjk1XSB9LFxuICAgIHBvc2l0aW9uLFxuICAgIG9yaWVudGF0aW9uLFxuICB9KTtcbiAgcGh5c2ljQm9keS5zZXRSZXN0aXR1dGlvbigwLjcpOyAvLyBib3VuY2luZ1xuICBwaHlzaWNCb2R5LnNldEZyaWN0aW9uKDEpOyAvLyBzbyB0aGUgc3BoZXJlIGRvZXNuJ3Qgc2xpZGUgYnV0IHJvbGwgb24gaXRcblxuICBhbGxCb3hlcy5wdXNoKHsgYm94U2l6ZSwgY29sb3IsIHJlZmxlY3Rpb25GYWN0b3IsIHBoeXNpY0JvZHksIHJlZnJhY3Rpb25GYWN0b3IsIGNoZXNzYm9hcmRNYXRlcmlhbCwgcmVjZWl2ZUxpZ2h0RW5hYmxlZCwgY2FzdFNoYWRvd0VuYWJsZWQgfSk7XG59O1xuXG5jb25zdCBfY3JlYXRlQm94MiA9IChcbiAgcGh5c2ljV29ybGQ6IHBoeXNpY3MuUGh5c2ljV29ybGQsXG4gIHBvc2l0aW9uOiBnbG0uUmVhZG9ubHlWZWMzLFxuICBvcmllbnRhdGlvbjogZ2xtLlJlYWRvbmx5UXVhdCxcbiAgYm94U2l6ZTogZ2xtLlJlYWRvbmx5VmVjMyxcbiAgY29sb3I6IGdsbS5SZWFkb25seVZlYzMsXG4gIHJlZmxlY3Rpb25GYWN0b3I6IG51bWJlcixcbiAgcmVmcmFjdGlvbkZhY3RvcjogbnVtYmVyLFxuICBjaGVzc2JvYXJkTWF0ZXJpYWw6IGJvb2xlYW4gPSBmYWxzZSxcbiAgcmVjZWl2ZUxpZ2h0RW5hYmxlZDogYm9vbGVhbiA9IHRydWUsXG4gIGNhc3RTaGFkb3dFbmFibGVkOiBib29sZWFuID0gdHJ1ZSxcbiAgbWFzczogbnVtYmVyID0gMVxuKSA9PiB7XG5cbiAgY29uc3QgcGh5c2ljQm9keSA9IHBoeXNpY1dvcmxkLmNyZWF0ZVJpZ2lkQm9keSh7XG4gICAgbWFzcyxcbiAgICBzaGFwZTogeyB0eXBlOiAnYm94Jywgc2l6ZTogW2JveFNpemVbMF0gKiAyLjAsIGJveFNpemVbMV0gKiAyLjAsIGJveFNpemVbMl0gKiAyLjBdIH0sXG4gICAgcG9zaXRpb24sXG4gICAgb3JpZW50YXRpb24sXG4gIH0pO1xuICBwaHlzaWNCb2R5LnNldFJlc3RpdHV0aW9uKDAuNSk7IC8vIGJvdW5jaW5nXG4gIHBoeXNpY0JvZHkuc2V0RnJpY3Rpb24oMCk7IC8vIHNvIHRoZSBzcGhlcmUgZG9lc24ndCBzbGlkZSBidXQgcm9sbCBvbiBpdFxuXG4gIGFsbEJveGVzLnB1c2goeyBib3hTaXplLCBjb2xvciwgcmVmbGVjdGlvbkZhY3RvciwgcGh5c2ljQm9keSwgcmVmcmFjdGlvbkZhY3RvciwgY2hlc3Nib2FyZE1hdGVyaWFsLCByZWNlaXZlTGlnaHRFbmFibGVkLCBjYXN0U2hhZG93RW5hYmxlZCB9KTtcbn07XG5cblxuY29uc3QgX2NyZWF0ZVNwaGVyZSA9IChcbiAgcGh5c2ljV29ybGQ6IHBoeXNpY3MuUGh5c2ljV29ybGQsXG4gIHBvc2l0aW9uOiBnbG0uUmVhZG9ubHlWZWMzLFxuICAvLyBvcmllbnRhdGlvbjogZ2xtLlJlYWRvbmx5UXVhdCxcbiAgcmFkaXVzOiBudW1iZXIsXG4gIGJvdW5jaW5nOiBudW1iZXIsXG4pID0+IHtcbiAgLy8gY29uc3QgcmFkaXVzID0gMTtcblxuICAvLyBkeW5hbWljIGZhbGxpbmcgc3BoZXJlXG4gIGNvbnN0IHBoeXNpY0JvZHkgPSBwaHlzaWNXb3JsZC5jcmVhdGVSaWdpZEJvZHkoe1xuICAgIG1hc3M6IDEsIC8vIGR5bmFtaWNcbiAgICBzaGFwZTogeyB0eXBlOiAnc3BoZXJlJywgcmFkaXVzIH0sXG4gICAgcG9zaXRpb24sXG4gICAgb3JpZW50YXRpb246IGdsbS5xdWF0LmlkZW50aXR5KGdsbS5xdWF0LmNyZWF0ZSgpKSxcbiAgfSk7XG4gIHBoeXNpY0JvZHkuc2V0RnJpY3Rpb24oMSk7IC8vIHNvIHRoZSBzcGhlcmUgZG9lc24ndCBzbGlkZSBidXQgcm9sbCBvbiBpdFxuICBwaHlzaWNCb2R5LnNldFJlc3RpdHV0aW9uKGJvdW5jaW5nKTsgLy8gYm91bmNpbmdcbiAgcGh5c2ljQm9keS5kaXNhYmxlRGVhY3RpdmF0aW9uKCk7IC8vIHNvIHRoZSBzcGhlcmUgZG9lc24ndCBldmVyIGZyZWV6ZSBpZiB0b28gc2xvd1xuXG4gIGFsbFNwaGVyZXMucHVzaCh7IHJhZGl1cywgcGh5c2ljQm9keSB9KTtcbn1cblxuXG5leHBvcnQgY2xhc3MgVGVzdFNjZW5lMyB7XG4gIGVuc3VyZVNjZW5lRGF0YShwaHlzaWNXb3JsZDogcGh5c2ljcy5QaHlzaWNXb3JsZCkge1xuXG4gICAgaWYgKGFsbEJveGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cblxuICAgIC8vIGRvd25oaWxsIG9uIFhcbiAgICBfY3JlYXRlQm94KFxuICAgICAgcGh5c2ljV29ybGQsXG4gICAgICBbLTEsLTQsMF0sXG4gICAgICBnbG0ucXVhdC5zZXRBeGlzQW5nbGUoZ2xtLnF1YXQuY3JlYXRlKCksIFswLDAsMV0sIE1hdGguUEkgKiAxLzMyKSxcbiAgICAgIFs0LDEsMl0sXG4gICAgICBbMSwgMSwgMV0sXG4gICAgICAwLjUsXG4gICAgICAwLjAsXG4gICAgICB0cnVlXG4gICAgKTtcblxuICAgIC8vIGRvd25oaWxsIG9uIFpcbiAgICBfY3JlYXRlQm94KFxuICAgICAgcGh5c2ljV29ybGQsXG4gICAgICBbLTcsLTUsMF0sXG4gICAgICBnbG0ucXVhdC5zZXRBeGlzQW5nbGUoZ2xtLnF1YXQuY3JlYXRlKCksIFsxLDAsMF0sIE1hdGguUEkgKiAxLzMyKSxcbiAgICAgIFsyLDEsMl0sXG4gICAgICBbMSwgMSwgMV0sXG4gICAgICAwLjUsXG4gICAgICAwLjAsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgICAvLyBmaXJzdCByYW1wIG9uIFlcbiAgICBfY3JlYXRlQm94KFxuICAgICAgcGh5c2ljV29ybGQsXG4gICAgICBbLTEwLC0zLjAsMl0sXG4gICAgICBnbG0ucXVhdC5zZXRBeGlzQW5nbGUoZ2xtLnF1YXQuY3JlYXRlKCksIFsxLDAsMF0sIE1hdGguUEkgKiAxLzMyKSxcbiAgICAgIFswLjI1LDAuMjUsNF0sXG4gICAgICBbMC41LCAxLCAwLjVdLFxuICAgICAgMFxuICAgICk7XG5cbiAgICAvLyBmaXJzdCB3YWxsIG9uIFlcbiAgICBfY3JlYXRlQm94KFxuICAgICAgcGh5c2ljV29ybGQsXG4gICAgICBbLTEyLC0yLDJdLFxuICAgICAgZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKGdsbS5xdWF0LmNyZWF0ZSgpLCBbMCwxLDBdLCBNYXRoLlBJICogLTEvMTYpLFxuICAgICAgWzAuNSw0LDRdLFxuICAgICAgWzAuNSwgMSwgMC41XSxcbiAgICAgIDBcbiAgICApO1xuXG5cbiAgICAvLyBkb3duaGlsbCBvbiBYICgyKVxuICAgIF9jcmVhdGVCb3goXG4gICAgICBwaHlzaWNXb3JsZCxcbiAgICAgIFstMywtNiwrNF0sXG4gICAgICBnbG0ucXVhdC5zZXRBeGlzQW5nbGUoZ2xtLnF1YXQuY3JlYXRlKCksIFswLDAsMV0sIE1hdGguUEkgKiAtMS8zMiksXG4gICAgICBbNiwxLDJdLFxuICAgICAgWzEsIDEsIDFdLFxuICAgICAgMC41LFxuICAgICAgMC4wLFxuICAgICAgdHJ1ZVxuICAgICk7XG5cbiAgICAvLyBzb21lIHJhbXAgKGFuZ2xlZClcbiAgICBfY3JlYXRlQm94KFxuICAgICAgcGh5c2ljV29ybGQsXG4gICAgICBbLTcuOCwtMy4wLDUuNV0sXG4gICAgICBnbG0ucXVhdC5zZXRBeGlzQW5nbGUoZ2xtLnF1YXQuY3JlYXRlKCksIFswLDEsMF0sIE1hdGguUEkgKiAtMC4xMjUpLFxuICAgICAgWzEuNSwwLjI1LDAuMjVdLFxuICAgICAgWzAuNSwgMSwgMC41XSxcbiAgICAgIDBcbiAgICApO1xuICAgIC8vIHNvbWUgcmFtcCAoZG93bmhpbGwpXG4gICAgX2NyZWF0ZUJveChcbiAgICAgIHBoeXNpY1dvcmxkLFxuICAgICAgWy0zLjgsLTMuNSw2LjVdLFxuICAgICAgZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKGdsbS5xdWF0LmNyZWF0ZSgpLCBbMCwwLDFdLCBNYXRoLlBJICogLTEvMzIpLFxuICAgICAgWzIuNSwwLjI1LDAuMjVdLFxuICAgICAgWzAuNSwgMSwgMC41XSxcbiAgICAgIDBcbiAgICApO1xuXG5cbiAgICAvLyBzb21lIGdyZWVuIHBpbGxhciBvbiBYICgxKVxuICAgIC8vIF9jcmVhdGVCb3goXG4gICAgLy8gICBwaHlzaWNXb3JsZCxcbiAgICAvLyAgIFstNiwtMy41LDddLFxuICAgIC8vICAgZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKGdsbS5xdWF0LmNyZWF0ZSgpLCBbMSwwLDBdLCBNYXRoLlBJICogMCksXG4gICAgLy8gICBbMC4yNSw0LDAuMjVdLFxuICAgIC8vICAgWzAuNSwgMSwgMC41XSxcbiAgICAvLyAgIDAsXG4gICAgLy8gKTtcbiAgICBfY3JlYXRlQm94MihcbiAgICAgIHBoeXNpY1dvcmxkLFxuICAgICAgWy02LC0zLjUsN10sXG4gICAgICBnbG0ucXVhdC5zZXRBeGlzQW5nbGUoZ2xtLnF1YXQuY3JlYXRlKCksIFsxLDAsMF0sIE1hdGguUEkgKiAwKSxcbiAgICAgIFswLjI1LDQsMC4yNV0sXG4gICAgICBbMC41LCAxLCAwLjVdLFxuICAgICAgMC4wLFxuICAgICAgMC4wLFxuICAgICAgZmFsc2UsXG4gICAgICB0cnVlLFxuICAgICAgdHJ1ZSxcbiAgICAgIDBcbiAgICApO1xuXG4gICAgLy8gc29tZSBncmVlbiBwaWxsYXIgb24gWCAoMilcbiAgICAvLyBfY3JlYXRlQm94KFxuICAgIC8vICAgcGh5c2ljV29ybGQsXG4gICAgLy8gICBbLTQuNSwtMy41LDddLFxuICAgIC8vICAgZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKGdsbS5xdWF0LmNyZWF0ZSgpLCBbMSwwLDBdLCBNYXRoLlBJICogMCksXG4gICAgLy8gICBbMC4yNSw0LDAuMjVdLFxuICAgIC8vICAgWzAuNSwgMSwgMC41XSxcbiAgICAvLyAgIDBcbiAgICAvLyApO1xuICAgIF9jcmVhdGVCb3gyKFxuICAgICAgcGh5c2ljV29ybGQsXG4gICAgICBbLTQuNSwtMy41LDddLFxuICAgICAgZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKGdsbS5xdWF0LmNyZWF0ZSgpLCBbMSwwLDBdLCBNYXRoLlBJICogMCksXG4gICAgICBbMC4yNSw0LDAuMjVdLFxuICAgICAgWzAuNSwgMSwgMC41XSxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIGZhbHNlLFxuICAgICAgdHJ1ZSxcbiAgICAgIHRydWUsXG4gICAgICAwXG4gICAgKTtcblxuICAgIC8vIHNvbWUgZ3JlZW4gcGlsbGFyIG9uIFggKDIpXG4gICAgLy8gX2NyZWF0ZUJveChcbiAgICAvLyAgIHBoeXNpY1dvcmxkLFxuICAgIC8vICAgWy0zLC0zLjUsN10sXG4gICAgLy8gICBnbG0ucXVhdC5zZXRBeGlzQW5nbGUoZ2xtLnF1YXQuY3JlYXRlKCksIFsxLDAsMF0sIE1hdGguUEkgKiAwKSxcbiAgICAvLyAgIFswLjI1LDQsMC4yNV0sXG4gICAgLy8gICBbMC41LCAxLCAwLjVdLFxuICAgIC8vICAgMFxuICAgIC8vICk7XG4gICAgX2NyZWF0ZUJveDIoXG4gICAgICBwaHlzaWNXb3JsZCxcbiAgICAgIFstMywtMy41LDddLFxuICAgICAgZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKGdsbS5xdWF0LmNyZWF0ZSgpLCBbMSwwLDBdLCBNYXRoLlBJICogMCksXG4gICAgICBbMC4yNSw0LDAuMjVdLFxuICAgICAgWzAuNSwgMSwgMC41XSxcbiAgICAgIDAuMCxcbiAgICAgIDAuMCxcbiAgICAgIGZhbHNlLFxuICAgICAgdHJ1ZSxcbiAgICAgIHRydWUsXG4gICAgICAwXG4gICAgKTtcblxuICAgIC8vIHNvbWUgZmxhdCBmbG9vciBmb3IgdGhlIDMgcGlsbGFycyBzaGFkb3dzXG4gICAgX2NyZWF0ZUJveChcbiAgICAgIHBoeXNpY1dvcmxkLFxuICAgICAgWy00LC02LjUsOS41XSxcbiAgICAgIGdsbS5xdWF0LnNldEF4aXNBbmdsZShnbG0ucXVhdC5jcmVhdGUoKSwgWzEsMCwwXSwgTWF0aC5QSSAqIDApLFxuICAgICAgWzUuMCwwLjI1LDRdLFxuICAgICAgWzAuNSwgMSwgMC41XSxcbiAgICAgIDBcbiAgICApO1xuXG5cbiAgICBfY3JlYXRlU3BoZXJlKFxuICAgICAgcGh5c2ljV29ybGQsXG4gICAgICBbMCwxMCwwXSxcbiAgICAgIDEuMCxcbiAgICAgIDAuN1xuICAgICk7XG5cbiAgICBfY3JlYXRlU3BoZXJlKFxuICAgICAgcGh5c2ljV29ybGQsXG4gICAgICBbLTIsMTAsMF0sXG4gICAgICAxLjUsXG4gICAgICAwLjBcbiAgICApO1xuXG4gICAgLy8gX2NyZWF0ZUJveDIoXG4gICAgLy8gICBwaHlzaWNXb3JsZCxcbiAgICAvLyAgIFstNCwxMCwwXSxcbiAgICAvLyAgIGdsbS5xdWF0LnNldEF4aXNBbmdsZShnbG0ucXVhdC5jcmVhdGUoKSwgWzEsMSwxXSwgTWF0aC5QSSAqIDAuMjUpLFxuICAgIC8vICAgWzEsMSwxXSxcbiAgICAvLyAgIFsxLCAwLCAwXSxcbiAgICAvLyAgIDAuMCxcbiAgICAvLyAgIDAuNSxcbiAgICAvLyAgIGZhbHNlLFxuICAgIC8vICAgdHJ1ZSxcbiAgICAvLyAgIGZhbHNlXG4gICAgLy8gKTtcbiAgICBfY3JlYXRlQm94MihcbiAgICAgIHBoeXNpY1dvcmxkLFxuICAgICAgWy00LDEwLDBdLFxuICAgICAgZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKGdsbS5xdWF0LmNyZWF0ZSgpLCBbMSwxLDFdLCBNYXRoLlBJICogMC4yNSksXG4gICAgICBbMSwxLDFdLFxuICAgICAgWzEsIDAsIDBdLFxuICAgICAgMC41LFxuICAgICAgMC4wLFxuICAgICAgZmFsc2UsXG4gICAgICB0cnVlLFxuICAgICAgdHJ1ZVxuICAgICk7XG5cblxuXG4gIH1cblxuICBydW4oZGVsdGFUaW1lOiBudW1iZXIsIHJlbmRlcmVyOiBSZW5kZXJlciwgcGh5c2ljV29ybGQ6IHBoeXNpY3MuUGh5c2ljV29ybGQpIHtcblxuICAgIHRoaXMuZW5zdXJlU2NlbmVEYXRhKHBoeXNpY1dvcmxkKTtcblxuICAgIHBoeXNpY1dvcmxkLnN0ZXBTaW11bGF0aW9uKGRlbHRhVGltZSwgMCwgZGVsdGFUaW1lKTtcblxuICAgIGNvbnRpbnVvdXNUaW1lICs9IGRlbHRhVGltZTtcblxuICAgIHtcblxuICAgICAgeyAvLyBjZW50ZXIgdGhlIGxpZ2h0XG5cbiAgICAgICAgLy8gY29uc3QgYWxsUG9zOiBnbG0udmVjM1tdID0gW107XG4gICAgICAgIC8vIGFsbFNwaGVyZXMuZm9yRWFjaCgoc3BoZXJlKSA9PiB7XG4gICAgICAgIC8vICAgYWxsUG9zLnB1c2goc3BoZXJlLnBoeXNpY0JvZHkuZ2V0UG9zaXRpb24oKSk7XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyBhbGxCb3hlcy5mb3JFYWNoKChib3gpID0+IHtcbiAgICAgICAgLy8gICBhbGxQb3MucHVzaChib3gucGh5c2ljQm9keS5nZXRQb3NpdGlvbigpKTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgLy8gaWYgKGFsbFBvcy5sZW5ndGggPiAwKSB7XG5cbiAgICAgICAgLy8gICBjb25zdCB0YXJnZXRQb3MgPSBnbG0udmVjMy5jcmVhdGUoKTtcbiAgICAgICAgLy8gICB0YXJnZXRQb3NbMF0gPSAwO1xuICAgICAgICAvLyAgIHRhcmdldFBvc1sxXSA9IDA7XG4gICAgICAgIC8vICAgdGFyZ2V0UG9zWzJdID0gMDtcblxuICAgICAgICAvLyAgIGFsbFBvcy5mb3JFYWNoKChwb3MpID0+IHtcbiAgICAgICAgLy8gICAgIGdsbS52ZWMzLmFkZCh0YXJnZXRQb3MsIHRhcmdldFBvcywgcG9zKTtcbiAgICAgICAgLy8gICB9KTtcbiAgICAgICAgLy8gICB0YXJnZXRQb3NbMF0gLz0gYWxsUG9zLmxlbmd0aDtcbiAgICAgICAgLy8gICB0YXJnZXRQb3NbMV0gLz0gYWxsUG9zLmxlbmd0aDtcbiAgICAgICAgLy8gICB0YXJnZXRQb3NbMl0gLz0gYWxsUG9zLmxlbmd0aDtcblxuICAgICAgICAvLyAgIC8vIG9mZnNldCB0aGUgbGlnaHRcbiAgICAgICAgLy8gICB0YXJnZXRQb3NbMF0gKz0gMjtcbiAgICAgICAgLy8gICB0YXJnZXRQb3NbMV0gKz0gNTtcblxuICAgICAgICAvLyAgIGdsbS52ZWMzLmxlcnAoZ19saWdodFBvcywgZ19saWdodFBvcywgdGFyZ2V0UG9zLCAwLjAzKTtcbiAgICAgICAgLy8gfVxuXG5cbiAgICAgICAgLy8gY29uc3QgYW5nbGUgPSBzeXN0ZW0ubWF0aC5lYXNpbmcuZWFzZVBpblBvbmcoc3lzdGVtLm1hdGguZWFzaW5nLmVhc2VDbGFtcChjb250aW51b3VzVGltZSAqIDAuNSkpICogTWF0aC5QSSAqIDI7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gc3lzdGVtLm1hdGguZWFzaW5nLmVhc2VDbGFtcChjb250aW51b3VzVGltZSAqIDAuMjUpICogTWF0aC5QSSAqIDI7XG5cbiAgICAgICAgZ19saWdodFBvc1swXSA9IC00ICsgTWF0aC5jb3MoYW5nbGUpICogMjtcbiAgICAgICAgZ19saWdodFBvc1sxXSA9IDIgLSBNYXRoLnNpbihhbmdsZSkgKiAxO1xuICAgICAgICBnX2xpZ2h0UG9zWzJdID0gKzIgKyBNYXRoLnNpbihhbmdsZSkgKiAyO1xuXG4gICAgICAgIGdfcmVmcmFjdGl2ZVBvc1swXSA9IC00ICsgTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJKSAqIDI7XG4gICAgICAgIGdfcmVmcmFjdGl2ZVBvc1sxXSA9IDIgLSBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkpICogMTtcbiAgICAgICAgZ19yZWZyYWN0aXZlUG9zWzJdID0gKzIgKyBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkpICogMjtcblxuXG5cbiAgICAgIH0gLy8gY2VudGVyIHRoZSBsaWdodFxuXG4gICAgICBhbGxCb3hlcy5mb3JFYWNoKChib3gsIGluZGV4KSA9PiB7XG5cbiAgICAgICAgY29uc3QgcG9zID0gYm94LnBoeXNpY0JvZHkuZ2V0UG9zaXRpb24oKTtcblxuICAgICAgICAvLyByZXNldCB0aGUgYm94ZXNcbiAgICAgICAgaWYgKHBvc1sxXSA8IC0xMikge1xuICAgICAgICAgIGJveC5waHlzaWNCb2R5LnNldExpbmVhclZlbG9jaXR5KDAsMCwwKTtcbiAgICAgICAgICBib3gucGh5c2ljQm9keS5zZXRBbmd1bGFyVmVsb2NpdHkoMCwwLDApO1xuXG4gICAgICAgICAgYm94LnBoeXNpY0JvZHkuc2V0UG9zaXRpb24oMCwgMTAsIDApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYWxsU3BoZXJlcy5mb3JFYWNoKChzcGhlcmUsIGluZGV4KSA9PiB7XG5cbiAgICAgICAgY29uc3QgcG9zID0gc3BoZXJlLnBoeXNpY0JvZHkuZ2V0UG9zaXRpb24oKTtcblxuICAgICAgICAvLyByZXNldCB0aGUgc3BoZXJlc1xuICAgICAgICBpZiAocG9zWzFdIDwgLTEyKSB7XG4gICAgICAgICAgc3BoZXJlLnBoeXNpY0JvZHkuc2V0TGluZWFyVmVsb2NpdHkoMCwwLDApO1xuICAgICAgICAgIHNwaGVyZS5waHlzaWNCb2R5LnNldEFuZ3VsYXJWZWxvY2l0eSgwLDAsMCk7XG5cbiAgICAgICAgICBzcGhlcmUucGh5c2ljQm9keS5zZXRQb3NpdGlvbigwLCAxMCwgMCk7XG4gICAgICAgIH1cblxuICAgICAgfSk7XG5cbiAgICAgIHtcblxuICAgICAgICAvLyBncmFwaGljYWwgcHJlc2VudGF0aW9uIG9mIHRoZSBzcG90IGxpZ2h0c1xuICAgICAgICByZW5kZXJlci5yYXlUcmFjZXJSZW5kZXJlci5wdXNoU3BoZXJlKHtcbiAgICAgICAgICBwb3NpdGlvbjogZ19saWdodFBvcyxcbiAgICAgICAgICBvcmllbnRhdGlvbjogZ2xtLnF1YXQuaWRlbnRpdHkoZ2xtLnF1YXQuY3JlYXRlKCkpLFxuICAgICAgICAgIHJhZGl1czogMC4xMjUsXG4gICAgICAgICAgY29sb3I6IFsxLCAxLCAwXSxcbiAgICAgICAgICByZWZsZWN0aW9uRmFjdG9yOiAwLFxuICAgICAgICAgIHJlZnJhY3Rpb25GYWN0b3I6IDAsXG4gICAgICAgICAgY2hlc3Nib2FyZEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgIHJlY2VpdmVMaWdodEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgIGNhc3RTaGFkb3dFbmFibGVkOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhY3R1YWwgc3BvdCBsaWdodHNcbiAgICAgICAgcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucHVzaFNwb3RMaWdodCh7XG4gICAgICAgICAgcG9zaXRpb246IGdfbGlnaHRQb3MsXG4gICAgICAgICAgaW50ZW5zaXR5OiAxLFxuICAgICAgICAgIHJhZGl1czogMTVcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHtcblxuICAgICAgICAvLyAvLyBncmFwaGljYWwgcHJlc2VudGF0aW9uIG9mIHRoZSBzcG90IGxpZ2h0c1xuICAgICAgICAvLyByZW5kZXJlci5yYXlUcmFjZXJSZW5kZXJlci5wdXNoU3BoZXJlKHtcbiAgICAgICAgLy8gICBwb3NpdGlvbjogZ19yZWZyYWN0aXZlUG9zLFxuICAgICAgICAvLyAgIG9yaWVudGF0aW9uOiBnbG0ucXVhdC5pZGVudGl0eShnbG0ucXVhdC5jcmVhdGUoKSksXG4gICAgICAgIC8vICAgcmFkaXVzOiAxLjAsXG4gICAgICAgIC8vICAgY29sb3I6IFsxLCAxLCAxXSxcbiAgICAgICAgLy8gICByZWZsZWN0aW9uRmFjdG9yOiAwLjAsXG4gICAgICAgIC8vICAgcmVmcmFjdGlvbkZhY3RvcjogMS4wLFxuICAgICAgICAvLyAgIGNoZXNzYm9hcmRFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgLy8gICByZWNlaXZlTGlnaHRFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgLy8gICBjYXN0U2hhZG93RW5hYmxlZDogZmFsc2VcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgIH1cblxuICAgIH1cblxuICAgIHtcbiAgICAgIC8vIHB1c2ggc2NlbmVcblxuXG4gICAgICAvLyByZW5kZXJlci5yYXlUcmFjZXJSZW5kZXJlci5wdXNoU3VuTGlnaHQoe1xuICAgICAgLy8gICBkaXJlY3Rpb246IFsxLjAsIDEuMCwgMS4wXSxcbiAgICAgIC8vICAgaW50ZW5zaXR5OiAwLjVcbiAgICAgIC8vIH0pO1xuXG4gICAgICBhbGxCb3hlcy5mb3JFYWNoKChjdXJyQm94KSA9PiB7XG5cbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBjdXJyQm94LnBoeXNpY0JvZHkuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSBjdXJyQm94LnBoeXNpY0JvZHkuZ2V0Um90YXRpb24oKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZygncG9zaXRpb24nLCBwb3NpdGlvbik7XG5cbiAgICAgICAgLy8gZmxvb3JcbiAgICAgICAgcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucHVzaEJveCh7XG4gICAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICAgIG9yaWVudGF0aW9uOiByb3RhdGlvbixcbiAgICAgICAgICBib3hTaXplOiBjdXJyQm94LmJveFNpemUsXG4gICAgICAgICAgY29sb3I6IGN1cnJCb3guY29sb3IsXG4gICAgICAgICAgcmVmcmFjdGlvbkZhY3RvcjogY3VyckJveC5yZWZyYWN0aW9uRmFjdG9yLFxuICAgICAgICAgIHJlZmxlY3Rpb25GYWN0b3I6IGN1cnJCb3gucmVmbGVjdGlvbkZhY3RvcixcbiAgICAgICAgICBjaGVzc2JvYXJkRW5hYmxlZDogY3VyckJveC5jaGVzc2JvYXJkTWF0ZXJpYWwsXG4gICAgICAgICAgcmVjZWl2ZUxpZ2h0RW5hYmxlZDogY3VyckJveC5yZWNlaXZlTGlnaHRFbmFibGVkLFxuICAgICAgICAgIGNhc3RTaGFkb3dFbmFibGVkOiBjdXJyQm94LmNhc3RTaGFkb3dFbmFibGVkXG4gICAgICAgIH0pO1xuXG4gICAgICB9KTtcblxuICAgICAgYWxsU3BoZXJlcy5mb3JFYWNoKChjdXJyU3BoZXJlLCBpbmRleCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gY3VyclNwaGVyZS5waHlzaWNCb2R5LmdldFBvc2l0aW9uKCk7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gY3VyclNwaGVyZS5waHlzaWNCb2R5LmdldFJvdGF0aW9uKCk7XG5cbiAgICAgICAgaWYgKChpbmRleCAlIDIpID09PSAwKSB7XG5cbiAgICAgICAgICAvLyBzcGhlcmUgd2l0aCB0cmFuc3BhcmVudCBjaGVzc2JvYXJkIG1hdGVyaWFsXG4gICAgICAgICAgcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucHVzaFNwaGVyZSh7XG4gICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogcm90YXRpb24sXG4gICAgICAgICAgICByYWRpdXM6IDEuMCxcbiAgICAgICAgICAgIGNvbG9yOiBbMSwgMSwgMV0sXG4gICAgICAgICAgICByZWZsZWN0aW9uRmFjdG9yOiAwLjAsXG4gICAgICAgICAgICByZWZyYWN0aW9uRmFjdG9yOiAwLjAsXG4gICAgICAgICAgICBjaGVzc2JvYXJkRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIHJlY2VpdmVMaWdodEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgY2FzdFNoYWRvd0VuYWJsZWQ6IHRydWVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIGFjdHVhbCBzcG90IGxpZ2h0IGluc2lkZSB0aGUgc3BoZXJlXG4gICAgICAgICAgcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucHVzaFNwb3RMaWdodCh7XG4gICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgICAgICBpbnRlbnNpdHk6IDAuMSArIDQuOSAqIHN5c3RlbS5tYXRoLmVhc2luZy5lYXNlUGluUG9uZyhzeXN0ZW0ubWF0aC5lYXNpbmcuZWFzZUNsYW1wKGNvbnRpbnVvdXNUaW1lICogMC41KSksXG4gICAgICAgICAgICByYWRpdXM6IDEwXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIC8vIHJlZnJhY3RpdmUgKGFuZCByZWZsZWN0aXZlKSBzcGhlcmVcbiAgICAgICAgICByZW5kZXJlci5yYXlUcmFjZXJSZW5kZXJlci5wdXNoU3BoZXJlKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiByb3RhdGlvbixcbiAgICAgICAgICAgIHJhZGl1czogMS41LFxuICAgICAgICAgICAgY29sb3I6IFsxLCAxLCAxXSxcbiAgICAgICAgICAgIHJlZmxlY3Rpb25GYWN0b3I6IDAuMyxcbiAgICAgICAgICAgIHJlZnJhY3Rpb25GYWN0b3I6IDAuNSxcbiAgICAgICAgICAgIGNoZXNzYm9hcmRFbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgcmVjZWl2ZUxpZ2h0RW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICBjYXN0U2hhZG93RW5hYmxlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgfSk7XG5cblxuXG4gICAgICAvLyBiYWNrZ3JvdW5kIHJlZmxlY3RpdmUgYmx1ZSBzcGhlcmVcbiAgICAgIHJlbmRlcmVyLnJheVRyYWNlclJlbmRlcmVyLnB1c2hTcGhlcmUoe1xuICAgICAgICBwb3NpdGlvbjogWy01LCAwLCAtN10sXG4gICAgICAgIG9yaWVudGF0aW9uOiBnbG0ucXVhdC5pZGVudGl0eShnbG0ucXVhdC5jcmVhdGUoKSksXG4gICAgICAgIHJhZGl1czogNSxcbiAgICAgICAgY29sb3I6IFswLCAwLCAxXSxcbiAgICAgICAgcmVmbGVjdGlvbkZhY3RvcjogMC44LFxuICAgICAgICByZWZyYWN0aW9uRmFjdG9yOiAwLjAsXG4gICAgICAgIGNoZXNzYm9hcmRFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgcmVjZWl2ZUxpZ2h0RW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgY2FzdFNoYWRvd0VuYWJsZWQ6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICAvLyAvLyByZWZyYWN0aXZlIGJsdWUgYm94XG4gICAgICAvLyByZW5kZXJlci5yYXlUcmFjZXJSZW5kZXJlci5wdXNoQm94KHtcbiAgICAgIC8vICAgcG9zaXRpb246IFstNSwgMiwgKzddLFxuICAgICAgLy8gICAvLyBvcmllbnRhdGlvbjogZ2xtLnF1YXQuaWRlbnRpdHkoZ2xtLnF1YXQuY3JlYXRlKCkpLFxuICAgICAgLy8gICBvcmllbnRhdGlvbjogZ2xtLnF1YXQuc2V0QXhpc0FuZ2xlKGdsbS5xdWF0LmNyZWF0ZSgpLCBbMSwwLDBdLCBNYXRoLlBJICogMC4yNSksXG4gICAgICAvLyAgIGJveFNpemU6IFsxLDEsMV0sXG4gICAgICAvLyAgIGNvbG9yOiBbMSwxLDFdLFxuICAgICAgLy8gICByZWZsZWN0aW9uRmFjdG9yOiAwLjMsXG4gICAgICAvLyAgIHJlZnJhY3Rpb25GYWN0b3I6IDAuNixcbiAgICAgIC8vICAgY2hlc3Nib2FyZEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgLy8gICByZWNlaXZlTGlnaHRFbmFibGVkOiB0cnVlLFxuICAgICAgLy8gICBjYXN0U2hhZG93RW5hYmxlZDogdHJ1ZVxuICAgICAgLy8gfSk7XG5cbiAgICB9IC8vIHB1c2ggc2NlbmVcbiAgfVxufVxuIiwKICAiaW1wb3J0IHsgc3lzdGVtLCBncmFwaGljcyB9IGZyb20gJ0Bsb2NhbC1mcmFtZXdvcmsnO1xuY29uc3Qge1xuICBHbG9iYWxNb3VzZU1hbmFnZXIsXG4gIEdsb2JhbEtleWJvYXJkTWFuYWdlcixcbiAgR2xvYmFsVG91Y2hNYW5hZ2VyLFxuICBHbG9iYWxWaXNpYmlsaXR5TWFuYWdlcixcbiAgR2xvYmFsUG9pbnRlckxvY2tNYW5hZ2VyXG59ID0gc3lzdGVtLmJyb3dzZXI7XG5jb25zdCB7IFdlYkdMQ29udGV4dCB9ID0gZ3JhcGhpY3Mud2ViZ2wyO1xuY29uc3QgeyBGcmVlRmx5Q29udHJvbGxlciB9ID0gc3lzdGVtLmNvbnRyb2xsZXJzO1xuXG5pbXBvcnQgeyBCcm93c2VyRnJhbmtlblBoeXNXYXNtTW9kdWxlLCBwaHlzaWNzIH0gZnJvbSAnRnJhbmtlblBoeXMnO1xuXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL3V0aWxpdGllcy9Mb2dnZXInO1xuXG5pbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gJy4vZ3JhcGhpY3MvUmVuZGVyZXInO1xuaW1wb3J0ICogYXMgc2NlbmVzIGZyb20gJy4vc2NlbmVzL2ludGV4JztcblxuaW1wb3J0ICogYXMgZ2xtIGZyb20gJ2dsLW1hdHJpeCc7XG5cbi8vIGNvbnN0IGZyYW1lcmF0ZSA9IC0xOyAvLyBpZiBuZWdhdGl2ZSAtPiB1c2UgdnN5bmMgKGdwdSBleHBlbnNpdmUpXG5jb25zdCBmcmFtZXJhdGUgPSA2MDsgLy8gaWYgbmVnYXRpdmUgLT4gdXNlIHZzeW5jIChncHUgZXhwZW5zaXZlKVxuXG5jb25zdCBfY2xhbXAgPSAoaW5WYWx1ZTogbnVtYmVyLCBpbk1pbjogbnVtYmVyLCBpbk1heDogbnVtYmVyKSA9PlxuICBNYXRoLm1pbihNYXRoLm1heChpblZhbHVlLCBpbk1pbiksIGluTWF4KTtcblxuaW50ZXJmYWNlIEV4cGVyaW1lbnREZWYge1xuICBjYW52YXNFbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgbG9nZ2VyOiBMb2dnZXI7XG4gIHBlcmZBdXRvU2NhbGluZzogSFRNTElucHV0RWxlbWVudDtcbiAgcmVzb2x1dGlvbjogSFRNTElucHV0RWxlbWVudDtcbiAgYW50aV9hbGlhc2luZ19lbmFibGVkOiBIVE1MSW5wdXRFbGVtZW50O1xuICBkZWJ1Z19tb2RlX2VuYWJsZWQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG59XG5cbmNvbnN0IGtfbWF4RnJhbWVzVW50aWxOZXh0Q2hlY2sgPSAzO1xuXG5leHBvcnQgY2xhc3MgRXhwZXJpbWVudCB7XG4gIHByaXZhdGUgX2NhbnZhc0VsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIF9hbmltYXRpb25GcmFtZUhhbmRsZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfZGVmOiBPbWl0PEV4cGVyaW1lbnREZWYsICdjYW52YXNFbGVtZW50Jz47XG5cbiAgcHJpdmF0ZSBfZnJlZUZseUNvbnRyb2xsZXI6IHN5c3RlbS5jb250cm9sbGVycy5GcmVlRmx5Q29udHJvbGxlcjtcblxuICBwcml2YXRlIF9yZW5kZXJlcjogUmVuZGVyZXI7XG5cbiAgcHJpdmF0ZSBfcGh5c2ljV29ybGQ6IHBoeXNpY3MuUGh5c2ljV29ybGQgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBfcnVubmluZzogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfZXJyb3JHcmFwaGljQ29udGV4dDogYm9vbGVhbjtcblxuICBwcml2YXRlIF9sYXN0RnJhbWVUaW1lOiBudW1iZXIgPSBEYXRlLm5vdygpO1xuICBwcml2YXRlIF9jdXJyRnJhbWVNc2VjVGltZTogbnVtYmVyID0gRGF0ZS5ub3coKTtcbiAgcHJpdmF0ZSBfZnJhbWVQcm9maWxlciA9IG5ldyBzeXN0ZW0ubWV0cmljcy5GcmFtZVByb2ZpbGVyKCk7XG5cbiAgLy8gcHJpdmF0ZSBfY29udGludW91c1NlY1RpbWUgPSAwO1xuXG4gIHByaXZhdGUgX3BlcmZBdXRvU2NhbGluZ0VuYWJsZWQgPSB0cnVlO1xuICBwcml2YXRlIF9mcmFtZXNVbnRpbE5leHRDaGVjayA9IGtfbWF4RnJhbWVzVW50aWxOZXh0Q2hlY2s7XG5cbiAgLy8gcHJpdmF0ZSBfc2NlbmUgPSBuZXcgc2NlbmVzLlRlc3RTY2VuZTEoKTtcbiAgLy8gcHJpdmF0ZSBfc2NlbmUgPSBuZXcgc2NlbmVzLlRlc3RTY2VuZTIoKTtcbiAgcHJpdmF0ZSBfc2NlbmUgPSBuZXcgc2NlbmVzLlRlc3RTY2VuZTMoKTtcblxuICBjb25zdHJ1Y3RvcihpbkRlZjogRXhwZXJpbWVudERlZikge1xuICAgIHRoaXMuX2NhbnZhc0VsZW1lbnQgPSBpbkRlZi5jYW52YXNFbGVtZW50O1xuICAgIHRoaXMuX2RlZiA9IGluRGVmO1xuXG4gICAgdGhpcy5fZnJlZUZseUNvbnRyb2xsZXIgPSBuZXcgRnJlZUZseUNvbnRyb2xsZXIoe1xuICAgICAgY29vcmRpbmF0ZXM6IFsnWicsICdYJywgJ1knXSxcbiAgICAgIHBvc2l0aW9uOiBbLTUsIDUsIDEwXSxcbiAgICAgIHRoZXRhOiBNYXRoLlBJICogMS4wNSxcbiAgICAgIHBoaTogLU1hdGguUEkgKiAwLjI1LFxuICAgICAgbW91c2VTZW5zaWJpbGl0eTogNixcbiAgICAgIGtleWJvYXJkU2Vuc2liaWxpdHk6IE1hdGguUEkgKiAwLjU1LFxuICAgICAgdG91Y2hTZW5zaWJpbGl0eTogOCxcbiAgICAgIG1vdmluZ1NwZWVkOiAxNlxuICAgIH0pO1xuXG4gICAgLy9cbiAgICAvL1xuXG4gICAge1xuICAgICAgR2xvYmFsS2V5Ym9hcmRNYW5hZ2VyLmFjdGl2YXRlKCk7XG4gICAgICBHbG9iYWxUb3VjaE1hbmFnZXIuYWN0aXZhdGUodGhpcy5fY2FudmFzRWxlbWVudCk7XG5cbiAgICAgIEdsb2JhbFZpc2liaWxpdHlNYW5hZ2VyLmFjdGl2YXRlKCk7XG4gICAgICBHbG9iYWxWaXNpYmlsaXR5TWFuYWdlci5hZGRWaXNpYmlsaXR5Q2hhbmdlKChpc1Zpc2libGUpID0+IHtcbiAgICAgICAgaWYgKGlzVmlzaWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLl9kZWYubG9nZ2VyLmxvZygnZG9jdW1lbnQgdmlzaWJpbGl0eSBjaGFuZ2VkOiBoaWRkZW4nKTtcbiAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9kZWYubG9nZ2VyLmxvZygnZG9jdW1lbnQgdmlzaWJpbGl0eSBjaGFuZ2VkOiB2aXNpYmxlJyk7XG4gICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgR2xvYmFsUG9pbnRlckxvY2tNYW5hZ2VyLmFsbG93UG9pbnRlckxvY2tlZE9uQ2xpY2tFdmVudChcbiAgICAgICAgdGhpcy5fY2FudmFzRWxlbWVudFxuICAgICAgKTtcbiAgICAgIEdsb2JhbFBvaW50ZXJMb2NrTWFuYWdlci5hZGRPbkxvY2tDaGFuZ2UoKCkgPT4ge1xuICAgICAgICBjb25zdCBpc0xvY2tlZCA9IEdsb2JhbFBvaW50ZXJMb2NrTWFuYWdlci5pc1BvaW50ZXJMb2NrZWQoXG4gICAgICAgICAgdGhpcy5fY2FudmFzRWxlbWVudFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChpc0xvY2tlZCkge1xuICAgICAgICAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKCdUaGUgcG9pbnRlciBsb2NrIHN0YXR1cyBpcyBub3cgbG9ja2VkJyk7XG5cbiAgICAgICAgICBHbG9iYWxNb3VzZU1hbmFnZXIuYWN0aXZhdGUodGhpcy5fY2FudmFzRWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZGVmLmxvZ2dlci5sb2coJ1RoZSBwb2ludGVyIGxvY2sgc3RhdHVzIGlzIG5vdyB1bmxvY2tlZCcpO1xuXG4gICAgICAgICAgR2xvYmFsTW91c2VNYW5hZ2VyLmRlYWN0aXZhdGUodGhpcy5fY2FudmFzRWxlbWVudCk7XG5cbiAgICAgICAgICBHbG9iYWxQb2ludGVyTG9ja01hbmFnZXIuYWxsb3dQb2ludGVyTG9ja2VkT25DbGlja0V2ZW50KFxuICAgICAgICAgICAgdGhpcy5fY2FudmFzRWxlbWVudFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBHbG9iYWxQb2ludGVyTG9ja01hbmFnZXIuYWRkT25Mb2NrRXJyb3IoKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKFxuICAgICAgICAgIGBUaGUgcG9pbnRlciBsb2NrIHNlbnQgYW4gZXJyb3IsIGV2ZW50OiBcIiR7SlNPTi5zdHJpbmdpZnkoZXZlbnQpfVwiYFxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHsgY2FudmFzRG9tRWxlbWVudDogdGhpcy5fY2FudmFzRWxlbWVudCB9KTtcbiAgICAgIHRoaXMuX3JlbmRlcmVyLmluaXRpYWxpemUoKTtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cblxuICAgIHRoaXMuX3J1bm5pbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9lcnJvckdyYXBoaWNDb250ZXh0ID0gZmFsc2U7XG5cbiAgICAvLyB0aGlzLl9yZW5kZXJlci5zZXRPbkNvbnRleHRMb3N0KCgpID0+IHtcbiAgICAvLyAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKCdvbl9jb250ZXh0X2xvc3QnKTtcblxuICAgIC8vICAgdGhpcy5fZXJyb3JHcmFwaGljQ29udGV4dCA9IHRydWU7XG4gICAgLy8gICB0aGlzLnN0b3AoKTtcbiAgICAvLyB9KTtcblxuICAgIC8vIHRoaXMuX3JlbmRlcmVyLnNldE9uQ29udGV4dFJlc3RvcmVkKCgpID0+IHtcbiAgICAvLyAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKCdvbl9jb250ZXh0X3Jlc3RvcmVkJyk7XG5cbiAgICAvLyAgIHRoaXMuX2Vycm9yR3JhcGhpY0NvbnRleHQgPSBmYWxzZTtcbiAgICAvLyAgIHRoaXMuc3RhcnQoKTtcbiAgICAvLyB9KTtcblxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuXG4gICAgdGhpcy5fZGVmLnJlc29sdXRpb24uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5fZGVmLnJlc29sdXRpb24udmFsdWUgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgICB0aGlzLl9zZXRSZXNvbHV0aW9uKG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuX2xvZ1Jlc29sdXRpb24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2RlZi5hbnRpX2FsaWFzaW5nX2VuYWJsZWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuX2RlZi5hbnRpX2FsaWFzaW5nX2VuYWJsZWQuY2hlY2tlZCA9PT0gdHJ1ZTtcblxuICAgICAgdGhpcy5fcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIuc2V0QW50aUFsaWFzaW5nKG5ld1ZhbHVlKTtcblxuICAgICAgdGhpcy5fZGVmLmxvZ2dlci5sb2coXG4gICAgICAgIGBBbnRpIGFsaWFzaW5nIGNoYW5nZTogJHtuZXdWYWx1ZSA9PT0gdHJ1ZSA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9YFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldFJlc29sdXRpb24odGhpcy5fZGVmLnJlc29sdXRpb24udmFsdWUgYXMgdW5rbm93biBhcyBudW1iZXIpO1xuXG4gICAgLy8gcGVyZm9ybWFuY2UgYXV0by1zY2FsaW5nXG4gICAgdGhpcy5fZGVmLnBlcmZBdXRvU2NhbGluZy5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgIHRoaXMuX2ZyYW1lc1VudGlsTmV4dENoZWNrID0ga19tYXhGcmFtZXNVbnRpbE5leHRDaGVjaztcblxuICAgICAgdGhpcy5fcGVyZkF1dG9TY2FsaW5nRW5hYmxlZCA9IHRoaXMuX2RlZi5wZXJmQXV0b1NjYWxpbmcuY2hlY2tlZCA9PT0gdHJ1ZTtcblxuICAgICAgdGhpcy5fZGVmLmxvZ2dlci5sb2coXG4gICAgICAgIGBQZXJmb3JtYW5jZSBhdXRvIHNjYWxlciBjaGFuZ2U6ICR7XG4gICAgICAgICAgdGhpcy5fcGVyZkF1dG9TY2FsaW5nRW5hYmxlZCA9PT0gdHJ1ZSA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCdcbiAgICAgICAgfWBcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBpbml0KCkge1xuICAgIGF3YWl0IHRoaXMuX3JlbmRlcmVyLmluaXRpYWxpemUoKTtcblxuICAgIC8vXG4gICAgLy9cbiAgICAvLyBwaHlzaWMgZW5naW5lIGluaXRpYWxpemVcblxuICAgIC8vIGxvYWQgdGhlIHdhc20gc2lkZVxuICAgIGF3YWl0IEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUubG9hZCh7XG4gICAgICBqc1VybDogXCIuL2Rpc3Qvd2FzbS9GcmFua2VuUGh5cy4wLjAuMS5qc1wiLFxuICAgICAgd2FzbVVybDogXCIuL2Rpc3Qvd2FzbVwiLFxuICAgIH0pO1xuXG4gICAgLy8gc2V0IHRoZSB3YXNtIHNpZGVcbiAgICBwaHlzaWNzLldhc21Nb2R1bGVIb2xkZXIuc2V0KEJyb3dzZXJGcmFua2VuUGh5c1dhc21Nb2R1bGUuZ2V0KCkpO1xuXG4gICAgLy8gcmVhZHlcblxuICAgIHRoaXMuX3BoeXNpY1dvcmxkID0gbmV3IHBoeXNpY3MuUGh5c2ljV29ybGQoKTtcbiAgICB0aGlzLl9waHlzaWNXb3JsZC5zZXRHcmF2aXR5KDAsLTEwLDApO1xuXG4gICAgLy8gLy8gZHluYW1pYyBmYWxsaW5nIHNwaGVyZVxuICAgIC8vIGNvbnN0IGZhbGxpbmdTcGhlcmVCb2R5ID0gdGhpcy5fcGh5c2ljV29ybGQuY3JlYXRlUmlnaWRCb2R5KHtcbiAgICAvLyAgIG1hc3M6IDEsIC8vIGR5bmFtaWNcbiAgICAvLyAgIHNoYXBlOiB7IHR5cGU6ICdzcGhlcmUnLCByYWRpdXM6IDEgfSxcbiAgICAvLyB9KTtcbiAgICAvLyBmYWxsaW5nU3BoZXJlQm9keS5zZXRQb3NpdGlvbigwLCAwLCAxMCk7XG4gICAgLy8gZmFsbGluZ1NwaGVyZUJvZHkuc2V0RnJpY3Rpb24oMSk7IC8vIGp1c3QgdG8gc2hvdyBpdCdzIGF2YWlsYWJsZVxuICAgIC8vIGZhbGxpbmdTcGhlcmVCb2R5LmRpc2FibGVEZWFjdGl2YXRpb24oKTsgLy8ganVzdCB0byBzaG93IGl0J3MgYXZhaWxhYmxlXG5cbiAgICAvLyAvLyBncm91bmQgYm94IGJvZHkgdGhhdCB0aGUgZmFsbGluZyBzcGhlcmUgd2lsbCBjb2xsaWRlIHdpdGhcbiAgICAvLyBjb25zdCBncm91bmRCb3hCb2R5ID0gdGhpcy5fcGh5c2ljV29ybGQuY3JlYXRlUmlnaWRCb2R5KHtcbiAgICAvLyAgIG1hc3M6IDAsIC8vIHN0YXRpY1xuICAgIC8vICAgc2hhcGU6IHsgdHlwZTogJ2JveCcsIHNpemU6IFsyLDIsMl0gfSxcbiAgICAvLyB9KTtcbiAgICAvLyBncm91bmRCb3hCb2R5LnNldFBvc2l0aW9uKDAsIDAsIC0xKTtcbiAgICAvLyBncm91bmRCb3hCb2R5LnNldEZyaWN0aW9uKDEpOyAvLyBqdXN0IHRvIHNob3cgaXQncyBhdmFpbGFibGVcblxuICAgIC8vIC8vIHJ1biBmb3IgMTAwIGl0ZXJhdGlvbnNcbiAgICAvLyBmb3IgKGxldCBpaSA9IDA7IGlpIDwgMTAwOyArK2lpKSB7XG5cbiAgICAvLyAgIGNvbnN0IGZyYW1lUmF0ZSA9IDEvNjA7XG4gICAgLy8gICBjb25zdCBzdWJTdGVwcyA9IDA7XG4gICAgLy8gICB0aGlzLl9waHlzaWNXb3JsZC5zdGVwU2ltdWxhdGlvbihmcmFtZVJhdGUsIHN1YlN0ZXBzLCBmcmFtZVJhdGUpO1xuXG4gICAgLy8gICAvLyBwcmludCBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBmYWxsaW5nIHNwaGVyZVxuICAgIC8vICAgY29uc3QgcHJldHR5UG9zID0gWy4uLmZhbGxpbmdTcGhlcmVCb2R5LmdldFBvc2l0aW9uKCldLm1hcCh2YWwgPT4gdmFsLnRvRml4ZWQoMikpO1xuICAgIC8vICAgLy8gY29uc29sZS5sb2cocHJldHR5UG9zLCAndG90YWwgY29sbGlzaW9uOicsIGFsbENvbnRhY3RJZHMuc2l6ZSk7XG4gICAgLy8gICBjb25zb2xlLmxvZyhwcmV0dHlQb3MpO1xuICAgIC8vIH1cblxuICAgIC8vIHBoeXNpYyBlbmdpbmUgaW5pdGlhbGl6ZVxuICAgIC8vXG4gICAgLy9cblxuICB9XG5cbiAgcmVzaXplKGluV2lkdGg6IG51bWJlciwgaW5IZWlnaHQ6IG51bWJlciwgaW5Jc0Z1bGxTY3JlZW46IGJvb2xlYW4pIHtcbiAgICBsZXQgY3VycmVudFdpZHRoID0gaW5XaWR0aDtcbiAgICBsZXQgY3VycmVudEhlaWdodCA9IGluSGVpZ2h0O1xuXG4gICAgaWYgKGluSXNGdWxsU2NyZWVuKSB7XG4gICAgICB0aGlzLl9jYW52YXNFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgIGN1cnJlbnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgY3VycmVudEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2FudmFzRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FudmFzRWxlbWVudC5zdHlsZS5sZWZ0ID0gJzBweCc7XG4gICAgdGhpcy5fY2FudmFzRWxlbWVudC5zdHlsZS50b3AgPSAnMHB4JztcbiAgICB0aGlzLl9jYW52YXNFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7Y3VycmVudFdpZHRofXB4YDtcbiAgICB0aGlzLl9jYW52YXNFbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke2N1cnJlbnRIZWlnaHR9cHhgO1xuICAgIHRoaXMuX2NhbnZhc0VsZW1lbnQud2lkdGggPSBjdXJyZW50V2lkdGg7XG4gICAgdGhpcy5fY2FudmFzRWxlbWVudC5oZWlnaHQgPSBjdXJyZW50SGVpZ2h0O1xuXG4gICAgdGhpcy5fcmVuZGVyZXIucmVzaXplKGN1cnJlbnRXaWR0aCwgY3VycmVudEhlaWdodCk7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3J1bm5pbmcgPSB0cnVlO1xuXG4gICAgdGhpcy5fdGljaygpO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xuXG4gICAgaWYgKGZyYW1lcmF0ZSA8IDApIHtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZUhhbmRsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYW5pbWF0aW9uRnJhbWVIYW5kbGUpO1xuICAgIH1cbiAgfVxuXG4gIGlzUnVubmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5fcnVubmluZyAmJiAhdGhpcy5fZXJyb3JHcmFwaGljQ29udGV4dDtcbiAgfVxuXG4gIC8vXG4gIC8vXG4gIC8vXG5cbiAgcHJpdmF0ZSBfdGljaygpIHtcbiAgICBjb25zdCB0aWNrID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9ydW5uaW5nIHx8IHRoaXMuX2Vycm9yR3JhcGhpY0NvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBwbGFuIHRoZSBuZXh0IGZyYW1lXG5cbiAgICAgIGlmIChmcmFtZXJhdGUgPCAwKSB7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSGFuZGxlID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQodGljaywgMTAwMCAvIGZyYW1lcmF0ZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX21haW5Mb29wKCk7XG4gICAgfTtcblxuICAgIHRpY2soKTtcbiAgfVxuXG4gIC8vICNyZWdpb24gbWFpbiBsb29wXG4gIHByaXZhdGUgX21haW5Mb29wKCkge1xuICAgIGNvbnN0IGN1cnJlbnRNc2VjVGltZSA9IERhdGUubm93KCk7XG5cbiAgICBjb25zdCBkZWx0YUZyYW1lTXNlY1RpbWUgPSBjdXJyZW50TXNlY1RpbWUgLSB0aGlzLl9sYXN0RnJhbWVUaW1lO1xuICAgIHRoaXMuX2xhc3RGcmFtZVRpbWUgPSBjdXJyZW50TXNlY1RpbWU7XG5cbiAgICB0aGlzLl9oYW5kbGVQZXJmb3JtYW5jZUF1dG9TY2FsaW5nKGRlbHRhRnJhbWVNc2VjVGltZSk7XG4gICAgdGhpcy5fZnJhbWVQcm9maWxlci5wdXNoRGVsdGEoZGVsdGFGcmFtZU1zZWNUaW1lKTtcblxuICAgIGNvbnN0IGRlbHRhTXNlY1RpbWUgPSBjdXJyZW50TXNlY1RpbWUgLSB0aGlzLl9jdXJyRnJhbWVNc2VjVGltZTtcbiAgICB0aGlzLl9jdXJyRnJhbWVNc2VjVGltZSA9IGN1cnJlbnRNc2VjVGltZTtcblxuICAgIC8vIHRoaXMgbWFrZSBzdXJlIHRoZSB0aW1lIHNlbnNpdGl2ZSBsb2dpYyBpc24ndCBcImp1bXBpbmdcIiBpbiBjYXNlIG9mIHNsb3cgZG93blxuICAgIGNvbnN0IHNhZmVEZWx0YSA9IE1hdGgubWluKGRlbHRhTXNlY1RpbWUsIDEwMCk7XG5cbiAgICBjb25zdCBkZWx0YVNlY1RpbWUgPSBzYWZlRGVsdGEgLyAxMDAwO1xuXG4gICAgLy8gdGhpcy5fY29udGludW91c1NlY1RpbWUgKz0gZGVsdGFTZWNUaW1lO1xuXG4gICAgdGhpcy5fZnJlZUZseUNvbnRyb2xsZXIudXBkYXRlKGRlbHRhU2VjVGltZSk7XG5cbiAgICBHbG9iYWxNb3VzZU1hbmFnZXIucmVzZXREZWx0YXMoKTtcbiAgICBHbG9iYWxUb3VjaE1hbmFnZXIucmVzZXREZWx0YXMoKTtcblxuICAgIC8vXG4gICAgLy9cblxuICAgIC8vIHRoaXMuX2NvbnRpbnVvdXNTZWNUaW1lICs9IGRlbHRhU2VjVGltZTtcblxuICAgIGlmICh0aGlzLl9waHlzaWNXb3JsZCkge1xuICAgICAgdGhpcy5fc2NlbmUucnVuKGRlbHRhU2VjVGltZSwgdGhpcy5fcmVuZGVyZXIsIHRoaXMuX3BoeXNpY1dvcmxkKTtcbiAgICB9XG5cbiAgICAvL1xuICAgIC8vXG5cbiAgICB0aGlzLl9yZW5kZXJTY2VuZSgpO1xuICAgIHRoaXMuX3JlbmRlckh1ZCgpO1xuICB9XG4gIC8vICNlbmRyZWdpb24gbWFpbiBsb29wXG5cbiAgLy8gI3JlZ2lvbiBodWRcbiAgcHJpdmF0ZSBfcmVuZGVySHVkKCkge1xuICAgIGNvbnN0IGdsID0gV2ViR0xDb250ZXh0LmdldENvbnRleHQoKTtcbiAgICBnbC52aWV3cG9ydCgwLCAwLCB0aGlzLl9jYW52YXNFbGVtZW50LndpZHRoLCB0aGlzLl9jYW52YXNFbGVtZW50LmhlaWdodCk7XG4gICAgZ2wuY2xlYXIoZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG4gICAgZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO1xuICAgIGdsLmRlcHRoRnVuYyhnbC5MRVNTKTtcblxuICAgIC8vIC8vIHRoZSBtb2Rlcm4gd2ViIGJyb3dzZXJzIGFyZSBhbHJlYWR5IGFwcGx5aW5nIGRvdWJsZSBidWZmZXJpbmdcbiAgICAvLyAvLyAtPiBzbyB3ZSdyZSBpbiBmYWN0IHRyaXBsZSBidWZmZXJpbmcgaGVyZVxuICAgIC8vIC8vIC0+IHdoaWNoIGlzIGdyZWF0IC0+IG1vcmUgdGltZSBmb3IgdGhlIFdlYkdMIHF1ZXVlIHRvIGZpbmlzaCBvbiB0aW1lXG4gICAgLy8gdGhpcy5fcmVuZGVyZXIubXVsdGlwbGVCdWZmZXJpbmcucmVuZGVySHVkKFxuICAgIC8vICAgdGhpcy5fcmVuZGVyZXIubWFpbkh1ZENhbWVyYS5nZXRDb21wb3NlZE1hdHJpeCgpXG4gICAgLy8gKTtcblxuICAgIHtcbiAgICAgIGNvbnN0IGtleUV2ZW50c1BvczogZ2xtLlJlYWRvbmx5VmVjMiA9IFs3ICsgMjAsIDE2NV07XG4gICAgICBjb25zdCB0b3VjaEV2ZW50c1BvczogZ2xtLlJlYWRvbmx5VmVjMiA9IFs3ICsgMjAsIDI2MF07XG4gICAgICBjb25zdCBib2FyZFBvczogZ2xtLlJlYWRvbmx5VmVjMiA9IFs3LCAzNV07XG5cbiAgICAgIGdyYXBoaWNzLnJlbmRlcmVycy53aWRnZXRzLmFkZEtleVN0cm9rZXNXaWRnZXRzKFxuICAgICAgICBrZXlFdmVudHNQb3MsXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLFxuICAgICAgICB0aGlzLl9yZW5kZXJlci50ZXh0UmVuZGVyZXJcbiAgICAgICk7XG4gICAgICBncmFwaGljcy5yZW5kZXJlcnMud2lkZ2V0cy5hZGRBcnJvd1N0cm9rZXNXaWRnZXRzKFxuICAgICAgICB0b3VjaEV2ZW50c1BvcyxcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuc3RhY2tSZW5kZXJlcnMsXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnRleHRSZW5kZXJlclxuICAgICAgKTtcbiAgICAgIGdyYXBoaWNzLnJlbmRlcmVycy53aWRnZXRzLmFkZEtleXNUb3VjaGVzV2lkZ2V0cyhcbiAgICAgICAgdGhpcy5fY2FudmFzRWxlbWVudCxcbiAgICAgICAgYm9hcmRQb3MsXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLFxuICAgICAgICB0aGlzLl9yZW5kZXJlci50ZXh0UmVuZGVyZXJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZ3JhcGhpY3MucmVuZGVyZXJzLndpZGdldHMucmVuZGVyRnBzTWV0ZXIoXG4gICAgICBbMTAsIHRoaXMuX2NhbnZhc0VsZW1lbnQuaGVpZ2h0IC0gNjAsIDBdLFxuICAgICAgWzEwMCwgNTBdLFxuICAgICAgdGhpcy5fZnJhbWVQcm9maWxlcixcbiAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLFxuICAgICAgdGhpcy5fcmVuZGVyZXIudGV4dFJlbmRlcmVyLFxuICAgICAgdHJ1ZVxuICAgICk7XG5cbiAgICB0aGlzLl9yZW5kZXJlci5mbHVzaEh1ZFdpcmVGcmFtZSgpO1xuICAgIHRoaXMuX3JlbmRlcmVyLmZsdXNoSHVkVGV4dCgpO1xuXG4gICAgdGhpcy5fcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIucmVzZXQoKTtcbiAgfVxuICAvLyAjZW5kcmVnaW9uIGh1ZFxuXG4gIC8vICNyZWdpb24gc2NlbmVcbiAgcHJpdmF0ZSBfcmVuZGVyU2NlbmUoKSB7XG4gICAgLy8gdGhpcy5fcmVuZGVyZXIubXVsdGlwbGVCdWZmZXJpbmcuY2FwdHVyZVNjZW5lKCgpID0+IHtcblxuICAgICAge1xuICAgICAgICBjb25zdCBnbCA9IFdlYkdMQ29udGV4dC5nZXRDb250ZXh0KCk7XG5cbiAgICAgICAgLy8gZ2wuY2xlYXIoZ2wuQ09MT1IgfCBnbC5ERVBUSCk7XG4gICAgICAgIC8vIGdsLmNsZWFyKGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xuICAgICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUIHwgZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgZ2wuZGlzYWJsZShnbC5ERVBUSF9URVNUKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcmVuZGVyZXIucmF5VHJhY2VyUmVuZGVyZXIubG9va0F0KFxuICAgICAgICB0aGlzLl9mcmVlRmx5Q29udHJvbGxlci5nZXRQb3NpdGlvbigpLFxuICAgICAgICB0aGlzLl9mcmVlRmx5Q29udHJvbGxlci5nZXRUYXJnZXQoKSxcbiAgICAgICAgdGhpcy5fZnJlZUZseUNvbnRyb2xsZXIuZ2V0VXBBeGlzKClcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuX3JlbmRlcmVyLnJheVRyYWNlclJlbmRlcmVyLnJlbmRlcigpO1xuXG4gICAgICBjb25zdCBzaG93RGVidWcgPSB0aGlzLl9kZWYuZGVidWdfbW9kZV9lbmFibGVkLmNoZWNrZWQgPT09IHRydWU7XG4gICAgICBpZiAoc2hvd0RlYnVnKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnN0YWNrUmVuZGVyZXJzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnNhZmVTY2VuZVdpcmVGcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0dXBEZWJ1Z1JlbmRlcmVyKCk7XG5cbiAgICAgICAgICBjb25zdCBheGlzT3JpZ2luOiBnbG0uUmVhZG9ubHlWZWMzID0gWzAsIDAsIDBdO1xuICAgICAgICAgIGNvbnN0IGF4aXNYOiBnbG0uUmVhZG9ubHlWZWMzID0gWzEwMCwgMCwgMF07XG4gICAgICAgICAgY29uc3QgYXhpc1k6IGdsbS5SZWFkb25seVZlYzMgPSBbMCwgMTAwLCAwXTtcbiAgICAgICAgICBjb25zdCBheGlzWjogZ2xtLlJlYWRvbmx5VmVjMyA9IFswLCAwLCAxMDBdO1xuXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc3RhY2tSZW5kZXJlcnMucHVzaExpbmUoYXhpc09yaWdpbiwgYXhpc1gsIFsxLCAwLCAwXSk7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc3RhY2tSZW5kZXJlcnMucHVzaExpbmUoYXhpc09yaWdpbiwgYXhpc1ksIFswLCAxLCAwXSk7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc3RhY2tSZW5kZXJlcnMucHVzaExpbmUoYXhpc09yaWdpbiwgYXhpc1osIFswLCAwLCAxXSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIC8vIH0pO1xuICB9XG4gIC8vICNlbmRyZWdpb24gc2NlbmVcblxuICBwcml2YXRlIF9zZXRSZXNvbHV0aW9uKGluVmFsdWU6IG51bWJlcikge1xuICAgIGNvbnN0IHNhZmVWYWx1ZSA9IF9jbGFtcChpblZhbHVlLCAwLCA5KTsgLy8gWzAuLjldXG4gICAgY29uc3QgbmV3VmFsdWUgPSAxMCAtIHNhZmVWYWx1ZTsgLy8gWzEuLjEwXVxuICAgIGNvbnN0IG5ld0NvZWYgPSAxIC8gbmV3VmFsdWU7IC8vIFswLi4xXVxuICAgIHRoaXMuX3JlbmRlcmVyLnJheVRyYWNlclJlbmRlcmVyLnNldFJlc29sdXRpb25Db2VmKG5ld0NvZWYpO1xuICB9XG5cbiAgcHJpdmF0ZSBfbG9nUmVzb2x1dGlvbigpIHtcbiAgICBjb25zdCByYXlUcmFjZXJSZW5kZXJlciA9IHRoaXMuX3JlbmRlcmVyLnJheVRyYWNlclJlbmRlcmVyO1xuXG4gICAgY29uc3QgbmV3Q29lZiA9IHJheVRyYWNlclJlbmRlcmVyLmdldFJlc29sdXRpb25Db2VmKCk7XG4gICAgY29uc3QgbmV3U2l6ZSA9IHJheVRyYWNlclJlbmRlcmVyLmdldEN1cnJlbnRTaXplKCk7XG4gICAgY29uc3QgdG90YWxQaXhlbHMgPSBuZXdTaXplWzBdICogbmV3U2l6ZVsxXTtcblxuICAgIHRoaXMuX2RlZi5sb2dnZXIubG9nKFxuICAgICAgYHJlc29sdXRpb24gY2hhbmdlZCAoMS8ke01hdGguY2VpbCgxIC8gbmV3Q29lZil9KSA9PiAke25ld1NpemVbMF19eCR7XG4gICAgICAgIG5ld1NpemVbMV1cbiAgICAgIH0gKCR7dG90YWxQaXhlbHN9cHgpYFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVQZXJmb3JtYW5jZUF1dG9TY2FsaW5nKGluRGVsdGFNc2VjVGltZTogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuX3BlcmZBdXRvU2NhbGluZ0VuYWJsZWQgIT09IHRydWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaW5EZWx0YU1zZWNUaW1lIDw9IDIwKSB7XG4gICAgICB0aGlzLl9mcmFtZXNVbnRpbE5leHRDaGVjayA9IGtfbWF4RnJhbWVzVW50aWxOZXh0Q2hlY2s7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLS10aGlzLl9mcmFtZXNVbnRpbE5leHRDaGVjaztcblxuICAgIGlmICh0aGlzLl9mcmFtZXNVbnRpbE5leHRDaGVjayA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9kZWYubG9nZ2VyLmxvZyhcbiAgICAgIGBwZXJmb3JtYW5jZSBhdXRvIHNjYWxpbmc6IHNsb3cgZnJhbWVyYXRlLCBzY2FsaW5nIGRvd24gcmVzb2x1dGlvbmBcbiAgICApO1xuXG4gICAgY29uc3QgY3VyclZhbHVlID0gdGhpcy5fZGVmLnJlc29sdXRpb24udmFsdWUgYXMgdW5rbm93biBhcyBudW1iZXI7XG4gICAgY29uc3QgbmV3VmFsdWUgPSBjdXJyVmFsdWUgLSAxO1xuXG4gICAgaWYgKG5ld1ZhbHVlID49IDAgJiYgbmV3VmFsdWUgPD0gOSkge1xuICAgICAgdGhpcy5fc2V0UmVzb2x1dGlvbihuZXdWYWx1ZSk7XG4gICAgICB0aGlzLl9sb2dSZXNvbHV0aW9uKCk7XG5cbiAgICAgIHRoaXMuX2RlZi5yZXNvbHV0aW9uLnZhbHVlID0gbmV3VmFsdWUgYXMgdW5rbm93biBhcyBzdHJpbmc7XG4gICAgfVxuXG4gICAgdGhpcy5fZnJhbWVzVW50aWxOZXh0Q2hlY2sgPSBrX21heEZyYW1lc1VudGlsTmV4dENoZWNrO1xuICB9XG59XG4iLAogICJpbXBvcnQgeyBzeXN0ZW0gfSBmcm9tICdAbG9jYWwtZnJhbWV3b3JrJztcblxuZXhwb3J0IGNvbnN0IHNldHVwT3V0ZGF0ZWRQYWdlID0gKFxuICBtYXhEdXJhdGlvbjogbnVtYmVyLFxuICBvblRpbWVvdXQ6ICgpID0+IHZvaWRcbikgPT4ge1xuICBpZiAoIXN5c3RlbS5icm93c2VyLkdsb2JhbFZpc2liaWxpdHlNYW5hZ2VyLmlzU3VwcG9ydGVkKCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgdGltZW91dEhhbmRsZTogbnVtYmVyID0gLTE7XG5cbiAgc3lzdGVtLmJyb3dzZXIuR2xvYmFsVmlzaWJpbGl0eU1hbmFnZXIuYWRkVmlzaWJpbGl0eUNoYW5nZSgoaXNWaXNpYmxlKSA9PiB7XG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgaWYgKHRpbWVvdXRIYW5kbGUgPj0gMCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgIHRpbWVvdXRIYW5kbGUgPSAtMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dEhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KG9uVGltZW91dCwgbWF4RHVyYXRpb24pO1xuICAgIH1cbiAgfSk7XG4gIHN5c3RlbS5icm93c2VyLkdsb2JhbFZpc2liaWxpdHlNYW5hZ2VyLmFjdGl2YXRlKCk7XG59O1xuIiwKICAiaW1wb3J0IHsgc3lzdGVtIH0gZnJvbSAnQGxvY2FsLWZyYW1ld29yayc7XG5cbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4vZXhwZXJpbWVudC91dGlsaXRpZXMvTG9nZ2VyJztcblxuaW1wb3J0IHsgRXhwZXJpbWVudCB9IGZyb20gJy4vZXhwZXJpbWVudC9FeHBlcmltZW50JztcblxuaW1wb3J0ICogYXMgdXRpbGl0aWVzIGZyb20gJy4vdXRpbGl0aWVzJztcblxubGV0IGxvZ2dlcjogTG9nZ2VyIHwgbnVsbCA9IG51bGw7XG5sZXQgbWFpbkRlbW86IEV4cGVyaW1lbnQgfCBudWxsID0gbnVsbDtcblxuLy9cbi8vXG4vL1xuLy9cbi8vXG5cbmNvbnN0IF9xdWVyeURvbUVsZW1lbnQgPSA8VCBleHRlbmRzIEVsZW1lbnQ+KGluTmFtZTogc3RyaW5nKTogVCA9PiB7XG4gIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPFQ+KGluTmFtZSk7XG4gIGlmICghbmV3RWxlbWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgaHRtbCBlbGVtZW50IFwiJHtpbk5hbWV9XCIgbm90IGZvdW5kYCk7XG4gIH1cbiAgcmV0dXJuIG5ld0VsZW1lbnQ7XG59O1xuXG4vL1xuLy9cbi8vXG4vL1xuLy9cblxuY29uc3Qgb25QYWdlTG9hZCA9IGFzeW5jICgpID0+IHtcbiAgbG9nZ2VyID0gbmV3IExvZ2dlcignbG9nZ2VyT3V0cHV0Jyk7XG4gIGxvZ2dlci5sb2coJ1tTRVRVUF0gcGFnZSBsb2FkZWQnKTtcblxuICAvL1xuICAvLyBIVE1MIGVsZW1lbnRzIGNoZWNrXG4gIC8vXG5cbiAgY29uc3QgY2FudmFzRWxlbWVudCA9XG4gICAgX3F1ZXJ5RG9tRWxlbWVudDxIVE1MQ2FudmFzRWxlbWVudD4oJyNyZW5kZXJpbmctY2FudmFzJyk7XG4gIGNvbnN0IHBlcmZBdXRvU2NhbGluZyA9IF9xdWVyeURvbUVsZW1lbnQ8SFRNTElucHV0RWxlbWVudD4oXG4gICAgJyNhdXRvLXNjYWxpbmctZW5hYmxlZCdcbiAgKTtcbiAgY29uc3QgcmVzb2x1dGlvbiA9IF9xdWVyeURvbUVsZW1lbnQ8SFRNTElucHV0RWxlbWVudD4oJyNyZXNvbHV0aW9uJyk7XG4gIGNvbnN0IGFudGlfYWxpYXNpbmdfZW5hYmxlZCA9IF9xdWVyeURvbUVsZW1lbnQ8SFRNTElucHV0RWxlbWVudD4oXG4gICAgJyNhbnRpLWFsaWFzaW5nLWVuYWJsZWQnXG4gICk7XG4gIGNvbnN0IGRlYnVnX21vZGVfZW5hYmxlZCA9IF9xdWVyeURvbUVsZW1lbnQ8SFRNTElucHV0RWxlbWVudD4oXG4gICAgJyNkZWJ1Zy1tb2RlLWVuYWJsZWQnXG4gICk7XG4gIGNvbnN0IGVycm9yVGV4dCA9IF9xdWVyeURvbUVsZW1lbnQ8SFRNTFBhcmFncmFwaEVsZW1lbnQ+KCcjZXJyb3ItdGV4dCcpITtcblxuICAvL1xuICAvLyBFcnJvciBIYW5kbGluZ1xuICAvL1xuXG4gIGNvbnN0IF9vblBhZ2VFcnJvciA9IChlcnI6IFdpbmRvd0V2ZW50TWFwWydlcnJvciddKSA9PiB7XG4gICAgaWYgKCFtYWluRGVtbykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdvblBhZ2VFcnJvcicsIGVycik7XG5cbiAgICB0cnkge1xuICAgICAgLy8gc3RvcCB0aGUgYXBwXG4gICAgICBtYWluRGVtby5zdG9wKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgIG1haW5EZW1vID0gbnVsbDtcblxuICAgIC8vIHN0b3AgdGhlIGJyb3dzZXIgaGVscGVyc1xuICAgIHN5c3RlbS5icm93c2VyLkdsb2JhbEtleWJvYXJkTWFuYWdlci5kZWFjdGl2YXRlKCk7XG4gICAgc3lzdGVtLmJyb3dzZXIuR2xvYmFsTW91c2VNYW5hZ2VyLmRlYWN0aXZhdGUoY2FudmFzRWxlbWVudCk7XG4gICAgc3lzdGVtLmJyb3dzZXIuR2xvYmFsVG91Y2hNYW5hZ2VyLmRlYWN0aXZhdGUoY2FudmFzRWxlbWVudCk7XG4gICAgc3lzdGVtLmJyb3dzZXIuR2xvYmFsRnVsbFNjcmVlbk1hbmFnZXIucmVtb3ZlQWxsQ2FsbGJhY2tzKCk7XG4gICAgc3lzdGVtLmJyb3dzZXIuR2xvYmFsUG9pbnRlckxvY2tNYW5hZ2VyLnJlbW92ZUFsbENhbGxiYWNrcygpO1xuICAgIHN5c3RlbS5icm93c2VyLkdsb2JhbFZpc2liaWxpdHlNYW5hZ2VyLnJlbW92ZUFsbENhbGxiYWNrcygpO1xuICAgIHN5c3RlbS5icm93c2VyLkdsb2JhbFZpc2liaWxpdHlNYW5hZ2VyLmRlYWN0aXZhdGUoKTtcblxuICAgIC8vIHNldHVwIHRoZSBlcnJvciBtZXNzYWdlXG4gICAgZXJyb3JUZXh0LnN0eWxlLndpZHRoID0gJzgwMHB4JztcbiAgICBlcnJvclRleHQuc3R5bGUuaGVpZ2h0ID0gJzYwMHB4JztcbiAgICBlcnJvclRleHQuaW5uZXJIVE1MID0gZXJyLm1lc3NhZ2U7XG5cbiAgICAvLyBzd2FwIHRoZSBjYW52YXMgd2l0aCB0aGUgZXJyb3IgbWVzc2FnZVxuICAgIGNhbnZhc0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBlcnJvclRleHQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAvLyBkaXNhYmxlIHRoZSB1c2VyIGludGVyZmFjZVxuICAgIHBlcmZBdXRvU2NhbGluZy5kaXNhYmxlZCA9IHRydWU7XG4gICAgcmVzb2x1dGlvbi5taW4gPSByZXNvbHV0aW9uLm1heCA9IHJlc29sdXRpb24udmFsdWUgPSAwIGFzIHVua25vd24gYXMgc3RyaW5nO1xuICAgIGFudGlfYWxpYXNpbmdfZW5hYmxlZC5kaXNhYmxlZCA9IHRydWU7XG4gICAgZGVidWdfbW9kZV9lbmFibGVkLmRpc2FibGVkID0gdHJ1ZTtcblxuICAgIGRvY3VtZW50LnRpdGxlICs9ICcgKEVSUiknO1xuICB9O1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBfb25QYWdlRXJyb3IpO1xuXG4gIC8vXG4gIC8vIGJyb3dzZXIgZmVhdHVyZXMgY2hlY2tcbiAgLy9cblxuICBpZiAoIXN5c3RlbS5icm93c2VyLmlzV2ViR0wyU3VwcG9ydGVkKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ21pc3NpbmcgV2ViR0wyIGZlYXR1cmUgKHVuc3VwcG9ydGVkKScpO1xuICB9XG5cbiAgLy9cbiAgLy8gc2V0dXAgYXBwbGljYXRpb25cbiAgLy9cblxuICBtYWluRGVtbyA9IG5ldyBFeHBlcmltZW50KHtcbiAgICBjYW52YXNFbGVtZW50LFxuICAgIGxvZ2dlcixcbiAgICBwZXJmQXV0b1NjYWxpbmcsXG4gICAgcmVzb2x1dGlvbixcbiAgICBhbnRpX2FsaWFzaW5nX2VuYWJsZWQsXG4gICAgZGVidWdfbW9kZV9lbmFibGVkXG4gIH0pO1xuXG4gIGxvZ2dlci5sb2coJ1tTRVRVUF0gRGVtbzogaW5pdGlhbGl6aW5nJyk7XG5cbiAgYXdhaXQgbWFpbkRlbW8uaW5pdCgpO1xuXG4gIGxvZ2dlci5sb2coJ1tTRVRVUF0gRGVtbzogaW5pdGlhbGl6ZWQnKTtcblxuICBtYWluRGVtby5zdGFydCgpO1xuXG4gIGxvZ2dlci5sb2coJ1tTRVRVUF0gRGVtbzogcnVubmluZycpO1xuXG4gIC8vXG4gIC8vXG4gIC8vXG5cbiAgY29uc3QgcGFnZU1heFRpbWVJbnZpc2libGUgPSA2MCAqIDEwMDA7IC8vIDYwc2VjXG4gIHV0aWxpdGllcy5zZXR1cE91dGRhdGVkUGFnZShwYWdlTWF4VGltZUludmlzaWJsZSwgKCkgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICc8YnIvPjxici8+PGJyLz5UaGUgcGFnZSB3YXMgaW5hY3RpdmUgZm9yIHRvbyBsb25nPGJyLz48YnIvPnBsZWFzZSByZWxvYWQnXG4gICAgKTtcbiAgfSk7XG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uUGFnZUxvYWQsIGZhbHNlKTtcbiIKICBdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFNLG1CQUE2QjtBQUFBLEVBQ2pDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFFQSxJQUFNLGtCQUE0QjtBQUFBLEVBQ2hDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFTQTtBQUFBLE1BQU0sa0JBQWtCO0FBQUEsRUFDZCwrQkFBbUQsQ0FBQztBQUFBLEVBRXBELGlCQUEwQjtBQUFBLEVBRTFCLFdBQVcsR0FBRztBQUNwQixRQUFJLEtBQUssZ0JBQWdCO0FBQ3ZCO0FBQUEsSUFDRjtBQUNBLFNBQUssaUJBQWlCO0FBRXRCLFVBQU0sZUFBZSxNQUFNO0FBQ3pCLFdBQUssNkJBQTZCLFFBQVEsQ0FBQyxhQUFhLFNBQVMsQ0FBQztBQUFBO0FBR3BFLGVBQVcsYUFBYTtBQUN0QixlQUFTLGlCQUFpQixXQUFXLGNBQWMsS0FBSztBQUFBO0FBQUEsRUFLNUQsWUFBWSxDQUFDLGlCQUE4QjtBQUN6QyxlQUFXLGFBQWEsa0JBQWtCO0FBQ3hDLFVBQUksYUFBYSxpQkFBaUI7QUFDaEMsZUFBTztBQUFBLE1BQ1Q7QUFBQSxJQUNGO0FBQ0EsV0FBTztBQUFBO0FBQUEsRUFLVCxZQUFZLENBQUMsaUJBQThCO0FBQ3pDLFdBQU8sU0FBUyxzQkFBc0I7QUFBQTtBQUFBLE9BS2xDLGtCQUFpQixDQUFDLGlCQUFnRDtBQUN0RSxRQUFJLEtBQUssYUFBYSxlQUFlLEdBQUc7QUFDdEMsYUFBTyxFQUFFLFNBQVMsT0FBTyxTQUFTLGlDQUFpQztBQUFBLElBQ3JFO0FBRUEsU0FBSyxZQUFZO0FBRWpCLGVBQVcsYUFBYSxrQkFBa0I7QUFDeEMsVUFBSSxhQUFhLGlCQUFpQjtBQUNoQyxRQUFDLGdCQUF3QixXQUFXO0FBRXBDLGVBQU8sRUFBRSxTQUFTLE1BQU0sU0FBUywrQkFBK0I7QUFBQSxNQUNsRTtBQUFBLElBQ0Y7QUFFQSxXQUFPLEVBQUUsU0FBUyxPQUFPLFNBQVMsc0NBQXNDO0FBQUE7QUFBQSxFQUsxRSxxQkFBcUIsQ0FBQyxZQUE4QjtBQUNsRCxTQUFLLDZCQUE2QixLQUFLLFVBQVU7QUFBQTtBQUFBLEVBRW5ELHdCQUF3QixDQUFDLFlBQThCO0FBQ3JELFVBQU0sUUFBUSxLQUFLLDZCQUE2QixRQUFRLFVBQVU7QUFDbEUsUUFBSSxRQUFRLEdBQUc7QUFDYjtBQUFBLElBQ0Y7QUFDQSxTQUFLLDZCQUE2QixPQUFPLE9BQU8sQ0FBQztBQUFBO0FBQUEsRUFFbkQsa0JBQWtCLEdBQUc7QUFDbkIsU0FBSyw2QkFBNkIsU0FBUztBQUFBO0FBRS9DO0FBRUEsSUFBTSwwQkFBMEIsSUFBSTs7QUM5RjdCLElBQU0sY0FBYztBQUFBLEVBRXpCLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUdILFdBQVc7QUFBQSxFQUNYLE9BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLFdBQVc7QUFBQSxFQUNYLGFBQWE7QUFBQSxFQUNiLFdBQVc7QUFBQSxFQUNYLGNBQWM7QUFBQSxFQUNkLE9BQU87QUFBQSxFQUdQLE9BQU87QUFBQSxFQUNQLE1BQU07QUFBQSxFQUNOLEtBQUs7QUFBQSxFQUNMLFVBQVU7QUFBQSxFQUdWLEtBQUs7QUFBQSxFQUNMLE9BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFBQSxFQUNQLFFBQVE7QUFBQSxFQUNSLFVBQVU7QUFBQSxFQUNWLEtBQUs7QUFBQSxFQUNMLE1BQU07QUFBQSxFQUNOLFdBQVc7QUFBQSxFQUNYLFNBQVM7QUFBQSxFQUNULFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLGFBQWE7QUFBQSxFQUNiLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLGFBQWE7QUFBQSxFQUNiLFlBQVk7QUFBQSxFQUdaLElBQUk7QUFBQSxFQUNKLElBQUk7QUFBQSxFQUNKLElBQUk7QUFBQSxFQUNKLElBQUk7QUFBQSxFQUNKLElBQUk7QUFBQSxFQUNKLElBQUk7QUFBQSxFQUNKLElBQUk7QUFBQSxFQUNKLElBQUk7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QUFJLEtBQUssRUFBRTtBQUNYLFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxLQUFLO0FBQ1QsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLEtBQUssRUFBRTtBQUNYLFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksTUFBTSxFQUFFO0FBQ1osUUFBSSxNQUFNO0FBQ1YsUUFBSSxNQUFNO0FBQ1YsUUFBSSxNQUFNO0FBQUEsRUFDWixPQUFPO0FBQ0wsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLEtBQUssRUFBRTtBQUNYLFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLEtBQUssRUFBRTtBQUNYLFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLEtBQUssRUFBRTtBQUNYLFFBQUksS0FBSyxFQUFFO0FBQ1gsUUFBSSxLQUFLLEVBQUU7QUFDWCxRQUFJLE1BQU0sRUFBRTtBQUNaLFFBQUksTUFBTSxFQUFFO0FBQ1osUUFBSSxNQUFNLEVBQUU7QUFDWixRQUFJLE1BQU0sRUFBRTtBQUNaLFFBQUksTUFBTSxFQUFFO0FBQ1osUUFBSSxNQUFNLEVBQUU7QUFBQTtBQUdkLFNBQU87QUFBQTtBQVVGLFNBQVMsTUFBTSxDQUFDLEtBQUssR0FBRztBQUM3QixNQUFJLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBRTVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFFNUUsT0FBSyxLQUFLO0FBQ1IsV0FBTztBQUFBLEVBQ1Q7QUFFQSxRQUFNLElBQU07QUFDWixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQy9DLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUMvQyxNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDL0MsTUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELE1BQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxNQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsTUFBSSxPQUFPLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxPQUFPO0FBQ2hELE1BQUksT0FBTyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sT0FBTztBQUNoRCxNQUFJLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE9BQU87QUFDaEQsU0FBTztBQUFBO0FBVUYsU0FBUyxPQUFPLENBQUMsS0FBSyxHQUFHO0FBQzlCLE1BQUksTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxLQUFLLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNsRyxNQUFJLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3BHLE1BQUksS0FBSyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsTUFBSSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxNQUFJLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ3BHLE1BQUksS0FBSyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsTUFBSSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxNQUFJLEtBQUssT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ2xHLE1BQUksS0FBSyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDbEcsTUFBSSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNwRyxNQUFJLE1BQU0sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ25HLE1BQUksUUFBUSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDckcsTUFBSSxRQUFRLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNyRyxNQUFJLE1BQU0sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNO0FBQ25HLE1BQUksUUFBUSxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTSxPQUFPLE9BQU8sTUFBTSxNQUFNLE1BQU07QUFDckcsTUFBSSxNQUFNLE9BQU8sTUFBTSxNQUFNLE1BQU0sT0FBTyxPQUFPLE1BQU0sTUFBTSxNQUFNLE9BQU8sT0FBTyxNQUFNLE1BQU0sTUFBTTtBQUNuRyxTQUFPO0FBQUE7QUFTRixTQUFTLFdBQVcsQ0FBQyxHQUFHO0FBQzdCLE1BQUksTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFDNUIsTUFBSSxNQUFNLE1BQU0sTUFBTSxNQUFNO0FBQzVCLE1BQUksTUFBTSxNQUFNLE1BQU0sTUFBTTtBQUM1QixNQUFJLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFFNUIsU0FBTyxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU0sTUFBTSxNQUFNLE1BQU07QUFBQTtBQVdwRSxTQUFTLFFBQVEsQ0FBQyxLQUFLLEdBQUcsR0FBRztBQUNsQyxNQUFJLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRSxJQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFLElBQ1IsTUFBTSxFQUFFO0FBQ1osTUFBSSxNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsSUFDUixNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRTtBQUVaLE1BQUksS0FBSyxFQUFFLElBQ1AsS0FBSyxFQUFFLElBQ1AsS0FBSyxFQUFFLElBQ1AsS0FBSyxFQUFFO0FBQ1gsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsT0FBSyxFQUFFO0FBQ1AsT0FBSyxFQUFFO0FBQ1AsT0FBSyxFQUFFO0FBQ1AsT0FBSyxFQUFFO0FBQ1AsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsT0FBSyxFQUFFO0FBQ1AsT0FBSyxFQUFFO0FBQ1AsT0FBSyxFQUFFO0FBQ1AsT0FBSyxFQUFFO0FBQ1AsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsTUFBSSxLQUFLLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDL0MsTUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsTUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsT0FBSyxFQUFFO0FBQ1AsT0FBSyxFQUFFO0FBQ1AsT0FBSyxFQUFFO0FBQ1AsT0FBSyxFQUFFO0FBQ1AsTUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsTUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsTUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsTUFBSSxNQUFNLEtBQUssTUFBTSxLQUFLLE1BQU0sS0FBSyxNQUFNLEtBQUs7QUFDaEQsU0FBTztBQUFBO0FBV0YsU0FBUyxTQUFTLENBQUMsS0FBSyxHQUFHLEdBQUc7QUFDbkMsTUFBSSxJQUFJLEVBQUUsSUFDTixJQUFJLEVBQUUsSUFDTixJQUFJLEVBQUU7QUFDVixNQUFJLEtBQUssS0FBSyxLQUFLO0FBQ25CLE1BQUksS0FBSyxLQUFLLEtBQUs7QUFDbkIsTUFBSSxLQUFLLEtBQUssS0FBSztBQUVuQixNQUFJLE1BQU0sS0FBSztBQUNiLFFBQUksTUFBTSxFQUFFLEtBQUssSUFBSSxFQUFFLEtBQUssSUFBSSxFQUFFLEtBQUssSUFBSSxFQUFFO0FBQzdDLFFBQUksTUFBTSxFQUFFLEtBQUssSUFBSSxFQUFFLEtBQUssSUFBSSxFQUFFLEtBQUssSUFBSSxFQUFFO0FBQzdDLFFBQUksTUFBTSxFQUFFLEtBQUssSUFBSSxFQUFFLEtBQUssSUFBSSxFQUFFLE1BQU0sSUFBSSxFQUFFO0FBQzlDLFFBQUksTUFBTSxFQUFFLEtBQUssSUFBSSxFQUFFLEtBQUssSUFBSSxFQUFFLE1BQU0sSUFBSSxFQUFFO0FBQUEsRUFDaEQsT0FBTztBQUNMLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFVBQU0sRUFBRTtBQUNSLFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksS0FBSztBQUNULFFBQUksTUFBTTtBQUNWLFFBQUksTUFBTTtBQUNWLFFBQUksTUFBTSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFO0FBQzFDLFFBQUksTUFBTSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFO0FBQzFDLFFBQUksTUFBTSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFO0FBQzFDLFFBQUksTUFBTSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxFQUFFO0FBQUE7QUFHNUMsU0FBTztBQUFBO0FBV0YsU0FBUyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUc7QUFDL0IsTUFBSSxJQUFJLEVBQUUsSUFDTixJQUFJLEVBQUUsSUFDTixJQUFJLEVBQUU7QUFDVixNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksS0FBSyxFQUFFLEtBQUs7QUFDaEIsTUFBSSxLQUFLLEVBQUUsS0FBSztBQUNoQixNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksS0FBSyxFQUFFLEtBQUs7QUFDaEIsTUFBSSxLQUFLLEVBQUUsS0FBSztBQUNoQixNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksS0FBSyxFQUFFLEtBQUs7QUFD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QUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLFNBQU87QUFBQTtBQWNGLFNBQVMsYUFBYSxDQUFDLEtBQUssS0FBSztBQUN0QyxNQUFJLElBQUksS0FBSyxJQUFJLEdBQUc7QUFDcEIsTUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBRXBCLE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksTUFBTTtBQUNWLE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLFNBQU87QUFBQTtBQWNGLFNBQVMsYUFBYSxDQUFDLEtBQUssS0FBSztBQUN0QyxNQUFJLElBQUksS0FBSyxJQUFJLEdBQUc7QUFDcEIsTUFBSSxJQUFJLEtBQUssSUFBSSxHQUFHO0FBRXBCLE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksTUFBTTtBQUNWLE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLFNBQU87QUFBQTtBQWtCRixTQUFTLHVCQUF1QixDQUFDLEtBQUssR0FBRyxHQUFHO0FBRWpELE1BQUksSUFBSSxFQUFFLElBQ04sSUFBSSxFQUFFLElBQ04sSUFBSSxFQUFFLElB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QUFJLEtBQUs7QUFDVCxNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU0sRUFBRSxLQUFLLE1BQU0sT0FBTyxLQUFLLE9BQU8sS0FBSyxPQUFPO0FBQ3RELE1BQUksTUFBTSxFQUFFLEtBQUssTUFBTSxPQUFPLEtBQUssT0FBTyxLQUFLLE9BQU87QUFDdEQsTUFBSSxNQUFNLEVBQUUsS0FBSyxNQUFNLE9BQU8sS0FBSyxPQUFPLEtBQUssUUFBUTtBQUN2RCxNQUFJLE1BQU07QUFDVixTQUFPO0FBQUE7QUFXRixTQUFTLFFBQVEsQ0FBQyxLQUFLLEdBQUc7QUFDL0IsTUFBSSxJQUFJLEVBQUUsSUFDTixJQUFJLEVBQUUsSUFDTixJQUFJLEVBQUUsSUFDTixJQUFJLEVBQUU7QUFDVixNQUFJLEtBQUssSUFBSTtBQUNiLE1BQUksS0FBSyxJQUFJO0FBQ2IsTUFBSSxLQUFLLElBQUk7QUFDYixNQUFJLEtBQUssSUFBSTtBQUNiLE1BQUksS0FBSyxJQUFJO0FBQ2IsTUFBSSxLQUFLLElBQUk7QUFDYixNQUFJLEtBQUssSUFBSTtBQUNiLE1BQUksS0FBSyxJQUFJO0FBQ2IsTUFBSSxLQUFLLElBQUk7QUFDYixNQUFJLEtBQUssSUFBSTtBQUNiLE1BQUksS0FBSyxJQUFJO0FBQ2IsTUFBSSxLQUFLLElBQUk7QUFDYixNQUFJLEtBQUssSUFBSSxLQUFLO0FBQ2xCLE1BQUksS0FBSyxLQUFLO0FBQ2QsTUFBSSxLQUFLLEtBQUs7QUFDZCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUssS0FBSztBQUNkLE1BQUksS0FBSyxJQUFJLEtBQUs7QUFDbEIsTUFBSSxLQUFLLEtBQUs7QUFDZCxNQUFJLEtBQUs7QUFDVCxNQUFJLEtBQUssS0FBSztBQUNkLE1BQUksS0FBSyxLQUFLO0FBQ2QsTUFBSSxNQUFNLElBQUksS0FBSztBQUNuQixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixNQUFJLE1BQU07QUFDVixTQUFPO0FBQUE7QUFlRixTQUFT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VUFBTTtBQUNOLFVBQU07QUFDTixVQUFNO0FBQUEsRUFDUjtBQUVBLE1BQUksS0FBSyxNQUFNLEtBQUssTUFBTSxJQUN0QixLQUFLLE1BQU0sS0FBSyxNQUFNLElBQ3RCLEtBQUssTUFBTSxLQUFLLE1BQU07QUFDMUIsUUFBTSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFFL0IsTUFBSSxNQUFNLEdBQUc7QUFDWCxVQUFNLElBQUksS0FBSyxLQUFLLEdBQUc7QUFDdkIsVUFBTTtBQUNOLFVBQU07QUFDTixVQUFNO0FBQUEsRUFDUjtBQUVBLE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSyxLQUFLLEtBQUssS0FBSztBQUN4QixNQUFJLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFDeEIsTUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLO0FBQ3hCLE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLE1BQUksTUFBTTtBQUNWLFNBQU87QUFBQTtBQVNGLFNBQVMsR0FBRyxDQUFDLEdBQUc7QUFDckIsU0FBTyxVQUFVLEVBQUUsS0FBSyxPQUFPLEVBQUUsS0FBSyxPQUFPLEVBQUUsS0FBSyxPQUFPLEVBQUUsS0FBSyxPQUFPLEVBQUUsS0FBSyxPQUFPLEVBQUUsS0FBSyxPQUFPLEVBQUUsS0FBSyxPQUFPLEVBQUUsS0FBSyxPQUFPLEVBQUUsS0FBSyxPQUFPLEVBQUUsS0FBSyxPQUFPLEVBQUUsTUFBTSxPQUFPLEVBQUUsTUFBTSxPQUFPLEVBQUUsTUFBTSxPQUFPLEVBQUUsTUFBTSxPQUFPLEVBQUUsTUFBTSxPQUFPLEVBQUUsTUFBTTtBQUFBO0FBUzNPLFNBQVMsSUFBSSxDQUFDLEdBQUc7QUFDdEIsU0FBTyxLQUFLLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHO0FBQUE7QUFXakgsU0FBUyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUc7QUFDN0IsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDcEIsTUFBSSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BCLE1BQUksTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDcEIsTUFBSSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BCLFNBQU87QUFBQTtBQVdGLFNBQVMsUUFBUSxDQUFDLEtBQUssR0FBRyxHQUFHO0FBQ2xDLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDcEIsTUFBSSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BCLE1BQUksTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDcEIsTUFBSSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BCLE1BQUksTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwQixTQUFPO0FBQUE7QUFXRixTQUFTLGNBQWMsQ0FBQyxLQUFLLEdBQUcsR0FBRztBQUN4QyxNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksS0FBSyxFQUFFLEtBQUs7QUFDaEIsTUFBSSxLQUFLLEVBQUUsS0FBSztBQUNoQixNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksS0FBSyxFQUFFLEtBQUs7QUFDaEIsTUFBSSxLQUFLLEVBQUUsS0FBSztBQUNoQixNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksS0FBSyxFQUFFLEtBQUs7QUFDaEIsTUFBSSxLQUFLLEVBQUUsS0FBSztBQUNoQixNQUFJLEtBQUssRUFBRSxLQUFLO0FBQ2hCLE1BQUksTUFBTSxFQUFFLE1BQU07QUFDbEIsTUFBSSxNQUFNLEVBQUUsTUFBTTtBQUNsQixNQUFJLE1BQU0sRUFBRSxNQUFNO0FBQ2xCLE1BQUksTUFBTSxFQUFFLE1BQU07QUFDbEIsTUFBSSxNQUFNLEVBQUUsTUFBTTtBQUNsQixNQUFJLE1BQU0sRUFBRSxNQUFNO0FBQ2xCLFNBQU87QUFBQTtBQVlGLFNBQVMsb0JBQW9CLENBQUMsS0FBSyxHQUFHLEdBQUcsUUFBTztBQUNyRCxNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUN2QixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTTtBQUMxQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTTtBQUMxQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTTtBQUMxQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTTtBQUMxQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTTtBQUMxQixNQUFJLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTTtBQUMxQixTQUFPO0FBQUE7QUFVRixTQUFTLFdBQVcsQ0FBQyxHQUFHLEdBQUc7QUFDaEMsU0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRTtBQUFBO0FBVXZSLFNBQVMsTUFBTSxDQUFDLEdBQUcsR0FBRztBQUMzQixNQUFJLEtBQUssRUFBRSxJQUNQLEtBQUssRUFBRSxJQUNQLEtBQUssRUFBRSxJQUNQLEtBQUssRUFBRTtBQUNYLE1BQUksS0FBSyxFQUFFLElBQ1AsS0FBSyxFQUFFLElBQ1AsS0FBSyxFQUFFLElBQ1AsS0FBSyxFQUFFO0FBQ1gsTUFBSSxLQUFLLEVBQUUsSUFDUCxLQUFLLEVBQUUsSUFDUCxNQUFNLEVBQUUsS0FDUixNQUFNLEVBQUU7QUFDWixNQUFJLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksS0FBSyxFQUFFLElBQ1AsS0FBSyxFQUFFLElBQ1AsS0FBSyxFQUFFLElBQ1AsS0FBSyxFQUFFO0FBQ1gsTUFBSSxLQUFLLEVBQUUsSUFDUCxLQUFLLEVBQUUsSUFDUCxLQUFLLEVBQUUsSUFDUCxLQUFLLEVBQUU7QUFDWCxNQUFJLEtBQUssRUFBRSxJQUNQLEtBQUssRUFBRSxJQUNQLE1BQU0sRUFBRSxLQUNSLE1BQU0sRUFBRTtBQUNaLE1BQUksTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFLEtBQ1IsTUFBTSxFQUFFO0FBQ1osU0FBTyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksS0FBSyxFQUFFLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksRUFBRSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLElBQUksTUFBTSxHQUFHLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksR0FBRyxHQUFHLEtBQUssSUFBSSxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksTUFBTSxHQUFHLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksR0FBRyxHQUFHLEtBQUssSUFBSSxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksTUFBTSxHQUFHLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksR0FBRyxHQUFHLEtBQUssSUFBSSxHQUFHLENBQUMsS0FBSyxLQUFLLElBQUksTUFBTSxHQUFHLEtBQWMsVUFBVSxLQUFLLElBQUksR0FBSyxLQUFLLElBQUksR0FBRyxHQUFHLEtBQUss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QUcsR0FBRyxHQUFHO0FBQ25DLE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULE1BQUksS0FBSztBQUNULFNBQU87QUFBQTtBQVdGLFNBQVMsSUFBRyxDQUFDLEtBQUssR0FBRyxHQUFHO0FBQzdCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixTQUFPO0FBQUE7QUFXRixTQUFTLFNBQVEsQ0FBQyxLQUFLLEdBQUcsR0FBRztBQUNsQyxNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsU0FBTztBQUFBO0FBV0YsU0FBUyxTQUFRLENBQUMsS0FBSyxHQUFHLEdBQUc7QUFDbEMsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLFNBQU87QUFBQTtBQVdGLFNBQVMsT0FBTSxDQUFDLEtBQUssR0FBRyxHQUFHO0FBQ2hDLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixNQUFJLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDbEIsTUFBSSxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ2xCLE1BQUksS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNsQixTQUFPO0FBQUE7QUFVRixTQUFTLEtBQUksQ0FBQyxLQUFLLEdBQUc7QUFDM0IsTUFBSSxLQUFLLEtBQUssS0FBSyxFQUFFLEVBQUU7QUFDdkIsTUFBSSxLQUFLLEtBQUssS0FBSyxFQUFFLEVBQUU7QUFDdkIsTUFBSSxLQUFLLEtBQUssS0FBSyxFQUFFLEVBQUU7QUFDdkIsTUFBSSxLQUFLLEtBQUssS0FBSyxFQUFFLEVBQUU7QUFDdkIsU0FBTztBQUFBO0FBVUYsU0FBUyxNQUFLLENBQUMsS0FBSyxHQUFHO0FBQzVCLE1BQUksS0FBSyxLQUFLLE1BQU0sRUFBRSxFQUFFO0FBQ3hCLE1BQUksS0FBSyxLQUFLLE1BQU0sRUFBRSxFQUFFO0FBQ3hCLE1BQUksS0FBSyxLQUFLLE1BQU0sRUFBRSxFQUFFO0FBQ3hCLE1BQUksS0FBSyxLQUFLLE1BQU0sRUFBRSxFQUFFO0FBQ3hCLFNBQU87QUFBQTtBQVdGLFNBQVMsSUFBRyxDQUFDLEtBQUssR0FBRyxHQUFHO0FBQzdCLE1BQUksS0FBSyxLQUFLLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUM1QixNQUFJLEtBQUssS0FBSyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDNUIsTUFBSSxLQUFLLEtBQUssSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQzVCLE1BQUksS0FBSyxLQUFLLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUM1QixTQUFPO0FBQUE7QUFXRixTQUFTLElBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRztBQUM3QixNQUFJLEtBQUssS0FBSyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDNUIsTUFBSSxLQUFLLEtBQUssSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFO0FBQzVCLE1BQUksS0FBSyxLQUFLLElBQUksRUFBRSxJQUFJLEVBQUUsRUFBRTtBQUM1QixNQUFJLEtBQUssS0FBSyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7QUFDNUIsU0FBTztBQUFBO0FBVUYsU0FBUyxNQUFLLENBQUMsS0FBSyxHQUFHO0FBQzVCLE1BQUksS0FBSyxLQUFLLE1BQU0sRUFBRSxFQUFFO0FBQ3hCLE1BQUksS0FBSyxLQUFLLE1BQU0sRUFBRSxFQUFFO0FBQ3hCLE1BQUksS0FBSyxLQUFLLE1BQU0sRUFBRSxFQUFFO0FBQ3hCLE1BQUksS0FBSyxLQUFLLE1B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LENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUU3QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFFN0MsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BRTdDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsTUFBTSxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM5QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUU3QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDN0MsQ0FBQyxLQUFLLENBQUMsS0FBSyxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzdDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM3QyxDQUFDLEtBQUssQ0FBQyxLQUFLLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFFN0MsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLElBQUksV0FBVyxJQUFJLElBQUksV0FBVyxFQUFFLENBQUM7QUFBQSxNQUM1QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsSUFBSSxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxXQUFXLElBQUksSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQzVDLENBQUMsS0FBSyxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksV0FBVyxF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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBZ0JiLEtBQUs7OztBQ2hCUCxJQUFlO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBazZCYixLQUFLOzs7QUNsNkJQLElBQWU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWdCYixLQUFLOzs7QUNoQlAsSUFBZTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQThFYixLQUFLOzs7QUM3RVA7QUFBQSxFQUNFO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxJQUNFLGlCQUFTO0FBY2IsSUFBTSxlQUFlLENBQUMsV0FBbUIsU0FBUSxLQUFLLEtBQU07QUEySXJEO0FBQUEsTUFBTSxrQkFBZ0Q7QUFBQSxFQUNuRDtBQUFBLEVBRUE7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBLGtCQUEwQjtBQUFBLEVBQzFCLGdCQUF5QjtBQUFBLEVBRXpCO0FBQUEsRUFDQTtBQUFBLEVBRUE7QUFBQSxFQUNBO0FBQUEsRUFFQTtBQUFBLEVBQ0E7QUFBQSxFQUVBO0FBQUEsRUFDQSxXQUE4QixDQUFDO0FBQUEsRUFDL0IsU0FBd0IsQ0FBQztBQUFBLEVBQ3pCLGFBQTBCLENBQUM7QUFBQSxFQUUzQjtBQUFBLEVBQ0EsYUFBMEIsQ0FBQztBQUFBLEVBQzNCLGNBQTRCLENBQUM7QUFBQSxFQUU3QjtBQUFBLEVBRVIsV0FBVyxDQUFDLE9BQW9CO0FBQzlCLFNBQUssY0FBYyxNQUFNO0FBRXpCLFNBQUssZUFBZSxLQUFLLGVBQWUsTUFBTTtBQUM5QyxTQUFLLGdCQUFnQixLQUFLLGdCQUFnQixNQUFNO0FBRWhELFNBQUssMEJBQTBCLElBQUksZUFBYyx1QkFBdUI7QUFBQSxNQUN0RSxXQUFXO0FBQUEsTUFDWCxhQUFhO0FBQUEsTUFDYixZQUFZLENBQUMsb0JBQW9CLGdCQUFnQjtBQUFBLE1BQ2pELFVBQVU7QUFBQSxRQUNSO0FBQUEsUUFFQTtBQUFBLFFBQ0E7QUFBQSxRQUVBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0E7QUFBQSxRQUVBO0FBQUEsUUFFQTtBQUFBLFFBQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLE1BQ0Y7QUFBQSxJQUNGLENBQUM7QUFFRCxTQUFLLHdCQUF3QixJQUFJLGVBQWMsdUJBQXVCO0FBQUEsTUFDcEUsV0FBVztBQUFBLE1BQ1gsYUFBYTtBQUFBLE1BQ2IsWUFBWSxDQUFDLG9CQUFvQixzQkFBc0I7QUFBQSxNQUN2RCxVQUFVLENBQUMsYUFBYSxRQUFRO0FBQUEsSUFDbEMsQ0FBQztBQUVELFNBQUssZ0JBQWdCLElBQUk7QUFDekIsU0FBSyxlQUFlLElBQUk7QUFFeEIsU0FBSyxjQUFjLFdBQVc7QUFDOUIsU0FBSyxjQUFjLFFBQVEsQ0FBQyxpQkFBaUI7QUFDM0MsbUJBQWEsU0FBUyxLQUFLLGNBQWMsS0FBSyxhQUFhO0FBRTNELFdBQUssYUFBYSxLQUFLLENBQUMscUJBQXFCO0FBQzNDLHlCQUFpQixjQUFjLFlBQVk7QUFBQSxPQUM1QztBQUFBLEtBQ0Y7QUFLRCxVQUFNLGFBQWEsSUFBSSxnQkFBZ0I7QUFDdkMsZUFDRyxNQUFNLEVBQ04saUJBQWlCLGVBQWUsRUFDaEMsT0FBTyxFQUNQLGdCQUFnQixvQkFBb0IsT0FBTyxFQUMzQyxPQUFPLEVBQ1AsZ0JBQWdCLEVBQ2hCLGdCQUFnQixrQkFBa0IsT0FBTztBQUU1QyxTQUFLLHFCQUFxQixJQUFJLGdCQUFnQixTQUM1QyxLQUFLLHlCQUNMLFdBQVcsT0FBTyxDQUNwQjtBQUVBLFVBQU0sb0JBQW9CLENBQUM7QUFDM0Isc0JBQWtCLEtBQUssR0FBTSxDQUFJO0FBQ2pDLHNCQUFrQixNQUFLLEdBQU0sQ0FBSTtBQUNqQyxzQkFBa0IsS0FBSyxJQUFNLENBQUk7QUFDakMsc0JBQWtCLE1BQUssSUFBTSxDQUFJO0FBRWpDLFNBQUssbUJBQW1CLGVBQ3RCLEdBQ0EsbUJBQ0Esa0JBQWtCLE1BQ3BCO0FBQ0EsU0FBSyxtQkFBbUIsa0JBQWtCLENBQUM7QUFDM0MsU0FBSyxtQkFBbUIsa0JBQWtCLENBQUM7QUFLM0MsZUFDRyxNQUFNLEVBQ04saUJBQWlCLGVBQWUsRUFDaEMsT0FBTyxFQUNQLGdCQUFnQixvQkFBb0IsT0FBTyxFQUMzQyxnQkFBZ0Isd0JBQXdCLE9BQU87QUFFbEQsU0FBSyxrQkFBa0IsSUFBSSxnQkFBZ0IsU0FDekMsS0FBSyx1QkFDTCxXQUFXLE9BQU8sQ0FDcEI7QUFFQSxVQUFNLGlCQUEyQixDQUFDO0FBQ2xDLG1CQUFlLEtBQUssR0FBTSxHQUFNLEdBQUcsQ0FBQztBQUNwQyxtQkFBZSxNQUFLLEdBQU0sR0FBTSxHQUFHLENBQUM7QUFDcEMsbUJBQWUsS0FBSyxJQUFNLEdBQU0sR0FBRyxDQUFDO0FBQ3BDLG1CQUFlLE1BQUssSUFBTSxHQUFNLEdBQUcsQ0FBQztBQUVwQyxTQUFLLGdCQUFnQixlQUNuQixHQUNBLGdCQUNBLGVBQWUsTUFDakI7QUFDQSxTQUFLLGdCQUFnQixrQkFBa0IsQ0FBQztBQUN4QyxTQUFLLGdCQUFnQixrQkFBa0IsQ0FBQztBQUt4QyxTQUFLLG9CQUFvQixJQUFJO0FBQzdCLFNBQUssa0JBQWtCLFdBQVcsSUFBSTtBQUV0QyxTQUFLLHFCQUFxQixJQUFJO0FBQzlCLFNBQUssbUJBQW1CLFdBQVcsSUFBSTtBQUV2QyxTQUFLLFVBQVU7QUFBQSxNQUNiLFVBQWMsYUFBSyxXQUFXLEdBQUcsR0FBRyxDQUFDO0FBQUEsTUFDckMsUUFBWSxhQUFLLFdBQVcsS0FBSyxLQUFLLEdBQUc7QUFBQSxNQUN6QyxJQUFRLGFBQUssV0FBVyxHQUFHLEdBQUcsQ0FBQztBQUFBLElBQ2pDO0FBQUE7QUFBQSxFQUdGLFVBQVU7QUFBQSxJQUNSO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxLQUNzQjtBQUN0QixRQUFJLFVBQVUsR0FBRztBQUNmLFlBQU0sSUFBSSxNQUFNLHVCQUF1QjtBQUFBLElBQ3pDO0FBQ0EsUUFBSSxtQkFBbUIsS0FBSyxtQkFBbUIsR0FBRztBQUNoRCxZQUFNLElBQUksTUFBTSwyQkFBMkI7QUFBQSxJQUM3QztBQUNBLFFBQUksbUJBQW1CLEtBQUssbUJBQW1CLEdBQUc7QUFDaEQsWUFBTSxJQUFJLE1BQU0saUNBQWlDO0FBQUEsSUFDbkQ7QUEwQkEsU0FBSyxTQUFTLEtBQUs7QUFBQSxNQUNqQixVQUFVLENBQUMsU0FBUyxJQUFJLFNBQVMsSUFBSSxTQUFTLEVBQUU7QUFBQSxNQUVoRCxhQUFhLENBQUMsWUFBWSxJQUFJLFlBQVksSUFBSSxZQUFZLElBQUksWUFBWSxFQUFFO0FBQUEsTUFFNUU7QUFBQSxNQUNBLE9BQU8sQ0FBQyxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sRUFBRTtBQUFBLE1BQ3BDO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0YsQ0FBQztBQUFBO0FBQUEsRUFHSCxPQUFPO0FBQUEsSUFDTDtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsS0FDbUI7QUFDbkIsUUFBSSxRQUFRLE1BQU0sS0FBSyxRQUFRLE1BQU0sS0FBSyxRQUFRLE1BQU0sR0FBRztBQUN6RCxZQUFNLElBQUksTUFBTSxrQkFBa0I7QUFBQSxJQUNwQztBQUNBLFFBQUksbUJBQW1CLEtBQUssbUJBQW1CLEdBQUc7QUFDaEQsWUFBTSxJQUFJLE1BQU0sd0JBQXdCO0FBQUEsSUFDMUM7QUFFQSxTQUFLLE9BQU8sS0FBSztBQUFBLE1BQ2YsVUFBVSxDQUFDLFNBQVMsSUFBSSxTQUFTLElBQUksU0FBUyxFQUFFO0FBQUEsTUFDaEQsYUFBYSxDQUFDLFlBQVksSUFBSSxZQUFZLElBQUksWUFBWSxJQUFJLFlBQVksRUFBRTtBQUFBLE1BQzVFLFNBQWEsYUFBSyxNQUFNLE9BQU87QUFBQSxNQUMvQixPQUFXLGFBQUssTUFBTSxLQUFLO0FBQUEsTUFDM0I7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRixDQUFDO0FBQUE7QUFBQSxFQUdILFlBQVk7QUFBQSxJQUNWO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsS0FDWTtBQUNaLFFBQUksbUJBQW1CLEtBQUssbUJBQW1CLEdBQUc7QUFDaEQsWUFBTSxJQUFJLE1BQU0sNkJBQTZCO0FBQUEsSUFDL0M7QUFFQSxTQUFLLFdBQVcsS0FBSztBQUFBLE1BQ25CLElBQVEsYUFBSyxNQUFNLEVBQUU7QUFBQSxNQUNyQixJQUFRLGFBQUssTUFBTSxFQUFFO0FBQUEsTUFDckIsSUFBUSxhQUFLLE1BQU0sRUFBRTtBQUFBLE1BQ3JCLE9BQVcsYUFBSyxNQUFNLEtBQUs7QUFBQSxNQUMzQjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsSUFDRixDQUFDO0FBQUE7QUFBQSxFQUdILFlBQVksR0FBRyxXQUFXLGFBQXdCO0FBR2hELFFBQUksYUFBYTtBQUFHLFlBQU0sSUFBSSxNQUFNLHVCQUF1QjtBQUMzRCxRQUFRLGFBQUssT0FBTyxTQUFTLE1BQU07QUFDakMsWUFBTSxJQUFJLE1BQU0sdUJBQXVCO0FBRXpDLFVBQU0sTUFBVSxhQUFLLFVBQWMsYUFBSyxNQUFNLFNBQVMsR0FBRyxTQUFTO0FBRW5FLFNBQUssV0FBVyxLQUFLLEVBQUUsV0FBVyxLQUFLLFVBQVUsQ0FBQztBQUFBO0FBQUEsRUFHcEQsYUFBYSxHQUFHLFVBQVUsV0FBVyxVQUE0QjtBQUcvRCxRQUFJLGFBQWE7QUFBRyxZQUFNLElBQUksTUFBTSx1QkFBdUI7QUFDM0QsUUFBSSxVQUFVO0FBQUcsWUFBTSxJQUFJLE1BQU0sdUJBQXVCO0FBRXhELFNBQUssWUFBWSxLQUFLO0FBQUEsTUFDcEIsVUFBYyxhQUFLLE1BQU0sUUFBUTtBQUFBLE1BQ2pDO0FBQUEsTUFDQTtBQUFBLElBQ0YsQ0FBQztBQUFBO0FBQUEsRUFHSCxNQUFNLENBQ0osS0FDQSxRQUNBLElBQ0E7QUFDQSxJQUFJLGFBQUssS0FBSyxLQUFLLFFBQVEsVUFBVSxHQUFHO0FBS3hDLFFBQUksYUFBaUIsYUFBSyxJQUFRLGFBQUssT0FBTyxHQUFHLFFBQVEsR0FBRztBQUM1RCxpQkFBaUIsYUFBSyxVQUFVLFlBQVksVUFBVTtBQUN0RCxpQkFBaUIsYUFBSyxJQUFJLFlBQVksS0FBSyxVQUFVO0FBQ3JELElBQUksYUFBSyxLQUFLLEtBQUssUUFBUSxRQUFRLFVBQVU7QUFLN0MsVUFBTSxRQUFZLGFBQUssVUFBYyxhQUFLLE9BQU8sR0FBRyxFQUFFO0FBQ3RELElBQUksYUFBSyxLQUFLLEtBQUssUUFBUSxJQUFJLEtBQUs7QUFBQTtBQUFBLEVBR3RDLE1BQU0sR0FBRztBQUdQLFNBQUssbUJBQW1CO0FBQ3hCLFNBQUssc0JBQXNCO0FBQUE7QUFBQSxFQUdyQixrQkFBa0IsR0FBRztBQUMzQixVQUFNLEtBQUssZUFBYSxXQUFXO0FBRW5DLE9BQUcsU0FBUyxHQUFHLEdBQUcsS0FBSyxjQUFjLEtBQUssYUFBYTtBQUN2RCxPQUFHLE1BQU0sR0FBRyxnQkFBMEM7QUFFdEQsVUFBTSxTQUFTLEtBQUs7QUFFcEIsV0FBTyxLQUFLLENBQUMsZ0JBQWdCO0FBQzNCLGtCQUFZLGtCQUFrQixhQUFhLEtBQUssZUFBZSxDQUFDO0FBSWhFLFVBQUksS0FBSyxlQUFlO0FBQ3RCLGNBQU0sU0FBUyxJQUFJLEtBQUssZUFBZSxLQUFLLGdCQUFnQjtBQUM1RCxjQUFNLFNBQVMsSUFBSSxLQUFLLGdCQUFnQixLQUFLLGlCQUFpQjtBQUU5RCxvQkFBWSxpQkFBaUIsVUFBVSxPQUFPLEtBQUs7QUFBQSxNQUNyRCxPQUFPO0FBQ0wsb0JBQVksaUJBQWlCLFVBQVUsR0FBRyxDQUFDO0FBQUE7QUFHN0MsV0FBSyxnQkFBZ0IsT0FBTztBQUFBLEtBQzdCO0FBQUE7QUFBQSxFQUdLLHFCQUFxQixHQUFHO0FBQzlCLFVBQU0sS0FBSyxlQUFhLFdBQVc7QUFFbkMsVUFBTSxhQUFhLEtBQUsseUJBQXlCO0FBQ2pELFNBQUssbUJBQW1CLGVBQWUsR0FBRyxZQUFZLFdBQVcsTUFBTTtBQUV2RSxVQUFNLGNBQWMsS0FBSyxNQUFNLEtBQUssWUFBWTtBQUNoRCxVQUFNLGVBQWUsS0FBSyxNQUFNLEtBQUssYUFBYTtBQUVsRCxTQUFLLGFBQWEsS0FBSyxNQUFNO0FBQzNCLFNBQUcsU0FBUyxHQUFHLEdBQUcsYUFBYSxZQUFZO0FBQzNDLFNBQUcsTUFBTSxHQUFHLGdCQUEwQztBQUV0RDtBQUdFLGNBQU0sU0FBUyxLQUFLO0FBRXBCLGVBQU8sS0FBSyxDQUFDLGdCQUFnQjtBQUMzQixzQkFBWSxpQkFDVixlQUNBLEtBQUssUUFBUSxTQUFTLElBQ3RCLEtBQUssUUFBUSxTQUFTLElBQ3RCLEtBQUssUUFBUSxTQUFTLEVBQ3hCO0FBTUE7QUFHRSxrQkFBTSxrQkFBNEIsQ0FBQztBQUVuQztBQUNFO0FBR0UsNEJBQVksbUJBQW1CLGtCQUFrQixDQUFDO0FBRWxELDJCQUFXLFVBQVUsS0FBSyxVQUFVO0FBT2xDLGtDQUFnQixLQUNkLE9BQU8sU0FBUyxJQUNoQixPQUFPLFNBQVMsSUFDaEIsT0FBTyxTQUFTLEVBQ2xCO0FBQ0Esa0NBQWdCLEtBQ2QsT0FBTyxZQUFZLElBQ25CLE9BQU8sWUFBWSxJQUNuQixPQUFPLFlBQVksSUFDbkIsT0FBTyxZQUFZLEVBQ3JCO0FBQ0Esa0NBQWdCLEtBQUssT0FBTyxNQUFNO0FBRWxDLGtDQUFnQixLQUNkLE9BQU8sTUFBTSxJQUNiLE9BQU8sTUFBTSxJQUNiLE9BQU8sTUFBTSxFQUNmO0FBQ0Esa0NBQWdCLEtBQUssT0FBTyxnQkFBZ0I7QUFDNUMsa0NBQWdCLEtBQUssT0FBTyxnQkFBZ0I7QUFFNUMsa0NBQWdCLEtBQUssT0FBTyxvQkFBb0IsSUFBSSxDQUFDO0FBQ3JELGtDQUFnQixLQUFLLE9BQU8sc0JBQXNCLElBQUksQ0FBQztBQUV2RCxrQ0FBZ0IsS0FBSyxPQUFPLG9CQUFvQixJQUFJLENBQUM7QUFBQSxnQkFDdkQ7QUFFQSw0QkFBWSxtQkFDVixpQkFDQSxnQkFBZ0IsTUFDbEI7QUFBQSxjQUNGO0FBRUE7QUFHRSw0QkFBWSxtQkFDVixnQkFDQSxnQkFBZ0IsTUFDbEI7QUFFQSwyQkFBVyxPQUFPLEtBQUssUUFBUTtBQUc3QixrQ0FBZ0IsS0FDZCxJQUFJLFNBQVMsSUFDYixJQUFJLFNBQVMsSUFDYixJQUFJLFNBQVMsRUFDZjtBQUNBLGtDQUFnQixLQUNkLElBQUksWUFBWSxJQUNoQixJQUFJLFlBQVksSUFDaEIsSUFBSSxZQUFZLElBQ2hCLElBQUksWUFBWSxFQUNsQjtBQUVBLGtDQUFnQixLQUNkLElBQUksUUFBUSxJQUNaLElBQUksUUFBUSxJQUNaLElBQUksUUFBUSxFQUNkO0FBRUEsa0NBQWdCLEtBQ2QsSUFBSSxNQUFNLElBQ1YsSUFBSSxNQUFNLElBQ1YsSUFBSSxNQUFNLEVBQ1o7QUFDQSxrQ0FBZ0IsS0FBSyxJQUFJLGdCQUFnQjtBQUN6QyxrQ0FBZ0IsS0FBSyxJQUFJLGdCQUFnQjtBQUV6QyxrQ0FBZ0IsS0FBSyxJQUFJLG9CQUFvQixJQUFJLENBQUM7QUFDbEQsa0NBQWdCLEtBQUssSUFBSSxzQkFBc0IsSUFBSSxDQUFDO0FBRXBELGtDQUFnQixLQUFLLElBQUksb0JBQW9CLElBQUksQ0FBQztBQUFBLGdCQUNwRDtBQUVBLDRCQUFZLG1CQUNWLGVBQ0EsZ0JBQWdCLE1BQ2xCO0FBQUEsY0FDRjtBQUVBO0FBR0UsNEJBQVksbUJBQ1Ysb0JBQ0EsZ0JBQWdCLE1BQ2xCO0FBRUEsMkJBQVcsWUFBWSxLQUFLLFlBQVk7QUFHdEMsa0NBQWdCLEtBQ2QsU0FBUyxHQUFHLElBQ1osU0FBUyxHQUFHLElBQ1osU0FBUyxHQUFHLEVBQ2Q7QUFDQSxrQ0FBZ0IsS0FDZCxTQUFTLEdBQUcsSUFDWixTQUFTLEdBQUcsSUFDWixTQUFTLEdBQUcsRUFDZDtBQUNBLGtDQUFnQixLQUNkLFNBQVMsR0FBRyxJQUNaLFNBQVMsR0FBRyxJQUNaLFNBQVMsR0FBRyxFQUNkO0FBRUEsa0NBQWdCLEtBQ2QsU0FBUyxNQUFNLElBQ2YsU0FBUyxNQUFNLElBQ2YsU0FBUyxNQUFNLEVBQ2pCO0FBQ0Esa0NBQWdCLEtBQUssU0FBUyxnQkFBZ0I7QUFFOUMsa0NBQWdCLEtBQUssU0FBUyxvQkFBb0IsSUFBSSxDQUFDO0FBQ3ZELGtDQUFnQixLQUFLLFNBQVMsc0JBQXNCLElBQUksQ0FBQztBQUFBLGdCQUMzRDtBQUVBLDRCQUFZLG1CQUNWLG1CQUNBLGdCQUFnQixNQUNsQjtBQUFBLGNBQ0Y7QUFBQSxZQUNGO0FBRUEsZUFBRyxjQUFjLEdBQUcsV0FBVyxDQUFDO0FBQ2hDLGlCQUFLLGtCQUFrQixRQUFRLENBQUMscUJBQXFCO0FBQ25ELCtCQUFpQixPQUFPLEdBQUcsZUFBZTtBQUFBLGFBQzNDO0FBRUQsd0JBQVksbUJBQW1CLHNCQUFzQixDQUFDO0FBQ3RELHdCQUFZLG1CQUNWLHNCQUNBLGdCQUFnQixNQUNsQjtBQUFBLFVBQ0Y7QUFFQTtBQUdFLGtCQUFNLG1CQUE2QixDQUFDO0FBRXBDO0FBR0UsMEJBQVksbUJBQW1CLG9CQUFvQixDQUFDO0FBRXBELHlCQUFXLFlBQVksS0FBSyxZQUFZO0FBR3RDLGlDQUFpQixLQUNmLFNBQVMsVUFBVSxJQUNuQixTQUFTLFVBQVUsSUFDbkIsU0FBUyxVQUFVLEVBQ3JCO0FBQ0EsaUNBQWlCLEtBQUssU0FBUyxTQUFTO0FBQUEsY0FDMUM7QUFFQSwwQkFBWSxtQkFDVixtQkFDQSxpQkFBaUIsTUFDbkI7QUFBQSxZQUNGO0FBRUE7QUFHRSwwQkFBWSxtQkFDVixxQkFDQSxpQkFBaUIsTUFDbkI7QUFFQSx5QkFBVyxhQUFhLEtBQUssYUFBYTtBQUd4QyxpQ0FBaUIsS0FDZixVQUFVLFNBQVMsSUFDbkIsVUFBVSxTQUFTLElBQ25CLFVBQVUsU0FBUyxFQUNyQjtBQUNBLGlDQUFpQixLQUFLLFVBQVUsTUFBTTtBQUN0QyxpQ0FBaUIsS0FBSyxVQUFVLFNBQVM7QUFBQSxjQUMzQztBQUVBLDBCQUFZLG1CQUNWLG9CQUNBLGlCQUFpQixNQUNuQjtBQUFBLFlBQ0Y7QUFFQSxlQUFHLGNBQWMsR0FBRyxXQUFXLENBQUM7QUFDaEMsaUJBQUssbUJBQW1CLFFBQVEsQ0FBQyxxQkFBcUI7QUFDcEQsK0JBQWlCLE9BQU8sR0FBRyxnQkFBZ0I7QUFBQSxhQUM1QztBQUVELHdCQUFZLG1CQUFtQix1QkFBdUIsQ0FBQztBQUFBLFVBQ3pEO0FBTUEsZUFBSyxtQkFBbUIsT0FBTztBQUFBLFNBQ2hDO0FBQUEsTUFDSDtBQUFBLEtBQ0Q7QUFFRCxPQUFHLFNBQVMsR0FBRyxHQUFHLEtBQUssY0FBYyxLQUFLLGFBQWE7QUFBQTtBQUFBLEVBR3pELEtBQUssR0FBUztBQUNaLFNBQUssV0FBVyxTQUFTO0FBQ3pCLFNBQUssWUFBWSxTQUFTO0FBRTFCLFNBQUssU0FBUyxTQUFTO0FBQ3ZCLFNBQUssT0FBTyxTQUFTO0FBQ3JCLFNBQUssV0FBVyxTQUFTO0FBQUE7QUFBQSxFQUczQixpQkFBaUIsQ0FBQyxrQkFBZ0M7QUFDaEQsUUFDRSxxQkFBcUIsS0FBSyxtQkFDMUIsb0JBQW9CLEtBQ3BCLG1CQUFtQixHQUNuQjtBQUNBO0FBQUEsSUFDRjtBQUVBLFNBQUssa0JBQWtCO0FBRXZCLFNBQUssZUFBZSxLQUFLLE1BQU0sS0FBSyxlQUFlLEtBQUssZUFBZTtBQUN2RSxTQUFLLGdCQUFnQixLQUFLLE1BQU0sS0FBSyxnQkFBZ0IsS0FBSyxlQUFlO0FBRXpFLFNBQUssY0FBYyxRQUFRLENBQUMsaUJBQWlCO0FBQzNDLG1CQUFhLE9BQU8sS0FBSyxjQUFjLEtBQUssYUFBYTtBQUFBLEtBQzFEO0FBQUE7QUFBQSxFQUdILGlCQUFpQixHQUFXO0FBQzFCLFdBQU8sS0FBSztBQUFBO0FBQUEsRUFHZCxlQUFlLENBQUMsU0FBa0I7QUFDaEMsU0FBSyxnQkFBZ0I7QUFBQTtBQUFBLEVBR3ZCLGVBQWUsR0FBWTtBQUN6QixXQUFPLEtBQUs7QUFBQTtBQUFBLEVBR2QsY0FBYyxHQUFxQjtBQUNqQyxXQUFPLENBQUMsS0FBSyxjQUFjLEtBQUssYUFBYTtBQUFBO0FBQUEsRUFHdkMsd0JBQXdCLEdBQTBCO0FBQ3hELFVBQU0sYUFBaUIsYUFBSyxJQUN0QixhQUFLLE9BQU8sR0FDaEIsS0FBSyxRQUFRLFFBQ2IsS0FBSyxRQUFRLFFBQ2Y7QUFFQSxVQUFNLFVBQWMsYUFBSyxNQUNuQixhQUFLLE9BQU8sR0FDaEIsWUFDQSxLQUFLLFFBQVEsRUFDZjtBQUNBLFVBQU0sUUFBWSxhQUFLLE1BQVUsYUFBSyxPQUFPLEdBQUcsU0FBUyxVQUFVO0FBRW5FLFVBQU0sV0FBVyxhQUFhLEtBQUssY0FBYyxHQUFHO0FBQ3BELFVBQU0sVUFBVyxLQUFLLElBQUksUUFBUSxJQUFJLElBQUssS0FBSyxJQUFJLFFBQVE7QUFFNUQsVUFBTSxtQkFBdUIsYUFBSyxTQUM1QixhQUFLLE9BQU8sR0FDaEIsWUFDSSxhQUFLLFdBQVcsU0FBUyxTQUFTLE9BQU8sQ0FDL0M7QUFDQSxVQUFNLFlBQWdCLGFBQUssSUFDckIsYUFBSyxPQUFPLEdBQ2hCLEtBQUssUUFBUSxVQUNiLGdCQUNGO0FBRUEsVUFBTSxjQUFjLEtBQUssZUFBZSxLQUFLO0FBQzdDLFVBQU0sZUFBbUIsYUFBSyxTQUN4QixhQUFLLE9BQU8sR0FDaEIsU0FDSSxhQUFLLFdBQVcsYUFBYSxhQUFhLFdBQVcsQ0FDM0Q7QUFFQSxVQUFNLFFBQVksYUFBSyxJQUFRLGFBQUssT0FBTyxHQUFHLFdBQVcsS0FBSztBQUM5RCxVQUFNLFlBQWdCLGFBQUssU0FBYSxhQUFLLE9BQU8sR0FBRyxXQUFXLEtBQUs7QUFDdkUsVUFBTSxhQUFpQixhQUFLLFNBQ3RCLGFBQUssT0FBTyxHQUNoQixPQUNBLFlBQ0Y7QUFDQSxVQUFNLGdCQUFvQixhQUFLLFNBQ3pCLGFBQUssT0FBTyxHQUNoQixXQUNBLFlBQ0Y7QUFDQSxVQUFNLGNBQWtCLGFBQUssSUFBUSxhQUFLLE9BQU8sR0FBRyxPQUFPLFlBQVk7QUFDdkUsVUFBTSxpQkFBcUIsYUFBSyxJQUMxQixhQUFLLE9BQU8sR0FDaEIsV0FDQSxZQUNGO0FBRUEsV0FBTztBQUFBLE1BQ0wsWUFBWTtBQUFBLE1BQ1osWUFBWTtBQUFBLE1BQ1osWUFBWTtBQUFBLE1BQ1osV0FBVztBQUFBLE1BQ1gsV0FBVztBQUFBLE1BQ1gsV0FBVztBQUFBLE1BQ1gsZUFBZTtBQUFBLE1BQ2YsZUFBZTtBQUFBLE1BQ2YsZUFBZTtBQUFBLE1BQ2YsY0FBYztBQUFBLE1BQ2QsY0FBYztBQUFBLE1BQ2QsY0FBYztBQUFBLElBQ2hCO0FBQUE7QUFBQSxNQUdFLFdBQVcsR0FBRztBQUNoQixXQUFPLEtBQUs7QUFBQTtBQUFBLE1BRVYsWUFBWSxHQUFHO0FBQ2pCLFdBQU8sS0FBSztBQUFBO0FBQUEsTUFFVixXQUFXLEdBQUc7QUFDaEIsV0FBTyxLQUFLO0FBQUE7QUFBQSxNQUVWLFlBQVksR0FBRztBQUNqQixXQUFPLEtBQUs7QUFBQTtBQUFBLE1BR1YsTUFBTSxHQUFzQjtBQUM5QixXQUFPLEtBQUs7QUFBQTtBQUFBLE1BR1YsT0FBTyxHQUFtQztBQUM1QyxXQUFPLEtBQUs7QUFBQTtBQUFBLE1BRVYsS0FBSyxHQUErQjtBQUN0QyxXQUFPLEtBQUs7QUFBQTtBQUFBLE1BRVYsU0FBUyxHQUE2QjtBQUN4QyxXQUFPLEtBQUs7QUFBQTtBQUFBLE1BR1YsU0FBUyxHQUE2QjtBQUN4QyxXQUFPLEtBQUs7QUFBQTtBQUFBLE1BRVYsVUFBVSxHQUE4QjtBQUMxQyxXQUFPLEtBQUs7QUFBQTtBQUVoQjs7QUN4NUJBLE1BQVEsaUNBQWlCLGlCQUFTO0FBQ2xDLE1BQVEsb0JBQVcsaUJBQVM7QUFDNUIsTUFBUSw2QkFBYyxvQ0FBbUIsaUJBQVM7QUFjbEQsSUFBTSxTQUFTO0FBTVI7QUFBQSxNQUFNLFNBQVM7QUFBQSxFQUNaO0FBQUEsRUFFQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBRUEsb0JBQW9CLElBQUk7QUFBQSxFQUN4QixpQkFBaUIsSUFBSTtBQUFBLEVBRTdCLFdBQVcsQ0FBQyxLQUFrQjtBQUM1QixTQUFLLE9BQU87QUFFWixTQUFLLE9BQ0gsS0FBSyxLQUFLLGlCQUFpQixPQUMzQixLQUFLLEtBQUssaUJBQWlCLE1BQzdCO0FBRUEsbUJBQWEsV0FBVyxLQUFLLEtBQUssZ0JBQWdCO0FBRWxELFNBQUsscUJBQXFCLElBQUksa0JBQWtCO0FBQUEsTUFDOUMsYUFBYSxLQUFLLEtBQUssaUJBQWlCO0FBQUEsTUFDeEMsY0FBYyxLQUFLLEtBQUssaUJBQWlCO0FBQUEsTUFDekMsTUFBTTtBQUFBLElBQ1IsQ0FBQztBQUNELFNBQUssZ0JBQWdCLElBQUk7QUFDekIsU0FBSyxrQkFBa0IsSUFBSTtBQUMzQixTQUFLLHFCQUFxQixJQUFJLGlCQUFTLFVBQVUsc0JBQy9DLEtBQUssS0FBSyxpQkFBaUIsT0FDM0IsS0FBSyxLQUFLLGlCQUFpQixNQUM3QjtBQUFBO0FBQUEsRUFHRixVQUFVLEdBQUc7QUFDWCxVQUFNLEtBQUssZUFBYSxXQUFXO0FBSW5DLFVBQU0sWUFBWTtBQUNsQixPQUFHLFlBQVksR0FBRyxrQkFBa0IsU0FBUztBQU03QyxPQUFHLFFBQVEsR0FBRyxVQUFVO0FBQ3hCLE9BQUcsUUFBUSxHQUFHLEtBQUs7QUFDbkIsT0FBRyxRQUFRLEdBQUcsU0FBUztBQUN2QixPQUFHLFVBQVUsR0FBRyxLQUFLO0FBRXJCLE9BQUcsV0FBVyxHQUFLLEdBQUssR0FBSyxDQUFHO0FBQ2hDLE9BQUcsV0FBVyxDQUFHO0FBQUE7QUFBQSxFQUduQixNQUFNLENBQUMsT0FBZSxRQUFnQjtBQUNwQyxTQUFLLGtCQUFrQixnQkFBZ0IsT0FBTyxNQUFNO0FBQ3BELFNBQUssa0JBQWtCLGlCQUFpQjtBQUFBLE1BQ3RDLE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxJQUNQLENBQUM7QUFFRCxTQUFLLGVBQWUsZ0JBQWdCLE9BQU8sTUFBTTtBQUVqRCxVQUFNLFNBQVMsUUFBUTtBQUN2QixVQUFNLFVBQVUsU0FBUztBQUV6QixTQUFLLGVBQWUsZ0JBQWdCO0FBQUEsTUFDbEMsT0FBTztBQUFBLE1BQ1AsUUFBUTtBQUFBLE1BQ1IsTUFBTTtBQUFBLE1BQ04sU0FBUztBQUFBLE1BQ1QsT0FBTTtBQUFBLE1BQ04sS0FBSztBQUFBLElBQ1AsQ0FBQztBQUNELFNBQUssZUFBZSxPQUFPLENBQUMsUUFBUSxTQUFTLENBQUMsQ0FBQztBQUMvQyxTQUFLLGVBQWUsVUFBVSxDQUFDLFFBQVEsU0FBUyxDQUFDLENBQUM7QUFDbEQsU0FBSyxlQUFlLFVBQVUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZDLFNBQUssZUFBZSxnQkFBZ0I7QUFBQTtBQUFBLEVBRzlCLG9CQUFvQixDQUFDLFFBQXVCO0FBQ2xELFVBQU0sSUFBSSxxQkFBdUIsT0FBTztBQUN4QyxVQUFNLElBQUkscUJBQXVCLE9BQU87QUFDeEMsVUFBTSxJQUFJO0FBRVYsVUFBTSxZQUFxQztBQUFBLE1BQ3pDLEVBQUUsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNULENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLEVBQUUsR0FBRyxJQUFJLENBQUM7QUFBQSxNQUNWLENBQUMsR0FBRyxJQUFJLENBQUM7QUFBQSxNQUNULENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENBQUMsR0FBRyxJQUFJLENBQUM7QUFBQSxNQUNULENBQUMsSUFBSSxHQUFHLENBQUM7QUFBQSxNQUNULENBQUMsSUFBSSxJQUFJLENBQUM7QUFBQSxNQUNWLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLEVBQUUsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNULENBQUMsSUFBSSxHQUFHLENBQUM7QUFBQSxNQUNULEVBQUUsSUFBSSxHQUFHLENBQUM7QUFBQSxJQUNaO0FBRUEsYUFBUyxLQUFLLEVBQUcsS0FBSyxVQUFVLFVBQVUsSUFBSTtBQUM1QyxnQkFBVSxJQUFJLE1BQU0sT0FBTyxTQUFTO0FBQ3BDLGdCQUFVLElBQUksTUFBTSxPQUFPLFNBQVM7QUFDcEMsZ0JBQVUsSUFBSSxNQUFNLE9BQU8sU0FBUztBQUFBLElBQ3RDO0FBRUEsVUFBTSxVQUEyQztBQUFBLE1BQy9DLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENBQUMsR0FBRyxJQUFJLENBQUM7QUFBQSxNQUNULENBQUMsR0FBRyxHQUFHLEVBQUU7QUFBQSxNQUNULENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENBQUMsR0FBRyxJQUFJLENBQUM7QUFBQSxNQUNULENBQUMsR0FBRyxHQUFHLEVBQUU7QUFBQSxNQUNULENBQUMsR0FBRyxJQUFJLENBQUM7QUFBQSxNQUNULENBQUMsSUFBSSxHQUFHLENBQUM7QUFBQSxNQUNULENBQUMsR0FBRyxHQUFHLENBQUM7QUFBQSxNQUNSLENB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QUFLLGVBQU8sUUFBUSxrQkFBa0IsR0FBRztBQUN2QyxVQUFNLElBQUksTUFBTSxzQ0FBc0M7QUFBQSxFQUN4RDtBQU1BLGFBQVcsSUFBSSxXQUFXO0FBQUEsSUFDeEI7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLEVBQ0YsQ0FBQztBQUVELFNBQU8sSUFBSSw0QkFBNEI7QUFFdkMsUUFBTSxTQUFTLEtBQUs7QUFFcEIsU0FBTyxJQUFJLDJCQUEyQjtBQUV0QyxXQUFTLE1BQU07QUFFZixTQUFPLElBQUksdUJBQXVCO0FBTWxDLFFBQU0sdUJBQXVCO0FBQzdCLEVBQVUsa0JBQWtCLHNCQUFzQixNQUFNO0FBQ3RELFVBQU0sSUFBSSxNQUNSLDBFQUNGO0FBQUEsR0FDRDtBQUFBO0FBR0gsT0FBTyxpQkFBaUIsUUFBUSxZQUFZLEtBQUs7IiwKICAiZGVidWdJZCI6ICIyRDA2N0RDMjg0OUQwMzVDNjQ3NTZlMjE2NDc1NmUyMSIsCiAgIm5hbWVzIjogW10KfQ==
