!function n(o,a,i){function u(e,t){if(!a[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(s)return s(e,!0);throw(r=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",r}r=a[e]={exports:{}},o[e][0].call(r.exports,function(t){return u(o[e][1][t]||t)},r,r.exports,n,o,a,i)}return a[e].exports}for(var s="function"==typeof require&&require,t=0;t<i.length;t++)u(i[t]);return u}({1:[function(t,e,r){!function(o,j){"use strict";function k(t){return document.createElement(t)}function C(t,e){for(var r in e)try{t.style[r]=e[r]}catch(t){}return t}function I(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function D(t,e){if("array"!==I(e))return-1;if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function Y(){var t,e=arguments;for(t in e[1])if(e[1].hasOwnProperty(t))switch(I(e[1][t])){case"object":e[0][t]=Y({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return 2<e.length?Y.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function F(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function G(t,e,r,n){t.addEventListener?t[n?"removeEventListener":"addEventListener"](e,r,!1):t.attachEvent&&t[n?"detachEvent":"attachEvent"]("on"+e,r)}var N,t;t=o.performance,N=t&&(t.now||t.webkitNow)?t[t.now?"now":"webkitNow"].bind(t):function(){return+new Date};var q=o.cancelAnimationFrame||o.cancelRequestAnimationFrame,W=o.requestAnimationFrame;!function(){for(var t=["moz","webkit","o"],n=0,e=0,r=t.length;e<r&&!q;++e)q=o[t[e]+"CancelAnimationFrame"]||o[t[e]+"CancelRequestAnimationFrame"],W=q&&o[t[e]+"RequestAnimationFrame"];q||(W=function(t){var e=N(),r=Math.max(0,16-(e-n));return n=e+r,o.setTimeout(function(){t(e+r)},r)},q=function(t){clearTimeout(t)})}();var U="string"===I(document.createElement("div").textContent)?"textContent":"innerText";function B(e,t){"object"===I(e)&&e.nodeType===j&&(t=e,e=document.body),e=e||document.body;var i,u,r,n,o,a,s,c,h,f=this,l=Y({},B.defaults,t||{}),p={},d=[],m=100,v=[],b=l.threshold,_=0,y=N()-b,g=[],M=[],x="fps"===l.show;function E(t,e,r,n){return u[0|t][Math.round(Math.min((e-r)/(n-r)*m,m))]}function w(){p.legend.fps!==x&&(p.legend.fps=x,p.legend[U]=x?"FPS":"ms"),s=x?f.fps:f.duration,p.count[U]=999<s?"999+":s.toFixed(99<s?0:l.decimals)}function S(){if(r=N(),y<r-l.threshold&&(f.fps-=f.fps/Math.max(1,60*l.smoothing/l.interval),f.duration=1e3/f.fps),function(){for(c=l.history;c--;)g[c]=0===c?f.fps:g[c-1],M[c]=0===c?f.duration:M[c-1]}(),w(),l.heat){if(v.length)for(c=v.length;c--;)v[c].el.style[i[v[c].name].heatOn]=x?E(i[v[c].name].heatmap,f.fps,0,l.maxFps):E(i[v[c].name].heatmap,f.duration,l.threshold,0);if(p.graph&&i.column.heatOn)for(c=d.length;c--;)d[c].style[i.column.heatOn]=x?E(i.column.heatmap,g[c],0,l.maxFps):E(i.column.heatmap,M[c],l.threshold,0)}if(p.graph)for(h=0;h<l.history;h++)d[h].style.height=(x?g[h]?Math.round(a/l.maxFps*Math.min(g[h],l.maxFps)):0:M[h]?Math.round(a/l.threshold*Math.min(M[h],l.threshold)):0)+"px"}function P(){l.interval<20?(n=W(P),S()):(n=setTimeout(P,l.interval),o=W(S))}function T(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),f.toggle()}function A(){l.toggleOn&&G(p.container,l.toggleOn,T,1),e.removeChild(p.container)}function O(){if(i=B.theme[l.theme],!(u=i.compiledHeatmaps||[]).length&&i.heatmaps.length){for(h=0;h<i.heatmaps.length;h++)for(u[h]=[],c=0;c<=m;c++)u[h][c]=(t=.33/m*c,e=i.heatmaps[h].saturation,r=i.heatmaps[h].lightness,a=o=n=void 0,0===(a=r<=.5?r*(1+e):r+e-r*e)?"#000":(t=a*((a-(e=2*r-a))/a)*((t*=6)-(r=Math.floor(t))),t=0===r||6===r?(n=a,o=e+t,e):1===r?(n=a-t,o=a,e):2===r?(o=a,(n=e)+t):3===r?(n=e,o=a-t,a):4===r?(n=e+t,o=e,a):(o=e,(n=a)-t),"#"+F(n)+F(o)+F(t)));i.compiledHeatmaps=u}var t,e,r,n,o,a}function R(){for(var t in p.container&&A(),O(),p.container=C(k("div"),i.container),p.count=p.container.appendChild(C(k("div"),i.count)),p.legend=p.container.appendChild(C(k("div"),i.legend)),p.graph=l.graph?p.container.appendChild(C(k("div"),i.graph)):0,v.length=0,p)p[t]&&i[t].heatOn&&v.push({name:t,el:p[t]});if(d.length=0,p.graph)for(p.graph.style.width=l.history*i.column.width+(l.history-1)*i.column.spacing+"px",c=0;c<l.history;c++)d[c]=p.graph.appendChild(C(k("div"),i.column)),d[c].style.position="absolute",d[c].style.bottom=0,d[c].style.right=c*i.column.width+c*i.column.spacing+"px",d[c].style.width=i.column.width+"px",d[c].style.height="0px";L(),w(),e.appendChild(p.container),p.graph&&(a=p.graph.clientHeight),l.toggleOn&&("click"===l.toggleOn&&(p.container.style.cursor="pointer"),G(p.container,l.toggleOn,T))}function L(){C(p.container,l)}f.options=l,f.fps=0,f.duration=0,f.isPaused=0,f.tickStart=function(){_=N()},f.tick=function(){r=N(),b+=(r-y-b)/l.smoothing,f.fps=1e3/b,f.duration=_<y?b:r-_,y=r},f.pause=function(){return n&&(f.isPaused=1,clearTimeout(n),q(n),q(o),n=o=0),f},f.resume=function(){return n||(f.isPaused=0,P()),f},f.set=function(t,e){return l[t]=e,x="fps"===l.show,-1!==D(t,z)&&R(),-1!==D(t,V)&&L(),f},f.showDuration=function(){return f.set("show","ms"),f},f.showFps=function(){return f.set("show","fps"),f},f.toggle=function(){return f.set("show",x?"ms":"fps"),f},f.hide=function(){return f.pause(),p.container.style.display="none",f},f.show=function(){return f.resume(),p.container.style.display="block",f},f.destroy=function(){f.pause(),A(),f.tick=f.tickStart=function(){}},R(),P()}B.extend=Y,(window.FPSMeter=B).defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var z=["toggleOn","theme","heat","graph","history"],V=["position","zIndex","left","top","right","bottom","margin"]}(window),function(t){"use strict";t.theme={};var e=t.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};t.theme.dark=t.extend({},e,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),t.theme.light=t.extend({},e,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),t.theme.colorful=t.extend({},e,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),t.theme.transparent=t.extend({},e,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}((window,FPSMeter))},{}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=function(t){r.ARRAY_TYPE=o=t},r.toRadian=function(t){return t*i},r.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))},r.RANDOM=r.ARRAY_TYPE=r.EPSILON=void 0;var n=1e-6;r.EPSILON=n;var o="undefined"!=typeof Float32Array?Float32Array:Array;r.ARRAY_TYPE=o;var a=Math.random;r.RANDOM=a;var i=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},{}],3:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=r.vec3=r.vec2=r.quat2=r.quat=r.mat4=r.mat3=r.mat2d=r.mat2=r.glMatrix=void 0;var n=o(t("./common.js"));r.glMatrix=n;n=o(t("./mat2.js"));r.mat2=n;n=o(t("./mat2d.js"));r.mat2d=n;n=o(t("./mat3.js"));r.mat3=n;n=o(t("./mat4.js"));r.mat4=n;n=o(t("./quat.js"));r.quat=n;n=o(t("./quat2.js"));r.quat2=n;n=o(t("./vec2.js"));r.vec2=n;n=o(t("./vec3.js"));r.vec3=n;t=o(t("./vec4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&((n=a?Object.getOwnPropertyDescriptor(t,r):null)&&(n.get||n.set)?Object.defineProperty(o,r,n):o[r]=t[r]);return o.default=t,e&&e.set(t,o),o}r.vec4=t},{"./common.js":2,"./mat2.js":4,"./mat2d.js":5,"./mat3.js":6,"./mat4.js":7,"./quat.js":8,"./quat2.js":9,"./vec2.js":10,"./vec3.js":11,"./vec4.js":12}],4:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new s.ARRAY_TYPE(4);s.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0);return t[0]=1,t[3]=1,t},r.clone=function(t){var e=new s.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,e,r,n){var o=new s.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o},r.set=function(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t},r.transpose=function(t,e){{var r;t===e?(r=e[1],t[1]=e[2],t[2]=r):(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3])}return t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],e=r*a-o*n;return e?(e=1/e,t[0]=a*e,t[1]=-n*e,t[2]=-o*e,t[3]=r*e,t):null},r.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=n,r.rotate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r+a*e,t[1]=o*r+i*e,t[2]=n*-e+a*r,t[3]=o*-e+i*r,t},r.scale=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],e=r[0],r=r[1];return t[0]=n*e,t[1]=o*e,t[2]=a*r,t[3]=i*r,t},r.fromRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},r.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},r.subtract=o,r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=e[0],u=e[1],t=e[2],e=e[3];return Math.abs(r-i)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-t)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(t))&&Math.abs(a-e)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))},r.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},r.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},r.sub=r.mul=void 0;var s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1],e=r[2],r=r[3];return t[0]=n*u+a*s,t[1]=o*u+i*s,t[2]=n*e+a*r,t[3]=o*e+i*r,t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}r.mul=n,r.sub=o},{"./common.js":2}],5:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new l.ARRAY_TYPE(6);l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0);return t[0]=1,t[3]=1,t},r.clone=function(t){var e=new l.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,e,r,n,o,a){var i=new l.ARRAY_TYPE(6);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=o,i[5]=a,i},r.set=function(t,e,r,n,o,a,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],e=r*a-n*o;return e?(e=1/e,t[0]=a*e,t[1]=-n*e,t[2]=-o*e,t[3]=r*e,t[4]=(o*u-a*i)*e,t[5]=(n*i-r*u)*e,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=n,r.rotate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r+a*e,t[1]=o*r+i*e,t[2]=n*-e+a*r,t[3]=o*-e+i*r,t[4]=u,t[5]=s,t},r.scale=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],e=r[0],r=r[1];return t[0]=n*e,t[1]=o*e,t[2]=a*r,t[3]=i*r,t[4]=u,t[5]=s,t},r.translate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],e=r[0],r=r[1];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=n*e+a*r+u,t[5]=o*e+i*r+s,t},r.fromRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t[4]=0,t[5]=0,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},r.subtract=o,r.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},r.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=e[0],c=e[1],h=e[2],f=e[3],t=e[4],e=e[5];return Math.abs(r-s)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-h)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-f)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-t)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(t))&&Math.abs(u-e)<=l.EPSILON*Math.max(1,Math.abs(u),Math.abs(e))},r.sub=r.mul=void 0;var l=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=r[0],h=r[1],f=r[2],l=r[3],e=r[4],r=r[5];return t[0]=n*c+a*h,t[1]=o*c+i*h,t[2]=n*f+a*l,t[3]=o*f+i*l,t[4]=n*e+a*r+u,t[5]=o*e+i*r+s,t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}r.mul=n,r.sub=o},{"./common.js":2}],6:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new _.ARRAY_TYPE(9);_.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},r.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},r.clone=function(t){var e=new _.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromValues=function(t,e,r,n,o,a,i,u,s){var c=new _.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=o,c[5]=a,c[6]=i,c[7]=u,c[8]=s,c},r.set=function(t,e,r,n,o,a,i,u,s,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,e){{var r,n,o;t===e?(r=e[1],n=e[2],o=e[5],t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=o):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8])}return t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],h=e[8],f=h*i-u*c,l=-h*a+u*s,p=c*a-i*s,e=r*f+n*l+o*p;return e?(e=1/e,t[0]=f*e,t[1]=(-h*n+o*c)*e,t[2]=(u*n-o*i)*e,t[3]=l*e,t[4]=(h*r-o*s)*e,t[5]=(-u*r+o*a)*e,t[6]=p*e,t[7]=(-c*r+n*s)*e,t[8]=(i*r-n*a)*e,t):null},r.adjoint=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],e=e[8];return t[0]=i*e-u*c,t[1]=o*c-n*e,t[2]=n*u-o*i,t[3]=u*s-a*e,t[4]=r*e-o*s,t[5]=o*a-r*u,t[6]=a*c-i*s,t[7]=n*s-r*c,t[8]=r*i-n*a,t},r.determinant=function(t){var e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],t=t[8];return e*(t*a-i*s)+r*(-t*o+i*u)+n*(s*o-a*u)},r.multiply=n,r.translate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],h=e[7],f=e[8],e=r[0],r=r[1];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=e*n+r*i+c,t[7]=e*o+r*u+h,t[8]=e*a+r*s+f,t},r.rotate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],h=e[7],f=e[8],e=Math.sin(r),r=Math.cos(r);return t[0]=r*n+e*i,t[1]=r*o+e*u,t[2]=r*a+e*s,t[3]=r*i-e*n,t[4]=r*u-e*o,t[5]=r*s-e*a,t[6]=c,t[7]=h,t[8]=f,t},r.scale=function(t,e,r){var n=r[0],r=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},r.fromRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=r,t[2]=0,t[3]=-r,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},r.fromQuat=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r+r,u=n+n,s=o+o,c=r*i,h=n*i,e=n*u,r=o*i,n=o*u,o=o*s,i=a*i,u=a*u,s=a*s;return t[0]=1-e-o,t[3]=h-s,t[6]=r+u,t[1]=h+s,t[4]=1-c-o,t[7]=n-i,t[2]=r-u,t[5]=n+i,t[8]=1-c-e,t},r.normalFromMat4=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],h=e[8],f=e[9],l=e[10],p=e[11],d=e[12],m=e[13],v=e[14],b=e[15],_=r*u-n*i,y=r*s-o*i,g=r*c-a*i,M=n*s-o*u,x=n*c-a*u,E=o*c-a*s,w=h*m-f*d,S=h*v-l*d,e=h*b-p*d,h=f*v-l*m,f=f*b-p*m,l=l*b-p*v,p=_*l-y*f+g*h+M*e-x*S+E*w;return p?(p=1/p,t[0]=(u*l-s*f+c*h)*p,t[1]=(s*e-i*l-c*S)*p,t[2]=(i*f-u*e+c*w)*p,t[3]=(o*f-n*l-a*h)*p,t[4]=(r*l-o*e+a*S)*p,t[5]=(n*e-r*f-a*w)*p,t[6]=(m*E-v*x+b*M)*p,t[7]=(v*g-d*E-b*y)*p,t[8]=(d*x-m*g+b*_)*p,t):null},r.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},r.subtract=o,r.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},r.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],h=t[8],f=e[0],l=e[1],p=e[2],d=e[3],m=e[4],v=e[5],b=e[6],t=e[7],e=e[8];return Math.abs(r-f)<=_.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-l)<=_.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-p)<=_.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-d)<=_.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-m)<=_.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-v)<=_.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(s-b)<=_.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-t)<=_.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(h-e)<=_.EPSILON*Math.max(1,Math.abs(h),Math.abs(e))},r.sub=r.mul=void 0;var _=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],h=e[7],f=e[8],l=r[0],p=r[1],d=r[2],m=r[3],v=r[4],b=r[5],_=r[6],e=r[7],r=r[8];return t[0]=l*n+p*i+d*c,t[1]=l*o+p*u+d*h,t[2]=l*a+p*s+d*f,t[3]=m*n+v*i+b*c,t[4]=m*o+v*u+b*h,t[5]=m*a+v*s+b*f,t[6]=_*n+e*i+r*c,t[7]=_*o+e*u+r*h,t[8]=_*a+e*s+r*f,t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}r.mul=n,r.sub=o},{"./common.js":2}],7:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new j.ARRAY_TYPE(16);j.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},r.clone=function(t){var e=new j.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.fromValues=function(t,e,r,n,o,a,i,u,s,c,h,f,l,p,d,m){var v=new j.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=o,v[5]=a,v[6]=i,v[7]=u,v[8]=s,v[9]=c,v[10]=h,v[11]=f,v[12]=l,v[13]=p,v[14]=d,v[15]=m,v},r.set=function(t,e,r,n,o,a,i,u,s,c,h,f,l,p,d,m,v){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=h,t[10]=f,t[11]=l,t[12]=p,t[13]=d,t[14]=m,t[15]=v,t},r.identity=d,r.transpose=function(t,e){{var r,n,o,a,i,u;t===e?(r=e[1],n=e[2],o=e[3],a=e[6],i=e[7],u=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=u):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15])}return t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],h=e[8],f=e[9],l=e[10],p=e[11],d=e[12],m=e[13],v=e[14],b=e[15],_=r*u-n*i,y=r*s-o*i,g=r*c-a*i,M=n*s-o*u,x=n*c-a*u,E=o*c-a*s,w=h*m-f*d,S=h*v-l*d,P=h*b-p*d,T=f*v-l*m,A=f*b-p*m,O=l*b-p*v,e=_*O-y*A+g*T+M*P-x*S+E*w;return e?(e=1/e,t[0]=(u*O-s*A+c*T)*e,t[1]=(o*A-n*O-a*T)*e,t[2]=(m*E-v*x+b*M)*e,t[3]=(l*x-f*E-p*M)*e,t[4]=(s*P-i*O-c*S)*e,t[5]=(r*O-o*P+a*S)*e,t[6]=(v*g-d*E-b*y)*e,t[7]=(h*E-l*g+p*y)*e,t[8]=(i*A-u*P+c*w)*e,t[9]=(n*P-r*A-a*w)*e,t[10]=(d*x-m*g+b*_)*e,t[11]=(f*g-h*x-p*_)*e,t[12]=(u*S-i*T-s*w)*e,t[13]=(r*T-n*S+o*w)*e,t[14]=(m*y-d*M-v*_)*e,t[15]=(h*M-f*y+l*_)*e,t):null},r.adjoint=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],h=e[8],f=e[9],l=e[10],p=e[11],d=e[12],m=e[13],v=e[14],e=e[15];return t[0]=u*(l*e-p*v)-f*(s*e-c*v)+m*(s*p-c*l),t[1]=-(n*(l*e-p*v)-f*(o*e-a*v)+m*(o*p-a*l)),t[2]=n*(s*e-c*v)-u*(o*e-a*v)+m*(o*c-a*s),t[3]=-(n*(s*p-c*l)-u*(o*p-a*l)+f*(o*c-a*s)),t[4]=-(i*(l*e-p*v)-h*(s*e-c*v)+d*(s*p-c*l)),t[5]=r*(l*e-p*v)-h*(o*e-a*v)+d*(o*p-a*l),t[6]=-(r*(s*e-c*v)-i*(o*e-a*v)+d*(o*c-a*s)),t[7]=r*(s*p-c*l)-i*(o*p-a*l)+h*(o*c-a*s),t[8]=i*(f*e-p*m)-h*(u*e-c*m)+d*(u*p-c*f),t[9]=-(r*(f*e-p*m)-h*(n*e-a*m)+d*(n*p-a*f)),t[10]=r*(u*e-c*m)-i*(n*e-a*m)+d*(n*c-a*u),t[11]=-(r*(u*p-c*f)-i*(n*p-a*f)+h*(n*c-a*u)),t[12]=-(i*(f*v-l*m)-h*(u*v-s*m)+d*(u*l-s*f)),t[13]=r*(f*v-l*m)-h*(n*v-o*m)+d*(n*l-o*f),t[14]=-(r*(u*v-s*m)-i*(n*v-o*m)+d*(n*s-o*u)),t[15]=r*(u*l-s*f)-i*(n*l-o*f)+h*(n*s-o*u),t},r.determinant=function(t){var e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],c=t[8],h=t[9],f=t[10],l=t[11],p=t[12],d=t[13],m=t[14],t=t[15];return(e*i-r*a)*(f*t-l*m)-(e*u-n*a)*(h*t-l*d)+(e*s-o*a)*(h*m-f*d)+(r*u-n*i)*(c*t-l*p)-(r*s-o*i)*(c*m-f*p)+(n*s-o*u)*(c*d-h*p)},r.multiply=n,r.translate=function(t,e,r){var n,o,a,i,u,s,c,h,f,l,p,d=r[0],m=r[1],v=r[2];e===t?(t[12]=e[0]*d+e[4]*m+e[8]*v+e[12],t[13]=e[1]*d+e[5]*m+e[9]*v+e[13],t[14]=e[2]*d+e[6]*m+e[10]*v+e[14],t[15]=e[3]*d+e[7]*m+e[11]*v+e[15]):(n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],h=e[7],f=e[8],l=e[9],p=e[10],r=e[11],t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=h,t[8]=f,t[9]=l,t[10]=p,t[11]=r,t[12]=n*d+u*m+f*v+e[12],t[13]=o*d+s*m+l*v+e[13],t[14]=a*d+c*m+p*v+e[14],t[15]=i*d+h*m+r*v+e[15]);return t},r.scale=function(t,e,r){var n=r[0],o=r[1],r=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.rotate=function(t,e,r,n){var o,a,i,u,s,c,h,f,l,p,d,m,v,b,_,y,g,M,x,E=n[0],w=n[1],S=n[2],P=Math.hypot(E,w,S);if(P<j.EPSILON)return null;E*=P=1/P,w*=P,S*=P,M=Math.sin(r),x=Math.cos(r),o=1-x,a=e[0],i=e[1],u=e[2],s=e[3],c=e[4],h=e[5],f=e[6],l=e[7],p=e[8],d=e[9],m=e[10],v=e[11],b=E*E*o+x,_=w*E*o+S*M,y=S*E*o-w*M,g=E*w*o-S*M,n=w*w*o+x,P=S*w*o+E*M,r=E*S*o+w*M,M=w*S*o-E*M,x=S*S*o+x,t[0]=a*b+c*_+p*y,t[1]=i*b+h*_+d*y,t[2]=u*b+f*_+m*y,t[3]=s*b+l*_+v*y,t[4]=a*g+c*n+p*P,t[5]=i*g+h*n+d*P,t[6]=u*g+f*n+m*P,t[7]=s*g+l*n+v*P,t[8]=a*r+c*M+p*x,t[9]=i*r+h*M+d*x,t[10]=u*r+f*M+m*x,t[11]=s*r+l*M+v*x,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},r.rotateX=function(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[4],i=e[5],u=e[6],s=e[7],c=e[8],h=e[9],f=e[10],r=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*o+c*n,t[5]=i*o+h*n,t[6]=u*o+f*n,t[7]=s*o+r*n,t[8]=c*o-a*n,t[9]=h*o-i*n,t[10]=f*o-u*n,t[11]=r*o-s*n,t},r.rotateY=function(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[0],i=e[1],u=e[2],s=e[3],c=e[8],h=e[9],f=e[10],r=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o-c*n,t[1]=i*o-h*n,t[2]=u*o-f*n,t[3]=s*o-r*n,t[8]=a*n+c*o,t[9]=i*n+h*o,t[10]=u*n+f*o,t[11]=s*n+r*o,t},r.rotateZ=function(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[0],i=e[1],u=e[2],s=e[3],c=e[4],h=e[5],f=e[6],r=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o+c*n,t[1]=i*o+h*n,t[2]=u*o+f*n,t[3]=s*o+r*n,t[4]=c*o-a*n,t[5]=h*o-i*n,t[6]=f*o-u*n,t[7]=r*o-s*n,t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,e,r){var n=r[0],o=r[1],a=r[2],i=Math.hypot(n,o,a);if(i<j.EPSILON)return null;return n*=i=1/i,o*=i,a*=i,r=Math.sin(e),i=Math.cos(e),e=1-i,t[0]=n*n*e+i,t[1]=o*n*e+a*r,t[2]=a*n*e-o*r,t[3]=0,t[4]=n*o*e-a*r,t[5]=o*o*e+i,t[6]=a*o*e+n*r,t[7]=0,t[8]=n*a*e+o*r,t[9]=o*a*e-n*r,t[10]=a*a*e+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromXRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,e){var r=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=l,r.fromQuat2=function(t,e){var r=new j.ARRAY_TYPE(3),n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],h=e[7],f=n*n+o*o+a*a+i*i;0<f?(r[0]=2*(u*i+h*n+s*a-c*o)/f,r[1]=2*(s*i+h*o+c*n-u*a)/f,r[2]=2*(c*i+h*a+u*o-s*n)/f):(r[0]=2*(u*i+h*n+s*a-c*o),r[1]=2*(s*i+h*o+c*n-u*a),r[2]=2*(c*i+h*a+u*o-s*n));return l(t,e,r),t},r.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},r.getScaling=p,r.getRotation=function(t,e){var r=new j.ARRAY_TYPE(3);p(r,e);var n=1/r[0],o=1/r[1],a=1/r[2],i=e[0]*n,u=e[1]*o,s=e[2]*a,c=e[4]*n,h=e[5]*o,f=e[6]*a,r=e[8]*n,n=e[9]*o,o=e[10]*a,e=i+h+o,a=0;0<e?(a=2*Math.sqrt(1+e),t[3]=.25*a,t[0]=(f-n)/a,t[1]=(r-s)/a,t[2]=(u-c)/a):h<i&&o<i?(a=2*Math.sqrt(1+i-h-o),t[3]=(f-n)/a,t[0]=.25*a,t[1]=(u+c)/a,t[2]=(r+s)/a):o<h?(a=2*Math.sqrt(1+h-i-o),t[3]=(r-s)/a,t[0]=(u+c)/a,t[1]=.25*a,t[2]=(f+n)/a):(a=2*Math.sqrt(1+o-i-h),t[3]=(u-c)/a,t[0]=(r+s)/a,t[1]=(f+n)/a,t[2]=.25*a);return t},r.fromRotationTranslationScale=function(t,e,r,n){var o=e[0],a=e[1],i=e[2],u=e[3],s=o+o,c=a+a,h=i+i,f=o*s,l=o*c,p=o*h,e=a*c,o=a*h,a=i*h,i=u*s,s=u*c,c=u*h,u=n[0],h=n[1],n=n[2];return t[0]=(1-(e+a))*u,t[1]=(l+c)*u,t[2]=(p-s)*u,t[3]=0,t[4]=(l-c)*h,t[5]=(1-(f+a))*h,t[6]=(o+i)*h,t[7]=0,t[8]=(p+s)*n,t[9]=(o-i)*n,t[10]=(1-(f+e))*n,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,e,r,n,o){var a=e[0],i=e[1],u=e[2],s=e[3],c=a+a,h=i+i,f=u+u,l=a*c,p=a*h,d=a*f,m=i*h,v=i*f,b=u*f,_=s*c,e=s*h,a=s*f,i=n[0],u=n[1],c=n[2],h=o[0],s=o[1],f=o[2],n=(1-(m+b))*i,o=(p+a)*i,i=(d-e)*i,a=(p-a)*u,b=(1-(l+b))*u,u=(v+_)*u,e=(d+e)*c,_=(v-_)*c,c=(1-(l+m))*c;return t[0]=n,t[1]=o,t[2]=i,t[3]=0,t[4]=a,t[5]=b,t[6]=u,t[7]=0,t[8]=e,t[9]=_,t[10]=c,t[11]=0,t[12]=r[0]+h-(n*h+a*s+e*f),t[13]=r[1]+s-(o*h+b*s+_*f),t[14]=r[2]+f-(i*h+u*s+c*f),t[15]=1,t},r.fromQuat=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r+r,u=n+n,s=o+o,c=r*i,h=n*i,e=n*u,r=o*i,n=o*u,o=o*s,i=a*i,u=a*u,s=a*s;return t[0]=1-e-o,t[1]=h+s,t[2]=r-u,t[3]=0,t[4]=h-s,t[5]=1-c-o,t[6]=n+i,t[7]=0,t[8]=r+u,t[9]=n-i,t[10]=1-c-e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,e,r,n,o,a,i){var u=1/(r-e),s=1/(o-n),c=1/(a-i);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(o+n)*s,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t},r.perspective=function(t,e,r,n,o){e=1/Math.tan(e/2);t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(e=1/(n-o),t[10]=(o+n)*e,t[14]=2*o*n*e):(t[10]=-1,t[14]=-2*n);return t},r.perspectiveFromFieldOfView=function(t,e,r,n){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),e=2/(o+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(o-a)*e*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},r.ortho=function(t,e,r,n,o,a,i){var u=1/(e-r),s=1/(n-o),c=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*u,t[13]=(o+n)*s,t[14]=(i+a)*c,t[15]=1,t},r.lookAt=function(t,e,r,n){var o,a=e[0],i=e[1],u=e[2],s=n[0],c=n[1],h=n[2],f=r[0],l=r[1],p=r[2];if(Math.abs(a-f)<j.EPSILON&&Math.abs(i-l)<j.EPSILON&&Math.abs(u-p)<j.EPSILON)return d(t);o=a-f,e=i-l,n=u-p,r=1/Math.hypot(o,e,n),f=c*(n*=r)-h*(e*=r),l=h*(o*=r)-s*n,p=s*e-c*o,(r=Math.hypot(f,l,p))?(f*=r=1/r,l*=r,p*=r):p=l=f=0;h=e*p-n*l,s=n*f-o*p,c=o*l-e*f,(r=Math.hypot(h,s,c))?(h*=r=1/r,s*=r,c*=r):c=s=h=0;return t[0]=f,t[1]=h,t[2]=o,t[3]=0,t[4]=l,t[5]=s,t[6]=e,t[7]=0,t[8]=p,t[9]=c,t[10]=n,t[11]=0,t[12]=-(f*a+l*i+p*u),t[13]=-(h*a+s*i+c*u),t[14]=-(o*a+e*i+n*u),t[15]=1,t},r.targetTo=function(t,e,r,n){var o=e[0],a=e[1],i=e[2],u=n[0],s=n[1],c=n[2],h=o-r[0],f=a-r[1],e=i-r[2],n=h*h+f*f+e*e;0<n&&(n=1/Math.sqrt(n),h*=n,f*=n,e*=n);r=s*e-c*f,c=c*h-u*e,s=u*f-s*h;0<(n=r*r+c*c+s*s)&&(n=1/Math.sqrt(n),r*=n,c*=n,s*=n);return t[0]=r,t[1]=c,t[2]=s,t[3]=0,t[4]=f*s-e*c,t[5]=e*r-h*s,t[6]=h*c-f*r,t[7]=0,t[8]=h,t[9]=f,t[10]=e,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},r.subtract=o,r.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},r.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],h=t[8],f=t[9],l=t[10],p=t[11],d=t[12],m=t[13],v=t[14],b=t[15],_=e[0],y=e[1],g=e[2],M=e[3],x=e[4],E=e[5],w=e[6],S=e[7],P=e[8],T=e[9],A=e[10],O=e[11],R=e[12],L=e[13],t=e[14],e=e[15];return Math.abs(r-_)<=j.EPSILON*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(n-y)<=j.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-g)<=j.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-M)<=j.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-x)<=j.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-E)<=j.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-w)<=j.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-S)<=j.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-P)<=j.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(f-T)<=j.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(l-A)<=j.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(p-O)<=j.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(d-R)<=j.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(m-L)<=j.EPSILON*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(v-t)<=j.EPSILON*Math.max(1,Math.abs(v),Math.abs(t))&&Math.abs(b-e)<=j.EPSILON*Math.max(1,Math.abs(b),Math.abs(e))},r.sub=r.mul=void 0;var j=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function d(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function n(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],h=e[7],f=e[8],l=e[9],p=e[10],d=e[11],m=e[12],v=e[13],b=e[14],_=e[15],y=r[0],g=r[1],M=r[2],e=r[3];return t[0]=y*n+g*u+M*f+e*m,t[1]=y*o+g*s+M*l+e*v,t[2]=y*a+g*c+M*p+e*b,t[3]=y*i+g*h+M*d+e*_,y=r[4],g=r[5],M=r[6],e=r[7],t[4]=y*n+g*u+M*f+e*m,t[5]=y*o+g*s+M*l+e*v,t[6]=y*a+g*c+M*p+e*b,t[7]=y*i+g*h+M*d+e*_,y=r[8],g=r[9],M=r[10],e=r[11],t[8]=y*n+g*u+M*f+e*m,t[9]=y*o+g*s+M*l+e*v,t[10]=y*a+g*c+M*p+e*b,t[11]=y*i+g*h+M*d+e*_,y=r[12],g=r[13],M=r[14],e=r[15],t[12]=y*n+g*u+M*f+e*m,t[13]=y*o+g*s+M*l+e*v,t[14]=y*a+g*c+M*p+e*b,t[15]=y*i+g*h+M*d+e*_,t}function l(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=n+n,s=o+o,c=a+a,h=n*u,f=n*s,e=n*c,n=o*s,o=o*c,a=a*c,u=i*u,s=i*s,c=i*c;return t[0]=1-(n+a),t[1]=f+c,t[2]=e-s,t[3]=0,t[4]=f-c,t[5]=1-(h+a),t[6]=o+u,t[7]=0,t[8]=e+s,t[9]=o-u,t[10]=1-(h+n),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function p(t,e){var r=e[0],n=e[1],o=e[2],a=e[4],i=e[5],u=e[6],s=e[8],c=e[9],e=e[10];return t[0]=Math.hypot(r,n,o),t[1]=Math.hypot(a,i,u),t[2]=Math.hypot(s,c,e),t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}r.mul=n,r.sub=o},{"./common.js":2}],8:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=c,r.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},r.setAxisAngle=h,r.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);n>p.EPSILON?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0);return r},r.getAngle=function(t,e){e=_(t,e);return Math.acos(2*e*e-1)},r.multiply=f,r.rotateX=function(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r+i*e,t[1]=o*r+a*e,t[2]=a*r-o*e,t[3]=i*r-n*e,t},r.rotateY=function(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r-a*e,t[1]=o*r+i*e,t[2]=a*r+n*e,t[3]=i*r-o*e,t},r.rotateZ=function(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],e=Math.sin(r),r=Math.cos(r);return t[0]=n*r+o*e,t[1]=o*r-n*e,t[2]=a*r+i*e,t[3]=i*r-a*e,t},r.calculateW=function(t,e){var r=e[0],n=e[1],e=e[2];return t[0]=r,t[1]=n,t[2]=e,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-e*e)),t},r.exp=l,r.ln=d,r.pow=function(t,e,r){return d(t,e),b(t,t,r),l(t,t),t},r.slerp=m,r.random=function(t){var e=p.RANDOM(),r=p.RANDOM(),n=p.RANDOM(),o=Math.sqrt(1-e),e=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=e*Math.sin(2*Math.PI*n),t[3]=e*Math.cos(2*Math.PI*n),t},r.invert=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],e=r*r+n*n+o*o+a*a,e=e?1/e:0;return t[0]=-r*e,t[1]=-n*e,t[2]=-o*e,t[3]=a*e,t},r.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},r.fromMat3=v,r.fromEuler=function(t,e,r,n){var o=.5*Math.PI/180;e*=o,r*=o,n*=o;var a=Math.sin(e),i=Math.cos(e),o=Math.sin(r),e=Math.cos(r),r=Math.sin(n),n=Math.cos(n);return t[0]=a*e*n-i*o*r,t[1]=i*o*n+a*e*r,t[2]=i*e*r-a*o*n,t[3]=i*e*n+a*o*r,t},r.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.setAxes=r.sqlerp=r.rotationTo=r.equals=r.exactEquals=r.normalize=r.sqrLen=r.squaredLength=r.len=r.length=r.lerp=r.dot=r.scale=r.mul=r.add=r.set=r.copy=r.fromValues=r.clone=void 0;var p=s(t("./common.js")),n=s(t("./mat3.js")),o=s(t("./vec3.js")),a=s(t("./vec4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&((n=a?Object.getOwnPropertyDescriptor(t,r):null)&&(n.get||n.set)?Object.defineProperty(o,r,n):o[r]=t[r]);return o.default=t,e&&e.set(t,o),o}function c(){var t=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function h(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function f(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1],e=r[2],r=r[3];return t[0]=n*r+i*u+o*e-a*s,t[1]=o*r+i*s+a*u-n*e,t[2]=a*r+i*e+n*s-o*u,t[3]=i*r-n*u-o*s-a*e,t}function l(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=Math.sqrt(r*r+n*n+o*o),e=Math.exp(a),a=0<i?e*Math.sin(i)/i:0;return t[0]=r*a,t[1]=n*a,t[2]=o*a,t[3]=e*Math.cos(i),t}function d(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],e=Math.sqrt(r*r+n*n+o*o),e=0<e?Math.atan2(e,a)/e:0;return t[0]=r*e,t[1]=n*e,t[2]=o*e,t[3]=.5*Math.log(r*r+n*n+o*o+a*a),t}function m(t,e,r,n){var o,a=e[0],i=e[1],u=e[2],s=e[3],c=r[0],h=r[1],f=r[2],l=r[3],e=a*c+i*h+u*f+s*l;return e<0&&(e=-e,c=-c,h=-h,f=-f,l=-l),n=1-e>p.EPSILON?(r=Math.acos(e),e=Math.sin(r),o=Math.sin((1-n)*r)/e,Math.sin(n*r)/e):(o=1-n,n),t[0]=o*a+n*c,t[1]=o*i+n*h,t[2]=o*u+n*f,t[3]=o*s+n*l,t}function v(t,e){var r,n,o,a=e[0]+e[4]+e[8];return 0<a?(o=Math.sqrt(a+1),t[3]=.5*o,t[0]=(e[5]-e[7])*(o=.5/o),t[1]=(e[6]-e[2])*o,t[2]=(e[1]-e[3])*o):(e[4]>e[r=0]&&(r=1),n=((r=e[8]>e[3*r+r]?2:r)+1)%3,a=(r+2)%3,o=Math.sqrt(e[3*r+r]-e[3*n+n]-e[3*a+a]+1),t[r]=.5*o,t[3]=(e[3*n+a]-e[3*a+n])*(o=.5/o),t[n]=(e[3*n+r]+e[3*r+n])*o,t[a]=(e[3*a+r]+e[3*r+a])*o),t}t=a.clone;r.clone=t;t=a.fromValues;r.fromValues=t;t=a.copy;r.copy=t;t=a.set;r.set=t;t=a.add;r.add=t,r.mul=f;var b=a.scale;r.scale=b;var _=a.dot;r.dot=_;t=a.lerp;r.lerp=t;t=a.length;r.length=t,r.len=t;t=a.squaredLength;r.squaredLength=t,r.sqrLen=t;var y=a.normalize;r.normalize=y;t=a.exactEquals;r.exactEquals=t;a=a.equals;r.equals=a;var g,M,x,a=(g=o.create(),M=o.fromValues(1,0,0),x=o.fromValues(0,1,0),function(t,e,r){var n=o.dot(e,r);return n<-.999999?(o.cross(g,M,e),o.len(g)<1e-6&&o.cross(g,x,e),o.normalize(g,g),h(t,g,Math.PI),t):.999999<n?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(o.cross(g,e,r),t[0]=g[0],t[1]=g[1],t[2]=g[2],t[3]=1+n,y(t,t))});r.rotationTo=a;var E,w,a=(E=c(),w=c(),function(t,e,r,n,o,a){return m(E,e,o,a),m(w,r,n,a),m(t,E,w,2*a*(1-a)),t});r.sqlerp=a;var S,n=(S=n.create(),function(t,e,r,n){return S[0]=r[0],S[3]=r[1],S[6]=r[2],S[1]=n[0],S[4]=n[1],S[7]=n[2],S[2]=-e[0],S[5]=-e[1],S[8]=-e[2],y(t,v(t,S))});r.setAxes=n},{"./common.js":2,"./mat3.js":6,"./vec3.js":11,"./vec4.js":12}],9:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var t=new v.ARRAY_TYPE(8);v.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0);return t[3]=1,t},r.clone=function(t){var e=new v.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},r.fromValues=function(t,e,r,n,o,a,i,u){var s=new v.ARRAY_TYPE(8);return s[0]=t,s[1]=e,s[2]=r,s[3]=n,s[4]=o,s[5]=a,s[6]=i,s[7]=u,s},r.fromRotationTranslationValues=function(t,e,r,n,o,a,i){var u=new v.ARRAY_TYPE(8);u[0]=t,u[1]=e,u[2]=r,u[3]=n;o*=.5,a*=.5,i*=.5;return u[4]=o*n+a*r-i*e,u[5]=a*n+i*t-o*r,u[6]=i*n+o*e-a*t,u[7]=-o*t-a*e-i*r,u},r.fromRotationTranslation=a,r.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},r.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},r.fromMat4=function(t,e){var r=d.create();o.getRotation(r,e);var n=new v.ARRAY_TYPE(3);return o.getTranslation(n,e),a(t,r,n),t},r.copy=h,r.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},r.set=function(t,e,r,n,o,a,i,u,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t},r.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},r.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},r.getTranslation=function(t,e){var r=e[4],n=e[5],o=e[6],a=e[7],i=-e[0],u=-e[1],s=-e[2],e=e[3];return t[0]=2*(r*e+a*i+n*s-o*u),t[1]=2*(n*e+a*u+o*i-r*s),t[2]=2*(o*e+a*s+r*u-n*i),t},r.translate=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=.5*r[0],s=.5*r[1],c=.5*r[2],h=e[4],f=e[5],r=e[6],e=e[7];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=i*u+o*c-a*s+h,t[5]=i*s+a*u-n*c+f,t[6]=i*c+n*s-o*u+r,t[7]=-n*u-o*s-a*c+e,t},r.rotateX=function(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],h=e[7],f=u*i+h*n+s*a-c*o,l=s*i+h*o+c*n-u*a,p=c*i+h*a+u*o-s*n,c=h*i-u*n-s*o-c*a;return d.rotateX(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=f*i+c*n+l*a-p*o,t[5]=l*i+c*o+p*n-f*a,t[6]=p*i+c*a+f*o-l*n,t[7]=c*i-f*n-l*o-p*a,t},r.rotateY=function(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],h=e[7],f=u*i+h*n+s*a-c*o,l=s*i+h*o+c*n-u*a,p=c*i+h*a+u*o-s*n,c=h*i-u*n-s*o-c*a;return d.rotateY(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=f*i+c*n+l*a-p*o,t[5]=l*i+c*o+p*n-f*a,t[6]=p*i+c*a+f*o-l*n,t[7]=c*i-f*n-l*o-p*a,t},r.rotateZ=function(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],h=e[7],f=u*i+h*n+s*a-c*o,l=s*i+h*o+c*n-u*a,p=c*i+h*a+u*o-s*n,c=h*i-u*n-s*o-c*a;return d.rotateZ(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=f*i+c*n+l*a-p*o,t[5]=l*i+c*o+p*n-f*a,t[6]=p*i+c*a+f*o-l*n,t[7]=c*i-f*n-l*o-p*a,t},r.rotateByQuatAppend=function(t,e,r){var n=r[0],o=r[1],a=r[2],i=r[3],u=e[0],s=e[1],c=e[2],r=e[3];return t[0]=u*i+r*n+s*a-c*o,t[1]=s*i+r*o+c*n-u*a,t[2]=c*i+r*a+u*o-s*n,t[3]=r*i-u*n-s*o-c*a,u=e[4],s=e[5],c=e[6],r=e[7],t[4]=u*i+r*n+s*a-c*o,t[5]=s*i+r*o+c*n-u*a,t[6]=c*i+r*a+u*o-s*n,t[7]=r*i-u*n-s*o-c*a,t},r.rotateByQuatPrepend=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1],c=r[2],e=r[3];return t[0]=n*e+i*u+o*c-a*s,t[1]=o*e+i*s+a*u-n*c,t[2]=a*e+i*c+n*s-o*u,t[3]=i*e-n*u-o*s-a*c,u=r[4],s=r[5],c=r[6],e=r[7],t[4]=n*e+i*u+o*c-a*s,t[5]=o*e+i*s+a*u-n*c,t[6]=a*e+i*c+n*s-o*u,t[7]=i*e-n*u-o*s-a*c,t},r.rotateAroundAxis=function(t,e,r,n){if(Math.abs(n)<v.EPSILON)return h(t,e);var o=Math.hypot(r[0],r[1],r[2]);n*=.5;var a=Math.sin(n),i=a*r[0]/o,u=a*r[1]/o,s=a*r[2]/o,c=Math.cos(n),a=e[0],r=e[1],o=e[2],n=e[3];t[0]=a*c+n*i+r*s-o*u,t[1]=r*c+n*u+o*i-a*s,t[2]=o*c+n*s+a*u-r*i,t[3]=n*c-a*i-r*u-o*s;a=e[4],r=e[5],o=e[6],e=e[7];return t[4]=a*c+e*i+r*s-o*u,t[5]=r*c+e*u+o*i-a*s,t[6]=o*c+e*s+a*u-r*i,t[7]=e*c-a*i-r*u-o*s,t},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t},r.multiply=s,r.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t},r.lerp=function(t,e,r,n){var o=1-n;c(e,r)<0&&(n=-n);return t[0]=e[0]*o+r[0]*n,t[1]=e[1]*o+r[1]*n,t[2]=e[2]*o+r[2]*n,t[3]=e[3]*o+r[3]*n,t[4]=e[4]*o+r[4]*n,t[5]=e[5]*o+r[5]*n,t[6]=e[6]*o+r[6]*n,t[7]=e[7]*o+r[7]*n,t},r.invert=function(t,e){var r=f(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t},r.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},r.normalize=function(t,e){var r=f(e);{var n,o,a,i,u,s,c,h;0<r&&(r=Math.sqrt(r),n=e[0]/r,o=e[1]/r,a=e[2]/r,i=e[3]/r,u=e[4],s=e[5],c=e[6],h=e[7],e=n*u+o*s+a*c+i*h,t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=(u-n*e)/r,t[5]=(s-o*e)/r,t[6]=(c-a*e)/r,t[7]=(h-i*e)/r)}return t},r.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],h=e[0],f=e[1],l=e[2],p=e[3],d=e[4],m=e[5],t=e[6],e=e[7];return Math.abs(r-h)<=v.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-f)<=v.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-l)<=v.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-p)<=v.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-d)<=v.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-m)<=v.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-t)<=v.EPSILON*Math.max(1,Math.abs(s),Math.abs(t))&&Math.abs(c-e)<=v.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))},r.sqrLen=r.squaredLength=r.len=r.length=r.dot=r.mul=r.setReal=r.getReal=void 0;var v=n(t("./common.js")),d=n(t("./quat.js")),o=n(t("./mat4.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&((n=a?Object.getOwnPropertyDescriptor(t,r):null)&&(n.get||n.set)?Object.defineProperty(o,r,n):o[r]=t[r]);return o.default=t,e&&e.set(t,o),o}function a(t,e,r){var n=.5*r[0],o=.5*r[1],a=.5*r[2],i=e[0],u=e[1],r=e[2],e=e[3];return t[0]=i,t[1]=u,t[2]=r,t[3]=e,t[4]=n*e+o*r-a*u,t[5]=o*e+a*i-n*r,t[6]=a*e+n*u-o*i,t[7]=-n*i-o*u-a*r,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}t=d.copy;r.getReal=t;t=d.copy;function s(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[4],s=r[5],c=r[6],h=r[7],f=e[4],l=e[5],p=e[6],d=e[7],m=r[0],v=r[1],e=r[2],r=r[3];return t[0]=n*r+i*m+o*e-a*v,t[1]=o*r+i*v+a*m-n*e,t[2]=a*r+i*e+n*v-o*m,t[3]=i*r-n*m-o*v-a*e,t[4]=n*h+i*u+o*c-a*s+f*r+d*m+l*e-p*v,t[5]=o*h+i*s+a*u-n*c+l*r+d*v+p*m-f*e,t[6]=a*h+i*c+n*s-o*u+p*r+d*e+f*v-l*m,t[7]=i*h-n*u-o*s-a*c+d*r-f*m-l*v-p*e,t}r.setReal=t,r.mul=s;var c=d.dot;r.dot=c;t=d.length;r.length=t,r.len=t;var f=d.squaredLength;r.squaredLength=f,r.sqrLen=f},{"./common.js":2,"./mat4.js":7,"./quat.js":8}],10:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=n,r.clone=function(t){var e=new o.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},r.fromValues=function(t,e){var r=new o.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},r.set=function(t,e,r){return t[0]=e,t[1]=r,t},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},r.subtract=a,r.multiply=s,r.divide=c,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},r.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},r.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},r.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},r.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},r.distance=h,r.squaredDistance=f,r.length=l,r.squaredLength=p,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},r.normalize=function(t,e){var r=e[0],n=e[1],n=r*r+n*n;0<n&&(n=1/Math.sqrt(n));return t[0]=e[0]*n,t[1]=e[1]*n,t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},r.cross=function(t,e,r){r=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=r,t},r.lerp=function(t,e,r,n){var o=e[0],e=e[1];return t[0]=o+n*(r[0]-o),t[1]=e+n*(r[1]-e),t},r.random=function(t,e){e=e||1;var r=2*o.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},r.transformMat2=function(t,e,r){var n=e[0],e=e[1];return t[0]=r[0]*n+r[2]*e,t[1]=r[1]*n+r[3]*e,t},r.transformMat2d=function(t,e,r){var n=e[0],e=e[1];return t[0]=r[0]*n+r[2]*e+r[4],t[1]=r[1]*n+r[3]*e+r[5],t},r.transformMat3=function(t,e,r){var n=e[0],e=e[1];return t[0]=r[0]*n+r[3]*e+r[6],t[1]=r[1]*n+r[4]*e+r[7],t},r.transformMat4=function(t,e,r){var n=e[0],e=e[1];return t[0]=r[0]*n+r[4]*e+r[12],t[1]=r[1]*n+r[5]*e+r[13],t},r.rotate=function(t,e,r,n){var o=e[0]-r[0],a=e[1]-r[1],e=Math.sin(n),n=Math.cos(n);return t[0]=o*n-a*e+r[0],t[1]=o*e+a*n+r[1],t},r.angle=function(t,e){var r=t[0],n=t[1],o=e[0],t=e[1],e=Math.sqrt(r*r+n*n)*Math.sqrt(o*o+t*t),e=e&&(r*o+n*t)/e;return Math.acos(Math.min(Math.max(e,-1),1))},r.zero=function(t){return t[0]=0,t[1]=0,t},r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},r.equals=function(t,e){var r=t[0],n=t[1],t=e[0],e=e[1];return Math.abs(r-t)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(t))&&Math.abs(n-e)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))},r.forEach=r.sqrLen=r.sqrDist=r.dist=r.div=r.mul=r.sub=r.len=void 0;var o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(){var t=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function s(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function c(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function h(t,e){var r=e[0]-t[0],t=e[1]-t[1];return Math.hypot(r,t)}function f(t,e){var r=e[0]-t[0],t=e[1]-t[1];return r*r+t*t}function l(t){var e=t[0],t=t[1];return Math.hypot(e,t)}function p(t){var e=t[0],t=t[1];return e*e+t*t}r.len=l,r.sub=a,r.mul=s,r.div=c,r.dist=h,r.sqrDist=f,r.sqrLen=p;var d,t=(d=n(),function(t,e,r,n,o,a){var i,u;for(e=e||2,r=r||0,u=n?Math.min(n*e+r,t.length):t.length,i=r;i<u;i+=e)d[0]=t[i],d[1]=t[i+1],o(d,d,a),t[i]=d[0],t[i+1]=d[1];return t});r.forEach=t},{"./common.js":2}],11:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=n,r.clone=function(t){var e=new u.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},r.length=o,r.fromValues=function(t,e,r){var n=new u.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},r.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},r.subtract=a,r.multiply=c,r.divide=h,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},r.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},r.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},r.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},r.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},r.distance=f,r.squaredDistance=l,r.squaredLength=p,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},r.normalize=function(t,e){var r=e[0],n=e[1],o=e[2],o=r*r+n*n+o*o;0<o&&(o=1/Math.sqrt(o));return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},r.dot=d,r.cross=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[0],e=r[1],r=r[2];return t[0]=o*r-a*e,t[1]=a*i-n*r,t[2]=n*e-o*i,t},r.lerp=function(t,e,r,n){var o=e[0],a=e[1],e=e[2];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t[2]=e+n*(r[2]-e),t},r.hermite=function(t,e,r,n,o,a){var i=a*a,u=i*(2*a-3)+1,s=i*(a-2)+a,c=i*(a-1),a=i*(3-2*a);return t[0]=e[0]*u+r[0]*s+n[0]*c+o[0]*a,t[1]=e[1]*u+r[1]*s+n[1]*c+o[1]*a,t[2]=e[2]*u+r[2]*s+n[2]*c+o[2]*a,t},r.bezier=function(t,e,r,n,o,a){var i=1-a,u=i*i,s=a*a,c=u*i,u=3*a*u,i=3*s*i,a=s*a;return t[0]=e[0]*c+r[0]*u+n[0]*i+o[0]*a,t[1]=e[1]*c+r[1]*u+n[1]*i+o[1]*a,t[2]=e[2]*c+r[2]*u+n[2]*i+o[2]*a,t},r.random=function(t,e){e=e||1;var r=2*u.RANDOM()*Math.PI,n=2*u.RANDOM()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*e,t},r.transformMat4=function(t,e,r){var n=e[0],o=e[1],a=e[2];return e=(e=r[3]*n+r[7]*o+r[11]*a+r[15])||1,t[0]=(r[0]*n+r[4]*o+r[8]*a+r[12])/e,t[1]=(r[1]*n+r[5]*o+r[9]*a+r[13])/e,t[2]=(r[2]*n+r[6]*o+r[10]*a+r[14])/e,t},r.transformMat3=function(t,e,r){var n=e[0],o=e[1],e=e[2];return t[0]=n*r[0]+o*r[3]+e*r[6],t[1]=n*r[1]+o*r[4]+e*r[7],t[2]=n*r[2]+o*r[5]+e*r[8],t},r.transformQuat=function(t,e,r){var n=r[0],o=r[1],a=r[2],i=r[3],u=e[0],s=e[1],c=e[2],h=o*c-a*s,f=a*u-n*c,r=n*s-o*u,e=o*r-a*f,a=a*h-n*r,o=n*f-o*h,i=2*i;return h*=i,f*=i,r*=i,e*=2,a*=2,o*=2,t[0]=u+h+e,t[1]=s+f+a,t[2]=c+r+o,t},r.rotateX=function(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},r.rotateY=function(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},r.rotateZ=function(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},r.angle=function(t,e){var r=t[0],n=t[1],o=t[2],a=e[0],i=e[1],u=e[2],o=Math.sqrt(r*r+n*n+o*o),u=Math.sqrt(a*a+i*i+u*u),u=o*u,u=u&&d(t,e)/u;return Math.acos(Math.min(Math.max(u,-1),1))},r.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=e[0],t=e[1],e=e[2];return Math.abs(r-a)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-t)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(t))&&Math.abs(o-e)<=u.EPSILON*Math.max(1,Math.abs(o),Math.abs(e))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var u=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function n(){var t=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=t[0],r=t[1],t=t[2];return Math.hypot(e,r,t)}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function c(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function h(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function f(t,e){var r=e[0]-t[0],n=e[1]-t[1],t=e[2]-t[2];return Math.hypot(r,n,t)}function l(t,e){var r=e[0]-t[0],n=e[1]-t[1],t=e[2]-t[2];return r*r+n*n+t*t}function p(t){var e=t[0],r=t[1],t=t[2];return e*e+r*r+t*t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}r.sub=a,r.mul=c,r.div=h,r.dist=f,r.sqrDist=l,r.len=o,r.sqrLen=p;var m,t=(m=n(),function(t,e,r,n,o,a){var i,u;for(e=e||3,r=r||0,u=n?Math.min(n*e+r,t.length):t.length,i=r;i<u;i+=e)m[0]=t[i],m[1]=t[i+1],m[2]=t[i+2],o(m,m,a),t[i]=m[0],t[i+1]=m[1],t[i+2]=m[2];return t});r.forEach=t},{"./common.js":2}],12:[function(t,e,r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=n,r.clone=function(t){var e=new c.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.fromValues=function(t,e,r,n){var o=new c.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.set=function(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t},r.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},r.subtract=o,r.multiply=a,r.divide=s,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},r.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},r.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},r.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},r.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},r.distance=h,r.squaredDistance=f,r.length=l,r.squaredLength=p,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},r.normalize=function(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],e=r*r+n*n+o*o+a*a;0<e&&(e=1/Math.sqrt(e));return t[0]=r*e,t[1]=n*e,t[2]=o*e,t[3]=a*e,t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},r.cross=function(t,e,r,n){var o=r[0]*n[1]-r[1]*n[0],a=r[0]*n[2]-r[2]*n[0],i=r[0]*n[3]-r[3]*n[0],u=r[1]*n[2]-r[2]*n[1],s=r[1]*n[3]-r[3]*n[1],c=r[2]*n[3]-r[3]*n[2],h=e[0],r=e[1],n=e[2],e=e[3];return t[0]=r*c-n*s+e*u,t[1]=-h*c+n*i-e*a,t[2]=h*s-r*i+e*o,t[3]=-h*u+r*a-n*o,t},r.lerp=function(t,e,r,n){var o=e[0],a=e[1],i=e[2],e=e[3];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t[2]=i+n*(r[2]-i),t[3]=e+n*(r[3]-e),t},r.random=function(t,e){var r,n,o,a,i,u;e=e||1;for(;r=2*c.RANDOM()-1,n=2*c.RANDOM()-1,i=r*r+n*n,1<=i;);for(;o=2*c.RANDOM()-1,a=2*c.RANDOM()-1,u=o*o+a*a,1<=u;);var s=Math.sqrt((1-i)/u);return t[0]=e*r,t[1]=e*n,t[2]=e*o*s,t[3]=e*a*s,t},r.transformMat4=function(t,e,r){var n=e[0],o=e[1],a=e[2],e=e[3];return t[0]=r[0]*n+r[4]*o+r[8]*a+r[12]*e,t[1]=r[1]*n+r[5]*o+r[9]*a+r[13]*e,t[2]=r[2]*n+r[6]*o+r[10]*a+r[14]*e,t[3]=r[3]*n+r[7]*o+r[11]*a+r[15]*e,t},r.transformQuat=function(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[0],u=r[1],s=r[2],c=r[3],h=c*n+u*a-s*o,f=c*o+s*n-i*a,r=c*a+i*o-u*n,a=-i*n-u*o-s*a;return t[0]=h*c+a*-i+f*-s-r*-u,t[1]=f*c+a*-u+r*-i-h*-s,t[2]=r*c+a*-s+h*-u-f*-i,t[3]=e[3],t},r.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=e[0],u=e[1],t=e[2],e=e[3];return Math.abs(r-i)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=c.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-t)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(t))&&Math.abs(a-e)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var c=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r,n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in t){var a;Object.prototype.hasOwnProperty.call(t,r)&&((a=o?Object.getOwnPropertyDescriptor(t,r):null)&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=t[r])}n.default=t,e&&e.set(t,n);return n}(t("./common.js"));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function n(){var t=new c.ARRAY_TYPE(4);return c.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function a(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function s(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function h(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],t=e[3]-t[3];return Math.hypot(r,n,o,t)}function f(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],t=e[3]-t[3];return r*r+n*n+o*o+t*t}function l(t){var e=t[0],r=t[1],n=t[2],t=t[3];return Math.hypot(e,r,n,t)}function p(t){var e=t[0],r=t[1],n=t[2],t=t[3];return e*e+r*r+n*n+t*t}r.sub=o,r.mul=a,r.div=s,r.dist=h,r.sqrDist=f,r.len=l,r.sqrLen=p;var d,t=(d=n(),function(t,e,r,n,o,a){var i,u;for(e=e||4,r=r||0,u=n?Math.min(n*e+r,t.length):t.length,i=r;i<u;i+=e)d[0]=t[i],d[1]=t[i+1],d[2]=t[i+2],d[3]=t[i+3],o(d,d,a),t[i]=d[0],t[i+1]=d[1],t[i+2]=d[2],t[i+3]=d[3];return t});r.forEach=t},{"./common.js":2}],13:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(r,e){function n(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}a((s=s.apply(t,i||[])).next())})},f=this&&this.__generator||function(r,n){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Renderer=void 0;function a(t){return t*Math.PI/180}var M=t("./wrappers/WebGLContext"),l=t("./wrappers/DataTexture"),p=t("./wrappers/Texture"),x=t("./wrappers/FrameBuffer"),d=t("./wrappers/ShaderProgram"),m=t("./wrappers/Geometry"),v=t("./utilities/fetchTextFile"),b=t("gl-matrix"),t=(o.prototype.initialise=function(h){return n(this,void 0,void 0,function(){var e,r,n,o,a,i,u,s,c;return f(this,function(t){switch(t.label){case 0:return this._width=h.width,this._height=h.height,M.WebGLContext.initialise(h),u=M.WebGLContext.getContext(),u.pixelStorei(u.UNPACK_ALIGNMENT,1),u.disable(u.DEPTH_TEST),u.disable(u.BLEND),u.disable(u.CULL_FACE),u.depthFunc(u.NEVER),u.clearColor(0,0,0,1),u.clearDepth(1),e=this,r=d.ShaderProgram.bind,u={},[4,v.fetchTextFile("./assets/shaders/wireframe.vert")];case 1:return u.vertexShaderSourceCode=t.sent(),[4,v.fetchTextFile("./assets/shaders/wireframe.frag")];case 2:return e._wireframeShaderProgram=new(r.apply(d.ShaderProgram,[void 0,(u.fragmentShaderSourceCode=t.sent(),u.attributes=["a_vertexPosition","a_vertexColor"],u.uniforms=["u_modelViewMatrix","u_projectionMatrix"],u)])),n=this,o=d.ShaderProgram.bind,s={},[4,v.fetchTextFile("./assets/shaders/raytracer.vert")];case 3:return s.vertexShaderSourceCode=t.sent(),[4,v.fetchTextFile("./assets/shaders/raytracer.frag")];case 4:return n._raytracingShaderProgram=new(o.apply(d.ShaderProgram,[void 0,(s.fragmentShaderSourceCode=t.sent(),s.attributes=["a_vertexPosition","a_plotPosition"],s.uniforms=["u_cameraEye","u_sceneTextureData","u_sceneTextureSize","u_lightsTextureData","u_lightsTextureSize","u_spheresStart","u_spheresStop","u_boxesStart","u_boxesStop","u_trianglesStart","u_trianglesStop","u_sunLightsStart","u_sunLightsStop","u_spotLightsStart","u_spotLightsStop"],s)])),a=this,i=d.ShaderProgram.bind,c={},[4,v.fetchTextFile("./assets/shaders/texture.vert")];case 5:return c.vertexShaderSourceCode=t.sent(),[4,v.fetchTextFile("./assets/shaders/texture.frag")];case 6:return a._textureShaderProgram=new(i.apply(d.ShaderProgram,[void 0,(c.fragmentShaderSourceCode=t.sent(),c.attributes=["a_vertexPosition","a_vertexTextureCoord"],c.uniforms=["u_texture","u_step"],c)])),this._finalTexture=new p.Texture,this._finalTexture.allocate(this._width,this._height,!0),this._frameBuffer=new x.FrameBuffer,this._frameBuffer.attachTexture(this._finalTexture),this._wireframeStackGeometry=new m.GeometryWrapper.Geometry(this._wireframeShaderProgram,{vertexBufferObjects:[{attributes:[{name:"a_vertexPosition",type:m.GeometryWrapper.AttributeType.vec3f,index:0},{name:"a_vertexColor",type:m.GeometryWrapper.AttributeType.vec3f,index:3}],stride:24,instanced:!1}],primitiveType:m.GeometryWrapper.PrimitiveType.lines}),this._wireframeStackGeometry.setPrimitiveStart(0),this._wireframeStackGeometry.setPrimitiveCount(0),this._raytracingGeometry=new m.GeometryWrapper.Geometry(this._raytracingShaderProgram,{vertexBufferObjects:[{attributes:[{name:"a_vertexPosition",type:m.GeometryWrapper.AttributeType.vec2f,index:0}],stride:8,instanced:!1},{attributes:[{name:"a_plotPosition",type:m.GeometryWrapper.AttributeType.vec3f,index:0}],stride:12,instanced:!1}],primitiveType:m.GeometryWrapper.PrimitiveType.triangleStrip}),c=[1,1,-1,1,1,-1,-1,-1],this._raytracingGeometry.updateBuffer(0,c,!1),this._raytracingGeometry.setPrimitiveStart(0),this._raytracingGeometry.setPrimitiveCount(4),this._screenGeometry=new m.GeometryWrapper.Geometry(this._textureShaderProgram,{vertexBufferObjects:[{attributes:[{name:"a_vertexPosition",type:m.GeometryWrapper.AttributeType.vec2f,index:0},{name:"a_vertexTextureCoord",type:m.GeometryWrapper.AttributeType.vec2f,index:2}],stride:16,instanced:!1}],primitiveType:m.GeometryWrapper.PrimitiveType.triangleStrip}),c=[1,1,1,1,-1,1,0,1,1,-1,1,0,-1,-1,0,0],this._screenGeometry.updateBuffer(0,c,!1),this._screenGeometry.setPrimitiveStart(0),this._screenGeometry.setPrimitiveCount(4),this._projectionMatrix=b.mat4.create(),this._modelViewMatrix=b.mat4.create(),this._sceneDataTexture=new l.DataTexture,this._sceneDataTexture.initialise(),this._lightsDataTexture=new l.DataTexture,this._lightsDataTexture.initialise(),this._camera={position:b.vec3.fromValues(0,0,0),target:b.vec3.fromValues(1.5,1.5,1.5),up:b.vec3.fromValues(0,1,0)},[2]}})})},o.prototype.pushSphere=function(t,e,r,n,o,a,i){if(void 0===a&&(a=!0),void 0===i&&(i=!0),e<=0)throw new Error("invalid sphere radius");if(n<0||1<n)throw new Error("invalid sphere reflection");this._spheres.push({position:[t[0],t[1],t[2]],radius:e,color:[r[0],r[1],r[2]],reflection:n,chessboard:o,shadowEnabled:a,lightEnabled:i})},o.prototype.pushBox=function(t,e,r,n,o,a,i,u,s,c){if(void 0===s&&(s=!0),void 0===c&&(c=!0),o[0]<=0||o[1]<=0||o[2]<=0)throw new Error("invalid box size");if(i<0||1<i)throw new Error("invalid box reflection");var h=b.mat4.create();b.mat4.identity(h),b.mat4.translate(h,h,t),b.mat4.rotateY(h,h,r),b.mat4.rotateZ(h,h,n),b.mat4.rotateX(h,h,e),this._boxes.push({matrix:h,boxSize:b.vec3.clone(o),color:b.vec3.clone(a),reflection:i,chessboard:u,shadowEnabled:s,lightEnabled:c})},o.prototype.pushTriangle=function(t,e,r,n,o,a,i){if(void 0===a&&(a=!0),void 0===i&&(i=!0),o<0||1<o)throw new Error("invalid triangle reflection");for(var u=b.vec3.fromValues(999999,999999,999999),s=b.vec3.fromValues(-999999,-999999,-999999),c=0;c<3;++c)u[c]>t[c]&&(u[c]=t[c]),u[c]>e[c]&&(u[c]=e[c]),u[c]>r[c]&&(u[c]=r[c]),s[c]<t[c]&&(s[c]=t[c]),s[c]<e[c]&&(s[c]=e[c]),s[c]<r[c]&&(s[c]=r[c]);this._triangles.push({v0:b.vec3.clone(t),v1:b.vec3.clone(e),v2:b.vec3.clone(r),min:u,max:s,color:b.vec3.clone(n),reflection:o,shadowEnabled:a,lightEnabled:i})},o.prototype.pushSunLight=function(t,e){if(e<=0)throw new Error("intensity cannot be 0");if(0===b.vec3.length(t))throw new Error("direction cannot be 0");t=b.vec3.normalize(b.vec3.clone(t),t);this._sunLights.push({direction:t,intensity:e})},o.prototype.pushSpotLight=function(t,e,r){if(e<=0)throw new Error("intensity cannot be 0");if(r<=0)throw new Error("radius cannot be <= 0");this._spotLights.push({position:b.vec3.clone(t),intensity:e,radius:r})},o.prototype.lookAt=function(t,e,r){b.vec3.copy(this._camera.position,t),b.vec3.copy(this._camera.target,e),b.vec3.copy(this._camera.up,r)},o.prototype.pushLine=function(t,e,r){this._wireframeStackVertices.push(t[0],t[1],t[2]),this._wireframeStackVertices.push(r[0],r[1],r[2]),this._wireframeStackVertices.push(e[0],e[1],e[2]),this._wireframeStackVertices.push(r[0],r[1],r[2])},o.prototype.pushWireframeSphere=function(t){for(var e=.5257311121191336*t.radius,r=.8506508083520399*t.radius,n=[[-e,0,r],[e,0,r],[-e,0,-r],[e,0,-r],[0,r,e],[0,r,-e],[0,-r,e],[0,-r,-e],[r,e,0],[-r,e,0],[r,-e,0],[-r,-e,0]],o=0;o<n.length;++o)n[o][0]+=t.position[0],n[o][1]+=t.position[1],n[o][2]+=t.position[2];for(var a=0,i=[[0,4,1],[0,9,4],[9,5,4],[4,5,8],[4,8,1],[8,10,1],[8,3,10],[5,3,8],[5,2,3],[2,7,3],[7,10,3],[7,6,10],[7,11,6],[11,0,6],[0,1,6],[6,1,10],[9,0,11],[9,11,2],[9,2,5],[7,2,11]];a<i.length;a++){var u=i[a],s=n[u[0]],c=n[u[1]],u=n[u[2]];this.pushLine(s,c,t.color),this.pushLine(c,u,t.color),this.pushLine(u,s,t.color)}},o.prototype.pushWireframeBox=function(r){var e=this,t=[b.vec3.fromValues(-r.boxSize[0],-r.boxSize[1],-r.boxSize[2]),b.vec3.fromValues(+r.boxSize[0],-r.boxSize[1],-r.boxSize[2]),b.vec3.fromValues(-r.boxSize[0],+r.boxSize[1],-r.boxSize[2]),b.vec3.fromValues(+r.boxSize[0],+r.boxSize[1],-r.boxSize[2]),b.vec3.fromValues(-r.boxSize[0],-r.boxSize[1],+r.boxSize[2]),b.vec3.fromValues(+r.boxSize[0],-r.boxSize[1],+r.boxSize[2]),b.vec3.fromValues(-r.boxSize[0],+r.boxSize[1],+r.boxSize[2]),b.vec3.fromValues(+r.boxSize[0],+r.boxSize[1],+r.boxSize[2])],n=[];t.forEach(function(t){var e=b.vec3.fromValues(0,0,0);b.vec3.transformMat4(e,t,r.matrix),n.push(e)});[[0,1],[1,3],[3,2],[2,0],[4,5],[5,7],[7,6],[6,4],[0,4],[1,5],[3,7],[2,6]].forEach(function(t){e.pushLine(n[t[0]],n[t[1]],r.color)})},o.prototype.pushWireframeTriangle=function(t){this.pushLine(t.v0,t.v1,t.color),this.pushLine(t.v1,t.v2,t.color),this.pushLine(t.v2,t.v0,t.color)},o.prototype.flushWireframe=function(){this._wireframeShaderProgram.bind();var t=M.WebGLContext.getContext();t.uniformMatrix4fv(this._wireframeShaderProgram.getUniform("u_projectionMatrix"),!1,this._projectionMatrix),t.uniformMatrix4fv(this._wireframeShaderProgram.getUniform("u_modelViewMatrix"),!1,this._modelViewMatrix),this._wireframeStackGeometry.updateBuffer(0,this._wireframeStackVertices,!0),this._wireframeStackGeometry.setPrimitiveCount(this._wireframeStackVertices.length/6),this._wireframeStackGeometry.render(),this._wireframeStackVertices.length=0},o.prototype.render2=function(){var e=this;b.mat4.perspective(this._projectionMatrix,a(70),this._width/this._height,1,1500),b.mat4.lookAt(this._modelViewMatrix,this._camera.position,this._camera.target,this._camera.up);var t=b.mat4.create();b.mat4.multiply(t,this._projectionMatrix,this._modelViewMatrix),this._spheres.forEach(function(t){return e.pushWireframeSphere(t)}),this._boxes.forEach(function(t){return e.pushWireframeBox(t)}),this._triangles.forEach(function(t){return e.pushWireframeTriangle(t)})},o.prototype.render=function(){var t=M.WebGLContext.getContext(),e=this._computeCameraFarCorners();this._raytracingGeometry.updateBuffer(1,e,!0);var r=Math.floor(this._width*this._resolutionCoef),n=Math.floor(this._height*this._resolutionCoef);this._frameBuffer.bind(),t.viewport(0,0,r,n),t.clear(t.COLOR_BUFFER_BIT),(e=this._raytracingShaderProgram).bind();r=e.getUniform("u_cameraEye");t.uniform3f(r,this._camera.position[0],this._camera.position[1],this._camera.position[2]);var o=[],n=e.getUniform("u_spheresStart"),r=e.getUniform("u_spheresStop");t.uniform1f(n,0);for(var a=0,i=this._spheres;a<i.length;a++){var u=i[a];o.push(u.position[0],u.position[1],u.position[2]),o.push(u.radius),o.push(u.color[0],u.color[1],u.color[2]),o.push(u.reflection),o.push(u.shadowEnabled?1:0),o.push(u.lightEnabled?1:0),o.push(u.chessboard?1:0)}t.uniform1f(r,o.length);n=e.getUniform("u_boxesStart"),r=e.getUniform("u_boxesStop");t.uniform1f(n,o.length);for(var s=0,c=this._boxes;s<c.length;s++){var h=c[s];o.push(h.matrix[0],h.matrix[1],h.matrix[2],h.matrix[3]),o.push(h.matrix[4],h.matrix[5],h.matrix[6],h.matrix[7]),o.push(h.matrix[8],h.matrix[9],h.matrix[10],h.matrix[11]),o.push(h.matrix[12],h.matrix[13],h.matrix[14],h.matrix[15]),o.push(h.boxSize[0],h.boxSize[1],h.boxSize[2]),o.push(h.color[0],h.color[1],h.color[2]),o.push(h.reflection),o.push(h.shadowEnabled?1:0),o.push(h.lightEnabled?1:0),o.push(h.chessboard?1:0)}t.uniform1f(r,o.length);n=e.getUniform("u_trianglesStart"),r=e.getUniform("u_trianglesStop");t.uniform1f(n,o.length);for(var f=0,l=this._triangles;f<l.length;f++){var p=l[f];o.push(p.v0[0],p.v0[1],p.v0[2]),o.push(p.v1[0],p.v1[1],p.v1[2]),o.push(p.v2[0],p.v2[1],p.v2[2]),o.push(p.color[0],p.color[1],p.color[2]),o.push(p.reflection),o.push(p.shadowEnabled?1:0),o.push(p.lightEnabled?1:0)}t.uniform1f(r,o.length),t.activeTexture(t.TEXTURE0+0),this._sceneDataTexture.bind(),this._sceneDataTexture.update(o);n=e.getUniform("u_sceneTextureData"),r=e.getUniform("u_sceneTextureSize");t.uniform1i(n,0),t.uniform2f(r,o.length,1);var d=[],n=e.getUniform("u_sunLightsStart"),r=e.getUniform("u_sunLightsStop");t.uniform1f(n,0);for(var m=0,v=this._sunLights;m<v.length;m++){var b=v[m];d.push(b.direction[0],b.direction[1],b.direction[2]),d.push(b.intensity)}t.uniform1f(r,d.length);n=e.getUniform("u_spotLightsStart"),r=e.getUniform("u_spotLightsStop");t.uniform1f(n,d.length);for(var _=0,y=this._spotLights;_<y.length;_++){var g=y[_];d.push(g.position[0],g.position[1],g.position[2]),d.push(g.intensity),d.push(g.radius)}t.uniform1f(r,d.length),t.activeTexture(t.TEXTURE0+1),this._lightsDataTexture.bind(),this._lightsDataTexture.update(d);n=e.getUniform("u_lightsTextureData"),r=e.getUniform("u_lightsTextureSize");t.uniform1i(n,1),t.uniform2f(r,d.length,1),this._raytracingGeometry.render(),x.FrameBuffer.unbind(),t.viewport(0,0,this._width,this._height),t.clear(t.COLOR_BUFFER_BIT),(e=this._textureShaderProgram).bind();n=e.getUniform("u_texture");t.uniform1i(n,0),t.activeTexture(t.TEXTURE0+0),this._finalTexture.bind();r=e.getUniform("u_step");this._antiAliasing?(n=Math.floor(this._width*this._resolutionCoef),e=Math.floor(this._height*this._resolutionCoef),n=.005*(1-n/this._width),e=.005*(1-e/this._height),t.uniform2f(r,n,e)):t.uniform2f(r,0,0),this._screenGeometry.render(),t.bindTexture(t.TEXTURE_2D,null),t.useProgram(null)},o.prototype.reset=function(){this._sunLights.length=0,this._spotLights.length=0,this._spheres.length=0,this._boxes.length=0,this._triangles.length=0},o.prototype.setResolutionCoef=function(t){var e;t!==this._resolutionCoef&&(this._resolutionCoef=t,e=Math.floor(this._width*this._resolutionCoef),t=Math.floor(this._height*this._resolutionCoef),this._finalTexture.resize(e,t))},o.prototype.getResolutionCoef=function(){return this._resolutionCoef},o.prototype.setAntiAliasing=function(t){this._antiAliasing=t},o.prototype.getAntiAliasing=function(){return this._antiAliasing},o.prototype.getCurrentSize=function(){return[Math.floor(this._width*this._resolutionCoef),Math.floor(this._height*this._resolutionCoef)]},o.prototype._computeCameraFarCorners=function(){var t=b.vec3.sub(b.vec3.create(),this._camera.target,this._camera.position),e=b.vec3.cross(b.vec3.create(),t,this._camera.up),r=b.vec3.cross(b.vec3.create(),e,t),n=a(35),o=+Math.cos(n)/Math.sin(n),n=b.vec3.multiply(b.vec3.create(),t,b.vec3.fromValues(o,o,o)),t=b.vec3.add(b.vec3.create(),this._camera.position,n),o=this._width/this._height,n=b.vec3.multiply(b.vec3.create(),e,b.vec3.fromValues(o,o,o)),e=b.vec3.add(b.vec3.create(),t,r),o=b.vec3.subtract(b.vec3.create(),t,r),t=b.vec3.subtract(b.vec3.create(),e,n),r=b.vec3.subtract(b.vec3.create(),o,n),e=b.vec3.add(b.vec3.create(),e,n),n=b.vec3.add(b.vec3.create(),o,n);return[e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],r[0],r[1],r[2]]},o);function o(){this._resolutionCoef=1,this._antiAliasing=!1,this._wireframeStackVertices=[],this._spheres=[],this._boxes=[],this._triangles=[],this._sunLights=[],this._spotLights=[]}r.Renderer=t},{"./utilities/fetchTextFile":14,"./wrappers/DataTexture":15,"./wrappers/FrameBuffer":16,"./wrappers/Geometry":17,"./wrappers/ShaderProgram":18,"./wrappers/Texture":19,"./wrappers/WebGLContext":20,"gl-matrix":3}],14:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fetchTextFile=void 0;r.fetchTextFile=function(r){return new Promise(function(t){var e=new XMLHttpRequest;e.open("GET",r,!0),e.send(),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&t(e.responseText)}})}},{}],15:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DataTexture=void 0;var l=t("./WebGLContext"),t=(n.prototype.initialise=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=1),this._textureObject)throw new Error("data texture already initialised");var r=l.WebGLContext.getContext();this._textureObject=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this._textureObject),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),this.update(t,e)},n.prototype.update=function(t,e){if(void 0===e&&(e=1),!this._textureObject)throw new Error("data texture not initialised");var r=l.WebGLContext.getContext();r.bindTexture(r.TEXTURE_2D,this._textureObject);for(var n=t.length/e,o=new Float32Array(4*n),a=0;a<n;++a)for(var i=a*e,u=4*a,s=0;s<e;++s)o[u+s]=t[i+s];var c=r.RGBA32F,h=r.RGBA,f=r.FLOAT;r.texImage2D(r.TEXTURE_2D,0,c,n,1,0,h,f,o)},n.prototype.bind=function(){if(!this._textureObject)throw new Error("data texture not initialised");var t=l.WebGLContext.getContext();t.bindTexture(t.TEXTURE_2D,this._textureObject)},n);function n(){this._textureObject=null}r.DataTexture=t},{"./WebGLContext":20}],16:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FrameBuffer=void 0;var n=t("./WebGLContext"),t=(o.prototype.attachTexture=function(t){var e=n.WebGLContext.getContext();e.bindFramebuffer(e.FRAMEBUFFER,this._frameBuffer);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.getRawObject(),0)},o.prototype.bind=function(){var t=n.WebGLContext.getContext();t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer)},o.unbind=function(){var t=n.WebGLContext.getContext();t.bindFramebuffer(t.FRAMEBUFFER,null)},o);function o(){var t=n.WebGLContext.getContext();this._frameBuffer=t.createFramebuffer()}r.FrameBuffer=t},{"./WebGLContext":20}],17:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeometryWrapper=void 0;var T=t("./WebGLContext");!function(w){var S,P;w.BytesPerPixel=4,(t=S=w.AttributeType||(w.AttributeType={}))[t.float=0]="float",t[t.vec2f=1]="vec2f",t[t.vec3f=2]="vec3f",t[t.vec4f=3]="vec4f",t[t.mat3f=4]="mat3f",t[t.mat4f=5]="mat4f",(t=P=w.PrimitiveType||(w.PrimitiveType={}))[t.lines=0]="lines",t[t.triangles=1]="triangles",t[t.triangleStrip=2]="triangleStrip";var t=(e.prototype.dispose=function(){for(var t=T.WebGLContext.getContext(),e=0;e<this._vertexBufferObjects.length;++e)t.deleteBuffer(this._vertexBufferObjects[e]);t.deleteVertexArray(this._vertexArrayObject)},e.prototype.updateBuffer=function(t,e,r){if(void 0===r&&(r=!1),t<0||t>=this._vertexBufferObjects.length)throw new Error("no buffer avaialble to tha index");var n=T.WebGLContext.getContext(),t=this._vertexBufferObjects[t],e=e instanceof Float32Array?e:new Float32Array(e),r=r?n.DYNAMIC_DRAW:n.STATIC_DRAW;n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,e,r),n.bindBuffer(n.ARRAY_BUFFER,null)},e.prototype.render=function(){var t;0==this._primitiveCount||this._isInstanced&&0==this._instanceCount||((t=T.WebGLContext.getContext()).bindVertexArray(this._vertexArrayObject),!0===this._isInstanced?t.drawArraysInstanced(this._primitiveType,this._primitiveStart,this._primitiveCount,this._instanceCount):t.drawArrays(this._primitiveType,this._primitiveStart,this._primitiveCount),t.bindVertexArray(null))},e.prototype.setPrimitiveStart=function(t){this._primitiveStart=t},e.prototype.setPrimitiveCount=function(t){this._primitiveCount=t},e.prototype.setInstancedCount=function(t){this._instanceCount=t},e);function e(t,e){this._primitiveStart=0,this._primitiveCount=0,this._instanceCount=0,this._isInstanced=!1;var r=T.WebGLContext.getContext();if(0===e.vertexBufferObjects.length)throw new Error("empty vbo defintion");for(var n=0,o=e.vertexBufferObjects;n<o.length;n++){if(0===(f=o[n]).attributes.length)throw new Error("empty vbo attribute defintion");for(var a=0,i=f.attributes;a<i.length;a++){var u=i[a];if(!t.hasAttribute(u.name))throw new Error('attribute not found, name="'+u.name+'"')}}switch(e.primitiveType){case P.lines:this._primitiveType=r.LINES;break;case P.triangles:this._primitiveType=r.TRIANGLES;break;case P.triangleStrip:this._primitiveType=r.TRIANGLE_STRIP;break;default:throw new Error("primitive type not found")}var s=r.createVertexArray();if(!s)throw new Error("fail o create a vao unit");this._vertexArrayObject=s,r.bindVertexArray(this._vertexArrayObject),this._vertexBufferObjects=[];for(var c=0,h=e.vertexBufferObjects;c<h.length;c++){var f,l=h[c];if(!(f=r.createBuffer()))throw new Error("fail o create a vbo unit");this._vertexBufferObjects.push(f),r.bindBuffer(r.ARRAY_BUFFER,f);var p=l.stride||0;if(!p){for(var d=0,m=l.attributes;d<m.length;d++)switch((u=m[d]).type){case S.float:p+=1;break;case S.vec2f:p+=2;break;case S.vec3f:p+=3;break;case S.vec4f:p+=4;break;case S.mat3f:p+=9;break;case S.mat4f:p+=16}p*=w.BytesPerPixel}for(var v=0,b=l.attributes;v<b.length;v++){var _=1,y=1;switch((u=b[v]).type){case S.float:y=_=1;break;case S.vec2f:_=2,y=1;break;case S.vec3f:_=3,y=1;break;case S.vec4f:_=4,y=1;break;case S.mat3f:y=_=3;break;case S.mat4f:y=_=4}for(var g=t.getAttribute(u.name),M=0;M<y;++M){var x=g+M,E=(u.index+M*_)*w.BytesPerPixel;r.enableVertexAttribArray(x),r.vertexAttribPointer(x,_,r.FLOAT,!1,p,E),!0===l.instanced&&(r.vertexAttribDivisor(x,1),this._isInstanced=!0)}}}r.bindVertexArray(null)}w.Geometry=t}(r.GeometryWrapper||(r.GeometryWrapper={}))},{"./WebGLContext":20}],18:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ShaderProgram=void 0;var a=t("./WebGLContext"),t=(i.prototype.bind=function(){a.WebGLContext.getContext().useProgram(this._program)},i.unbind=function(){a.WebGLContext.getContext().useProgram(null)},i.prototype.hasAttribute=function(t){return this._attributes.has(t)},i.prototype.getAttribute=function(t){var e=this._attributes.get(t);if(void 0===e)throw new Error("attribute not found: "+t);return e},i.prototype.getUniform=function(t){var e=this._uniforms.get(t);if(void 0===e)throw new Error("uniform not found: "+t);return e},i.prototype._getAttributes=function(t){for(var e=a.WebGLContext.getContext(),r=0;r<t.length;++r){var n=e.getAttribLocation(this._program,t[r]);if(n<0)throw new Error("attribute not found => "+t[r]);this._attributes.set(t[r],n)}},i.prototype._getUniforms=function(t){for(var e=a.WebGLContext.getContext(),r=0;r<t.length;++r){var n=e.getUniformLocation(this._program,t[r]);if(null===n)throw new Error("uniform not found => "+t[r]);this._uniforms.set(t[r],n)}},i.prototype._getShader=function(t,e){var r=a.WebGLContext.getContext(),e=r.createShader(e);if(!e)throw new Error("could not create a shader");if(r.shaderSource(e,t),r.compileShader(e),r.getShaderParameter(e,r.COMPILE_STATUS))return e;e=(e=r.getShaderInfoLog(e))||"failed to compile a shader";throw new Error(e)},i);function i(t){this._attributes=new Map,this._uniforms=new Map;var e=a.WebGLContext.getContext(),r=this._getShader(t.vertexShaderSourceCode,e.VERTEX_SHADER),n=this._getShader(t.fragmentShaderSourceCode,e.FRAGMENT_SHADER),o=e.createProgram();if(!o)throw new Error("could not create a shader program");if(e.attachShader(o,r),e.attachShader(o,n),e.linkProgram(o),e.deleteShader(r),e.deleteShader(n),!e.getProgramParameter(o,e.LINK_STATUS)){e=e.getProgramInfoLog(o);throw new Error("Failed to initialised shaders, Error linking:"+e)}this._program=o,this.bind(),this._getAttributes(t.attributes),this._getUniforms(t.uniforms),i.unbind()}r.ShaderProgram=t},{"./WebGLContext":20}],19:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(r,e){function n(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}a((s=s.apply(t,i||[])).next())})},h=this&&this.__generator||function(r,n){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Texture=void 0;var f=t("./WebGLContext"),t=(o.prototype.allocate=function(t,e,r){if(void 0===r&&(r=!1),this._textureObject)throw new Error("texture already initialised");var n=f.WebGLContext.getContext();this._textureObject=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this._textureObject),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var o=r?n.NEAREST:n.LINEAR;n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,o);var a=n.RGBA,r=n.RGBA,o=n.UNSIGNED_BYTE;n.texImage2D(n.TEXTURE_2D,0,a,t,e,0,r,o,null)},o.prototype.resize=function(t,e){if(!this._textureObject)throw new Error("texture not initialised");var r=f.WebGLContext.getContext();r.bindTexture(r.TEXTURE_2D,this._textureObject);var n=r.RGBA,o=r.RGBA,a=r.UNSIGNED_BYTE;r.texImage2D(r.TEXTURE_2D,0,n,t,e,0,o,a,null)},o.prototype.loadFromUrl=function(s,c){return void 0===c&&(c=!1),n(this,void 0,void 0,function(){var n,o,a,i,e,u=this;return h(this,function(t){if(this._textureObject)throw new Error("texture already initialised");return n=f.WebGLContext.getContext(),this._textureObject=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this._textureObject),o=n.RGBA,0,a=n.RGBA,i=n.UNSIGNED_BYTE,e=new Uint8Array([0,0,255,255]),n.texImage2D(n.TEXTURE_2D,0,o,1,1,0,a,i,e),n.bindTexture(n.TEXTURE_2D,null),[2,new Promise(function(e,t){var r=new Image;r.onerror=t,r.onload=function(){u._width=r.width,u._height=r.height,n.bindTexture(n.TEXTURE_2D,u._textureObject),n.texImage2D(n.TEXTURE_2D,0,o,a,i,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var t=c?n.NEAREST:n.LINEAR;n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.bindTexture(n.TEXTURE_2D,null),e()},r.src=s})]})})},o.prototype.getWidth=function(){if(!this._textureObject)throw new Error("texture not initialised");return this._width},o.prototype.getHeight=function(){if(!this._textureObject)throw new Error("texture not initialised");return this._height},o.prototype.bind=function(){if(!this._textureObject)throw new Error("texture not initialised");var t=f.WebGLContext.getContext();t.bindTexture(t.TEXTURE_2D,this._textureObject)},o.unbind=function(){var t=f.WebGLContext.getContext();t.bindTexture(t.TEXTURE_2D,null)},o.prototype.getRawObject=function(){if(!this._textureObject)throw new Error("texture not initialised");return this._textureObject},o);function o(){this._width=0,this._height=0,this._textureObject=null}r.Texture=t},{"./WebGLContext":20}],20:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebGLContext=void 0;var n=(o.initialise=function(t){if(!(o._gl=t.getContext("webgl2",{alpha:!0,antialias:!1,depth:!0,failIfMajorPerformanceCaveat:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!0,stencil:!1})))throw new Error("could not create webgl context")},o.getContext=function(){if(!o._gl)throw new Error("webgl context not initialised");return o._gl},o._gl=null,o);function o(){}r.WebGLContext=n},{}],21:[function(t,e,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardHandler=r.keyCodes=void 0,(o=n=n||{}).KEY_Z="z",o.KEY_W="w",o.KEY_S="s",o.KEY_A="a",o.KEY_Q="q",o.KEY_D="d",o.ARROW_LEFT="ArrowLeft",o.ARROW_RIGHT="ArrowRight",o.ARROW_UP="ArrowUp",o.ARROW_DOWN="ArrowDown",r.keyCodes=n;var o=(a.prototype.isPressed=function(t){return this._pressedKeys.get(t)||!1},a.prototype.activate=function(){this._activated||(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp),this._activated=!0)},a.prototype.deactivate=function(){this._activated&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp),this._activated=!1)},a);function a(){var e=this;this._pressedKeys=new Map,this._activated=!1;var r=[n.ARROW_LEFT,n.ARROW_RIGHT,n.ARROW_UP,n.ARROW_DOWN];this._activated=!1,this._handleKeyDown=function(t){-1!=r.indexOf(t.key)&&t.preventDefault(),e._pressedKeys.set(t.key,!0)}.bind(this),this._handleKeyUp=function(t){-1!=r.indexOf(t.key)&&t.preventDefault(),e._pressedKeys.set(t.key,!1)}.bind(this)}r.KeyboardHandler=o},{}],22:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PointerLockSetup=void 0;r.PointerLockSetup=function(e){e.targetElement.requestPointerLock=e.targetElement.requestPointerLock||e.targetElement.mozRequestPointerLock||e.targetElement.webkitRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,e.targetElement.onclick=function(){e.targetElement.requestPointerLock&&e.targetElement.requestPointerLock()};function t(){document.pointerLockElement===e.targetElement||document.mozPointerLockElement===e.targetElement||document.webkitPointerLockElement===e.targetElement?e.enabledCallback():e.disabledCallback()}function r(t){console.error("Pointer lock failed"),console.error(t),e.errorCallback&&e.errorCallback(t)}"onpointerlockchange"in document?document.addEventListener("pointerlockchange",t,!1):"onmozpointerlockchange"in document?document.addEventListener("mozpointerlockchange",t,!1):"onwebkitpointerlockchange"in document&&document.addEventListener("webkitpointerlockchange",t,!1),"onpointerlockerror"in document?document.addEventListener("pointerlockerror",r,!1):"onmozpointerlockerror"in document?document.addEventListener("mozpointerlockerror",r,!1):"onwebkitpointerlockerror"in document&&document.addEventListener("webkitpointerlockerror",r,!1)}},{}],23:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,i,u,s){return new(u=u||Promise)(function(r,e){function n(t){try{a(s.next(t))}catch(t){e(t)}}function o(t){try{a(s.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}a((s=s.apply(t,i||[])).next())})},u=this&&this.__generator||function(r,n){var o,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=2&e[0]?a.return:e[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,e[1])).done)return i;switch(a=0,(e=i?[2&e[0],i.value]:e)[0]){case 0:case 1:i=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){u.label=e[1];break}if(6===e[0]&&u.label<i[1]){u.label=i[1],i=e;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(e);break}i[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],a=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(r,"__esModule",{value:!0}),t("fpsmeter");var s=t("./utilities/Logger"),c=t("./utilities/FreeFlyController"),h=t("./inputs/PointerLockSetup"),f=t("./graphics/Renderer"),G=!1;window.addEventListener("load",function(){return n(void 0,void 0,void 0,function(){var x,E,e,w,S,P,T,r,n,o,A,O,R,L,j,k,C,I,D,Y,a,i,F;return u(this,function(t){switch(t.label){case 0:return(x=new s.Logger("loggerOutput")).log("page loaded"),o=function(t){(x||console).error(t.message),G=!1},window.addEventListener("error",o,!1),r=document.getElementById("complete-loop-fpsmeter"),n=document.getElementById("update-fpsmeter"),(E={main:new FPSMeter(r,{theme:"dark"}),step:new FPSMeter(n,{theme:"dark"})}).step.toggle(),e=document.getElementById("rendering-canvas"),[4,(w=new f.Renderer).initialise(e)];case 1:for(t.sent(),x.log("renderer initialised"),S={perfAutoScaling:document.getElementById("auto-scaling-enabled"),resolution:document.getElementById("resolution"),anti_aliasing_enabled:document.getElementById("anti-aliasing-enabled"),angle_x:document.getElementById("angle-x"),angle_y:document.getElementById("angle-y"),angle_z:document.getElementById("angle-z"),angle_w:document.getElementById("angle-w"),debug_mode_enabled:document.getElementById("debug-mode-enabled")},P=function(t){w.setResolutionCoef(1/t);var e=w.getCurrentSize(),r=e[0]*e[1];x.log("resolution changed (1/"+t+") => "+e[0]+"x"+e[1]+" ("+r+"px)")},S.resolution.addEventListener("input",function(t){t=t.target.value;P(t)}),S.anti_aliasing_enabled.addEventListener("click",function(){var t=!0===S.anti_aliasing_enabled.checked;w.setAntiAliasing(t),x.log("Anti aliasing change: "+(!0==t?"enabled":"disabled"))}),o=S.resolution.value,P(o),x.log("user interface initialised"),T=new c.FreeFlyController({position:[-10,9,22],theta:-63,phi:-19,mouseSensivity:.1,movingSpeed:10}),r=function(){T.isActivated()||(x.log("The pointer lock status is now locked"),T.activate(e))},n=function(){x.log("The pointer lock status is now unlocked"),T.deactivate(e)},o=function(t){x.log("The pointer lock sent an error, message="+t.message)},h.PointerLockSetup({targetElement:e,enabledCallback:r,disabledCallback:n,errorCallback:o}),A=0,O=Date.now(),L=!(R=0),j=60,S.perfAutoScaling.addEventListener("input",function(){j=60,L=!0===S.perfAutoScaling.checked,x.log("Performance auto scaler change: "+(!0===L?"enabled":"disabled"))}),k=[],I=[],Y=[],a=D=C=0;a<6;++a)for(i=0;i<6;++i)Y.push([[10*i-30,3*Math.random()-4,10*a-30],[Math.random(),Math.random(),Math.random()]]);return G=!0,F=function(){G&&window.requestAnimationFrame(F),E.main.tick(),E.main.tickStart(),E.step.tickStart();var t=Date.now();A=(t-O)/1e3,O=t,!0===L&&(.025<A?(A=.025,--j<0&&(x.log("performance auto scaling: slow framerate, scaling down resolution"),1<=(h=parseInt(S.resolution.value,10)+1)&&h<=10&&(P(h),S.resolution.value=""+h),j=60)):j=60),R+=A,T.update(A);for(var e=1;e<6;++e)for(var r=1;r<6;++r){var n=Y[6*(e-1)+(r-1)],o=Y[6*+e+(r-1)],a=Y[6*(e-1)+ +r],i=Y[6*+e+ +r],u=n[1],s=i[1];w.pushTriangle(o[0],n[0],a[0],u,.1,!0,!0),w.pushTriangle(i[0],o[0],a[0],s,.1,!0,!0)}w.pushTriangle([5,5,1],[10,10,1],[10,5,1],[1,1,1],.1,!0,!0),w.pushBox([5,0,10],0,0,0,[2,.5,1],[1,0,0],0,!1),w.pushBox([6,.5,10],0,0,0,[.75,.25,.5],[.5,.5,.5],0,!1),w.pushBox([4,-.25,11.5],0,0,0,[1,.25,.5],[1,1,0],0,!1),w.pushBox([4,-.25,8.5],0,0,0,[1,.25,.5],[1,1,0],0,!1),w.pushBox([4,1,10],0,0,0,[1,.5,.25],[1,1,0],0,!1),w.pushSphere([15,0,15],1,[1,1,1],.5,!1),w.pushSphere([5,0,5],1,[1,1,1],.5,!1);var c=(S.angle_x.value/100*2-1)*Math.PI*2,t=(S.angle_y.value/100*2-1)*Math.PI*2,h=(S.angle_z.value/100*2-1)*Math.PI*2;w.pushBox([0,0,0],c,t,h,[2,1,.5],[1,.5,.5],.8,!0),w.pushBox([0,2.5,0],c,t,h,[2,1,.5],[1,.5,.5],.8,!0);for(var f=0;f<8;++f){var l=f/8;w.pushSphere([8*Math.sin(.5*R+2*Math.PI*l),+Math.sin(.5*R+2*Math.PI*l)+1,8*Math.cos(.5*R+2*Math.PI*l)],.5,[l,1-l,0],0,!1)}w.pushSunLight([1,1,1],1);t=-.5*R,h=[7*Math.sin(t),4,7*Math.cos(t)],t=[7*Math.sin(t+.5*Math.PI),4,7*Math.cos(t+.5*Math.PI)];if(w.pushSphere(h,.5,[1,1,1],0,!1,!1,!1),w.pushSphere(t,.5,[1,1,1],0,!1,!1,!1),w.pushSpotLight(h,5,10),w.pushSpotLight(t,5,10),0<C&&(C-=A),C<=0)C=3,k.push({pos:[-8,0,-5],vel:[0,0,0],life:.35,maxLife:.35}),D=0;else if(1<C&&C<3&&(0<D&&(D-=A),D<=0)){D=1/16;for(var p=function(t,e){return Math.random()*(e-t)+t},d=2<C&&C<3?5:1,f=0;f<d;++f){var m=[2*p(-1,1),4+2*p(-1,1),2*p(-1,1)];I.push({pos:[-8,1,-5],vel:m,life:1,maxLife:1})}}for(var v,b,f=0;f<k.length;)k[f].life-=A,k[f].life<=0?k.splice(f,1):(l=k[f].life/k[f].maxLife,0<(_=2*(b=Math.sin(l*Math.PI)))&&(b=v=2*b,w.pushSphere(k[f].pos,_,[1,1,1],0,!1,!1,!1),w.pushSpotLight(k[f].pos,5*v,5*b)),++f);for(var _,y,g=[1,.5,0],M=[.2,.2,.2],f=0;f<I.length;)I[f].life-=A,I[f].life<=0?I.splice(f,1):(I[f].pos[0]+=I[f].vel[0]*A,I[f].pos[1]+=I[f].vel[1]*A,I[f].pos[2]+=I[f].vel[2]*A,l=I[f].life/I[f].maxLife,0<(_=Math.sin(l*Math.PI))&&(y=[(y=function(t,e,r){return e+(t-e)*r})(g[0],M[0],l),y(g[1],M[1],l),y(g[2],M[2],l)],w.pushSphere(I[f].pos,_,y,0,!1,!0)),++f);w.lookAt(T.getPosition(),T.getTarget(),T.getUpAxis()),w.render(),!0===S.debug_mode_enabled.checked&&(w.render2(),w.pushLine([0,0,0],[100,0,0],[1,0,0]),w.pushLine([0,0,0],[0,100,0],[0,1,0]),w.pushLine([0,0,0],[0,0,100],[0,0,1]),w.flushWireframe()),w.reset(),E.step.tick()},x.log("running"),F(),[2]}})})},!1)},{"./graphics/Renderer":13,"./inputs/PointerLockSetup":22,"./utilities/FreeFlyController":24,"./utilities/Logger":25,fpsmeter:1}],24:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FreeFlyController=void 0;var n=t("../inputs/KeyboardHandler"),o=t("gl-matrix"),t=(a.prototype.activate=function(t){this._isActivated||(this._isActivated=!0,t.addEventListener("mousemove",this._mouseMoveCallback,!1),this._keyboardHandler.activate())},a.prototype.deactivate=function(t){this._isActivated&&(this._isActivated=!1,t.removeEventListener("mousemove",this._mouseMoveCallback,!1),this._keyboardHandler.deactivate())},a.prototype.isActivated=function(){return this._isActivated},a.prototype.update=function(t){if(this._keyboardHandler.isPressed(n.keyCodes.KEY_Z)||this._keyboardHandler.isPressed(n.keyCodes.KEY_W))for(var e=0;e<3;++e)this._position[e]+=this._forward[e]*t*this._movingSpeed;if(this._keyboardHandler.isPressed(n.keyCodes.KEY_S))for(e=0;e<3;++e)this._position[e]-=this._forward[e]*t*this._movingSpeed;if(this._keyboardHandler.isPressed(n.keyCodes.KEY_A)||this._keyboardHandler.isPressed(n.keyCodes.KEY_Q))for(e=0;e<3;++e)this._position[e]+=this._left[e]*t*this._movingSpeed;if(this._keyboardHandler.isPressed(n.keyCodes.KEY_D))for(e=0;e<3;++e)this._position[e]-=this._left[e]*t*this._movingSpeed;this._phi=Math.min(Math.max(this._phi,-89),89);var r=Math.cos(3.14*(this._phi+90)/180);this._up[1]=Math.sin(3.14*(this._phi+90)/180),this._up[0]=r*Math.cos(3.14*this._theta/180),this._up[2]=r*Math.sin(3.14*this._theta/180);r=Math.cos(3.14*this._phi/180);this._forward[1]=Math.sin(3.14*this._phi/180),this._forward[0]=r*Math.cos(3.14*this._theta/180),this._forward[2]=r*Math.sin(3.14*this._theta/180),this._left[0]=this._up[1]*this._forward[2]-this._up[2]*this._forward[1],this._left[1]=this._up[2]*this._forward[0]-this._up[0]*this._forward[2],this._left[2]=this._up[0]*this._forward[1]-this._up[1]*this._forward[0],this._target[0]=this._position[0]+this._forward[0],this._target[1]=this._position[1]+this._forward[1],this._target[2]=this._position[2]+this._forward[2]},a.prototype.getPosition=function(){return o.vec3.clone(this._position)},a.prototype.getTarget=function(){return o.vec3.clone(this._target)},a.prototype.getUpAxis=function(){return o.vec3.clone(this._up)},a.prototype.getTheta=function(){return this._theta},a.prototype.getPhi=function(){return this._phi},a);function a(t){var r=this;this._isActivated=!1,this._theta=0,this._phi=0,this._position=o.vec3.fromValues(0,0,0),this._target=o.vec3.fromValues(0,0,0),this._forward=o.vec3.fromValues(1,0,0),this._left=o.vec3.fromValues(0,0,1),this._up=o.vec3.fromValues(0,1,0),this._keyboardHandler=new n.KeyboardHandler,this._mouseSensivity=t.mouseSensivity,this._movingSpeed=t.movingSpeed,this._position[0]=t.position[0],this._position[1]=t.position[1],this._position[2]=t.position[2],this._theta=t.theta,this._phi=t.phi;this._mouseMoveCallback=function(t){var e=t.movementX||t.mozMovementX||t.webkitMovementX||0,t=t.movementY||t.mozMovementY||t.webkitMovementY||0;r._theta+=e*r._mouseSensivity,r._phi-=t*r._mouseSensivity}.bind(this)}r.FreeFlyController=t},{"../inputs/KeyboardHandler":21,"gl-matrix":3}],25:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Logger=void 0;var n=(o.prototype.log=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];0!==e.length&&(t=Array.prototype.slice.call(e).join(" "),console.log(t),this._pushText(t))},o.prototype.error=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];0!==e.length&&(t=Array.prototype.slice.call(e).join(" "),console.error(t),this._pushText("[ERR] - "+t))},o.prototype._pushText=function(t){this._lines.push(t),this._lines.length>this._maxLines&&this._lines.splice(0,this._lines.length-this._maxLines),this._textAreaElement.value=this._lines.join("\n")+"\n",this._textAreaElement.scrollTop=this._textAreaElement.scrollHeight},o.prototype.peekLast=function(){if(0<this._lines.length)return this._lines[this._lines.length-1]},o.prototype.popLast=function(){0<this._lines.length&&this._lines.splice(this._lines.length-1,1)},o);function o(t){if(this._lines=[],this._maxLines=30,this._textAreaElement=document.getElementById(t),!this._textAreaElement)throw new Error("DOM elements not found, id="+t);this._textAreaElement.value=""}r.Logger=n},{}]},{},[23]);